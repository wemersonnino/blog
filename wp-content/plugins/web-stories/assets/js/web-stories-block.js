(()=>{var e={184:(e,t)=>{var r;!function(){"use strict";var i={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)){if(r.length){var l=s.apply(null,r);l&&e.push(l)}}else if("object"===o)if(r.toString===Object.prototype.toString)for(var n in r)i.call(r,n)&&r[n]&&e.push(n);else e.push(r.toString())}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(r=function(){return s}.apply(t,[]))||(e.exports=r)}()},474:(e,t,r)=>{var i,s;void 0===(s="function"==typeof(i=function(){var e="undefined"!=typeof window?window:this,t=e.Glider=function(t,r){var i=this;if(t._glider)return t._glider;if(i.ele=t,i.ele.classList.add("glider"),i.ele._glider=i,i.opt=Object.assign({},{slidesToScroll:1,slidesToShow:1,resizeLock:!0,duration:.5,easing:function(e,t,r,i,s){return i*(t/=s)*t+r}},r),i.animate_id=i.page=i.slide=0,i.arrows={},i._opt=i.opt,i.opt.skipTrack)i.track=i.ele.children[0];else for(i.track=document.createElement("div"),i.ele.appendChild(i.track);1!==i.ele.children.length;)i.track.appendChild(i.ele.children[0]);i.track.classList.add("glider-track"),i.init(),i.resize=i.init.bind(i,!0),i.event(i.ele,"add",{scroll:i.updateControls.bind(i)}),i.event(e,"add",{resize:i.resize})},r=t.prototype;return r.init=function(e,t){var r=this,i=0,s=0;r.slides=r.track.children,[].forEach.call(r.slides,(function(e,t){e.classList.add("glider-slide"),e.setAttribute("data-gslide",t)})),r.containerWidth=r.ele.clientWidth;var o=r.settingsBreakpoint();if(t||(t=o),"auto"===r.opt.slidesToShow||void 0!==r.opt._autoSlide){var l=r.containerWidth/r.opt.itemWidth;r.opt._autoSlide=r.opt.slidesToShow=r.opt.exactWidth?l:Math.max(1,Math.floor(l))}"auto"===r.opt.slidesToScroll&&(r.opt.slidesToScroll=Math.floor(r.opt.slidesToShow)),r.itemWidth=r.opt.exactWidth?r.opt.itemWidth:r.containerWidth/r.opt.slidesToShow,[].forEach.call(r.slides,(function(e){e.style.height="auto",e.style.width=r.itemWidth+"px",i+=r.itemWidth,s=Math.max(e.offsetHeight,s)})),r.track.style.width=i+"px",r.trackWidth=i,r.isDrag=!1,r.preventClick=!1,r.opt.resizeLock&&r.scrollTo(r.slide*r.itemWidth,0),(o||t)&&(r.bindArrows(),r.buildDots(),r.bindDrag()),r.updateControls(),r.emit(e?"refresh":"loaded")},r.bindDrag=function(){var e=this;e.mouse=e.mouse||e.handleMouse.bind(e);var t=function(){e.mouseDown=void 0,e.ele.classList.remove("drag"),e.isDrag&&(e.preventClick=!0),e.isDrag=!1},r={mouseup:t,mouseleave:t,mousedown:function(t){t.preventDefault(),t.stopPropagation(),e.mouseDown=t.clientX,e.ele.classList.add("drag")},mousemove:e.mouse,click:function(t){e.preventClick&&(t.preventDefault(),t.stopPropagation()),e.preventClick=!1}};e.ele.classList.toggle("draggable",!0===e.opt.draggable),e.event(e.ele,"remove",r),e.opt.draggable&&e.event(e.ele,"add",r)},r.buildDots=function(){var e=this;if(e.opt.dots){if("string"==typeof e.opt.dots?e.dots=document.querySelector(e.opt.dots):e.dots=e.opt.dots,e.dots){e.dots.innerHTML="",e.dots.classList.add("glider-dots");for(var t=0;t<Math.ceil(e.slides.length/e.opt.slidesToShow);++t){var r=document.createElement("button");r.dataset.index=t,r.setAttribute("aria-label","Page "+(t+1)),r.setAttribute("role","tab"),r.className="glider-dot "+(t?"":"active"),e.event(r,"add",{click:e.scrollItem.bind(e,t,!0)}),e.dots.appendChild(r)}}}else e.dots&&(e.dots.innerHTML="")},r.bindArrows=function(){var e=this;e.opt.arrows?["prev","next"].forEach((function(t){var r=e.opt.arrows[t];r&&("string"==typeof r&&(r=document.querySelector(r)),r&&(r._func=r._func||e.scrollItem.bind(e,t),e.event(r,"remove",{click:r._func}),e.event(r,"add",{click:r._func}),e.arrows[t]=r))})):Object.keys(e.arrows).forEach((function(t){var r=e.arrows[t];e.event(r,"remove",{click:r._func})}))},r.updateControls=function(e){var t=this;e&&!t.opt.scrollPropagate&&e.stopPropagation();var r=t.containerWidth>=t.trackWidth;t.opt.rewind||(t.arrows.prev&&(t.arrows.prev.classList.toggle("disabled",t.ele.scrollLeft<=0||r),t.arrows.prev.classList.contains("disabled")?t.arrows.prev.setAttribute("aria-disabled",!0):t.arrows.prev.setAttribute("aria-disabled",!1)),t.arrows.next&&(t.arrows.next.classList.toggle("disabled",Math.ceil(t.ele.scrollLeft+t.containerWidth)>=Math.floor(t.trackWidth)||r),t.arrows.next.classList.contains("disabled")?t.arrows.next.setAttribute("aria-disabled",!0):t.arrows.next.setAttribute("aria-disabled",!1))),t.slide=Math.round(t.ele.scrollLeft/t.itemWidth),t.page=Math.round(t.ele.scrollLeft/t.containerWidth);var i=t.slide+Math.floor(Math.floor(t.opt.slidesToShow)/2),s=Math.floor(t.opt.slidesToShow)%2?0:i+1;1===Math.floor(t.opt.slidesToShow)&&(s=0),t.ele.scrollLeft+t.containerWidth>=Math.floor(t.trackWidth)&&(t.page=t.dots?t.dots.children.length-1:0),[].forEach.call(t.slides,(function(e,r){var o=e.classList,l=o.contains("visible"),n=t.ele.scrollLeft,a=t.ele.scrollLeft+t.containerWidth,c=t.itemWidth*r,d=c+t.itemWidth;[].forEach.call(o,(function(e){/^left|right/.test(e)&&o.remove(e)})),o.toggle("active",t.slide===r),i===r||s&&s===r?o.add("center"):(o.remove("center"),o.add([r<i?"left":"right",Math.abs(r-(r<i?i:s||i))].join("-")));var u=Math.ceil(c)>=Math.floor(n)&&Math.floor(d)<=Math.ceil(a);o.toggle("visible",u),u!==l&&t.emit("slide-"+(u?"visible":"hidden"),{slide:r})})),t.dots&&[].forEach.call(t.dots.children,(function(e,r){e.classList.toggle("active",t.page===r)})),e&&t.opt.scrollLock&&(clearTimeout(t.scrollLock),t.scrollLock=setTimeout((function(){clearTimeout(t.scrollLock),Math.abs(t.ele.scrollLeft/t.itemWidth-t.slide)>.02&&(t.mouseDown||t.trackWidth>t.containerWidth+t.ele.scrollLeft&&t.scrollItem(t.getCurrentSlide()))}),t.opt.scrollLockDelay||250))},r.getCurrentSlide=function(){var e=this;return e.round(e.ele.scrollLeft/e.itemWidth)},r.scrollItem=function(e,t,r){r&&r.preventDefault();var i=this,s=e;if(++i.animate_id,!0===t)e*=i.containerWidth,e=Math.round(e/i.itemWidth)*i.itemWidth;else{if("string"==typeof e){var o="prev"===e;if(e=i.opt.slidesToScroll%1||i.opt.slidesToShow%1?i.getCurrentSlide():i.slide,o?e-=i.opt.slidesToScroll:e+=i.opt.slidesToScroll,i.opt.rewind){var l=i.ele.scrollLeft;e=o&&!l?i.slides.length:!o&&l+i.containerWidth>=Math.floor(i.trackWidth)?0:e}}e=Math.max(Math.min(e,i.slides.length),0),i.slide=e,e=i.itemWidth*e}return i.scrollTo(e,i.opt.duration*Math.abs(i.ele.scrollLeft-e),(function(){i.updateControls(),i.emit("animated",{value:s,type:"string"==typeof s?"arrow":t?"dot":"slide"})})),!1},r.settingsBreakpoint=function(){var t=this,r=t._opt.responsive;if(r){r.sort((function(e,t){return t.breakpoint-e.breakpoint}));for(var i=0;i<r.length;++i){var s=r[i];if(e.innerWidth>=s.breakpoint)return t.breakpoint!==s.breakpoint&&(t.opt=Object.assign({},t._opt,s.settings),t.breakpoint=s.breakpoint,!0)}}var o=0!==t.breakpoint;return t.opt=Object.assign({},t._opt),t.breakpoint=0,o},r.scrollTo=function(t,r,i){var s=this,o=(new Date).getTime(),l=s.animate_id,n=function(){var a=(new Date).getTime()-o;s.ele.scrollLeft=s.ele.scrollLeft+(t-s.ele.scrollLeft)*s.opt.easing(0,a,0,1,r),a<r&&l===s.animate_id?e.requestAnimationFrame(n):(s.ele.scrollLeft=t,i&&i.call(s))};e.requestAnimationFrame(n)},r.removeItem=function(e){var t=this;t.slides.length&&(t.track.removeChild(t.slides[e]),t.refresh(!0),t.emit("remove"))},r.addItem=function(e){var t=this;t.track.appendChild(e),t.refresh(!0),t.emit("add")},r.handleMouse=function(e){var t=this;t.mouseDown&&(t.isDrag=!0,t.ele.scrollLeft+=(t.mouseDown-e.clientX)*(t.opt.dragVelocity||3.3),t.mouseDown=e.clientX)},r.round=function(e){var t=1/(this.opt.slidesToScroll%1||1);return Math.round(e*t)/t},r.refresh=function(e){this.init(!0,e)},r.setOption=function(e,t){var r=this;r.breakpoint&&!t?r._opt.responsive.forEach((function(t){t.breakpoint===r.breakpoint&&(t.settings=Object.assign({},t.settings,e))})):r._opt=Object.assign({},r._opt,e),r.breakpoint=0,r.settingsBreakpoint()},r.destroy=function(){var t=this,r=t.ele.cloneNode(!0),i=function(e){e.removeAttribute("style"),[].forEach.call(e.classList,(function(t){/^glider/.test(t)&&e.classList.remove(t)}))};r.children[0].outerHTML=r.children[0].innerHTML,i(r),[].forEach.call(r.getElementsByTagName("*"),i),t.ele.parentNode.replaceChild(r,t.ele),t.event(e,"remove",{resize:t.resize}),t.emit("destroy")},r.emit=function(t,r){var i=this,s=new e.CustomEvent("glider-"+t,{bubbles:!i.opt.eventPropagate,detail:r});i.ele.dispatchEvent(s)},r.event=function(e,t,r){var i=e[t+"EventListener"].bind(e);Object.keys(r).forEach((function(e){i(e,r[e])}))},t})?i.call(t,r,t,e):i)||(e.exports=s)}},t={};function __webpack_require__(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,__webpack_require__),s.exports}(()=>{"use strict";const e="webStoriesTrackingDataLayer",t=function(){window[e]=window[e]||[],window[e].push(arguments)},{trackingAllowed:r,trackingId:i,trackingIdGA4:s,appVersion:o,userProperties:l}=window.webStoriesTrackingSettings||{},n={trackingAllowed:!1,trackingEnabled:!1,trackingId:"",trackingIdGA4:"",userProperties:{},appName:"",trackingAllowed:r,trackingId:i,trackingIdGA4:s,appVersion:o,userProperties:l},a="data-web-stories-tracking";function c(e){return new Promise(((t,r)=>{const i=document.createElement("script");i.setAttribute(a,""),i.async=!0,i.src=e,i.addEventListener("load",t),i.addEventListener("error",r),document.head.appendChild(i)}))}async function d(){let r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(document.querySelector(`script[${a}]`))return;try{await c(`https://www.googletagmanager.com/gtag/js?id=${n.trackingId}&l=${e}`)}catch{return}const i=n.appName,s="/"+n.appName.replace(/ /g,"-").toLowerCase();t("js",new Date),t("set",{custom_map:{dimension1:"analytics",dimension2:"adNetwork",dimension3:"search_order",dimension4:"search_orderby",dimension5:"file_size",dimension6:"file_type",dimension7:"status",dimension8:"siteLocale",dimension9:"userLocale",dimension10:"userRole",dimension11:"enabledExperiments",dimension12:"wpVersion",dimension13:"phpVersion",dimension14:"isMultisite",dimension15:"name",dimension16:"activePlugins",dimension20:"serverEnvironment"}}),t("set","user_properties",n.userProperties),t("config",n.trackingId,{anonymize_ip:!0,app_name:n.appName,app_version:n.appVersion,send_page_view:r,transport_type:"beacon",page_title:i,page_path:s,...n.userProperties}),t("config",n.trackingIdGA4,{app_name:n.appName,app_version:n.appVersion,send_page_view:r,transport_type:"beacon",page_title:i,page_path:s})}const u=async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.trackingAllowed&&!n.trackingEnabled&&(await d(e),n.trackingEnabled=!0)};const m=async function(){return await u(),Boolean(n.trackingEnabled)};const h=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((i=>{const s=setTimeout((()=>{window.console.warn(`[Web Stories] Tracking event "${e}" took too long to fire.`),i()}),1e3);t("event",e,{...r,event_callback:()=>{clearTimeout(s),i()}})}))};const p=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!await m())return Promise.resolve();const i={description:`${e}: ${t}`,fatal:r};return h("exception",i)},b=["ResizeObserver loop limit exceeded"];function w(e){if(e.filename&&!e.filename.includes("web-stories"))return;if(b.includes(e.message))return;const t=`${e.message} (${e.lineno}:${e.colno})`;p("uncaught_error",t,!0)}function g(e){const t=e.reason||"Promise rejection";p("uncaught_promise",t)}const f=function(){window.addEventListener("error",w),window.addEventListener("unhandledrejection",g)};const _=async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.appName=e,await u(t),f()};const v=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!await m())return Promise.resolve();let r={};const{search_type:i,duration:s,title_length:o,unread_count:l,...a}=t;return i?r={...a,event_label:i}:s?r={...a,value:s}:o?r={...a,value:o}:l&&(r={...a,value:l}),Object.values(r).length?(h(e,{...r,send_to:n.trackingId}),h(e,{...t,send_to:n.trackingIdGA4}),Promise.resolve()):h(e,t)};const y=window.wp.blocks,E=window.React,S=window.wp.i18n,k=window.wp.compose;var C,x,L;function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},T.apply(this,arguments)}const SvgCirclesCarouselView=e=>{let{title:t,titleId:r,...i}=e;return E.createElement("svg",T({viewBox:"0 0 23 18",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},i),t?E.createElement("title",{id:r},t):null,C||(C=E.createElement("circle",{r:3,transform:"matrix(1 0 0 -1 20 9)"})),x||(x=E.createElement("circle",{r:3,transform:"matrix(1 0 0 -1 3 9)"})),L||(L=E.createElement("circle",{r:7.1,transform:"matrix(1 0 0 -1 12 9)",stroke:"#fff",strokeWidth:2.2})))},N=(0,E.memo)(SvgCirclesCarouselView);var M,B,A,O,I;function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},W.apply(this,arguments)}const SvgCirclesCarouselViewPanelIcon=e=>{let{title:t,titleId:r,...i}=e;return E.createElement("svg",W({viewBox:"0 0 42 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},i),t?E.createElement("title",{id:r},t):null,M||(M=E.createElement("circle",{cx:21,cy:12,r:11,fill:"#fff",stroke:"#347BB5",strokeWidth:2})),B||(B=E.createElement("mask",{id:"a",fill:"#fff"},E.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M34.803 17.88A14.952 14.952 0 0 0 36 12c0-2.087-.426-4.075-1.197-5.88a6 6 0 1 1 0 11.761Z"}))),A||(A=E.createElement("path",{d:"m34.803 17.88-1.84-.784-.962 2.258 2.406.487.396-1.96Zm0-11.76-.396-1.96L32 4.645l.963 2.258 1.84-.785ZM34 12c0 1.813-.37 3.534-1.036 5.096l3.679 1.57A16.952 16.952 0 0 0 38 12h-4Zm-1.036-5.096A12.952 12.952 0 0 1 34 12h4c0-2.362-.483-4.616-1.357-6.665l-3.68 1.57ZM35.2 8.08c.257-.052.524-.08.8-.08V4c-.544 0-1.077.055-1.593.16l.793 3.92ZM36 8a4 4 0 0 1 4 4h4a8 8 0 0 0-8-8v4Zm4 4a4 4 0 0 1-4 4v4a8 8 0 0 0 8-8h-4Zm-4 4c-.276 0-.543-.028-.8-.08l-.793 3.92c.516.105 1.05.16 1.593.16v-4Z",fill:"#347BB5",mask:"url(#a)"})),O||(O=E.createElement("mask",{id:"b",fill:"#fff"},E.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.197 6.12a6 6 0 1 0 0 11.761A14.952 14.952 0 0 1 6 12c0-2.087.426-4.075 1.197-5.88Z"}))),I||(I=E.createElement("path",{d:"m7.197 6.12 1.84.784.962-2.258-2.406-.487-.396 1.96Zm0 11.76.396 1.96L10 19.355l-.963-2.258-1.84.785ZM6 8c.276 0 .543.028.8.08l.793-3.92A8.028 8.028 0 0 0 6 4v4Zm-4 4a4 4 0 0 1 4-4V4a8 8 0 0 0-8 8h4Zm4 4a4 4 0 0 1-4-4h-4a8 8 0 0 0 8 8v-4Zm.8-.08c-.257.052-.524.08-.8.08v4c.544 0 1.077-.055 1.593-.16L6.8 15.92Zm2.236 1.176A12.952 12.952 0 0 1 8 12H4c0 2.362.483 4.616 1.357 6.665l3.68-1.57ZM8 12c0-1.813.37-3.534 1.036-5.096l-3.679-1.57A16.952 16.952 0 0 0 4 12h4Z",fill:"#347BB5",mask:"url(#b)"})))},P=(0,E.memo)(SvgCirclesCarouselViewPanelIcon);var R,z;function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},j.apply(this,arguments)}const SvgLatestStoriesBlock=e=>{let{title:t,titleId:r,...i}=e;return E.createElement("svg",j({viewBox:"0 0 31 42",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},i),t?E.createElement("title",{id:r},t):null,R||(R=E.createElement("rect",{x:1,y:1,width:29,height:40,rx:1,stroke:"currentColor",strokeWidth:2})),z||(z=E.createElement("path",{fill:"currentColor",d:"M6 27h19v2H6zM6 31h4v2H6z"})))},D=(0,E.memo)(SvgLatestStoriesBlock);var F,$;function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},H.apply(this,arguments)}const SvgSelectedStoriesBlock=e=>{let{title:t,titleId:r,...i}=e;return E.createElement("svg",H({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},i),t?E.createElement("title",{id:r},t):null,F||(F=E.createElement("circle",{cx:16,cy:16,r:15,stroke:"currentColor",strokeWidth:2})),$||($=E.createElement("path",{d:"M16 9.263V16m0 6.737V16m0 0H9.263M16 16h6.737",stroke:"currentColor",strokeWidth:2})))},V=(0,E.memo)(SvgSelectedStoriesBlock);var U;function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Z.apply(this,arguments)}const SvgEmbedStoryBlock=e=>{let{title:t,titleId:r,...i}=e;return E.createElement("svg",Z({viewBox:"0 0 32 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},i),t?E.createElement("title",{id:r},t):null,U||(U=E.createElement("path",{d:"M14 1H8a7 7 0 1 0 0 14h6M18 1h6a7 7 0 1 1 0 14h-6M9 8h13.5",stroke:"currentColor",strokeWidth:2})))},G=(0,E.memo)(SvgEmbedStoryBlock);var q;function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Q.apply(this,arguments)}const SvgGridView=e=>{let{title:t,titleId:r,...i}=e;return E.createElement("svg",Q({viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},i),t?E.createElement("title",{id:r},t):null,q||(q=E.createElement("path",{d:"M0 0h5v6H0zM0 8h5v6H0zM7 0h5v6H7zM7 8h5v6H7z"})))},X=(0,E.memo)(SvgGridView);var K;function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},J.apply(this,arguments)}const SvgListView=e=>{let{title:t,titleId:r,...i}=e;return E.createElement("svg",J({viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},i),t?E.createElement("title",{id:r},t):null,K||(K=E.createElement("path",{d:"M0 0h12v3H0zM0 5h12v3H0zM0 10h12v3H0z"})))},Y=(0,E.memo)(SvgListView);var ee;function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},te.apply(this,arguments)}const SvgBoxCarouselView=e=>{let{title:t,titleId:r,...i}=e;return E.createElement("svg",te({viewBox:"0 0 18 14",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},i),t?E.createElement("title",{id:r},t):null,ee||(ee=E.createElement("path",{d:"M4 14h10V0H4zM16 12h2V2h-2zM0 12h2V2H0z"})))},re=(0,E.memo)(SvgBoxCarouselView);var ie;function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},se.apply(this,arguments)}const SvgGridViewPanelIcon=e=>{let{title:t,titleId:r,...i}=e;return E.createElement("svg",se({viewBox:"0 0 20 27",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},i),t?E.createElement("title",{id:r},t):null,ie||(ie=E.createElement("path",{stroke:"currentColor",strokeWidth:2,d:"M1 1h6.462v9.538H1zM1 15.615h6.462v9.538H1zM12.539 1h6.462v9.538h-6.462zM12.539 15.615h6.462v9.538h-6.462z"})))},oe=(0,E.memo)(SvgGridViewPanelIcon);var le;function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ne.apply(this,arguments)}const SvgListViewPanelIcon=e=>{let{title:t,titleId:r,...i}=e;return E.createElement("svg",ne({viewBox:"0 0 22 26",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},i),t?E.createElement("title",{id:r},t):null,le||(le=E.createElement("path",{stroke:"currentColor",strokeWidth:2,d:"M1 1h20v4H1zM1 11h20v4H1zM1 21h20v4H1z"})))},ae=(0,E.memo)(SvgListViewPanelIcon);var ce,de;function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ue.apply(this,arguments)}const SvgBoxCarouselViewPanelIcon=e=>{let{title:t,titleId:r,...i}=e;return E.createElement("svg",ue({viewBox:"0 0 26 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},i),t?E.createElement("title",{id:r},t):null,ce||(ce=E.createElement("path",{stroke:"currentColor",strokeWidth:2,d:"M7 1h12v18H7z"})),de||(de=E.createElement("path",{fill:"currentColor",d:"M24 2h2v16h-2zM0 2h2v16H0z"})))},me=(0,E.memo)(SvgBoxCarouselViewPanelIcon),he=E.createElement(D,{width:31,height:42}),pe=E.createElement(V,{width:32,height:32}),be=E.createElement(G,{width:32,height:16}),we=E.createElement(re,{width:18,height:14}),ge=E.createElement(N,{className:"web-stories-block__toolbar-icon icon__circles-carousel",width:23,height:18}),fe=E.createElement(X,{width:12,height:14}),_e=E.createElement(Y,{width:12,height:13}),ve=E.createElement(me,{width:26,height:20}),ye=E.createElement(ae,{width:22,height:26}),Ee=E.createElement(P,{width:42,height:24}),Se=E.createElement(oe,{width:20,height:27}),BlockIcon=()=>{const e=(0,k.useInstanceId)(BlockIcon);return E.createElement("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},E.createElement("circle",{cx:"32",cy:"32",r:"32",transform:"rotate(-180 32 32)",fill:`url(#gradient-${e})`}),E.createElement("g",{filter:`url(#filter-${e})`,fill:"#fff"},E.createElement("path",{d:"M41.6 19.2a3.2 3.2 0 013.2 3.2v19.2a3.2 3.2 0 01-3.2 3.2V19.2zm-24 0a3.2 3.2 0 013.2-3.2h14.4a3.2 3.2 0 013.2 3.2v25.6a3.2 3.2 0 01-3.2 3.2H20.8a3.2 3.2 0 01-3.2-3.2V19.2zM48 22.4a2.4 2.4 0 012.4 2.4v14.4a2.4 2.4 0 01-2.4 2.4V22.4z"})),E.createElement("defs",null,E.createElement("linearGradient",{id:`gradient-${e}`,x1:"13.255",y1:"6.599",x2:"35.289",y2:"62.791",gradientUnits:"userSpaceOnUse"},E.createElement("stop",{stopColor:"#79B3FF"}),E.createElement("stop",{offset:"1",stopColor:"#CBACFF"})),E.createElement("filter",{id:`filter-${e}`,x:"8.96",y:"10.24",width:"46.08",height:"46.08",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},E.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),E.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),E.createElement("feOffset",{dy:"1.28"}),E.createElement("feGaussianBlur",{stdDeviation:"1.92"}),E.createElement("feColorMatrix",{values:"0 0 0 0 0.423529 0 0 0 0 0.490196 0 0 0 0 0.733333 0 0 0 0.3 0"}),E.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),E.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}))))},ke={url:{type:"string"},title:{type:"string"},poster:{type:"string"},width:{type:"number",default:360},height:{type:"number",default:600},align:{type:"string",default:"none"}};const Ce={attributes:ke,save:function(e){let{attributes:t}=e;const{url:r,title:i,poster:s,width:o,height:l,align:n="none"}=t;return r&&i?E.createElement("div",{className:`wp-block-web-stories-embed align${n}`},E.createElement("amp-story-player",{style:{width:o?`${o}px`:void 0,height:l?`${l}px`:void 0},"data-testid":"amp-story-player"},E.createElement("a",{href:r,style:{"--story-player-poster":s?`url('${s}')`:void 0}},i))):null}},xe={attributes:ke,migrate:e=>({...e,blockType:"url",stories:[],viewType:"",numOfStories:5,numOfColumns:2,circleSize:96,orderby:"",order:"",archiveLinkLabel:"",authors:[],fieldState:{}}),save:function(e){let{attributes:t}=e;const{url:r,title:i,poster:s,width:o,height:l,align:n="none"}=t;return r&&i?E.createElement("div",{className:`wp-block-web-stories-embed align${n}`},E.createElement("a",{href:r},s?E.createElement("img",{alt:i,src:s,width:o,height:l}):i)):null},isEligible(e){let{url:t,blockType:r}=e;return Boolean(!r&&t&&t.trim().length)}},Le=[xe,Ce];const Te=function(e){let{attributes:t}=e;const{url:r,title:i,poster:s,width:o,height:l,align:n="none"}=t;return r&&i?E.createElement("div",{className:`wp-block-web-stories-embed align${n}`},E.createElement("a",{href:r},s?E.createElement("img",{alt:i,src:s,width:o,height:l,loading:"lazy",decoding:"async"}):i)):null},Ne=window.wp.element,Me=window.wp.apiFetch,Be=window.wp.components,Ae=window.wp.viewport,Oe=window.wp.data,Ie=window.wp.blockEditor,We=window.wp.url,Pe=window.wp.notices;const Re=function LoaderContainer(e){let{children:t}=e;return E.createElement("div",{className:"web-stories-block__loader-container"},t,E.createElement(Be.Spinner,null))},{config:{api:{stories:ze}}}=window.webStoriesBlockSettings;const je=function FetchSelectedStories(e){let{icon:t,label:r,selectedStoryIds:i=[],setSelectedStories:s,setIsFetching:o}=e;const{createErrorNotice:l}=(0,Oe.useDispatch)(Pe.store);return(0,Ne.useEffect)((()=>{(async()=>{try{const e=await Me({path:(0,We.addQueryArgs)(ze,{_embed:"author,wp:featuredmedia",context:"edit",include:i,orderby:i.length>0?"include":void 0})});e.length&&s(e)}catch(e){l((0,S.sprintf)(
/* translators: %s: error message. */
(0,S.__)("Unable to load stories. %s","web-stories"),e?.message||""),{type:"snackbar"})}finally{o(!1)}})()}),[]),E.createElement(Be.Placeholder,{icon:E.createElement(Ie.BlockIcon,{icon:t,showColors:!0}),label:r,className:"wp-block-web-stories-embed",instructions:!1},E.createElement(Re,null,(0,S.__)("Loading Stories…","web-stories")))},De=["image"],EmbedControls=e=>{const{switchBackToURLInput:t,width:r,height:i,minWidth:s,maxWidth:o,minHeight:l,maxHeight:n,poster:a,title:c,setAttributes:d}=e,u=`web-stories-embed-block__poster-image-description-${(0,k.useInstanceId)(EmbedControls,"web-stories-embed")}`,m=(0,Ne.createRef)(),h=(0,Ne.useCallback)((e=>{d({poster:e.url})}),[d]),p=(0,Ne.useCallback)((()=>{d({poster:""}),m.current.focus()}),[d,m]),b=Boolean(a);return E.createElement(E.Fragment,null,E.createElement(Ie.BlockControls,null,E.createElement(Be.ToolbarGroup,null,Be.ToolbarButton?E.createElement(Be.ToolbarButton,{onClick:t},(0,S.__)("Replace","web-stories")):E.createElement(Be.Button,{className:"components-toolbar__control",title:(0,S.__)("Replace","web-stories"),onClick:t}))),E.createElement(Ie.InspectorControls,null,E.createElement(Be.PanelBody,{title:(0,S.__)("Embed Settings","web-stories")},E.createElement(Be.PanelRow,null,E.createElement(Be.BaseControl,null,E.createElement(Be.TextControl,{type:"text",className:"web-stories-embed-title-control",label:(0,S.__)("Title","web-stories"),value:c||"",onChange:e=>d({title:e})}))),E.createElement(Ie.MediaUploadCheck,null,E.createElement(Be.PanelRow,null,E.createElement(Be.BaseControl,null,E.createElement(Be.BaseControl.VisualLabel,{className:"web-stories-embed-poster-label"},(0,S.__)("Poster image","web-stories")),b&&E.createElement("img",{src:a,alt:""}),E.createElement(Ie.MediaUpload,{title:(0,S.__)("Select poster image","web-stories"),onSelect:h,allowedTypes:De,render:e=>{let{open:t}=e;return E.createElement(Be.Button,{isPrimary:!0,onClick:t,ref:m,"aria-describedby":u},b?(0,S.__)("Replace","web-stories"):(0,S.__)("Select","web-stories"))}}),E.createElement("p",{id:u,hidden:!0},b?(0,S.sprintf)(
/* translators: %s: poster image URL. */
(0,S.__)("The current poster image url is %s","web-stories"),a):(0,S.__)("There is no poster image currently selected","web-stories")),b&&E.createElement(Be.Button,{className:"web-stories-embed-poster-remove",onClick:p},(0,S.__)("Remove","web-stories"))))),E.createElement(Be.PanelRow,null,E.createElement(Be.BaseControl,{className:"web-stories-embed-size-control"},E.createElement(Be.BaseControl.VisualLabel,null,(0,S.__)("Story dimensions","web-stories")),E.createElement("div",{className:"web-stories-embed-size-control__row"},E.createElement(Be.TextControl,{type:"number",className:"web-stories-embed-size-control__width",label:(0,S.__)("Width","web-stories"),value:r||"",min:s,max:o,onChange:e=>d({width:parseInt(e)})}),E.createElement(Be.TextControl,{type:"number",className:"web-stories-embed-size-control__height",label:(0,S.__)("Height","web-stories"),value:i||"",min:l,max:n,onChange:e=>d({height:parseInt(e)})})))))))},Fe=EmbedControls,$e=()=>E.createElement("div",{className:"wp-block-web-stories-embed is-loading"},E.createElement(Be.Spinner,null),E.createElement("p",null,(0,S.__)("Embedding…","web-stories"))),He=window.wp.coreData,Ve=window.wp.date;const Ue=function ItemOverlay(e){let{isSelected:t,story:r,addSelectedStory:i,removeSelectedStory:s}=e;const o=(0,Ne.useCallback)((e=>{e.preventDefault(),t||i(r)}),[i,r,t]),l=(0,Ne.useCallback)((e=>{e.preventDefault(),t?s(r):i(r)}),[s,i,r,t]);return E.createElement("button",{type:"button",className:t?"web-stories-story-preview-card__overlay item-selected":"web-stories-story-preview-card__overlay",onClick:o},t&&E.createElement("div",{className:"item-selected-icon"},E.createElement(Be.Icon,{className:"item-selected-icon-check",icon:"saved"}),E.createElement(Be.Icon,{className:"item-selected-icon-minus",icon:"minus",onClick:l}),E.createElement(Be.VisuallyHidden,null,(0,S.__)("Deselect","web-stories"))))},Ze=()=>{};const Ge=function StoryPreview(e){let{story:t,isSelected:r,addSelectedStory:i=Ze,removeSelectedStory:s=Ze}=e;const o=(0,Ve.__experimentalGetSettings)().formats.date,l=(0,Ve.dateI18n)(o,t.created),n=(0,Ne.useMemo)((()=>{if(!l)return null;switch(t.status){case"publish":return(0,S.sprintf)(
/* translators: %s: published date */
(0,S.__)("Published %s","web-stories"),l);case"future":return(0,S.sprintf)(
/* translators: %s: future publish date */
(0,S.__)("Scheduled %s","web-stories"),l);default:return(0,S.sprintf)(
/* translators: %s: last modified date */
(0,S.__)("Modified %s","web-stories"),l)}}),[t.status,l]),a=t.meta.web_stories_poster?.url,c=t._embedded?.["wp:featuredmedia"]?.[0]?.source_url,d=a||c;return E.createElement("div",{className:"web-stories-story-preview-card"},E.createElement("div",{className:"web-stories-story-preview-card__poster"},E.createElement(Ue,{isSelected:r,story:t,addSelectedStory:i,removeSelectedStory:s}),d&&E.createElement("img",{src:d,alt:"",width:640,height:853})),E.createElement("div",{className:"web-stories-story-preview-card__label"},E.createElement("div",{className:"web-stories-story-preview-card__title"},""===t.title.rendered?(0,S.__)("Untitled","web-stories"):t.title.rendered),t._embedded?.author?.[0]?.name&&E.createElement("div",null,t._embedded?.author?.[0]?.name),E.createElement("div",null,n)))},qe=[{label:(0,S.__)("Name","web-stories"),value:"name"},{label:(0,S.__)("Date Created","web-stories"),value:"date"},{label:(0,S.__)("Last Modified","web-stories"),value:"modified"},{label:(0,S.__)("Created By","web-stories"),value:"author"}];function AuthorSearch(e){let{label:t,options:r,onFilterValueChange:i,onChange:s,value:o}=e;return E.createElement(Be.ComboboxControl,{label:t,options:r,onFilterValueChange:i,onChange:s,value:o,className:"web-stories-story-picker-filter__combobox"})}function KeywordSearch(e){let{label:t,options:r,onFilterValueChange:i,onChange:s,value:o}=e;return E.createElement(Be.ComboboxControl,{label:t,options:r,onFilterValueChange:i,onChange:s,value:o,className:"web-stories-story-picker-filter__combobox"})}const Qe=function SelectStories(e){let{stories:t=[],selectedStories:r=[],setSelectedStories:i,hasAllStories:s,isLoading:o,fetchStories:l,maxNumOfStories:n}=e;const[a,c]=(0,Ne.useState)([]),[d,u]=(0,Ne.useState)(""),[m,h]=(0,Ne.useState)(""),[p,b]=(0,Ne.useState)("desc"),[w,g]=(0,Ne.useState)("modified"),f=(0,Ne.useRef)(1),{authors:_}=(0,Oe.useSelect)((e=>{const t={search:m},{getAuthors:r}=e(He.store);return{authors:r(t)}}),[m]),v=(0,Ne.useCallback)((()=>{l({author:a?.id||void 0,search:d||void 0,order:p,orderBy:w,page:f.current})}),[d,a,l,p,w]);(0,Ne.useEffect)((()=>{f.current=1,v()}),[d,a,p,w,v]);const y=(0,Ne.useCallback)((()=>{f.current++,v()}),[v]),C=(0,k.useDebounce)((e=>{u(e)}),300),x=(0,k.useDebounce)((e=>{h(e),c(""===e?null:_.find((t=>t.id===Number(e))))}),300),L=(0,Ne.useCallback)((e=>{c(""===e?null:_.find((t=>t.id===Number(e))))}),[_,c]),T=(0,Ne.useCallback)((e=>{g(e),b(["title","author"].includes(e)?"asc":"desc")}),[b,g]),N=(0,Ne.useMemo)((()=>_.filter((e=>{let{name:t}=e;return Boolean(t?.trim().length)})).map((e=>{let{id:t,name:r}=e;return{label:r,value:t}}))),[_]),M=(0,Ne.useMemo)((()=>t.filter((e=>{let{title:t}=e;return Boolean(t?.rendered?.trim()?.length)})).map((e=>{let{id:t,title:r}=e;return{label:r.rendered,value:t}}))),[t]),B=(0,Ne.useMemo)((()=>r.map((e=>e.id))),[r]),A=(0,Ne.useCallback)((e=>{B.includes(e.id)||(1!==n?r.length>=n||i([...r,e]):i([e]))}),[i,r,B,n]),O=(0,Ne.useCallback)((e=>{i(r.filter((t=>t.id!==e.id)))}),[r,i]);return E.createElement(E.Fragment,null,E.createElement("div",{className:"web-stories-story-picker-filter"},E.createElement("div",{className:"web-stories-story-picker-filter__search-container"},E.createElement("div",{className:"web-stories-story-picker-filter__search-inner"},E.createElement(KeywordSearch,{label:(0,S.__)("Search Stories","web-stories"),options:M,onFilterValueChange:C,onChange:C,value:d})),E.createElement(AuthorSearch,{label:(0,S.__)("Search by Author","web-stories"),options:N,onFilterValueChange:x,onChange:L,value:a?.id}),E.createElement("div",null,E.createElement(Be.SelectControl,{label:(0,S.__)("Sort","web-stories"),options:qe,value:w,onChange:T})))),!t.length&&d&&E.createElement("p",null,(0,S.sprintf)(
/* translators: %s: search term. */
(0,S.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),d)),!t.length&&!d&&E.createElement("p",null,(0,S.__)("Sorry, we couldn't find any results","web-stories")),t.length>=1&&E.createElement("div",{role:"list","aria-label":(0,S.__)("Viewing Stories","web-stories"),className:"web-stories-story-picker-filter__grid"},t.map((e=>{const t=B.includes(e.id);return E.createElement("div",{key:e.id,role:"listitem",className:"web-stories-story-picker-filter__grid_item"},E.createElement(Ge,{story:e,isSelected:t,addSelectedStory:A,removeSelectedStory:O}))}))),E.createElement("div",{className:"web-stories-story-picker-filter__load_more"},o&&E.createElement(Be.Spinner,null),!s&&t.length>0&&!o&&E.createElement(Be.Button,{variant:"primary",className:"is-primary",onClick:y},(0,S.__)("Load More","web-stories"))))};const Xe=function SortStories(e){let{selectedStories:t,setSelectedStories:r}=e;const[i,s]=(0,Ne.useState)(),[o,l]=(0,Ne.useState)(),n=(0,Ne.useCallback)(((e,i)=>{const s=t.map((e=>e.id));s.splice(i,0,s.splice(e,1).pop()),r(s.map((e=>t.find((t=>t.id===e)))))}),[t,r]),a=(0,k.useThrottle)(((e,t)=>{e.preventDefault(),t.classList.add("web-stories-story-picker-show-drag-inserter");const r=t.getBoundingClientRect();Math.abs(e.clientX-r.x)>Math.abs(e.clientX-(r.x+r.width))?t.classList.add("web-stories-story-picker-show-drag-inserter-right"):t.classList.remove("web-stories-story-picker-show-drag-inserter-right");const i=Number(t.children[0].dataset.order);s(i)}));return E.createElement("div",{role:"list","aria-label":(0,S.__)("Sorting Stories","web-stories"),className:"web-stories-story-picker-filter__grid"},t.map(((e,r)=>E.createElement("div",{key:e.id,onDragOver:e=>{a(e,e.currentTarget)},onDragLeave:e=>{e.preventDefault(),a.cancel();e.target.closest(".droppable").classList.remove("web-stories-story-picker-show-drag-inserter","web-stories-story-picker-show-drag-inserter-right")},onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),a.cancel(),o){const e=t.findIndex((e=>e.id===o));n(e,i)}e.target.closest(".droppable").classList.remove("web-stories-story-picker-show-drag-inserter","web-stories-story-picker-show-drag-inserter-right")},className:"droppable"},E.createElement("div",{"data-order":r,id:`draggable-story-${e.id}`},E.createElement(Be.Draggable,{elementId:`draggable-story-${e.id}`},(t=>{let{onDraggableStart:i,onDraggableEnd:s}=t;return E.createElement("div",{key:e.id,role:"listitem",className:"web-stories-story-picker-filter__grid_item",onDragStart:t=>{l(e.id),i(t)},onDragEnd:e=>{s(e)},"data-order":r,draggable:!0},E.createElement(Ge,{story:e}))})))))))},{config:{api:{stories:Ke}}}=window.webStoriesBlockSettings;const Je=function StoryPicker(e){let{selectedStories:t,setSelectedStories:r,closeStoryPicker:i,isSortingStories:s=!1,setIsSortingStories:o=(()=>{}),maxNumOfStories:l}=e;const{createErrorNotice:n}=(0,Oe.useDispatch)(Pe.store),[a,c]=(0,Ne.useState)(t),[d,u]=(0,Ne.useState)(!0),[m,h]=(0,Ne.useState)("idle"),[p,b]=(0,Ne.useState)([]),[w,g]=(0,Ne.useState)([]),f=(0,Ne.useCallback)((()=>{i(),r(a)}),[i,r,a]),_=(0,Ne.useCallback)((async function(){let{orderby:e="modified",order:t="desc",search:r,author:i,page:s=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o={_embed:"author,wp:featuredmedia",context:"edit",_web_stories_envelope:!0,search:r,author:i,page:s,per_page:10,orderby:e,order:t,status:"publish"};try{h("loading");const e=await Me({path:(0,We.addQueryArgs)(Ke,o)}),t=Number(e?.headers?.["X-WP-TotalPages"]);g(s===t),b((t=>1===s?e.body:[...t,...e.body]))}catch(e){h("error"),n((0,S.__)("Unable to load stories","web-stories"),{type:"snackbar"})}finally{h("idle"),u(!1)}}),[n]);(0,Ne.useEffect)((()=>{d&&_()}),[d,_]);const v=1===l?(0,S.__)("Selected Story","web-stories"):(0,S.__)("Selected Stories","web-stories");return E.createElement(Be.Modal,{title:v,onRequestClose:i,shouldCloseOnClickOutside:!1,className:"web-stories-story-picker-modal"},E.createElement("div",{className:"web-stories-story-picker-modal__content"},d?E.createElement(Re,null,(0,S.__)("Loading Stories…","web-stories")):s?E.createElement(Xe,{selectedStories:a,setSelectedStories:c}):E.createElement(Qe,{stories:p,selectedStories:a,setSelectedStories:c,hasAllStories:w,fetchStories:_,maxNumOfStories:l,isLoading:"loading"===m})),E.createElement("div",{className:"web-stories-story-picker-modal__footer"},E.createElement("div",{className:"web-stories-story-picker-modal__footer--left"},!s&&!d&&l>1&&E.createElement("p",null,(0,S.sprintf)(
/* translators: %1$d: Number of selected stories, %2$d: Maximum allowed stories */
(0,S._n)("%1$d of %2$d story selected","%1$d of %2$d stories selected",l,"web-stories"),a.length,l))),E.createElement("div",{className:"web-stories-story-picker-modal__footer--right"},l>1&&(s?E.createElement(Be.Button,{onClick:()=>o(!1)},(0,S.__)("Select Stories","web-stories")):E.createElement(Be.Button,{onClick:()=>o(!0),disabled:a.length<2},(0,S.__)("Rearrange Stories","web-stories"))),E.createElement(Be.Button,{isPrimary:!0,disabled:!a.length,onClick:f},(0,S.__)("Update","web-stories")))))},Ye=window.wp.primitives,et=(0,Ne.createElement)(Ye.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,Ne.createElement)(Ye.Path,{d:"M6.734 16.106l2.176-2.38-1.093-1.028-3.846 4.158 3.846 4.157 1.093-1.027-2.176-2.38h2.811c1.125 0 2.25.03 3.374 0 1.428-.001 3.362-.25 4.963-1.277 1.66-1.065 2.868-2.906 2.868-5.859 0-2.479-1.327-4.896-3.65-5.93-1.82-.813-3.044-.8-4.806-.788l-.567.002v1.5c.184 0 .368 0 .553-.002 1.82-.007 2.704-.014 4.21.657 1.854.827 2.76 2.657 2.76 4.561 0 2.472-.973 3.824-2.178 4.596-1.258.807-2.864 1.04-4.163 1.04h-.02c-1.115.03-2.229 0-3.344 0H6.734z"})),tt=e=>{let{url:t,onChange:r,onSubmit:i,onClose:s}=e;return E.createElement(Ie.URLPopover,{onClose:s},E.createElement("form",{className:"block-editor-media-placeholder__url-input-form","data-testid":"embed-placeholder-form",onSubmit:i},E.createElement("input",{className:"block-editor-media-placeholder__url-input-field",type:"url","aria-label":(0,S.__)("Story URL","web-stories"),placeholder:(0,S.__)("Paste or type URL","web-stories"),onChange:r,value:t}),E.createElement(Be.Button,{className:"block-editor-media-placeholder__url-input-submit-button",icon:et,label:(0,S.__)("Embed","web-stories"),type:"submit"})))},EmbedPlaceholder=e=>{let{icon:t,label:r,value:i,onSubmit:s,cannotEmbed:o,errorMessage:l,selectedStories:n=[],setSelectedStories:a}=e;const[c,d]=(0,Ne.useState)(i),[u,m]=(0,Ne.useState)(!1),[h,p]=(0,Ne.useState)(!1),b=(0,Ne.useCallback)((()=>{p(!1)}),[]),w=()=>m(!1),g=n.length>0;return E.createElement(E.Fragment,null,E.createElement(Be.Placeholder,{icon:E.createElement(Ie.BlockIcon,{icon:t,showColors:!0}),label:r,className:"wp-block-web-stories-embed",instructions:(0,S.__)("Select an existing story from your site, or add one with a URL.","web-stories")},E.createElement(E.Fragment,null,E.createElement(Be.Button,{isPrimary:!0,onClick:()=>p(!0)},g?(0,S.__)("Replace Story","web-stories"):(0,S.__)("Select Story","web-stories")),E.createElement("div",{className:"block-editor-media-placeholder__url-input-container"},E.createElement(Be.Button,{className:"block-editor-media-placeholder__button",onClick:()=>m(!0),isPressed:u,variant:"tertiary"},!g&&i?(0,S.__)("Replace URL","web-stories"):(0,S.__)("Insert from URL","web-stories")),u&&E.createElement(tt,{url:c,onChange:e=>{d(e.target.value)},onSubmit:e=>{e.preventDefault(),w(),s(c)},onClose:w}))),o&&E.createElement("div",{className:"components-placeholder__error"},E.createElement("div",{className:"components-placeholder__instructions"},(0,S.__)("Sorry, this content could not be embedded.","web-stories"),l&&E.createElement(E.Fragment,null," ",(0,S.sprintf)(
/* translators: %s: error message. */
(0,S.__)("Reason: %s.","web-stories"),l))))),h&&E.createElement(Je,{closeStoryPicker:b,maxNumOfStories:1,selectedStories:n,setSelectedStories:a}))};EmbedPlaceholder.defaultProps={cannotEmbed:!1};const rt=EmbedPlaceholder;const it=(0,Ne.forwardRef)((function StoryPlayer(e,t){let{url:r,title:i,poster:s,width:o,height:l}=e;return E.createElement("amp-story-player",{ref:t,style:{width:o?`${o}px`:void 0,height:l?`${l}px`:void 0},"data-testid":"amp-story-player"},E.createElement("a",{href:r},s?E.createElement("img",{alt:i,src:s,width:o,height:l,"data-amp-story-player-poster-img":!0}):i))}));const st=(0,Ne.forwardRef)((function EmbedPreview(e,t){let{url:r,title:i,poster:s,isSelected:o,width:l,height:n}=e;const[a,c]=(0,Ne.useState)(!1);(0,Ne.useEffect)((()=>{!o&&a&&c(!1)}),[o,a,c]);const d=(0,Ne.useCallback)((()=>c(!0)),[c]);return E.createElement("div",{className:"web-stories-embed-preview wp-block-embed__wrapper",style:{"--aspect-ratio":0!==l?n/l:1,"--width":`${l}px`,"--height":`${n}px`}},E.createElement(it,{url:r,title:i,poster:s,ref:t,onFocus:d}),!a&&E.createElement("div",{className:"web-stories-embed-preview-overlay","data-testid":"embed-preview-overlay",onMouseUp:d}))}));const ot=(0,Ae.withViewportMatch)({_isResizable:"medium"})((function StoryEmbedEdit(e){let{attributes:t,setAttributes:r,className:i,isSelected:s,_isResizable:o}=e;const{url:l="",width:n=360,height:a=600,align:c="none",poster:d,title:u,stories:m=[]}=t,[h,p]=(0,Ne.useState)(!1),[b,w]=(0,Ne.useState)(l),[g,f]=(0,Ne.useState)(!1),[_,y]=(0,Ne.useState)(!1),[C,x]=(0,Ne.useState)({}),[L,T]=(0,Ne.useState)(!1),[N,M]=(0,Ne.useState)(m),[B,A]=(0,Ne.useState)([]),O=g,I=!b||!l||h||L,W=k.useViewportMatch?k.useViewportMatch("medium"):o,P=(0,Ne.useRef)();(0,Ne.useEffect)((()=>{t.stories.toString()!==N.toString()&&r({stories:N})}),[t.stories,r,N]),(0,Ne.useEffect)((()=>{N.length&&!B.length&&y(!0)}),[N,B,y]),(0,Ne.useEffect)((()=>{w(l),v("story_embedded")}),[l]),(0,Ne.useEffect)((()=>{v("story_poster_changed")}),[d]),(0,Ne.useEffect)((()=>{if(P.current&&window.AmpStoryPlayer){new window.AmpStoryPlayer(window,P.current).load()}}),[O,I,W]);const R=(0,Ne.useCallback)((async e=>{if(e)try{f(!0);const t=encodeURIComponent(new URL(e).toString()),i=await Me({path:`web-stories/v1/embed?url=${t}`});T(!("string"==typeof i?.title)),x(i),r({url:e})}catch(e){e instanceof TypeError||x(e),T(!0)}finally{f(!1)}}),[r]);(0,Ne.useEffect)((()=>{(C?.title||C?.poster)&&r({title:C?.title,poster:C?.poster})}),[l,r,C?.title,C?.poster]);const z=(0,Ne.useCallback)((e=>{A(e),M(e.map((e=>e.id)));const t=e?.[0],i=t?.link;x({title:t?.title?.rendered,poster:t?._embedded?.["wp:featuredmedia"]?.[0]?.source_url}),w(i),p(!1),T(!1),r({url:i})}),[A,r]),j=(0,Ne.useCallback)((e=>{A([]),M([]),p(!1),T(!1),w(e),e!==l&&R(e)}),[l,R]),D=(0,Ne.useCallback)((()=>{p(!0)}),[]),{isRTL:F,maxWidth:$}=(0,Oe.useSelect)((e=>{const{getSettings:t}=e(Ie.store),r=t();return{isRTL:r.isRTL,maxWidth:r.maxWidth}}),[]),{toggleSelection:H}=(0,Oe.useDispatch)(Ie.store);if(O)return E.createElement($e,null);const V=(0,S.__)("Single Story","web-stories");if(I)return _?E.createElement(je,{icon:E.createElement(BlockIcon,null),label:V,selectedStoryIds:N,setSelectedStories:A,setIsFetching:y}):E.createElement(rt,{icon:E.createElement(BlockIcon,null),label:V,value:b,onSubmit:j,cannotEmbed:L,errorMessage:C?.message,selectedStories:B,setSelectedStories:z});const U=n/a,Z=n<a?20:20*U,G=a<n?20:20/U;if(!W)return E.createElement(E.Fragment,null,E.createElement(Fe,{switchBackToURLInput:D,poster:d,title:u,setAttributes:r,width:n,height:a,minWidth:Math.ceil(Z),maxWidth:Math.floor($),minHeight:Math.floor(G),maxHeight:Math.ceil($/U)}),E.createElement("div",{className:`${i} web-stories-embed align${c}`},E.createElement(st,{url:l,title:u,poster:d,ref:P,isSelected:s,width:n,height:a})));const q="center"===c||"none"===c||"right"===c&&F||"left"===c&&!F,Q="center"===c||"left"===c&&F||"right"===c&&!F;return E.createElement(E.Fragment,null,E.createElement(Fe,{switchBackToURLInput:D,poster:d,title:u,setAttributes:r,width:n,height:a,minWidth:Math.ceil(Z),maxWidth:Math.floor($),minHeight:Math.floor(G),maxHeight:Math.ceil($/U)}),E.createElement("div",{className:`${i} web-stories-embed align${c}`},E.createElement(Be.ResizableBox,{className:s?"show-resize-handle":"hide-resize-handle",size:{width:n,height:a},minWidth:Z,maxWidth:$,minHeight:G,maxHeight:$/U,lockAspectRatio:!0,enable:{top:!1,right:q,bottom:!0,left:Q},onResizeStart:()=>H(!1),onResizeStop:(e,t,i,s)=>{H(!0),r({width:parseInt(n+s.width),height:parseInt(a+s.height)})}},E.createElement(st,{url:l,title:u,poster:d,ref:P,isSelected:s,width:n,height:a}))))})),lt="latest-stories",nt="selected-stories",at="url",ct=[{id:lt,label:(0,S.__)("Latest Stories","web-stories"),description:(0,S.__)("Embed latest web stories.","web-stories"),icon:he},{id:nt,label:(0,S.__)("Selected Stories","web-stories"),description:(0,S.__)("Manually select web stories.","web-stories"),icon:pe},{id:at,label:(0,S.__)("Single Story","web-stories"),description:(0,S.__)("Embed a single story.","web-stories"),icon:be}],dt="grid",ut="list",mt="circles",ht="carousel",pt=[{id:ht,label:(0,S.__)("Box Carousel","web-stories"),icon:we,panelIcon:ve},{id:mt,label:(0,S.__)("Circle Carousel","web-stories"),icon:ge,panelIcon:Ee},{id:dt,label:(0,S.__)("Grid","web-stories"),icon:fe,panelIcon:Se},{id:ut,label:(0,S.__)("List","web-stories"),icon:_e,panelIcon:ye}];const bt=function BlockTypeSwitcher(e){let{selectedBlockType:t,setAttributes:r}=e;return E.createElement(Be.ToolbarGroup,null,Be.ToolbarItem?E.createElement(Be.ToolbarItem,null,(e=>E.createElement(Be.DropdownMenu,{icon:"update",toggleProps:e,label:(0,S.__)("Change Type","web-stories"),controls:ct.filter((e=>e.id!==t)).map((e=>({title:e.label,onClick:()=>r({blockType:e.id})})))}))):E.createElement(Be.DropdownMenu,{icon:"update",label:(0,S.__)("Change Type","web-stories"),controls:ct.filter((e=>e.id!==t)).map((e=>({title:e.label,onClick:()=>r({blockType:e.id})})))}))},wt=e=>{let{blockType:t,viewType:r,setAttributes:i}=e;return E.createElement(Ie.BlockControls,null,E.createElement(Be.ToolbarGroup,null,t&&at!==t&&E.createElement(Ne.Fragment,null,pt.map((e=>Be.ToolbarButton?E.createElement(Be.ToolbarButton,{key:e.id,label:e.label,icon:e.icon,onClick:()=>{i({viewType:e.id})},isPressed:e.id===r}):E.createElement(Be.Button,{key:e.id,label:e.label,icon:e.icon,onClick:()=>{i({viewType:e.id})},isPressed:e.id===r}))))),E.createElement(bt,{selectedBlockType:t,setAttributes:i}))};const gt=function BlockConfigurationPanel(e){let{instructions:t,icon:r,setAttributes:i,selectionOptions:s,selectionType:o}=e;const l=(0,S.__)("Web Stories","web-stories");return E.createElement(Be.Placeholder,{icon:E.createElement(Ie.BlockIcon,{icon:r,showColors:!0}),label:l,instructions:t,className:"web-stories-block-configuration-panel"},E.createElement("ul",{className:"web-stories-block-configuration-panel__options",role:"list","aria-label":(0,S.__)("Block Types","web-stories")},s.map((e=>E.createElement("li",{key:e.id},E.createElement(Be.Button,{variant:"secondary",isSecondary:!0,onClick:()=>{i({[o]:e.id})},icon:E.createElement(Be.Icon,{icon:e.panelIcon||e.icon,title:e.label}),label:e.description||e.label}),E.createElement("span",{className:"web-stories-block-configuration-panel__label components-placeholder__instructions",role:"presentation"},e.label))))))},ft=e=>{let{label:t,value:r,onChange:i,onInputChange:s,placeholder:o,options:l=[]}=e;return Array.isArray(l)&&E.createElement("div",{className:"components-base-control"},E.createElement(Be.FormTokenField,{value:r,suggestions:l,onChange:i,onInputChange:s,maxSuggestions:100,label:t,placeholder:o}))},_t=e=>{let{authors:t,setAttributes:r}=e;const[i,s]=(0,Ne.useState)(!1),[o,l]=(0,Ne.useState)([]),[n,a]=(0,Ne.useState)([]);(0,Ne.useEffect)((()=>{!i&&t?.length&&Me({path:(0,We.addQueryArgs)("/wp/v2/users",{per_page:100,include:t.join(",")})}).then((e=>{void 0!==e&&Array.isArray(e)&&l(e.map((e=>{let{id:t,name:r}=e;return{id:t,value:r}})))})).catch((()=>{l([])})).finally((()=>s(!0)))}),[i,t]);const c=(0,k.useDebounce)((e=>{Me({path:(0,We.addQueryArgs)("/wp/v2/users",{per_page:100,search:e})}).then((e=>{void 0!==e&&Array.isArray(e)&&a(e.map((e=>{let{id:t,name:r}=e;return{id:t,value:r}})))})).catch((()=>{a([])}))}),500);return E.createElement(ft,{label:(0,S.__)("Authors","web-stories"),value:o.map((e=>{let{value:t}=e;return t})),options:n.map((e=>{let{value:t}=e;return t})),onChange:e=>{if(void 0===e||!Array.isArray(e))return;const t=e.map((e=>[...n,...o].find((t=>{let{value:r}=t;return r===e})))).filter(Boolean);l(t),r({authors:t.map((e=>{let{id:t}=e;return t}))})},onInputChange:c})},{config:{fieldStates:vt,archiveURL:yt}}=window.webStoriesBlockSettings,Et=e=>{const{attributes:{viewType:t,numOfStories:r,numOfColumns:i,order:s,orderby:o,archiveLinkLabel:l,authors:n,circleSize:a,imageAlignment:c,fieldState:d},setAttributes:u,showFilters:m=!0}=e,h=(0,Ne.useRef)(!0);(0,Ne.useEffect)((()=>{const e={};Object.entries(vt[t]).forEach((t=>{let[r,i]=t;const{show:s}=i;void 0===d[`show_${r}`]&&(e[`show_${r}`]=s)})),Object.keys(e).length&&u({fieldState:{...d,...e}})}),[]),(0,Ne.useEffect)((()=>{if(h.current)return void(h.current=!1);const e={};Object.entries(vt[t]).forEach((t=>{let[r,i]=t;const{show:s}=i;e[`show_${r}`]=s})),u({fieldState:e})}),[t]);const ArchiveLink=()=>yt?E.createElement("a",{target:"__blank",href:yt},(0,S.__)("View archive page","web-stories")):null;return E.createElement(Ie.InspectorControls,null,E.createElement(Be.PanelBody,{className:"web-stories-settings",title:(0,S.__)("Layout Options","web-stories")},vt[t]&&Object.entries(vt[t]).map((e=>{let[t,r]=e;const{label:i,hidden:s}=r;return!s&&"circle_size"!==t&&"image_alignment"!==t&&E.createElement(Be.ToggleControl,{key:`${t}__control`,label:i,checked:d[`show_${t}`]||!1,onChange:()=>(e=>{u({fieldState:{...d,[`show_${e}`]:!d[`show_${e}`]}})})(t),help:"archive_link"===t&&d[`show_${t}`]&&E.createElement(ArchiveLink,null)})})),d.show_archive_link&&yt&&E.createElement(Be.TextControl,{label:(0,S.__)("Archive Link Label","web-stories"),value:l,placeholder:(0,S.__)("View All Stories","web-stories"),onChange:e=>u({archiveLinkLabel:e}),className:"web-stories-settings-archive-link"})),[mt,dt,ut].includes(t)&&E.createElement(Be.PanelBody,{className:"web-stories-settings",title:(0,S.__)("Layout and Style Options","web-stories")},ut===t&&E.createElement(Be.RadioControl,{label:(0,S.__)("Image Alignment","web-stories"),selected:c,options:[{value:"left",label:(0,S.__)("Left","web-stories")},{value:"right",label:(0,S.__)("Right","web-stories")}],onChange:e=>{u({imageAlignment:e})}}),dt===t&&E.createElement(Be.RangeControl,{label:(0,S.__)("Number of Columns","web-stories"),value:i,onChange:e=>u({numOfColumns:e}),min:1,max:4,step:1}),mt===t&&E.createElement(Be.RangeControl,{label:(0,S.__)("Circle Size","web-stories"),value:a,onChange:e=>u({circleSize:e}),min:80,max:200,step:5})),m&&E.createElement(Be.PanelBody,{title:(0,S.__)("Sorting and Filtering","web-stories")},E.createElement(Be.SelectControl,{label:(0,S.__)("Order By","web-stories"),options:[{value:"date",label:(0,S.__)("Date","web-stories")},{value:"title",label:(0,S.__)("Title","web-stories")}],value:o||"date",onChange:e=>u({orderby:e})}),E.createElement(Be.SelectControl,{label:(0,S.__)("Order","web-stories"),options:[{value:"asc",label:(0,S.__)("Ascending","web-stories")},{value:"desc",label:(0,S.__)("Descending","web-stories")}],value:s||"desc",onChange:e=>u({order:e})}),E.createElement(_t,{authors:n,setAttributes:u}),E.createElement(Be.RangeControl,{label:(0,S.__)("Number of Stories","web-stories"),value:r,onChange:e=>u({numOfStories:e}),min:1,max:20,step:1})))},St=()=>E.createElement(Be.Placeholder,{className:"web-stories-placeholder",instructions:(0,S.__)("Loading Stories…","web-stories")},E.createElement(Be.Spinner,null));var kt=__webpack_require__(184),Ct=__webpack_require__(474);Ct.prototype.scrollItem=function(e,t,r){if(void 0===r&&t?.target&&(r=t,t=!1),void 0===r)return!1;if(r&&r.preventDefault(),this.opt.slidesToScroll=Math.max(1,this.opt.slidesToScroll),this.opt.slidesToShow=Math.max(1,this.opt.slidesToShow),this.itemWidth===1/0){const e=r.target.parentElement.querySelector(".web-stories-list__carousel"),t=window.getComputedStyle(e.querySelector(".web-stories-list__story"));this.itemWidth=parseFloat(t.width)+(parseFloat(t.marginLeft)+parseFloat(t.marginRight))}const i=e;if(++this.animate_id,!0===t)e*=this.containerWidth,e=Math.round(e/this.itemWidth)*this.itemWidth;else{if("string"==typeof e){const t="prev"===e;if(e=this.opt.slidesToScroll%1||this.opt.slidesToShow%1?this.getCurrentSlide():isNaN(this.slide)?0:this.slide,t?e-=this.opt.slidesToScroll:e+=this.opt.slidesToScroll,this.opt.rewind){const r=this.ele.scrollLeft;e=t&&!r?this.slides.length:!t&&r+this.containerWidth>=Math.floor(this.trackWidth)?0:e}}e=Math.min(e,this.slides.length),this.slide=e,e=this.itemWidth*e}return this.scrollTo(e,this.opt.duration*Math.abs(this.ele.scrollLeft-e),(function(){this.updateControls(),this.emit("animated",{value:i,type:"string"==typeof i?"arrow":t?"dot":"slide"})})),!1};const xt=Ct;const Lt=function StoryCard(e){let{title:t,excerpt:r,poster:i,author:s,date:o,isShowingAuthor:l,isShowingDate:n,isShowingTitle:a,isShowingExcerpt:c,imageAlignment:d}=e;const u=kt("web-stories-list__story",{"image-align-right":"right"===d}),m=a||l||n,h=(0,Ve.__experimentalGetSettings)().formats.date;return E.createElement("div",{className:u},E.createElement("div",{className:"web-stories-list__story-poster"},i?E.createElement("img",{src:i,alt:t}):E.createElement("div",{className:"web-stories-list__story-poster-placeholder"},E.createElement("span",null,t))),m&&E.createElement("div",{className:"story-content-overlay web-stories-list__story-content-overlay"},a&&t&&E.createElement(Ne.RawHTML,{className:"story-content-overlay__title"},t),c&&r&&E.createElement(Ne.RawHTML,{className:"story-content-overlay__excerpt"},r),l&&E.createElement("div",{className:"story-content-overlay__author"},(0,S.sprintf)(
/* translators: byline. %s: author name. */
(0,S.__)("By %s","web-stories"),s)),n&&E.createElement("time",{dateTime:(0,Ve.format)("c",o),className:"story-content-overlay__date"},(0,S.sprintf)(
/* translators: %s: publish date. */
(0,S.__)("On %s","web-stories"),(0,Ve.dateI18n)(h,o)))))},{config:{archiveURL:Tt}}=window.webStoriesBlockSettings;const Nt=function StoriesPreview(e){const{attributes:{align:t,viewType:r,circleSize:i,imageAlignment:s,fieldState:o,numOfColumns:l},viewAllLabel:n,stories:a}=e,c=(0,Ne.useRef)(null),d=(0,Ne.useRef)(null),u=(0,Ne.useRef)(null),m=kt({"is-style-default":!o.show_sharp_corners,"is-style-squared":o.show_sharp_corners,"is-carousel":mt===r||ht===r,[`is-view-type-${r}`]:r,[`columns-${l}`]:dt===r&&l,[`align${t}`]:t,"has-archive-link":o.show_archive_link},"web-stories-list"),StoriesLoop=()=>a.map((e=>{const t=e.meta.web_stories_poster?.url,r=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url,l=t||r;return E.createElement(Lt,{key:e.id,url:e.link,title:e.title.rendered,excerpt:e.excerpt.rendered?e.excerpt.rendered:"",date:e.date_gmt,author:e._embedded.author[0].name,poster:l,imageAlignment:s,isShowingAuthor:o.show_author,isShowingDate:o.show_date,isShowingTitle:o.show_title,isShowingExcerpt:o.show_excerpt,circleSize:i})}));return(0,Ne.useEffect)((()=>{if(!c.current)return;const e=c.current.querySelector(".web-stories-list__story");if(!e)return;const t=window.getComputedStyle(e),r=parseFloat(t.width)+(parseFloat(t.marginLeft)+parseFloat(t.marginRight)),i=new xt(c.current,{slidesToShow:"auto",slidesToScroll:"auto",itemWidth:r,duration:.25,skipTrack:!0,scrollLock:!0,arrows:{prev:u.current,next:d.current}});i.resize();const s=r*a.length;i.trackWidth=s,i.track.style.width=`${s}px`}),[a.length,r,i]),E.createElement("div",{className:m,style:{"--ws-circle-size":"circles"===r&&i?`${i}px`:void 0}},E.createElement("div",{className:"web-stories-list__inner-wrapper"},mt===r||ht===r?E.createElement(E.Fragment,null,E.createElement("div",{className:"web-stories-list__carousel",ref:c},E.createElement("div",{className:"glider-track"},E.createElement(StoriesLoop,null))),E.createElement("div",{"aria-label":(0,S.__)("Previous","web-stories"),className:"glider-prev",ref:u}),E.createElement("div",{"aria-label":(0,S.__)("Next","web-stories"),className:"glider-next",ref:d})):E.createElement(StoriesLoop,null)),o.show_archive_link&&Tt&&E.createElement("div",{className:"web-stories-list__archive-link"},E.createElement("a",{target:"__blank",href:Tt},n)))},{config:{api:{stories:Mt}}}=window.webStoriesBlockSettings;const Bt=function LatestStoriesEdit(e){let{attributes:t,setAttributes:r}=e;const{numOfStories:i,order:s,orderby:o,archiveLinkLabel:l,authors:n}=t,[a,c]=(0,Ne.useState)([]),[d,u]=(0,Ne.useState)([]),m=(0,Ne.useCallback)((async e=>{try{u(!0);const t=await Me({path:(0,We.addQueryArgs)(Mt,{per_page:20,_embed:"author,wp:featuredmedia",orderby:e.orderby||"modified",order:e.order||"desc",author:e.author||void 0})});Array.isArray(t)&&c(t)}catch(e){c([])}finally{u(!1)}}),[]),h=(0,k.useDebounce)(m,1e3);(0,Ne.useEffect)((()=>{h({order:s||"desc",orderby:o||"date",author:n})}),[n,i,s,o,h]);const p=l||(0,S.__)("View All Stories","web-stories"),b=a.length>i?a.slice(0,i):a;return E.createElement(E.Fragment,null,E.createElement(Et,{attributes:t,setAttributes:r}),d&&E.createElement(St,null),!d&&Boolean(b?.length)&&E.createElement(Nt,{attributes:t,stories:b,viewAllLabel:p}),!d&&!b?.length&&E.createElement(Be.Placeholder,{icon:E.createElement(Ie.BlockIcon,{icon:E.createElement(BlockIcon,null),showColors:!0}),label:(0,S.__)("Latest Stories","web-stories"),className:"wp-block-web-stories-embed",instructions:(0,S.__)("No stories found.","web-stories")},E.createElement(Be.Button,{href:(0,We.addQueryArgs)("post-new.php",{post_type:"web-story"}),isLink:!0},(0,S.__)("Create New Story","web-stories"))))},{config:{maxNumOfStories:At}}=window.webStoriesBlockSettings,Ot=e=>{let{icon:t,label:r,selectedStories:i,setSelectedStories:s}=e;const[o,l]=(0,Ne.useState)(!1),[n,a]=(0,Ne.useState)(!1),c=()=>l(!0),d=(0,Ne.useCallback)((()=>{l(!1),a(!1)}),[]),u=(0,Ne.useCallback)((()=>{a(!0),c()}),[]);return E.createElement(E.Fragment,null,E.createElement(Ie.BlockControls,{group:"other"},Boolean(i?.length)&&(Be.ToolbarButton?E.createElement(E.Fragment,null,E.createElement(Be.ToolbarButton,{"aria-expanded":o,"aria-haspopup":"true",onClick:c},(0,S.__)("Select","web-stories")),E.createElement(Be.ToolbarButton,{"aria-expanded":o,"aria-haspopup":"true",onClick:u},(0,S.__)("Rearrange","web-stories"))):E.createElement(E.Fragment,null,E.createElement(Be.Button,{className:"components-toolbar__control",title:(0,S.__)("Select","web-stories"),"aria-expanded":o,"aria-haspopup":"true",onClick:c}),E.createElement(Be.Button,{className:"components-toolbar__control",title:(0,S.__)("Rearrange","web-stories"),"aria-expanded":u,"aria-haspopup":"true",onClick:u})))),0===i.length&&E.createElement(Be.Placeholder,{icon:E.createElement(Ie.BlockIcon,{icon:t,showColors:!0}),label:r,className:"wp-block-web-stories-embed",instructions:(0,S.__)("Select the web stories you want to display on your site.","web-stories")},E.createElement(Be.Button,{isPrimary:!0,onClick:c},(0,S.__)("Select Stories","web-stories"))),o&&E.createElement(Je,{closeStoryPicker:d,selectedStories:i,setSelectedStories:s,isSortingStories:n,setIsSortingStories:a,maxNumOfStories:At}))};const It=function SelectedStoriesEdit(e){let{icon:t,attributes:r,setAttributes:i,isSelected:s}=e;const{stories:o=[],archiveLinkLabel:l}=r,[n,a]=(0,Ne.useState)(o),[c,d]=(0,Ne.useState)([]),[u,m]=(0,Ne.useState)(!1),h=(0,S.__)("Selected Stories","web-stories"),p=l||(0,S.__)("View All Stories","web-stories");(0,Ne.useEffect)((()=>{r.stories.toString()!==n.toString()&&i({stories:n})}),[r.stories,i,n]),(0,Ne.useEffect)((()=>{n.length&&!c.length&&m(!0)}),[n,c,m]);const b=(0,Ne.useCallback)((e=>{d(e),a(e.map((e=>e.id)))}),[d]);return u?E.createElement(je,{icon:t,label:h,selectedStoryIds:n,setSelectedStories:b,setIsFetching:m}):E.createElement(E.Fragment,null,E.createElement(Et,{attributes:r,setAttributes:i,showFilters:!1}),Boolean(c?.length)&&E.createElement(Nt,{attributes:r,stories:c,viewAllLabel:p}),E.createElement(Ot,{icon:t,label:h,selectedStories:c,setSelectedStories:b,isEditing:s}))};const Wt=function WebStoriesEdit(e){let{attributes:t,setAttributes:r,className:i,isSelected:s}=e;const{blockType:o,viewType:l}=t;return o?o===at||l?E.createElement(E.Fragment,null,E.createElement(wt,{blockType:o,viewType:l,setAttributes:r}),o===lt&&E.createElement(Bt,{attributes:t,setAttributes:r}),o===nt&&E.createElement(It,{icon:E.createElement(BlockIcon,null),attributes:t,setAttributes:r,isSelected:s}),o===at&&E.createElement(ot,{icon:E.createElement(BlockIcon,null),attributes:t,setAttributes:r,className:i,isSelected:s})):E.createElement(gt,{icon:E.createElement(BlockIcon,null),setAttributes:r,instructions:(0,S.__)("Select a layout style","web-stories"),selectionOptions:pt,selectionType:"viewType"}):E.createElement(gt,{icon:E.createElement(BlockIcon,null),setAttributes:r,instructions:(0,S.__)("Embed a collection of your latest stories, select your own or enter an URL.","web-stories"),selectionOptions:ct,selectionType:"blockType"})},Pt=JSON.parse('{"name":"web-stories/embed","title":"Web Stories","description":"Embed Web Stories.","category":"embed","keywords":["embed","web stories","story","stories"],"textdomain":"web-stories","attributes":{"blockType":{"type":"string"},"url":{"type":"string"},"title":{"type":"string"},"poster":{"type":"string"},"width":{"type":"number","default":360},"height":{"type":"number","default":600},"align":{"type":"string","default":"none"},"stories":{"type":"array","default":[]},"viewType":{"type":"string","default":""},"numOfStories":{"type":"number","default":5},"numOfColumns":{"type":"number","default":2},"circleSize":{"type":"number","default":96},"imageAlignment":{"type":"string","default":"left"},"order":{"type":"string","default":""},"orderby":{"type":"string","default":""},"archiveLinkLabel":{"type":"string","default":""},"authors":{"type":"array","default":[]},"fieldState":{"type":"object","default":{}}},"supports":{"align":["wide","full","left","right","center"]}}'),{attributes:Rt}=Pt,zt={from:[{type:"shortcode",tag:"web_stories_embed",attributes:{...Rt,align:{type:"string",shortcode:e=>{let{named:{align:t}}=e;return t}},height:{type:"number",shortcode:e=>{let{named:{height:t}}=e;return t}},poster:{type:"string",shortcode:e=>{let{named:{poster:t}}=e;return t}},title:{type:"string",shortcode:e=>{let{named:{title:t}}=e;return t}},url:{type:"string",shortcode:e=>{let{named:{url:t}}=e;return t}},width:{type:"number",shortcode:e=>{let{named:{width:t}}=e;return t}},blockType:{type:"string",default:at}},priority:9},{type:"shortcode",tag:"web_stories",attributes:{...Rt,blockType:{type:"string",default:lt},align:{type:"string",shortcode:e=>{let{named:{align:t}}=e;return t}},archiveLinkLabel:{type:"string",shortcode:e=>{let{named:{archive_link_label:t}}=e;return t}},viewType:{type:"string",shortcode:e=>{let{named:{view:t}}=e;return t}},numOfStories:{type:"number",shortcode:e=>{let{named:{number:t}}=e;return t}},numOfColumns:{type:"number",shortcode:e=>{let{named:{columns:t}}=e;return t}},circleSize:{type:"number",shortcode:e=>{let{named:{circle_size:t}}=e;return t}},fieldState:{type:"object",shortcode:e=>{let{named:{title:t,excerpt:r,author:i,date:s,archive_link:o,image_align:l}}=e;return{show_archive_link:"true"===o,show_author:"true"===i,show_date:"true"===s,show_excerpt:"true"===r,show_image_align:"true"===l,show_title:"true"===t}}}}},{type:"block",blocks:["core/legacy-widget"],isMatch:e=>{let{idBase:t,instance:r}=e;return!!r?.raw&&"web_stories_widget"===t},transform:e=>{let{instance:t}=e;const{raw:{archive_link_label:r,circle_size:i,image_alignment:s,number_of_columns:o,number_of_stories:l,view_type:n,show_title:a,show_author:c,show_date:d,show_excerpt:u,show_archive_link:m,sharp_corners:h,show_image_alignment:p,title:b,orderby:w="",order:g=""}}=t,f=(0,y.createBlock)("web-stories/embed",{blockType:"latest-stories",viewType:n,fieldState:{show_title:a,show_author:c,show_date:d,show_excerpt:u,show_archive_link:m,show_sharp_corners:h,show_image_alignment:p},archiveLinkLabel:r,circleSize:i,numOfColumns:o,imageAlignment:s,numOfStories:l,orderby:w.replace("post_",""),order:g.toLowerCase()});return b?[(0,y.createBlock)("core/heading",{content:b}),f]:f}}]},{name:jt,category:Dt,keywords:Ft,attributes:$t,supports:Ht}=Pt,Vt={title:(0,S.__)("Web Stories","web-stories"),description:(0,S.__)("Embed stories using various layout options.","web-stories"),category:Dt,icon:E.createElement(BlockIcon,null),keywords:Ft,attributes:$t,example:{attributes:{blockType:lt,viewType:dt,numberOfColumns:2}},supports:Ht,deprecated:Le,edit:Wt,save:Te,transforms:zt};(0,y.registerBlockType)(jt,Vt),_("Embed Block",!1)})()})();