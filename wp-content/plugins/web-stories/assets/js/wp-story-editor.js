(()=>{var e,t,n,r,a,o={8968:(e,t,n)=>{"use strict";n.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=n(72070),a=n(97765);const __WEBPACK_DEFAULT_EXPORT__=function(e){return(0,r.useContextSelector)(a.StoryAnimationContext,e??r.identity)}},44258:(e,t,n)=>{"use strict";n.d(t,{ANIMATION_EFFECTS:()=>i,ANIMATION_PARTS:()=>s,ANIMATION_TYPES:()=>o,AXIS:()=>m,BACKGROUND_ANIMATION_EFFECTS:()=>l,BEZIER:()=>a,BG_MAX_SCALE:()=>b,BG_MIN_SCALE:()=>h,DIRECTION:()=>c,FIELD_TYPES:()=>g,ROTATION:()=>p,SCALE_DIRECTION:()=>d,SCALE_DIRECTION_MAP:()=>u,STORY_ANIMATION_STATE:()=>f});var r=n(91655);const a={linear:"linear",in:"ease-in",out:"ease-out",inOut:"ease-in-out",inQuad:"cubic-bezier(0.55, 0.085, 0.68, 0.53)",outQuad:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",inOutQuad:"cubic-bezier(0.455, 0.03, 0.515, 0.955)",inCubic:"cubic-bezier(0.55, 0.055, 0.675, 0.19)",outCubic:"cubic-bezier(0.215, 0.61, 0.355, 1)",inOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1)",inQuart:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",outQuart:"cubic-bezier(0.165, 0.84, 0.44, 1)",inOutQuart:"cubic-bezier(0.77, 0, 0.175, 1)",inQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",outQuint:"cubic-bezier(0.23, 1, 0.32, 1)",inOutQuint:"cubic-bezier(0.86, 0, 0.07, 1)",inSine:"cubic-bezier(0.47, 0, 0.745, 0.715)",outSine:"cubic-bezier(0.39, 0.575, 0.565, 1)",inOutSine:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",inExpo:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",outExpo:"cubic-bezier(0.19, 1, 0.22, 1)",inOutExpo:"cubic-bezier(1, 0, 0, 1)",inCirc:"cubic-bezier(0.6, 0.04, 0.98, 0.335)",outCirc:"cubic-bezier(0.075, 0.82, 0.165, 1)",inOutCirc:"cubic-bezier(0.785, 0.135, 0.15, 0.86)",default:"cubic-bezier(0.4, 0.4, 0.0, 1)"},o={BLINK_ON:"blinkOn",BOUNCE:"bounce",FADE:"fade",FLIP:"flip",FLOAT_ON:"floatOn",MOVE:"move",PULSE:"pulse",SPIN:"spin",ZOOM:"zoom"},i={DROP:{value:"effect-drop",name:(0,r._x)("Drop","animation effect","web-stories")},FADE_IN:{value:"effect-fade-in",name:(0,r._x)("Fade In","animation effect","web-stories")},FLY_IN:{value:"effect-fly-in",name:(0,r._x)("Fly In","animation effect","web-stories")},PAN:{value:"effect-pan",name:(0,r._x)("Pan","animation effect","web-stories")},PULSE:{value:"effect-pulse",name:(0,r._x)("Pulse","animation effect","web-stories")},TWIRL_IN:{value:"effect-twirl-in",name:(0,r._x)("Twirl In","animation effect","web-stories")},WHOOSH_IN:{value:"effect-whoosh-in",name:(0,r._x)("Whoosh In","animation effect","web-stories")},ZOOM:{value:"effect-zoom",name:(0,r._x)("Scale","animation effect","web-stories")},ROTATE_IN:{value:"effect-rotate-in",name:(0,r._x)("Rotate In","animation effect","web-stories")}},l={ZOOM:{value:"effect-background-zoom",name:(0,r._x)("Zoom","animation effect","web-stories")},PAN:{value:"effect-background-pan",name:i.PAN.name},PAN_AND_ZOOM:{value:"effect-background-pan-and-zoom",name:(0,r._x)("Pan and Zoom","animation effect","web-stories")}},s={BLINK_ON:{value:o.BLINK_ON,name:(0,r._x)("Blink On","animation effect","web-stories")},BOUNCE:{value:o.BOUNCE,name:(0,r._x)("Bounce","animation effect","web-stories")},FADE:{value:o.FADE,name:(0,r._x)("Fade","animation effect","web-stories")},FLIP:{value:o.FLIP,name:(0,r._x)("Flip","animation effect","web-stories")},FLOAT_ON:{value:o.FLOAT_ON,name:(0,r._x)("Float On","animation effect","web-stories")},MOVE:{value:o.MOVE,name:(0,r._x)("Move","animation effect","web-stories")},PULSE:{value:o.PULSE,name:(0,r._x)("Pulse","animation effect","web-stories")},SPIN:{value:o.SPIN,name:(0,r._x)("Spin","animation effect","web-stories")},ZOOM:{value:o.ZOOM,name:(0,r._x)("Zoom","animation effect","web-stories")}},c={TOP_TO_BOTTOM:"topToBottom",RIGHT_TO_LEFT:"rightToLeft",BOTTOM_TO_TOP:"bottomToTop",LEFT_TO_RIGHT:"leftToRight"},d={DYNAMIC_PROPERTY_VALUE:"dynamicPropertyValue",SCALE_IN:"scaleIn",SCALE_OUT:"scaleOut",SCALE_OUT_TOP_RIGHT:"scaleOutTopRight",SCALE_OUT_BOTTOM_LEFT:"scaleOutBottomLeft",SCALE_IN_TOP_LEFT:"scaleInTopLeft",SCALE_IN_BOTTOM_RIGHT:"scaleInBottomRight"},u={SCALE_IN:[d.SCALE_IN_TOP_LEFT,d.SCALE_IN_BOTTOM_RIGHT],SCALE_OUT:[d.SCALE_OUT_TOP_RIGHT,d.SCALE_OUT_BOTTOM_LEFT]},p={CLOCKWISE:"clockwise",COUNTER_CLOCKWISE:"counterClockwise",PING_PONG:"pingPong"},m={X:"x",Y:"y"},g={DROPDOWN:"dropdown",HIDDEN:"hidden",ROTATION_PICKER:"rotation_picker",DIRECTION_PICKER:"direction_picker",NUMBER:"number",FLOAT:"float",TEXT:"text",CHECKBOX:"checkbox",RANGE:"RANGE"},f={RESET:"reset",PAUSED:"paused",SCRUBBING:"scrubbing",PLAYING:"playing",PLAYING_SELECTED:"playing-selected"},h=100,b=400},77175:(e,t,n)=>{"use strict";n.d(t,{FlyInEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),i=n(44258),l=n(87745);const s={flyInDir:a().shape(l.AnimationInputPropTypes)},c={flyInDir:{label:(0,o.__)("Direction","web-stories"),type:i.FIELD_TYPES.DIRECTION_PICKER,values:[i.DIRECTION.TOP_TO_BOTTOM,i.DIRECTION.BOTTOM_TO_TOP,i.DIRECTION.LEFT_TO_RIGHT,i.DIRECTION.RIGHT_TO_LEFT],defaultValue:i.DIRECTION.BOTTOM_TO_TOP},duration:{label:(0,o.__)("Duration","web-stories"),type:i.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:600}}},47730:(e,t,n)=>{"use strict";n.d(t,{PanEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),i=n(44258),l=n(87745);const s={panDir:a().shape(l.AnimationInputPropTypes)},c={panDir:{label:(0,o.__)("Direction","web-stories"),type:i.FIELD_TYPES.DIRECTION_PICKER,values:[i.DIRECTION.TOP_TO_BOTTOM,i.DIRECTION.BOTTOM_TO_TOP,i.DIRECTION.LEFT_TO_RIGHT,i.DIRECTION.RIGHT_TO_LEFT],defaultValue:i.DIRECTION.BOTTOM_TO_TOP}}},78582:(e,t,n)=>{"use strict";n.d(t,{PulseEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),i=n(44258),l=n(87745);const s={scale:a().shape(l.AnimationInputPropTypes),iterations:a().shape(l.AnimationInputPropTypes)},c={scale:{label:(0,o.__)("Scale","web-stories"),tooltip:"Valid values are greater than or equal to 0",type:i.FIELD_TYPES.FLOAT,defaultValue:.5},iterations:{label:(0,o._x)("Pulses","number of pulses","web-stories"),type:i.FIELD_TYPES.NUMBER,defaultValue:1},duration:{label:(0,o.__)("Duration","web-stories"),type:i.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:1450}}},32619:(e,t,n)=>{"use strict";n.d(t,{RotateInEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),i=n(44258),l=n(87745);const s={rotateInDir:a().shape(l.AnimationInputPropTypes)},c={rotateInDir:{label:(0,o.__)("Direction","web-stories"),type:i.FIELD_TYPES.DIRECTION_PICKER,values:[i.DIRECTION.LEFT_TO_RIGHT,i.DIRECTION.RIGHT_TO_LEFT],defaultValue:i.DIRECTION.LEFT_TO_RIGHT}}},27609:(e,t,n)=>{"use strict";n.d(t,{WhooshInEffectInputPropTypes:()=>s,default:()=>c});var r=n(45697),a=n.n(r),o=n(91655),i=n(44258),l=n(87745);const s={whooshInDir:a().shape(l.AnimationInputPropTypes)},c={whooshInDir:{label:(0,o.__)("Direction","web-stories"),type:i.FIELD_TYPES.DIRECTION_PICKER,values:[i.DIRECTION.LEFT_TO_RIGHT,i.DIRECTION.RIGHT_TO_LEFT],defaultValue:i.DIRECTION.LEFT_TO_RIGHT},duration:{label:(0,o.__)("Duration","web-stories"),type:i.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:600}}},4891:(e,t,n)=>{"use strict";n.d(t,{ZoomEffectInputPropTypes:()=>c,default:()=>d});var r=n(45697),a=n.n(r),o=n(91655),i=n(87602),l=n(44258),s=n(87745);const c={scaleDirection:a().shape(s.AnimationInputPropTypes)},d={scaleDirection:{label:(0,o.__)("Direction","web-stories"),tooltip:(0,i.default)(
/* translators: 1: scaleIn. 2: scaleOut */
(0,o.__)("Valid values are %1$s or %2$s","web-stories"),"scaleIn","scaleOut"),type:l.FIELD_TYPES.DIRECTION_PICKER,values:[l.SCALE_DIRECTION.SCALE_IN,l.SCALE_DIRECTION.SCALE_OUT],defaultValue:l.SCALE_DIRECTION.SCALE_IN},duration:{label:(0,o.__)("Duration","web-stories"),type:l.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:2e3}}},22188:(e,t,n)=>{"use strict";n.d(t,{ANIMATION_EFFECTS:()=>d.ANIMATION_EFFECTS,ANIMATION_PARTS:()=>d.ANIMATION_PARTS,AnimationProps:()=>u.AnimationProps,BACKGROUND_ANIMATION_EFFECTS:()=>d.BACKGROUND_ANIMATION_EFFECTS,BG_MAX_SCALE:()=>d.BG_MAX_SCALE,BG_MIN_SCALE:()=>d.BG_MIN_SCALE,DIRECTION:()=>d.DIRECTION,FIELD_TYPES:()=>d.FIELD_TYPES,ROTATION:()=>d.ROTATION,SCALE_DIRECTION:()=>d.SCALE_DIRECTION,SCALE_DIRECTION_MAP:()=>d.SCALE_DIRECTION_MAP,STORY_ANIMATION_STATE:()=>d.STORY_ANIMATION_STATE,StoryAnimation:()=>c,getAnimationEffectDefaults:()=>u.getAnimationEffectDefaults,getAnimationEffectProps:()=>u.getAnimationEffectProps,getTotalDuration:()=>p.getTotalDuration,hasOffsets:()=>m.hasOffsets,useStoryAnimationContext:()=>s.default});var r=n(97765),a=n(79968),o=n(5954),i=n(98236),l=n(34433),s=n(8968);const c={Provider:r.default,WAAPIWrapper:a.default,AMPWrapper:o.default,AMPKeyframes:i.default,AMPAnimations:l.default};var d=n(44258),u=n(40320),p=(n(13418),n(18034)),m=n(40126);n(69332)},79871:(e,t,n)=>{"use strict";n.d(t,{BasicAnimationInputPropTypes:()=>s,basicAnimationProps:()=>c});var r=n(45697),a=n.n(r),o=n(91655),i=n(44258),l=n(87745);const s={duration:a().shape(l.AnimationInputPropTypes),delay:a().shape(l.AnimationInputPropTypes)},c={duration:{label:(0,o.__)("Duration","web-stories"),type:i.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:1e3},delay:{label:(0,o.__)("Delay","web-stories"),type:i.FIELD_TYPES.NUMBER,unit:(0,o._x)("ms","Time in milliseconds","web-stories"),defaultValue:0}};i.FIELD_TYPES.HIDDEN,(0,o.__)("Animation Type","web-stories"),i.FIELD_TYPES.DROPDOWN,Object.values(i.ANIMATION_TYPES),Object.values(i.ANIMATION_EFFECTS).map((e=>e.value)),i.FIELD_TYPES.DROPDOWN,(0,o.__)("Easing Presets","web-stories"),i.FIELD_TYPES.DROPDOWN,Object.keys(i.BEZIER),Object.keys(i.BEZIER)[0],i.FIELD_TYPES.TEXT,i.FIELD_TYPES.DROPDOWN,(0,o.__)('Valid values are numerical or the word "infinity"',"web-stories"),i.FIELD_TYPES.TEXT},40320:(e,t,n)=>{"use strict";n.d(t,{AnimationPart:()=>AnimationPart,AnimationProps:()=>Y.AnimationProps,getAnimationEffectDefaults:()=>V,getAnimationEffectProps:()=>W});var r=n(67294),a=n(44258);const o=e=>{switch(e){case a.FIELD_TYPES.CHECKBOX:return!1;case a.FIELD_TYPES.NUMBER:case a.FIELD_TYPES.FLOAT:case a.FIELD_TYPES.RANGE:return 0;default:return""}};var i=n(11533),l=n(96302),s=n(5644),c=n(3200),d=n(37308),u=n(84276),p=n(29154),m=n(63898),g=n(75590),f=n(51352),h=n(93886),b=n(44130),E=n(45697),y=n.n(E),_=n(91655),v=n(87745);y().shape(v.AnimationInputPropTypes);const w={duration:{label:(0,_.__)("Duration","web-stories"),type:a.FIELD_TYPES.NUMBER,unit:(0,_._x)("ms","Time in milliseconds","web-stories"),defaultValue:600}};var T=n(77175),S=n(47730),C=n(78582),I=n(32619),x=n(27609),A=n(4891);y().shape(v.AnimationInputPropTypes);const k={duration:{label:(0,_.__)("Duration","web-stories"),type:a.FIELD_TYPES.NUMBER,unit:(0,_._x)("ms","Time in milliseconds","web-stories"),defaultValue:1600}};var O=n(87602);y().shape(v.AnimationInputPropTypes),y().shape(v.AnimationInputPropTypes);const P={zoomDirection:{label:(0,_.__)("Direction","web-stories"),tooltip:(0,O.default)(
/* translators: 1: scaleIn. 2: scaleOut */
(0,_.__)("Valid values are %1$s or %2$s","web-stories"),"zoomIn","zoomOut"),type:a.FIELD_TYPES.DIRECTION_PICKER,values:[a.SCALE_DIRECTION.SCALE_IN,a.SCALE_DIRECTION.SCALE_OUT],defaultValue:a.SCALE_DIRECTION.SCALE_OUT},duration:{label:(0,_.__)("Duration","web-stories"),type:a.FIELD_TYPES.NUMBER,unit:(0,_._x)("ms","Time in milliseconds","web-stories"),defaultValue:2e3}},N=(y().shape(v.AnimationInputPropTypes),y().shape(v.AnimationInputPropTypes),{panDir:{label:(0,_.__)("Direction","web-stories"),type:a.FIELD_TYPES.DIRECTION_PICKER,values:[a.DIRECTION.TOP_TO_BOTTOM,a.DIRECTION.BOTTOM_TO_TOP,a.DIRECTION.LEFT_TO_RIGHT,a.DIRECTION.RIGHT_TO_LEFT],defaultValue:a.DIRECTION.BOTTOM_TO_TOP},duration:{label:(0,_.__)("Duration","web-stories"),type:a.FIELD_TYPES.NUMBER,unit:(0,_._x)("ms","Time in milliseconds","web-stories"),defaultValue:2e3}});var R=n(85805),M=n(85242),L=n(15604),D=n(75351),B=n(83072),F=n(60106),H=n(11006),U=n(76585),j=n(10638),z=n(8748),G=n(79871),Y=n(66776);function EmptyAMPTarget(e){let{children:t,...n}=e;return r.createElement("div",n,t)}function Z(){return{id:-1,generatedKeyframes:{},WAAPIAnimation:{},AMPTarget:EmptyAMPTarget,AMPAnimation:()=>null}}function AnimationPart(e,t){const n={[a.ANIMATION_TYPES.BOUNCE]:M.AnimationBounce,[a.ANIMATION_TYPES.BLINK_ON]:L.AnimationBlinkOn,[a.ANIMATION_TYPES.FADE]:D.AnimationFade,[a.ANIMATION_TYPES.FLIP]:B.AnimationFlip,[a.ANIMATION_TYPES.FLOAT_ON]:F.AnimationFloatOn,[a.ANIMATION_TYPES.MOVE]:H.AnimationMove,[a.ANIMATION_TYPES.PULSE]:U.AnimationPulse,[a.ANIMATION_TYPES.SPIN]:j.AnimationSpin,[a.ANIMATION_TYPES.ZOOM]:z.AnimationZoom,[a.ANIMATION_EFFECTS.FADE_IN.value]:l.EffectFadeIn,[a.ANIMATION_EFFECTS.FLY_IN.value]:s.EffectFlyIn,[a.ANIMATION_EFFECTS.PAN.value]:c.EffectPan,[a.ANIMATION_EFFECTS.PULSE.value]:d.EffectPulse,[a.ANIMATION_EFFECTS.TWIRL_IN.value]:u.EffectTwirlIn,[a.ANIMATION_EFFECTS.WHOOSH_IN.value]:p.EffectWhooshIn,[a.ANIMATION_EFFECTS.ZOOM.value]:m.EffectZoom,[a.ANIMATION_EFFECTS.DROP.value]:i.EffectDrop,[a.ANIMATION_EFFECTS.ROTATE_IN.value]:g.EffectRotateIn,[a.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value]:f.EffectBackgroundZoom,[a.BACKGROUND_ANIMATION_EFFECTS.PAN.value]:h.EffectBackgroundPan,[a.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:b.EffectBackgroundPanAndZoom}[e?.value||e]||Z;return t.easing=t.easing||a.BEZIER[t.easingPreset],t.easingPreset=void 0,n(t)}function W(e){const t={[a.ANIMATION_EFFECTS.FLY_IN.value]:T.default,[a.ANIMATION_EFFECTS.PAN.value]:S.default,[a.ANIMATION_EFFECTS.PULSE.value]:C.default,[a.ANIMATION_EFFECTS.ROTATE_IN.value]:I.default,[a.ANIMATION_EFFECTS.FADE_IN.value]:w,[a.ANIMATION_EFFECTS.WHOOSH_IN.value]:x.default,[a.ANIMATION_EFFECTS.ZOOM.value]:A.default,[a.ANIMATION_EFFECTS.DROP.value]:k,[a.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value]:P,[a.BACKGROUND_ANIMATION_EFFECTS.PAN.value]:N,[a.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:N};let n=Object.keys({...t[e]||{},...G.basicAnimationProps});if(e===a.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value){const e="zoomDirection",t=n.indexOf(e);t>-1&&(n=[...n.slice(0,t),...n.slice(t+1),e])}return{type:e,props:(0,R.orderByKeys)({obj:{...G.basicAnimationProps,...t[e]||{}},keys:n})}}function V(e){const{props:t}=W(e);return Object.keys(t).reduce(((e,n)=>({...e,[n]:t[n].defaultValue??o(t[n].type)})),{})}},40126:(e,t,n)=>{"use strict";n.d(t,{getMediaBoundOffsets:()=>i,hasOffsets:()=>l});var r=n(1787),a=n(15985),o=n(7868);function i(e){let{element:t}=e;const n=(0,r.getBox)(t,a.PAGE_WIDTH,a.PAGE_HEIGHT),i=(0,o.default)(t.resource,n.width,n.height,t.scale,t.focalX,t.focalY);return{top:i.offsetY/i.height*100,right:(i.width-(i.offsetX+a.PAGE_WIDTH))/i.width*-1*100,left:i.offsetX/i.width*100,bottom:(i.height-(i.offsetY+a.FULLBLEED_HEIGHT))/i.height*-1*100}}function l(e){let{element:t}=e;const n=i({element:t});return r=n,a=e=>Math.abs(e)>1,Object.entries(r).reduce(((e,t)=>{let[n,r]=t;return e[n]=a(r),e}),{});var r,a}},85805:(e,t,n)=>{"use strict";function r(e){let{obj:t={},keys:n=[]}=e;return Object.keys(t).reduce(((e,r)=>(n.includes(r)||(e[r]=t[r]),e)),{})}function a(e){let{obj:t={},keys:n=[]}=e;return{...n.reduce(((e,n)=>{const r=t[n];return n in t&&(e[n]=r),e}),{}),...r({obj:t,keys:n})}}n.d(t,{orderByKeys:()=>a})},52589:(e,t,n)=>{"use strict";n.d(t,{CONTEXT_MENU_MIN_WIDTH:()=>f,default:()=>y});var r=n(67294),a=n(45697),o=n.n(a),i=n(72070),l=n(26300),s=n(40981),c=n(66044),d=n(66394),u=n(82302),p=n(8682),m=n(19683);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}const f=200,h=l.default.div.withConfig({displayName:"menu__MenuWrapper",componentId:"sc-1xfj06c-0"})((e=>{let{theme:t}=e;return(0,l.css)(["background-color:",";border-radius:",";border:1px solid ",";gap:6px;display:flex;"," *:last-child{margin-bottom:0;}"],(e=>{let{isSecondary:n}=e;return n?t.colors.bg.secondary:t.colors.bg.primary}),(e=>{let{isHorizontal:n}=e;return n?t.borders.radius.medium:t.borders.radius.small}),t.colors.border.disable,(e=>{let{isHorizontal:t,isIconMenu:n}=e;return t?(0,l.css)(["height:52px;padding:7px 10px;align-items:center;"]):(0,l.css)(["flex-direction:column;width:",";padding:",";max-width:","px;",";"],n?"40px":"auto",n?"4px 3px":"8px 0",300,!n&&(0,l.css)(["min-width:","px;"],f))}))}));function b(e,t){const n=Array.from(e.querySelectorAll(s.FOCUSABLE_SELECTORS.join(", ")));return t?n:n.filter((e=>!e.matches(`[role="menu"], [role="menu"] [role="menu"] *, .${m.CONTEXT_MENU_SKIP_ELEMENT}`)))}h.propTypes={isIconMenu:o().bool,isHorizontal:o().bool,isSecondary:o().bool};const E=(0,i.forwardRef)(((e,t)=>{let{children:n,disableControlledTabNavigation:a,isOpen:o,onFocus:l=c.noop,isSubMenu:m=!1,isSecondary:f=!1,parentMenuRef:E,onCloseSubMenu:y=c.noop,dismissOnEscape:_=!0,...v}=e;const{isRTL:w}=v,{focusedId:T,isIconMenu:S,isHorizontal:C,onDismiss:I,setFocusedId:x}=(0,p.default)((e=>{let{state:t,actions:n}=e;return{focusedId:t.focusedId,isIconMenu:t.isIconMenu,isHorizontal:t.isHorizontal,onDismiss:n.onDismiss,setFocusedId:n.setFocusedId}})),A=(0,d.default)((()=>{o&&!m&&I()})),k=(0,i.useRef)(null),O=(0,i.useCombinedRefs)(A,k,t),P=(0,i.useCallback)((e=>{l(e);const t=k.current.children||[],n=t.length&&![...t].some((t=>t.contains(e.target)));if(k.current===e.target&&n){const e=b(k.current);document.dispatchEvent(new KeyboardEvent("keydown",{key:"tab"})),e?.[0]?.focus()}}),[l]),N=(0,i.useCallback)((e=>{let t=e.findIndex((e=>e.id===T));return-1===t&&(t=e.findIndex((e=>e.id===document.activeElement.id))),t}),[T]),R=(0,i.useCallback)((e=>{const{key:t}=e;if("Escape"===t)return void I(e);const n=b(k.current,m);let r=N(n);-1===r&&n.length&&(x(n[0].id),r=0);const a=C?s.KEYS.LEFT:s.KEYS.UP;if([a,C?s.KEYS.RIGHT:s.KEYS.DOWN].includes(t)){let e=r+(a===t?-1:1);-1===e&&(e=n.length-1);const o=n[e%n.length];return o?.focus(),void x(o?.id||-1)}const o=C?s.KEYS.UP:w?s.KEYS.RIGHT:s.KEYS.LEFT;if(m&&o===t){E.current.querySelector('button[aria-expanded="true"]')?.focus(),y()}}),[m,N,C,w,I,x,E,y]);(0,i.useEffect)((()=>{if(o){const e=b(k.current);e.length&&(e?.[0]?.focus(),x(e?.[0]?.id))}}),[o,x]);const M=(0,i.useMemo)((()=>a?{key:[]}:{key:["tab"],shift:!0}),[a]);return(0,u.useKeyDownEffect)(k,{key:_?["esc","down","up","left","right"]:["down","up","left","right"]},R,[R,_]),(0,u.useKeyDownEffect)(k,M,I,[M,I]),r.createElement(h,g({ref:O,"data-testid":"context-menu-list",role:"menu",isIconMenu:S,isHorizontal:C,isSecondary:f,tabIndex:k.current?.contains(document.activeElement)?-1:0,onFocus:P},v),n)})),y=(o().node,o().func,o().bool,o().bool,o().func,o().bool,o().bool,o().bool,o().object,o().bool,E)},82302:(e,t,n)=>{"use strict";n.d(t,{Shortcut:()=>Shortcut,createShortcutAriaLabel:()=>A,isPlatformMacOS:()=>C,prettifyShortcut:()=>x,useEscapeToBlurEffect:()=>v,useGlobalIsKeyPressed:()=>_,useGlobalKeyDownEffect:()=>y,useKeyDownEffect:()=>h,useKeyEffect:()=>f});var r=n(67294),a=n(42441),o=n.n(a),i=n(72070),l=n(91655),s=n(8579);const c="__WEB_STORIES_MT__",d=["submit","button","checkbox","radio","image","file","range","reset","hidden"],u=["submit","button","checkbox","radio","image","file","reset"],p=(0,i.createRef)();function m(){p.current||(p.current=document.documentElement)}function g(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const{keys:o}=(0,i.useContext)(s.default),l=(0,i.useBatchingCallback)(r,a||[]);(0,i.useEffect)((()=>{const r=void 0!==e?.current?e.current:e;if(!r)return;if(1!==r.nodeType&&9!==r.nodeType)throw new Error("only an element or a document node can be used");const a=T(o,t);if(1===a.key.length&&""===a.key[0])return;const i=w(r),s=S(r,a,l);return i.bind(a.key,s,n),()=>{i.unbind(a.key,n)}}),[l,o])}function f(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;g(e,t,void 0,n,r)}function h(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;g(e,t,"keydown",n,r)}function b(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;g(e,t,"keyup",n,r)}function E(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const[r,a]=(0,i.useState)(!1),o=(0,i.useCallback)((()=>{a(!1)}),[]);return(0,i.useEffect)((()=>(window.addEventListener("blur",o),function(){window.removeEventListener("blur",o)})),[o]),h(e,t,(()=>a(!0)),n),b(e,t,(()=>a(!1)),n),r}function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;m(),h(p,e,t,n)}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return m(),E(p,e,t)}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;h(e,{key:"esc",editable:!0},(()=>{const t=void 0!==e?.current?e.current:e,{activeElement:n}=document;t.contains(n)&&n.blur()}),t)}function w(e){return e[c]||(e[c]=new(o())(e))}function T(e,t){const n="string"==typeof t||Array.isArray(t)?{key:t}:t,{key:r,shift:a=!1,repeat:o=!0,clickable:i=!0,editable:l=!1,dialog:s=!1,allowDefault:c=!1}=n,d=function(e,t){if(!t)return e;return e.concat(e.map((e=>`shift+${e}`)))}([].concat(r).map((t=>e[t]||t)).flat(),a);return{key:d,shift:a,clickable:i,repeat:o,editable:l,dialog:s,allowDefault:c}}function S(e,t,n){let{repeat:r,editable:a,clickable:o,dialog:i,allowDefault:l=!1}=t;return t=>{const{repeat:s,target:c}=t;if((r||!s)&&(a||!function(e){let{tagName:t,isContentEditable:n,type:r,readOnly:a}=e;if(!0===a)return!1;if(n||"TEXTAREA"===t)return!0;if("INPUT"===t)return!d.includes(r);return!1}(c))&&(o||!function(e){let{tagName:t,type:n}=e;if(["BUTTON","A"].includes(t))return!0;if("INPUT"===t)return u.includes(n);return!1}(c))&&(i||!function(e,t){if(1!==e.nodeType)return!1;const n=e.closest('dialog,[role="dialog"]');return n&&t!==n&&t.contains(n)}(c,e)))return n(t),l}}function C(){const{platform:e}=window.navigator;return e.includes("Mac")||["iPad","iPhone"].includes(e)}function I(e){const t=C();return{alt:t?"⌥":"Alt",ctrl:t?"^":"Ctrl",mod:t?"⌘":"Ctrl",cmd:"⌘",shift:t?"⇧":"Shift"}[e]||e}function x(e){const t=C()?"":"+";return e.toLowerCase().replace("alt",I("alt")).replace("ctrl",I("ctrl")).replace("mod",I("mod")).replace("cmd",I("cmd")).replace("shift",I("shift")).replace("left","←").replace("up","↑").replace("right","→").replace("down","↓").replace("delete","⌫").replace("enter","⏎").split("+").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(t)}function A(e){const t=C(),n=(0,l.__)("Command","web-stories"),r=(0,l.__)("Control","web-stories"),a=(0,l.__)("Option","web-stories"),o=(0,l.__)("Alt","web-stories"),i={alt:t?a:o,mod:t?n:r,
/* translators: Control key on the keyboard */
ctrl:(0,l.__)("Control","web-stories"),
/* translators: shift key on the keyboard */
shift:(0,l.__)("Shift","web-stories"),
/* translators: delete key on the keyboard */
delete:(0,l.__)("Delete","web-stories"),
/* translators: comma character ',' */
",":(0,l.__)("Comma","web-stories"),
/* translators: period character '.' */
".":(0,l.__)("Period","web-stories"),
/* translators: backtick character '`' */
"`":(0,l.__)("Backtick","web-stories")},s=t?" ":"+";
/* translators: Command key on the keyboard */return e.toLowerCase().replace("alt",i.alt).replace("ctrl",i.ctrl).replace("mod",i.mod).replace("cmd",i.cmd).replace("shift",i.shift).replace("delete",i.delete).replace(",",i[","]).replace(".",i["."]).replace("`",i["`"]).split(/[\s+]/).map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(s)}const Kbd=()=>r.createElement("kbd",null);function Shortcut(e){let{component:t=Kbd,shortcut:n=""}=e;const a=n.split(" ");return r.createElement(t,{"aria-label":A(n)},a.map(((e,n)=>r.createElement(t,{key:`${n}-${e}`},x(e)))))}},27856:(e,t,n)=>{"use strict";n.d(t,{PLACEMENT:()=>a,PopupContainer:()=>o});var r=n(26300);const a={TOP:"top",TOP_START:"top-start",TOP_END:"top-end",BOTTOM:"bottom",BOTTOM_START:"bottom-start",BOTTOM_END:"bottom-end",RIGHT:"right",RIGHT_START:"right-start",RIGHT_END:"right-end",LEFT:"left",LEFT_START:"left-start",LEFT_END:"left-end"},o=(a.TOP,a.TOP,a.TOP_START,a.TOP_START,a.TOP_END,a.TOP_END,a.BOTTOM,a.BOTTOM,a.BOTTOM_END,a.BOTTOM_END,a.BOTTOM_START,a.BOTTOM_START,a.RIGHT,a.LEFT,a.RIGHT_START,a.LEFT_START,a.RIGHT_END,a.LEFT_END,a.LEFT,a.RIGHT,a.LEFT_START,a.RIGHT_START,a.LEFT_END,a.RIGHT_END,r.default.div.attrs((e=>{let{$offset:{x:t,y:n,width:r},fillWidth:a,transforms:o,zIndex:i,maxWidth:l}=e;const s={};return a&&(l?s.minWidth=`${r}px`:s.width=`${r}px`),l&&!s.width&&(s.maxWidth=`${l}px`),{style:{transform:`translate(${t}px, ${n}px) ${o}`,...s,zIndex:i}}})).withConfig({displayName:"constants__PopupContainer",componentId:"sc-1y4wru5-0"})(["/*! @noflip */ left:0px;top:0px;position:fixed;",";max-height:",";"],(e=>{let{noOverFlow:t}=e;return t?"":"overflow-y: auto;"}),(e=>{let{topOffset:t}=e;return`calc(100vh - ${t}px)`})))},99566:(e,t,n)=>{"use strict";n.d(t,{Z_INDEX:()=>a});var r=n(91655);(0,r.__)("Search","web-stories"),(0,r.__)("Clear Search","web-stories"),(0,r.__)("Search","web-stories");const a={CLEAR_BUTTON:5}},19722:(e,t,n)=>{"use strict";n.d(t,{FOCUS_VISIBLE_DATA_ATTRIBUTE:()=>o,FOCUS_VISIBLE_SELECTOR:()=>a,overrideFocusOutlineStyles:()=>i});var r=n(26300);n.e(8624).then(n.t.bind(n,35202,23)).catch((()=>{}));const a="focus-visible",o="data-focus-visible-added",i=(0,r.css)([".js-focus-visible :focus:not(.","):not([data-focus-visible-added]),.js-focus-visible :focus-visible:not(.","):not([data-focus-visible-added]){outline:none;}"],a,a);(0,r.createGlobalStyle)(["",";"],i)},72676:(e,t,n)=>{"use strict";function r(e,t){return Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,n)=>({...t,[n]:e[n]})),{})}n.d(t,{default:()=>r})},88766:(e,t,n)=>{"use strict";n.d(t,{SHARED_DEFAULT_ATTRIBUTES:()=>r.SHARED_DEFAULT_ATTRIBUTES,elementFillContent:()=>s,elementWithBackgroundColor:()=>f,elementWithBorder:()=>g,elementWithBorderRadius:()=>p,elementWithFlip:()=>E,elementWithFont:()=>h,elementWithHighlightBorderRadius:()=>m,elementWithPosition:()=>c,elementWithRotation:()=>u,elementWithSize:()=>d,elementWithTextParagraphStyle:()=>b,useColorTransformHandler:()=>y.default});var r=n(56527),a=n(26300),o=n(18535),i=n(25784),l=n(95740);const s=(0,a.css)(["position:absolute;top:0;left:0;width:100%;height:100%;"]),c=(0,a.css)(["position:absolute;z-index:1;left:",";top:",";"],(e=>{let{x:t}=e;return`${t}px`}),(e=>{let{y:t}=e;return`${t}px`})),d=(0,a.css)(["width:",";height:",";"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`})),u=(0,a.css)(["transform:",";"],(e=>{let{rotationAngle:t}=e;return`rotate(${t}deg)`})),p=(0,a.css)(["",""],(e=>(0,i.getBorderRadius)(e))),m=e=>{let{borderRadius:t,dataToEditorY:n}=e;return n&&(0,a.css)(["border-radius:","px ","px ","px ","px;"],n(t?.topLeft||0),n(t?.topRight||0),n(t?.bottomRight||0),n(t?.bottomLeft||0))},g=(0,a.css)([""," background-clip:padding-box;"],(e=>{let{border:t,borderRadius:n,width:r,height:a,mask:o}=e;return(0,i.getBorderStyle)({border:t,borderRadius:n,width:r,height:a,mask:o})})),f=(0,a.css)(["",";"],(e=>{let{backgroundColor:t}=e;return t&&(0,o.default)(t)})),h=(0,a.css)(["white-space:pre-line;font-family:",";overflow-wrap:break-word;word-break:break-word;letter-spacing:normal;font-style:",";font-size:","px;font-weight:",";color:#000000;"],(e=>{let{font:t}=e;return(0,l.generateFontFamily)(t)}),(e=>{let{fontStyle:t}=e;return t}),(e=>{let{fontSize:t}=e;return t}),(e=>{let{fontWeight:t}=e;return t})),b=(0,a.css)(["margin:",";padding:",";line-height:",";text-align:",";overflow-wrap:break-word;"],(e=>{let{margin:t}=e;return t}),(e=>{let{padding:t}=e;return t||0}),(e=>{let{lineHeight:t}=e;return t}),(e=>{let{textAlign:t}=e;return t})),E=(0,a.css)(["transform:",";"],(e=>{let{transformFlip:t}=e;return t}));var y=n(66027)},88914:(e,t,n)=>{"use strict";n.d(t,{BACKGROUND_TEXT_MODE:()=>l,BackgroundAudioPropType:()=>O,BackgroundAudioPropTypeShape:()=>k,DEFAULT_PAGE_BACKGROUND_COLOR:()=>m,ELEMENT_TYPES:()=>r,MEDIA_ELEMENT_TYPES:()=>a,OverlayType:()=>s,StoryPropTypes:()=>A,TEXT_ELEMENT_DEFAULT_FONT:()=>i,createNewElement:()=>p,createPage:()=>g,duplicateElement:()=>h,duplicatePage:()=>b,elementTypes:()=>w.elementTypes,getDefinitionForType:()=>c.default,getLayerName:()=>v,getTransformFlip:()=>y.default,isElementBelowLimit:()=>E.default,registerElementType:()=>w.registerElementType});const r={IMAGE:"image",SHAPE:"shape",TEXT:"text",VIDEO:"video",GIF:"gif",STICKER:"sticker",PRODUCT:"product"},a=[r.IMAGE,r.VIDEO,r.GIF,r.PRODUCT],o="((MULTIPLE))",i={family:"Roboto",weights:[100,300,400,500,700,900],styles:["italic","regular"],variants:[[0,100],[1,100],[0,300],[1,300],[0,400],[1,400],[0,500],[1,500],[0,700],[1,700],[0,900],[1,900]],fallbacks:["Helvetica Neue","Helvetica","sans-serif"],service:"fonts.google.com",metrics:{upm:2048,asc:1900,des:-500,tAsc:1536,tDes:-512,tLGap:102,wAsc:1946,wDes:512,xH:1082,capH:1456,yMin:-555,yMax:2163,hAsc:1900,hDes:-500,lGap:0}},l={NONE:"NONE",FILL:"FILL",HIGHLIGHT:"HIGHLIGHT"},s={NONE:"none",SOLID:"solid",LINEAR:"linear",RADIAL:"radial"};var c=n(77839),d=n(44586),u=n(72676);const p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,c.default)(e);if(!n)throw new Error(`Unknown element type: ${e}`);const{defaultAttributes:r}=n,a={...r,...t,type:e,id:(0,d.default)()};return t.isDefaultBackground?(0,u.default)(a,["backgroundColor"]):a};const m=(0,n(80852).default)(255,255,255),g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t={x:1,y:1,width:1,height:1,mask:{type:"rectangle"},isBackground:!0,isDefaultBackground:!0},n=p("shape",t),r={elements:[n],backgroundColor:m,...e};return p("page",r)};var f=n(15985);const h=function(e){let{element:t,animations:n=[],existingElements:r=[]}=e;const{type:a,...o}=t,i={...t,...p(a,o)};i.basedOn=t.id,r.forEach((e=>{if(e.id===i.basedOn||e.basedOn===i.basedOn){const e=function(e,t){const n=e+30,r=t+30;return{x:f.PAGE_WIDTH-n>20?n:30,y:f.PAGE_HEIGHT-r>20?r:30}}(i.x,i.y);i.x=e.x,i.y=e.y}}));const l=n.filter((e=>e.targets.includes(t.id))).map((e=>({...e,targets:[i.id],id:(0,d.default)()}))).filter((e=>e.targets.length>0));return{element:i,elementAnimations:l}},b=e=>{const{elements:t,animations:n,postId:r,title:a,...o}=e,i=(0,u.default)(o,["postId","title"]),{elements:l,animations:s}=t.reduce(((e,t)=>{let{elements:r,animations:a}=e;const{element:o,elementAnimations:i}=h({element:t,animations:n});return{elements:[...r,o],animations:[...a,...i]}}),{elements:[],animations:[]}),c={elements:l,animations:s,...i};return p("page",c)};var E=n(58474),y=n(24901),_=n(91655);const v=function(e){return e.layerName?e.layerName:e.isBackground?(0,_.__)("Background","web-stories"):(0,c.default)(e.type).getLayerText(e)};var w=n(55993),T=n(45697),S=n.n(T),C=n(15662),I=n(9675),x=n(22188);const A={},k={id:S().number,src:S().string,length:S().number,lengthFormatted:S().string,mimeType:S().string,needsProxy:S().bool},O=S().shape(k);A.mask=S().shape({type:S().string.isRequired}),A.link=S().shape({url:S().string.isRequired,desc:S().string,needsProxy:S().bool,icon:S().string,rel:S().arrayOf(S().string)}),A.box=S().exact({x:S().number.isRequired,y:S().number.isRequired,width:S().number.isRequired,height:S().number.isRequired,rotationAngle:S().number.isRequired}),A.page=S().shape({id:S().string.isRequired,animations:S().arrayOf(S().shape(x.AnimationProps)),elements:S().arrayOf(S().shape(A.element)),overlay:S().oneOf(Object.values(s)),backgroundAudio:S().shape({resource:O,loop:S().bool,tracks:S().arrayOf(I.ResourcePropTypes.trackResource)})});const P={id:S().string.isRequired,type:S().string.isRequired};A.flip=S().shape({vertical:S().bool,horizontal:S().bool});const N={id:S().string.isRequired,groupId:S().string,type:S().string.isRequired,x:S().number.isRequired,y:S().number.isRequired,width:S().number.isRequired,height:S().number.isRequired,flip:A.flip,rotationAngle:S().number.isRequired,mask:A.mask,link:A.link,opacity:S().number,lockAspectRatio:S().bool,isBackground:S().bool},R={scale:S().number.isRequired,focalX:S().number,focalY:S().number};A.element=S().shape(N),A.layer=S().shape(P),A.elements={},A.elements.image=S().shape({...N,...R,resource:I.ResourcePropTypes.imageResource}),A.elements.video=S().shape({...N,...R,resource:I.ResourcePropTypes.videoResource,poster:S().string,tracks:S().arrayOf(I.ResourcePropTypes.trackResource),loop:S().bool}),A.elements.gif=S().shape({...N,...R,resource:I.ResourcePropTypes.gifResource}),A.elements.media=S().oneOfType([A.elements.image,A.elements.video,A.elements.gif]);const M=S().shape({family:S().string,service:S().string,weights:S().arrayOf(S().number),styles:S().arrayOf(S().string),variants:S().arrayOf(S().array),fallbacks:S().array}),L=S().shape({horizontal:S().oneOfType([S().number,S().oneOf([o])]),vertical:S().oneOfType([S().number,S().oneOf([o])]),locked:S().oneOfType([S().bool,S().oneOf([o])])}),D={content:S().string,backgroundTextMode:S().oneOf(Object.values(l)),backgroundColor:C.PatternPropType,font:M.isRequired,fontSize:S().number,lineHeight:S().number,padding:L,textAlign:S().string,tagName:S().oneOf(["h1","h2","h3","p","auto"])};A.textContent=S().shape({...D}),A.elements.text=S().shape({...N,...D}),A.elements.shape=S().shape({...N,backgroundColor:C.PatternPropType}),A.elements.sticker=S().shape({...N,sticker:S().shape({type:S().string.isRequired})}),A.elements.background=S().shape({...P,inner:A.element})},25784:(e,t,n)=>{"use strict";n.d(t,{DEFAULT_MASK:()=>a.DEFAULT_MASK,DisplayWithMask:()=>i.default,FrameWithMask:()=>y,MASKS:()=>a.MASKS,MaskTypes:()=>a.MaskTypes,OutputWithMask:()=>_.default,canMaskHaveBorder:()=>r.canMaskHaveBorder,canSupportMultiBorder:()=>r.canSupportMultiBorder,generateMaskId:()=>r.generateMaskId,getBorderPositionCSS:()=>o.getBorderPositionCSS,getBorderRadius:()=>o.getBorderRadius,getBorderStyle:()=>o.getBorderStyle,getMaskByType:()=>r.getMaskByType,getResponsiveBorder:()=>o.getResponsiveBorder,shouldDisplayBorder:()=>o.shouldDisplayBorder});var r=n(99371),a=n(71356),o=n(34075),i=n(3562),l=n(67294),s=n(26300),c=n(72070),d=n(88914);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}const p={position:"absolute",top:0,left:0,right:0,bottom:0},m=(0,s.css)(["position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;"]),g=s.default.svg.withConfig({displayName:"frame__DropTargetSVG",componentId:"sc-1cagagv-0"})([""," z-index:",";"],m,(e=>{let{active:t}=e;return t?1:-1})),f=s.default.svg.withConfig({displayName:"frame__Filler",componentId:"sc-1cagagv-1"})(["",""],m),h=s.default.path.withConfig({displayName:"frame__FillerPath",componentId:"sc-1cagagv-2"})(["pointer-events:",";"],(e=>{let{isClickable:t}=e;return t?"all":"none"})),b=s.default.path.withConfig({displayName:"frame__DropTargetPath",componentId:"sc-1cagagv-3"})(["transition:opacity 0.5s;pointer-events:visibleStroke;opacity:",";stroke:",";"],(e=>{let{active:t}=e;return t?.3:0}),(e=>{let{theme:t}=e;return t.colors.border.selection})),E=s.default.div.withConfig({displayName:"frame__Wrapper",componentId:"sc-1cagagv-4"})(["width:100%;height:100%;::before{transition:opacity 0.5s;opacity:",";display:block;content:'';position:absolute;width:calc(100% + 8px);height:calc(100% + 8px);border-radius:8px;left:-4px;top:-4px;border:1px solid ",";}"],(e=>{let{hasBackgroundOutline:t}=e;return t?1:0}),(e=>{let{theme:t}=e;return t.colors.border.selection}));function WithDropTarget(e){let{element:t,children:n,hover:a,draggingResource:o,activeDropTargetId:i,isDropSource:s,registerDropTarget:d,unregisterDropTarget:p}=e;const m=(0,c.useRef)(null),{id:f,resource:h,isBackground:y,isLocked:_}=t,v=(0,r.getElementMask)(t);if((0,c.useEffect)((()=>{if(!_)return d(f,m.current),()=>{p(f)}}),[f,_,d,p]),!v)return n;const w=a&&!o||Boolean(o)&&s(o.type)&&o!==h,T=!_&&w,S=T&&!y,C=T&&y,I={vectorEffect:"non-scaling-stroke",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",d:v?.path};return l.createElement(E,{hasBackgroundOutline:C},n,l.createElement(g,{viewBox:"0 0 1 "+1/v.ratio,width:"100%",height:"100%",preserveAspectRatio:"none",active:i===t.id},l.createElement(b,u({},I,{strokeWidth:"3",style:{opacity:S?1:0}})),l.createElement(b,u({ref:m,strokeWidth:"48"},I))))}const y=(0,c.forwardRef)(((e,t)=>{let{element:n,fill:o,style:i,children:s,flip:m,draggingResource:g,activeDropTargetId:b,isDropSource:E,isSelected:y=!1,registerDropTarget:_,unregisterDropTarget:v,...w}=e;const[T,S]=(0,c.useState)(!1),{isBackground:C,isLocked:I}=n,x=!I||y,A={draggingResource:g,activeDropTargetId:b,isDropSource:E,registerDropTarget:_,unregisterDropTarget:v},k=(0,r.getElementMask)(n),O=m?{transform:(0,d.getTransformFlip)(m)}:null;if(!k?.type||C&&k.type!==a.MaskTypes.RECTANGLE)return l.createElement("div",u({style:{...o?p:{},...i,...O}},w),s);const P=(0,r.generateMaskId)(n,"frame");return l.createElement("div",u({ref:t,style:{...o?p:{},...i,...O,...C?{}:{clipPath:`url(#${P})`}}},w,{onPointerOver:()=>S(!0),onPointerOut:()=>S(!1)}),l.createElement("svg",{width:0,height:0},l.createElement("defs",null,l.createElement("clipPath",{id:P,transform:`scale(1 ${k.ratio})`,clipPathUnits:"objectBoundingBox"},l.createElement("path",{d:k.path})))),l.createElement(f,{viewBox:"0 0 1 "+1/k.ratio,width:"100%",height:"100%",preserveAspectRatio:"none"},l.createElement(h,{isClickable:x,fill:"none",d:k?.path})),x?l.createElement(WithDropTarget,u({element:n,hover:T},A,w),s):s)}));var _=n(12204)},50136:(e,t,n)=>{"use strict";n.d(t,{createBlob:()=>a,isBlobURL:()=>i,revokeBlob:()=>o});const r={};function a(e){const t=window.URL.createObjectURL(e);return r[t]=e,t}function o(e){(function(e){return r[e]})(e)&&window.URL.revokeObjectURL(e),delete r[e]}function i(e){return e?.startsWith("blob:")}},17001:(e,t,n)=>{"use strict";n.d(t,{CropMoveableGlobalStyle:()=>E,DefaultMoveableGlobalStyle:()=>_,InOverlay:()=>g,Moveable:()=>b,areEventsDragging:()=>S.default,withOverlay:()=>T});var r=n(67294),a=n(72070),o=n(26858),i=n(45697),l=n.n(i),s=n(26300);const c=(0,a.createContext)({container:null,layer:null});function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}const u=(0,s.css)(["",""],(e=>{let{pointerEvents:t}=e;return t&&"string"==typeof t?`pointer-events: ${t};`:""})),p=s.default.div.withConfig({displayName:"overlay__Wrapper",componentId:"sc-1ibws6s-0"})([""," position:absolute;top:0;left:0;width:0;height:0;z-index:",";"],u,(e=>{let{zIndex:t}=e;return`${t}`}));function InOverlayWithRef(e,t){let{zIndex:n,pointerEvents:o,render:i,children:l=null,...s}=e;const{container:u,overlay:m}=(0,a.useContext)(c);if(!u||!m)return null;const g=r.createElement(p,d({},s,{ref:t,zIndex:n||0,pointerEvents:o,onMouseDown:e=>e.stopPropagation()}),i?i({container:u,overlay:m}):l);return(0,a.createPortal)(g,m)}const m=(0,a.forwardRef)(InOverlayWithRef);InOverlayWithRef.propTypes={zIndex:l().number,pointerEvents:l().string,render:l().func,children:l().node};const g=m;function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}const h=(0,a.forwardRef)((function MoveableWithRef(e,t){let{onContextMenu:n,...a}=e;return r.createElement(g,{onContextMenu:n,zIndex:10,pointerEvents:"initial",render:e=>{let{container:n}=e;return r.createElement(o.default,f({ref:t,container:n},a))}})}));h.propTypes={onContextMenu:l().func};const b=h,E=(0,s.createGlobalStyle)([".crop-moveable .moveable-control{background:"," !important;border:none !important;}.crop-moveable .moveable-control.moveable-n,.crop-moveable .moveable-control.moveable-s,.crop-moveable .moveable-control.moveable-e,.crop-moveable .moveable-control.moveable-w{border:1px solid "," !important;border-radius:4px;}.crop-moveable .moveable-control.moveable-n,.crop-moveable .moveable-control.moveable-s{width:","px !important;height:","px !important;margin-left:-12px !important;}.crop-moveable .moveable-control.moveable-n{margin-top:-8px !important;}.crop-moveable .moveable-control.moveable-s{margin-top:0px !important;}.crop-moveable .moveable-control.moveable-e{margin-left:0 !important;}.crop-moveable .moveable-control.moveable-w{margin-top:0 !important;margin-left:-8px !important;}.crop-moveable .moveable-control.moveable-e,.crop-moveable .moveable-control.moveable-w{width:","px !important;height:","px !important;margin-top:-12px !important;}.crop-moveable .moveable-control.moveable-nw,.crop-moveable .moveable-control.moveable-ne,.crop-moveable .moveable-control.moveable-sw,.crop-moveable .moveable-control.moveable-se,.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before,.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{left:initial !important;right:initial !important;top:initial !important;bottom:initial !important;background:"," !important;position:absolute !important;border-style:solid !important;border-color:"," !important;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before,.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{content:'';}.crop-moveable .moveable-control.moveable-nw,.crop-moveable .moveable-control.moveable-ne,.crop-moveable .moveable-control.moveable-sw,.crop-moveable .moveable-control.moveable-se{width:","px !important;height:","px !important;}.crop-moveable .moveable-control.moveable-nw{top:-","px !important;left:-","px !important;border-width:1px 0 0 1px !important;border-radius:2px 0 0 0 !important;}.crop-moveable .moveable-control.moveable-ne{top:-","px !important;right:-","px !important;border-width:1px 1px 0 0 !important;border-radius:0 2px 0 0 !important;}.crop-moveable .moveable-control.moveable-sw{left:-","px !important;bottom:-","px !important;border-width:0 0 1px 1px !important;border-radius:0 0 0 2px !important;}.crop-moveable .moveable-control.moveable-se{right:-","px !important;bottom:-","px !important;border-width:0 1px 1px 0 !important;border-radius:0 0 2px 0 !important;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before{width:","px !important;height:","px !important;top:0;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-sw::before{left:","px !important;border-width:1px 1px 1px 0;border-radius:0 2px 2px 0;}.crop-moveable .moveable-control.moveable-ne::before,.crop-moveable .moveable-control.moveable-se::before{right:","px !important;border-width:1px 0 1px 1px;border-radius:2px 0 0 2px;}.crop-moveable .moveable-control.moveable-nw::before,.crop-moveable .moveable-control.moveable-ne::before{top:-","px !important;}.crop-moveable .moveable-control.moveable-sw::before,.crop-moveable .moveable-control.moveable-se::before{bottom:-","px !important;}.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{width:","px !important;height:","px !important;}.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-ne::after{top:","px !important;border-width:0 1px 1px 1px;border-radius:0 0 2px 2px;}.crop-moveable .moveable-control.moveable-sw::after,.crop-moveable .moveable-control.moveable-se::after{bottom:","px !important;border-width:1px 1px 0 1px;border-radius:2px 2px 0 0;}.crop-moveable .moveable-control.moveable-nw::after,.crop-moveable .moveable-control.moveable-sw::after{left:-","px !important;}.crop-moveable .moveable-control.moveable-ne::after,.crop-moveable .moveable-control.moveable-se::after{right:-",'px !important;}.crop-moveable .moveable-line.moveable-direction[data-line-index="0"]{margin-top:-4px;}.crop-moveable .moveable-line.moveable-direction[data-line-index="3"]{margin-top:4px;}.crop-moveable .moveable-line.moveable-direction[data-line-index="1"]{margin-left:4px;}.crop-moveable .moveable-line.moveable-direction[data-line-index="2"]{margin-left:-4px;}.crop-moveable .moveable-direction.moveable-line{background:'," !important;width:2px;height:2px;pointer-events:none;}"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.selection}),24,8,8,24,(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.selection}),7,7,1,1,1,7,1,7,7,7,17,8,6,6,1,1,8,17,6,6,1,1,(e=>{let{theme:t}=e;return t.colors.border.selection}));var y=n(37047);const _=(0,s.createGlobalStyle)([".default-moveable .moveable-control,.default-moveable .moveable-line.moveable-rotation-line .moveable-control{background:"," !important;border:1px solid "," !important;}.default-moveable.type-text .moveable-direction.moveable-n,.default-moveable.type-text .moveable-direction.moveable-s{pointer-events:none;}.default-moveable .moveable-control.moveable-n{display:none !important;}.default-moveable .moveable-line{border:0;background:transparent !important;width:1px;height:1px;}.default-moveable .moveable-horizontal{border-bottom:1px dashed "," !important;}.default-moveable .moveable-vertical{border-right:1px dashed "," !important;}.default-moveable .moveable-gap{border-color:"," !important;}.default-moveable .moveable-target{border-style:solid !important;}.default-moveable .moveable-control.moveable-s,.default-moveable .moveable-control.moveable-e,.default-moveable .moveable-control.moveable-w{border-radius:4px;}.default-moveable .moveable-control.moveable-nw,.default-moveable .moveable-control.moveable-ne,.default-moveable .moveable-control.moveable-sw,.default-moveable .moveable-control.moveable-se{border-radius:2px;width:8px;height:8px;margin-left:-4px;margin-top:-4px;}.default-moveable .moveable-control.moveable-s{height:6px !important;width:16px !important;margin-top:-3px !important;}.default-moveable .moveable-control.moveable-e{height:16px !important;width:6px !important;margin-left:-3px !important;}.default-moveable .moveable-control.moveable-w{height:16px !important;width:6px !important;margin-left:-3px !important;}.default-moveable.moveable-control-box .moveable-line.moveable-direction{background:"," !important;width:1px;height:1px;}.default-moveable.moveable-control-box .moveable-line.moveable-rotation-line{background:"," !important;width:1px;height:12px;top:28px;}.default-moveable.moveable-control-box .moveable-control.moveable-rotation-control{border-radius:50px;width:29px;height:29px;margin-left:-14.5px;top:10.5px;}.default-moveable.moveable-control-box .moveable-control.moveable-rotation-control::after{content:'';position:absolute;width:28px;height:28px;left:-1px;top:-1px;background-image:url(\"",'");background-size:100%;filter:invert(100%);}.default-moveable.hide-handles .moveable-line.moveable-rotation-line,.default-moveable.hide-handles .moveable-line.moveable-direction{display:none;}.default-moveable.visually-hide-handles .moveable-control.moveable-e,.default-moveable.visually-hide-handles .moveable-control.moveable-w,.default-moveable.visually-hide-handles .moveable-control.moveable-s,.default-moveable.visually-hide-handles .moveable-control.moveable-ne,.default-moveable.visually-hide-handles .moveable-control.moveable-nw,.default-moveable.visually-hide-handles .moveable-control.moveable-sw{opacity:0;}.default-moveable.immoveable .moveable-line.moveable-direction{cursor:default;}'],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{theme:t}=e;return t.colors.border.focus}),(e=>{let{theme:t}=e;return t.colors.border.focus}),(e=>{let{theme:t}=e;return t.colors.border.negativePress}),(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{theme:t}=e;return t.colors.border.selection}),y);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}const w=s.default.div.withConfig({displayName:"withOverlay__Overlay",componentId:"sc-hntauo-0"})(["position:absolute;top:0;/*! @noflip */ left:0;width:0;height:0;z-index:",";"],(e=>{let{zIndex:t}=e;return t}));const T=function(e){const t=(0,a.forwardRef)((function WithOverlay(t,n){let{children:o,...i}=t;const[l,s]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),{zIndex:p=1}=i;return r.createElement(c.Provider,{value:{container:d,overlay:l}},r.createElement(e,v({ref:(0,a.useCombinedRefs)(n,u)},i),o,r.createElement(w,{ref:s,zIndex:p})))}));return t};var S=n(8580)},72070:(e,t,n)=>{"use strict";n.d(t,{Component:()=>o.Component,Fragment:()=>o.Fragment,StrictMode:()=>o.StrictMode,Suspense:()=>o.Suspense,cloneElement:()=>o.cloneElement,createContext:()=>a.createContext,createElement:()=>o.createElement,createPortal:()=>i.createPortal,createRef:()=>o.createRef,forwardRef:()=>o.forwardRef,identity:()=>a.identity,lazy:()=>o.lazy,memo:()=>o.memo,render:()=>i.render,renderToStaticMarkup:()=>g.default,shallowEqual:()=>E.default,unmountComponentAtNode:()=>i.unmountComponentAtNode,useBatchingCallback:()=>l.default,useCallback:()=>o.useCallback,useCombinedRefs:()=>s.default,useContext:()=>a.useContext,useContextReact:()=>o.useContextReact,useContextSelector:()=>c.default,useDebouncedCallback:()=>r.default,useEffect:()=>o.useEffect,useFocusOut:()=>d.default,useImperativeHandle:()=>o.useImperativeHandle,useInitializedValue:()=>b,useLayoutEffect:()=>o.useLayoutEffect,useMemo:()=>o.useMemo,usePrevious:()=>u.default,useReducer:()=>o.useReducer,useReduction:()=>p,useRef:()=>o.useRef,useResizeEffect:()=>m.default,useState:()=>o.useState,useUnmount:()=>f.default});var r=n(19302),a=n(24778),o=n(66803),i=n(73935),l=n(6075),s=n(20814),c=n(76969),d=n(24114),u=n(95471);function p(e,t){const[n,r]=(0,o.useReducer)(function(e){return(t,n)=>n&&n.type&&e[n.type]?e[n.type](t,n):t}(t),e),a=(0,o.useMemo)((()=>function(e,t){return Object.keys(e).reduce(((e,n)=>(e[n]||(e[n]=e=>{t({type:n,payload:e})}),e)),{})}(t,r)),[t]);return[n,a]}var m=n(13920),g=n(86757),f=n(84067),h=(n(40083),n(67294));const b=function(e){return(0,h.useState)(e)[0]};var E=n(14821)},66803:(e,t,n)=>{"use strict";n.d(t,{Component:()=>r.Component,Fragment:()=>r.Fragment,StrictMode:()=>r.StrictMode,Suspense:()=>r.Suspense,cloneElement:()=>r.cloneElement,createElement:()=>r.createElement,createRef:()=>r.createRef,forwardRef:()=>r.forwardRef,lazy:()=>r.lazy,memo:()=>r.memo,useCallback:()=>r.useCallback,useContextReact:()=>r.useContext,useEffect:()=>r.useEffect,useImperativeHandle:()=>r.useImperativeHandle,useLayoutEffect:()=>r.useLayoutEffect,useMemo:()=>r.useMemo,useReducer:()=>r.useReducer,useRef:()=>r.useRef,useState:()=>r.useState});var r=n(67294)},53649:(e,t,n)=>{"use strict";n.d(t,{fauxStylesToCSS:()=>l,useFauxSelection:()=>i});var r=n(72070),a=n(9041);const o="CUSTOM-FAUX";function i(e,t){const[n,i]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(!e)return void i(null);const r=e.getCurrentContent(),l=e.getSelection(),s=l?.getHasFocus(),c=(u=l,!((d=n)&&u&&d.serialize().replace(/has focus: .*$/i,"")===u.serialize().replace(/has focus: .*$/i,"")));var d,u;const p=Boolean(n);if(!s&&!p){const n=a.Modifier.applyInlineStyle(r,l,o),s=a.EditorState.push(e,n,"change-inline-style");t(s),i(l)}s&&c&&p&&(t((e=>{try{const t=a.Modifier.removeInlineStyle(e.getCurrentContent(),n,o),r=a.EditorState.push(e,t,"change-inline-style");return a.EditorState.forceSelection(r,e.getSelection())}catch(t){return e}})),i(null))}),[n,e,t])}function l(e,t){if(!e.includes(o))return null;const n={backgroundColor:"rgba(169, 169, 169, 0.7)"};return t?.color&&(n.color=`var(--faux-selection-color, ${t.color})`),n}},56862:(e,t,n)=>{"use strict";n.d(t,{RichTextEditor:()=>T.default,RichTextProvider:()=>w,getCaretCharacterOffsetWithin:()=>x.default,getFontVariants:()=>I.default,getHTMLFormatters:()=>A.getHTMLFormatters,getHTMLInfo:()=>A.getHTMLInfo,usePasteTextContent:()=>C,useRichText:()=>S.default});var r=n(67294),a=n(72070),o=n(9041),i=n(34224),l=n(97643),s=n(47682),c=n(53649),d=n(21229),u=n(11810),p=n(92507);const m={BOLD:(0,n(28020).weightToStyle)("700"),ITALIC:p.ITALIC,UNDERLINE:p.UNDERLINE};const g=function(e,t,n){let r=n,a=null;return e.findStyleRanges((e=>(a=e,!0)),((e,n)=>{const i=a.getStyle().toArray(),l=function(e){return e.map((e=>e in m?m[e]:null)).filter(Boolean)}(i),s=t.merge({anchorOffset:e,focusOffset:n});i.forEach((e=>{r=o.Modifier.removeInlineStyle(r,s,e)})),l.forEach((e=>{r=o.Modifier.applyInlineStyle(r,s,e)}))})),r};class CustomBlockRenderMap{constructor(){this._map={unstyled:{element:"div",aliasedElements:["p","h1","h2","h3","blockquote","pre"]},"unordered-list-item":{element:"li"},"ordered-list-item":{element:"li"}}}mapKeys(e){return Object.keys(this._map).map((t=>e(t,this._map[t])))}}const f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=new CustomBlockRenderMap,{contentBlocks:r,entityMap:a}=(0,o.convertFromHTML)(e,void 0,n),i=o.ContentState.createFromBlockArray(r,a),l=h(i),s=o.Modifier.applyEntity(i,l,null),c=s.getBlocksAsArray();let d=s,u=null,p=0;c.forEach((e=>{const t=o.SelectionState.createEmpty(e.getKey());d=g(e,t,d);const n=e.getType();if("unstyled"!==n){let r=null;switch(n){case"unordered-list-item":r="– ";break;case"ordered-list-item":p=u===n?p+1:1,r=`${p}. `}r&&(d=o.Modifier.insertText(d,t,r));const a=t.merge({focusOffset:e.getLength()});d=o.Modifier.setBlockType(d,a,"unstyled")}u=n}));const m=h(d);return t.forEach((e=>{d=o.Modifier.applyInlineStyle(d,m,e)})),d.getBlockMap()};function h(e){const t=e.getFirstBlock(),n=e.getLastBlock();return o.SelectionState.createEmpty(t.getKey()).merge({focusKey:n.getKey(),focusOffset:n.getLength()})}var b=n(54530);const E=function(e){return(0,a.useCallback)(((t,n,r)=>{const a=r.getCurrentContent(),i=r.getSelection();let l,s;if(n){let e=(0,b.getPrefixStylesInSelection)(r,p.COLOR);e.length>1&&(e=e.slice(0,1));const t=f(n,e);l=o.Modifier.replaceWithFragment(a,i,t),s="insert-fragment"}else{const e=r.getCurrentInlineStyle();l=o.Modifier.replaceText(a,i,t,e),s="insert-characters"}const c=o.EditorState.push(r,l,s);return e(c),!0}),[e])};var y=n(33251);const _=function(e,t){const n=(0,a.useRef)(null),r=(0,a.useRef)(null);(0,a.useEffect)((()=>{n.current=e,e?e.getSelection().hasFocus&&(r.current=e.getSelection()):r.current=null}),[e]);const i=(0,a.useCallback)((function(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=n.current,l=r.current,s=a?o.EditorState.forceSelection(i,l):i,c=e(s);t(c)}),[t]),l=(0,a.useCallback)((e=>`${e}InSelection`),[]),s=(0,a.useCallback)(((e,t)=>function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i((t=>e(t,...r)),t)}),[i]);return(0,a.useMemo)((()=>y.default.reduce(((e,t)=>{let{setters:n,autoFocus:r}=t;return{...e,...Object.fromEntries(Object.entries(n).map((e=>{let[t,n]=e;return[l(t),s(n,r)]})))}}),{})),[l,s])},v={isBold:!1,isItalic:!1,isUnderline:!1,isUppercase:!1};const w=function RichTextProvider(e){let{children:t,editingState:n}=e;const[p,m]=(0,a.useState)(null),g=(0,a.useRef)(null),f=(0,a.useMemo)((()=>p?(0,s.default)(p):v),[p]),h=(0,a.useCallback)((e=>{const{offset:t,clearContent:r,selectAll:a}=n||{};let i,s=o.EditorState.createWithContent((0,d.default)(e));r&&(s=o.EditorState.push(s,(0,d.default)(""),"remove-range")),a?i=(0,l.getSelectionForAll)(s.getCurrentContent()):isNaN(t)||(i=(0,l.getSelectionForOffset)(s.getCurrentContent(),t)),i&&(s=o.EditorState.forceSelection(s,i)),g.current=s.getCurrentInlineStyle(),m(s)}),[n,m]);(0,c.useFauxSelection)(p,m);const b=(0,a.useCallback)((e=>{let t=(0,l.getFilteredState)(e,p);""===t.getCurrentContent().getPlainText("")?t=o.EditorState.setInlineStyleOverride(t,g.current):g.current=t.getCurrentInlineStyle(),m(t)}),[p,m]),y=(0,a.useCallback)((()=>(0,l.getHandleKeyCommandFromState)(b)),[b]),w=E(m),T=(0,a.useCallback)((()=>{m(null)}),[m]),S=Boolean(p),C=_(p,m),I={state:{editorState:p,hasCurrentEditor:S,selectionInfo:f},actions:{setStateFromContent:h,updateEditorState:b,getHandleKeyCommand:y,handlePastedText:w,clearState:T,selectionActions:C,getContentFromState:u.default}};return r.createElement(i.default.Provider,{value:I},t)};var T=n(4517),S=n(56991);const C=function(e,t){return(0,a.useCallback)((n=>{const r=f(n).toArray(),a=o.ContentState.createFromBlockArray(r),i=o.EditorState.createWithContent(a),l=(0,u.default)(i);return!!l&&(e("text",{...t,content:l}),!0)}),[e,t])};var I=n(44397),x=n(40098),A=n(67187)},97643:(e,t,n)=>{"use strict";n.d(t,{getFilteredState:()=>c,getHandleKeyCommandFromState:()=>d,getSelectionForAll:()=>u,getSelectionForOffset:()=>p});var r=n(9041),a=n(84693),o=n(28020),i=n(28653),l=n(57778),s=n(15948);function c(e,t){return t.getCurrentContent()!==e.getCurrentContent()&&"insert-fragment"===e.getLastChangeType()?(0,a.filterEditorState)({blocks:[],styles:["BOLD","ITALIC","UNDERLINE"],entities:[],maxNesting:1,whitespacedCharacters:[]},e):e}const d=e=>(t,n)=>{const a=function(e,t){switch(e){case"bold":return o.default.setters.toggleBold(t);case"italic":return i.default.setters.toggleItalic(t);case"underline":return l.default.setters.toggleUnderline(t);case"uppercase":return s.default.setters.toggleUppercase(t);case"selectall":return r.EditorState.forceSelection(t,u(t.getCurrentContent()));default:return null}}(t,n);return a?(e(a),"handled"):"not-handled"};function u(e){const t=e.getFirstBlock(),n=e.getLastBlock();return new r.SelectionState({anchorKey:t.getKey(),anchorOffset:0,focusKey:n.getKey(),focusOffset:n.getLength()})}function p(e,t){const n=e.getBlocksAsArray();let a=t;for(let e=0;e<n.length&&a>=0;e++){const t=n[e],o=t.getLength();if(a<=o){return new r.SelectionState({anchorKey:t.getKey(),anchorOffset:a,focusKey:t.getKey(),focusOffset:a})}a-=o+1}return null}},36382:(e,t,n)=>{"use strict";n.d(t,{getTimeTracker:()=>c.default,initializeTracking:()=>r.default,trackClick:()=>o.default,trackError:()=>i.default,trackEvent:()=>l.default,trackTiming:()=>s});var r=n(49388),a=(n(57714),n(60946));n(49379);var o=n(36864),i=n(68729),l=n(5532);const s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"click";(0,l.default)("timing_complete",{name:r,value:t,event_category:e,event_label:n,send_to:a.config.trackingId}),(0,l.default)(r,{value:t,event_category:e,event_label:n,send_to:a.config.trackingIdGA4})};n(87438);var c=n(26962)},2357:(e,t,n)=>{"use strict";n.d(t,{TransformProvider:()=>l,useTransform:()=>s,useTransformHandler:()=>c});var r=n(67294),a=n(72070),o=n(62531);const i=e=>{if(null===e)return!0;return 1===Object.keys(e).length&&"dropTargets"in e},l=function TransformProvider(e){let{children:t}=e;const n=(0,a.useRef)({}),l=(0,a.useRef)({}),[s,c]=(0,a.useState)(!1),d={state:{isAnythingTransforming:s},actions:{registerTransformHandler:(0,a.useCallback)(((e,t)=>{const r=n.current,a=r[e]||(r[e]=[]);return a.push(t),()=>{a.splice(a.indexOf(t),1)}}),[]),pushTransform:(0,a.useCallback)(((e,t)=>{const r=n.current,a=l.current,o=r[e];if(o&&o.forEach((e=>e(t))),a[e]=null===t?null:{...a[e],...t},i(a[e])){Object.values(a).every(i)&&(l.current={},c(!1))}else t.staticTransformation||c(!0)}),[]),clearTransforms:(0,a.useCallback)((()=>{l.current={},c(!1)}),[c])}};return r.createElement(o.default.Provider,{value:d},t)};const s=function(e){return(0,a.useContextSelector)(o.default,e??a.identity)};const c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r=s((e=>{let{actions:t}=e;return t.registerTransformHandler}));(0,a.useEffect)((()=>r(e,t)),n)}},15985:(e,t,n)=>{"use strict";n.d(t,{DANGER_ZONE_HEIGHT:()=>s,DEFAULT_DPR:()=>d,DEFAULT_EM:()=>c,FULLBLEED_HEIGHT:()=>l,FULLBLEED_RATIO:()=>i,PAGE_HEIGHT:()=>o,PAGE_RATIO:()=>r,PAGE_WIDTH:()=>a});const r=2/3,a=412,o=618,i=9/16,l=a/i,s=(l-o)/2,c=.02186*o,d=.5},1787:(e,t,n)=>{"use strict";n.d(t,{dataFontEm:()=>i,dataPixels:()=>o,dataToEditorX:()=>s,dataToEditorY:()=>c,dataToFontSizeY:()=>d,editorPixels:()=>l,editorToDataX:()=>u,editorToDataY:()=>p,getBox:()=>m,getBoxWithBorder:()=>g});var r=n(15985),a=n(32396);function o(e){return Number(e.toFixed(0))}function i(e){return Number((e*r.DEFAULT_EM).toFixed(1))}function l(e){return Number(e.toFixed(5))}function s(e,t){return l(e*t/r.PAGE_WIDTH)}function c(e,t){return l(e*t/r.PAGE_HEIGHT)}function d(e,t){return(c(e,t)/10).toFixed(6)}function u(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=e*r.PAGE_WIDTH/t;return!1===n?a:o(a)}function p(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=e*r.PAGE_HEIGHT/t;return!1===n?a:o(a)}function m(e,t,n){let{x:a,y:o,width:i,height:l,rotationAngle:d,isBackground:u}=e;return{x:s(u?0:a,t),y:c(u?-r.DANGER_ZONE_HEIGHT:o,n),width:s(u?r.PAGE_WIDTH:i,t),height:c(u?r.FULLBLEED_HEIGHT:l,n),rotationAngle:u?0:d}}function g(e,t,n){const{rotationAngle:r,border:o}=e,i=m(e,t,n);if(!o)return i;const{left:l=0,right:s=0,top:c=0,bottom:d=0}=o,[u,p]=(0,a.default)(r,l,s,c,d);return{...i,x:i.x+u,y:i.y+p,width:i.width+l+s,height:i.height+c+d}}},70333:(e,t,n)=>{"use strict";n.d(t,{calcRotatedObjectPositionAndSize:()=>a,default:()=>__WEBPACK_DEFAULT_EXPORT__,getCorners:()=>o});var r=n(1787);function a(e,t,n,r,a){if(!e||0===e)return{x:t,y:n,width:r,height:a};const{topLeftPoint:i,topRightPoint:l,bottomRightPoint:s,bottomLeftPoint:c}=o(e,t,n,r,a),d=Math.min(i.x,l.x,s.x,c.x),u=Math.min(i.y,l.y,s.y,c.y);return{x:d,y:u,width:Math.max(i.x,l.x,s.x,c.x)-d,height:Math.max(i.y,l.y,s.y,c.y)-u}}function o(e,t,n,r,a){const o=t+.5*r,l=n+.5*a,s=e*Math.PI/180;return{topLeftPoint:i(o,l,t,n,s),topRightPoint:i(o,l,t+r,n,s),bottomRightPoint:i(o,l,t+r,n+a,s),bottomLeftPoint:i(o,l,t,n+a,s)}}function i(e,t,n,a,o){const i=n-e,l=a-t,s=Math.sqrt(i*i+l*l);o+=Math.atan2(l,i);return{x:(0,r.dataPixels)(e+s*Math.cos(o)),y:(0,r.dataPixels)(t+s*Math.sin(o))}}const __WEBPACK_DEFAULT_EXPORT__=function(e){const t=e.map((e=>a(e.rotationAngle,e.x,e.y,e.width,e.height))),n=t[0];let r=n.x,o=n.y,i=r+n.width,l=o+n.height;return t.slice(1).forEach((e=>{r=Math.min(e.x,r),o=Math.min(e.y,o),i=Math.max(e.x+e.width,i),l=Math.max(e.y+e.height,l)})),{startX:r,startY:o,endX:i,endY:l,width:i-r,height:l-o}}},38803:(e,t,n)=>{var r={"./contact.json":[34759,2476],"./cover.json":[97478,9027],"./editorial.json":[16989,3871],"./list.json":[12233,2634],"./quote.json":[4971,2563],"./section_header.json":[48438,9843],"./step.json":[89696,7611],"./table.json":[81464,2761]};function a(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((()=>n.t(a,17)))}a.keys=()=>Object.keys(r),a.id=38803,e.exports=a},73502:(e,t,n)=>{"use strict";function r(e,t){return document?.fonts?document.fonts.load(e,t||"").then((()=>document.fonts.check(e,t||""))):Promise.resolve(!0)}n.d(t,{default:()=>r})},58860:(e,t,n)=>{"use strict";n.d(t,{ensureFontLoaded:()=>l.default,escapeHTML:()=>i,loadInlineStylesheet:()=>s.loadInlineStylesheet,loadStylesheet:()=>s.loadStylesheet,stripHTML:()=>a});const r=document.createElement("div");function a(e){return r.innerHTML=e,r.textContent}const o=document.createElement("div");function i(e){return o.textContent=e,o.innerHTML}var l=n(73502),s=n(99659)},99659:(e,t,n)=>{"use strict";function r(e,t){return new Promise(((n,r)=>{const a=document.createElement("link");a.id=t,a.rel="stylesheet",a.href=e,a.crossOrigin="anonymous",a.addEventListener("load",n),a.addEventListener("error",r),document.head.appendChild(a)}))}function a(e,t){if(!t)return;const n=document.createElement("style");n.textContent=t,n.id=e,document.head.appendChild(n)}n.d(t,{loadInlineStylesheet:()=>a,loadStylesheet:()=>r})},49925:(e,t,n)=>{"use strict";n.d(t,{DATA_VERSION:()=>r.DATA_VERSION,migrate:()=>r.migrate});var r=n(84225)},14013:(e,t,n)=>{"use strict";var r={};n.r(r),n.d(r,{addItem:()=>mo,cancelUploading:()=>Eo,finishItem:()=>Io,finishMuting:()=>wo,finishTranscoding:()=>_o,finishTrimming:()=>So,finishUploading:()=>bo,prepareForTranscoding:()=>fo,prepareItem:()=>go,removeItem:()=>xo,replacePlaceholderResource:()=>Co,startMuting:()=>vo,startTranscoding:()=>yo,startTrimming:()=>To,startUploading:()=>ho});var a={};n.r(a),n.d(a,{deleteMediaElement:()=>vl,fetchMediaError:()=>El,fetchMediaStart:()=>hl,fetchMediaSuccess:()=>bl,prependMedia:()=>Ol,removeAudioProcessing:()=>Il,removePosterProcessing:()=>Al,resetFilters:()=>wl,setAudioProcessing:()=>Cl,setMedia:()=>kl,setMediaType:()=>Sl,setNextPage:()=>yl,setPosterProcessing:()=>xl,setSearchTerm:()=>Tl,updateMediaElement:()=>_l});var o={};n.r(o),n.d(o,{deleteMediaElement:()=>fl,deselectCategory:()=>Ll,fetchCategoriesError:()=>Rl,fetchCategoriesStart:()=>Pl,fetchCategoriesSuccess:()=>Nl,fetchMediaError:()=>pl,fetchMediaStart:()=>dl,fetchMediaSuccess:()=>ul,selectCategory:()=>Ml,setNextPage:()=>ml,setSearchTerm:()=>Bl,setSelectedProvider:()=>Dl,updateMediaElement:()=>gl});var i={};n.r(i),n.d(i,{AlignBottom:()=>Pg,AlignCenter:()=>Lg,AlignLeft:()=>Hg,AlignMiddle:()=>Gg,AlignRight:()=>Vg,AlignTextCenter:()=>Kg,AlignTextJustified:()=>Jg,AlignTextLeft:()=>nf,AlignTextRight:()=>of,AlignTop:()=>df,Angle:()=>mf,ArrowCloud:()=>Mm,ArrowDown:()=>ff.default,ArrowDownLeftCurved:()=>zd,ArrowDownRightCurved:()=>Zd,ArrowLeft:()=>bf,ArrowLeftCurved:()=>_f,ArrowLeftLarge:()=>wf.default,ArrowOutline:()=>Sf,ArrowRight:()=>xf,ArrowRightCurved:()=>Of,ArrowRightLarge:()=>Nf.default,ArrowUp:()=>Mf,ArrowsLeftRight:()=>Bf,Border:()=>Uf,BorderBox:()=>Gf,Box1:()=>Wf,Box4:()=>$f.default,Box4Alternate:()=>Kf,Bucket:()=>eh,Camera:()=>rh,CameraOff:()=>ih,Captions:()=>dh,Checkbox:()=>jp,Checklist:()=>mh,Checkmark:()=>fh.default,CheckmarkCircle:()=>nm,CheckmarkSmall:()=>hh.default,ChevronDown:()=>bh.default,ChevronDownSmall:()=>Sp.default,ChevronRightSmall:()=>yh,ChevronUp:()=>vh.default,ChevronUpSmall:()=>Th,CircleSpeed:()=>xh,ColorBucket:()=>Nh,ColorDrop:()=>Lh,Corner:()=>Fh,Cross:()=>cp.default,CrossLarge:()=>jh.default,CrossSmall:()=>zh.default,DistributeHorizontal:()=>Yh,DistributeVertical:()=>$h,Dots:()=>Xh,DotsFillSmall:()=>eb,Eraser:()=>ob,ExclamationOutline:()=>lb.default,ExclamationTriangle:()=>cb,Eye:()=>Qd,FloppyDisk:()=>mb,GearWithGauge:()=>bb,Gif:()=>_b,Group:()=>Tb,Keyboard:()=>Db,Launch:()=>Fb.default,LetterAHeight:()=>Ub,LetterAWidth:()=>Gb,LetterBBold:()=>Wb,LetterIItalic:()=>qb,LetterIOutline:()=>Qb,LetterMOutline:()=>nE,LetterSStrikethrough:()=>oE,LetterT:()=>lE.default,LetterTArrow:()=>cE,LetterTLargeLetterTSmall:()=>EE,LetterTPlus:()=>pE,LetterTUppercase:()=>fE,LetterUUnderline:()=>vE,Link:()=>SE,LockClosed:()=>IE.default,LockFilledClosed:()=>AE,LockOpen:()=>PE,Magnifier:()=>ME.default,Media:()=>DE,Mic:()=>HE,MicOff:()=>zE,MirrorLeftRight:()=>VE,MirrorUpDown:()=>QE,Muted:()=>oy,PageMargin:()=>sy,PagePlus:()=>uy,PageSwap:()=>by,PatternLinear:()=>wy,PatternRadial:()=>xy,PatternSolid:()=>Oy,Pencil:()=>Ny.default,Percent:()=>My,PhotoCamera:()=>By,Picture:()=>Uy,PictureSwap:()=>Zy,Pipette:()=>$y,Play:()=>Xy,PlayFilled:()=>Jy.default,PlayOutline:()=>a_,Plus:()=>l_,PlusFilled:()=>d_,PlusFilledSmall:()=>t_,PlusOutline:()=>m_,QuestionMarkOutline:()=>b_,RemoveMask:()=>Ev,Rotate:()=>T_,Scissors:()=>P_,Settings:()=>M_,Shapes:()=>B_,Shopping:()=>H_.default,Sort:()=>j_,Sparkles:()=>Z_,StopFilled:()=>V_.default,StopOutline:()=>q_,Table:()=>X_.default,TailedRectangle:()=>J_,Timeline:()=>nv,Trash:()=>av.default,TrashFilledSmall:()=>iv,TurningLine:()=>cv,Union:()=>pv,Video:()=>hv.default});var l={};n.r(l),n.d(l,{addPublisherLogo:()=>q5,getPublisherLogos:()=>$5});var s={};n.r(s),n.d(s,{addPageTemplate:()=>W4,autoSaveById:()=>P4,createTaxonomyTerm:()=>n7,deleteMedia:()=>U4,deletePageTemplate:()=>$4,getAuthors:()=>S4,getCurrentUser:()=>K4,getCustomPageTemplates:()=>Z4,getFonts:()=>r7,getHotlinkInfo:()=>Q4,getLinkMetadata:()=>j4,getMedia:()=>N4,getMediaById:()=>M4,getMediaForCorsCheck:()=>R4,getMutedMediaById:()=>L4,getOptimizedMediaById:()=>D4,getPosterMediaById:()=>B4,getProducts:()=>a7,getProxyUrl:()=>J4,getStoryById:()=>A4,getTaxonomies:()=>e7,getTaxonomyTerm:()=>t7,saveStoryById:()=>O4,updateCurrentUser:()=>X4,updateMedia:()=>H4,updatePageTemplate:()=>V4,uploadMedia:()=>F4});var c=n(67294);n.p=window.webStories.publicPath;var d=n(91655);for(const e of window?.webStories?.localeData||[])(0,d.setLocaleData)(e);var u=n(72070),p=n(26300),m=n(46324),g=n(22049),f=n(45246),h=n(17216),b=n(70250);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}const y=e=>{let{onClose:t,onSecondary:n,onPrimary:r,primaryText:a,secondaryText:o,primaryRest:i,secondaryRest:l,actions:s,children:d,...y}=e;const _=(0,u.useMemo)((()=>a&&c.createElement(m.Button,E({type:g.BUTTON_TYPES.PRIMARY,size:g.BUTTON_SIZES.SMALL,onClick:e=>r?.(e)},i),a)),[a,i,r]),v=(0,u.useMemo)((()=>o&&c.createElement(m.Button,E({type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,onClick:()=>n?.()||t()},l),o)),[o,l,n,t]);return c.createElement(p.ThemeProvider,{theme:{...f.theme,colors:h.light}},c.createElement(b.Dialog,E({onClose:t},y,{actions:s||c.createElement(c.Fragment,null,v,_)}),d))};n(92087);var _=n(14194),v=n(7471),w=n(11756),T=n(90997),S=n(59042),C=n(1745),I=n(2357),x=n(17001),A=n(95370);const k=(0,p.createGlobalStyle)(["ul#adminmenu a.wp-has-current-submenu::after{border-right-color:",";}.web-stories-content b,.web-stories-content strong{font-weight:bold;}body.edit-story #wpbody *{",";}"],f.theme.colors.bg.secondary,A.scrollbarCSS);const O=f.theme;var P=n(36382);const N=p.default.div.withConfig({displayName:"errorActions__Message",componentId:"sc-mspoll-0"})(["color:#fff;font-size:16px;font-weight:300;line-height:1.6;padding:20px;button{margin-right:6px;}"]),R=p.default.textarea.withConfig({displayName:"errorActions__TextArea",componentId:"sc-mspoll-1"})(["width:100%;min-height:200px;"]),M=p.default.p.withConfig({displayName:"errorActions__P",componentId:"sc-mspoll-2"})(["margin:0 0 8px 0;"]),L=p.default.div.withConfig({displayName:"errorActions__Wrapper",componentId:"sc-mspoll-3"})(["display:flex;"]);const D=function ErrorActions(e){let{error:t,errorInfo:n}=e;const r=`${t}\n${n.componentStack}`;return c.createElement(N,null,c.createElement(M,null,(0,d.__)("Something went wrong!","web-stories")),c.createElement(M,null,(0,d.__)("The editor has crashed. Please try reloading the page and report the error using the button below.","web-stories")),c.createElement(M,null,(0,d.__)("Apologies for the inconvenience.","web-stories")),c.createElement(M,null,c.createElement(R,{readOnly:!0,value:r,onFocus:e=>e.target.setSelectionRange(0,r.length)})),c.createElement(L,null,c.createElement(m.Button,{variant:g.BUTTON_VARIANTS.RECTANGLE,type:g.BUTTON_TYPES.QUATERNARY,size:g.BUTTON_SIZES.SMALL,onClick:()=>{window.location.reload(!0)}},(0,d.__)("Reload","web-stories")),c.createElement(m.Button,{variant:g.BUTTON_VARIANTS.RECTANGLE,type:g.BUTTON_TYPES.PRIMARY,size:g.BUTTON_SIZES.SMALL,href:"https://wordpress.org/support/plugin/web-stories/#new-topic-0",target:"_blank",rel:"noreferrer"},(0,d.__)("Report Error","web-stories"))))};class ErrorBoundary extends u.Component{state={error:null,errorInfo:null};componentDidCatch(e,t){this.setState({error:e,errorInfo:t});const n=t?`${e.message}\n\n${t.componentName}\n${t.componentStack}`:e.message;(0,P.trackError)("editor_error_boundary",n,!0)}render(){const{error:e,errorInfo:t}=this.state;return e?c.createElement(D,{error:e,errorInfo:t}):this.props.children}}const B=ErrorBoundary,F=(0,u.createContext)({});const H=function ConfigProvider(e){let{config:t,children:n}=e;return c.createElement(F.Provider,{value:t},n)};const U=function(e){return(0,u.useContextSelector)(F,e??u.identity)};var j=n(30065),z=n(16769);const G=(0,j.default)(z.default);const Y=(0,u.createContext)({state:{},actions:{}});const Z=function APIProvider(e){let{children:t}=e;const{apiCallbacks:n,cdnURL:r}=U(),a=(0,u.useRef)({base:[]});return n.getPageTemplates=(0,u.useCallback)((async()=>(0===a.current.base.length&&(a.current.base=await async function(e){let{cdnURL:t}=e;const n=await G(t),r={createdBy:"Google",modified:"2020-04-21"};return n.map(((e,t)=>({id:t+1,...r,...e})))}({cdnURL:r})),a.current.base)),[r]),c.createElement(Y.Provider,{value:{actions:n}},t)};const W=function(e){return(0,u.useContextSelector)(Y,e??u.identity)};const V=function(e){let{name:t=""}=e;return t.includes(".")?t.split(".").slice(0,-1).join("."):t},$=e=>{const t=new window.FileReader;return new Promise(((n,r)=>{t.onload=()=>n(t),t.onerror=r,t.readAsArrayBuffer(e)}))};var q=n(50136),K=n(86957);const X=async e=>{const t=await(0,K.default)({src:e});return{width:t.naturalWidth,height:t.naturalHeight}},Q=e=>e?.split("/")[0]||null;const src_normalizeResourceSizes=function(e){const t={};if(!e)return t;for(const n of Object.keys(e)){const r=e[n];t[n]={...r,width:Number(r.width),height:Number(r.height)}}return t};const J=function(e){let{baseColor:t,blurHash:n,type:r,mimeType:a,creationDate:o,src:i,width:l,height:s,poster:c,posterId:d,id:u,length:p,lengthFormatted:m,alt:g,sizes:f,attribution:h,output:b,isPlaceholder:E=!1,isOptimized:y=!1,isMuted:_=!1,isExternal:v=!1,trimData:w,needsProxy:T=!1}=e;return{baseColor:t,blurHash:n,type:r||Q(a),mimeType:a,creationDate:o,src:i,width:Number(l||0),height:Number(s||0),poster:c,posterId:d,id:u,length:p,lengthFormatted:m,alt:g,sizes:src_normalizeResourceSizes(f),attribution:h,output:b,isPlaceholder:E,isOptimized:y,isMuted:_,isExternal:v,trimData:w,needsProxy:T}};var ee=n(15985);const te=function(e){let{width:t,height:n,posterGenerated:r,posterWidth:a,posterHeight:o}=e;return r&&a&&o?{width:a,height:o}:t||n?{width:t,height:n}:{width:ee.PAGE_WIDTH,height:ee.FULLBLEED_HEIGHT}},ne=e=>{const t=document.createElement("video");return t.muted=!0,t.crossOrigin="anonymous",t.preload="metadata",new Promise(((n,r)=>{t.addEventListener("loadedmetadata",(()=>n(t))),t.addEventListener("error",r),t.src=e}))};const re=async function(e){const t=await ne(e);return new Promise(((e,n)=>{t.addEventListener("canplay",(()=>e(t)),{once:!0}),t.addEventListener("error",n),t.preload="auto"}))},ae=e=>e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});const oe=function(e){const t=parseInt(e/3600);e%=3600;const n=parseInt(e/60);return e%=60,t?`${t}:${ae(n)}:${ae(e)}`:`${n}:${ae(e)}`};const ie=function(e){const t=!isNaN(e.duration)&&1/0!==e.duration?e.duration:0,n=Math.round(t);return{length:n,lengthFormatted:oe(n)}};const le=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.99;return e.currentTime===t?Promise.resolve():new Promise(((n,r)=>{e.addEventListener("seeking",(e=>{const t=setTimeout((()=>{clearTimeout(t),r(e)}),3e3)})),e.addEventListener("error",r),e.addEventListener("seeked",(()=>n(e)),{once:!0}),e.currentTime=t}))};const se=function(e){return e.mozHasAudio||Boolean(e.webkitAudioDecodedByteCount)||Boolean(e.audioTracks?.length)};const ce=function(e,t,n){return new File([e],t,{type:n})};const de=function(e){return new Promise((function(t){e.toBlob((e=>{t(e,"image/jpeg")}))}))};const ue=function(e){const t=document.createElement("canvas");return t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height),de(t)};var pe=n(44586);const me={100:(0,d._x)("Thin","font weight","web-stories"),200:(0,d._x)("Extra-light","font weight","web-stories"),300:(0,d._x)("Light","font weight","web-stories"),400:(0,d._x)("Regular","font weight","web-stories"),500:(0,d._x)("Medium","font weight","web-stories"),600:(0,d._x)("Semi-bold","font weight","web-stories"),700:(0,d._x)("Bold","font weight","web-stories"),800:(0,d._x)("Extra-bold","font weight","web-stories"),900:(0,d._x)("Black","font weight","web-stories")},ge=2147483648,fe="jpeg",he="image/jpeg",be="video/mp4",Ee="mp4",ye=720,_e=1280,ve=["video/mp4"],we="((MULTIPLE))",Te=(0,d.__)("Mixed","web-stories"),Se={PAGE_NAVIGATION:{category:"page",label:"arrow_navigate"},PAGE_PREVIEW_CLICK:{category:"page",label:"carousel_navigate"},PAGE_ADD:{category:"page",label:"add_new"},PAGE_DELETE:{category:"page",label:"delete"},SELECT_ELEMENT:{category:"select_element"},LIBRARY_PANEL_CLICK:{category:"library_panel"},DESIGN_PANEL_CLICK:{category:"design_panel"},INSERT_ELEMENT:{category:"insert_element"},DELETE_ELEMENT:{category:"delete_element"},SET_BACKGROUND_MEDIA:{category:"background",label:"set_media_as_bg"}},Ce={h1:(0,d.__)("Heading 1","web-stories"),h2:(0,d.__)("Heading 2","web-stories"),h3:(0,d.__)("Heading 3","web-stories"),p:(0,d.__)("Paragraph","web-stories")},Ie={FILL:"FILL",FIT:"FIT",FIXED:"FIXED"},xe={OPEN:"OPEN",OPENING:"OPENING",CLOSED:"CLOSED",CLOSING:"CLOSING"},Ae=300,ke=12,Oe=150,Pe="FRONT",Ne="BACK",Re="FORWARD",Me="BACKWARD",Le=400,De=700,Be={horizontal:8,vertical:4},Fe="dark",He="light",Ue="style",je="colors",ze=[],Ge=e=>e+"-poster."+fe,Ye=e=>{const t=V(e),n=Q(e.type);return r={type:n||"image",mimeType:"image"===n?"image/png":"video/mp4",src:"",...te({}),alt:t},J({...r,isPlaceholder:!0});var r},Ze=async e=>{const t=Q(e.type);let n=Ye(e),r=null;try{if("image"===t&&(n=await(async e=>{const t=V(e),n=e.type,r=await $(e),a=(0,q.createBlob)(new window.Blob([r.result],{type:n})),{width:o,height:i}=await X(a);return J({type:"image",mimeType:n,src:a,...te({width:o,height:i}),alt:t})})(e)),"video"===t){const t=await(async e=>{const t=V(e),n=e.type,r=await $(e),a=(0,q.createBlob)(new Blob([r.result],{type:n})),o=await re(a),i=""!==o.canPlayType(n),{length:l,lengthFormatted:s}=ie(o);await le(o);const c=se(o),d=ce(await ue(o),Ge(V(e)),he),u=(0,q.createBlob)(d),{width:p,height:m}=await X(u);return{resource:J({type:"video",mimeType:n,src:i?a:"",...te({width:p,height:m}),poster:u,isMuted:!c,length:l,lengthFormatted:s,alt:t}),posterFile:d}})(e);n=t.resource,r=t.posterFile}}catch{}return n.id=(0,pe.default)(),{resource:n,posterFile:r}};var We,Ve,$e=n(87602),qe=n(84967),Ke=n(67480),Xe=n(91778);function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qe.apply(this,arguments)}const SvgTenorLogoWhite=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Qe({viewBox:"0 0 1386 177",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,We||(We=c.createElement("defs",null,c.createElement("path",{id:"a",d:"M0 .136H92.92v175.707H0z"}),c.createElement("path",{id:"c",d:"M0 .383h82.728V137.28H0z"}))),Ve||(Ve=c.createElement("g",{fill:"none",fillRule:"evenodd"},c.createElement("path",{d:"M961.4 97.28c-.594-5.14-2.057-9.885-3.995-14.512-11.547-27.168-41.562-27.88-56.984-14.632-8.107 6.96-12.892 15.858-15.265 26.14-.237.949-.316 1.898-.514 3.005H961.4Zm-77.193 20.13c.95 7.118 3.005 13.484 6.644 19.218 8.541 13.485 20.959 19.892 36.856 19.773 13.05-.08 24.24-4.825 33.89-13.525 5.062-4.587 12.18-3.717 15.739 1.78 2.57 3.955 2.056 8.74-1.503 12.299-10.796 10.795-23.648 17.518-38.873 19.377-9.965 1.226-19.89.988-29.58-2.017-22.066-6.841-36.737-21.473-43.262-43.46-7.632-25.823-3.559-49.827 14.434-70.47 12.22-13.96 28.038-20.603 46.663-20.286 16.056.276 30.055 5.734 41.325 17.4 9.372 9.688 14.553 21.512 16.925 34.641.91 4.983 1.305 10.045 1.543 15.106.277 5.576-4.073 9.926-9.65 10.203-.79.04-1.581 0-2.372 0h-85.971c-.791-.04-1.622-.04-2.808-.04ZM1256.802 109.383c-.198-13.564-4.113-24.874-12.694-34.444-17.518-19.575-49.51-18.824-66.318 1.344-13.999 16.807-14.987 46.466 1.266 64.736 14.473 16.293 40.494 19.654 58.21 7 13.485-9.65 19.14-23.293 19.536-38.636m-113.337-1.82c.04-34.957 27.128-67.82 68.571-67.74 38.636.04 68.255 29.975 68.177 68.887-.08 38.24-30.292 68.057-69.007 68.097-37.291 0-67.82-31.161-67.741-69.244M1030.173 59.042c2.491-2.373 4.508-4.39 6.604-6.288 10.123-9.254 22.224-13.05 35.709-12.931 10.637.118 20.643 2.491 29.5 8.66 10.994 7.672 16.966 18.547 19.298 31.478a76.652 76.652 0 0 1 1.187 12.773c.119 24.202.04 48.364.04 72.566 0 4.626-2.927 9.016-7.237 10.598-4.508 1.66-8.74.988-12.22-2.492-2.451-2.412-3.52-5.457-3.52-8.937.04-22.422.12-44.805-.078-67.227-.04-4.429-.672-8.976-1.74-13.247-3.362-13.09-12.734-21.038-26.14-22.58-9.53-1.108-18.586.395-26.534 6.168-10.559 7.672-14.79 18.587-14.83 31.241-.079 22.066 0 44.172-.04 66.238 0 8.463-8.225 13.96-16.055 10.757-4.152-1.7-6.96-6.21-6.96-11.27v-113.1c0-4.469 2.057-7.87 5.853-10.084 3.915-2.294 7.988-2.175 11.824.237 3.282 2.096 5.26 5.141 5.339 9.175.04 2.61 0 5.14 0 8.265",fill:"currentColor"}),c.createElement("g",{transform:"translate(760 .259)"},c.createElement("mask",{id:"b",fill:"currentColor"},c.createElement("use",{xlinkHref:"#a"})),c.createElement("path",{d:"M49.11 42.054h31.044c4.27.199 7.75 1.583 9.965 5.419 3.678 6.445-.079 14.236-7.434 15.343-1.147.158-2.373.198-3.56.197H49.037V135.817c.075 4.745.826 9.293 4.03 13.168 2.61 3.164 6.129 4.509 9.965 5.102 5.734.91 11.428.434 17.004-1.306 5.3-1.7 10.52.673 12.299 5.616 1.819 5.022-.752 9.965-5.655 12.338-6.644 3.243-13.604 4.666-20.96 5.062-19.06.95-36.183-12.892-39.07-31.794-.395-2.452-.514-4.983-.514-7.475-.04-23.53-.04-47.058-.035-70.588v-2.728c-.874-.04-1.586-.12-2.258-.12-4.35 0-8.7.08-13.05-.039C3.674 62.856-.914 57.517.154 50.794c.751-4.745 5.062-8.304 10.48-8.462 4.27-.119 8.58-.04 12.852-.04 2.61 0 2.61 0 2.614-2.728V12.08C26.096 5.357 30.96.216 37.445.136c6.486-.078 11.587 5.102 11.626 11.905.04 9.213 0 18.467 0 27.681.04.751.04 1.542.04 2.53v-.198Z",fill:"currentColor",mask:"url(#b)"})),c.createElement("g",{transform:"translate(1302.955 39.409)"},c.createElement("mask",{id:"d",fill:"currentColor"},c.createElement("use",{xlinkHref:"#c"})),c.createElement("path",{d:"M23.095 28.135c3.4-3.875 6.405-7.711 9.886-11.112 7.948-7.75 17.28-13.169 28.275-15.344 3.321-.672 6.801-.83 10.202-.672 6.446.356 11.27 5.734 11.27 12.061 0 6.249-4.903 11.548-11.27 12.14-4.706.436-9.49.515-14.117 1.503-12.694 2.73-21.671 10.4-27.445 21.909-5.062 10.044-6.762 20.88-6.801 31.992-.08 14.829 0 29.658 0 44.488 0 6.88-5.063 12.22-11.588 12.18C4.943 137.24 0 132.139 0 125.258V11.803C0 6.663 3.638 1.996 8.542.77c5.378-1.345 10.598.87 12.93 5.813.91 1.898 1.425 4.113 1.504 6.248.237 4.39.079 8.819.079 13.248.04.672.04 1.305.04 2.056",fill:"currentColor",mask:"url(#d)"})),c.createElement("path",{d:"M35.938 68.125c6.416 0 12.166 1.417 17.25 4.25 5.083 2.833 9.062 6.792 11.937 11.875s4.313 10.958 4.313 17.625-1.438 12.562-4.313 17.688c-2.875 5.125-6.854 9.104-11.938 11.937-5.083 2.833-10.833 4.25-17.25 4.25-4.75 0-9.104-.917-13.062-2.75s-7.312-4.5-10.063-8v34.25h-12v-90.5h11.5v10.5c2.667-3.667 6.042-6.437 10.126-8.313 4.083-1.875 8.583-2.812 13.5-2.812Zm-1 57.125c4.25 0 8.062-.98 11.437-2.938 3.375-1.958 6.042-4.708 8-8.25 1.958-3.541 2.938-7.604 2.938-12.187 0-4.583-.98-8.646-2.938-12.188-1.958-3.541-4.625-6.27-8-8.187-3.375-1.917-7.187-2.875-11.438-2.875-4.166 0-7.937.98-11.312 2.938-3.375 1.958-6.042 4.687-8 8.187-1.958 3.5-2.938 7.542-2.938 12.125s.959 8.646 2.876 12.188c1.916 3.541 4.583 6.291 8 8.25 3.416 1.958 7.208 2.937 11.375 2.937Zm78.5 10.5c-6.584 0-12.5-1.458-17.75-4.375s-9.355-6.937-12.313-12.063c-2.958-5.125-4.438-10.937-4.438-17.437 0-6.5 1.48-12.312 4.438-17.438 2.958-5.125 7.062-9.124 12.313-12 5.25-2.875 11.166-4.312 17.75-4.312 6.583 0 12.479 1.437 17.687 4.313 5.208 2.875 9.292 6.874 12.25 12 2.958 5.125 4.438 10.937 4.438 17.437 0 6.5-1.48 12.312-4.438 17.438-2.958 5.125-7.042 9.145-12.25 12.062s-11.104 4.375-17.688 4.375Zm0-10.5c4.25 0 8.062-.98 11.437-2.938 3.375-1.958 6.02-4.708 7.938-8.25 1.916-3.541 2.875-7.604 2.875-12.187 0-4.583-.959-8.646-2.875-12.188-1.917-3.541-4.563-6.27-7.938-8.187-3.375-1.917-7.187-2.875-11.438-2.875-4.25 0-8.062.958-11.437 2.875s-6.042 4.646-8 8.188c-1.958 3.541-2.938 7.604-2.938 12.187 0 4.583.98 8.646 2.938 12.188 1.958 3.541 4.625 6.291 8 8.25 3.375 1.958 7.187 2.937 11.438 2.937Zm148.375-56.5L237.063 135h-11.5l-19.125-50.25L187.063 135h-11.5l-24.625-66.25h11.375l19.25 52.75 20-52.75h10.125l19.625 53 19.75-53h10.75Zm69.125 33.5c0 .917-.084 2.125-.25 3.625h-53.75c.75 5.833 3.312 10.52 7.687 14.063 4.375 3.541 9.812 5.312 16.313 5.312 7.916 0 14.291-2.667 19.125-8l6.625 7.75c-3 3.5-6.73 6.167-11.188 8-4.458 1.833-9.437 2.75-14.938 2.75-7 0-13.208-1.437-18.625-4.313-5.416-2.875-9.604-6.895-12.562-12.062s-4.438-11-4.438-17.5c0-6.417 1.438-12.208 4.313-17.375s6.833-9.187 11.875-12.063c5.042-2.875 10.73-4.312 17.063-4.312 6.333 0 11.979 1.437 16.937 4.313 4.958 2.875 8.833 6.895 11.625 12.062s4.188 11.083 4.188 17.75Zm-32.75-24c-5.75 0-10.563 1.75-14.438 5.25s-6.146 8.083-6.813 13.75h42.5c-.666-5.583-2.937-10.146-6.812-13.688-3.875-3.541-8.687-5.312-14.438-5.312Zm59.875 1.625c2.083-3.833 5.166-6.75 9.25-8.75 4.083-2 9.041-3 14.875-3V79.75c-.667-.083-1.584-.125-2.75-.125-6.5 0-11.605 1.937-15.313 5.813-3.708 3.875-5.563 9.395-5.563 16.562v33h-12V68.75h11.5v11.125Zm97.125 22.375c0 .917-.084 2.125-.25 3.625h-53.75c.75 5.833 3.312 10.52 7.687 14.063 4.375 3.541 9.812 5.312 16.313 5.312 7.916 0 14.291-2.667 19.125-8l6.625 7.75c-3 3.5-6.73 6.167-11.188 8-4.458 1.833-9.437 2.75-14.938 2.75-7 0-13.208-1.437-18.625-4.313-5.416-2.875-9.604-6.895-12.562-12.062s-4.438-11-4.438-17.5c0-6.417 1.438-12.208 4.313-17.375s6.833-9.187 11.875-12.063c5.042-2.875 10.73-4.312 17.063-4.312 6.333 0 11.979 1.437 16.937 4.313 4.958 2.875 8.833 6.895 11.625 12.062s4.188 11.083 4.188 17.75Zm-32.75-24c-5.75 0-10.563 1.75-14.438 5.25s-6.146 8.083-6.813 13.75h42.5c-.666-5.583-2.937-10.146-6.812-13.688-3.875-3.541-8.687-5.312-14.438-5.312Zm110.875-36V135h-11.5v-10.5c-2.667 3.667-6.042 6.458-10.125 8.375-4.084 1.917-8.584 2.875-13.5 2.875-6.417 0-12.167-1.417-17.25-4.25-5.084-2.833-9.063-6.812-11.938-11.938-2.875-5.125-4.313-11.02-4.313-17.687 0-6.667 1.438-12.542 4.313-17.625s6.854-9.042 11.938-11.875c5.083-2.833 10.833-4.25 17.25-4.25 4.75 0 9.124.896 13.125 2.688 4 1.791 7.333 4.437 10 7.937v-36.5h12Zm-34.125 83c4.166 0 7.958-.98 11.375-2.938 3.416-1.958 6.083-4.708 8-8.25 1.916-3.541 2.875-7.604 2.875-12.187 0-4.583-.959-8.646-2.875-12.188-1.917-3.541-4.584-6.27-8-8.187-3.417-1.917-7.209-2.875-11.375-2.875-4.25 0-8.063.958-11.438 2.875s-6.042 4.646-8 8.188c-1.958 3.541-2.938 7.604-2.938 12.187 0 4.583.98 8.646 2.938 12.188 1.958 3.541 4.625 6.291 8 8.25 3.375 1.958 7.187 2.937 11.438 2.937Zm123.625-57.125c6.416 0 12.166 1.417 17.25 4.25 5.083 2.833 9.062 6.792 11.937 11.875s4.313 10.958 4.313 17.625-1.438 12.562-4.313 17.688c-2.875 5.125-6.854 9.104-11.938 11.937-5.083 2.833-10.833 4.25-17.25 4.25-4.916 0-9.416-.958-13.5-2.875-4.083-1.917-7.458-4.708-10.125-8.375V135h-11.5V42.25h12v36.5c2.667-3.5 6-6.146 10-7.938 4-1.791 8.375-2.687 13.125-2.687Zm-1 57.125c4.25 0 8.062-.98 11.437-2.938 3.375-1.958 6.042-4.708 8-8.25 1.958-3.541 2.938-7.604 2.938-12.187 0-4.583-.98-8.646-2.938-12.188-1.958-3.541-4.625-6.27-8-8.187-3.375-1.917-7.187-2.875-11.438-2.875-4.166 0-7.958.958-11.375 2.875-3.416 1.917-6.083 4.646-8 8.188-1.916 3.541-2.875 7.604-2.875 12.187 0 4.583.959 8.646 2.875 12.188 1.917 3.541 4.584 6.291 8 8.25 3.417 1.958 7.209 2.937 11.375 2.937Zm106.875-56.5-32.125 72.875c-2.834 6.75-6.146 11.5-9.938 14.25-3.792 2.75-8.354 4.125-13.688 4.125-3.25 0-6.395-.52-9.437-1.563-3.042-1.041-5.563-2.562-7.563-4.562l5.125-9c3.417 3.25 7.375 4.875 11.875 4.875 2.917 0 5.355-.77 7.313-2.313 1.958-1.541 3.73-4.187 5.313-7.937l2.125-4.625-29.25-66.125h12.5l23.125 53 22.875-53h11.75Z",fill:"currentColor",fillRule:"nonzero"}))))},Je=(0,c.memo)(SvgTenorLogoWhite);var et;function tt(){return tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tt.apply(this,arguments)}const SvgUnsplashLogoFull=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",tt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 457.19 104.19","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,et||(et=c.createElement("path",{d:"M59.88 38.66h27.53v48.75H0V38.66h27.53v24.37h32.35zm93 25c0 8.25-5.45 13.13-12.9 13.13-7.28 0-12.81-4.88-12.81-13.13V24.41h-12.22v39.13c0 15.45 11 25.21 25.06 25.21s25.15-9.76 25.15-25.21V24.41h-12.25zm43.7-21.13c-4.7 0-9.94 2-12.6 6.57v-5.41h-11.45v43.64h11.81v-25.1c0-5 3-9 8.16-9 5.68 0 8.08 3.82 8.08 8.7v25.4h11.8V59.82c.03-9.59-4.94-17.31-15.77-17.31zm43.31 18.37-6.48-1.33c-2.47-.5-4-1.77-4-3.9 0-2.49 2.23-4.35 5.33-4.35 4.36 0 6.09 2.25 6.51 4.88h10.18c-.08-6-4.83-13.84-16.51-13.84-9.41 0-16.33 6.47-16.33 14.28 0 6.13 3.81 11.19 12.24 13l6.05 1.33c3.37.71 4.7 2.31 4.7 4.26 0 2.31-2.14 4.35-6 4.35-4.71 0-7.27-2.68-7.87-5.79h-10.5c.59 6.53 5.32 14.84 18.46 14.84 11.45 0 17.22-7.28 17.22-14.38-.01-6.36-4.36-11.59-12.97-13.37zm63.19 4.53c0 13.22-8.26 23-20.59 23-6 0-10.48-2.4-12.61-5.33v21.13h-11.8V43.67h11.45v5.41c2-3.37 6.83-6.39 13.4-6.39 12.81 0 20.18 9.76 20.18 22.72zm-11.63.09c0-7.72-4.79-12.25-10.83-12.25s-10.91 4.53-10.91 12.25 4.88 12.33 10.91 12.33 10.91-4.54 10.91-12.35zm68-21.83h11.45v43.64h-11.8v-5.31c-2 3.5-6.57 6.38-12.61 6.38-12.33 0-20.59-9.77-20.59-23 0-13 7.37-22.72 20.15-22.72 6.57 0 11.32 3.05 13.4 6.39zm-.18 21.83c0-7.72-4.88-12.25-10.91-12.25s-10.83 4.51-10.83 12.23 4.79 12.33 10.83 12.33 10.92-4.6 10.92-12.33zm-50.66 21.81h11.8V24.41h-11.8zm132.35-44.81c-4.17 0-9 1.41-11.81 4.78V24.41h-11.8v62.91h11.8V61.68c.27-4.8 3.2-8.52 8.17-8.52 5.68 0 8.08 3.83 8.07 8.71v25.47h11.81V59.82c-.01-9.59-5.15-17.3-16.24-17.3zm-42 18.36-6.43-1.33c-2.47-.5-4-1.77-4-3.9 0-2.49 2.22-4.35 5.33-4.35 4.35 0 6.08 2.25 6.5 4.88h10.17c-.08-6-4.83-13.84-16.51-13.84-9.41 0-16.33 6.47-16.33 14.28 0 6.13 3.82 11.19 12.25 13l6 1.33c3.37.71 4.7 2.31 4.7 4.26 0 2.31-2.14 4.35-6 4.35-4.71 0-7.27-2.68-7.87-5.79h-10.49c.58 6.53 5.31 14.84 18.45 14.84 11.45 0 17.22-7.28 17.22-14.38 0-6.34-4.35-11.57-12.95-13.35zM59.88 0H27.53v24.37h32.35z"})))},nt=(0,c.memo)(SvgUnsplashLogoFull);var rt,at;function ot(){return ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ot.apply(this,arguments)}const SvgCoverrLogo=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ot({viewBox:"0 0 742 132",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,rt||(rt=c.createElement("g",{clipPath:"url(#a)"},c.createElement("path",{d:"M17.875 112.892C5.958 100.096 0 84.494 0 65.912c0-18.757 5.958-34.358 17.875-46.804C29.967 6.31 45.04 0 62.914 0h19.453S72.202 26.645 62.563 26.645c-10.514 0-19.277 3.682-26.462 11.22-6.835 7.537-10.515 16.828-10.515 28.047 0 11.22 3.505 20.51 10.515 28.048 7.185 7.538 15.948 11.219 26.462 11.219 8.763 0 14.02 26.646 14.02 26.646H62.74c-17.7.175-32.772-6.136-44.864-18.933Z",fill:"#0072BB"}),c.createElement("path",{d:"M34.699 112.892c-11.917-12.796-17.875-28.398-17.875-46.98 0-18.757 5.958-34.358 17.875-46.804C46.791 6.31 61.862 0 79.738 0H99.19S89.026 26.645 79.387 26.645c-10.515 0-19.277 3.682-26.462 11.22C46.09 45.401 42.41 54.692 42.41 65.912c0 11.22 3.505 20.51 10.515 28.048 7.185 7.538 15.947 11.219 26.462 11.219 8.763 0 14.02 26.646 14.02 26.646H79.563c-17.7.175-32.772-6.136-44.864-18.933Z",fill:"#7DC24B"}),c.createElement("path",{d:"M51.523 112.892c-11.917-12.796-17.875-28.398-17.875-46.98 0-18.757 5.958-34.358 17.875-46.98C63.79 6.311 78.686 0 96.562 0h19.452s-9.989 26.645-19.627 26.645c-10.515 0-19.278 3.682-26.463 11.22-6.835 7.537-10.515 16.828-10.515 28.047 0 11.22 3.505 20.51 10.515 28.048 7.185 7.713 15.948 11.395 26.462 11.395 8.763 0 14.02 26.645 14.02 26.645H96.562c-17.876 0-32.772-6.311-45.039-19.108Z",fill:"#FED035"}),c.createElement("path",{d:"M68.347 112.892C56.43 100.096 50.47 84.494 50.47 65.912c0-18.757 5.959-34.358 17.876-46.98C80.614 6.311 95.51 0 113.385 0h19.453s-10.164 26.645-19.803 26.645c-10.515 0-19.277 3.682-26.462 11.22-6.835 7.537-10.515 16.828-10.515 28.047 0 11.22 3.505 20.51 10.514 28.048 7.186 7.538 15.948 11.219 26.463 11.219 8.762 0 14.02 26.646 14.02 26.646H113.21c-17.7.175-32.596-6.136-44.863-18.933Z",fill:"#FF4C3D"}),c.createElement("path",{d:"M86.047 112.892C74.13 100.096 68.17 84.494 68.17 65.912c0-18.757 5.959-34.358 17.876-46.98C98.139 6.311 113.21 0 131.085 0c23.133 0 43.637 12.621 53.101 32.43l-22.082 13.498c-5.432-12.095-16.999-19.283-31.194-19.283-10.515 0-19.277 3.682-26.462 11.22-6.835 7.537-10.515 16.828-10.515 28.047 0 11.22 3.505 20.51 10.515 28.048 7.185 7.538 15.947 11.219 26.462 11.219 14.02 0 25.937-7.538 31.72-19.283l22.081 13.323C174.547 119.378 154.218 132 131.085 132c-17.875 0-32.946-6.311-45.038-19.108ZM213.102 112.892c-12.092-12.796-18.401-28.398-18.401-46.98 0-18.581 6.134-34.183 18.401-46.98C225.194 6.311 240.265 0 257.615 0c17.7 0 32.421 6.31 44.513 19.108 12.092 12.796 18.401 28.398 18.401 46.98 0 18.581-6.134 34.183-18.401 46.98-12.092 12.797-26.988 19.107-44.513 19.107-17.35-.175-32.421-6.486-44.513-19.283Zm44.513-7.187c10.515 0 19.277-3.681 26.462-11.219 7.186-7.538 10.691-17.004 10.691-28.398 0-11.22-3.505-20.86-10.691-28.399-7.185-7.538-15.947-11.394-26.462-11.394s-19.277 3.681-26.462 11.219c-7.186 7.538-10.691 17.004-10.691 28.398 0 11.22 3.505 20.86 10.691 28.399 7.185 7.538 15.947 11.394 26.462 11.394ZM419.895 3.33h28.039l-46.44 125.514h-29.793L325.261 3.331H353.3l33.298 95.362 33.297-95.362ZM479.654 77.482c3.855 19.108 18.401 29.626 38.204 29.626 13.669 0 23.833-5.259 30.668-15.602l21.205 12.972c-11.742 18.231-29.091 27.347-52.224 27.347-19.277 0-35.05-6.311-46.966-18.582-11.917-12.621-17.876-28.398-17.876-47.506 0-18.757 5.959-34.358 17.7-46.98C482.107 6.311 497.354 0 515.755 0c17.349 0 31.72 6.486 42.935 19.283 11.216 12.797 16.999 28.574 16.999 46.98 0 2.805-.175 6.486-.876 11.22h-95.159Zm69.924-22.088c-3.505-20.334-17.175-30.852-33.999-30.852-19.102 0-32.421 11.745-35.925 30.852h69.924ZM623.883 24.366c6.484-15.602 18.751-23.315 36.627-23.315v29.275c-9.814-.701-18.401 1.753-25.762 7.538-7.36 5.434-11.041 14.725-11.041 27.522v63.283h-25.761V3.33h25.937v21.036ZM705.374 24.366C711.858 8.764 724.125 1.051 742 1.051v29.275c-9.813-.701-18.401 1.753-25.761 7.538-7.36 5.434-11.041 14.725-11.041 27.522v63.283h-25.761V3.33h25.761v21.036h.176Z",fill:"#fff"}))),at||(at=c.createElement("defs",null,c.createElement("clipPath",{id:"a"},c.createElement("path",{fill:"#fff",d:"M0 0h742v132H0z"})))))},it=(0,c.memo)(SvgCoverrLogo),lt=p.default.div.withConfig({displayName:"attribution__AttributionPill",componentId:"sc-1j8k1n4-0"})(["position:absolute;left:24px;bottom:10px;border-radius:100px;padding:2px 8px;height:24px;display:flex;flex-wrap:nowrap;background-color:",";cursor:pointer;align-items:center;z-index:9999;"],(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.standard.black,.7)})),st=(0,p.default)(Ke.Text).withConfig({displayName:"attribution__Text",componentId:"sc-1j8k1n4-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),ct=(0,p.css)(["color:",";fill:",";margin-left:6px;line-height:14px;"],(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.colors.standard.white})),dt=(0,p.default)(nt).withConfig({displayName:"attribution__UnsplashLogo",componentId:"sc-1j8k1n4-2"})(["height:14px;",""],ct),ut=(0,p.default)(it).withConfig({displayName:"attribution__CoverrLogo",componentId:"sc-1j8k1n4-3"})([""," height:12px;margin-top:2px;"],ct),pt=(0,p.default)(Je).withConfig({displayName:"attribution__TenorLogo",componentId:"sc-1j8k1n4-4"})(["height:14px;"," margin:0 2px 2px 6px;"],ct),mt="Coverr",gt="Tenor",ft="Unsplash",ht=e=>(0,$e.default)(
/* translators: %s: media provider name. */
(0,d.__)("Powered by %s","web-stories"),e);function TenorAttribution(){return c.createElement("a",{href:"https://tenor.com?utm_source=web_stories_wordpress&utm_medium=referral",target:"_blank",rel:"noreferrer","aria-label":ht(gt)},c.createElement(lt,{"aria-hidden":!0},c.createElement(pt,null)))}const bt={IMAGE:"image",VIDEO:"video",GIF:"gif",STICKER:"sticker"},Et="unsplash",yt="coverr",_t="tenor",vt="tenor_stickers",wt={[Et]:{provider:Et,displayName:(0,d.__)("Images","web-stories"),supportsCategories:!0,requiresAuthorAttribution:!0,attributionComponent:function UnsplashAttribution(){return c.createElement("a",{href:"https://unsplash.com?utm_source=web_stories_wordpress&utm_medium=referral",target:"_blank",rel:"noreferrer","aria-label":ht(ft)},c.createElement(lt,{"aria-hidden":!0},c.createElement(st,{forwardedAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Powered by","web-stories")),c.createElement(dt,null)))},fetchMediaErrorMessage:(0,$e.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading media from %s","web-stories"),"Unsplash"),fetchCategoriesErrorMessage:(0,$e.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading categories from %s","web-stories"),"Unsplash")},[yt]:{provider:yt,displayName:(0,d.__)("Video","web-stories"),supportsCategories:!0,requiresAuthorAttribution:!1,attributionComponent:function CoverrAttribution(){return c.createElement("a",{href:"https://coverr.co?utm_source=web_stories_wordpress&utm_medium=referral&utm_campaign=api_powered_by",target:"_blank",rel:"noreferrer","aria-label":ht(mt)},c.createElement(lt,{"aria-hidden":!0},c.createElement(st,{forwardedAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Powered by","web-stories")),c.createElement(ut,null)))},fetchMediaErrorMessage:(0,$e.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading media from %s","web-stories"),"Coverr"),defaultPreviewWidth:640},[_t]:{provider:_t,displayName:(0,d.__)("GIFs","web-stories"),contentTypeFilter:bt.GIF,supportsCategories:!0,requiresAuthorAttribution:!1,attributionComponent:TenorAttribution,fetchMediaErrorMessage:(0,$e.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading media from %s","web-stories"),"Tenor")},[vt]:{provider:_t,displayName:(0,d.__)("Stickers","web-stories"),contentTypeFilter:bt.STICKER,supportsCategories:!0,requiresAuthorAttribution:!1,attributionComponent:TenorAttribution,fetchMediaErrorMessage:(0,$e.default)(
/* translators: %s: media provider name. */
(0,d.__)("Error loading media from %s","web-stories"),"Tenor"),featureName:"tenorStickers"}};function Tt(e){if(e.imageUrls?.length<3)throw new Error("Invalid number of urls for asset. Need at least 3: "+e);const t=St(e,e.imageUrls),n=[["full",t[0]],["large",t[1]],...t.slice(2,t.length-1).map((e=>[e.width+"_"+e.height,e])),["web_stories_thumbnail",t[t.length-1]]];return Object.fromEntries(new Map(n))}function St(e,t){if(t.length<1)return[];const n=t.sort(((e,t)=>(t.width??0)-(e.width??0))),r=function(e){return{originalWidth:e[0].width,originalHeight:e[0].height}}(n);return n.map((t=>function(e,t,n){const{originalWidth:r,originalHeight:a}=n;if(!r||!a)throw new Error("No original size present.");const o=wt[e.provider.toLowerCase()];if(!(t.width&&t.height||o.defaultPreviewWidth))throw new Error("Missing width and height for: "+e);return{file:e.name,sourceUrl:t.url,mimeType:t.mimeType,width:t.width??o.defaultPreviewWidth,height:t.height??o.defaultPreviewWidth*a/r}}(e,t,r)))}function Ct(e){return(e.author||e.registerUsageUrl)&&{author:e.author&&{displayName:e.author.displayName,url:e.author.url},registerUsageUrl:e.registerUsageUrl}}function It(e){const t=function(e){if(e.videoUrls?.length<2)throw new Error("Invalid number of urls for asset. Need at least 2: "+e);const t=St(e,e.videoUrls);return{full:t[0],preview:t[t.length-1]}}(e),n=parseInt(e.videoMetadata.duration.trimEnd("s"));return J({id:e.name,baseColor:e.color,posterId:e.name,type:e.type.toLowerCase(),mimeType:t.full.mimeType,creationDate:e.createTime,src:t.full.sourceUrl,width:t.full.width,height:t.full.height,poster:e.imageUrls[0].url,length:n,lengthFormatted:oe(n),alt:e.description||e.title||e.name,isExternal:!0,isPlaceholder:!1,isOptimized:!0,isMuted:!0,sizes:t,attribution:Ct(e)})}function xt(e){const{imageUrls:t,videoUrls:n,previewUrl:r}=function(e){if(e.imageUrls?.length<3)throw new Error("Invalid number of urls for asset. Need at least 3: "+e);const t=e.imageUrls.filter((e=>{let{imageName:t}=e;return t.endsWith("preview")})).map((e=>{let{url:t}=e;return t})).shift(),n=e.imageUrls.filter((e=>{let{url:n}=e;return n!==t})),r=St(e,n),a=St(e,e.videoUrls.filter((e=>{let{mimeType:t}=e;return"image/webm"===t}))),o=St(e,e.videoUrls.filter((e=>{let{mimeType:t}=e;return"video/mp4"===t}))),i=[["full",r[0]],["large",r[1]],...r.slice(2,r.length-1).map((e=>[e.width+"_"+e.height,e])),["web_stories_thumbnail",r[r.length-1]]];return{imageUrls:Object.fromEntries(new Map(i)),videoUrls:{webm:{full:a[0],preview:a[a.length-1]},mp4:{full:o[0],preview:o[a.length-1]}},previewUrl:t}}(e);return J({id:e.name,baseColor:e.color,posterId:e.name,type:e.type.toLowerCase(),mimeType:t.full.mimeType,creationDate:e.createTime,src:t.full.sourceUrl,width:t.full.width,height:t.full.height,poster:r,alt:e.description||e.title||e.name,isPlaceholder:!1,isOptimized:!0,isExternal:!0,sizes:t,output:{mimeType:n.mp4.full.mimeType,src:n.mp4.full.sourceUrl},attribution:Ct(e)})}function At(e){switch(e.type.toLowerCase()){case"image":return function(e){const t=Tt(e);return J({id:e.name,baseColor:e.color,blurHash:e.blurHash,type:e.type.toLowerCase(),mimeType:t.full.mimeType,creationDate:e.createTime,src:t.full.sourceUrl,width:t.full.width,height:t.full.height,alt:e.description||e.title||e.name,isExternal:!0,isPlaceholder:!1,sizes:t,attribution:Ct(e)})}(e);case"video":return It(e);case"gif":return xt(e);case"sticker":return function(e){const t=Tt({...e,imageUrls:e.imageUrls.filter((e=>"image/gif"===e.mimeType))});return J({id:e.name,baseColor:e.color,blurHash:e.blurHash,type:"image",mimeType:t.full.mimeType,creationDate:e.createTime,src:t.full.sourceUrl,width:t.full.width,height:t.full.height,alt:e.description||e.title||e.name,isExternal:!0,isPlaceholder:!1,sizes:t,attribution:Ct(e)})}(e);default:throw new Error("Invalid media type.")}}var kt=n(71469),Ot=n(22133),Pt=n.n(Ot);function Nt(e){return Pt().getExtension(e)}function Rt(e){switch(e){case"audio/mpeg":return["mp3","m3a"];case"audio/aac":return["aac"];case"audio/ogg":return["oga","ogg"];case"image/jpeg":return["jpg","jpeg"];default:return[Nt(e)].filter(Boolean)}}const Mt=function(e,t,n){const r=new Error;return r.name=e,r.file=t,r.isUserError=!0,r.message=n,r},Lt=e=>Math.round(e/Math.pow(1024,2));const Dt=function(){const{actions:{uploadMedia:e}}=W(),{storyId:t,maxUpload:n,allowedMimeTypes:{image:r,vector:a,video:o},capabilities:{hasUploadMediaAction:i}}=U(),l=(0,u.useMemo)((()=>[...r,...a,...o]),[r,a,o]),s=(0,u.useCallback)((e=>{let{size:t}=e;return t<=n}),[n]),c=(0,u.useCallback)((e=>{let{file:t,canTranscodeFile:r,isFileTooLarge:a,overrideAllowedMimeTypes:o=l}=e;if(!i){const e=(0,d.__)("Sorry, you are not allowed to upload files.","web-stories");throw Mt("PermissionError",t.name,e)}if(r){if(a){const e=(0,$e.default)(
/* translators: 1: File size in MB. 2: Maximum allowed file size in MB. */
(0,d.__)("Your file is too large (%1$s MB) and cannot be processed. Please try again with a file that is smaller than %2$s MB.","web-stories"),Lt(t.size),Lt(ge));throw Mt("SizeError",t.name,e)}}else{if(!s(t)){const e=(0,$e.default)(
/* translators: first %s is the file size in MB and second %s is the upload file limit in MB */
(0,d.__)("Your file is %1$sMB and the upload limit is %2$sMB. Please resize and try again!","web-stories"),Lt(t.size),Lt(n));throw Mt("SizeError",t.name,e)}if(!(e=>{let{type:t}=e;return o.includes(t)})(t)){let e=(0,d.__)("No file types are currently supported.","web-stories");const n=o.map((e=>Rt(e))).flat();throw n.length&&(
/* translators: %s is a list of allowed file extensions. */
e=(0,$e.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s to upload.","web-stories"),(0,kt.default)(n))),Mt("ValidError",t.name,e)}}}),[l,i,s,n]),p=(0,u.useCallback)((function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;c({file:n,overrideAllowedMimeTypes:a});const o={storyId:t,altText:V(n),mediaSource:"editor",...r};return e(n,o)}),[l,c,t,e]);return(0,u.useMemo)((()=>({actions:{uploadFile:p,validateFileForUpload:c}})),[c,p])};function Bt(){}n(52262),n(24506);const Ft=function(e){return e.split("/").at(-1).split(/[#?]/).at(0)};const Ht=async function(e){const t=await re(e);return await le(t),ue(t)};var Ut=n(12902);const jt="ADD_PAGE",zt="UPDATE_PAGE",Gt="DELETE_PAGE",Yt="ARRANGE_PAGE",Zt="DELETE_ELEMENTS",Wt="ADD_ELEMENTS",Vt="UPDATE_ELEMENTS",$t="UPDATE_ELEMENTS_BY_RESOURCE_ID",qt="DELETE_ELEMENTS_BY_RESOURCE_ID",Kt="SET_BACKGROUND_ELEMENT",Xt="ARRANGE_ELEMENT",Qt="ARRANGE_GROUP",Jt="COMBINE_ELEMENTS",en="DUPLICATE_ELEMENTS_BY_ID",tn="COPY_SELECTED_ELEMENT",nn="UPDATE_ELEMENTS_BY_FONT_FAMILY",rn="SET_CURRENT_PAGE",an="SET_SELECTED_ELEMENTS",on="SELECT_ELEMENT",ln="UNSELECT_ELEMENT",sn="TOGGLE_ELEMENT_IN_SELECTION",cn="TOGGLE_LAYER",dn="UPDATE_STORY",un="UPDATE_ANIMATION_STATE",pn="ADD_ANIMATIONS",mn="RESTORE",gn=["id","elements","groups"],fn=["id","isBackground","isDefaultBackground"],hn="ADD_GROUP",bn="UPDATE_GROUP",En="DELETE_GROUP",yn="DUPLICATE_GROUP",_n="REMOVE_ELEMENT_FROM_GROUP";function vn(e,t){return Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,n)=>({...t,[n]:e[n]})),{})}function wn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e&&n?.length?n.reduce(((e,t)=>e.filter((e=>t.includes(e)))),e):e}function Tn(e,t,n){return e>=t&&e<=n}function Sn(e,t,n){const r=e[t],a=[...e.slice(0,t),...e.slice(t+1)];return[...a.slice(0,n),r,...a.slice(n)]}function Cn(e){let{currentPosition:t,minPosition:n,maxPosition:r,desiredPosition:a}=e;if("number"==typeof a)return Math.min(r,Math.max(n,a));if("string"!=typeof a)return t;switch(a){case Pe:return r;case Ne:return n;case Re:return Math.min(r,t+1);case Me:return Math.max(n,t-1);default:return t}}function In(e,t){const n=vn("function"==typeof t?t(e):t,fn);return 0===Object.keys(n).length?null:n.animation?n.animation:(Object.assign(e,n),null)}function xn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce(((e,n)=>t.some((e=>n.targets?.includes(e)))?e:[...e,n]),[])}function An(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object.values(Object.fromEntries(e.map((e=>[e.id,e]))))}function kn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=An(t),r=e.map((e=>{let{id:t}=e;return t}));return n.filter((e=>{let{id:t}=e;return!r.includes(t)}))}const On=(0,Ut.produce)(((e,t)=>{let{page:n,position:r}=t;if(!n.elements?.length)return;const a=null!==r&&Tn(r,0,e.pages.length-1),o=e.pages.findIndex((t=>{let{id:n}=t;return n===e.current})),i=a?r:o+1;e.pages.splice(i,0,n),e.current=n.id,e.selection=[n.elements[0].id]})),Pn=(0,Ut.produce)(((e,t)=>{let{pageId:n}=t;if(e.pages.length<=1)return;const r=null===n?e.current:n,a=e.pages.findIndex((e=>{let{id:t}=e;return t===r}));if(-1!==a){if(e.pages.splice(a,1),r===e.current){const t=Math.min(e.pages.length-1,a);e.current=e.pages[t].id}e.selection=[]}})),Nn=(0,Ut.produce)(((e,t)=>{let{pageId:n,properties:r}=t;const a=null===n?e.current:n,o=e.pages.find((e=>{let{id:t}=e;return t===a}));if(!o)return;const i=vn(r,gn);Object.assign(o,i)})),Rn=(0,Ut.produce)(((e,t)=>{let{pageId:n,position:r}=t;if(e.pages.length<2)return;const a=e.pages.findIndex((e=>{let{id:t}=e;return t===n})),o=Tn(r,0,e.pages.length-1);-1!==a&&o&&!(a===r)&&(e.pages=Sn(e.pages,a,r))}));var Mn=n(88914);const Ln=e=>{let{type:t}=e;return t===Mn.ELEMENT_TYPES.PRODUCT},Dn=e=>{let{type:t}=e;return t!==Mn.ELEMENT_TYPES.PRODUCT},Bn=(0,Ut.produce)(((e,t)=>{let{elements:n}=t;if(!Array.isArray(n))return;const r=e.pages.find((t=>{let{id:n}=t;return n===e.current})),a=kn(r.elements,n);if(0===a.length)return;const o=[],i=a.filter(Dn);i.length&&(r.elements=r.elements.concat(i),o.push(...i.map((e=>{let{id:t}=e;return t}))));const l=a.filter(Ln);if(l.length){const e=r.elements.filter(Ln).map((e=>{let{product:t}=e;return t?.productId})),t=l.filter((t=>{let{product:n}=t;return!e.includes(n?.productId)}));e.length+t.length<=6&&(r.elements=r.elements.concat(t),o.push(...t.map((e=>{let{id:t}=e;return t}))))}o.length>0&&(e.selection=o)})),Fn=(e,t)=>{let{elementIds:n}=t;const r=null===n?e.selection:n;if(0===r.length)return;const a=e.pages.find((t=>{let{id:n}=t;return n===e.current})),o=a.elements.map((e=>{let{id:t}=e;return t})),i=a.elements[0],l=r.some((e=>e===i.id)),s=i.isDefaultBackground,c=l&&s?r.filter((e=>e!==i.id)):r;wn(o,c).length>0&&(a.elements=a.elements.filter((e=>!c.includes(e.id))),l&&!s&&a.elements.unshift(a.defaultBackgroundElement),a.animations&&(a.animations=a.animations.filter((e=>e.targets.some((e=>!c.includes(e)))))),e.selection=e.selection.filter((e=>!c.includes(e))))},Hn=(0,Ut.produce)(Fn);var Un=n(22188);const jn=(0,Ut.produce)(((e,t)=>{let{elementIds:n,properties:r}=t;if([Un.STORY_ANIMATION_STATE.PLAYING,Un.STORY_ANIMATION_STATE.PLAYING_SELECTED,Un.STORY_ANIMATION_STATE.SCRUBBING].includes(e.animationState))return;const a=null===n?e.selection:n,o=e.pages.find((t=>{let{id:n}=t;return n===e.current})),i={};o.elements.filter((e=>{let{id:t}=e;return a.includes(t)})).forEach((e=>{const t=In(e,r);t&&(i[t.id]={...t,targets:[e.id]})}));Object.keys(i).length>0&&(o.animations=function(e,t){const n=e.reduce(((e,n)=>{const r=t[n.id];return delete t[n.id],r?.delete?e:r?[...e,r]:[...e,n]}),[]);return Object.values(t).forEach((e=>n.push(e))),n}(o.animations||[],i))})),zn=(0,Ut.produce)(((e,t)=>{let{id:n,properties:r}=t;n&&e.pages.forEach((e=>{e.elements.filter((e=>{let{resource:t}=e;return t?.id===n})).forEach((e=>In(e,r)))}))})),Gn=(0,Ut.produce)(((e,t)=>{let{id:n}=t;if(null===n)return;if(!e.pages.some((e=>e.elements.some((e=>e.resource?.id===n)))))return;const r=[];e.pages.forEach((e=>{const{elements:t,animations:a}=e,o=t[0].resource?.id===n;e.elements=t.filter((e=>{const{id:t,resource:a}=e;return a?.id!==n||(r.push(t),!1)})),o&&e.elements.unshift(e.defaultBackgroundElement),a&&(e.animations=a.filter((e=>e.targets.some((e=>!r.includes(e))))))})),e.selection=e.selection.filter((e=>!r.includes(e)))})),Yn=(0,Ut.produce)(((e,t)=>{let{elementId:n}=t;const r=e.pages.find((t=>{let{id:n}=t;return n===e.current})),a=r.elements[0];if(null===n){if(a.isDefaultBackground)return;r.elements.forEach((e=>{delete e.isBackground})),r.elements.unshift(r.defaultBackgroundElement),e.selection=[r.defaultBackgroundElement.id]}else{const t=r.elements.findIndex((e=>{let{id:t}=e;return t===n})),o=0===t;if(!(-1!==t)||o)return;a.isDefaultBackground&&(r.defaultBackgroundElement=a),r.elements.splice(0,1);const i=t-1;e.selection.includes(a.id)&&(e.selection=e.selection.filter((e=>e!==a.id))),r.elements=Sn(r.elements,i,0),r.elements.forEach((e=>{e.id===n&&(e.isBackground=!0,Object.prototype.hasOwnProperty.call(e,"opacity")&&(e.opacity=100))})),e.selection.includes(n)&&e.selection.length>1&&(e.selection=e.selection.filter((e=>e!==n)))}const o=r.elements.find((e=>e.isBackground));r.animations=xn(r.animations,[n,o.id])})),Zn=(e,t)=>{let{elementId:n,position:r,groupId:a=!1}=t;if(null===n&&1!==e.selection.length)return;const o=null!==n?n:e.selection[0],i=e.pages.find((t=>{let{id:n}=t;return n===e.current}));if(i.elements.length<3)return;const l=i.elements.findIndex((e=>{let{id:t}=e;return t===o}));if(-1===l||i.elements[0].id===o)return;const s=Cn({currentPosition:l,minPosition:1,maxPosition:i.elements.length-1,desiredPosition:r}),c=i.elements[l].groupId;if(l!==s||c!==a){if(a){if(!i.groups[a])return;i.elements[l].groupId=a}else null==a&&delete i.elements[l].groupId;if(c){i.elements.some((e=>e.groupId===c))||delete i.groups[c]}i.elements=Sn(i.elements,l,s)}},Wn=(0,Ut.produce)(Zn);n(77461);const Vn=(0,Ut.produce)(((e,t)=>{let{groupId:n,position:r}=t;if(!n)return;const{elements:a,groups:o}=e.pages.find((t=>{let{id:n}=t;return n===e.current})),i=e=>e.groupId===n;if(!o?.[n]||!a.some(i))return;const l=a.findIndex(i),s=a.findLastIndex(i)-l+1,c=a.splice(l,s,"dummy"),d=Cn({currentPosition:l,minPosition:1,maxPosition:a.length-1,desiredPosition:r});a.splice(a.indexOf("dummy"),1),a.splice(d,0,...c)}));var $n=n(25784),qn=n(88766),Kn=(n(27342),n(40630)),Xn=n(95740),Qn=n(98465),Jn=(n(72858),n(28352));function er(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e&&"object"==typeof e?Object.assign({},...t.map((t=>e&&t in e?{[t]:e&&e[t]}:{}))):{}}const tr=(0,Ut.produce)(((e,t)=>{let{firstElement:n,secondId:r,shouldRetainAnimations:a=!0}=t;if(!n||!r)return;const o=n.id,i=n,l=e.pages.find((t=>{let{id:n}=t;return n===e.current})),s=l.elements.findIndex((e=>{let{id:t}=e;return t===r})),c=l.elements[s];if(!i||!i.resource||!c)return;c.isDefaultBackground&&(l.defaultBackgroundElement={...c,id:(0,pe.default)()});const d=["alt","type","resource","scale","focalX","focalY","tracks","poster"];c.isBackground?d.push("flip","overlay","width","height","x","y"):(d.push("link"),d.push("border"),(0,$n.canSupportMultiBorder)(c)&&d.push("borderRadius"));const u={...vn(c,["isDefaultBackground"]),...Qn.DEFAULT_ATTRIBUTES_FOR_MEDIA,...er(i,d)};l.elements=l.elements.filter((e=>{let{id:t}=e;return t!==o})).map((e=>e.id===r?u:e)),l.animations=xn(l.animations,a?[o]:[o,r]),e.selection=[r]})),nr=(0,Ut.produce)(((e,t)=>{let{elementIds:n}=t;if(!Array.isArray(n))return;const r=e.pages.find((t=>{let{id:n}=t;return n===e.current}));let a=!1;n.forEach((t=>{const n=r.elements.findIndex((e=>{let{id:n}=e;return n===t}));if(n<0)return;const o=r.elements[n];if(o.isBackground)return;if(o.type===Mn.ELEMENT_TYPES.PRODUCT)return;const{element:i,elementAnimations:l}=(0,Mn.duplicateElement)({element:o,animations:r.animations,existingElements:r.elements});a||(a=!0,e.selection=[]),e.selection.push(i.id),r.animations&&(r.animations=r.animations.concat(l)),r.elements.splice(n+1,0,i)}))})),rr=["background","backgroundColor","backgroundTextMode","border","borderRadius","content","flip","font","fontSize","lineHeight","lockAspectRatio","opacity","overlay","padding","rotationAngle","textAlign"],ar=(0,Ut.produce)((e=>{if(1!==e.selection?.length||!e.selection[0])return;const t=e.pages.find((t=>{let{id:n}=t;return n===e.current})),n=t.elements.find((t=>{let{id:n}=t;return n===e.selection[0]})),r=(t.animations||[]).filter((e=>{let{targets:t}=e;return t.includes(n.id)})),a=er(n,rr);e.copiedElementState={animations:r,styles:a,type:n.type}})),or=(0,Ut.produce)(((e,t)=>{let{family:n,properties:r}=t;n&&e.pages.forEach((e=>{e.elements.filter((e=>{let{font:t}=e;return t?.family===n})).forEach((e=>In(e,r)))}))})),ir=(0,Ut.produce)(((e,t)=>{let{pageId:n}=t;const r=e.pages.some((e=>{let{id:t}=e;return t===n})),a=e.current===n;r&&!a&&(e.current=n,e.selection=[])})),lr=(e,t)=>{let{elementIds:n,withLinked:r=!1}=t;const a="function"==typeof n?n((0,Ut.current)(e.selection)):n;if(!Array.isArray(a))return;const o=e.pages.find((t=>{let{id:n}=t;return n===e.current}));let i=a;if(r){const e=o.elements.filter((e=>{let{id:t}=e;return a.includes(t)})).map((e=>{let{groupId:t}=e;return t})).filter(Boolean),t=o.elements.filter((t=>{let{groupId:n}=t;return e.includes(n)})).map((e=>{let{id:t}=e;return t}));i=i.concat(t)}const l=[...new Set(i)];if(e.selection.length===l.length){if(wn(e.selection,l).length===e.selection.length)return}const s=e=>o.elements.find((t=>{let{id:n}=t;return n===e})),c=l.length>1,d=c&&!r?l.filter((e=>(e=>o.elements[0].id!==e)(e)&&(e=>!s(e).resource?.isPlaceholder)(e)&&(e=>!s(e).isLocked)(e))):l;e.animationState=Un.STORY_ANIMATION_STATE.RESET,e.selection=d},sr=(0,Ut.produce)(lr),cr=(0,Ut.produce)(((e,t)=>{let{elementId:n}=t;if(!n||e.selection.includes(n))return;const r=e.pages.find((t=>{let{id:n}=t;return n===e.current})),a=e=>r.elements.find((t=>{let{id:n}=t;return n===e})),o=r.elements[0].id===n,i=a(n),l=i?.resource?.isPlaceholder,s=e.selection.length>0;if((o||l)&&s)return;const c=i?.isLocked,d=e.selection.includes(r.elements[0].id),u=e.selection.some((e=>a(e).isLocked));d||c||u?e.selection=[n]:e.selection.push(n)})),dr=(0,Ut.produce)(((e,t)=>{let{elementId:n}=t;const r=e.selection.indexOf(n);-1!==r&&e.selection.splice(r,1)})),ur=(e,t)=>{let{elementId:n,withLinked:r=!1}=t;if(!n)return;const a=e.selection.includes(n),o=e.pages.find((t=>{let{id:n}=t;return n===e.current})),i=o.elements[0].id,l=i===n,s=e.selection.length>0,c=o.elements.find((e=>{let{id:t}=e;return t===n}))?.groupId;let d=[n];if(c&&r){const t=o.elements.filter((e=>{let{groupId:t}=e;return c===t})).map((e=>{let{id:t}=e;return t})),n=e.selection.concat(t);d=d.concat(n)}if(!a){if(l&&s)return;const t=e.selection.includes(i),r=e=>o.elements.find((t=>{let{id:n}=t;return n===e})),a=e.selection.length>0&&r(e.selection[0]).isLocked,c=r(n);return t||a||c.isLocked?void(e.selection=d):void(e.selection=[...new Set(e.selection.concat(d))])}e.selection=e.selection.filter((e=>!d.includes(e)))},pr=(0,Ut.produce)(ur),mr=(0,Ut.produce)(((e,t)=>{let{elementId:n,metaKey:r,shiftKey:a,withLinked:o=!1}=t;if(r)return void ur(e,{elementId:n,withLinked:o});if(e.selection.length<=0||!a)return void lr(e,{elementIds:[n],withLinked:o});const i=e.selection[0],l=e.pages.find((t=>{let{id:n}=t;return n===e.current})).elements.map((e=>e.id)),s=l.findIndex((e=>e===i)),c=l.findIndex((e=>e===n)),d=Math.min(s,c),u=Math.max(s,c),p=l.slice(d,u+1);i!==p[0]&&p.reverse(),lr(e,{elementIds:p,withLinked:o})})),gr=(0,Ut.produce)(((e,t)=>{let{animationState:n}=t;e.animationState=n})),fr=(0,Ut.produce)(((e,t)=>{let{animations:n}=t;if(!Array.isArray(n))return;const r=e.pages.find((t=>{let{id:n}=t;return n===e.current}));r.animations||(r.animations=[]),r.animations=r.animations.concat(kn(r.animations,n))})),hr=(0,Ut.produce)(((e,t)=>{let{pages:n,current:r,selection:a,story:o,capabilities:i}=t;if(!Array.isArray(n)||0===n.length)return;const l="object"==typeof o?o:{},s="object"==typeof i?i:{},c=r??e.current,d=n.some((e=>{let{id:t}=e;return t===c}))?c:n[0].id;return{pages:n,current:d,selection:Array.isArray(a)?a:[],story:l,animationState:e.animationState,capabilities:s,copiedElementState:{}}})),br=(0,Ut.produce)(((e,t)=>{let{properties:n}=t;"function"!=typeof n?Object.assign(e.story,n):e.story=n((0,Ut.current)(e.story))})),Er=(e,t)=>{let{groupId:n,name:r,isLocked:a=!1}=t;if(!n||!r)return;const o=e.pages.find((t=>{let{id:n}=t;return n===e.current}));o.groups||(o.groups={}),o.groups[n]={name:r,isLocked:a}},yr=(0,Ut.produce)(Er),_r=(0,Ut.produce)(((e,t)=>{let{groupId:n,properties:r}=t;if(!n)return;const{groups:a}=e.pages.find((t=>{let{id:n}=t;return n===e.current}));a?.[n]&&Object.assign(a[n],r)})),vr=(0,Ut.produce)(((e,t)=>{let{groupId:n,includeElements:r=!1}=t;const{elements:a,groups:o}=e.pages.find((t=>{let{id:n}=t;return n===e.current}));if(!n||!o?.[n])return;delete o[n];const i=a.filter((e=>e.groupId===n));if(r){const t=i.map((e=>{let{id:t}=e;return t}));Fn(e,{elementIds:t})}else i.forEach((e=>{delete e.groupId}))})),wr=(0,Ut.produce)(((e,t)=>{let{oldGroupId:n,groupId:r,name:a,isLocked:o}=t;if(!n||!r||!a)return;const i=e.pages.find((t=>{let{id:n}=t;return n===e.current}));if(!i.groups?.[n])return;const l=e=>e.groupId===n,s=i.elements.filter(l);if(!s.length)return;if(s.some((e=>{let{isBackground:t}=e;return t})))return;Er(e,{groupId:r,name:a,isLocked:o});const c=s.map((e=>{const{element:t,elementAnimations:n}=(0,Mn.duplicateElement)({element:e,animations:i.animations,existingElements:i.elements});return t.groupId=r,n.length&&i.animations.push(...n),t})),d=i.elements.findLastIndex(l);i.elements.splice(d+1,0,...c),e.selection=c.map((e=>{let{id:t}=e;return t}))})),Tr=(0,Ut.produce)(((e,t)=>{let{elementId:n,groupId:r}=t;const a=e.pages.find((t=>{let{id:n}=t;return n===e.current})),{elements:o}=a,i=o.find((e=>{let{id:t}=e;return t===n}));if(i.groupId!==r)return;const l=function(e){let{elements:t,groupId:n}=e;const r=e=>e.groupId===n;return t.findIndex(r)+t.filter(r).length-1}({elements:o,groupId:r});delete i.groupId,o[l]!==i&&Zn(e,{elementId:n,position:l})})),Sr=(0,u.createContext)({state:{},actions:{}});var Cr=n(49925),Ir=n(82302);const xr=(0,u.createContext)({listeners:new Map});const Ar=function(){const e=(0,u.useContext)(xr);return(0,u.useCallback)(((t,n)=>{n?(e.listeners.has(t)||e.listeners.set(t,(e=>((e,t)=>{e.preventDefault(),e.returnValue=t})(e,t))),window.addEventListener("beforeunload",e.listeners.get(t))):(window.removeEventListener("beforeunload",e.listeners.get(t)),e.listeners.delete(t))}),[e])},kr="set_state",Or="clear",Pr="replay",Nr={entries:[],offset:0,requestedState:null,versionNumber:0},Rr=e=>(t,n)=>{let{type:r,payload:a}=n;const o=t.entries[t.offset];switch(r){case kr:if(t.requestedState){if(Object.keys(t.requestedState).every((e=>t.requestedState[e]===a[e]))){const e=t.entries.indexOf(t.requestedState);if(o.pages!==t.requestedState.pages&&o.pages.length===t.requestedState.pages.length&&o.current!==t.requestedState.current){const n=o.pages.filter(((e,n)=>e!==t.requestedState.pages[n]));if(1===n.length){const r=n[0].id,a={...t.requestedState,current:r};return{...t,offset:e,requestedState:a}}}return{...t,offset:e,requestedState:null}}}return{entries:[a,...t.entries.slice(t.offset)].slice(0,e),versionNumber:t.versionNumber+1,offset:0,requestedState:null};case Pr:return{...t,versionNumber:t.versionNumber+(t.offset-a),requestedState:t.entries[a]};case Or:return{...Nr};default:throw new Error(`Unknown history reducer action: ${r}`)}};const Mr=function(e){const[t,n]=(0,u.useReducer)(Rr(e),{...Nr}),{entries:r,offset:a,requestedState:o,versionNumber:i}=t,l=r.length,s=(0,u.useCallback)((e=>{const t=a+e;return!(t<0||t>l-1)&&(n({type:Pr,payload:t}),!0)}),[n,a,l]),c=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s("number"==typeof e?e:1)}),[s]),d=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s("number"==typeof e?-e:-1)}),[s]),p=(0,u.useCallback)((()=>n({type:Or})),[n]);return{requestedState:o,stateToHistory:(0,u.useCallback)((e=>{n({type:kr,payload:e})}),[n]),clearHistory:p,currentEntry:r?.[a],offset:a,historyLength:l,versionNumber:i,undo:c,redo:d}},Lr=(0,u.createContext)({state:{},actions:{}});function HistoryProvider(e){let{children:t,size:n}=e;const{requestedState:r,stateToHistory:a,clearHistory:o,currentEntry:i,offset:l,historyLength:s,undo:d,redo:p,versionNumber:m}=Mr(n),[g,f]=(0,u.useState)(!1),h=Ar(),b=(0,u.useRef)(1);(0,u.useEffect)((()=>(h("history",g),()=>h("history",!1))),[h,g]),(0,u.useEffect)((()=>{f(m!==b.current)}),[m]);const E=(0,u.useCallback)((()=>{b.current=m,f(!1)}),[m]),y={state:{currentEntry:i,hasNewChanges:g,requestedState:r,canUndo:l<s-1,canRedo:l>0,versionNumber:m},actions:{stateToHistory:a,clearHistory:o,resetNewChanges:E,undo:d,redo:p}};return(0,Ir.useGlobalKeyDownEffect)({key:"undo",dialog:!0},(()=>d()),[d]),(0,Ir.useGlobalKeyDownEffect)({key:"redo",dialog:!0},(()=>p()),[p]),c.createElement(Lr.Provider,{value:y},t)}HistoryProvider.defaultProps={size:50};const Dr=HistoryProvider;const Br=function(e){return(0,u.useContextSelector)(Lr,e??u.identity)};const Fr=function(e){const t=e.map((e=>JSON.stringify(e)));return Array.from(new Set(t)).map((e=>JSON.parse(e)))};function Hr(e,t,n,r){const{title:{raw:a=""}={},status:o,slug:i,date:l,modified:s,excerpt:{raw:c=""}={},link:d,storyData:u,permalinkTemplate:p,stylePresets:m={},password:g,previewLink:f,editLink:h,embedPostLink:b,author:E,capabilities:y={publish:!1,"assign-author":!1},extras:_={},featuredMedia:v,publisherLogo:w,taxonomies:T,terms:S}=t,C=!["draft","auto-draft","pending"].includes(o)||l!==s&&l?l:null,[I,x]=p?p.split(/%(?:postname|pagename)%/):[],A=void 0!==I&&void 0!==x?{prefix:I,suffix:x}:null,k="auto-draft"===o?"draft":o;r();const O=u&&(0,Cr.migrate)(u,u.version||0),P=O?.pages?.length>0?O.pages:[(0,Mn.createPage)()],N={colors:m.colors?Fr(m.colors):[],textStyles:m.textStyles?Fr(m.textStyles):[]};n({pages:P,story:{storyId:e,title:a,status:k,author:E,date:C,modified:s,excerpt:c,slug:i,link:d,extras:_,featuredMedia:v,permalinkConfig:A,publisherLogo:w,password:g,previewLink:f,editLink:h,embedPostLink:b,currentStoryStyles:{colors:O?.currentStoryStyles?.colors?Fr(O.currentStoryStyles.colors):[]},globalStoryStyles:N,autoAdvance:O?.autoAdvance,defaultPageDuration:O?.defaultPageDuration,backgroundAudio:O?.backgroundAudio,taxonomies:T,terms:S},selection:[],current:null,capabilities:y})}const Ur=function(e){let{storyId:t,story:n,shouldLoad:r,restore:a}=e;const{actions:{getStoryById:o}}=W(),{actions:{clearHistory:i}}=Br();(0,u.useEffect)((()=>{t&&r&&(n?Hr(t,n,a,i):o(t).then((e=>{Hr(t,e,a,i)})))}),[t,n,r,a,o,i])};var jr=n(96905),zr=n(58860);const Gr=function(e,t){return(0,u.useCallback)((()=>{try{const n=new URL(t);n.hash=window.location.hash,window.history.replaceState({id:e},(0,$e.default)(
/* translators: %d: current story id. */
(0,d.__)("Post %d","web-stories"),e),n.toString())}catch(e){}}),[e,t])},Yr=e=>{const t=[{src:"https://cdn.ampproject.org/v0.js"},{name:"amp-story",src:"https://cdn.ampproject.org/v0/amp-story-1.0.js"}],n={name:"amp-video",src:"https://cdn.ampproject.org/v0/amp-video-0.1.js"},r={name:"amp-story-captions",src:"https://cdn.ampproject.org/v0/amp-story-captions-0.1.js"},a={name:"amp-story-shopping",src:"https://cdn.ampproject.org/v0/amp-story-shopping-0.1.js"};for(const{elements:o,backgroundAudio:i}of e){i?.resource?.src&&i?.tracks?.length>0&&(t.push(n),t.push(r));for(const{type:e,tracks:i}of o)switch(e){case"video":t.push(n),i?.length>0&&t.push(r);break;case"gif":t.push(n);break;case"product":t.push(a)}}return[...new Set(t)]};const Zr=function Boilerplate(){return c.createElement(c.Fragment,null,c.createElement("style",{"amp-boilerplate":"",dangerouslySetInnerHTML:{__html:"body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}"}}),c.createElement("noscript",null,c.createElement("style",{"amp-boilerplate":"",dangerouslySetInnerHTML:{__html:"body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}"}})))};const Wr=function(e){return/^#(?:[a-f0-9]{3}){1,2}$/i.test(e)};const Vr=function CustomStyles(){const e=ee.PAGE_RATIO/ee.FULLBLEED_RATIO,t=1/e,n=ee.PAGE_RATIO,r=ee.FULLBLEED_RATIO,a=f.theme.colors.bg.primary,o=Wr(a)?a:"#1B1D1C";return c.createElement("style",{"amp-custom":"",dangerouslySetInnerHTML:{__html:`\n              h1, h2, h3 { font-weight: normal; }\n\n              amp-story-page {\n                background-color: ${o};\n              }\n\n              amp-story-grid-layer {\n                overflow: visible;\n              }\n\n              @media (max-aspect-ratio: 9 / 16)  {\n                @media (min-aspect-ratio: 320 / 678) {\n                  amp-story-grid-layer.grid-layer {\n                    margin-top: calc((100% / ${r} - 100% / ${n}) / 2);\n                  }\n                }\n              }\n          \n              @media not all and (min-resolution:.001dpcm) {\n                @media {\n                  p.text-wrapper > span {\n                    font-size: calc(100% - 0.5px);\n                  }\n                }\n              }\n\n              .page-fullbleed-area,\n              .page-background-overlay-area {\n                position: absolute;\n                overflow: hidden;\n                width: 100%;\n                left: 0;\n                height: calc(${e} * 100%);\n                top: calc((1 - ${e}) * 100% / 2);\n              }\n\n              .element-overlay-area {\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n              }\n\n              .page-safe-area {\n                overflow: visible;\n                position: absolute;\n                top: 0;\n                bottom: 0;\n                left: 0;\n                right: 0;\n                width: 100%;\n                height: calc(${t} * 100%);\n                margin: auto 0;\n              }\n\n              .mask {\n                position: absolute;\n                overflow: hidden;\n              }\n\n              .fill {\n                position: absolute;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                margin: 0;\n              }\n\n              @media (prefers-reduced-motion: no-preference) {\n                .animation-wrapper {\n                  opacity: var(--initial-opacity);\n                  transform: var(--initial-transform);\n                }\n              }\n\n              amp-story-grid-layer.align-bottom {\n                align-content: end;\n                padding: 0;\n              }\n\n              .captions-area {\n                padding: 0 32px 0;\n              }\n\n              amp-story-captions {\n                margin-bottom: 16px;\n                text-align: center;\n              }\n\n              amp-story-captions span {\n                display: inline-block;\n                margin: 0;\n                padding: 6px 12px;\n                vertical-align: middle;\n                border-radius: 15px;\n                background: rgba(11, 11, 11, 0.6);\n                color: rgba(255, 255, 255, 1);\n                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;;\n                font-size: calc(4 * var(--story-page-vw));\n                line-height: 1.4;\n                word-break: break-word;\n                word-wrap: break-word;\n                overflow-wrap: break-word;\n              }\n              `}})};const $r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"swap";const n=new URL("https://fonts.googleapis.com/css2");n.searchParams.append("display",t);for(const{family:t,variants:r=[]}of e){const e=r.reduce(((e,t)=>{let[n,r]=t;return 1!==n||e.includes("ital")||e.push("ital"),r&&400!==r&&!e.includes("wght")&&e.push("wght"),e}),[]).sort();let a=t;const o=e.join(",");o&&(a+=":"+o);const i=[...r].sort(((e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:e[1]-t[1])).map((t=>{let[n,r]=t;const a=[];return e.includes("ital")&&a.push(n),e.includes("wght")&&a.push(r),a})).join(";"),l="400"===i;i&&!l&&(a+="@"+i),n.searchParams.append("family",a)}return decodeURI(n.toString())};const qr=function(e,t){const n=function(e){const t=e.split(/[#?]/)[0].split(".").pop().trim();switch(t){case"woff":case"woff2":return t;case"ttf":return"truetype";case"otf":return"opentype";default:return null}}(t);return n?`@font-face {\n    font-family: "${e}";\n    src: url('${t}') format('${n}');\n    font-weight: normal;\n    font-display:swap;\n  }`:null};var Kr=n(56862);const Xr=(e,t)=>e.some((e=>e[0]===t[0]&&e[1]===t[1])),Qr=(e,t)=>Math.abs(e[0]+e[1]-t[0]-t[1]),Jr=(e,t)=>e.reduce(((e,n)=>Qr(n,t)<Qr(e,t)?n:e));const ea=function FontDeclarations(e){let{pages:t}=e;const n=new Map;for(const{elements:e}of t){const t=e.filter((e=>{let{type:t}=e;return"text"===t}));for(const{font:e,content:r}of t){const{service:t,family:a,variants:o=[],url:i}=e;if(!t||"system"===t)continue;const l=n.get(t)||new Map;n.set(t,l);const s=l.get(a)||{family:a,variants:[],url:i},c=(0,Kr.getFontVariants)(r);if(o.length>0)for(const e of c){const t=Jr(o,e),n=Xr(s.variants,t),r=Xr(o,t);!n&&r&&s.variants.push(t)}l.set(a,s)}}return c.createElement(c.Fragment,null,Array.from(n.keys()).map((e=>{const t=n.get(e);switch(e){case"fonts.google.com":return c.createElement("link",{key:e,href:$r(Array.from(t.values())),rel:"stylesheet"});case"custom":return Array.from(t.values()).map((e=>{let{family:t,url:n}=e;const r=qr(t,n);return c.createElement("style",{key:t,dangerouslySetInnerHTML:{__html:r}})}));default:return null}})))};var ta=n(18535);const na=7,ra=!0;var aa=n(1787);function oa(e,t){try{return new URL(t,e).href}catch(e){return t}}function ia(e){try{return new URL(e),!0}catch{return!1}}function la(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https";return/^(http:\/\/|https:\/\/|tel:|mailto:)/.test(e)?e:`${t}://${e}`}function sa(){return sa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sa.apply(this,arguments)}const ca=function WithLink(e){let{element:t,children:n,...r}=e;const a=t.link||{},{url:o,icon:i,desc:l,rel:s=[]}=a;if(!o)return n;const d=s.concat(["noreferrer"]),u=la(o);return c.createElement("a",sa({href:u,"data-tooltip-icon":i||void 0,"data-tooltip-text":l,target:"_blank",rel:d.join(" ")},r),n)};const da=function OutputElement(e){let{element:t,flags:n}=e;const{id:r,opacity:a,type:o,border:i,backgroundColor:l,backgroundTextMode:s,overlay:d}=t,{Output:u,isMaskable:p}=(0,Mn.getDefinitionForType)(o),m=(0,aa.getBox)(t,100,100),{x:g,y:f,width:h,height:b,rotationAngle:E}=m,y={backgroundClip:"content-box",...(0,ta.default)(l)};return c.createElement("div",{style:{position:"absolute",pointerEvents:"none",left:g?`${g}%`:0,top:f?`${f}%`:0,width:`${h}%`,height:`${b}%`,...(0,$n.shouldDisplayBorder)(t)?(0,$n.getBorderPositionCSS)({...i,width:`${h}%`,height:`${b}%`,posTop:`${f}%`,posLeft:`${g}%`}):null,transform:E?`rotate(${E}deg)`:null,opacity:void 0!==a?a/100:null}},c.createElement(Un.StoryAnimation.AMPWrapper,{target:r},c.createElement($n.OutputWithMask,{className:p?"mask":void 0,element:t,id:"el-"+r,style:{...(0,$n.shouldDisplayBorder)(t)?(0,$n.getBorderStyle)(t):null,pointerEvents:"initial",width:"100%",height:"100%",display:"block",position:"absolute",top:0,left:0,zIndex:0,...(0,$n.getBorderRadius)(t),...s===Mn.BACKGROUND_TEXT_MODE.FILL?y:null},skipDefaultMask:!0},c.createElement(ca,{element:t,style:{width:"100%",height:"100%",display:"block",position:"absolute",top:0,left:0}},c.createElement(u,{element:t,box:m,flags:n})),d&&c.createElement("div",{className:"element-overlay-area",style:(0,ta.default)(d)}))))};function ua(){return ua=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ua.apply(this,arguments)}const pa=function BackgroundAudio(e){let{backgroundAudio:t,id:n}=e;const{resource:r,tracks:a,loop:o}=t||{},{mimeType:i,src:l}=r,s={loop:o?"loop":void 0,id:`page-${n}-background-audio`,"captions-id":a?.length>0?`el-${n}-captions`:void 0,crossorigin:a?.length>0?"anonymous":void 0},d={type:i,src:l};return c.createElement("amp-story-grid-layer",{template:"fill"},c.createElement("amp-video",ua({autoPlay:"autoplay",layout:"fixed",width:"1",height:"1",poster:""},s),c.createElement("source",d),a&&a.map(((e,t)=>{let{srclang:n,label:r,kind:a,track:o,id:i}=e;return c.createElement("track",{srcLang:n,label:r,kind:a,src:o,key:i,default:0===t})}))))};const ma=function(e){return e.sort(((e,t)=>e.y-t.y)).reduce(((e,t)=>{let{id:n,fontSize:r,content:a,tagName:o}=t;if(o&&"auto"!==o)return e.set(n,o),e;if(a.length<=3)return e.set(n,"p"),e;const i=Array.from(e.values()).includes("h1");return r>=36&&!i?(e.set(n,"h1"),e):(r>=27?e.set(n,"h2"):r>=21?e.set(n,"h3"):e.set(n,"p"),e)}),new Map)};const ga=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.filter((e=>{let{type:t,loop:n}=e;const{isMedia:r}=(0,Mn.getDefinitionForType)(t);return r&&!n})).reduce(((e,n)=>n?.resource?.length?n?.resource?.length<t||e?.resource?.length>n?.resource?.length?e:n:e),void 0)};const fa=function(e){let{animations:t,defaultPageDuration:n=na,elements:r,backgroundAudio:a,id:o}=e;const{resource:i,loop:l}=a||{},s=(0,Un.getTotalDuration)({animations:t})/1e3,c=!l&&i?.length?i.length:0,d=ga(r,Math.max(s||1,c));if(d?.id)return`el-${d?.id}-media`;const u=Math.max(s||0,c,n);return u>c?`${u}s`:`page-${o}-background-audio`};const ha=function Outlink(e){let{ctaText:t,url:n,icon:r,theme:a,rel:o=[]}=e;return c.createElement("amp-story-page-outlink",{layout:"nodisplay","cta-image":r||void 0,theme:a},c.createElement("a",{href:n,rel:o.join(" ")},t||(0,d.__)("Learn more","web-stories")))};const ba=function ShoppingAttachment(e){let{products:t,theme:n,ctaText:r}=e;return c.createElement("amp-story-shopping-attachment",{theme:n,"cta-text":r||void 0},c.createElement("script",{type:"application/json",dangerouslySetInnerHTML:{__html:JSON.stringify({items:t})}}))};function Ea(){return Ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ea.apply(this,arguments)}const ya=`${ee.PAGE_WIDTH}:${ee.PAGE_HEIGHT}`;const _a=function OutputPage(e){let{page:t,autoAdvance:n=ra,defaultPageDuration:r=na,flags:a}=e;const{id:o,animations:i,elements:l,backgroundColor:s,backgroundAudio:d,pageAttachment:u={},shoppingAttachment:p={}}=t,[m,...g]=l,f=m?.resource?.baseColor,h=f?{backgroundColor:f}:{backgroundColor:"white",...(0,ta.default)(s)},b=n?fa({animations:i,elements:l,defaultPageDuration:r,backgroundAudio:d,id:o}):void 0,E=ma(g.filter((e=>{let{type:t}=e;return"text"===t}))),y=g.map((e=>{const t="text"===e.type,n=u?.url&&(0,Mn.isElementBelowLimit)(e);if(!(t||n))return e;const r={...e};return t&&(r.tagName=E.get(e.id)),n&&delete r.link,r})),_=l.filter((e=>{let{type:t}=e;return t===Mn.ELEMENT_TYPES.PRODUCT})).map((e=>{let{product:t}=e;return t})).filter(Boolean),v=_.length>0,w=u?.url&&!v,T=l.filter((e=>{let{type:t,tracks:n}=e;return t===Mn.ELEMENT_TYPES.VIDEO&&n?.length>0})).map((e=>{let{id:t}=e;return`el-${t}-captions`})),S=d?.resource?.src,C=d?.tracks?.length>0,I=C||!1===d?.loop&&d?.resource?.length;return S&&C&&T.push(`el-${o}-captions`),c.createElement("amp-story-page",{id:o,"auto-advance-after":b,"background-audio":S&&!I?S:void 0},c.createElement(Un.StoryAnimation.Provider,{animations:i,elements:l},c.createElement(Un.StoryAnimation.AMPAnimations,null),m&&c.createElement("amp-story-grid-layer",{template:"vertical","aspect-ratio":ya,class:"grid-layer"},c.createElement("div",{className:"page-fullbleed-area",style:h},c.createElement("div",{className:"page-safe-area"},c.createElement(da,{element:m,flags:a}),m.overlay&&c.createElement("div",{className:"page-background-overlay-area",style:(0,ta.default)(m.overlay)})))),c.createElement("amp-story-grid-layer",{template:"vertical","aspect-ratio":ya,class:"grid-layer"},c.createElement("div",{className:"page-fullbleed-area"},c.createElement("div",{className:"page-safe-area"},y.map((e=>c.createElement(da,{key:e.id,element:e,flags:a}))))))),S&&I&&c.createElement(pa,{backgroundAudio:d,id:o}),T.length>0&&c.createElement("amp-story-grid-layer",{template:"vertical","aspect-ratio":ya,class:"grid-layer align-bottom"},c.createElement("div",{className:"captions-area"},T.map((e=>c.createElement("amp-story-captions",{key:e,id:e,layout:"fixed-height",height:"100"}))))),w&&c.createElement(ha,u),v&&c.createElement(ba,Ea({products:_},p)))};const va=function(e){const t=[];if(0===e.length)return t;for(const{type:n,resource:r,isBackground:a}of e[0].elements){if(!["image","video","gif"].includes(n))continue;if(!a)continue;const e=r?.output?.src||r.src;t.push({url:e,type:"image"===n?"image":"video"})}return t};const wa=function OutputStory(e){let{story:{featuredMedia:t,link:n,title:r,autoAdvance:a,defaultPageDuration:o,backgroundAudio:i,publisherLogo:l},pages:s,metadata:{publisher:d},flags:u}=e;const p=Yr(s),m=va(s),g=t?.url||"",f=l?.url||"";return c.createElement("html",{amp:"",lang:"en"},c.createElement("head",null,c.createElement("meta",{charSet:"utf-8"}),c.createElement("meta",{name:"viewport",content:"width=device-width,minimum-scale=1,initial-scale=1"}),p.map((e=>{let{name:t,src:n}=e;return c.createElement("script",{key:n,async:"async",src:n,"custom-element":t})})),c.createElement(ea,{pages:s}),m.map((e=>{let{url:t,type:n}=e;return c.createElement("link",{key:t,href:t,rel:"preload",as:n})})),c.createElement(Zr,null),c.createElement(Vr,null),c.createElement("meta",{name:"web-stories-replace-head-start"}),c.createElement("title",null,r),n&&c.createElement("link",{rel:"canonical",href:n}),c.createElement("meta",{name:"web-stories-replace-head-end"})),c.createElement("body",null,c.createElement("amp-story",{standalone:"",publisher:d,"publisher-logo-src":f,title:r,"poster-portrait-src":g,"background-audio":i?.resource?.src??void 0},s.map((e=>c.createElement(_a,{key:e.id,page:e,autoAdvance:a,defaultPageDuration:o,flags:u}))))))};function Ta(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,u.renderToStaticMarkup)(c.createElement(wa,{story:e,pages:t,metadata:n,flags:r}))}const Sa=function(e){const t=[],n=[];return e.forEach((e=>{let{elements:r}=e;return r.forEach((e=>{let{product:r,type:a}=e;a===Mn.ELEMENT_TYPES.PRODUCT&&r&&!n.includes(r?.productId)&&(t.push(r),n.push(r?.productId))}))})),t};const Ca=function(e){let{story:t,pages:n,metadata:r,flags:a}=e;const{terms:o,...i}=er(t,["title","status","author","date","modified","slug","excerpt","featuredMedia","publisherLogo","password","currentStoryStyles","globalStoryStyles","autoAdvance","defaultPageDuration","backgroundAudio","terms"]),l=Sa(n);return{content:Ta(t,n,r,a),pages:n,...i,...o,products:l}},Ia={400:(0,d._x)("Bad Request","HTTP status description","web-stories"),401:(0,d._x)("Unauthorized","HTTP status description","web-stories"),403:(0,d._x)("Forbidden","HTTP status description","web-stories"),500:(0,d._x)("Internal Server Error","HTTP status description","web-stories")};const xa=function(e){let{storyId:t,pages:n,story:r,updateStory:a}=e;const{actions:{saveStoryById:o}}=W(),{actions:{resetNewChanges:i}}=Br(),{metadata:l,flags:s}=U(),{showSnackbar:c}=(0,jr.useSnackbar)(),[p,m]=(0,u.useState)(!1),[g,f]=(0,u.useState)(!1),[h,b]=(0,u.useState)(!1),{editLink:E}=r,y=Gr(t,E),_=(0,u.useCallback)((e=>{m(!0);const u=["publish","future","private"].includes(r.status),p="pending"===r.status,g=(0,P.getTimeTracker)("load_save_story");return Promise.resolve().then((()=>o({storyId:t,...Ca({story:r,pages:n,metadata:l,flags:s}),...e}))).then((e=>{const{status:t,slug:n,link:r,previewLink:o,editLink:i,embedPostLink:l,featuredMedia:s}=e;a({properties:{status:t,slug:n,link:r,previewLink:o,editLink:i,embedPostLink:l,featuredMedia:s}}),y();const c=["publish","future","private"].includes(e.status),d="pending"===e.status;f(!u&&c),b(!p&&d)})).catch((e=>{const t=e.message?(0,zr.stripHTML)(e.message):null;let n=(0,d.__)("Failed to save the story","web-stories");t&&(n=(0,$e.default)(
/* translators: %s: error message */
(0,d.__)("Failed to save the story: %s","web-stories"),t)),Object.prototype.hasOwnProperty.call(Ia,e?.data?.status)&&(n=t?(0,$e.default)(
/* translators: 1: error message. 2: status code */
(0,d.__)("Failed to save the story: %1$s (%2$s)","web-stories"),t,Ia[e?.data?.status]):(0,$e.default)(
/* translators: %s: error message */
(0,d.__)("Failed to save the story: %s","web-stories"),Ia[e?.data?.status])),console.log((0,d.__)("Failed to save the story","web-stories"),e),(0,P.trackError)("save_story",t),c({message:n,dismissible:!0})})).finally((()=>{m(!1),i(),g()}))}),[r,n,l,o,t,a,y,c,i,s]);return{saveStory:_,isSaving:p,isFreshlyPublished:g,isFreshlyPending:h}};function Aa(e){return new URLSearchParams(e.startsWith("#")?e.substr(1):e)}const ka=function(e,t){const[n,r]=(0,u.useState)((()=>{const n=Aa(window.location.hash);let r=t;try{n.has(e)&&(r=JSON.parse(decodeURI(n.get(e))))}catch(e){}return r}));return(0,u.useEffect)((()=>{const t=Aa(window.location.hash);n?t.set(e,encodeURI(JSON.stringify(n))):t.delete(e),(window.location.hash||t.toString())&&history.replaceState(history.state,"",`#${t.toString()}`)}),[e,n]),[n,r]};n(82801),n(61295);const Oa=function(e){return t=>{Array.isArray(e)&&e.forEach((e=>{const n=e.split(".");if(!n.length)return;if(1===n.length)return void delete t[n[0]];const r=n.pop(),a=n.pop(),o=n.reduce(((e,t)=>e?.[t]||e),t);Object.prototype.hasOwnProperty.call(o,a)&&"object"==typeof o[a]&&o[a]&&delete o[a][r]}))}};const Pa=function(e){return e.some((e=>e.elements.some((e=>(0,q.isBlobURL)(e?.resource?.src)||(0,q.isBlobURL)(e?.resource?.poster)))))},Na=["resource.baseColor","resource.blurHash","resource.id","resource.isMuted","resource.posterId","resource.poster","resource.font.metrics","resource.font.weights","resource.font.variants","resource.font.fallbacks","resource.font.styles","resource.isOptimized","resource.length","resource.lengthFormatted","resource.trimData.original","resource.trimData.start","resource.trimData.end","resource.creationDate"];const Ra=function(e){let{story:t,current:n,pages:r,selection:a,capabilities:o}=e;const{state:{currentEntry:i},actions:{stateToHistory:l}}=Br(),s=(0,u.useRef)();(0,u.useEffect)((()=>{i&&(s.current=structuredClone(i))}),[i]);const c=(0,u.useRef)(),d=(0,u.useRef)();(0,u.useEffect)((()=>{c.current=n,d.current=a}),[n,a]);const p=e=>structuredClone(e).map((e=>(e.elements.forEach(Oa(Na)),e)));(0,u.useEffect)((()=>{let e=!1;if(Na.length&&s.current&&r?.length){const n={story:t,capabilities:o};if(Object.keys(n).every((e=>JSON.stringify(n[e])===JSON.stringify(s.current[e])))){const t=p(r),n=p(s.current.pages);e=JSON.stringify(t)===JSON.stringify(n)}Pa(r)&&(e=!0)}e||l({story:t,current:c.current,selection:d.current,pages:r,capabilities:o})}),[t,r,l,o])};const Ma=function(e){let{restore:t}=e;const{state:{requestedState:n}}=Br();(0,u.useEffect)((()=>{if(!n)return;const{current:e,pages:r,selection:a,story:o,capabilities:i}=n;t({pages:r,current:e,story:o,selection:a,capabilities:i})}),[t,n])},La={addPage:e=>t=>{let{page:n}=t;return e({type:jt,payload:{page:n,position:null}})},addPageAt:e=>t=>{let{page:n,position:r}=t;return e({type:jt,payload:{page:n,position:r}})},copySelectedElement:e=>()=>e({type:tn}),deletePage:e=>t=>{let{pageId:n}=t;return e({type:Gt,payload:{pageId:n}})},deleteCurrentPage:e=>()=>e({type:Gt,payload:{pageId:null}}),updatePageProperties:e=>t=>{let{pageId:n,properties:r}=t;return e({type:zt,payload:{pageId:n,properties:r}})},updateCurrentPageProperties:e=>t=>{let{properties:n}=t;return e({type:zt,payload:{pageId:null,properties:n}})},arrangePage:e=>t=>{let{pageId:n,position:r}=t;return e({type:Yt,payload:{pageId:n,position:r}})},setCurrentPage:e=>t=>{let{pageId:n}=t;return e({type:rn,payload:{pageId:n}})},addElements:e=>t=>{let{elements:n}=t;return e({type:Wt,payload:{elements:n}})},addElement:e=>t=>{let{element:n}=t;return e({type:Wt,payload:{elements:[n]}})},deleteElementsById:e=>t=>{let{elementIds:n}=t;return e({type:Zt,payload:{elementIds:n}})},deleteElementById:e=>t=>{let{elementId:n}=t;return e({type:Zt,payload:{elementIds:[n]}})},deleteSelectedElements:e=>()=>e({type:Zt,payload:{elementIds:null}}),updateElementsById:e=>t=>{let{elementIds:n,properties:r}=t;return e({type:Vt,payload:{elementIds:n,properties:r}})},updateElementsByResourceId:e=>t=>{let{id:n,properties:r}=t;return e({type:$t,payload:{id:n,properties:r}})},deleteElementsByResourceId:e=>t=>{let{id:n}=t;return e({type:qt,payload:{id:n}})},updateElementById:e=>t=>{let{elementId:n,properties:r}=t;return e({type:Vt,payload:{elementIds:[n],properties:r}})},duplicateElementsById:e=>t=>{let{elementIds:n}=t;return e({type:en,payload:{elementIds:n}})},updateSelectedElements:e=>t=>{let{properties:n}=t;return e({type:Vt,payload:{elementIds:null,properties:n}})},combineElements:e=>t=>{let{firstElement:n,secondId:r,shouldRetainAnimations:a}=t;return e({type:Jt,payload:{firstElement:n,secondId:r,shouldRetainAnimations:a}})},setBackgroundElement:e=>t=>{let{elementId:n}=t;return e({type:Kt,payload:{elementId:n}})},clearBackgroundElement:e=>()=>e({type:Kt,payload:{elementId:null}}),arrangeElement:e=>t=>{let{elementId:n,position:r,groupId:a}=t;return e({type:Xt,payload:{elementId:n,position:r,groupId:a}})},arrangeGroup:e=>t=>{let{groupId:n,position:r}=t;return e({type:Qt,payload:{groupId:n,position:r}})},arrangeSelection:e=>t=>{let{position:n,groupId:r}=t;return e({type:Xt,payload:{elementId:null,position:n,groupId:r}})},setSelectedElementsById:e=>t=>{let{elementIds:n,withLinked:r}=t;return e({type:an,payload:{elementIds:n,withLinked:r}})},clearSelection:e=>()=>e({type:an,payload:{elementIds:[]}}),addElementToSelection:e=>t=>{let{elementId:n}=t;return e({type:on,payload:{elementId:n}})},removeElementFromSelection:e=>t=>{let{elementId:n}=t;return e({type:ln,payload:{elementId:n}})},toggleElementInSelection:e=>t=>{let{elementId:n,withLinked:r}=t;return e({type:sn,payload:{elementId:n,withLinked:r}})},updateAnimationState:e=>t=>{let{animationState:n}=t;return e({type:un,payload:{animationState:n}})},addAnimations:e=>t=>{let{animations:n}=t;return e({type:pn,payload:{animations:n}})},updateStory:e=>t=>{let{properties:n}=t;return e({type:dn,payload:{properties:n}})},toggleLayer:e=>t=>{let{metaKey:n,shiftKey:r,elementId:a,withLinked:o}=t;return e({type:cn,payload:{metaKey:n,shiftKey:r,elementId:a,withLinked:o}})},updateElementsByFontFamily:e=>t=>{let{family:n,properties:r}=t;return e({type:nn,payload:{family:n,properties:r}})},addGroup:e=>t=>{let{groupId:n,name:r,isLocked:a}=t;return e({type:hn,payload:{groupId:n,name:r,isLocked:a}})},updateGroupById:e=>t=>{let{groupId:n,properties:r}=t;return e({type:bn,payload:{groupId:n,properties:r}})},deleteGroupById:e=>t=>{let{groupId:n}=t;return e({type:En,payload:{groupId:n}})},deleteGroupAndElementsById:e=>t=>{let{groupId:n}=t;return e({type:En,payload:{groupId:n,includeElements:!0}})},duplicateGroupById:e=>t=>{let{groupId:n,name:r,oldGroupId:a,isLocked:o}=t;return e({type:yn,payload:{groupId:n,name:r,oldGroupId:a,isLocked:o}})},removeElementFromGroup:e=>t=>{let{elementId:n,groupId:r}=t;return e({type:_n,payload:{elementId:n,groupId:r}})}},Da={restore:e=>t=>{let{pages:n,selection:r,current:a,story:o,capabilities:i}=t;return e({type:mn,payload:{pages:n,selection:r,current:a,story:o,capabilities:i}})}};const Ba=function(e,t){let{type:n,payload:r}=t;switch(n){case jt:return On(e,r);case Gt:return Pn(e,r);case zt:return Nn(e,r);case Yt:return Rn(e,r);case rn:return ir(e,r);case Wt:return Bn(e,r);case Zt:return Hn(e,r);case Vt:return jn(e,r);case $t:return zn(e,r);case qt:return Gn(e,r);case Jt:return tr(e,r);case Kt:return Yn(e,r);case Xt:return Wn(e,r);case Qt:return Vn(e,r);case an:return sr(e,r);case on:return cr(e,r);case ln:return dr(e,r);case sn:return pr(e,r);case cn:return mr(e,r);case en:return nr(e,r);case dn:return br(e,r);case un:return gr(e,r);case pn:return fr(e,r);case tn:return ar(e,r);case mn:return hr(e,r);case nn:return or(e,r);case hn:return yr(e,r);case bn:return _r(e,r);case En:return vr(e,r);case yn:return wr(e,r);case _n:return Tr(e,r);default:return e}},Fa={pages:[],capabilities:{},current:null,selection:[],story:{},animationState:Un.STORY_ANIMATION_STATE.RESET,copiedElementState:{}};const Ha=function(e){const[t,n]=(0,u.useReducer)(Ba,{...Fa,...e}),{internal:r,api:a}=(0,u.useMemo)((()=>{const e=e=>Object.keys(e).reduce(((t,r)=>({...t,[r]:e[r](n)})),{});return{internal:e(Da),api:e(La)}}),[n]);return{state:t,internal:r,api:a}};const Ua=function(e){let{storyId:t,pages:n,story:r}=e;const{actions:{autoSaveById:a}}=W(),{metadata:o,flags:i}=U(),[l,s]=(0,u.useState)(!1);return{autoSave:(0,u.useCallback)((e=>(s(!0),a({storyId:t,...Ca({story:r,pages:n,metadata:o,flags:i}),...e}).finally((()=>s(!1))))),[r,n,o,a,t,i]),isAutoSaving:l}};var ja=n(45697),za=n.n(ja);const Ga={onInitialElementAdded:"onInitialElementAdded",onSecondPageAdded:"onSecondPageAdded",onFifthPageAdded:"onFifthPageAdded",onReplaceBackgroundMedia:"onReplaceBackgroundMedia",onReplaceForegroundMedia:"onReplaceForegroundMedia"};function OnInitialElementAddedRegister(e){let{currentStory:t,dispatchStoryEvent:n}=e;const r=(0,u.useRef)(!1);return(0,u.useEffect)((()=>{var e;r.current||(0===(e=t)?.pages?.length||1===e?.pages?.length&&e?.pages[0]?.elements?.length<=1)||(n(Ga.onInitialElementAdded),r.current=!0)}),[n,t]),null}function OnPageAddedRegister(e){let{currentStory:t,dispatchStoryEvent:n}=e;const r=(0,u.useRef)({[Ga.onSecondPageAdded]:!1,[Ga.onFifthPageAdded]:!1});return(0,u.useEffect)((()=>{!r.current[Ga.onSecondPageAdded]&&t?.pages?.length>=2&&(n(Ga.onSecondPageAdded),r.current[Ga.onSecondPageAdded]=!0)}),[n,t?.pages]),(0,u.useEffect)((()=>{!r.current[Ga.onFifthPageAdded]&&t?.pages?.length>=5&&(n(Ga.onFifthPageAdded),r.current[Ga.onFifthPageAdded]=!0)}),[n,t?.pages]),null}OnInitialElementAddedRegister.propTypes={currentStory:za().shape({story:za().shape({pages:za().arrayOf(za().shape({elements:za().arrayOf(za().shape(Mn.StoryPropTypes.element))}))})}),prevStory:za().shape({story:za().shape({pages:za().arrayOf(za().shape({elements:za().arrayOf(za().shape(Mn.StoryPropTypes.element))}))})}),dispatchStoryEvent:za().func.isRequired},OnPageAddedRegister.propTypes={currentStory:za().shape({pages:za().array}),prevStory:za().shape({pages:za().array}),dispatchStoryEvent:za().func.isRequired};const Ya=[OnInitialElementAddedRegister,OnPageAddedRegister],Za=(0,u.createContext)({state:{},actions:{}});function Wa(){return Object.values(Ga).reduce(((e,t)=>({...e,[t]:new Map})),{})}function Va(e,t){let[n]=e;return[t,n]}function StoryTriggersProvider(e){let{children:t,story:n}=e;const[[r,a],o]=(0,u.useReducer)(Va,[n,null]),i=(0,u.useMemo)(Wa,[]);(0,u.useEffect)((()=>o(n)),[n]);const l=(0,u.useCallback)(((e,t)=>{const n=Symbol();return i[e].set(n,t),()=>i[e].delete(n)}),[i]),s=(0,u.useCallback)((e=>{i[e]?.forEach((e=>e(r)))}),[i,r]),d=(0,u.useMemo)((()=>[l,s]),[l,s]);return c.createElement(Za.Provider,{value:d},c.createElement(c.Fragment,null,Ya.map((e=>c.createElement(e,{key:e.name,currentStory:r,previousStory:a,dispatchStoryEvent:s}))),t))}function $a(e){return e[0]}function qa(e){return e[1]}function Ka(e,t){const n=(0,u.useContextSelector)(Za,$a);(0,u.useEffect)((()=>n(e,t)),[e,t,n])}const Xa=function StoryProvider(e){let{storyId:t,initialEdits:n,children:r}=e;const[a,o]=ka("page",null),{state:i,api:l,internal:{restore:s}}=Ha({current:a}),{pages:d,current:p,selection:m,story:g,animationState:f,capabilities:h,copiedElementState:b}=i;(0,u.useEffect)((()=>o(p)),[p,o]);let E=null,y=null,_=null,v=null;p&&(E=p,y=d.findIndex((e=>{let{id:t}=e;return t===p})),_=y+1,v=d[y]);const w=(0,u.useMemo)((()=>m.length>0?m:ze),[m]),T=!v,S=v?.elements,C=(0,u.useMemo)((()=>{if(T)return ze;const e=S.filter((e=>{let{id:t}=e;return m.includes(t)}));return e.length>0?e:ze}),[T,S,m]),I=v?.animations,x=(0,u.useMemo)((()=>{if(T)return ze;const e=(I||[]).reduce(((e,t)=>{let{targets:n,...r}=t;return n.some((e=>m.includes(e)))?[...e,{targets:n,...r}]:e}),[]);return e.length>0?e:ze}),[T,m,I]),A=C.length>0,k=0===d.length;Ur({restore:s,shouldLoad:k,storyId:t,story:n?.story}),Ra({pages:d,current:p,selection:m,story:g,capabilities:h}),Ma({restore:s});const{updateStory:O}=l,{saveStory:P,isSaving:N,isFreshlyPublished:R,isFreshlyPending:M}=xa({storyId:t,pages:d,story:g,updateStory:O}),{autoSave:L,isAutoSaving:D}=Ua({storyId:t,pages:d,story:g}),B=(0,u.useMemo)((()=>({pages:d,currentPage:v,currentPageId:E,currentPageIndex:y,currentPageNumber:_,selectedElementIds:w,selectedElements:C,selectedElementAnimations:x,hasSelection:A,story:g,animationState:f,capabilities:h,meta:{isSaving:N||D,isSavingStory:N,isAutoSavingStory:D,isFreshlyPublished:R,isFreshlyPending:M},copiedElementState:b})),[d,v,E,y,_,w,C,x,A,g,f,h,N,D,R,M,b]),F={state:B,actions:{...l,autoSave:L,saveStory:P},internal:{reducerState:i,restore:s}};return c.createElement(Sr.Provider,{value:F},c.createElement(StoryTriggersProvider,{story:B},r))};const Qa=function(e){return(0,u.useContextSelector)(Sr,e??u.identity)};const Ja=function(e){let{updateMediaElement:t}=e;const{actions:{updateMedia:n}}=W(),{actions:{uploadFile:r}}=Dt(),{storyId:a}=U(),{updateElementsByResourceId:o}=Qa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId}))),i=(0,u.useCallback)((async(e,t,o)=>{if(!o)return{};o.name||(o.name=t);const i=await r(o,{mediaId:e,mediaSource:"poster-generation"}),{id:l,src:s,width:c,height:d}=i;e&&await n(e,{posterId:l,storyId:a});try{await(0,K.default)({src:s})}catch{}return{posterId:l,poster:s,posterWidth:c,posterHeight:d}}),[a,n,r]),l=(0,u.useCallback)((async(e,n)=>{const r=(0,P.getTimeTracker)("load_video_poster");try{const a=Ft(n),l=Ge(V({name:a})),s=await Ht(n),{posterId:c,poster:d,posterWidth:u,posterHeight:p}=await i(e,l,s),m=u&&p&&{width:u,height:p}||null;o({id:e,properties:e=>{let{resource:t}=e;return{resource:{...t,posterId:c,poster:d,...m}}}}),t({id:e,data:{posterId:c,poster:d,...m}})}catch(e){(0,P.trackError)("video_poster_generation",e.message)}finally{r()}}),[i,o,t]);return{uploadVideoFrame:l,uploadVideoPoster:i}},eo=(0,u.createContext)({state:{},actions:{}});const to=function CurrentUserProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)({}),{actions:{getCurrentUser:a,updateCurrentUser:o}}=W();(0,u.useEffect)((()=>{let e=!0;return a&&!Object.keys(n).length&&a().then((t=>{e&&r(t)})),()=>{e=!1}}),[n,a]);const i=(0,u.useCallback)((e=>o?o(e).then(r):null),[o]),l=(0,u.useCallback)((()=>i({mediaOptimization:!n.mediaOptimization})),[n,i]),s={state:{currentUser:n},actions:{toggleWebStoriesMediaOptimization:l,updateCurrentUser:i}};return c.createElement(eo.Provider,{value:s},t)};const no=function(e){return(0,u.useContextSelector)(eo,e??u.identity)},ro=["video/3gpp","video/3gpp2","video/MP2T","video/mp4","video/mpeg","video/ogg","video/quicktime","video/webm","video/x-flv","video/x-h261","video/x-h263","video/x-m4v","video/x-matroska","video/x-mjpeg","video/x-ms-asf","video/x-msvideo","video/avi","video/msvideo","video/x-nut"],ao=e=>{let{size:t}=e;return t>=ge},oo={CODEC:["-vcodec","libx264"],SCALE:["-vf",`scale='min(${_e},iw)':'min(${ye},ih)':'force_original_aspect_ratio=decrease',pad='width=ceil(iw/2)*2:height=ceil(ih/2)*2'`],FPS:["-r","24"],FASTSTART:["-movflags","+faststart"],COLOR_PROFILE:["-pix_fmt","yuv420p"],PRESET:["-preset","fast"],SEEK_TO_START:["-ss","00:00:01.000"],SINGLE_FRAME:["-frames:v","1"]},io=[...oo.CODEC,...oo.SCALE,...oo.FPS,...oo.FASTSTART,...oo.COLOR_PROFILE,...oo.PRESET];const lo=function(){const{ffmpegCoreUrl:e,capabilities:{hasUploadMediaAction:t}}=U(),{currentUser:r}=no((e=>{let{state:t}=e;return{currentUser:t.currentUser}})),a=Boolean(window?.crossOriginIsolated),o=(0,u.useCallback)((async t=>{const{createFFmpeg:r,fetchFile:a}=await n.e(7098).then(n.t.bind(n,15045,23)),o=r({corePath:e,log:false});return await o.load(),o.FS("writeFile",t.name,await a(t)),o}),[e]),i=(0,u.useCallback)((async e=>{const t=(0,P.getTimeTracker)("load_video_poster_ffmpeg");let n;try{n=await o(e);const r=(0,pe.default)()+"."+fe,a=V(e),i=Ge(a);await n.run(...oo.SEEK_TO_START,"-i",e.name,...oo.SINGLE_FRAME,...oo.SCALE,...oo.COLOR_PROFILE,...oo.PRESET,r);const l=n.FS("readFile",r);return ce(new Blob([l.buffer],{type:he}),i,he)}catch(e){throw console.error(e),(0,P.trackError)("video_poster_generation_ffmpeg",e.message),e}finally{try{n.exit()}catch{}t()}}),[o]),l=(0,u.useCallback)((async e=>{const t=(0,P.getTimeTracker)("load_video_transcoding");let n;try{n=await o(e);const r=(0,pe.default)()+"."+Ee,a=V(e)+"."+Ee;await n.run("-i",e.name,...io,r);const i=n.FS("readFile",r);return ce(new Blob([i.buffer],{type:be}),a,be)}catch(e){throw console.error(e),(0,P.trackError)("video_transcoding",e.message),e}finally{try{n.exit()}catch{}t()}}),[o]),s=(0,u.useCallback)((async(e,t,n)=>{const r=(0,P.getTimeTracker)("load_trim_video_transcoding");let a;try{a=await o(e);const i=e?.type||be,l=Nt(i),s=(0,pe.default)()+"."+l,c=V(e)+"-trimmed."+l;await a.run("-i",e.name,"-ss",t,"-to",n,s);const d=a.FS("readFile",s);return ce(new Blob([d.buffer],{type:i}),c,i)}catch(e){throw console.log(e),(0,P.trackError)("trim_video_transcoding",e.message),e}finally{try{a.exit()}catch{}r()}}),[o]),c=(0,u.useCallback)((async e=>{const t=(0,P.getTimeTracker)("load_mute_video_transcoding");let n;try{n=await o(e);const r=e?.type||be,a=Nt(r),i=(0,pe.default)()+"."+a,l=V(e)+"-muted."+a;await n.run("-i",e.name,"-vcodec","copy","-an",i);const s=n.FS("readFile",i);return ce(new Blob([s.buffer],{type:r}),l,r)}catch(e){throw console.log(e),(0,P.trackError)("mute_video_transcoding",e.message),e}finally{try{n.exit()}catch{}t()}}),[o]),d=(0,u.useCallback)((async e=>{const t=(0,P.getTimeTracker)("load_gif_conversion");let n;try{n=await o(e);const r=(0,pe.default)()+"."+Ee,a=V(e)+"."+Ee;await n.run("-i",e.name,...io,r);const i=n.FS("readFile",r);return new ce(new Blob([i.buffer],{type:be}),a,be)}catch(e){throw console.error(e),(0,P.trackError)("gif_conversion",e.message),e}finally{try{n.exit()}catch(e){}t()}}),[o]),p=(0,u.useCallback)((async e=>{const t=(0,P.getTimeTracker)("load_mp3_conversion");let n;try{n=await o(e);const r=(0,pe.default)()+".mp3",a=V(e)+".mp3";await n.run("-i",e.name,r);const i=n.FS("readFile",r);return new ce(new Blob([i.buffer],{type:"audio/mpeg"}),a,"audio/mpeg")}catch(e){throw console.error(e),(0,P.trackError)("mp3_conversion",e.message),e}finally{try{n.exit()}catch(e){}t()}}),[o]),m=(0,u.useCallback)((e=>ro.includes(e.type)),[]),g=Boolean(r?.mediaOptimization),f=t&&g&&a;return(0,u.useMemo)((()=>({isTranscodingEnabled:f,canTranscodeFile:m,isFileTooLarge:ao,transcodeVideo:l,stripAudioFromVideo:c,getFirstFrameOfVideo:i,convertGifToVideo:d,convertToMp3:p,trimVideo:s})),[f,m,l,c,i,d,p,s])};n(48675),n(37380),n(1118);const so=e=>{let{width:t,height:n}=e;return t*n<=_e*ye},co=(e,t)=>e<=4e6/15*t;const uo=function(){const{mediainfoUrl:e}=U(),t=(0,u.useCallback)((async t=>{const n=()=>t.size,r=(e,n)=>new Promise(((r,a)=>{const o=new FileReader;o.onerror=a,o.onload=e=>{e.target.error&&a(e.target.error),r(new Uint8Array(e.target.result))},o.readAsArrayBuffer(t.slice(n,n+e))})),a=(0,P.getTimeTracker)("load_mediainfo");try{await(o=e,document.querySelector(`script[src="${o}"]`)?Promise.resolve():new Promise(((e,t)=>{const n=document.createElement("script");n.async=!0,n.crossOrigin="anonymous",n.src=o,n.addEventListener("load",e),n.addEventListener("error",t),document.head.appendChild(n)})));const i=await window.MediaInfo({format:"JSON"}),l=JSON.parse(await i.analyzeData(n,r)).media.track.reduce(((e,t)=>("General"===t["@type"]&&(e.fileSize=Number(t.FileSize),e.format=t.Format.toLowerCase().replace("mpeg-4","mp4"),e.frameRate=Number(Number(t.FrameRate).toFixed(0)),e.codec=t.CodecID?.trim()),"Image"!==t["@type"]&&"Video"!==t["@type"]||(e.width=Number(t.Width),e.height=Number(t.Height),e.colorSpace=t.ColorSpace),"Video"===t["@type"]&&(e.duration=Number(t.Duration),e.videoCodec=t.Format.toLowerCase()),"Audio"===t["@type"]&&(e.audioCodec=t.Format.toLowerCase()),e)),{mimeType:t.type});return l.isMuted=!l.audioCodec,i.close(),l}catch(e){return console.error(e),(0,P.trackError)("mediainfo",e.message),null}finally{a()}var o}),[e]),n=(0,u.useCallback)((async(e,n)=>{if(e.isOptimized)return!0;if(!ve.includes(e.mimeType))return!1;if(!e.isPlaceholder&&!so(e))return!1;if(n.size&&e.length&&!co(n.size,e.length))return!1;const r=await t(n);if(!r)return!1;const a="video/mp4"===r.mimeType&&"avc"===r.videoCodec,o=!r.frameRate||r.frameRate>=24,i=co(r.fileSize,r.duration)&&so(r)&&a&&o;return(0,P.trackEvent)("mediainfo_is_optimized",{result:i,file_size:r.fileSize,file_type:r.mimeType,width:r.width,height:r.height,duration:r.duration}),i}),[t]);return(0,u.useMemo)((()=>({getFileInfo:t,isConsideredOptimized:n})),[t,n])},po={PENDING:"PENDING",PREPARING:"PREPARING",PENDING_TRANSCODING:"PENDING_TRANSCODING",CANCELLED:"CANCELLED",UPLOADED:"UPLOADED",UPLOADING:"UPLOADING",TRANSCODED:"TRANSCODED",TRANSCODING:"TRANSCODING",MUTING:"MUTING",MUTED:"MUTED",TRIMMING:"TRIMMING",TRIMMED:"TRIMMED",FINISHED:"FINISHED"};function mo(e,t){let{payload:{file:n,resource:r,onUploadStart:a,onUploadProgress:o,onUploadError:i,onUploadSuccess:l,additionalData:s={},posterFile:c,muteVideo:d,trimData:u,originalResourceId:p,elementId:m,isAnimatedGif:g}}=t;const f=(0,pe.default)();r.id||(r.id=(0,pe.default)());const h={...s,meta:{...s.meta||{}}};"video"===r.type&&null!==r.isMuted&&void 0===h?.isMuted&&(h.isMuted=r.isMuted),r?.baseColor&&(h.meta.baseColor=r.baseColor),r?.blurHash&&!r?.trimData&&(h.meta.blurHash=r.blurHash);const b={id:f,file:n,state:po.PENDING,resource:r,onUploadStart:a,onUploadProgress:o,onUploadError:i,onUploadSuccess:l,additionalData:h,posterFile:c,muteVideo:d,trimData:u,originalResourceId:p,elementId:m,isAnimatedGif:g};return{...e,queue:[...e.queue,b]}}function go(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:po.PREPARING}:e))}}function fo(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:po.PENDING_TRANSCODING}:e))}}function ho(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:po.UPLOADING}:e))}}function bo(e,t){let{payload:{id:n,resource:r}}=t;const a=e.queue.find((e=>e.id===n));return a?(a.resource.src&&a.resource.src!==r.src&&(0,q.revokeBlob)(a.resource.src),r.poster&&a.resource.poster&&a.resource.poster!==r.poster&&(0,q.revokeBlob)(a.resource.poster),{...e,queue:e.queue.map((e=>e.id===n?{...e,resource:{...r,poster:r.poster||e.resource.poster},previousResourceId:e.resource.id,posterFile:null,originalResourceId:null,state:po.UPLOADED}:e))}):e}function Eo(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:po.CANCELLED}:e))}}function yo(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:po.TRANSCODING}:e))}}function _o(e,t){let{payload:{id:n,file:r,additionalData:a={}}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,file:r,state:po.TRANSCODED,resource:{...e.resource,isOptimized:!0},additionalData:{...e.additionalData,...a}}:e))}}function vo(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:po.MUTING}:e))}}function wo(e,t){let{payload:{id:n,file:r,additionalData:a={}}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,file:r,state:po.MUTED,resource:{...e.resource,isMuted:!0},additionalData:{...e.additionalData,...a}}:e))}}function To(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:po.TRIMMING}:e))}}function So(e,t){let{payload:{id:n,file:r,additionalData:a={}}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,file:r,state:po.TRIMMED,additionalData:{...e.additionalData,...a}}:e))}}function Co(e,t){let{payload:{id:n,resource:r,posterFile:a}}=t;const o=e.queue.find((e=>e.id===n));return o&&o.resource.isPlaceholder?(o.resource.src!==r.src&&((0,q.revokeBlob)(o.resource.src),(0,q.revokeBlob)(o.resource.poster)),{...e,queue:e.queue.map((e=>e.id===n?{...e,resource:{...r,id:e.resource.id,isPlaceholder:!1},posterFile:a}:e))}):e}function Io(e,t){let{payload:{id:n}}=t;return{...e,queue:e.queue.map((e=>e.id===n?{...e,state:po.FINISHED}:e))}}function xo(e,t){let{payload:{id:n}}=t;const r=e.queue.filter((e=>e.id!==n));return{...e,queue:r}}const Ao={queue:[]};const ko=function(){const{actions:{uploadFile:e}}=Dt(),{isTranscodingEnabled:t,canTranscodeFile:n,transcodeVideo:a,stripAudioFromVideo:o,getFirstFrameOfVideo:i,convertGifToVideo:l,trimVideo:s}=lo(),{isConsideredOptimized:c}=uo(),[d,p]=(0,u.useReduction)(Ao,r),{uploadVideoPoster:m}=Ja({updateMediaElement:Bt}),g=(0,u.useRef)(!1),f=(0,u.useRef)(null),h=(0,u.useRef)(null),{prepareItem:b,prepareForTranscoding:E,startUploading:y,finishUploading:_,cancelUploading:v,startTranscoding:w,startMuting:T,startTrimming:S,finishTranscoding:C,finishMuting:I,finishTrimming:x,replacePlaceholderResource:A}=p;(0,u.useEffect)((()=>{(async()=>{await Promise.all(d.queue.map((async e=>{const{id:t,file:n,state:r,resource:a}=e;if([po.TRIMMED,po.MUTED,po.TRANSCODED].includes(r)&&a.isPlaceholder&&!a.poster)try{const{resource:e,posterFile:r}=await Ze(n);if(!g.current)return;A({id:t,resource:e,posterFile:r})}catch{}})))})()}),[d.queue,A]),(0,u.useEffect)((()=>{(async()=>{await Promise.all(d.queue.map((async e=>{const{id:r,file:a,state:o,resource:l}=e;if(po.PENDING!==o||!l.isPlaceholder)return;if(!t||!n(a))return;if(!(null!==h.current)){h.current=r;try{const e=await i(a),t=(0,q.createBlob)(e),{width:n,height:o}=await X(t),s={...l,poster:t,width:n,height:o};if(!g.current)return;A({id:r,resource:s,posterFile:e})}catch{}finally{h.current=null}}})))})()}),[d.queue,t,n,i,A]);const k=(0,u.useCallback)((async e=>{const{id:t,file:n,additionalData:r={}}=e;w({id:t}),f.current=t;try{const e=await l(n);if(!g.current)return;r.mediaSource="gif-conversion",r.isMuted=!0,C({id:t,file:e,additionalData:r})}catch(e){v({id:t,error:e}),(0,P.trackError)("upload_media",e?.message)}finally{f.current=null}}),[w,C,l,v]),O=(0,u.useCallback)((async e=>{const{id:t,file:n,additionalData:r={},trimData:a}=e;S({id:t}),f.current=t;try{const e=await s(n,a.start,a.end);if(!g.current)return;r.meta={...r.meta,trimData:a},x({id:t,file:e,additionalData:r})}catch(e){v({id:t,error:e}),(0,P.trackError)("upload_media",e?.message)}finally{f.current=null}}),[S,x,s,v]),N=(0,u.useCallback)((async e=>{const{id:t,file:n,additionalData:r={}}=e;T({id:t}),f.current=t;try{const e=await o(n);if(!g.current)return;r.isMuted=!0,I({id:t,file:e,additionalData:r})}catch(e){v({id:t,error:e}),(0,P.trackError)("upload_media",e?.message)}finally{f.current=null}}),[T,I,o,v]),R=(0,u.useCallback)((async e=>{const{id:t,file:n,additionalData:r={}}=e;w({id:t}),f.current=t;try{const e=await a(n);if(!g.current)return;r.mediaSource||(r.mediaSource="video-optimization"),C({id:t,file:e,additionalData:r})}catch(e){v({id:t,error:e}),(0,P.trackError)("upload_media",e?.message)}finally{f.current=null}}),[w,C,a,v]),M=(0,u.useCallback)((async t=>{const{id:n,file:r,resource:a,additionalData:o={}}=t;let{posterFile:l}=t,s=await e(r,o);if(g.current){if(!a.poster&&!l)try{l=await i(r)}catch{}try{const e=V(l),{poster:t,posterId:n}=await m(s.id,e,l);if(!g.current)return;s={...s,poster:t||s.poster||a.poster,posterId:n}}catch{}_({id:n,resource:s})}}),[_,i,e,m]),L=(0,u.useCallback)((async t=>{const{id:n,file:r,additionalData:a={}}=t,o=await e(r,a);g.current&&_({id:n,resource:o})}),[_,e]),D=(0,u.useCallback)((async e=>{const{id:t,file:n,resource:r}=e;y({id:t}),(0,P.trackEvent)("upload_media",{file_size:n?.size,file_type:n?.type});const a=(0,P.getTimeTracker)("load_upload_media");try{["video","gif"].includes(r.type)?await M(e):await L(e)}catch(e){v({id:t,error:e}),(0,P.trackError)("upload_media",e?.message)}finally{a()}}),[y,v,L,M]);return(0,u.useEffect)((()=>{d.queue.forEach((async e=>{const{id:r,file:a,resource:o,isAnimatedGif:i,state:l}=e;if(po.PENDING!==l)return;b({id:r});if(a.type.startsWith("video/")&&"recording"!==e.additionalData.mediaSource&&await c(o,a))return e.additionalData.mediaSource||(e.additionalData.mediaSource="video-optimization"),void D(e);if(!t)return void D(e);i||n(a)?E({id:r}):D(e)}))}),[d.queue,b,E,c,D,t,n]),(0,u.useEffect)((()=>{d.queue.forEach((e=>{const{muteVideo:t,trimData:n,isAnimatedGif:r,state:a}=e;if(po.PENDING_TRANSCODING!==a)return;null!==f.current||(r?k(e):n?O(e):t?N(e):R(e))}))}),[d.queue,b,R,k,O,N]),(0,u.useEffect)((()=>{d.queue.forEach((e=>{const{state:t}=e;[po.TRANSCODED,po.MUTED,po.TRIMMED].includes(t)&&D(e)}))}),[d.queue,D]),(0,u.useEffect)((()=>(g.current=!0,()=>{g.current=!1})),[]),(0,u.useMemo)((()=>{const e=d.queue.filter((e=>![po.PENDING,po.CANCELLED,po.UPLOADED,po.FINISHED].includes(e.state))),t=d.queue.filter((e=>e.state===po.PENDING)),n=d.queue.filter((e=>e.state===po.UPLOADED)),r=d.queue.filter((e=>e.state===po.FINISHED)),a=d.queue.filter((e=>e.state===po.CANCELLED)),o=d.queue.some((e=>![po.FINISHED,po.CANCELLED,po.PENDING].includes(e.state))),i=d.queue.some((e=>e.state===po.TRANSCODING)),l=d.queue.some((e=>e.state===po.MUTING)),s=d.queue.some((e=>e.state===po.TRIMMING));return{state:{progress:e,pending:t,uploaded:n,failures:a,finished:r,isUploading:o,isTranscoding:i,isMuting:l,isTrimming:s,isCurrentResourceMuting:e=>d.queue.some((t=>t.state===po.MUTING&&t.resource.id===e)),isCurrentResourceProcessing:e=>d.queue.some((t=>[po.PENDING_TRANSCODING,po.TRANSCODING,po.TRIMMING,po.MUTING].includes(t.state)&&t.resource.id===e)),isCurrentResourceUploading:e=>d.queue.some((t=>[po.PENDING,po.PREPARING,po.UPLOADING,po.UPLOADED,po.FINISHED].includes(t.state)&&(t.resource.id===e||t.previousResourceId===e))),isCurrentResourceTranscoding:e=>d.queue.some((t=>t.state===po.TRANSCODING&&t.resource.id===e)),isCurrentResourceTrimming:e=>d.queue.some((t=>t.state===po.TRIMMING&&t.resource.id===e)),isNewResourceMuting:e=>d.queue.some((t=>t.state===po.MUTING&&t.originalResourceId===e)),isNewResourceProcessing:e=>d.queue.some((t=>[po.TRANSCODING,po.TRIMMING,po.MUTING].includes(t.state)&&t.originalResourceId===e)),isNewResourceTranscoding:e=>d.queue.some((t=>t.state===po.TRANSCODING&&t.originalResourceId===e)),isElementTrimming:e=>d.queue.some((t=>t.state===po.TRIMMING&&t.elementId===e)),canTranscodeResource:e=>{const{isExternal:t,id:n,src:r}=e||{};return!t&&r&&!d.queue.some((e=>e.resource.id===n||e.previousResourceId===n||e.originalResourceId===n))}},actions:{addItem:p.addItem,removeItem:p.removeItem,finishItem:p.finishItem}}}),[d,p])},Oo="/v1/media",Po="/v1/categories",No="/v1/media:registerUsage",Ro={RELEVANCE:"relevance",LATEST:"latest"},Mo={TRENDING:"trending"};function Lo(e,t){if(!(null==t||Object.values(e).indexOf(t.toLowerCase())>-1))throw new Error("Invalid order_by: "+t)}function Do(e){if(!(null==e||e>0))throw new Error("Invalid page_size: "+e)}const Bo=new class ApiFetcher{async listMedia(){let{languageCode:e=null,filter:t=null,orderBy:n=null,pageSize:r=null,pageToken:a=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await function(e){Lo(Ro,e)}(n),await Do(r);const o=new URLSearchParams([["language_code",e],["filter",t],["order_by",n],["page_size",r],["page_token",a]].filter((e=>Boolean(e[1]))));return this.fetchPath({params:o,path:Oo})}async listCategories(){let{filter:e=null,orderBy:t=null,pageSize:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await function(e){Lo(Mo,e)}(t),await Do(n);const r=new URLSearchParams([["filter",e],["order_by",t],["page_size",n]].filter((e=>Boolean(e[1]))));return this.fetchPath({params:r,path:Po})}async registerUsage(e){let{registerUsageUrl:t}=e;await function(e){if(!e||!e.includes(No))throw new Error("Invalid url: "+e)}(t),await this.fetchUrl({url:new URL(t),method:"POST"})}fetchPath(e){let{path:t,params:n,method:r}=e;const a=new URL("https://media3p.googleapis.com"+t);return n.forEach(((e,t)=>{a.searchParams.append(t,e)})),this.fetchUrl({url:a,method:r})}async fetchUrl(e){let{url:t,method:n}=e;t.searchParams.append("key","AIzaSyDqgPsZ0VnxAuakmX7bjnzmNQsE7Drlvk0");const r=await window.fetch(t.href,{method:n??"GET"});if(!r.ok)throw new Error("Obtained an error from the "+t.pathname+" call, statusCode: "+r.status+", statusText: "+r.statusText);return r.json()}},Fo=(0,u.createContext)({actions:{}});const Ho=function Media3pApiProvider(e){let{children:t}=e;function n(e){let{provider:t,contentType:n,searchTerm:r,categoryId:a}=e;if(!Object.keys(wt).includes(t))throw new Error(`Unsupported provider: ${t}`);if(a&&r)throw new Error("searchTerm and categoryId are mutually exclusive.");return[`provider:${t}`,n&&`type:${n}`,a&&`category:${a}`,r].filter(Boolean).join(" ")}const r={actions:{listMedia:async function(e){let{provider:t,filter:r,orderBy:a,pageToken:o}=e;const{contentType:i,searchTerm:l,categoryId:s}=r??{},c=await Bo.listMedia({filter:n({provider:t,contentType:i,searchTerm:l,categoryId:s}),orderBy:a,pageSize:20,pageToken:o});return{media:(c.media||[]).map(At),nextPageToken:c.nextPageToken}},listCategories:async function(e){let{provider:t,orderBy:r}=e;const a=n({provider:t});return{categories:(await Bo.listCategories({filter:a,orderBy:r})).categories.map((e=>({id:e.name,label:e.displayName})))}},registerUsage:async function(e){let{registerUsageUrl:t}=e;await Bo.registerUsage({registerUsageUrl:t})}}};return c.createElement(Fo.Provider,{value:r},t)};const Uo=function(){return(0,u.useContextSelector)(Fo,u.identity)},jo=["Karla","Lato","Lora","Merriweather","Montserrat","Nunito","Oswald","Playfair Display","Poppins","Raleway","Roboto","Roboto Condensed","Source Serif Pro","Titillium Web","Work Sans","Alegreya","Arimo","EB Garamond","IBM Plex Mono","IBM Plex Serif","Inconsolata","Mulish","Noto Sans","Noto Serif","Open Sans","PT Mono","PT Sans","PT Serif","Roboto Mono","Source Sans Pro","Ubuntu","Anton","BioRhyme","Bungee","Bungee Shade","Cookie","Dancing Script","Monoton","Nothing You Could Do","Parisienne","Rock Salt","UnifrakturMaguntia"],zo=(0,u.createContext)({state:{},actions:{}});function Go(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?[e].map((e=>e.replace(/[\s./_]/g,"-"))).map((e=>t?e:e.replace(/^-+|-+$/g,""))).map((e=>t?e:e.replace(/--+/g,"-"))).map((e=>e.normalize("NFD"))).map((e=>e.replace(/[\u0300-\u036f]/g,""))).map((e=>t?e:e.replace(/[^a-zA-Z0-9-_]/g,""))).map((e=>e.toLowerCase())).pop():""}const Yo=function(){const e=(0,u.useCallback)((async e=>{const{family:t,service:n,variants:r,url:a}=e,o=`web-stories-${Go(t)}-font-css`;if(!document.getElementById(o))switch(n){case"fonts.google.com":await(0,zr.loadStylesheet)($r([{family:t,variants:r}],"auto"),o);break;case"custom":await(0,zr.loadInlineStylesheet)(o,qr(t,a));break;default:return}}),[]),t=(0,u.useCallback)((t=>Promise.allSettled(t.map((async t=>{let{font:n,fontWeight:r,fontStyle:a,content:o}=t;const{family:i,service:l}=n;if(!i||"system"===l)return null;const s=`\n              ${a||""} ${r||""} 0 '${i}'\n            `.trim();return await e(n),(0,zr.ensureFontLoaded)(s,o)})))),[e]);return{maybeEnqueueFontStyle:t,maybeLoadFont:e}};const Zo=function FontProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)([]),[a,o]=(0,u.useState)([]),[i,l]=(0,u.useState)([]),[s,d]=(0,u.useState)(null),{actions:{getFonts:p}}=W(),m=n.length>0?n:a,g=(0,u.useCallback)((async()=>{if(s||!p)return;const e=await p({service:"custom"});if(!e.length)return;const t=e.map((e=>({...e,id:e.family,name:e.family,value:e.family})));d(t)}),[p,s]),f=(0,u.useCallback)((async()=>{if(a.length||!p)return;const e=await p({include:jo.join(",")});if(!e.length)return;const t=e.map((e=>({id:e.family,name:e.family,value:e.family,...e})));o(t)}),[p,a]),{maybeEnqueueFontStyle:h,maybeLoadFont:b}=Yo(),E=(0,u.useCallback)((e=>{const t=m.find((t=>t.family===e));return t||{}}),[m]),y=(0,u.useCallback)((async e=>{if(e.length<2)return r([]),[];const t=(await p({search:e})).map((e=>({...e,id:e.family,name:e.family,value:e.family})));return r(t),t}),[p]),_=(0,u.useCallback)((e=>{const t=[{name:me[400],value:400}],n=E(e);let r=t;if(n){const{weights:e}=n;e&&(r=e.map((e=>({name:me[e],value:e}))))}return r}),[E]),v=(0,u.useCallback)((e=>{const t=E(e);return t?.fallbacks?t.fallbacks:[]}),[E]),w=(0,u.useCallback)((e=>{const t=[e];i.forEach((n=>{e.family!==n.family&&t.push(n)})),l(t.slice(0,5))}),[i]),T=(0,u.useRef)([]),S=(0,u.useCallback)((e=>{const t=e.filter((e=>!T.current.includes(e)));if(!t?.length)return;T.current=T.current.concat(t);const n=`https://fonts.googleapis.com/css?family=${encodeURIComponent(t.join("|"))}&subset=menu&display=swap`;(0,zr.loadStylesheet)(n,"web-stories-google-fonts-menu-css").catch((()=>{T.current=T.current.filter((e=>!t.includes(e)))}))}),[]),C=(0,u.useCallback)((e=>{for(const t of e){const e=s.find((e=>{let{family:n}=e;return n===t}));e&&b(e)}}),[s,b]),I={state:{fonts:n.length>0?n:a,curatedFonts:a,customFonts:s,recentFonts:i},actions:{getFontsBySearch:y,getFontByName:E,maybeEnqueueFontStyle:h,getFontWeight:_,getFontFallback:v,ensureMenuFontsLoaded:S,ensureCustomFontsLoaded:C,addRecentFont:w,getCustomFonts:g,getCuratedFonts:f}};return c.createElement(zo.Provider,{value:I},t)};const Wo=function(e){return(0,u.useContextSelector)(zo,e??u.identity)};var Vo=n(52935);const $o=async function(e){const t=await fetch(e);if(!t.ok)throw new Error(`An error has occured: ${t.status}`);return await t.blob()};const qo=async function(e,t){const n=await $o(e),r=function(e){const t=Ft(e),n=V({name:t});return t.replace(`.${n}`,`-optimized.${n}`)}(e);return ce(n,r,t)};const Ko=function(e){const t=new Uint8Array(e);let n=0;if(71!==t[0]||73!==t[1]||70!==t[2]||56!==t[3])return!1;for(let e=4;e<t.length;e++)0===t[e]&&33===t[e+1]&&249===t[e+2]&&n++;return n>1};const Xo=function(e){let{uploadMedia:t,postProcessingResource:n,updateMedia:r,deleteMediaElement:a}=e;const{actions:{getOptimizedMediaById:o,getMutedMediaById:i}}=W(),{updateElementsByResourceId:l,updateElementById:s}=Qa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId,updateElementById:e.actions.updateElementById}))),{isConsideredOptimized:c}=uo(),d=(0,u.useCallback)((e=>{let{oldResource:t,resource:n}=e;const{id:r,alt:a}=t;l({id:r,properties:()=>({type:n.type,resource:{...n,alt:a}})})}),[l]),p=(0,u.useCallback)((e=>{let{elementId:t,oldResource:n,resource:r}=e;const{alt:a}=n;s({elementId:t,properties:()=>({type:r.type,resource:{...r,alt:a}})})}),[s]),m=(0,u.useCallback)(((e,t)=>{s({elementId:e,properties:e=>({resource:{...e.resource,...t}})})}),[s]),g=(0,u.useCallback)(((e,t)=>{l({id:e,properties:e=>({resource:{...e.resource,...t}})})}),[l]),f=(0,u.useCallback)(((e,t,n)=>{r(e,{mediaSource:n,optimizedId:t})}),[r]),h=(0,u.useCallback)(((e,t)=>{r(e,{mutedId:t})}),[r]),b=(0,u.useCallback)((e=>{let{resource:i}=e;const{id:l,src:s,mimeType:u}=i,p=()=>g(l,{isOptimized:!1}),m=e=>{let{id:t,resource:r}=e;d({oldResource:i,resource:r}),f(l,r.id,"source-video"),a({id:l}),t===r.id&&n(r)},h=e=>{let{resource:t}=e;const n={...t,id:i.id};g(l,{...n})};(async()=>{const e=await o(l);if(e)return void g(l,e);let n=!1;try{n=await qo(s,u)}catch(e){return}if(await c(i,n))return g(l,{isOptimized:!0}),void r(l,{mediaSource:"video-optimization"});await t([n],{onUploadSuccess:m,onUploadError:p,onUploadProgress:h,additionalData:{originalId:i.id,isMuted:i.isMuted},originalResourceId:i.id})})()}),[g,d,f,a,n,o,t,c,r]),E=(0,u.useCallback)((e=>{let{resource:r,canvasResourceId:a,elementId:o,start:i,end:l}=e;const{id:s,...c}=r,{src:d,mimeType:u,poster:g,isMuted:f,isOptimized:h}=r,b={original:s,start:i,end:l},E=()=>m(o,{trimData:b}),y=()=>m(o,{trimData:r.trimData||{}}),_=e=>{let{id:t,resource:i}=e;const l={alt:r.alt,id:a};p({elementId:o,oldResource:l,resource:i}),t===i.id&&n(i)},v=e=>{let{resource:t}=e;const n={...t,id:a};m(o,{...n})};return(async()=>{let e=!1,n=!1;try{e=await qo(d,u)}catch(e){return}if(g)try{n=await $o(g)}catch(e){}await t([e],{onUploadSuccess:_,onUploadStart:E,onUploadError:y,onUploadProgress:v,additionalData:{originalId:s,isMuted:f,mediaSource:h?"video-optimization":"editor"},elementId:o,trimData:b,resource:{...c,trimData:b},originalResourceId:a,posterFile:n})})()}),[m,p,n,t]),y=(0,u.useCallback)((e=>{let{resource:r}=e;const{id:a,...o}=r,{src:l,mimeType:s,poster:c,isOptimized:u}=r,p=()=>{g(a,{isMuted:!1})},m=e=>{let{id:t,resource:a}=e;d({oldResource:r,resource:a}),h(r.id,a.id),t===a.id&&n(a)},f=e=>{let{resource:t}=e;const n={...t,id:r.id};g(a,{...n})};(async()=>{const e=await i(a);if(e)return void g(a,e);let n=!1,r=!1;try{n=await qo(l,s)}catch(e){return}if(c)try{r=await $o(c)}catch(e){}await t([n],{onUploadSuccess:m,onUploadError:p,onUploadProgress:f,additionalData:{originalId:a,mediaSource:u?"video-optimization":"editor"},muteVideo:!0,resource:{...o,isMuted:!0},originalResourceId:a,posterFile:r})})()}),[g,d,h,n,i,t]);return{optimizeVideo:b,optimizeGif:(0,u.useCallback)((e=>{let{resource:r}=e;const{id:o,src:i,mimeType:l}=r,s=e=>{let{id:t,resource:o}=e;d({oldResource:r,resource:o}),f(r.id,o.id,"source-image"),a({id:r.id}),t===o.id&&n(o)},c=e=>{let{resource:t}=e;const n={...t,id:r.id};g(o,{...n})};return(async()=>{let e=!1;try{e=await qo(i,l)}catch(e){return}const n=await e.arrayBuffer();Ko(n)&&await t([e],{onUploadSuccess:s,onUploadProgress:c,additionalData:{original_id:o},originalResourceId:o})})()}),[d,f,a,n,g,t]),muteExistingVideo:y,trimExistingVideo:E}},Qo={PANEL:"web_stories_ui_panel_settings",TEXT_SET_SETTINGS:"web_stores_text_set_settings",TERMS_MEDIA3P:"web_stories_media3p_terms_agreement",VIDEO_OPTIMIZATION_DIALOG_DISMISSED:"web_stories_video_optimization_dialog_dismissed",HELP_CENTER:"web_stories_help_center",DELETE_COLOR_PRESET_DIALOG_DISMISSED:"web_stories_delete_color_preset_dialog_dismissed",DELETE_STYLE_PRESET_DIALOG_DISMISSED:"web_stories_delete_style_preset_dialog_dismissed",DEFAULT_VIEW_PAGE_TEMPLATE_LAYOUT:"web_stories_default_template_view",BACKGROUND_IS_SET_DIALOG_DISMISSED:"web_stories_background_is_set_dialog_dismissed",CORS_CHECK_DIALOG_DISMISSED:"web_stories_cors_check_dialog_dismissed",MEDIA_RECORDING_AUDIO_INPUT:"web_stories_media_recording_audio_input",MEDIA_RECORDING_VIDEO_INPUT:"web_stories_media_recording_video_input"};const Jo={getItemByKey:function(e){let t=null;try{const n=localStorage.getItem(e);t=JSON.parse(n)}catch(e){(0,P.trackError)("local_storage_read",e.message)}return t},setItemByKey:function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){(0,P.trackError)("local_storage_write",e.message)}}},ei=Qo.VIDEO_OPTIMIZATION_DIALOG_DISMISSED;const ti=function(e){let{media:t,prependMedia:n,updateMediaElement:r,deleteMediaElement:a}=e;const{actions:{validateFileForUpload:o}}=Dt(),{showSnackbar:i}=(0,jr.useSnackbar)(),l=Ar(),{state:{isUploading:s,isTranscoding:c,pending:p,progress:m,uploaded:g,failures:f,finished:h,isNewResourceProcessing:b,isCurrentResourceProcessing:E,isNewResourceTranscoding:y,isNewResourceMuting:_,isElementTrimming:v,isCurrentResourceUploading:w,isCurrentResourceTranscoding:T,isCurrentResourceMuting:S,isCurrentResourceTrimming:C,canTranscodeResource:I},actions:{addItem:x,removeItem:A,finishItem:k}}=ko(),{isTranscodingEnabled:O,canTranscodeFile:P,isFileTooLarge:N}=lo(),R=(0,u.useRef)();R.current=t,(0,u.useEffect)((()=>{l("upload",s)}),[s,l]),(0,u.useEffect)((()=>{const e=Boolean(Jo.getItemByKey(ei));c&&e&&i({message:(0,d.__)("Video optimization in progress","web-stories"),dismissible:!0})}),[c,i]),(0,u.useEffect)((()=>{const e=p.filter((e=>{let{resource:{id:t}}=e;return!R.current.find((e=>{let{id:n}=e;return n===t}))}));if(!e.length)return;for(const{onUploadStart:t,resource:n}of e)t&&t({resource:n});const t=e.map((e=>{let{resource:t}=e;return t}));n({media:t})}),[p,n]),(0,u.useEffect)((()=>{for(const{onUploadProgress:e,resource:t}of m){const{id:n}=t;t&&(r({id:n,data:t}),e&&e({id:n,resource:t}))}}),[m,r]),(0,u.useEffect)((()=>{for(const{id:e,resource:t,onUploadSuccess:n,previousResourceId:a}of g){const{id:o}=t;t&&(r({id:o,data:t}),a&&r({id:a,data:t}),n&&(n({id:o,resource:t}),a&&n({id:a,resource:t})),k({id:e}))}}),[g,r,k]),(0,u.useEffect)((()=>{for(const{id:e}of h)A({id:e})}),[h,A]),(0,u.useEffect)((()=>{for(const{id:e,onUploadError:t,error:n,resource:r}of f){const{id:o}=r;t&&t({id:o}),a({id:o}),A({id:e});const l=r&&["video","gif"].includes(r.type)?r.poster:r.src;i({message:n?.message||(0,d.__)("File could not be uploaded. Please try a different file.","web-stories"),thumbnail:l&&{src:l,alt:r?.alt},dismissible:!0})}}),[f,a,A,i]);const M=(0,u.useCallback)((async function(e){let{onUploadStart:t,onUploadProgress:n,onUploadError:r,onUploadSuccess:a,additionalData:l,muteVideo:s,trimData:c,resource:d,posterFile:u,originalResourceId:p,elementId:m}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e?.length&&await Promise.all(e.reverse().map((async e=>{const g=O&&P(e),f=g&&N(e);try{o({file:e,canTranscodeFile:g,isFileTooLarge:f})}catch(e){return void i({message:e.message,dismissible:!0})}if(!d||!u){const{resource:t,posterFile:n}=await Ze(e);u=n,d=t}const h="image/gif"===d.mimeType&&Ko(await e.arrayBuffer());l?.isGif&&(d={...d,type:"gif",mimeType:"image/gif",output:{mimeType:d.mimeType,src:d.src}}),x({file:e,resource:d,onUploadStart:t,onUploadProgress:n,onUploadError:r,onUploadSuccess:a,additionalData:l,posterFile:u,muteVideo:s,trimData:c,originalResourceId:p,elementId:m,isAnimatedGif:h})})))}),[i,o,x,P,O,N]);return{uploadMedia:M,isUploading:s,isTranscoding:c,isNewResourceProcessing:b,isCurrentResourceProcessing:E,isNewResourceTranscoding:y,isNewResourceMuting:_,isElementTrimming:v,isCurrentResourceUploading:w,isCurrentResourceTranscoding:T,isCurrentResourceMuting:S,isCurrentResourceTrimming:C,canTranscodeResource:I}};const ni=function(e){let{updateMediaElement:t}=e;const{actions:{updateMedia:n}}=W(),{updateElementsByResourceId:r}=Qa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId}))),{capabilities:{hasUploadMediaAction:a}}=U(),o=(0,u.useCallback)((async(e,o)=>{if(a)try{const a=await re(o);await le(a);const i=se(a);r({id:e,properties:e=>{let{resource:t}=e;return{resource:{...t,isMuted:!i}}}}),t({id:e,data:{isMuted:!i}}),await n(e,{isMuted:!i})}catch(e){}}),[a,r,t,n]);return{updateVideoIsMuted:o}};const ri=function(e){return`#${e.map((e=>e.toString(16))).map((e=>e.padStart(2,"0"))).join("")}`};async function ai(e){const{default:t}=await n.e(7498).then(n.bind(n,80269));return new Promise(((n,r)=>{try{const r=(new t).getColor(e);n(ri(r))}catch(e){(0,P.trackError)("image_base_color",e.message),r(e)}}))}const oi=async function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";if(!e)throw new Error("No source to image");const o=(0,P.getTimeTracker)("load_get_base_color");try{n=await(0,K.default)({src:e,width:r,height:a}),t=await ai(n)}catch(e){if("TypeError"!==e?.name)throw e;t="#ffffff"}finally{n?.remove(),o()}return t};const ii=function(){const{actions:{getProxyUrl:e}}=W(),t=(0,u.useCallback)((async e=>{let t=!1;if(!e)return t;try{await fetch(e,{method:"HEAD"})}catch(e){t=!0}return t}),[]),n=(0,u.useCallback)(((t,n)=>{const{needsProxy:r}=t;return r&&n?e(n):n}),[e]);return{getProxiedUrl:n,checkResourceAccess:t}},li={addProcessing:(e,t)=>{let{payload:n}=t;return!n||e.processing.includes(n)?e:{...e,processing:[...e.processing,n]}},removeProcessing:(e,t)=>{let{payload:n}=t;if(!n||!e.processing.includes(n))return e;const r=[...e.processing].filter((e=>e!==n));return{...e,processing:r,processed:[...e.processed,n]}}},si={processed:[],processing:[]};const ci=function(e){let{updateMediaElement:t}=e;const{actions:{updateMedia:n,getPosterMediaById:r}}=W(),{updateElementsByResourceId:a}=Qa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId}))),{capabilities:{hasUploadMediaAction:o}}=U(),{getProxiedUrl:i}=ii(),[l,s]=(0,u.useReduction)(si,li),{processed:c,processing:d}=l,{addProcessing:p,removeProcessing:m}=s,g=(0,u.useCallback)((async(e,r)=>{let{id:i,isExternal:l}=e;try{a({id:i,properties:e=>{let{resource:t}=e;return{resource:{...t,baseColor:r}}}}),l||(t({id:i,data:{baseColor:r}}),o&&await n(i,{baseColor:r}))}catch(e){}}),[a,t,o,n]),f=(0,u.useCallback)((async e=>{const{type:t,poster:n,id:a,isExternal:o}=e;let l=n;if("image"===t)l=(0,Vo.default)(0,e);else if(!o)try{const e=r?await r(a):null;e&&(l=(0,Vo.default)(0,e))}catch(e){}if(!l)return;const s=i(e,l);try{const t=await oi(s);await g(e,t)}catch(e){}}),[i,r,g]);return{updateBaseColor:(0,u.useCallback)((async e=>{const{id:t}=e;c.includes(t)||d.includes(t)||(p(t),await f(e),m(t))}),[p,c,d,m,f])}};var di=n(20477),ui=n.n(di);function Worker_fn(){return ui()('(()=>{"use strict";const t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],a=(a,o)=>{var r="";for(let e=1;e<=o;e++){let h=Math.floor(a)/Math.pow(83,o-e)%83;r+=t[Math.floor(h)]}return r},o=t=>{let a=t/255;return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)},r=t=>{let a=Math.max(0,Math.min(1,t));return a<=.0031308?Math.round(12.92*a*255+.5):Math.round(255*(1.055*Math.pow(a,1/2.4)-.055)+.5)},e=(t,a)=>(t<0?-1:1)*Math.pow(Math.abs(t),a);class ValidationError extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}}const h=(t,a,r,e)=>{let h=0,n=0,s=0;const l=4*a;for(let M=0;M<a;M++)for(let a=0;a<r;a++){const r=e(M,a);h+=r*o(t[4*M+0+a*l]),n+=r*o(t[4*M+1+a*l]),s+=r*o(t[4*M+2+a*l])}let M=1/(a*r);return[h*M,n*M,s*M]},n=(t,o,n,s,l)=>{if(s<1||s>9||l<1||l>9)throw new ValidationError("BlurHash must have between 1 and 9 components");if(o*n*4!==t.length)throw new ValidationError("Width and height must match the pixels array");let M=[];for(let a=0;a<l;a++)for(let r=0;r<s;r++){const e=0==r&&0==a?1:2,s=h(t,o,n,((t,h)=>e*Math.cos(Math.PI*r*t/o)*Math.cos(Math.PI*a*h/n)));M.push(s)}const i=M[0],c=M.slice(1);let m,f="";if(f+=a(s-1+9*(l-1),1),c.length>0){let t=Math.max(...c.map((t=>Math.max(...t)))),o=Math.floor(Math.max(0,Math.min(82,Math.floor(166*t-.5))));m=(o+1)/166,f+=a(o,1)}else m=1,f+=a(0,1);var u;return f+=a((r((u=i)[0])<<16)+(r(u[1])<<8)+r(u[2]),4),c.forEach((t=>{f+=a(((t,a)=>19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*e(t[0]/a,.5)+9.5))))*19+19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*e(t[1]/a,.5)+9.5))))+Math.floor(Math.max(0,Math.min(18,Math.floor(9*e(t[2]/a,.5)+9.5)))))(t,m),2)})),f},s=function(t){const{image:a,width:o,height:r,componentX:e,componentY:h}=t.data;if(a)try{const t=n(a,o,r,e,h);postMessage({type:"success",blurHash:t})}catch(t){postMessage({type:"error",error:t})}};self.addEventListener("message",s)})();',"Worker",void 0,n.p+"generateBlurhash.worker.worker.js")}const pi=async e=>{let t;try{t=await(0,K.default)({src:e})}catch{return Promise.reject(new Error("Failed to get blurhash from image"))}const n=(e=>{const{width:t,height:n}=e,r=document.createElement("canvas");r.width=t,r.height=n;const a=r.getContext("2d");return a.drawImage(e,0,0),a.getImageData(0,0,t,n)})(t),{data:r,width:a,height:o}=n,i=(0,P.getTimeTracker)("load_get_blurhash");return new Promise(((e,t)=>{const n=new Worker_fn;n.postMessage({image:r,width:a,height:o,componentX:4,componentY:4}),n.addEventListener("message",(function(r){n.terminate(),i(),"success"===r.data.type?e(r.data.blurHash):((0,P.trackError)("blurhash_generation",r.data.error?.message),t(r.data.error))})),n.addEventListener("error",(e=>{n.terminate(),i(),(0,P.trackError)("blurhash_generation",e?.message),t(e)}))}))},mi={addProcessing:(e,t)=>{let{payload:n}=t;return!n||e.processing.includes(n)?e:{...e,processing:[...e.processing,n]}},removeProcessing:(e,t)=>{let{payload:n}=t;if(!n||!e.processing.includes(n))return e;const r=[...e.processing].filter((e=>e!==n));return{...e,processing:r,processed:[...e.processed,n]}}},gi={processed:[],processing:[]};const fi=function(e){let{updateMediaElement:t}=e;const{actions:{updateMedia:n,getPosterMediaById:r}}=W(),{updateElementsByResourceId:a}=Qa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId}))),{capabilities:{hasUploadMediaAction:o}}=U(),{getProxiedUrl:i}=ii(),[l,s]=(0,u.useReduction)(gi,mi),{processed:c,processing:d}=l,{addProcessing:p,removeProcessing:m}=s,g=(0,u.useCallback)((async(e,r)=>{try{a({id:e,properties:e=>{let{resource:t}=e;return{resource:{...t,blurHash:r}}}}),t({id:e,data:{blurHash:r}}),o&&await n(e,{blurHash:r})}catch(e){}}),[a,t,o,n]),f=(0,u.useCallback)((async e=>{const{type:t,poster:n,id:a,isExternal:o}=e;let l=n;if("image"===t)l=(0,Vo.default)(300,e);else if(!o)try{const e=r?await r(a):null;e&&(l=(0,Vo.default)(300,e))}catch(e){}if(!l)return;const s=i(e,l);try{const t=await pi(s);await g(e.id,t)}catch(e){(0,P.trackError)("blurhash_generation",e?.message)}}),[i,r,g]);return{updateBlurHash:(0,u.useCallback)((async e=>{const{id:t}=e;c.includes(t)||d.includes(t)||(p(t),await f(e),m(t))}),[p,c,d,m,f])}},hi="LOCAL_MEDIA_RESET_FILTERS",bi="LOCAL_MEDIA_SET_SEARCH_TERM",Ei="LOCAL_MEDIA_SET_MEDIA_TYPE",yi="LOCAL_MEDIA_SET_MEDIA",_i="LOCAL_MEDIA_PREPEND_MEDIA",vi="LOCAL_MEDIA_REMOVE_AUDIO_PROCESSING",wi="LOCAL_MEDIA_ADD_AUDIO_PROCESSING",Ti="LOCAL_MEDIA_REMOVE_POSTER_PROCESSING",Si="LOCAL_MEDIA_ADD_POSTER_PROCESSING",Ci="LOCAL_MEDIA_TYPE_ALL";function Ii(e,t,n){const{selectedProvider:r,searchTerm:a}=t,{pageToken:o,isMediaLoading:i,isMediaLoaded:l,categories:{categories:s,selectedCategoryId:c}}=t[e],{fetchMediaStart:d,fetchMediaSuccess:p,fetchMediaError:m,fetchCategoriesStart:g,fetchCategoriesSuccess:f,fetchCategoriesError:h}=n;return function(e){let{provider:t,selectedProvider:n,searchTerm:r,selectedCategoryId:a,pageToken:o,isMediaLoading:i,isMediaLoaded:l,fetchMediaStart:s,fetchMediaSuccess:c,fetchMediaError:d}=e;const{actions:{listMedia:p}}=Uo(),{showSnackbar:m}=(0,jr.useSnackbar)(),g=(0,u.useRef)();(0,u.useEffect)((()=>{const e=g.current;g.current={pageToken:o,searchTerm:r,selectedCategoryId:a,isMediaLoading:i,isMediaLoaded:l};const u=e&&(o!==e.pageToken||r!==e.searchTerm||a!==e.selectedCategoryId),f=!e||!e.isMediaLoading&&!e.isMediaLoaded||u;t===n&&f&&async function(){s({provider:t,pageToken:o});try{const{media:e,nextPageToken:n}=await p({provider:wt[t].provider,filter:{contentType:wt[t].contentTypeFilter,searchTerm:a?null:r,categoryId:a},pageToken:o});c({provider:t,media:e,pageToken:o,nextPageToken:n})}catch(e){console.error(e),(0,P.trackError)("fetch_media3p",e.message),d({provider:t,pageToken:o}),m({message:wt[t].fetchMediaErrorMessage,dismissible:!0})}}()}),[n,o,r,a,t,p,d,s,c,m,g])}({provider:e,selectedProvider:r,pageToken:o,isMediaLoading:i,isMediaLoaded:l,searchTerm:a,selectedCategoryId:c,fetchMediaStart:d,fetchMediaSuccess:p,fetchMediaError:m}),function(e){let{provider:t,selectedProvider:n,categories:r,fetchCategoriesStart:a,fetchCategoriesSuccess:o,fetchCategoriesError:i}=e;const{actions:{listCategories:l}}=Uo(),{showSnackbar:s}=(0,jr.useSnackbar)();(0,u.useEffect)((()=>{t===n&&wt[t].supportsCategories&&!r?.length&&async function(){a({provider:t});try{const{categories:e}=await l({provider:wt[t].provider});o({provider:t,categories:e})}catch(e){i({provider:t}),s({message:wt[t].fetchCategoriesErrorMessage,dismissible:!0})}}()}),[s,n,r,t,l,a,o,i])}({provider:e,selectedProvider:r,categories:s,fetchCategoriesStart:g,fetchCategoriesSuccess:f,fetchCategoriesError:h}),{state:t[e],actions:{setNextPage:(0,u.useCallback)((()=>n.setNextPage({provider:e})),[n,e]),selectCategory:(0,u.useCallback)((t=>n.selectCategory({provider:e,categoryId:t})),[n,e]),deselectCategory:(0,u.useCallback)((()=>n.deselectCategory({provider:e})),[n,e])}}}function xi(e,t){const n={};for(const r of Object.keys(wt))n[r]=Ii(r,e,t);return n}const Ai="FETCH_MEDIA_START",ki="FETCH_MEDIA_SUCCESS",Oi="FETCH_MEDIA_ERROR",Pi="SET_NEXT_PAGE",Ni="UPDATE_MEDIA_ELEMENT",Ri="DELETE_MEDIA_ELEMENT",Mi={media:[],pageToken:void 0,nextPageToken:void 0,hasMore:!0,totalPages:1,isMediaLoading:!1,isMediaLoaded:!1,totalItems:0},Li={...Mi,audioProcessing:[],audioProcessed:[],posterProcessing:[],posterProcessed:[],mediaType:"",searchTerm:""};const Di=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mi,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(t){case Ai:return{...e,isMediaLoaded:!1,isMediaLoading:!0};case ki:{const{media:t,pageToken:r,nextPageToken:a,totalPages:o,totalItems:i}=n;return{...e,media:r?[...e.media,...t]:t,nextPageToken:a,totalPages:o,hasMore:Boolean(a),isMediaLoaded:!0,isMediaLoading:!1,totalItems:i}}case Oi:return{...e,isMediaLoaded:!0,isMediaLoading:!1};case Pi:return e.nextPageToken?{...e,pageToken:e.nextPageToken}:e;case Ni:{const{id:t,provider:r,data:a}=n,o=e.media.findIndex((e=>e.id===t));if(-1===o)return e;const i={...e.media[o],provider:r,...a},l=[...e.media.slice(0,o),i,...e.media.slice(o+1)];return{...e,media:l}}case Ri:{const{id:t}=n;return{...e,media:e.media.filter((e=>e.id!==t))}}default:return e}};const Bi=function(e,t){let{type:n,payload:r}=t;return"local"==r?.provider?Di(e,{type:n,payload:r}):e};const Fi=function(e,t){let{type:n,payload:r}=t;const{provider:a,mediaType:o,searchTerm:i}=r;return"local"===a&&o===e.mediaType&&i===e.searchTerm?Di(e,{type:n,payload:r}):e};const Hi=function(e,t){let{mediaType:n}=t;return n===e.mediaType?e:{...Li,media:e.media.filter((e=>{let{local:t}=e;return t})),audioProcessing:[...e.audioProcessing],audioProcessed:[...e.audioProcessed],posterProcessing:[...e.posterProcessing],posterProcessed:[...e.posterProcessed],searchTerm:e.searchTerm,mediaType:n}};const Ui=function(e,t){let{searchTerm:n}=t;return n===e.searchTerm?e:{...Li,audioProcessing:[...e.audioProcessing],audioProcessed:[...e.audioProcessed],posterProcessing:[...e.posterProcessing],posterProcessed:[...e.posterProcessed],mediaType:e.mediaType,searchTerm:n}};const ji=function(e){return{...Li,audioProcessing:[...e.audioProcessing],audioProcessed:[...e.audioProcessed],posterProcessing:[...e.posterProcessing],posterProcessed:[...e.posterProcessed]}};const zi=function(e,t){let{media:n}=t;return{...e,media:n}};const Gi=function(e,t){let{media:n}=t;return{...e,media:[...n,...e.media]}};const Yi=function(e,t){let{id:n}=t;return!n||e.posterProcessing.includes(n)?e:{...e,posterProcessing:[...e.posterProcessing,n]}};const Zi=function(e,t){let{id:n}=t;if(!n||!e.posterProcessing.includes(n))return e;const r=[...e.posterProcessing].filter((e=>e!==n));return{...e,posterProcessing:r,posterProcessed:[...e.posterProcessed,n]}};const Wi=function(e,t){let{id:n}=t;return!n||e.audioProcessing.includes(n)?e:{...e,audioProcessing:[...e.audioProcessing,n]}};const Vi=function(e,t){let{id:n}=t;if(!n||!e.audioProcessing.includes(n))return e;const r=[...e.audioProcessing].filter((e=>e!==n));return{...e,audioProcessing:r,audioProcessed:[...e.audioProcessed,n]}};const $i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Li,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(t){case ki:return Fi(e,{type:t,payload:n});case hi:return ji(e);case bi:return Ui(e,n);case Ei:return Hi(e,n);case yi:return zi(e,n);case _i:return Gi(e,n);case Si:return Yi(e,n);case Ti:return Zi(e,n);case wi:return Wi(e,n);case vi:return Vi(e,n);default:return Bi(e,{type:t,payload:n})}},qi="INITIAL_STATE",Ki="MEDIA3P_SET_SELECTED_PROVIDER",Xi="MEDIA3P_SET_SEARCH_TERM",Qi="FETCH_MEDIA_CATEGORIES_START",Ji="FETCH_MEDIA_CATEGORIES_SUCCESS",el="FETCH_MEDIA_CATEGORIES_ERROR",tl="SELECT_CATEGORY",nl="DESELECT_CATEGORY",rl={isLoading:!0,isLoaded:!1,categories:[],selectedCategoryId:void 0};const al=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rl,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(t){case Qi:return{...e,isLoading:!0,isLoaded:!1};case Ji:{const{categories:t}=n;return{...e,categories:t,isLoading:!1,isLoaded:!0}}case el:return{...e,isLoading:!1,isLoaded:!0};case tl:{const{categoryId:t}=n;return{...e,selectedCategoryId:t}}case nl:case Xi:return{...e,selectedCategoryId:void 0};default:return e}},ol={...Mi,categories:rl};const il=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ol,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(e={...Di(e,{type:t,payload:n}),categories:al(e.categories,{type:t,payload:n})},t){case Xi:return{...e,isMediaLoaded:!1,pageToken:void 0,nextPageToken:void 0};case tl:case nl:return{...e,pageToken:void 0,nextPageToken:void 0};default:return e}},ll={selectedProvider:void 0,searchTerm:""};function sl(e,t){let{type:n,payload:r}=t;const a={...e};for(const t of Object.keys(wt))n!==qi&&r?.provider&&t!==r?.provider||(a[t]=il(e[t],{type:n,payload:r}));return(0,u.shallowEqual)(a,e)?e:a}const cl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ll,{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;switch(e=sl(e,{type:t,payload:n}),t){case Ki:return{...e,selectedProvider:n.provider};case Xi:return{...e,searchTerm:n.searchTerm};default:return e}},dl=e=>t=>{let{provider:n,pageToken:r}=t;e({type:Ai,payload:{provider:n,pageToken:r}})},ul=e=>t=>{let{provider:n,media:r,nextPageToken:a,totalPages:o,...i}=t;e({type:ki,payload:{provider:n,media:r,nextPageToken:a,totalPages:o,...i}})},pl=e=>t=>{let{provider:n}=t;e({type:Oi,payload:{provider:n}})},ml=e=>t=>{let{provider:n}=t;e({type:Pi,payload:{provider:n}})},gl=e=>t=>{let{provider:n,id:r,data:a}=t;e({type:Ni,payload:{provider:n,id:r,data:a}})},fl=e=>t=>{let{provider:n,id:r}=t;e({type:Ri,payload:{provider:n,id:r}})},hl=e=>t=>dl(e)({...t,provider:"local"}),bl=e=>t=>ul(e)({...t,provider:"local"}),El=e=>t=>pl(e)({...t,provider:"local"}),yl=e=>t=>ml(e)({...t,provider:"local"}),_l=e=>t=>{let{id:n,data:r}=t;return gl(e)({provider:"local",id:n,data:r})},vl=e=>t=>fl(e)({...t,provider:"local"}),wl=e=>()=>{e({type:hi})},Tl=e=>t=>{let{searchTerm:n}=t;e({type:bi,payload:{searchTerm:n}})},Sl=e=>t=>{let{mediaType:n}=t;e({type:Ei,payload:{mediaType:n}})},Cl=e=>t=>{let{id:n}=t;e({type:wi,payload:{id:n}})},Il=e=>t=>{let{id:n}=t;e({type:vi,payload:{id:n}})},xl=e=>t=>{let{id:n}=t;e({type:Si,payload:{id:n}})},Al=e=>t=>{let{id:n}=t;e({type:Ti,payload:{id:n}})},kl=e=>t=>{let{media:n}=t;e({type:yi,payload:{media:n}})},Ol=e=>t=>{let{media:n}=t;e({type:_i,payload:{media:n}})},Pl=e=>t=>{let{provider:n}=t;e({type:Qi,payload:{provider:n}})},Nl=e=>t=>{let{provider:n,categories:r}=t;e({type:Ji,payload:{provider:n,categories:r}})},Rl=e=>t=>{let{provider:n}=t;e({type:el,payload:{provider:n}})},Ml=e=>t=>{let{provider:n,categoryId:r}=t;e({type:tl,payload:{provider:n,categoryId:r}})},Ll=e=>t=>{let{provider:n}=t;e({type:nl,payload:{provider:n}})},Dl=e=>t=>{let{provider:n}=t;e({type:Ki,payload:{provider:n}})},Bl=e=>t=>{let{searchTerm:n}=t;e({type:Xi,payload:{searchTerm:n}})};function Fl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,payload:n}=arguments.length>1?arguments[1]:void 0;return{local:$i(e.local,{type:t,payload:n}),media3p:cl(e.media3p,{type:t,payload:n})}}const Hl=(e,t)=>{if(e instanceof Function)return e(t);const n=e;return Object.keys(n).reduce(((e,r)=>({...e,[r]:Hl(n[r],t)})),{})};const Ul=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fl,t=arguments.length>1?arguments[1]:void 0;const n=(0,u.useMemo)((()=>({local:a,media3p:o})),[]);t=t??n;const r=(0,u.useMemo)((()=>e(void 0,{type:qi})),[e]),[i,l]=(0,u.useReducer)(e,r),s=(0,u.useMemo)((()=>Hl(t,l)),[t]);return{state:i,actions:s}},jl=(0,u.createContext)({local:{state:{},actions:{}},media3p:{state:{},actions:{}}});const zl=function MediaProvider(e){let{children:t}=e;const{state:n,actions:r}=Ul(),a=function(e,t){const{media:n,pageToken:r,mediaType:a,searchTerm:o}=e,{fetchMediaStart:i,fetchMediaSuccess:l,fetchMediaError:s,resetFilters:c,prependMedia:d,setMediaType:p,setSearchTerm:m,setNextPage:g,setAudioProcessing:f,removeAudioProcessing:h,setPosterProcessing:b,removePosterProcessing:E,updateMediaElement:y,deleteMediaElement:_}=t,{actions:{getMedia:v,updateMedia:w}}=W(),T=(0,u.useRef)(!1);(0,u.useEffect)((()=>(T.current=!0,()=>{T.current=!1})),[]);const S=(0,u.useCallback)((function(){let{searchTerm:e="",pageToken:t=1,mediaType:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(!v)return null;i({pageToken:t});const a=(0,P.getTimeTracker)("load_media");return v({mediaType:n===Ci?"":n,searchTerm:e,pagingNum:t}).then((a=>{let{data:o,headers:i}=a;if(!T.current)return;const l=parseInt(i.totalPages),s=parseInt(i.totalItems);r({media:o,mediaType:n,searchTerm:e,pageToken:t,nextPageToken:t<l?t+1:void 0,totalPages:l,totalItems:s})})).catch(s).finally((()=>{a()}))}),[s,i,v]),{uploadMedia:C,isUploading:I,isTranscoding:x,isNewResourceProcessing:A,isCurrentResourceProcessing:k,isNewResourceTranscoding:O,isNewResourceMuting:N,isElementTrimming:R,isCurrentResourceUploading:M,isCurrentResourceTranscoding:L,isCurrentResourceMuting:D,isCurrentResourceTrimming:B,canTranscodeResource:F}=ti({media:n,prependMedia:d,updateMediaElement:y,deleteMediaElement:_}),{uploadVideoFrame:H}=Ja({updateMediaElement:y}),{updateVideoIsMuted:j}=ni({updateMediaElement:y}),{updateBaseColor:z}=ci({updateMediaElement:y}),{updateBlurHash:G}=fi({updateMediaElement:y}),{allowedMimeTypes:{video:Y},capabilities:{hasUploadMediaAction:Z}}=U(),V=(0,u.useRef)();V.current=e;const $=(0,u.useCallback)((()=>{const{mediaType:e}=V.current;c();const t=!V.current.pageToken;e||V.current.searchTerm||!t||S({mediaType:e},l)}),[S,l,c]);(0,u.useEffect)((()=>{S({searchTerm:o,pageToken:r,mediaType:a},l)}),[S,l,a,r,o]);const q=(0,u.useCallback)(((e,t)=>{const{posterProcessed:n,posterProcessing:r}=V.current;(async()=>{n.includes(e)||r.includes(e)||(b({id:e}),await H(e,t),E({id:e}))})()}),[b,H,E]),K=(0,u.useCallback)(((e,t)=>{const{audioProcessed:n,audioProcessing:r}=V.current;(async()=>{n.includes(e)||r.includes(e)||(f({id:e}),await j(e,t),h({id:e}))})()}),[f,j,h]),X=(0,u.useCallback)((e=>{if(!e)return;const{type:t,isMuted:n,baseColor:r,src:a,id:o,posterId:i,mimeType:l,poster:s,blurHash:c}=e;if(!F(e))return;Z&&(!Y.includes(l)&&"gif"!==t||i||q(o,a),Y.includes(l)&&null===n&&K(o,a));const d="image"===t?(0,Vo.default)(0,e):s;d&&!r&&z(e),d&&!c&&G(e)}),[F,Y,z,G,K,q,Z]),{optimizeVideo:Q,optimizeGif:J,muteExistingVideo:ee,trimExistingVideo:te}=Xo({postProcessingResource:X,uploadMedia:C,updateMedia:w,deleteMediaElement:_});(0,u.useEffect)((()=>{n?.forEach((e=>X(e)))}),[n,a,o,X]);const ne=Boolean(V.current?.posterProcessing?.length);return{state:{...e,isUploading:I||ne,isTranscoding:x,isNewResourceProcessing:A,isCurrentResourceProcessing:k,isNewResourceTranscoding:O,isNewResourceMuting:N,isElementTrimming:R,isCurrentResourceUploading:M,isCurrentResourceTranscoding:L,isCurrentResourceMuting:D,isCurrentResourceTrimming:B,canTranscodeResource:F},actions:{setNextPage:g,setMediaType:p,setSearchTerm:m,resetFilters:c,uploadMedia:C,resetWithFetch:$,uploadVideoPoster:q,postProcessingResource:X,deleteMediaElement:_,updateMediaElement:y,optimizeVideo:Q,optimizeGif:J,muteExistingVideo:ee,trimExistingVideo:te,updateBaseColor:z,updateBlurHash:G}}}(n.local,r.local);var o,i;const l={local:a,media3p:(o=n.media3p,i=r.media3p,{state:{selectedProvider:o.selectedProvider,searchTerm:o.searchTerm},actions:{setSelectedProvider:i.setSelectedProvider,setSearchTerm:i.setSearchTerm},...xi(o,i)})};return c.createElement(jl.Provider,{value:l},t)};const Gl=function(e){return(0,u.useContextSelector)(jl,e??u.identity)};const Yl=function(e){return Gl((t=>{let{local:n}=t;return(e??u.identity)(n)}))},Zl=(0,u.createContext)({state:{},actions:{}});function Wl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(((e,t)=>{let[n,r]=t;return e[n]=r,e}),{})}function Vl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).reduce(((e,t)=>{let[n,r]=t;return e[n]={...r,...e[n]},e}),{...t})}function $l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce(((e,n)=>(e[n[t]]=n,e)),{})}function ql(){return ql=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ql.apply(this,arguments)}const Kl=function TaxonomyProvider(e){const[t,n]=(0,u.useState)([]),[r,a]=(0,u.useState)({}),[o,i]=(0,u.useState)(!0),{actions:{clearHistory:l}}=Br(),{updateStory:s,isStoryLoaded:d,terms:p,hasTaxonomies:m}=Qa((e=>{let{state:{pages:t,story:n},actions:{updateStory:r}}=e;return{updateStory:r,isStoryLoaded:t.length>0,terms:n.terms,hasTaxonomies:n?.taxonomies?.length>0}})),{getTaxonomyTerm:g,createTaxonomyTerm:f,getTaxonomies:h}=W((e=>{let{actions:t}=e;return t}));(0,u.useEffect)((()=>{m&&async function(){try{const e=await h();n(e)}catch(e){console.error(e.message)}}()}),[m,h]);const b=(0,u.useRef)(!1);(0,u.useEffect)((()=>{if(t.length>0&&d&&!b.current){const e=$l(t,"slug"),n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return Wl(Object.entries(e).map((e=>{let[n,r]=e;return[t(n),r]})))}(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>((t||[]).forEach((t=>{e[t.taxonomy]=e[t.taxonomy]||{},e[t.taxonomy][t.slug]=t})),e)),{})}(p),(t=>e[t]?.restBase)),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return Wl(Object.entries(e).map((e=>{let[n,r]=e;return[n,t(r)]})))}(n,(e=>Object.values(e).map((e=>e.id))));a(n),l(),s({properties:{terms:r}}),b.current=!0}}),[p,d,t,a,l,s]);const E=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];s({properties:n=>{const r="function"==typeof t?t(n.terms[e.restBase]):t;return{...n,terms:{...n.terms,[e.restBase]:r}}}})}),[s]),y=(0,u.useCallback)(((e,t)=>{E(e,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.includes(t.id)?e:[...e,t.id]}))}),[E]),_=(0,u.useCallback)((async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];const o=e?.restPath;if(!o)return[];try{r=await g(o,t)}catch(e){console.error(e.message)}if(r.length<1)return r;const i={[e.restBase]:$l(r,"slug")};if(a((e=>Vl(e,i))),n&&t.search){const n=Go(t.search),a=r.find((e=>e.slug===n));a&&y(e,a)}return r}),[g,y]),v=(0,u.useCallback)((async function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i={name:t};n?.id&&(i.parent=n.id,i.slug=`${n.slug}-${Go(i.name)}`);const l=i?.slug||Go(t),s=r[e.restBase]?.[l];if(s)return void(o&&y(e,s));const c=e?.restPath;if(c)try{const t=await f(c,i),n={[e.restBase]:{[t.slug]:t}};a((e=>Vl(e,n))),o&&y(e,t)}catch(n){"term_exists"===n.code&&_(e,{search:t},o)}}),[f,r,_,y]);(0,u.useEffect)((()=>{if(o&&t?.length){t.filter((e=>e.hierarchical)).forEach((e=>_(e,{per_page:-1}))),i(!1)}}),[_,o,t]);const w=(0,u.useMemo)((()=>({state:{taxonomies:t,termCache:r,terms:Array.isArray(p)?{}:p},actions:{createTerm:v,addSearchResultsToCache:_,setTerms:E,addTermToSelection:y}})),[r,p,t,v,_,E,y]);return c.createElement(Zl.Provider,ql({},e,{value:w}))};const Xl=function(e){return(0,u.useContextSelector)(Zl,e??u.identity)};var Ql=n(95123);const Jl=[1,0];function es(e){return"number"==typeof e}const ts=function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const{updateForResizeEvent:i,defaultAttributes:l}=(0,Mn.getDefinitionForType)(e);if(es(t)||(t=es(n)?n*a:o?Math.min(o.width*ee.DEFAULT_DPR,.8*ee.PAGE_WIDTH):ee.PAGE_WIDTH/2),!es(n)&&i&&(n=i({...l,...r},Jl,t).height),es(n)||(n=t/a),t>ee.PAGE_WIDTH||n>ee.PAGE_HEIGHT){const e=t/n;e<=ee.PAGE_WIDTH/ee.PAGE_HEIGHT?n=(t=Math.min(t,ee.PAGE_WIDTH))/e:t=(n=Math.min(n,ee.PAGE_HEIGHT))*e}return{width:t=(0,aa.dataPixels)(t),height:n=(0,aa.dataPixels)(n)}};function ns(e){return"number"==typeof e}const rs=function(e,t){let{resource:n,x:r,y:a,width:o,height:i,mask:l,rotationAngle:s=0,scale:c=100,focalX:d=50,focalY:u=50,sticker:p,...m}=t;const{isMaskable:g}=(0,Mn.getDefinitionForType)(e),f={type:e,...m},h=p&&Ql.default?.[p?.type]?.aspectRatio,b=n&&ns(n.width)&&ns(n.height)?n.width/n.height:1,E=ts(e,o,i,f,h||b,n);return o=E.width,i=E.height,ns(r)||(r=48),ns(a)||(a=0),r=(0,aa.dataPixels)(r),a=(0,aa.dataPixels)(a),{...f,resource:n,x:r,y:a,width:o,height:i,rotationAngle:s,scale:c,focalX:d,focalY:u,...g?{mask:l||$n.DEFAULT_MASK}:{},...p?{sticker:p}:{}}},as=(0,u.createContext)({state:{},actions:{}}),os=Mn.MEDIA_ELEMENT_TYPES,is=Mn.MEDIA_ELEMENT_TYPES.concat(Mn.ELEMENT_TYPES.SHAPE),ls=e=>os.includes(e),ss=e=>is.includes(e);const cs=function DropTargetsProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)(null),[a,o]=(0,u.useState)({}),[i,l]=(0,u.useState)(null),{actions:{pushTransform:s}}=(0,I.useTransform)(),{currentPage:d,combineElements:p}=Qa((e=>{let{state:{currentPage:t},actions:{combineElements:n}}=e;return{currentPage:t,combineElements:n}})),m=(0,u.useMemo)((()=>d?.elements||[]),[d?.elements]),g=(0,u.useMemo)((()=>m.filter((e=>{let{id:t}=e;return t in a})).map((e=>{let{id:t}=e;return t})).reverse()),[a,m]),f=(0,u.useCallback)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=document.elementsFromPoint(e,t);return g.find((e=>r.includes(a[e])&&e!==n))||null}),[g,a]),h=(0,u.useCallback)(((e,t)=>{o((n=>({...n,[e]:t})))}),[]),b=(0,u.useCallback)((e=>{o((t=>{const{[e]:n,...r}=t;return r}))}),[]),E=(0,u.useCallback)((function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!ls(e?.type))return;const a=rs(e.type,{resource:e}),o=m.find((e=>{let{id:t}=e;return t===r})),c=o?.scale??a.scale,d=o?.focalX??a.focalX,u=o?.focalY??a.focalY,p=o?.flip??a.flip,g=f(t,n,r);g&&g!==i?(s(g,{dropTargets:{active:!0,replacement:{resource:e,scale:c,focalX:d,focalY:u,flip:p}}}),r&&s(r,{dropTargets:{hover:!0}})):g||r&&s(r,{dropTargets:{hover:!1}}),l(g),m.filter((e=>{let{id:t}=e;return t!==g})).forEach((e=>s(e.id,{dropTargets:{active:!1,replacement:null}})))}),[i,m,f,s]),y=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!ls(e?.type))return;if(!i||i===t)return void Object.keys(a).filter((e=>e!==t)).map((e=>s(e,null)));const n={secondId:i},r=m.find((e=>{let{id:n}=e;return n===t}));n.firstElement=r||rs(e.type,{resource:e}),p(n),m.filter((e=>{let{id:n}=e;return a[n]&&n!==t})).forEach((e=>{s(e.id,{dropTargets:{active:!1,replacement:null}}),s(e.id,null)})),l(null);const{onDropHandler:o}=(0,Mn.getDefinitionForType)(e.type);o&&e.src&&!e.isPlaceholder&&o(i)}),[i,p,m,a,s]),_=(0,Ir.useGlobalIsKeyPressed)("mod"),v={state:{dropTargets:a,activeDropTargetId:i,draggingResource:n,isDropTargetingDisabled:_},actions:{registerDropTarget:_?Bt:h,unregisterDropTarget:b,isDropSource:_?()=>!1:ls,isDropTarget:_?()=>!1:ss,handleDrag:_?Bt:E,handleDrop:_?Bt:y,setDraggingResource:_?Bt:r}};return c.createElement(as.Provider,{value:v},t)};const ds=function(e,t){return(0,u.useContextSelector)(as,e??u.identity,t)};var us=n(93991);const ps=function UnitsProvider(e){let{pageSize:t,children:n}=e;const{width:r,height:a}=t,o=(0,u.useMemo)((()=>({state:{pageSize:{width:r,height:a}},actions:{dataToEditorX:e=>(0,aa.dataToEditorX)(e,r),dataToEditorY:e=>(0,aa.dataToEditorY)(e,a),editorToDataX:(e,t)=>(0,aa.editorToDataX)(e,r,t),editorToDataY:(e,t)=>(0,aa.editorToDataY)(e,a,t),getBox:e=>(0,aa.getBox)(e,r,a),getBoxWithBorder:e=>(0,aa.getBoxWithBorder)(e,r,a)}})),[r,a]);return c.createElement(us.default.Provider,{value:o},n)},ms=(0,u.createContext)({actions:{setZoomSetting:()=>{}},state:{}});const gs=function(e){return(0,u.useContextSelector)(ms,e??u.identity)},fs=72,hs={zoomSetting:Ie.FIT,zoomLevel:null,workspaceSize:{width:null,height:null,availableHeight:null},scrollOffset:{left:0,top:0}},bs={setZoomSetting:(e,t)=>{let{payload:n}=t;return{...e,zoomSetting:n,scrollOffset:{left:0,top:0}}},setZoomLevel:(e,t)=>{let{payload:n}=t;return{...e,zoomLevel:n,zoomSetting:Ie.FIXED}},setScrollOffset:(e,t)=>{let{payload:n}=t;return{...e,scrollOffset:n}},setWorkspaceSize:(e,t)=>{let{payload:n}=t;return{...e,workspaceSize:n}}};const Es=function(){const[e,t]=(0,u.useReduction)(hs,bs),{zoomSetting:n,zoomLevel:r,workspaceSize:a,scrollOffset:o}=e,i=(0,u.useMemo)((()=>function(e,t,n){let r;const a=e.width/e.availableHeight;switch(t){case Ie.FILL:r=a>ee.FULLBLEED_RATIO?e.width-A.SCROLLBAR_WIDTH-fs:(e.availableHeight-A.SCROLLBAR_WIDTH)*ee.FULLBLEED_RATIO-fs;break;case Ie.FIT:{const t=e.width-144;r=a>ee.FULLBLEED_RATIO?Math.min(t,(e.availableHeight-fs)*ee.FULLBLEED_RATIO):t;break}default:if(isNaN(n))break;r=n*ee.PAGE_WIDTH}r=Math.max(0,r);const o=ke*Math.floor(r/ke),i=o/ee.PAGE_RATIO,l=o/ee.FULLBLEED_RATIO,s=o>=e.width-fs-24,c=i>=e.availableHeight-fs-24,d=s||c,u=!d&&o<e.width-200,p=d?fs:12,m=d?e.width:o+p,g=d?e.availableHeight:l+p,f=(e.width-(o+200))/2,h=Math.round(.9*o),b=!d&&u&&f>50;return{pageWidth:o,pageHeight:i,hasHorizontalOverflow:s,hasVerticalOverflow:c,hasPageNavigation:u,pagePadding:p,viewportWidth:m,viewportHeight:g,hasExtraPages:b,extraPageWidth:h,extraPageCount:b?Math.min(4,Math.ceil(f/h)):0}}(a,n,r)),[a,n,r]),{pageWidth:l}=i,s=(0,u.useMemo)((()=>{const e=Math.ceil(l/ke*ke);switch(n){case Ie.FILL:case Ie.FIT:return e/ee.PAGE_WIDTH;default:return r}}),[r,l,n]);return{state:{...i,zoomSetting:n,zoomLevel:s,workspaceWidth:a.width,workspaceHeight:a.height,scrollLeft:o.left,scrollTop:o.top},actions:t}},ys=[xe.OPENING,xe.CLOSING],_s={openCarousel:e=>e===xe.CLOSED?xe.OPENING:e,closeCarousel:e=>e===xe.OPEN?xe.CLOSING:e,completeTransition:e=>({[xe.OPENING]:xe.OPEN,[xe.CLOSING]:xe.CLOSED}[e]||e)};const vs=function(){const[e,t]=(0,u.useReduction)(xe.OPEN,_s),n=ys.includes(e),{openCarousel:r,closeCarousel:a,completeTransition:o}=t;return(0,u.useEffect)((()=>{if(!n)return;const e=setTimeout(o,Ae);return()=>clearTimeout(e)}),[n,o]),{state:{carouselState:e,isCarouselInTransition:n},actions:{openCarousel:r,closeCarousel:a}}};const ws=function LayoutProvider(e){let{children:t}=e;const n=Es(),r=vs(),a={state:{...n.state,...r.state},actions:{...n.actions,...r.actions}};return c.createElement(ms.Provider,{value:a},t)};const utils_nativeCopyPasteExpected=function(){const{activeElement:e}=document,{tagName:t,type:n,contentEditable:r}=e;if("true"===r||"textarea"===t.toLowerCase()||"input"===t.toLowerCase()&&["text","number","search","email","tel","url"].includes(n))return!0;const a=window.getSelection(),o=a.rangeCount?a.getRangeAt(0):null;return Boolean(o&&!o.collapsed)};const Ts=function(e,t){(0,u.useEffect)((()=>{const n=t=>{const{clipboardData:n}=t;utils_nativeCopyPasteExpected()||n?.types?.length||e(t)},r=e=>{utils_nativeCopyPasteExpected()||t(e)};return document.addEventListener("copy",n),document.addEventListener("cut",n),document.addEventListener("paste",r),()=>{document.removeEventListener("copy",n),document.removeEventListener("cut",n),document.removeEventListener("paste",r)}}),[e,t])};const Ss=function(e,t){if(!t){const t=function(e){const t=[0],n=(0,d.__)("Group","web-stories");for(const r in e){if(!Object.prototype.hasOwnProperty.call(e[r],"name"))continue;const a=e[r]?.name.split(" ");a[0]===n&&a[1]&&t.push(Number(a[1]))}return Math.max(...t)+1}(e);return(0,$e.default)(
/* translators: %d: group number. */
(0,d.__)("Group %d","web-stories"),t)}return(0,$e.default)(
/* translators: %s: name of layer. */
(0,d.__)("%s Copy","web-stories"),t)},Cs="_DOUBLEDASH_";const Is=function(){const{updateElementsByResourceId:e}=Qa((e=>({updateElementsByResourceId:e.actions.updateElementsByResourceId})));return{updateElementDimensions:(0,u.useCallback)((t=>{let{id:n,resource:r}=t;e({id:n,properties:e=>e.resource.width!==r.width||e.resource.height!==r.height?{resource:r,type:r.type,width:r.width,height:r.height,x:ee.PAGE_WIDTH/2-r.width/2,y:ee.PAGE_HEIGHT/2-r.height/2}:{type:r.type,resource:r}})}),[e])}};const xs=function(){const e=(0,u.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];setTimeout((()=>{const t=window.document;e&&t.activeElement&&t.activeElement!==t.body&&t.activeElement.blur();const n=new window.FocusEvent("focusout");t.dispatchEvent(n)}))}),[]);return e};function As(e,t){return(0,Mn.createNewElement)(e,rs(e,t))}const ks=function(){const{addElement:e,combineElements:t,backgroundElementId:n}=Qa((e=>{let{state:t,actions:n}=e;return{addElement:n.addElement,combineElements:n.combineElements,backgroundElementId:t.currentPage?.elements?.[0]?.id}})),{setZoomSetting:r}=gs((e=>{let{actions:{setZoomSetting:t}}=e;return{setZoomSetting:t}})),a=xs(),o=(0,u.useCallback)((function(o,i){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r(Ie.FIT);const s=As(o,i),{id:c,resource:d}=s;e({element:s}),l&&t({firstElement:s,secondId:n});const u=l?n:c;return"video"===o&&d?.src&&!d.isPlaceholder&&setTimeout((()=>{const e=document.getElementById(`video-${u}`);e&&e.play().catch((()=>{}))})),a(),s}),[e,n,t,a,r]);return o};const Os=function(){const{uploadMedia:e,postProcessingResource:t}=Yl((e=>{let{actions:{uploadMedia:t,postProcessingResource:n}}=e;return{uploadMedia:t,postProcessingResource:n}})),n=ks(),{updateElementDimensions:r}=Is(),{deleteElementsByResourceId:a}=Qa((e=>({deleteElementsByResourceId:e.actions.deleteElementsByResourceId}))),o=(0,u.useCallback)((e=>{let{id:t,resource:n}=e;r({id:t,resource:n})}),[r]),i=(0,u.useCallback)((e=>{let{id:n,resource:a}=e;r({id:n,resource:a}),n===a.id&&t(a)}),[r,t]),l=(0,u.useCallback)((e=>{let{id:t}=e;a({id:t})}),[a]),s=(0,u.useCallback)((function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e=>{let{resource:t}=e;n(t.type,{resource:t},r)};e(t,{onUploadStart:s,onUploadProgress:o,onUploadError:l,onUploadSuccess:i,...a})}),[e,o,l,i,n]);return s},Ps=186,Ns=145,Rs=120,Ms=200,Ls=70,Ds=56,Bs=40,Fs={locked:!0,topLeft:2,topRight:2,bottomRight:2,bottomLeft:2},Hs={locked:!0,hasHiddenPadding:!1,horizontal:0,vertical:0},Us="left",js={content:(0,d._x)("Fill in some text","text preset content","web-stories"),fontSize:(0,aa.dataFontEm)(1.33),lineHeight:1.2,x:Bs,y:(ee.PAGE_HEIGHT-(0,aa.dataFontEm)(1.33))/2,font:Mn.TEXT_ELEMENT_DEFAULT_FONT,width:Ms,borderRadius:Fs,backgroundTextMode:Mn.BACKGROUND_TEXT_MODE.NONE,padding:Hs,textAlign:Us},zs=[{title:(0,d._x)("Title 1","text preset title","web-stories"),element:{content:`<span style="font-weight: ${De}">${(0,d._x)("Title 1","text preset content","web-stories")}</span>`,fontSize:(0,aa.dataFontEm)(2.667),lineHeight:1.19,x:Bs,y:(ee.PAGE_HEIGHT-(0,aa.dataFontEm)(2.667))/2,font:Mn.TEXT_ELEMENT_DEFAULT_FONT,width:Ps,borderRadius:Fs,backgroundTextMode:Mn.BACKGROUND_TEXT_MODE.NONE,padding:Hs,textAlign:Us}},{title:(0,d._x)("Title 2","text preset title","web-stories"),element:{content:`<span style="font-weight: ${De}">${(0,d._x)("Title 2","text preset content","web-stories")}</span>`,fontSize:(0,aa.dataFontEm)(2),lineHeight:1.2,x:Bs,y:(ee.PAGE_HEIGHT-(0,aa.dataFontEm)(2))/2,font:Mn.TEXT_ELEMENT_DEFAULT_FONT,width:Ns,borderRadius:Fs,backgroundTextMode:Mn.BACKGROUND_TEXT_MODE.NONE,padding:Hs,textAlign:Us}},{title:(0,d._x)("Title 3","text preset title","web-stories"),element:{content:`<span style="font-weight: ${De}">${(0,d._x)("Title 3","text preset content","web-stories")}</span>`,fontSize:(0,aa.dataFontEm)(1.6),lineHeight:1.2,x:Bs,y:(ee.PAGE_HEIGHT-(0,aa.dataFontEm)(1.6))/2,font:Mn.TEXT_ELEMENT_DEFAULT_FONT,width:Rs,borderRadius:Fs,backgroundTextMode:Mn.BACKGROUND_TEXT_MODE.NONE,padding:Hs,textAlign:Us}},{title:(0,d._x)("Paragraph","text preset title","web-stories"),element:js},{title:(0,d._x)("Caption","text preset title","web-stories"),element:{content:`<span style="font-weight: ${Le}">${(0,d._x)("Caption","text preset content","web-stories")}</span>`,fontSize:(0,aa.dataFontEm)(1),lineHeight:1.2,x:Bs,y:(ee.PAGE_HEIGHT-(0,aa.dataFontEm)(1))/2,font:Mn.TEXT_ELEMENT_DEFAULT_FONT,width:Ls,borderRadius:Fs,backgroundTextMode:Mn.BACKGROUND_TEXT_MODE.NONE,padding:Hs,textAlign:Us}},{title:(0,d._x)("Label","text preset title","web-stories").toUpperCase(),element:{content:(0,d._x)("Label","text preset content","web-stories").toUpperCase(),fontSize:(0,aa.dataFontEm)(.888),lineHeight:1.2,x:Bs,y:(ee.PAGE_HEIGHT-(0,aa.dataFontEm)(.888))/2,font:Mn.TEXT_ELEMENT_DEFAULT_FONT,width:Ds,borderRadius:Fs,backgroundTextMode:Mn.BACKGROUND_TEXT_MODE.NONE,padding:Hs,textAlign:Us}}];const Gs=function(){const{currentPage:e,addElements:t,addGroup:n,updateCurrentPageProperties:r,deleteElementById:a,combineElements:o,addAnimations:i}=Qa((e=>{let{state:{currentPage:t},actions:{addElements:n,addGroup:r,deleteSelectedElements:a,updateCurrentPageProperties:o,deleteElementById:i,combineElements:l,addAnimations:s}}=e;return{currentPage:t,addElements:n,addGroup:r,deleteSelectedElements:a,updateCurrentPageProperties:o,deleteElementById:i,combineElements:l,addAnimations:s}})),l=(0,u.useBatchingCallback)((function(l){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0===l.length)return!1;const d=l.find((e=>{let{isBackground:t}=e;return t}));let u=s;if(d){const t=e.elements[0];d.isDefaultBackground?(t.isDefaultBackground||a({elementId:t.id}),r({properties:{backgroundColor:d.backgroundColor}})):(u=s.map((e=>e.targets.includes(d.id)?{...e,targets:[t.id]}:e)),o({firstElement:d,secondId:t.id,shouldRetainAnimations:!1}))}const p=l.filter((e=>{let{isBackground:t}=e;return!t})),m=Object.entries(c),g=m.map((e=>{let[t,n]=e;return[[t,(0,pe.default)()],n]})),f=p.map((e=>{if(!e.groupId)return e;const t=g.find((t=>{let[[n]]=t;return n===e.groupId})),[[,n]]=t;return{...e,groupId:n}}));if(f.length&&t({elements:f}),g.length)for(const e of g){const[[,t],r]=e;n({groupId:t,name:r.name})}return i({animations:u}),!0}),[t,n,e,r,o,a,i]);return l};const Ys=function(){const e=Gs(),{currentPage:t,selectedElements:n,deleteSelectedElements:r,selectedElementAnimations:a,selectedElementsGroups:o,currentPageProductIds:i}=Qa((e=>{let{state:{currentPage:t,selectedElements:n,selectedElementAnimations:r},actions:{deleteSelectedElements:a}}=e;const o=n.map((e=>e.groupId)).filter(Boolean),i=Object.entries(t?.groups||{}).filter((e=>{let[t]=e;return o.includes(t)}));return{currentPage:t,selectedElements:n,deleteSelectedElements:a,selectedElementAnimations:r,selectedElementsGroups:Object.fromEntries(i),currentPageProductIds:t?.elements?.filter((e=>{let{type:t}=e;return t===Mn.ELEMENT_TYPES.PRODUCT})).map((e=>{let{product:t}=e;return t?.productId}))}})),l=(0,jr.useSnackbar)((e=>{let{showSnackbar:t}=e;return t})),s=Os(),p=ks(),m=(0,Kr.usePasteTextContent)(p,js),g=(0,u.useCallback)((e=>{const{type:i}=e;0!==n.length&&(!function(e,t,n,r,a){if(!t.length||!a)return;const{clipboardData:o}=a,i={sentinel:"story-elements",items:t.map((t=>({...t,...t.isDefaultBackground?{backgroundColor:e.backgroundColor}:null,basedOn:t.id,id:void 0}))),animations:n,groups:r},l=JSON.stringify(i).replace(/--/g,Cs),s=t.map((e=>{const{type:t}=e,{TextContent:n}=(0,Mn.getDefinitionForType)(t);return n?n(e):t})).join("\n"),d=t.map((e=>{const{type:t,x:n,y:r,rotationAngle:a}=e,{Output:o}=(0,Mn.getDefinitionForType)(t);return(0,u.renderToStaticMarkup)(c.createElement(o,{element:e,box:{width:100,height:100,x:n,y:r,rotationAngle:a}}))})).join("\n");o.setData("text/plain",s),o.setData("text/html",`\x3c!-- ${l} --\x3e${d}`)}(t,n,a,o,e),"cut"===i&&r(),e.preventDefault())}),[t,r,n,a,o]),f=(0,u.useBatchingCallback)((n=>{const{elements:r,animations:a,groups:o}=function(e,t){let n={animations:[],elements:[]};for(let r=e.firstChild;r;r=r.nextSibling){if(8!==r.nodeType||-1!==r.nodeValue?.indexOf("Fragment"))continue;const e=JSON.parse(r.nodeValue.replace(new RegExp(Cs,"g"),"--"));if("story-elements"!==e.sentinel)continue;const a=e.items.reduce(((n,r)=>{let{elements:a,animations:o}=n;const{element:i,elementAnimations:l}=(0,Mn.duplicateElement)({element:{...r,id:r.basedOn},animations:e.animations,existingElements:t.elements});return{elements:[...a,i],animations:[...o,...l]}}),{animations:[],elements:[]}),o={...e.groups};for(const e of Object.keys(o))o[e].name=Ss(o,o[e].name);return n={animations:[...n.animations,...a.animations],elements:[...n.elements,...a.elements],groups:o},n}return n}(n,t),s=r.filter((e=>{let{type:t,product:n}=e;return t===Mn.ELEMENT_TYPES.PRODUCT&&n?.productId})).map((e=>{let{product:t}=e;return t}));return i.length>=6||s.length+i.length>6?l({message:(0,$e.default)(
/* translators: %d: max number of products. */
(0,d._n)("Only %d item can be added per page.","Only %d items can be added per page.",6,"web-stories"),6)}):s.forEach((e=>{let{productId:t,productTitle:n,productImages:r}=e;i.includes(t)&&l({message:(0,$e.default)(
/* translators: %s: product title. */
(0,d.__)('Product "%s" already exists on the page.',"web-stories"),n),thumbnail:r?.[0]?.url&&{src:r[0].url,alt:r[0].alt}})})),e(r,a,o)}),[e,t,l,i]),h=(0,u.useCallback)((e=>{const{clipboardData:t}=e;try{const n=!t.files?.length&&(t.getData("text/html")||t.getData("text/plain"));if(n){const t=document.createElement("template");t.innerHTML=n.replace(/<meta[^>]+>/g,"").replace(/<\/?html>/g,"").replace(/<\/?body>/g,"");let r=f(t.content);r||(r=m(t.innerHTML)),r&&e.preventDefault()}const{items:r}=t,a=[];for(let e=0;e<r.length;e++){const t=r[e].getAsFile();t&&a.push(t)}a.length>0&&s(a)}catch(e){}}),[f,m,s]);Ts(g,h)};function Zs(e,t){let{editingElement:n,editingElementState:r={}}=t;return{...e,editingElement:n,editingElementState:r}}const Ws=function(){const[e,t]=(0,u.useReducer)(Zs,{editingElement:null,editingElementState:{}}),[n,r]=(0,u.useState)({}),a=(0,u.useCallback)((()=>{t({editingElement:null})}),[]),o=(0,u.useCallback)((e=>{t({editingElement:e})}),[]),i=(0,u.useCallback)(((e,n)=>{t({editingElement:e,editingElementState:n})}),[]),l=(0,u.useCallback)(((e,t)=>r((n=>({...n,[e]:t})))),[r]),s=(0,u.useRef)(null);s.current=n;const c=(0,u.useCallback)((e=>s.current[e]),[]),{editingElement:d,editingElementState:p}=e;return(0,u.useMemo)((()=>({nodesById:n,editingElement:d,editingElementState:p,setEditingElementWithState:i,setEditingElementWithoutState:o,clearEditing:a,getNodeForElement:c,setNodeForElement:l})),[n,d,p,i,o,a,c,l])},Vs=(0,u.createContext)({actions:{},state:{}}),$s="canvasContainer",qs="pageContainer";const Ks=function CanvasProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)({}),[a,o]=(0,u.useState)(null),i=(0,u.useRef)(null),[l,s]=(0,u.useState)(null),[d,p]=(0,u.useState)(null),[m,g]=(0,u.useState)(null),[f,h]=(0,u.useState)(null),[b,E]=(0,u.useState)(null),[y,_]=(0,u.useState)(!1),[v,w]=(0,u.useState)(null),[T,S]=(0,u.useState)(null),[C,I]=(0,u.useState)(null),[x,A]=(0,u.useState)(null),[k,O]=(0,u.useState)(null),P=(0,u.useMemo)((()=>new window.IntersectionObserver((e=>{for(const t of e){if(!t.target.dataset.rectObservationKey)return;r((e=>({...e,[t.target.dataset.rectObservationKey]:t.boundingClientRect})))}}))),[]);(0,u.useEffect)((()=>()=>P.disconnect()),[P]);const N=gs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),{nodesById:R,editingElement:M,editingElementState:L,setEditingElementWithState:D,setEditingElementWithoutState:B,clearEditing:F,getNodeForElement:H,setNodeForElement:U}=Ws(),{backgroundElementId:j,selectedElementIds:z,toggleElementInSelection:G,setSelectedElementsById:Y}=Qa((e=>{let{state:{currentPage:t,selectedElementIds:n},actions:{toggleElementInSelection:r,setSelectedElementsById:a}}=e;return{backgroundElementId:(t?.elements||[])[0]?.id,selectedElementIds:n,toggleElementInSelection:r,setSelectedElementsById:a}})),Z=(0,u.useCallback)(((e,t)=>{M&&M!==e&&F(),i.current===e&&"focus"===t.type||(i.current=e,t.shiftKey?G({elementId:e,withLinked:!t.altKey}):Y({elementIds:[e],withLinked:!t.altKey}),t.currentTarget.focus({preventScroll:!0}),j!==e&&t.stopPropagation(),"mousedown"===t.type&&(o(t),t.target.ownerDocument.addEventListener("mouseup",(()=>window.setTimeout(o,0,null)),{once:!0,capture:!0})))}),[M,j,F,G,Y]);(0,u.useEffect)((()=>{!M||1===z.length&&z[0]===M||F(),i.current&&!z.includes(i.current)&&(i.current=null)}),[M,z,F]),Ys();const[W,V]=(0,u.useState)(null),$=(0,u.useMemo)((()=>({state:{pageContainer:d,canvasContainer:l,fullbleedContainer:m,nodesById:R,editingElement:M,editingElementState:L,isEditing:Boolean(M),lastSelectionEvent:a,displayLinkGuidelines:y,pageAttachmentContainer:b,designSpaceGuideline:f,isEyedropperActive:C,eyedropperCallback:x,eyedropperImg:v,eyedropperPixelData:T,boundingBoxes:n,clientRectObserver:P,onMoveableMount:W,renamableLayer:k},actions:{setPageContainer:p,setFullbleedContainer:g,getNodeForElement:H,setNodeForElement:U,setEditingElement:B,setEditingElementWithState:D,clearEditing:F,handleSelectElement:Z,setDisplayLinkGuidelines:_,setPageAttachmentContainer:E,setCanvasContainer:s,setDesignSpaceGuideline:h,setIsEyedropperActive:I,setEyedropperCallback:A,setEyedropperImg:w,setEyedropperPixelData:S,setMoveableMount:V,setRenamableLayer:O}})),[d,l,m,R,M,L,a,y,b,f,C,x,v,T,n,P,k,H,U,B,D,F,Z,W,V,O]);return c.createElement(Vs.Provider,{value:$},c.createElement(ps,{pageSize:N},t))};const Xs=function(e){return(0,u.useContextSelector)(Vs,e??u.identity)};function Qs(e){const t=(0,u.useContextSelector)(Vs,(e=>{let{state:t}=e;return t.clientRectObserver})),n=(0,u.useRef)(null);return(0,u.useCallback)((r=>{n.current&&t.unobserve?.(n.current),r&&(r.dataset.rectObservationKey=e,t.observe(r)),n.current=r}),[t,e])}function Js(e){return(0,u.useContextSelector)(Vs,(t=>{let{state:n}=t;return n.boundingBoxes?.[e]}))}var ec=n(80475),tc=n(40981);const nc="addBackgroundMedia",rc="cropSelectedElements",ac="cropElementsWithShapes",oc="safeZone",ic="previewStory",lc="addLinks",sc="enableSwipe",cc="done",dc={[nc]:{title:(0,d.__)("Add background media","web-stories"),figureSrc:"images/help-center/add_bg_module_1",description:[(0,d.__)("Double click any image or video to enter edit mode. To scale, use the slider. To change the focal point, drag the image or video.","web-stories")]},[rc]:{title:(0,d.__)("Crop selected element","web-stories"),figureSrc:"images/help-center/media_edit_mode_module_2",description:[(0,d.__)("Double click any image or video element to enter edit mode. Then, use the slider to scale the element or move its focal point by dragging it.","web-stories")]},[ac]:{title:(0,d.__)("Crop elements using shapes","web-stories"),figureSrc:"images/help-center/media_bg_shape_module_3",description:[(0,d.__)("Select a shape from the Shape menu to create a frame.","web-stories")]},[oc]:{title:(0,d.__)("Stay within the safe zone","web-stories"),figureSrc:"images/help-center/safe_zone_module_4",description:[(0,d.__)("Elements work best when you keep them within the safe zone. Outside of the safe zone, elements like links and buttons may get cropped out or not function properly.","web-stories")]},[ic]:{title:(0,d.__)("Preview your Web Story","web-stories"),figureSrc:"images/help-center/preview_module_5",description:[(0,d.__)("Use Preview Mode to view your Story before publishing.","web-stories"),(0,d.__)("Make sure buttons, links, logos, and text aren’t too close to the edge of your screen and that no Story element overlaps with the navigation bar.","web-stories")]},[lc]:{title:(0,d.__)("Add links to story elements","web-stories"),figureSrc:"images/help-center/add_link_module_6",description:[(0,d.__)('Go to the Design tab. Scroll down to <strong>Link</strong> and enter a URL. To remove a link, select the "X" <screenreader> (clear)</screenreader> button next to the URL box.',"web-stories")]},[sc]:{title:(0,d.__)("Enable swipe-up option","web-stories"),figureSrc:"images/help-center/page_attachment_module_7",description:[(0,d.__)("Go to the Design tab. Navigate to <strong>Page Attachment</strong> and enter a web address and a call to action to describe the link.","web-stories")]}},uc=[cc,{title:(0,d.__)("Done!","web-stories"),description:[(0,d.__)("You’re caught up with quick tips. We’ll notify you when we add new tips, but feel free to come back whenever you need help.","web-stories")]}],pc=500,mc=1,gc=2,fc="help_center_companion",hc=tc.FOCUSABLE_SELECTORS.map((e=>`#${fc} ${e}`)).join(", "),bc=(0,u.createContext)({state:{},actions:{}}),Ec=(e,t)=>t.navigationIndex<0;const yc=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(t,n)=>e.reduce(((e,r)=>({...n,...e,...r(t,e)})),n)},_c=yc([(e,t)=>{const n=!e.isOpen&&t.isOpen,r=!e.isOpeningToTip&&t.isOpeningToTip;return{navigationIndex:n&&!r?-1:t.navigationIndex}},(e,t)=>{if(!((e,t)=>e.navigationIndex<0&&t.navigationIndex>=0)(e,t))return{};const n=t.tipKeys.slice(0,t.navigationIndex).filter((e=>!t.readTips[e]));return{navigationFlow:[...t.tipKeys,...n,uc[0]]}},(e,t)=>({hasBottomNavigation:!Ec(0,t)}),(e,t)=>({isLeftToRightTransition:!Ec(0,t)&&t.navigationIndex-e.navigationIndex>0}),(e,t)=>({isPrevDisabled:t.navigationIndex<=0,isNextDisabled:t.navigationIndex>=t.navigationFlow?.length-1}),(e,t)=>{const n=!Ec(0,t)&&((e,t)=>(t.navigationFlow||[]).filter((e=>t.tipKeys.includes(e))))(0,t)?.[t.navigationIndex];return{readTips:n?{...t.readTips,[n]:!0}:t.readTips}},function(e,t){return{unreadTipsCount:t.tipKeys.filter((e=>!t.readTips[e]))?.length||0}},function(e,t){if(((e,t)=>!e.isHydrated&&t.isHydrated)(e,t)){return e.unreadTipsCount<t.unreadTipsCount?{isOpen:!0}:{}}return{}},function(e,t){return{isOpeningToTip:t.isOpeningToTip&&!e.isOpeningToTip}}]),vc=(e,t)=>{let{state:n,actions:r}=e;const a={...n,...t(n)};return{state:_c(n,a),actions:r}},wc=yc([function(e){return Boolean(e?.unreadTipsCount)&&void 0!==e?.isOpen?{isOpen:e?.isOpen}:{}},function(e){return e?.unreadTipsCount?{unreadTipsCount:e?.unreadTipsCount}:{}}]),Tc=Jo.getItemByKey(Qo.HELP_CENTER),Sc=e=>({isOpen:!1,isOpeningToTip:!1,navigationIndex:-1,navigationFlow:Object.keys({...dc,...e.additionalTips}),isLeftToRightTransition:!0,hasBottomNavigation:!1,isPrevDisabled:!0,isNextDisabled:!1,readTips:{},readError:!1,unreadTipsCount:Tc?.unreadTipsCount??0,isHydrated:!1,tips:{...dc,...e.additionalTips},tipKeys:Object.keys({...dc,...e.additionalTips})});const Cc=function HelpCenterProvider(e){let{children:t}=e;const{additionalTips:n={}}=U(),{actions:{updateCurrentUser:r}}=W(),a=Boolean(r),[o,i]=(0,u.useReducer)(vc,{state:wc(Tc,Sc({additionalTips:n})),actions:{goToNext:()=>e=>{let{navigationIndex:t,navigationFlow:n}=e;return{navigationIndex:(0,ec.clamp)(t+1,{MIN:0,MAX:n.length-1})}},goToPrev:()=>e=>{let{navigationIndex:t,navigationFlow:n}=e;return{navigationIndex:(0,ec.clamp)(t-1,{MIN:0,MAX:n.length-1})}},goToMenu:()=>()=>({navigationIndex:-1}),goToTip:e=>t=>{let{navigationFlow:n}=t;return{navigationIndex:n.findIndex((t=>t===e))}},openToUnreadTip:e=>t=>{let{navigationFlow:n,readTips:r}=t;return r[e]?{}:{isOpen:!0,isOpeningToTip:!0,navigationIndex:n.findIndex((t=>t===e))}},toggle:()=>e=>{let{isOpen:t}=e;return(0,P.trackEvent)("help_center_toggled",{status:t?"closed":"open"}),{isOpen:!t}},close:()=>e=>{let{isOpen:t}=e;return t&&(0,P.trackEvent)("help_center_toggled",{status:"closed"}),{isOpen:!1}},hydrateReadTipsSuccess:e=>t=>({readTips:{...e?.readTips??{},...t.readTips},isHydrated:!0}),persistingReadTipsError:()=>()=>({readError:!0})}}),{currentUser:l,updateCurrentUser:s}=no((e=>{let{state:t,actions:n}=e;return{currentUser:t.currentUser,updateCurrentUser:n.updateCurrentUser}})),d=(0,u.useMemo)((()=>Object.entries(o.actions).reduce(((e,t)=>{let[n,r]=t;return e[n]=function(){return i(r(...arguments))},e}),{})),[o.actions]),{isHydrated:p,unreadTipsCount:m}=o.state;(0,u.useEffect)((()=>{if(p){const e=Jo.getItemByKey(Qo.HELP_CENTER);Jo.setItemByKey(Qo.HELP_CENTER,{...e,unreadTipsCount:m})}}),[p,m]);const{isOpen:g}=o.state;(0,u.useEffect)((()=>{const e=Jo.getItemByKey(Qo.HELP_CENTER);Jo.setItemByKey(Qo.HELP_CENTER,{...e,isOpen:g})}),[g]),(0,u.useEffect)((()=>{!p&&l?.onboarding&&d.hydrateReadTipsSuccess({readTips:l.onboarding})}),[d,l,p]);const f=(h=o.state.readTips,Object.keys(h||{}).join(" "));var h;const b=(0,u.useRef)(!1);(0,u.useEffect)((()=>{var e;(f||p)&&a&&(b.current?s({onboarding:(e=f,e.split(" ").sort(((e,t)=>e.localeCompare(t))).reduce(((e,t)=>({...e,[t]:!0})),{}))}).catch(d.persistingReadTipsError):b.current=!0)}),[d,s,a,f,p]);const[E,y]=(0,u.useState)(o.state);(0,u.useEffect)((()=>y(o.state)),[o.state]);const _=!E.isOpen&&o.state.isOpen?o.state.navigationIndex:E.navigationIndex;(0,u.useEffect)((()=>{if(_>-1&&o.state.navigationFlow.length>=_){const e=o.state.navigationFlow[_];(0,P.trackEvent)("help_center_read_tip",{name:e,unread_count:o.state.unreadTipsCount}),o.state.unreadTipsCount===o.state.navigationFlow.length&&(0,P.trackEvent)("tutorial_begin"),"done"===e&&(0,P.trackEvent)("tutorial_complete")}}),[_]);const v=(0,u.useMemo)((()=>({state:{...o.state,navigationIndex:_},actions:d})),[d,o.state,_]);return c.createElement(bc.Provider,{value:v},t)};function Ic(e){return(0,u.useContextSelector)(bc,e??u.identity)}const xc={SAFE_ZONE:"safeZone"};const Ac=(0,u.createContext)({});const kc=function(e){return(0,u.useContextSelector)(Ac,e??u.identity)};const Oc=function(){const e=Qa((e=>{let{state:{pages:t=[]}}=e;return t.reduce(((e,t)=>(e.push(...t.elements.filter((e=>{let{type:t,isExternal:n}=e;return["image","video","gif"].includes(t)&&!n})).map((e=>{let{resource:t}=e;return t.id}))),e)),[])})),{isCurrentResourceUploading:t,isCurrentResourceProcessing:n}=Yl((e=>{let{state:{isCurrentResourceUploading:t,isCurrentResourceProcessing:n}}=e;return{isCurrentResourceUploading:t,isCurrentResourceProcessing:n}}));return(0,u.useMemo)((()=>Boolean(e?.some((e=>t(e)||n(e))))),[e,t,n])};const Pc=function AutoSaveHandler(){const{autoSaveInterval:e}=U(),{state:{hasNewChanges:t}}=Br(),{status:n,saveStory:r}=Qa((e=>{let{state:{story:{status:t}},actions:{saveStory:n}}=e;return{status:t,saveStory:n}})),a=Oc(),o="draft"===n||!n,i=(0,u.useRef)(r);return(0,u.useEffect)((()=>{i.current=r}),[r]),(0,u.useEffect)((()=>{if(!o||!t||!e||a)return;const n=setTimeout((()=>i.current()),1e3*e);return()=>clearTimeout(n)}),[e,o,t,a]),null},Nc=(0,u.createContext)({actions:{},state:{}});const Rc=function(e){return(0,u.useContextSelector)(Nc,e??u.identity)},Mc=window.requestIdleCallback||function(e,t){const n=(t=t||{}).timeout||1,r=performance.now();return setTimeout((function(){e({get didTimeout(){return!t.timeout&&performance.now()-r-1>n},timeRemaining:function(){return Math.max(0,performance.now()-r+1)}})}),1)},Lc=window.cancelIdleCallback||function(e){clearTimeout(e)};const Dc=function(){const e=(0,u.useRef)([]),t=(0,u.useRef)(!1),n=(0,u.useRef)([null,null]),r=(0,u.useCallback)((()=>{if(t.current=!0,!e.current.length)return void(t.current=!1);const[a,o]=e.current.shift(),i=Mc((async()=>{await o(),n.current=[null,null],r()}));n.current=[a,i]}),[]),a=(0,u.useCallback)((t=>{e.current=e.current.filter((e=>{let[n]=e;return n!==t}));const[a,o]=n.current;t===a&&(Lc(o),n.current=[null,null],r())}),[r]);return(0,u.useCallback)((n=>{let[o,i]=n;return a(o),e.current.push([o,i]),t.current||r(),()=>{a(o)}}),[r,a])};var Bc=n(6114),Fc=n(32396);const Hc=za().shape({width:za().number,height:za().number,containerHeight:za().number});Mn.StoryPropTypes.story=za().shape({storyId:za().number,title:za().string.isRequired,status:za().string.isRequired,author:za().shape({id:za().oneOfType([za().number,za().string]),name:za().string.isRequired}),slug:za().string.isRequired,date:za().string.isRequired,modified:za().string.isRequired,excerpt:za().string.isRequired,featuredMedia:za().shape({id:za().number.isRequired,url:za().string.isRequired,width:za().number.isRequired,height:za().number.isRequired,isExternal:za().bool,needsProxy:za().bool}),password:za().string.isRequired,currentStoryStyles:za().object,autoAdvance:za().bool,defaultPageDuration:za().number,backgroundAudio:za().shape({resource:Mn.BackgroundAudioPropType})}),Mn.StoryPropTypes.size=za().exact({width:za().number.isRequired,height:za().number.isRequired});za().shape(Un.AnimationProps);var Uc=n(38823);const jc=(0,p.css)(["position:absolute !important;top:0;left:0;height:100%;width:100%;"]),zc=(0,p.default)(Uc.Blurhash).withConfig({displayName:"renderResourcePlaceholder__BlurhashContainer",componentId:"sc-m9r2np-0"})(["",""],jc),Gc=p.default.div.withConfig({displayName:"renderResourcePlaceholder__BaseColorContainer",componentId:"sc-m9r2np-1"})([""," background-color:",";"],jc,(e=>{let{$baseColor:t}=e;return t}));const Yc=function(e){let{blurHash:t,baseColor:n}=e;return t?c.createElement(zc,{hash:t,punch:1,height:"100%",width:"100%"}):n?c.createElement(Gc,{$baseColor:n}):null};function Zc(){return Zc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zc.apply(this,arguments)}const Wc=p.default.div.attrs((e=>{let{previewMode:t,x:n,y:r,width:a,height:o,rotationAngle:i}=e;return t?{style:{position:"absolute",zIndex:1,left:`${n}px`,top:`${r}px`,width:`${a}px`,height:`${o}px`,transform:`rotate(${i}deg)`}}:{}})).withConfig({displayName:"displayElement__Wrapper",componentId:"sc-1uos4dq-0"})([""," "," "," contain:layout;transition:opacity 0.15s cubic-bezier(0,0,0.54,1);",""],(e=>{let{previewMode:t}=e;return!t&&qn.elementWithPosition}),(e=>{let{previewMode:t}=e;return!t&&qn.elementWithSize}),(e=>{let{previewMode:t}=e;return!t&&qn.elementWithRotation}),(e=>{let{isBackground:t,theme:n}=e;return t&&(0,p.css)(["border-radius:",";overflow:hidden;"],n.borders.radius.small)})),Vc=p.default.div.withConfig({displayName:"displayElement__BackgroundOverlay",componentId:"sc-1uos4dq-1"})(["position:absolute;width:100%;height:100%;top:0;left:0;"]),$c=p.default.div.withConfig({displayName:"displayElement__ReplacementContainer",componentId:"sc-1uos4dq-2"})(["transition:opacity 0.25s cubic-bezier(0,0,0.54,1);pointer-events:none;opacity:",";height:100%;"],(e=>{let{hasReplacement:t}=e;return t?1:0}));function AnimationWrapper(e){let{children:t,id:n,isAnimatable:r}=e;return r?c.createElement(Un.StoryAnimation.WAAPIWrapper,{target:n},t):t}const qc=(0,u.memo)((function DisplayElement(e){let{element:t,previewMode:n,isAnimatable:r=!1,siblingCount:a=0}=e;const{getBox:o,getBoxWithBorder:i,dataToEditorX:l}=(0,Bc.default)((e=>({getBox:e.actions.getBox,getBoxWithBorder:e.actions.getBoxWithBorder,dataToEditorX:e.actions.dataToEditorX}))),{getProxiedUrl:s}=ii(),{actions:{maybeEnqueueFontStyle:d}}=Wo(),[p,m]=(0,u.useState)(null),g=Boolean(p),{id:f,opacity:h,type:b,isBackground:E,overlay:y,border:_,flip:v,rotationAngle:w}=t,{isCurrentResourceProcessing:T,isCurrentResourceUploading:S}=Yl((e=>{let{state:t}=e;return Mn.ELEMENT_TYPES.IMAGE===b?{isCurrentResourceProcessing:t.isCurrentResourceProcessing,isCurrentResourceUploading:t.isCurrentResourceUploading}:{}})),C=g?{...t,type:p.resource.type,resource:p.resource,scale:p.scale,focalX:p.focalX,focalY:p.focalY,flip:E?p.flip:v,overlay:E?p.overlay:y}:null,{Display:x}=(0,Mn.getDefinitionForType)(b),{Display:A}=(0,Mn.getDefinitionForType)(p?.resource.type)||{},k=(0,u.useRef)(null),O=o(t),P=i(t),{left:N=0,right:R=0,top:M=0,bottom:L=0}=_||{};(0,I.useTransformHandler)(f,(e=>{const n=k.current;if(null===e)n.style.transform="",n.style.width="",n.style.height="";else{const{translate:r=[0,0],rotate:a,resize:o,dropTargets:i}=e;let l=0,s=0;if(o&&0!==o[0]&&0!==o[1]&&(n.style.width=`${o[0]}px`,n.style.height=`${o[1]}px`,(0,$n.canSupportMultiBorder)(t))){const[e,t]=(0,Fc.default)(w,0,N+R,0,M+L);l=e,s=t}n.style.transform=`translate(${r[0]-l}px, ${r[1]-s}px) rotate(${a}deg)`,void 0!==i?.hover&&(n.style.opacity=i.hover?0:1),void 0!==i?.replacement&&m(i.replacement||null)}}));const D=(0,u.useRef)(null);(0,qn.useColorTransformHandler)({id:f,targetRef:D,resetOnNullTransform:!1});const B=(0,$n.getResponsiveBorder)(_,n,l);return c.createElement(Wc,Zc({ref:k,"data-element-id":f,isBackground:t.isBackground,previewMode:n},n?O:P),c.createElement(AnimationWrapper,{id:f,isAnimatable:r},c.createElement($n.DisplayWithMask,{element:t,fill:!0,style:{opacity:void 0!==h?h/100:null},previewMode:n,responsiveBorder:B},c.createElement(x,{element:t,previewMode:n,box:O,getProxiedUrl:s,isCurrentResourceProcessing:T,isCurrentResourceUploading:S,maybeEnqueueFontStyle:d,siblingCount:a,renderResourcePlaceholder:Yc})),!n&&c.createElement($c,{hasReplacement:g},C&&c.createElement($n.DisplayWithMask,{element:C,fill:!0,style:{opacity:h?h/100:null},previewMode:n},c.createElement(A,{element:C,box:O,getProxiedUrl:s,isCurrentResourceProcessing:T,isCurrentResourceUploading:S,maybeEnqueueFontStyle:d}))),E&&y&&!g&&c.createElement(Vc,{ref:D,style:(0,ta.default)(y)})))})),Kc=p.default.div.withConfig({displayName:"storyPageToNode__Page",componentId:"sc-rgshjs-0"})(["display:block;position:relative;padding:0;border:0;background-color:transparent;height:","px;width:","px;flex:none;outline:0;"],(e=>{let{height:t}=e;return t}),(e=>{let{width:t}=e;return t})),Xc=p.default.div.withConfig({displayName:"storyPageToNode__PreviewWrapper",componentId:"sc-rgshjs-1"})(["height:100%;position:relative;overflow:hidden;background-color:",";border-radius:4px;",""],(e=>{let{theme:t}=e;return t.colors.fg.white}),(e=>{let{background:t}=e;return(0,ta.default)(t)})),Qc=p.default.div.withConfig({displayName:"storyPageToNode__FullHeight",componentId:"sc-rgshjs-2"})(["position:absolute;top:","px;bottom:","px;right:0;left:0;"],(e=>{let{yOffset:t}=e;return t}),(e=>{let{yOffset:t}=e;return t})),Jc=(0,u.forwardRef)((function PageWithDependencies(e,t){let{page:n,width:r,height:a,renderFullHeightThumb:o=!1,containerHeight:i}=e;return c.createElement(p.ThemeProvider,{theme:f.theme},c.createElement(Zo,null,c.createElement(I.TransformProvider,null,c.createElement(ps,{pageSize:{width:r,height:a}},c.createElement(Kc,{ref:t,height:o?i:a,width:r},c.createElement(Xc,{background:n.backgroundColor},c.createElement(Qc,{yOffset:o?(i-a)/2:0},n.elements.map((e=>c.createElement(qc,{key:e.id,previewMode:!0,element:e}))))))))))}));const ed=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{renderFullHeightThumb:r=!1}=n,a=t*(1/ee.PAGE_RATIO),o=t*(1/ee.FULLBLEED_RATIO),i=document.createElement("div");i.style.cssText=`\n     contain: strict;\n     position: absolute;\n     top: 0;\n     left: 0;\n     width: ${t}px;\n     height: ${o}px;\n     opacity: 0;\n     transform: translate(-100%, -100%);\n     pointer-events: none;\n   `;const l=await new Promise((n=>{(0,u.render)(c.createElement(Jc,{ref:e=>{e&&n(e)},page:e,width:t,height:a,containerHeight:o,renderFullHeightThumb:r}),i)}));document.body.appendChild(i);const s=()=>{(0,u.unmountComponentAtNode)(i),document.body.removeChild(i)};return[l,s]};const td=async function(e,t){let{width:r=400,...a}=t;const o=await n.e(3182).then(n.bind(n,87559)),[i,l]=await ed(e,r),s=await o.toJpeg(i,{...a,width:r,height:r*(1/ee.PAGE_RATIO),canvasHeight:r*(1/ee.PAGE_RATIO),canvasWidth:r});return l(),s};const nd=function PageDataUrlProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)({}),a=Dc(),o=(0,u.useCallback)((e=>{const t=e.id,n=a([t,async()=>{const t=await td(e,{});r((n=>({...n,[e.id]:t})))}]);return()=>{n()}}),[a]),i=(0,u.useMemo)((()=>({state:{dataUrls:n},actions:{queuePageImageGeneration:o}})),[o,n]);return c.createElement(Nc.Provider,{value:i},t)};const rd=async function(e,t){let{width:r=400,...a}=t;const o=await n.e(3182).then(n.bind(n,87559)),[i,l]=await ed(e,r,{renderFullHeightThumb:!0}),s=await o.toCanvas(i,{...a,fontEmbedCss:""});return l(),s};var ad=n(88862);function od(e){const{r:t,g:n,b:r,a=1}=e;return ad.relativeLuminance({r:t/255,g:n/255,b:r/255,a})}function id(e){const t=ad.str2rgba(e);return ad.relativeLuminance(t)}function ld(e,t,n){const r=ad.contrast(e,t);return{ratio:r,WCAG_AA:ad.aa(r,n)}}function sd(e,t,n){return ld(od({r:e[0],g:e[1],b:e[2]}),od({r:t[0],g:t[1],b:t[2]}),n)}const cd=(0,u.createContext)({actions:{},state:{}});const dd=function(e,t){const n=e.getContext("2d"),r=(e.width/ee.FULLBLEED_RATIO-e.width/ee.PAGE_RATIO)/2,a=(0,aa.getBox)({...t,height:t.height?t.height:(0,Kn.calculateTextHeight)(t,t.width)},e.width,e.height-2*r),{x:o,y:i,width:l,height:s}=a,c=i+r;return n.getImageData(o,c,l,s).data},ud={},pd={setPageCanvas:(e,t)=>{const{pageId:n,canvas:r}=t.payload;return{...e,[n]:r}},clearPageCanvas:(e,t)=>{const{pageId:n}=t.payload;return vn(e,[n])}};const md=function(){return(0,u.useReduction)(ud,pd)};const gd=function(){const[e,t]=(0,u.useState)(null),n=(0,u.useRef)(e);n.current=e;const r=(0,u.useCallback)((e=>e.backgroundColor===n.current?.backgroundColor&&(0,u.shallowEqual)(e.elements,n.current?.elements)?n.current.canvas:null),[]),a=(0,u.useCallback)((e=>{let{page:n,canvas:r}=e;t({elements:n.elements,backgroundColor:n.backgroundColor,canvas:r})}),[]);return{setSnapshot:a,getSnapshotCanvas:r}};function PageCanvasCacheValidator(e){let{pageId:t,clearPageCanvasCache:n}=e;const r=Qa((e=>{let{state:n}=e;return vn(n.pages.find((e=>{let{id:n}=e;return n===t})),["animations"])}));return(0,u.useEffect)((()=>{n({pageId:r.id})}),[r,n]),(0,u.useEffect)((()=>()=>n({pageId:t})),[n,t]),null}PageCanvasCacheValidator.propTypes={pageId:za().oneOfType([za().string,za().number]),clearPageCanvasCache:za().func};const fd=(0,u.memo)(PageCanvasCacheValidator);const hd=function(e,t){return{...e,elements:e.elements.filter((e=>{let{id:n}=e;return!t.includes(n)}))}};const bd=function PageCanvasProvider(e){let{children:t}=e;const n=Dc(),[r,a]=md(),{getSnapshotCanvas:o,setSnapshot:i}=gd(),l=Qa((e=>{let{state:t}=e;return t.pages.map((e=>{let{id:t}=e;return t}))})),{currentPage:s,singleElementSelection:d}=Qa((e=>{let{state:t}=e;return{singleElementSelection:1===t.selectedElementIds?.length?t.selectedElementIds:ze,currentPage:t.currentPage}})),p={currentPageValue:s,pageCanvasMapValue:r,singleElementSelectionValue:d},m=(0,u.useRef)(p);m.current=p;const g=(0,u.useCallback)((e=>{let[t,r]=e;const o=n([t,async()=>{const e=await rd(r,{});a.setPageCanvas({pageId:r.id,canvas:e})}]);return o}),[n,a]),f=(0,u.useCallback)((()=>{const{currentPageValue:e,pageCanvasMapValue:t}=m.current;t[e.id]||g([e.id,e])}),[g]),h=(0,u.useCallback)((async(e,t)=>{const n=hd(e,t);let r=o(n);return r||(r=await rd(n,{}),i({page:n,canvas:r})),r}),[i,o]),b=(0,u.useCallback)((async e=>{const{pageCanvasMapValue:t}=m.current;let n=t[e.id];return n||(n=await rd(e,{}),a.setPageCanvas({pageId:e.id,canvas:n})),n}),[a]),E=(0,u.useCallback)((async e=>{const{currentPageValue:t,singleElementSelectionValue:n}=m.current;let r;r=n.includes(e.id)?await h(t,n):await b(t);const{fontSize:a}=e,o=function(e,t){const n=[255,255,255,255],r=[0,0,0,255],a=[],o={r:255,g:255,b:255,a:1},i={r:0,g:0,b:0,a:1};for(let t=0;t<e.length;t+=4)a.push([e[t],e[t+1],e[t+2],e[t+3]]);const l=a.map((e=>sd(r,e,t)));if(!l.some((e=>{let{WCAG_AA:t}=e;return!t})))return{color:i};const s=a.map((e=>sd(n,e,t)));if(!s.some((e=>{let{WCAG_AA:t}=e;return!t})))return{color:o};const c=l.reduce(((e,t)=>e+t.ratio),0)<s.reduce(((e,t)=>e+t.ratio),0);return c?{color:i,backgroundColor:{...o,a:.7}}:{color:o,backgroundColor:{...i,a:.7}}}(dd(r,e),a);return o}),[h,b]);return c.createElement(cd.Provider,{value:{state:{pageCanvasMap:r},actions:{calculateAccessibleTextColors:E,generateDeferredPageCanvas:g,generateDeferredCurrentPageCanvas:f}}},l.map((e=>c.createElement(fd,{key:e,pageId:e,clearPageCanvasCache:a.clearPageCanvas}))),t)};const Ed=function(){return(0,u.useContextSelector)(cd,(e=>{let{actions:t}=e;return t.calculateAccessibleTextColors}))};const yd=function(e){return(0,u.useContextSelector)(cd,e??u.identity)},_d="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAGElEQVQYV2NkYGD4////fwZGEMnIyMgAAEvqB/6wfXLSAAAAAElFTkSuQmCC",vd=p.default.div.withConfig({displayName:"devTools__Container",componentId:"sc-1mo3vwv-0"})(["position:fixed;z-index:2147483646;bottom:0;left:0;display:flex;flex-direction:column;width:35%;height:50%;border:6px solid ",";background:",";color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),wd=p.default.textarea.withConfig({displayName:"devTools__Textarea",componentId:"sc-1mo3vwv-1"})(["flex:1;border:0;background:",";color:",";white-space:nowrap;overflow:auto;"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Td=p.default.div.withConfig({displayName:"devTools__Options",componentId:"sc-1mo3vwv-2"})(["display:flex;justify-content:space-between;padding:6px;"]),Sd=p.default.label.withConfig({displayName:"devTools__Label",componentId:"sc-1mo3vwv-3"})(["margin-right:6px;"]),Cd=p.default.button.withConfig({displayName:"devTools__Button",componentId:"sc-1mo3vwv-4"})(["margin-left:6px;"]),Id=e=>{const t=[];return[{...e,pages:e.pages.map((e=>({...e,elements:e.elements.map((e=>{const n={...e};return"resource"in e&&(n.resource={...e.resource},"video"===e.type&&(n.resource.mimeType="video/mp4",n.resource.src="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAPEbW9vdgAAAGxtdmhkAAAAANrF/AXaxfwFAAAD6AAAB9AAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAABhpb2RzAAAAABCAgIAHAE///////wAAAzh0cmFrAAAAXHRraGQAAAAB2sX8BdrF/AUAAAABAAAAAAAAB9AAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAABQAAAAUAAAAAAKwbWRpYQAAACBtZGhkAAAAANrF/AXaxfwFAAAD6AAAB9BVxAAAAAAAIWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAAAAAAACZ21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAq3N0c2QAAAAAAAAAAQAAAJthdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAABQAFABIAAAASAAAAAAAAAABDkpWVC9BVkMgQ29kaW5nAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAM2F2Y0MBTUAK/+EAG2dNQArsxLzzzUBAQZAAAAMAEAAAAwFI8SJZoAEABWjpeyyAAAAAEmNvbHJuY2xjAAEAAQAGAAAAGHN0dHMAAAAAAAAAAQAAABQAAABkAAAAZHN0c3oAAAAAAAAAAAAAABQAAAC1AAAADAAAAAwAAAAMAAAADAAAAGcAAAAOAAAADQAAAAwAAADEAAAADwAAAA4AAAAMAAAAmgAAAA8AAAAMAAAADAAAABEAAAAOAAAADAAAABxzdHNjAAAAAAAAAAEAAAABAAAACgAAAAEAAAAgY282NAAAAAAAAAACAAAAAAAAA/QAAAAAAAAGKwAAAKhjdHRzAAAAAAAAABMAAAABAAAAyAAAAAEAAAH0AAAAAQAAAMgAAAABAAAAAAAAAAEAAABkAAAAAQAAAfQAAAABAAAAyAAAAAEAAAAAAAAAAQAAAGQAAAABAAAB9AAAAAEAAADIAAAAAQAAAAAAAAABAAAAZAAAAAEAAAH0AAAAAQAAAMgAAAABAAAAAAAAAAEAAABkAAAAAQAAAZAAAAACAAAAZAAAABRzdHNzAAAAAAAAAAEAAAABAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAAAH0AAAAMgAAQAAAAAAAW1kYXQAAAAAAAADXAAAALFliIQAIf8tERhKDUPN//6tPIlfMgqs2j4bf1chdW+++2VwQdh75gd9Y8UGeNAnhlaisT01Zs49a/0nV0aO/GLhqiGwvWR/s1K9W3zBx2od2cS1bT/kb2rz7FeHrWTqTLX6Gx65Y6i33pdJ/uLJd1nt76ybxnGFuPrIHacdB39MBmZsd4t/m7wPBzhrJIjUCiCUcSaxJPxvEH+6DID5TqxsXtv0RS9+hTuYECGa+YWdx4EAAAAIQZokbEMfi4AAAAAIQZ5COIc/0YEAAAAIAZ5hNEEH1YAAAAAIAZ5jakEH1YEAAABjQZpoSahBaJlMCM/eVhjnGE9A+AdJ7SwN5vlKUC/otPa/5jefanvcx5sQZ4c8/3tiMqvDgQF8rydFoFe3gcpkTP4xG9DP5oXTv1DTSsVi1O/u9fkq6BMYR61X6/n148wbBk3hAAAACkGehi5RMJfxO6sAAAAJAZ6lKRDn87czAAAACAGep25Cn8WAAAAAwEGarDUILakymAT/lvijvmpe6mLGpu6rJNoev4/97f/3/AViMdt7WMTLeGSxGKwsecwmz+Z5NTf4Lgky4aLbYBjw9pUtNg4bov9E4yT+OadpewkQxiWZZozDDf98P4PN72xr+rkQJcODW8z2LOkQVijjHcWSmTAvF7/ANFm8TO5l9vC/tz7FvEis+ba+dTueI87l9hdLXQfWqKN+J9j1fj5cguj08byzEmWnKbLlqG1uTZmu0LDedc3Ugo76bySHIAAAAAtBnspklERc3+sNqQAAAAoBnukpEZ/3fsMPAAAACAGe625N/6+AAAAAlkGa8DUILakymARfBGYe5snAbMic1iEEu9W/yugK09WdqQ1/7ftt/lUz4i6orQg+4cIz2nHYVKTXCJJbyOrz/tGL+TWtNtUBVK2kbTsfCYF8ddhk+qL5Jr82IUEUALXNsKpx1hhGIJnvqqlGTOyyOpmwbHhNUa2TaBkzzVzuaVnuHnaL3sjfLR0XEc/T6ntUXHacPLf94QAAAAtBnw5klERd//FEowAAAAgBny1pFf+ngQAAAAgBny9uf+yhJAAAAA1BmzM1CC2pMpgE/xwwAAAACkGfUWSURFz/kYEAAAAIAZ9ybkv/mIA=",n.resource.poster=_d,t.push(n.id)),"image"===e.type&&(n.resource.mimeType="image/png",n.resource.src=_d)),n}))})))},t]},xd=e=>{if(!e.length)return e;const t=e.match(/\/([^/?#]+)[^/]*$/);return t.length>1?`__WEB_STORIES_TEMPLATE_BASE_URL__/images/templates/%%templateName%%/${t[1]}`:e};const Ad=function DevTools(){const[e,t]=(0,u.useState)(!1),[n,r]=(0,u.useState)(!1),[a,o]=(0,u.useState)(!1),[i,l]=(0,u.useState)(!1),{showSnackbar:s}=(0,jr.useSnackbar)(),d=(0,u.useRef)(),{reducerState:p,restore:m}=Qa((e=>{let{internal:t}=e;return{reducerState:t.reducerState,restore:t.restore}})),{pages:g,current:f,selection:h,story:{globalStoryStyles:b}}=p,E={current:f,selection:h,story:{globalStoryStyles:b},version:Cr.DATA_VERSION,pages:g},y=a?Id(E)[0]:i?(_=E,{..._,current:null,selection:[],story:{},pages:_.pages.map((e=>({...e,elements:e.elements.map((e=>{const t={...e};return"resource"in e&&(t.resource={...e.resource},"video"===e.type&&(t.resource.id=0,t.resource.posterId=0,t.resource.src=xd(t.resource.src),t.resource.poster=xd(t.resource.poster)),"image"===e.type&&(t.resource.id=0,t.resource.sizes=[],t.resource.src=xd(t.resource.src))),t})),pageTemplateType:e?.pageTemplateType??""})))}):E;var _;const v=()=>t((e=>!e));(0,Ir.useGlobalKeyDownEffect)({key:"mod+shift+alt+j",editable:!0},v);const w=JSON.stringify(y,null,2),T=n?window.btoa(w):w,[S,C]=(0,u.useState)(T);return(0,u.useEffect)((()=>C(T)),[T]),e?c.createElement(vd,null,c.createElement(Td,null,c.createElement("div",null,c.createElement(Sd,{title:"For easier sharing thru various channels"},c.createElement("input",{type:"checkbox",checked:n,onChange:()=>r((e=>!e))}),"Base64"),c.createElement(Sd,{title:"Replace resources with dummy resources"},c.createElement("input",{type:"checkbox",checked:a,onChange:()=>o((e=>!e))}),"Dummy resources"),c.createElement(Sd,{title:"Export as Template"},c.createElement("input",{type:"checkbox",checked:i,onChange:()=>l((e=>!e))}),"Template")),c.createElement("div",null,c.createElement(Cd,{"aria-label":"Load data from input",onClick:()=>{let e=S;try{e=window.atob(e)}catch(e){}const t=JSON.parse(e),n={...t,story:{...p.story,...t.story},capabilities:p.capabilities},[r,o]=a?Id(n):[n,[]];m(r),o.length>0&&o.forEach((e=>{const t=document.getElementById(`video-${e}`);t&&t.load()})),s({message:"Story restored from input",timeout:1200})}},"Load"),c.createElement(Cd,{"aria-label":"Copy data to clipboard",onClick:()=>{d.current.select(),document.execCommand("copy"),d.current.setSelectionRange(0,0),s({message:"Copied to clipboard",timeout:1200})}},"Copy"),c.createElement(Cd,{"aria-label":"Close DevTools",onClick:v},"X"))),c.createElement(wd,{ref:d,className:"mousetrap",value:S,onChange:e=>C(e.target.value)})):null},kd=(0,p.createGlobalStyle)([".react-calendar__tile--now.react-calendar__month-view__days__day:focus{background-color:#eeeec1;}"]),Od="useskeyboard",Pd=(0,p.createGlobalStyle)(["body:not(",") *:focus{outline:none !important;}"],".useskeyboard"),Nd=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Digit1","Digit2","Digit3"];const Rd=()=>{const[e,t]=(0,u.useState)(!1),n=n=>{!e&&Nd.includes(n.code)&&t(!0)},r=()=>{e&&t(!1)};return(0,u.useEffect)((()=>(document.addEventListener("keydown",n,!0),document.addEventListener("mousedown",r,!0),function(){document.removeEventListener("keydown",n,!0),document.removeEventListener("mousedown",r,!0)}))),(0,u.useEffect)((()=>{document.body.classList.toggle(Od,e)}),[e]),c.createElement(Pd,null)},Md=()=>({locale:{locale:"en-US",dateFormat:"F j, Y",timeFormat:"g:i a",gmtOffset:"0",timezone:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysInitials:["S","M","T","W","T","F","S"],weekStartsOn:1},allowedMimeTypes:{audio:["audio/mpeg","audio/aac","audio/wav","audio/ogg"],image:["image/png","image/jpeg","image/jpg","image/gif","image/webp"],caption:["text/vtt"],vector:["image/svg+xml"],video:["video/mp4","video/webm"]},isRTL:!1,storyId:1,cdnURL:"https://wp.stories.google/static/main/",maxUpload:314572800,capabilities:{hasUploadMediaAction:!1,canManageSettings:!1},metadata:{publisher:""},canViewDefaultTemplates:!0,showMedia3p:!0,encodeMarkup:!0,ffmpegCoreUrl:"https://wp.stories.google/static/main/js/@ffmpeg/core@0.10.0/dist/ffmpeg-core.js",apiCallbacks:{},MediaUpload:()=>null,styleConstants:{topOffset:0,leftOffset:0}});Object.defineProperty(_.default,"name",{value:"stylisRTLPlugin"});const Ld=function StoryEditor(e){let{config:t,initialEdits:n,children:r}=e;const a=(0,v.default)(Md(),t),{storyId:o,isRTL:i,flags:l,styleConstants:{leftOffset:s,topOffset:d}={}}=a;return c.createElement(C.FlagsProvider,{features:l},c.createElement(p.StyleSheetManager,{stylisPlugins:i?[_.default]:[]},c.createElement(p.ThemeProvider,{theme:O},c.createElement(B,null,c.createElement(H,{config:a},c.createElement(Z,null,c.createElement(Ho,null,c.createElement(Dr,{size:50},c.createElement(w.default,null,c.createElement(Xa,{storyId:o,initialEdits:n},c.createElement(Kl,null,c.createElement(to,null,c.createElement(Zo,null,c.createElement(zl,null,c.createElement(Pc,null),c.createElement(I.TransformProvider,null,c.createElement(cs,null,c.createElement(Cc,null,c.createElement(bd,null,c.createElement(nd,null,c.createElement(T.default,{value:{isRTL:i,leftOffset:s,topOffset:d}},c.createElement(k,null),c.createElement(Ad,null),c.createElement(x.DefaultMoveableGlobalStyle,null),c.createElement(x.CropMoveableGlobalStyle,null),c.createElement(S.ModalGlobalStyle,null),c.createElement(kd,null),c.createElement(Rd,null),r))))))))))))))))))))};const Dd=(0,u.memo)((function PreviewPageElements(e){let{page:t}=e;return t.elements.map((e=>c.createElement(qc,{previewMode:!0,key:e.id,page:t,element:e,isAnimatable:!0})))})),Bd=p.default.div.withConfig({displayName:"previewPage__FullBleedPreviewWrapper",componentId:"sc-1r5t7dq-0"})(["height:",";width:100%;overflow:hidden;position:relative;display:flex;align-items:center;background-color:white;",";"],(e=>{let{pageSize:t}=e;return`${t.containerHeight}px`}),(e=>{let{background:t}=e;return(0,ta.default)(t)})),Fd=p.default.div.withConfig({displayName:"previewPage__PreviewSafeZone",componentId:"sc-1r5t7dq-1"})(["width:100%;height:",";overflow:visible;position:absolute;margin:0;"],(e=>{let{pageSize:t}=e;return`${t.height}px`}));function PreviewPageAnimationController(e){let{animationState:t}=e;const n=(0,Un.useStoryAnimationContext)((e=>{let{actions:t}=e;return t.WAAPIAnimationMethods}));return(0,u.useEffect)((()=>{switch(t){case Un.STORY_ANIMATION_STATE.PLAYING:return n.play(),()=>{};case Un.STORY_ANIMATION_STATE.RESET:return n.reset(),()=>{};case Un.STORY_ANIMATION_STATE.SCRUBBING:case Un.STORY_ANIMATION_STATE.PAUSED:return n.pause(),()=>{};default:return()=>{}}}),[t,n]),(0,u.useEffect)((()=>()=>n.reset()),[n]),null}const Hd=(0,u.memo)((0,u.forwardRef)((function PreviewPageDisplay(e,t){let{page:n,pageSize:r}=e;return c.createElement(Bd,{ref:t,pageSize:r,background:n.backgroundColor},c.createElement(Fd,{pageSize:r},c.createElement(Dd,{page:n})))})));(0,u.forwardRef)((function PreviewPage(e,t){let{page:n,pageSize:r,animationState:a=Un.STORY_ANIMATION_STATE.RESET,onAnimationComplete:o}=e;return c.createElement(p.StyleSheetManager,{stylisPlugins:[]},c.createElement(Un.StoryAnimation.Provider,{animations:n.animations,elements:n.elements,onWAAPIFinish:o},c.createElement(Hd,{ref:t,page:n,pageSize:r}),c.createElement(PreviewPageAnimationController,{animationState:a})))}));PreviewPageAnimationController.propTypes={animationState:za().oneOf(Object.values(Un.STORY_ANIMATION_STATE))};var Ud;function jd(){return jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jd.apply(this,arguments)}const SvgArrowDownLeftCurved=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",jd({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ud||(Ud=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.001 19.467V12.5a.5.5 0 0 1 1 0v5.041C10.149 14.209 13.641 12 17.465 12c2.815 0 5.384 1.183 7.384 3.13a.5.5 0 0 1-.698.716C22.314 14.057 19.988 13 17.465 13c-3.756 0-7.244 2.39-9.162 6h6.37a.5.5 0 0 1 0 1H7.511a.498.498 0 0 1-.51-.533Z",fill:"currentColor"})))},zd=(0,c.memo)(SvgArrowDownLeftCurved);var Gd;function Yd(){return Yd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yd.apply(this,arguments)}const SvgArrowDownRightCurved=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Yd({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Gd||(Gd=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.849 15.846C9.686 14.057 12.012 13 14.534 13c3.757 0 7.245 2.39 9.163 6h-6.37a.5.5 0 1 0 0 1h7.162a.498.498 0 0 0 .51-.523V12.5a.5.5 0 0 0-1 0v5.042C21.853 14.209 18.36 12 14.536 12c-2.815 0-5.384 1.183-7.384 3.13a.5.5 0 1 0 .698.716Z",fill:"currentColor"})))},Zd=(0,c.memo)(SvgArrowDownRightCurved);var Wd,Vd=n(27856),$d=n(73715);function qd(){return qd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qd.apply(this,arguments)}function Tooltip(e){let{hasTail:t=!0,placement:n=Vd.PLACEMENT.BOTTOM,...r}=e;return c.createElement($d.BaseTooltip,qd({placement:n,hasTail:t},r))}function Kd(){return Kd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kd.apply(this,arguments)}function HistoryButton(e){let{title:t,shortcut:n,children:r,...a}=e;return c.createElement(Tooltip,{title:t,shortcut:n,hasTail:!0},c.createElement(m.Button,Kd({variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.QUATERNARY,size:g.BUTTON_SIZES.SMALL},a),r))}function Redo(){const{state:{canRedo:e},actions:{redo:t}}=Br(),{isRTL:n}=U(),r=(0,u.useCallback)((()=>t()),[t]);return c.createElement(HistoryButton,{title:(0,d.__)("Redo","web-stories"),shortcut:"shift+mod+z",disabled:!e,onClick:r,"aria-label":(0,d.__)("Redo Changes","web-stories")},n?c.createElement(zd,null):c.createElement(Zd,null))}function Undo(){const{state:{canUndo:e},actions:{undo:t}}=Br(),{isRTL:n}=U(),r=(0,u.useCallback)((()=>t()),[t]);return c.createElement(HistoryButton,{title:(0,d.__)("Undo","web-stories"),shortcut:"mod+z",disabled:!e,onClick:r,"aria-label":(0,d.__)("Undo Changes","web-stories")},n?c.createElement(Zd,null):c.createElement(zd,null))}function Xd(){return Xd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xd.apply(this,arguments)}const SvgEye=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Xd({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Wd||(Wd=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.023 16.229C9.948 12.71 12.996 11 16 11c3.004 0 6.052 1.711 7.977 5.229a.23.23 0 0 1-.007.214C21.878 19.503 18.923 21 16 21s-5.877-1.497-7.97-4.557l-.412.283.412-.283a.23.23 0 0 1-.007-.215Zm16.831-.48C22.774 11.947 19.41 10 16 10c-3.41 0-6.775 1.948-8.854 5.748l.439.24-.439-.24c-.213.39-.193.892.059 1.26C9.465 20.314 12.717 22 16 22c3.283 0 6.535-1.686 8.795-4.992.252-.368.272-.87.059-1.26ZM14 16a2 2 0 1 1 4 0 2 2 0 0 1-4 0Zm2-3a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z",fill:"currentColor"})))},Qd=(0,c.memo)(SvgEye);const Jd=function PreviewErrorDialog(e){let{isOpen:t,onClose:n,onRetry:r}=e;return c.createElement(y,{isOpen:t,onClose:n,title:(0,d.__)("Open preview","web-stories"),secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:r,primaryText:(0,d.__)("Try again","web-stories")},c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("The preview window failed to open.","web-stories")))},eu="story-preview";const tu=function PreviewButton(e){let{forceIsSaving:t=!1}=e;const{isSaving:n,previewLink:r,status:a,autoSave:o,saveStory:i}=Qa((e=>{let{state:{meta:{isSaving:t},story:{status:n,previewLink:r}},actions:{autoSave:a,saveStory:o}}=e;return{isSaving:t,status:n,previewLink:r,autoSave:a,saveStory:o}})),l=Oc(),[s,p]=(0,u.useState)(null),f="draft"===a||!a,h=e=>{const t=new URL(e);return t.hash="#development=1",t.toString()},b=(0,u.useCallback)((()=>{let e;(0,P.trackEvent)("preview_story");try{if(e=window.open("about:blank",eu),e){e.document.write("<!DOCTYPE html><html><head>"),e.document.write("<title>"),e.document.write((0,zr.escapeHTML)((0,d.__)("Generating the preview…","web-stories"))),e.document.write("</title>"),e.document.write("</head><body>"),e.document.write((0,zr.escapeHTML)((0,d.__)("Please wait. Generating the preview…","web-stories")));const t=h(r);e.document.write(`<script>\n            setTimeout(function() {\n              location.replace(${JSON.stringify(t)});\n            }, 5000);\n          <\/script>`)}}catch(e){}(f?i:o)().then((t=>{if(e&&!e.closed&&e.location.href){const n=h(t?.previewLink??r);e.location.replace(n)}})).catch((()=>p(r)))}),[o,f,r,i]),E=(0,u.useCallback)((e=>{p(null);const t=h(s);window.open(t,eu+Math.random()),e.preventDefault()}),[s]),y=(0,u.useCallback)((()=>p(null)),[]),_=(0,d.__)("Preview","web-stories");return c.createElement(c.Fragment,null,c.createElement(Tooltip,{title:_,hasTail:!0},c.createElement(m.Button,{variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.QUATERNARY,size:g.BUTTON_SIZES.SMALL,onClick:b,disabled:n||t||l,"aria-label":_},c.createElement(Qd,null))),c.createElement(Jd,{isOpen:Boolean(s),onClose:y,onRetry:E}))};var nu=n(29042),ru=n(49599),au=n(42699),ou=n(70722),iu=n(68057),lu=n(60427),su=n(96764),cu=n(63415);const du=function(e){const t=(0,iu.getSettings)(),{timeFormat:n}=t;return(0,lu.default)(e,n)};const uu=function(){const e=(0,iu.getSettings)(),{timeFormat:t}=e;return!t||/a(?!\\)/.test(t.toLowerCase().replace(/\\\\/g,"").split("").reverse().join(""))},pu=(0,u.createContext)({state:{},actions:{}}),mu=e=>{let{children:t}=e;const[n,r]=(0,u.useState)(!1),[a,o]=(0,u.useState)(!1),[i,l]=(0,u.useState)(),[s,d]=(0,u.useState)(!1),p=(0,u.useCallback)((e=>{l(e)}),[l]),m=(0,u.useCallback)((()=>{(0,P.trackEvent)("checklist_toggled",{status:n?"closed":"open"}),r((e=>!e))}),[n]),g=(0,u.useCallback)((()=>{(0,P.trackEvent)("checklist_toggled",{status:"closed"}),r(!1)}),[]),f=(0,u.useCallback)((()=>{(0,P.trackEvent)("checklist_toggled",{status:"open"}),r(!0),o(!0)}),[]),h=(0,u.useCallback)((()=>o(!1)),[]),b=(0,u.useMemo)((()=>({state:{checklistFocused:a,isOpen:n,isChecklistMounted:s,openPanel:i},actions:{toggle:m,close:g,open:f,resetChecklistFocused:h,setIsChecklistMounted:d,setOpenPanel:p}})),[a,g,i,n,f,h,m,p,d,s]);return c.createElement(pu.Provider,{value:b},t)};function gu(e){return(0,u.useContextSelector)(pu,e??u.identity)}var fu=n(36798),hu=n(86376);const bu=70,Eu=Math.floor(1),yu=640,_u=853,vu=96,wu="checklist_companion",Tu=(0,d.__)("Checklist","web-stories"),Su={ACCESSIBILITY:"accessibility",DESIGN:"design",PRIORITY:"priority"},Cu={[Su.ACCESSIBILITY]:(0,d.__)("Accessibility","web-stories"),[Su.DESIGN]:(0,d.__)("Design","web-stories"),[Su.PRIORITY]:(0,d.__)("Priority","web-stories")},Iu={fontSizeTooSmall:{title:(0,$e.default)(
/* translators: %d: minimum font size. */
(0,d.__)("Increase font size to %s or above","web-stories"),12),footer:(0,$e.default)(
/* translators: %d: minimum font size. */
(0,d.__)("Ensure legibility by selecting text size %d or greater","web-stories"),12)},imagesMissingAltText:{title:(0,d.__)("Add assistive text to images","web-stories"),footer:(0,d.__)("Optimize accessibility and indexability with meaningful text to better assist users.","web-stories")},linkTappableRegionTooBig:{title:(0,d.__)("Reduce link size","web-stories"),footer:(0,d.__)("Elements with links must not cover most of the page. Decrease the size of elements with links.","web-stories")},linkTappableRegionTooSmall:{title:(0,$e.default)(
/* translators: %s: minimum tappable region size width x minimum tappable region size height. */
(0,d.__)("Increase tap area size to at least %s","web-stories"),"48x48px"),footer:(0,d.__)("Optimize accessibility and indexability with meaningful text to better assist users","web-stories")},lowContrast:{title:(0,d.__)("Increase contrast between text and background color","web-stories"),footer:(0,d.__)("Ensure legibility of text and ease of reading by increasing color contrast","web-stories"),textPanel:(0,d.__)("This color or font size combination may be hard for some people to read.","web-stories"),backgroundPanel:(0,d.__)("This background color may make some text hard to read.","web-stories"),warningIcon:(0,d.__)("Low Warning","web-stories")},videoMissingCaptions:{title:(0,d.__)("Add video captions","web-stories"),footer:(0,d.__)("Keep the audience engaged even when they can't listen to the audio","web-stories")},videoMissingTitle:{title:(0,d.__)("Add video description","web-stories"),footer:(0,d.__)("Improves indexability and accessibility (for videos without captions)","web-stories")}},xu={storyTooShort:{title:(0,$e.default)(
/* translators: %d: maximum number of pages. */
(0,d._n)("Make Web Story at least %d page","Make Web Story at least %d pages",4,"web-stories"),4),footer:(0,$e.default)(
/* translators: 1: minimum number of pages. 2: maximum number of pages. */
(0,d.__)("It is recommended to have between %1$d and %2$d pages in your story","web-stories"),4,30)},storyTooLong:{title:(0,$e.default)(
/* translators: %d: minimum number of pages. */
(0,d._n)("Make Web Story fewer than %d page","Make Web Story fewer than %d pages",30,"web-stories"),30),footer:(0,$e.default)(
/* translators: 1: minimum number of pages. 2: maximum number of pages. */
(0,d.__)("It is recommended to have between %1$d and %2$d pages in your story","web-stories"),4,30)},tooLittlePageText:{title:(0,d.__)("Add more text to page","web-stories"),footer:(0,$e.default)(
/* translators: %d: minimum number of story characters. */
(0,d._n)("Include at least %d character","Include at least %d characters",100,"web-stories"),100)},tooMuchPageText:{title:(0,d.__)("Reduce text amount on page","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,$e.default)(
/* translators: %d: maximum number of story characters. */
(0,d._n)("Include no more than %d character","Include no more than %d characters",200,"web-stories"),200)),c.createElement("li",null,(0,d.__)("Use a page attachment breaking up the text into multiple screens; or","web-stories")),c.createElement("li",null,(0,$e.default)(
/* translators: %s: maximum percentage of characters, depending on number of pages. */
(0,d.__)("Keep the total number of text-heavy pages under %s of total number of story pages","web-stories"),"10%")))},tooManyLinksOnPage:{title:(0,$e.default)(
/* translators: %s: maximum number of links per page. */
(0,d.__)("Avoid including more than %s links per page","web-stories"),3),footer:(0,$e.default)(
/* translators: %s: maximum number of links per page. */
(0,d.__)("Avoid having more than %s links on one page","web-stories"),3)},imageResolutionTooLow:{title:(0,d.__)("Increase image resolution","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,d.__)("Use larger resolution (2x or 3x) images for best appearance on screens with high pixel density","web-stories")),c.createElement("li",null,(0,$e.default)(
/* translators: %s: minimum image size width x minimum image size height. */
(0,d.__)("For full-screen images, use a resolution of at least %s","web-stories"),"828x1792px")))},videoFrameRateTooLow:{title:(0,$e.default)(
/* translators: %d: minimum number of frames per second for video. */
(0,d.__)("Increase video frame rate to at least %d fps","web-stories"),24),footer:(0,$e.default)(
/* translators: %d: minimum number of frames per second for video. */
(0,d._n)("Ensure your video has a minimum of %d frame per second","Ensure your video has a minimum of %d frames per second",24,"web-stories"),24)},videoResolutionTooLow:{title:(0,d.__)("Increase video resolution","web-stories"),footer:(0,$e.default)(
/* translators: 1: minimum video resolution. 2: minimum video width x minimum video height in pixels. */
(0,d.__)("Consider using a minimum resolution of %1$s (%2$s) to represent portrait videos","web-stories"),"480p","852x480px")},videoTooLong:{title:(0,$e.default)(
/* translators: %d: maximum video length in minutes. */
(0,d._n)("Split videos into segments of %d minute or less","Split videos into segments of %d minutes or less",Eu,"web-stories"),Eu),footer:(0,d.__)("Shorter videos help readers navigate stories","web-stories")},firstPageAnimation:{title:(0,d.__)("First Page Animations","web-stories"),footer:(0,d.__)("Animations on the first page of a story are not supported for user experience and performance reasons.","web-stories"),animationPanel:(0,d.__)("Animations on the first page of a story are not supported for user experience and performance reasons.","web-stories")}},Au={storyMissingDescription:{title:(0,d.__)("Add Web Story description","web-stories"),footer:(0,d.__)("Incorporate a brief description for better user experience","web-stories")},storyMissingTitle:{title:(0,d.__)("Add Web Story title","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,$e.default)(
/* translators: %d: maximum story title length in words. */
(0,d._n)("Keep under %d word","Keep under %d words",10,"web-stories"),10)),c.createElement("li",null,(0,$e.default)(
/* translators: %d: maximum story title length in characters. */
(0,d._n)("Don't exceed %d character","Don't exceed %d characters",bu,"web-stories"),bu)))},storyMissingPoster:{title:(0,d.__)("Add poster image","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,d.__)("Use as a representation of the story","web-stories")),c.createElement("li",null,(0,d.__)("Avoid images with embedded text","web-stories")),c.createElement("li",null,(0,$e.default)(
/* translators: %s: image dimensions.  */
(0,d.__)("Use an image that's at least %s","web-stories"),"640x853px")),c.createElement("li",null,(0,$e.default)(
/* translators: %s: aspect ratio.  */
(0,d.__)("Maintain a %s aspect ratio","web-stories"),"3:4")))},videoMissingPoster:{title:(0,d.__)("Add poster image to every video","web-stories"),footer:(0,d.__)("Ensure a better experience by displaying a poster while users wait for the video to load","web-stories")},storyTitleTooLong:{title:(0,$e.default)(
/* translators: %d: maximum number of story characters. */
(0,d._n)("Shorten title to fewer than %d character","Shorten title to fewer than %d characters",bu,"web-stories"),bu),footer:(0,$e.default)(
/* translators: %d: maximum number of story characters. */
(0,d._n)("Limit story title to %d character or less","Limit story title to %d characters or less",bu,"web-stories"),bu)},logoTooSmall:{title:(0,$e.default)(
/* translators: %s: image dimensions. */
(0,d.__)("Increase size of publisher logo to at least %s","web-stories"),"96x96px"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,$e.default)(
/* translators: %s: image dimensions. */
(0,d.__)("Use an image that's at least %s","web-stories"),"96x96px")),c.createElement("li",null,(0,$e.default)(
/* translators: %s: aspect ratio.  */
(0,d.__)("Maintain a %s aspect ratio","web-stories"),"1x1px")))},noPublisherLogo:{title:(0,d.__)("Add a publisher logo to your story","web-stories"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,$e.default)(
/* translators: %s: image dimensions. */
(0,d.__)("Use an image that's at least %s","web-stories"),"96x96px")),c.createElement("li",null,(0,$e.default)(
/* translators: %s: aspect ratio.  */
(0,d.__)("Maintain a %s aspect ratio","web-stories"),"1x1px")))},storyPosterSize:{title:(0,$e.default)(
/* translators: %s: image dimensions.  */
(0,d.__)("Correct poster image aspect ratio to %s","web-stories"),"640x853px"),footer:c.createElement(c.Fragment,null,c.createElement("li",null,(0,$e.default)(
/* translators: %s: image dimensions.  */
(0,d.__)("Use an image that's at least %s","web-stories"),"640x853px")),c.createElement("li",null,(0,$e.default)(
/* translators: %s: aspect ratio.  */
(0,d.__)("Maintain a %s aspect ratio","web-stories"),"3:4")))},videoNotOptimized:{title:(0,d.__)("Optimize videos","web-stories"),footer:(0,$e.default)(
/* translators: %s: video resolution (720p) */
(0,d.__)("Videos larger than %s can cause slower loading and higher bandwidth costs.","web-stories"),"720p")},storyMissingPublisherName:{title:(0,d.__)("Add Site Title","web-stories")},ampValidation:{title:(0,d.__)("Compatibility","web-stories"),footer:c.createElement(fu.default,{mapping:{a:c.createElement(hu.Link,{href:"https://wp.stories.google/docs/faq/",rel:"noreferrer",target:"_blank",onClick:e=>(0,P.trackClick)(e,"click_checklist_amp_test"),size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL})}},(0,d.__)("Your story contains errors that can affect eligibility to appear on Google. Please see <a>our FAQ</a> for more information.","web-stories"))}},ku="unavailable",Ou="recommended",Pu="all",Nu={[ku]:[],[Ou]:[Su.ACCESSIBILITY,Su.DESIGN],[Pu]:Object.values(Su)},Ru={[ku]:null,[Ou]:Su.DESIGN,[Pu]:Su.PRIORITY},Mu="story is no longer empty",Lu="publish button is pressed",Du="story 'recommended' section enabled",Bu="story 'high priority' section enabled",Fu="story is published, regardless of recommendations",Hu={[ku]:{[Mu]:Ou,[Lu]:Pu,[Fu]:Pu,[Du]:Ou},[Ou]:{[Bu]:Pu,[Lu]:Pu,[Fu]:Pu},[Pu]:{}},Uu=(e,t)=>Hu[e][t]||e,ju=(0,u.createContext)({state:{},actions:{}});function ChecklistCheckpointProvider(e){let{children:t}=e;const[n,r]=(0,u.useReducer)(Uu,ku),[a,o]=(0,u.useState)(),[i,l]=(0,u.useState)(),s=a>0,d=Qa((e=>{let{state:{story:t}}=e;return t.status}));(0,u.useEffect)((()=>{"publish"===d&&r(Fu)}),[d]),Ka(Ga.onSecondPageAdded,(0,u.useCallback)((()=>{r(Du)}),[])),Ka(Ga.onFifthPageAdded,(0,u.useCallback)((()=>{r(Bu)}),[])),Ka(Ga.onInitialElementAdded,(0,u.useCallback)((()=>{r(Mu)}),[]));const p=(0,u.useCallback)((e=>{o(e)}),[]),m=(0,u.useCallback)((()=>r(Lu)),[]),g=(0,u.useCallback)((()=>{l(!0)}),[]),f=(0,u.useCallback)((()=>{l(!1)}),[]),h=(0,u.useMemo)((()=>({state:{checkpoint:n,hasHighPriorityIssues:s,reviewChecklistRequested:i},actions:{updateHighPriorityCount:p,handleResetReviewChecklist:f,handleReviewChecklist:g,showPriorityIssues:m}})),[n,g,m,f,i,s,p]);return c.createElement(ju.Provider,{value:h},t)}function zu(e){return(0,u.useContextSelector)(ju,e??u.identity)}const Gu=(0,u.createContext)(null),Yu=(0,u.createContext)(null),Zu={[Su.PRIORITY]:{},[Su.DESIGN]:{},[Su.ACCESSIBILITY]:{}};function ChecklistCountProvider(e){let{hasChecklist:t,children:n}=e;const r=(0,u.useState)({...Zu,hasChecklist:t});return c.createElement(Gu.Provider,{value:r},n)}function ChecklistCategoryProvider(e){let{children:t,category:n}=e;const r=(0,u.useContext)(Gu)?.[1];if(!r)throw new Error("Cannot use `ChecklistCategoryProvider` outside of `ChecklistCountProvider`");const a=(0,u.useCallback)((e=>r((t=>({...t,[n]:{...t[n],...e}})))),[n,r]);return c.createElement(Yu.Provider,{value:a},t)}function Wu(e,t){const n=(0,u.useContext)(Yu);if(!n)throw new Error("Cannot use `useRegisterCheck` outside of `ChecklistCategoryProvider`");(0,u.useEffect)((()=>n({[e]:t})),[e,n,t])}function Vu(e){const t=(0,u.useContext)(Gu)?.[0];if(!t)throw new Error("Cannot use `useCategoryCount` outside of `ChecklistCountProvider`");return Object.values(t[e]||{}).filter((e=>e)).length}Object.defineProperty(_.default,"name",{value:"stylisRTLPlugin"});const $u=[_.default],qu=[];const Ku=function DirectionAware(e){let{children:t}=e;const{isRTL:n}=U();return c.createElement(p.StyleSheetManager,{stylisPlugins:n?$u:qu},t)};var Xu=n(12666);function Qu(){return Qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qu.apply(this,arguments)}const Ju="entering",ep="entered",tp="exiting",np="default",rp={default:{entering:Ju},entering:{entered:ep},entered:{exiting:tp},exiting:{exited:"exited"},exited:{entering:Ju}},ap=(e,t)=>rp[e]?.[t]||e,op=(0,u.forwardRef)(((e,t)=>{let{state:n,children:r}=e;const[a,o]=(0,u.useReducer)(ap,n===ep?n:np),[i,l]=(0,u.useState)(n);(0,u.useEffect)((()=>{const e=requestAnimationFrame((()=>l(n)));return()=>cancelAnimationFrame(e)}),[n]),(0,u.useEffect)((()=>{o(i)}),[i]);const s=[Ju,ep].includes(a)&&"exiting"===n,c=[tp].includes(a)&&[Ju,ep].includes(n)||s;return(0,u.cloneElement)(r(c?n:a),{ref:t})}));function ScheduledTransition(e){let{children:t,...n}=e;const r=(0,u.useRef)();return c.createElement(Xu.default,Qu({nodeRef:r},n),(e=>c.createElement(op,{ref:r,state:e},(e=>t(e)))))}const ip=p.default.div.withConfig({displayName:"navigationWrapper__NavigationWrapper",componentId:"sc-1qotgfl-0"})(["position:absolute;",";bottom:0;max-height:calc(100vh - ","px);width:","px;color:",";background-color:",";border:1px solid ",";border-radius:",";overflow:hidden;",""],(e=>{let{alignRight:t=!1}=e;return t?"right: 0":"left: 0"}),161,310,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.bg.tertiary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{isOpen:t}=e;return!t&&(0,p.css)(["&,*{height:0;visibility:hidden;}"])}));ip.propTypes={alignRight:za().bool,isOpen:za().bool};const lp=ip;var sp=n(19901),cp=n(18969);var dp=n(35199),up=n(33625);const pp=(0,p.css)(["",";"],(e=>{let{theme:t}=e;return up.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),mp=(0,p.css)([":focus-within{",";}"],(e=>{let{theme:t}=e;return up.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),gp=p.default.div.withConfig({displayName:"secondaryPopup__NavBar",componentId:"sc-1m7fu09-0"})(["display:flex;justify-content:space-between;align-items:center;width:100%;height:","px;background-color:",";",""],48,(e=>{let{theme:t}=e;return t.colors.bg.secondary}),dp.expandTextPreset(((e,t)=>{let{label:n}=e,{MEDIUM:r}=t;return n[r]}))),fp=(0,p.default)(m.Button).withConfig({displayName:"secondaryPopup__NavButton",componentId:"sc-1m7fu09-1"})([""," ",";svg{width:32px;}* + *{margin-left:12px;}"],dp.expandTextPreset(((e,t)=>{let{label:n}=e,{MEDIUM:r}=t;return n[r]})),pp),hp=p.default.div.withConfig({displayName:"topNavigation__TopNavButtons",componentId:"sc-rirhnw-0"})(["padding-right:15px;"]),bp=(0,p.default)(sp.Headline).attrs({as:"h2",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL}).withConfig({displayName:"topNavigation__Label",componentId:"sc-rirhnw-1"})(["padding-left:24px;font-weight:",";"],(e=>{let{theme:t}=e;return t.typography.weight.regular})),Ep=(0,u.forwardRef)((function TopNavigation(e,t){let{onClose:n,label:r,popupId:a}=e;return c.createElement(gp,null,c.createElement(bp,null,r),c.createElement(hp,null,c.createElement(fp,{ref:t,"aria-label":(0,d.__)("Close","web-stories"),onClick:()=>{!function(e){document.querySelector(`[aria-owns=${e}]`)?.focus()}(a),n()},type:g.BUTTON_TYPES.PLAIN,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.CIRCLE},c.createElement(cp.default,null))))})),yp=(0,p.css)(["opacity:1;transform:none;"]),_p=e=>(0,p.css)(["opacity:0;transform:translateX(","px);"],"left"===e?-20:20),vp={entering:yp,entered:yp,exiting:_p,exited:_p},wp=p.default.div.withConfig({displayName:"secondaryPopup__Controller",componentId:"sc-b3cg46-0"})(["position:absolute;top:-12px;",":0px;opacity:0;transform:translateX(-20px);transition:opacity ","ms ",",transform ","ms ",";",""],(e=>{let{placement:t}=e;return t}),300,Xe.BEZIER.default,300,Xe.BEZIER.default,(e=>{let{state:t}=e;return vp[t]}));const Tp=function Popup(e){let{isOpen:t,popupId:n,children:r,ariaLabel:a,shouldKeepMounted:o,placement:i="left",onEnter:l=Bt,onExited:s=Bt}=e;return c.createElement(ScheduledTransition,{in:t,timeout:300,mountOnEnter:!o,unmountOnExit:!o,onEnter:l,onExited:s},(e=>c.createElement(wp,{id:n,role:"dialog","aria-label":a,state:e,placement:i},r)))};var Sp=n(76517);const Cp={NORMAL:"normal",DANGER:"danger"};var Ip=n(19722);const xp=p.default.div.attrs({role:"tablist"}).withConfig({displayName:"tablist__Tablist",componentId:"sc-oyok4o-0"})(["background:",";*{user-select:text;}"],(e=>{let{theme:t}=e;return t.colors.bg.primary}));xp.propTypes={"aria-label":za().string.isRequired};const Ap=(0,p.default)(sp.Headline).attrs({as:"h3",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL}).withConfig({displayName:"tablist__PanelText",componentId:"sc-oyok4o-1"})(["transition:background-color 300ms ease-in;"]),kp=p.default.div.withConfig({displayName:"tablist__TabButtonWrapper",componentId:"sc-oyok4o-2"})(["position:relative;height:60px;width:100%;padding:5px 4px;&,:hover,:focus-within,.","{background-color:",";}"],Ip.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return t.colors.bg.secondary})),Op=(0,p.default)(m.Button).attrs({variant:g.BUTTON_VARIANTS.PLAIN}).withConfig({displayName:"tablist__TabButton",componentId:"sc-oyok4o-3"})(["position:absolute;display:flex;justify-content:space-between;width:calc(100% - 8px);height:calc(100% - 10px);padding:16px;border-radius:0;&,:hover,:focus,.","{background-color:",";}",";","{opacity:0.8;}",";"],Ip.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return up.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)}),Ap,(e=>{let{status:t}=e;return t===Cp.DANGER&&(0,p.css)(["&,","{color:",";}","{background-color:",";}"],Ap,(e=>{let{theme:t}=e;return t.colors.fg.negative}),Mp,(e=>{let{theme:t}=e;return t.colors.fg.negative}))})),Pp=p.default.div.withConfig({displayName:"tablist__PanelWrapper",componentId:"sc-oyok4o-4"})(["width:100%;background:",";&:not(:first-child) > ","{box-shadow:0px -1px 0 0 ",";margin-top:1px;}",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),Op,(e=>{let{theme:t}=e;return t.colors.divider.tertiary}),(e=>{let{isExpanded:t,theme:n}=e;return t&&(0,p.css)(["& ",",& ","{:not(:last-child){box-shadow:none;}",";","{opacity:1;}&,:hover,:focus{background-color:",";}svg{transform:rotate(0);}}","{height:560px;","{visibility:visible;}}"],Op,kp,up.focusableOutlineCSS,Ap,n.colors.bg.primary,Lp,Dp)})),Np=p.default.div.withConfig({displayName:"tablist__ButtonText",componentId:"sc-oyok4o-5"})(["display:flex;align-items:center;justify-content:center;margin-left:-12px;"]),Rp=p.default.div.withConfig({displayName:"tablist__IconContainer",componentId:"sc-oyok4o-6"})(["height:32px;width:32px;color:",";svg{transform:rotate(-90deg);transition:transform 300ms ease-in-out;}"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),Mp=p.default.div.withConfig({displayName:"tablist__Badge",componentId:"sc-oyok4o-7"})(["display:flex;align-items:center;justify-content:center;height:20px;width:20px;border-radius:",";background-color:",";","{color:",";line-height:20px;}"],(e=>{let{theme:t}=e;return t.borders.radius.round}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),Ap,(e=>{let{theme:t}=e;return t.colors.inverted.fg.primary})),Lp=p.default.div.withConfig({displayName:"tablist__ScrollableContent",componentId:"sc-oyok4o-8"})(["height:0;max-height:",";overflow-y:",";transition:height 300ms ease-in;"],(e=>{let{maxHeight:t}=e;return t?`calc(${t})`:"none"}),(e=>{let{maxHeight:t}=e;return t?"scroll":"hidden"})),Dp=p.default.div.withConfig({displayName:"tablist__TabPanel",componentId:"sc-oyok4o-9"})(["padding:0;visibility:hidden;overflow:hidden;background:",";transition:all 300ms ease-in;margin:0 0 16px 16px;",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),A.scrollbarCSS),Bp=e=>{let{badgeCount:t=0,children:n,className:r,id:a,isExpanded:o,onClick:i,maxHeight:l,status:s=Cp.NORMAL,title:p}=e;const m=(0,u.useMemo)(pe.default,[]),g=a||m;return c.createElement(Pp,{className:r,isExpanded:o},c.createElement(kp,null,c.createElement(Op,{"aria-controls":g,"aria-selected":o,onClick:i,role:"tab",status:s},c.createElement(Np,null,c.createElement(Rp,null,c.createElement(Sp.default,null)),c.createElement(Ap,{id:`${p}-${g}`,"aria-label":(0,$e.default)(
/* translators: 1: number of issues. 2: type of issue, for example "High Priority". */
(0,d._n)("%1$d %2$s issue","%1$d %2$s issues",t,"web-stories"),t,p)},p)),c.createElement(Mp,null,c.createElement(Ap,{"aria-hidden":!0},t)))),c.createElement(Lp,{"aria-hidden":!o,maxHeight:l},c.createElement(Dp,{id:g,"aria-labelledby":`${p}-${g}`,role:"tabpanel"},n)))};var Fp,Hp;function Up(){return Up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Up.apply(this,arguments)}const SvgCheckbox=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Up({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Fp||(Fp=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.897 18.146a.5.5 0 0 1 .707.708l-4.493 4.493-.007.007a.498.498 0 0 1-.708 0l-.006-.007-2.494-2.493a.5.5 0 0 1 .708-.708l2.146 2.147 4.147-4.147z",fill:"currentColor"})),Hp||(Hp=c.createElement("path",{d:"M20.333 15.5v-5.083C20.333 9.634 19.7 9 18.917 9h-6.5C11.634 9 11 9.634 11 10.417v11.166c0 .783.634 1.417 1.417 1.417H14.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},jp=(0,c.memo)(SvgCheckbox);var zp=n(32501);function Gp(){return Gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gp.apply(this,arguments)}const Yp=36,Zp=(0,p.default)(m.Button).withConfig({displayName:"toggleButton__Button",componentId:"sc-1de7s10-0"})(["width:auto;display:flex;align-items:center;justify-content:space-between;border-width:1px;border-style:solid;padding:0 10px;white-space:nowrap;"," > :not(svg):last-child{margin-right:0;}.main-icon{height:","px;width:auto;margin:-8px;display:block;}"],(e=>{let{isOpen:t,hasText:n,height:r=Yp,theme:a}=e;return(0,p.css)(["height:","px;min-width:","px;color:",";border-color:",";background-color:",";","}"],r,r,a.colors.fg.primary,t?a.colors.bg.secondary:a.colors.border.defaultNormal,t?a.colors.bg.secondary:a.colors.bg.primary,n&&(0,p.css)(["",";"],dp.expandPresetStyles({preset:{...a.typography.presets.paragraph[Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL]},theme:a})))}),Xe.THEME_CONSTANTS.ICON_SIZE);Zp.propTypes={hasText:za().bool,isOpen:za().bool,height:za().oneOfType([za().number,za().string])};const Wp=22,Vp=f.theme.typography.presets.label[Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL],$p=(0,p.default)(Ke.Text).attrs({as:"span"}).withConfig({displayName:"toggleButton__CountBadge",componentId:"sc-1de7s10-1"})(["",""],(e=>{let{size:t=Wp,fontSize:n=Vp.size,theme:r}=e;return(0,p.css)(["min-width:","px;width:auto;height:","px;padding:0 ","px;margin:0 8px;display:flex;align-items:center;justify-content:center;color:",";background-color:",";border-radius:9999px;font-size:","px;line-height:0;"],t,t,t/4,r.colors.fg.primary,r.colors.bg.quaternary,n)}));$p.propTypes={size:za().oneOfType([za().number,za().string]),fontSize:za().oneOfType([za().number,za().string])};const qp=(0,u.forwardRef)(((e,t)=>{let{copy:n,isOpen:r=!1,notificationCount:a=0,MainIcon:o,label:i,shortcut:l,popupZIndexOverride:s,hasMenuList:d=!1,...u}=e;const p=a>0;return c.createElement(Tooltip,{hasTail:!0,title:i,placement:Vd.PLACEMENT.TOP,shortcut:l,popupZIndexOverride:s},c.createElement(Zp,Gp({ref:t,"aria-haspopup":!0,"aria-pressed":r,"aria-expanded":r,hasText:Boolean(n),isOpen:r,isSquare:!p,type:g.BUTTON_TYPES.TERTIARY,variant:g.BUTTON_VARIANTS.RECTANGLE,size:g.BUTTON_SIZES.MEDIUM},u),o&&c.createElement(o,{className:"main-icon"}),n,p&&c.createElement($p,null,a),d&&c.createElement(zp.Disclosure,{direction:"down",isOpen:r})))}));function Toggle(e){let{isOpen:t=!1,popupId:n="",onClick:r=Bt}=e;const a=Vu(Su.PRIORITY),{checkpoint:o}=zu((e=>{let{state:{checkpoint:t}}=e;return{checkpoint:t}})),i=(0,u.useMemo)((()=>o===Pu?a:0),[o,a]);return c.createElement(qp,{"aria-owns":n,onClick:r,isOpen:t,MainIcon:jp,label:(0,d.__)("Checklist","web-stories"),"aria-label":i>0?(0,$e.default)(
/* translators: %s:  number of unaddressed issues. */
(0,d._n)("Checklist: %s unaddressed issue","Checklist: %s unaddressed issues",i,"web-stories"),i):(0,d.__)("Checklist","web-stories"),notificationCount:i})}qp.displayName="ToggleButton";const Kp=(0,p.default)(Bp).withConfig({displayName:"checklist__StyledTablistPanel",componentId:"sc-1rujego-0"})(["height:",";visibility:",";button{display:",";}"],(e=>{let{badgeCount:t}=e;return 0===t?0:"auto"}),(e=>{let{badgeCount:t}=e;return 0===t?"hidden":"visible"}),(e=>{let{badgeCount:t}=e;return 0===t?"none":"auto"})),Xp=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"checklist__PanelText",componentId:"sc-1rujego-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));function Qp(){return gu((e=>{let{state:t}=e;return t.isChecklistMounted}))}function DesignPanel(e){let{badgeCount:t=0,isOpen:n,maxHeight:r,onClick:a,title:o,children:i}=e;return Qp()?c.createElement(Kp,{badgeCount:t,isExpanded:Boolean(t)&&n,onClick:a,maxHeight:r,title:o},c.createElement(Xp,null,(0,d.__)("Follow best practices for Web Stories.","web-stories")),i):i}function DesignChecks(e){return c.createElement(ChecklistCategoryProvider,{category:Su.DESIGN},c.createElement(DesignPanel,e,e.children))}function AccessibilityPanel(e){let{children:t,badgeCount:n,isOpen:r,onClick:a,maxHeight:o,title:i}=e;return Qp()?c.createElement(Kp,{badgeCount:n,isExpanded:Boolean(n)&&r,onClick:a,maxHeight:o,title:i},c.createElement(Xp,null,(0,d.__)("Make your Web Story accessible.","web-stories")),t):t}function AccessibilityChecks(e){return c.createElement(ChecklistCategoryProvider,{category:Su.ACCESSIBILITY},c.createElement(AccessibilityPanel,e,e.children))}function PriorityPanel(e){let{children:t,badgeCount:n=0,isOpen:r,onClick:a,maxHeight:o,title:i}=e;return Qp()?c.createElement(Kp,{badgeCount:n,isExpanded:Boolean(n)&&r,onClick:a,maxHeight:o,status:Cp.DANGER,title:i},c.createElement(Xp,null,(0,d.__)("Make this Web Story easier to discover.","web-stories")),t):t}function PriorityChecks(e){const t=Vu(Su.PRIORITY),{updateHighPriorityCount:n}=zu((e=>{let{actions:{updateHighPriorityCount:t}}=e;return{updateHighPriorityCount:t}}));return(0,u.useEffect)((()=>{n(t)}),[n,t]),c.createElement(ChecklistCategoryProvider,{category:Su.PRIORITY},c.createElement(PriorityPanel,e,e.children))}var Jp,em;function tm(){return tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tm.apply(this,arguments)}const SvgCheckmarkCircle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",tm({viewBox:"0 0 58 58",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Jp||(Jp=c.createElement("path",{d:"M29 54.146c13.888 0 25.147-11.259 25.147-25.147C54.147 15.11 42.888 3.852 29 3.852c-13.888 0-25.147 11.258-25.147 25.147 0 13.888 11.259 25.147 25.147 25.147z",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"})),em||(em=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M43.198 18.64a1.5 1.5 0 0 1 .037 2.12l-17.93 18.563a1.5 1.5 0 0 1-2.157 0l-7.383-7.643a1.5 1.5 0 1 1 2.158-2.084l6.304 6.526 16.85-17.445a1.5 1.5 0 0 1 2.121-.037z",fill:"currentColor"})))},nm=(0,c.memo)(SvgCheckmarkCircle),rm=p.default.div.withConfig({displayName:"emptyContent__Wrapper",componentId:"sc-83zuqv-0"})(["display:grid;grid-template-rows:113px 64px;width:308px;margin:0 auto 32px;& > *{display:flex;align-self:center;justify-self:center;color:",";}p{width:226px;text-align:center;}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),am=p.default.div.withConfig({displayName:"emptyContent__IconContainer",componentId:"sc-83zuqv-1"})(["height:50px;width:50px;"]),EmptyContent=()=>c.createElement(rm,null,c.createElement(am,null,c.createElement(nm,null)),c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("You are all set for now. Return to this checklist as you build your Web Story for tips on how to improve it.","web-stories"))),om=()=>{const e=Vu(Su.ACCESSIBILITY),t=Vu(Su.DESIGN),n=Vu(Su.PRIORITY),{checkpoint:r}=zu((e=>{let{state:{checkpoint:t}}=e;return{checkpoint:t}}));return e+t+n===0||r===ku?c.createElement(EmptyContent,null):null},im=p.default.div.withConfig({displayName:"checklist__Wrapper",componentId:"sc-ai4sw8-0"})(["z-index:",";"],3),lm=(0,p.default)(lp).withConfig({displayName:"checklist__StyledNavigationWrapper",componentId:"sc-ai4sw8-1"})([""]),sm=(0,u.forwardRef)((function ThroughputPopup(e,t){let{isOpen:n,children:r,close:a}=e;const o=(0,u.useRef)(),{checklistFocused:i,isChecklistMounted:l,resetChecklistFocused:s,setIsChecklistMounted:p}=gu((e=>{let{state:{isChecklistMounted:t,checklistFocused:n},actions:{setIsChecklistMounted:r,resetChecklistFocused:a}}=e;return{checklistFocused:n,isChecklistMounted:t,resetChecklistFocused:a,setIsChecklistMounted:r}}));return(0,u.useEffect)((()=>{i&&o.current&&o.current.focus(),s()}),[i,s]),c.createElement(Tp,{popupId:wu,isOpen:n,ariaLabel:Tu,shouldKeepMounted:!0,onEnter:()=>p(!0),onExited:()=>p(!1)},l?c.createElement(lm,{ref:t,isOpen:n},c.createElement(Ep,{ref:o,onClose:a,label:Tu,popupId:wu}),c.createElement(xp,{id:"pre-publish-checklist","data-isexpanded":n,"aria-label":(0,d.__)("Potential Story issues by category","web-stories")},r),c.createElement(om,null)):r)}));function Checklist(e){let{items:t={}}=e;const{close:n,openPanel:r,toggle:a,isOpen:o,isChecklistMounted:i,setOpenPanel:l}=gu((e=>{let{actions:{close:t,toggle:n,setOpenPanel:r},state:{isOpen:a,isChecklistMounted:o,openPanel:i}}=e;return{close:t,toggle:n,isOpen:a,isChecklistMounted:o,openPanel:i,setOpenPanel:r}})),s=Vu(Su.PRIORITY),d=Vu(Su.DESIGN),p=Vu(Su.ACCESSIBILITY),{checkpoint:m}=zu((e=>{let{state:{checkpoint:t}}=e;return{checkpoint:t}})),g=(0,u.useRef)(),f=(0,u.useCallback)((e=>()=>l((t=>t===e?null:e))),[l]);(0,u.useEffect)((()=>{if(i){const e=g.current?.querySelector(tc.FOCUSABLE_SELECTORS.join(", "));e?.focus()}}),[i]),(0,u.useEffect)((()=>{m&&l(Ru[m])}),[m,l]);const h=Nu[m],b=h.includes(Su.PRIORITY)?s:0,E=h.includes(Su.DESIGN)?d:0,y=h.includes(Su.ACCESSIBILITY)?p:0,_=(e=>{if(e)return`100vh - ${48+60*e+92+69}px`})([b,E,y].filter((e=>Boolean(e))).length),{Priority:v,Design:w,Accessibility:T}=t;return c.createElement(Ku,null,c.createElement(im,{role:"region","aria-label":Tu},c.createElement(sm,{ref:g,close:n,isOpen:o},v&&c.createElement(PriorityChecks,{badgeCount:b,isOpen:o&&r===Su.PRIORITY,onClick:f(Su.PRIORITY),maxHeight:_,title:Cu[Su.PRIORITY]},c.createElement(v,null)),w&&c.createElement(DesignChecks,{badgeCount:E,isOpen:o&&r===Su.DESIGN,onClick:f(Su.DESIGN),maxHeight:_,title:Cu[Su.DESIGN]},c.createElement(w,null)),T&&c.createElement(AccessibilityChecks,{badgeCount:y,isOpen:o&&r===Su.ACCESSIBILITY,onClick:f(Su.ACCESSIBILITY),maxHeight:_,title:Cu[Su.ACCESSIBILITY]},c.createElement(T,null))),c.createElement(Toggle,{isOpen:o,onClick:a,popupId:wu})))}const cm=(0,p.keyframes)(["50%{background-color:",";}"],(0,qe.rgba)(f.theme.colors.standard.white,.3)),dm=(0,p.css)(["background-color:",";animation:"," 0.3s ease-in-out 2;"],(0,qe.rgba)(f.theme.colors.standard.white,0),cm),um=(0,p.css)(["",";"],up.focusCSS),pm=(0,u.createContext)({});const mm=function(e){return(0,u.useContextSelector)(pm,e??u.identity)};var gm=n(60811);const fm="selection",hm="link",bm="animation",{LINK:Em,ANIMATION:ym,..._m}=gm.default,vm={[fm]:Object.values(_m),[hm]:[Em],[bm]:[ym]},wm="insert",Tm="design",Sm="document";function Cm(e,t){return!!e?.dataTransfer?.types&&(Array.isArray(e.dataTransfer.types)?e.dataTransfer.types.includes(t):e.dataTransfer.types.contains(t))}const Im=(0,u.createContext)({}),xm=p.default.div.withConfig({displayName:"dropTarget__DropTargetComponent",componentId:"sc-12rok6t-0"})(["position:relative;width:100%;height:100%;"]),Am=p.default.div.withConfig({displayName:"dropTarget__Content",componentId:"sc-12rok6t-1"})(["position:relative;width:100%;height:100%;"]),km=p.default.div.withConfig({displayName:"dropTarget__Glasspane",componentId:"sc-12rok6t-2"})(["position:absolute;z-index:1000;top:0;left:0;width:100%;height:100%;"]);function Om(e){e.preventDefault(),e.stopPropagation()}function UploadDropTarget(e){let{disabled:t,label:n,labelledBy:r,onDrop:a,children:o}=e;const[i,l]=(0,u.useState)(!1),s=(0,u.useCallback)((e=>{const{dataTransfer:n}=e;(function(e){return Cm(e,"Files")})(e)&&(Om(e),t?n.effectAllowed="none":(n.effectAllowed="copy",l(!0)))}),[t]),d=(0,u.useCallback)((e=>{Om(e),l(!1)}),[]),p=(0,u.useCallback)((e=>{Om(e),l(!1),!t&&a&&a([...e.dataTransfer.files])}),[t,a]);return c.createElement(xm,{onDragEnter:s,onDrop:p,onDragOver:Om},i&&c.createElement(km,{onDragEnter:s,onDragLeave:d,onDragOver:Om,onDrop:p,"aria-label":n,"aria-labelledby":r}),c.createElement(Im.Provider,{value:{isDragging:i}},c.createElement(Am,null,o)))}UploadDropTarget.defaultProps={disabled:!1,label:null,labelledBy:null,onDrop:null};const Pm=UploadDropTarget;var Nm;function Rm(){return Rm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rm.apply(this,arguments)}const SvgArrowCloud=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Rm({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Nm||(Nm=c.createElement("path",{d:"m13.5 16 3-3m0 0 3 3m-3-3v7m-6-7-.59.131A4.994 4.994 0 0 0 6 18.006v0A4.994 4.994 0 0 0 10.994 23h12.048A3.958 3.958 0 0 0 27 19.042v0a3.958 3.958 0 0 0-3.52-3.933L22.5 15c0-1-1-6-6-6-3.5 0-5.5 2.5-6 4Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},Mm=(0,c.memo)(SvgArrowCloud);const Lm=function(e){return(0,u.useContextSelector)(Im,e??u.identity)};function Dm(){return Dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dm.apply(this,arguments)}const Bm=p.default.div.withConfig({displayName:"overlay__Overlay",componentId:"sc-u0s4sf-0"})(["position:absolute;z-index:999;top:0;left:0;width:100%;height:100%;background-color:",";"],(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.bg.primary,.6)}));const Fm=(0,u.forwardRef)((function UploadDropTargetOverlayWithRef(e,t){const{isDragging:n}=Lm((e=>({isDragging:e.isDragging})));return n?c.createElement(Bm,Dm({ref:t},e)):null})),Hm=(0,p.default)(Fm).withConfig({displayName:"message__Container",componentId:"sc-1cdb29v-0"})(["display:flex;align-items:center;justify-content:center;"]),Um=p.default.div.withConfig({displayName:"message__Box",componentId:"sc-1cdb29v-1"})(["width:100%;max-width:240px;padding:16px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;"]),jm=(0,p.default)(Ke.Text).withConfig({displayName:"message__Text",componentId:"sc-1cdb29v-2"})(["color:",";margin-bottom:14px;margin-top:0px;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),zm=(0,p.default)(Mm).withConfig({displayName:"message__Icon",componentId:"sc-1cdb29v-3"})(["height:52px;width:52px;color:",";"],(e=>{let{theme:t}=e;return t.colors.standard.white}));const Gm=(0,u.memo)((function UploadDropTargetMessage(e){let{message:t,...n}=e;const{allowedMimeTypes:{image:r,vector:a,video:o}}=U(),i=(0,u.useMemo)((()=>[...r,...a,...o]),[r,o,a]),l=(0,u.useMemo)((()=>i.map((e=>Rt(e))).flat()),[i]);let s=(0,d.__)("No file types are currently supported.","web-stories");return l.length&&(s=(0,$e.default)(
/* translators: %s is a list of allowed file extensions. */
(0,d.__)("You can upload %s.","web-stories"),(0,kt.default)(l))),c.createElement(Hm,n,c.createElement(Um,null,c.createElement(zm,null),c.createElement(jm,{isBold:!0,size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM},t),c.createElement(jm,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},s)))})),Ym={},Zm=["click","pointerdown","pointerup"],Wm="event";let Vm;const $m=function(e){let{node:t,eventData:n,eventType:r="click"}=e;const a="undefined"!=typeof PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes(Wm);!Vm&&a&&(Vm=new PerformanceObserver((e=>{for(const t of e.getEntries())Zm.includes(t.name)&&Ym[t.startTime]?.category&&!Ym[t.startTime]?.isReported&&(Ym[t.startTime].isReported=!0,(0,P.trackTiming)(Ym[t.startTime].category,t.duration,Ym[t.startTime].label,t.name))})),Vm.observe({entryTypes:[Wm]}));const{label:o,category:i}=n;(0,u.useEffect)((()=>{if(!t||!a)return;const e=t,n=e=>{Ym[e.timeStamp]={category:i,time:e.timeStamp},o&&(Ym[e.timeStamp].label=o)};return e.addEventListener(r,n),()=>{e.removeEventListener(r,n)}}),[i,o,t,r,a])};function qm(){return qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qm.apply(this,arguments)}const Km=p.default.ul.attrs({role:"tablist","aria-orientation":"horizontal"}).withConfig({displayName:"tabview__Tabs",componentId:"sc-10d408-0"})(["display:flex;flex-direction:row;align-items:stretch;width:100%;max-width:100%;justify-content:space-between;margin:0;padding:0;list-style:none;border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.secondary})),Xm=p.default.li.attrs((e=>{let{isActive:t}=e;return{tabIndex:t?0:-1,role:"tab","aria-selected":t}})).withConfig({displayName:"tabview__TabElement",componentId:"sc-10d408-1"})(["cursor:pointer;border:none;background:none;padding:0 4px;margin:","px 12px 9px;height:","px;display:flex;align-items:center;justify-content:center;position:relative;transition:color 0.2s ease;color:",";border-radius:",";",";:hover{color:",";}"," svg{display:block;width:32px;height:32px;margin:0 -4px;transform-origin:center center;transition:transform 0.3s ease,color 0.2s ease;color:",";border-radius:",";pointer-events:none;}svg.alert{width:","px;margin-left:4px;color:",";}span,svg:not(.alert){",";}&:hover span,&:hover svg:not(.alert),&:active span,&:active svg:not(.alert){color:",";}&.",",&[data-focus-visible-added]{svg:not(.alert){background-color:",";}}"],10,32,(e=>{let{theme:t,isActive:n}=e;return n?t.colors.fg.primary:t.colors.fg.tertiary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return up.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{isActive:t,theme:n}=e;return t&&(0,p.css)(["::after{content:'';position:absolute;background-color:",";height:2px;border-radius:1px;bottom:-10px;left:4px;right:4px;}"],n.colors.border.selection)}),(e=>{let{theme:t}=e;return t.colors.fg.tertiary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),28,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{isActive:t,theme:n}=e;return t&&`color: ${n.colors.fg.primary}`}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),Ip.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover})),Qm=(0,p.default)(sp.Headline).attrs({as:"p",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL}).withConfig({displayName:"tabview__TabText",componentId:"sc-10d408-2"})(["color:inherit;"]),tabview_noop=()=>{};const Jm=(0,u.forwardRef)((function UnreffedTab(e,t){let{children:n,tooltip:r=null,placement:a,refId:o,tabRefs:i,...l}=e;const{id:s}=l,d=s.includes("library")?Se.LIBRARY_PANEL_CLICK:Se.DESIGN_PANEL_CLICK;$m({node:i?.[o]?.current,eventData:{...d,label:`${o}_tab`}});const u=c.createElement(Xm,qm({ref:t},l),n);return null!==r?c.createElement(Tooltip,{title:r,placement:a,isDelayed:!0},u):u}));const eg=function TabView(e){let{getTabId:t=(e=>e),getAriaControlsId:n,onTabChange:r=tabview_noop,onTabRefUpdated:a=tabview_noop,tabs:o=[],label:i="",shortcut:l="",tab:s,tabRefs:d,...p}=e;const{isRTL:m}=U(),g=(0,u.useRef)(),f=(0,u.useRef)(),h=(0,u.useRef)({}),b=(0,u.useCallback)((e=>{d?.[e]?.current?d[e].current?.focus():h?.current[e]&&h.current[e]?.focus(),f.current=e}),[d]),E=(0,u.useCallback)((e=>{b(e),r(e)}),[b,r]);(0,Ir.useGlobalKeyDownEffect)({key:l,editable:!0},(()=>E(s)),[E,s]);const y=(0,u.useCallback)((e=>{const t=o[(e+o.length)%o.length];b(t.id)}),[o,b]),_=(0,u.useCallback)((e=>{const t=m?-e:e,n=o.findIndex((e=>{let{id:t}=e;return t===f.current}));y(n+t)}),[m,o,y]);return(0,Ir.useKeyDownEffect)(g,"left",(()=>_(-1)),[_]),(0,Ir.useKeyDownEffect)(g,"right",(()=>_(1)),[_]),(0,Ir.useKeyDownEffect)(g,["up","down"],(()=>{}),[]),(0,Ir.useKeyDownEffect)(g,"home",(()=>y(0)),[y]),(0,Ir.useKeyDownEffect)(g,"end",(()=>y(-1)),[y]),(0,Ir.useKeyDownEffect)(g,{key:["enter","space"],allowDefault:!0},(e=>{"tab"===e.target.getAttribute("role")&&(E(f.current),e.preventDefault())}),[E],{}),c.createElement(Km,qm({"aria-label":i,ref:g},p),o.map((e=>{let{id:r,title:o,icon:i,...l}=e;return c.createElement(Jm,qm({key:r,ref:e=>{d?.[r]?d[r].current=e:h.current[r]=e,a(e,r)},id:t(r),isActive:s===r,"aria-controls":n?n(r):null,"aria-selected":s===r,onClick:()=>E(r),onFocus:()=>{f.current=s},refId:r,tabRefs:d},l),Boolean(o)&&c.createElement(Qm,null,o),Boolean(i)&&c.createElement(i,{isActive:r===s}))})))},tg=(0,u.createContext)({state:{},actions:{},tabs:{},refs:{}});const ng=function(e){return(0,u.useContextSelector)(tg,e??u.identity)},rg=e=>`sidebar-tab-${e}`,ag=p.default.div.attrs({role:"tabpanel"}).withConfig({displayName:"sidebarContent__SidebarPane",componentId:"sc-1f2hu7i-0"})(["height:100%;overflow:overlay;"]),og=p.default.section.withConfig({displayName:"sidebarContent__SidebarPanes",componentId:"sc-1f2hu7i-1"})(["height:100%;"]);const ig=function Sidebar(){const{tab:e,tabs:t}=ng((e=>{let{state:{tab:t},data:{tabs:n}}=e;return{tab:t,tabs:n}}));return c.createElement(og,null,t.map((t=>{let{id:n,Pane:r}=t;return c.createElement(ag,{"aria-labelledby":n,id:rg(n),key:n,hidden:n!==e},n===e&&c.createElement(r,null))})))},lg=p.default.section.attrs({"aria-label":(0,d.__)("Sidebar","web-stories")}).withConfig({displayName:"sidebarLayout__Layout",componentId:"sc-hpe4no-0"})(["height:100%;display:flex;flex-direction:column;background-color:",";color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),sg=p.default.div.withConfig({displayName:"sidebarLayout__SidebarContainer",componentId:"sc-hpe4no-1"})(["height:100%;padding:0;overflow:auto;"]),cg=(0,p.default)(eg).withConfig({displayName:"sidebarLayout__UnjustifiedTabView",componentId:"sc-hpe4no-2"})(["justify-content:center;"]);const dg=function SidebarLayout(){const{tab:e,tabRefs:t,setSidebarContentNode:n,setTab:r,sidebar:a,tabs:o}=ng((e=>{let{state:{tab:t,tabRefs:n},actions:{setSidebarContentNode:r,setTab:a},refs:{sidebar:o},data:{tabs:i}}=e;return{tab:t,tabRefs:n,setSidebarContentNode:r,setTab:a,sidebar:o,tabs:i}})),{resetHighlight:i}=mm((e=>({resetHighlight:e.onFocusOut}))),l=(0,u.useCallback)((e=>{r(e),i(),(0,P.trackEvent)("inspector_tab_change",{name:e})}),[r,i]);return(0,Ir.useEscapeToBlurEffect)(a),c.createElement(lg,{ref:a},c.createElement(cg,{label:(0,d.__)("Sidebar Selection","web-stories"),tabs:o,tab:e,tabRefs:t,onTabChange:l,getAriaControlsId:rg,shortcut:"mod+option+3"}),c.createElement(sg,{ref:n},c.createElement(ig,null)))};const ug=function(){return c.createElement(Pm,{disabled:!0},c.createElement(dg,null))},pg="media",mg="media3p",gg="text",fg="shapes",hg="pageTemplates",bg="shopping",Eg={STORY_TITLE:"STORY_TITLE",STYLE_PANE:"STYLE_PANE",ANIMATION:"ANIMATION",ASSISTIVE_TEXT:"ASSISTIVE_TEXT",CAPTIONS:"CAPTIONS",EXCERPT:"EXCERPT",LINK:"LINK",PAGE_BACKGROUND:"PAGE_BACKGROUND",POSTER:"POSTER",PUBLISHER_LOGO:"PUBLISHER_LOGO",VIDEO_A11Y_POSTER:"VIDEO_A11Y_POSTER",STYLE:"STYLE",FONT:"FONT",TEXT_COLOR:"TEXT_COLOR",MEDIA:"MEDIA",MEDIA3P:"MEDIA3P",TEXT_SET:"TEXT",PAGE_TEMPLATES:"PAGE_TEMPLATES",PAGE_BACKGROUND_AUDIO:"PAGE_BACKGROUND_AUDIO"},yg={[Eg.STORY_TITLE]:{focus:!0},[Eg.STYLE_PANE]:{focus:!0,tab:Tm,section:fm},[Eg.POSTER]:{focus:!0,tab:Sm},[Eg.PUBLISHER_LOGO]:{focus:!0,tab:Sm},[Eg.EXCERPT]:{focus:!0,tab:Sm},[Eg.PAGE_BACKGROUND_AUDIO]:{focus:!0,tab:Tm},[Eg.CAPTIONS]:{focus:!0,tab:Tm,section:fm},[Eg.ASSISTIVE_TEXT]:{focus:!0,tab:Tm,section:fm},[Eg.PAGE_BACKGROUND]:{focus:!0,tab:Tm,section:fm},[Eg.ANIMATION]:{focus:!0,tab:Tm,section:bm},[Eg.FONT]:{focus:!0,tab:Tm,section:fm},[Eg.LINK]:{focus:!0,tab:Tm,section:hm},[Eg.VIDEO_A11Y_POSTER]:{focus:!0,tab:Tm,section:fm},[Eg.STYLE]:{focus:!0,tab:Tm,section:fm},[Eg.TEXT_COLOR]:{focus:!0,tab:Tm,section:fm},[Eg.MEDIA]:{focus:!0,tab:wm,section:pg},[Eg.MEDIA3P]:{focus:!0,tab:wm,section:mg},[Eg.TEXT_SET]:{focus:!0,tab:wm,section:gg},[Eg.PAGE_TEMPLATES]:{focus:!0,tab:wm,section:hg}},_g=Eg;const vg=function HighlightsProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)({}),{setSelectedElementsById:a,setCurrentPage:o}=Qa((e=>{let{actions:t}=e;return{setSelectedElementsById:t.setSelectedElementsById,setCurrentPage:t.setCurrentPage}})),i=(0,u.useCallback)((e=>{let{elementId:t,elements:n,pageId:r}=e;r&&o({pageId:r}),Array.isArray(n)?a({elementIds:n.map((e=>{let{id:t}=e;return t}))}):t&&a({elementIds:[t]})}),[o,a]),l=(0,u.useCallback)((e=>{let{elements:t,elementId:n,pageId:a,highlight:o}=e;if((t||n||a)&&i({elements:t,elementId:n,pageId:a}),o){const{tab:e,section:t,...n}=yg[o];r({[o]:{...n,showEffect:!0},tab:e,section:t})}}),[i]),s=(0,u.useCallback)((()=>r({})),[r]),d=(0,u.useCallback)((e=>r((t=>({[e]:{...t[e],showEffect:!1}})))),[]),p=(0,u.useMemo)((()=>({setHighlights:l,onFocusOut:s,cancelEffect:d,...n})),[d,s,l,n]);return c.createElement(pm.Provider,{value:p},t)},wg={ADD_ANIMATION:{trackingEventName:"add_animation",text:(0,d.__)("Add animation","web-stories")},ADD_LINK:{trackingEventName:"add_link",text:(0,d.__)("Add link","web-stories")},ADD_CAPTIONS:{trackingEventName:"add_captions",text:(0,d.__)("Add captions","web-stories")},AUTO_STYLE_TEXT:{trackingEventName:"auto_style_text",text:(0,d.__)("Adaptive text colors","web-stories")},CHANGE_BACKGROUND_COLOR:{trackingEventName:"change_background_color",text:(0,d.__)("Change background color","web-stories")},CHANGE_TEXT_COLOR:{trackingEventName:"change_text_color",text:(0,d.__)("Change color","web-stories")},CHANGE_COLOR:{trackingEventName:"change_color",text:(0,d.__)("Change color","web-stories")},RESET_ELEMENT:{trackingEventName:"reset_element",text:(0,d.__)("Reset element","web-stories")},CHANGE_FONT:{trackingEventName:"change_font",text:(0,d.__)("Edit text","web-stories")},INSERT_BACKGROUND_MEDIA:{trackingEventName:"insert_background_media",text:(0,d.__)("Insert background media","web-stories")},INSERT_TEXT:{trackingEventName:"insert_text",text:(0,d.__)("Insert text","web-stories")},REPLACE_BACKGROUND_MEDIA:{trackingEventName:"replace_background_media",text:(0,d.__)("Replace background","web-stories")},REPLACE_MEDIA:{trackingEventName:"replace_media",text:(0,d.__)("Replace media","web-stories")},TRIM_VIDEO:{trackingEventName:"trim_video",text:(0,d.__)("Trim video","web-stories")}},Tg="animation",Sg="overlay",Cg="styles",Ig={locked:!0,topLeft:2,topRight:2,bottomLeft:2,bottomRight:2},xg=0;var Ag,kg;function Og(){return Og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Og.apply(this,arguments)}const SvgAlignBottom=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Og({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ag||(Ag=c.createElement("path",{d:"M8.5 21h15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),kg||(kg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 10.5A1.5 1.5 0 0 0 14 12v5a1.5 1.5 0 0 0 1.5 1.5h1A1.5 1.5 0 0 0 18 17v-5a1.5 1.5 0 0 0-1.5-1.5h-1Z",fill:"currentColor"})))},Pg=(0,c.memo)(SvgAlignBottom);var Ng,Rg;function Mg(){return Mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mg.apply(this,arguments)}const SvgAlignCenter=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Mg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ng||(Ng=c.createElement("path",{d:"M16 8.5v3M16 20.5v3",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),Rg||(Rg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 14a1.5 1.5 0 0 0-1.5 1.5v1a1.5 1.5 0 0 0 1.5 1.5h5a1.5 1.5 0 0 0 1.5-1.5v-1a1.5 1.5 0 0 0-1.5-1.5h-5Z",fill:"currentColor"})))},Lg=(0,c.memo)(SvgAlignCenter);var Dg,Bg;function Fg(){return Fg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fg.apply(this,arguments)}const SvgAlignLeft=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Fg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Dg||(Dg=c.createElement("path",{d:"M11 8.5v15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),Bg||(Bg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 14a1.5 1.5 0 0 0-1.5 1.5v1A1.5 1.5 0 0 0 15 18h5a1.5 1.5 0 0 0 1.5-1.5v-1A1.5 1.5 0 0 0 20 14h-5Z",fill:"currentColor"})))},Hg=(0,c.memo)(SvgAlignLeft);var Ug,jg;function zg(){return zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zg.apply(this,arguments)}const SvgAlignMiddle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",zg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ug||(Ug=c.createElement("path",{d:"M8.5 16h3M20.5 16h3",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),jg||(jg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 12a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5h1a1.5 1.5 0 0 0 1.5-1.5v-5a1.5 1.5 0 0 0-1.5-1.5h-1Z",fill:"currentColor"})))},Gg=(0,c.memo)(SvgAlignMiddle);var Yg,Zg;function Wg(){return Wg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wg.apply(this,arguments)}const SvgAlignRight=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Wg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Yg||(Yg=c.createElement("path",{d:"M21 8.5v15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),Zg||(Zg=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 14a1.5 1.5 0 0 0-1.5 1.5v1A1.5 1.5 0 0 0 12 18h5a1.5 1.5 0 0 0 1.5-1.5v-1A1.5 1.5 0 0 0 17 14h-5Z",fill:"currentColor"})))},Vg=(0,c.memo)(SvgAlignRight);var $g;function qg(){return qg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qg.apply(this,arguments)}const SvgAlignTextCenter=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",qg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,$g||($g=c.createElement("path",{d:"M9.5 11.5h15M13 16h8m-9 4.5h10",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},Kg=(0,c.memo)(SvgAlignTextCenter);var Xg;function Qg(){return Qg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qg.apply(this,arguments)}const SvgAlignTextJustified=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Qg({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Xg||(Xg=c.createElement("path",{d:"M8.5 11.5h15M8.5 16h15m-15 4.5h15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},Jg=(0,c.memo)(SvgAlignTextJustified);var ef;function tf(){return tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tf.apply(this,arguments)}const SvgAlignTextLeft=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",tf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ef||(ef=c.createElement("path",{d:"M9.5 11.5h15M9.5 16h8m-8 4.5h10",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},nf=(0,c.memo)(SvgAlignTextLeft);var rf;function af(){return af=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},af.apply(this,arguments)}const SvgAlignTextRight=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",af({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,rf||(rf=c.createElement("path",{d:"M24.5 20.5h-10m10-4.5h-8m8-4.5h-15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},of=(0,c.memo)(SvgAlignTextRight);var lf,sf;function cf(){return cf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cf.apply(this,arguments)}const SvgAlignTop=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",cf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,lf||(lf=c.createElement("path",{d:"M8.5 11h15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),sf||(sf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 13.5A1.5 1.5 0 0 0 14 15v5a1.5 1.5 0 0 0 1.5 1.5h1A1.5 1.5 0 0 0 18 20v-5a1.5 1.5 0 0 0-1.5-1.5h-1Z",fill:"currentColor"})))},df=(0,c.memo)(SvgAlignTop);var uf;function pf(){return pf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pf.apply(this,arguments)}const SvgAngle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",pf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,uf||(uf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 10a.5.5 0 0 0-1 0v12a.5.5 0 0 0 .5.5h12a.5.5 0 0 0 0-1h-4.8a6.801 6.801 0 0 0-6.7-6.698V10Zm0 5.802V21.5h5.7a5.8 5.8 0 0 0-5.7-5.698Z",fill:"currentColor"})))},mf=(0,c.memo)(SvgAngle);var gf,ff=n(65132);function hf(){return hf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hf.apply(this,arguments)}const SvgArrowLeft=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",hf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,gf||(gf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.422 10.856a.5.5 0 0 0-.702-.712l-5.571 5.5a.5.5 0 0 0 0 .712l5.57 5.5a.5.5 0 0 0 .703-.711L10.718 16.5H22.5a.5.5 0 1 0 0-1H10.718l4.704-4.644Z",fill:"currentColor"})))},bf=(0,c.memo)(SvgArrowLeft);var Ef;function yf(){return yf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yf.apply(this,arguments)}const SvgArrowLeftCurved=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",yf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ef||(Ef=c.createElement("path",{d:"M15.07 22.5 9.5 17m0 0 5.57-5.5M9.5 17h7a6 6 0 0 0 6-6V9.5",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},_f=(0,c.memo)(SvgArrowLeftCurved);var vf,wf=n(2039);function Tf(){return Tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tf.apply(this,arguments)}const SvgArrowOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Tf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,vf||(vf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 8A1.5 1.5 0 0 0 8 9.5v13A1.5 1.5 0 0 0 9.5 24h13a1.5 1.5 0 0 0 1.5-1.5v-13A1.5 1.5 0 0 0 22.5 8h-13ZM9 9.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-13Zm3.12 6.323a.5.5 0 0 1 .055-.705l3.499-3a.5.5 0 0 1 .651 0l3.5 3a.5.5 0 1 1-.651.76l-2.675-2.294V19.5a.5.5 0 1 1-1 0v-5.915l-2.674 2.292a.5.5 0 0 1-.704-.054Z",fill:"currentColor"})))},Sf=(0,c.memo)(SvgArrowOutline);var Cf;function If(){return If=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},If.apply(this,arguments)}const SvgArrowRight=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",If({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Cf||(Cf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.28 10.144a.5.5 0 0 0-.702.712l4.704 4.644H9.5a.5.5 0 0 0 0 1h11.782l-4.704 4.645a.5.5 0 0 0 .702.711l5.571-5.5a.5.5 0 0 0 0-.712l-5.57-5.5Z",fill:"currentColor"})))},xf=(0,c.memo)(SvgArrowRight);var Af;function kf(){return kf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kf.apply(this,arguments)}const SvgArrowRightCurved=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",kf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Af||(Af=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.281 9.144a.5.5 0 0 0-.703.712l4.704 4.644H15.5A6.5 6.5 0 0 0 9 21v1.5a.5.5 0 1 0 1 0V21a5.5 5.5 0 0 1 5.5-5.5h5.783l-4.705 4.645a.5.5 0 0 0 .703.711l5.57-5.5a.5.5 0 0 0 0-.711l-5.57-5.5Z",fill:"currentColor"})))},Of=(0,c.memo)(SvgArrowRightCurved);var Pf,Nf=n(80908);function Rf(){return Rf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rf.apply(this,arguments)}const SvgArrowUp=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Rf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Pf||(Pf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.145 15.422a.5.5 0 1 0 .712-.702l-5.5-5.571a.5.5 0 0 0-.712 0l-5.5 5.57a.5.5 0 0 0 .711.703l4.645-4.704V22.5a.5.5 0 1 0 1 0V10.718l4.644 4.704Z",fill:"currentColor"})))},Mf=(0,c.memo)(SvgArrowUp);var Lf;function Df(){return Df=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Df.apply(this,arguments)}const SvgArrowsLeftright=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Df({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Lf||(Lf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.354 8.854a.5.5 0 0 0-.708-.708l-3.5 3.5a.5.5 0 0 0 0 .708l3.5 3.5a.5.5 0 0 0 .708-.708L5.707 12.5H17.5a.5.5 0 1 0 0-1H5.707l2.647-2.646ZM23.646 16.854a.5.5 0 1 1 .707-.707l3.5 3.5a.5.5 0 0 1 0 .707l-3.5 3.5a.5.5 0 0 1-.707-.708l2.647-2.646H14.5a.5.5 0 1 1 0-1h11.793l-2.647-2.646Z",fill:"currentColor"})))},Bf=(0,c.memo)(SvgArrowsLeftright);var Ff;function Hf(){return Hf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hf.apply(this,arguments)}const SvgBorder=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Hf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ff||(Ff=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 19.929a1.074 1.074 0 0 1-.299.742l-.04-.01.01.04a1.074 1.074 0 0 1-.742.299h-.94v-.536h.94a.538.538 0 0 0 .128-.015l.315-.077.077-.315a.538.538 0 0 0 .015-.128v-.94H21v.94Zm0-3.558h-.536v1.877H21v-1.877Zm0-2.62h-.536v1.878H21v-1.877ZM16.37 11v.536h1.878V11h-1.877Zm-1.62.536h.88V11H12.07a1.074 1.074 0 0 0-1.04.815c-.02.082-.031.168-.031.256v7.858a1.074 1.074 0 0 0 .815 1.04c.082.02.168.031.256.031h3.559v-.536h-.88v-8.928ZM18.248 21v-.536h-1.877V21h1.877Zm.742-10h.939a1.074 1.074 0 0 1 .742.299l-.01.04.04-.01a1.074 1.074 0 0 1 .299.742v.94h-.536v-.94a.538.538 0 0 0-.015-.128l-.077-.315-.315-.077a.538.538 0 0 0-.128-.015h-.94V11Z",fill:"currentColor"})))},Uf=(0,c.memo)(SvgBorder);var jf;function zf(){return zf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zf.apply(this,arguments)}const SvgBorderBox=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",zf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,jf||(jf=c.createElement("path",{stroke:"currentColor",strokeWidth:3,d:"M10 10h12v12H10z"})))},Gf=(0,c.memo)(SvgBorderBox);var Yf;function Zf(){return Zf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zf.apply(this,arguments)}const SvgBox1=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Zf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Yf||(Yf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 10.5A1.5 1.5 0 0 1 12.5 9h6.25a1.5 1.5 0 0 1 1.5 1.5v11a1.5 1.5 0 0 1-1.5 1.5H12.5a1.5 1.5 0 0 1-1.5-1.5v-11Zm1.5-.5a.5.5 0 0 0-.5.5v11a.5.5 0 0 0 .5.5h6.25a.5.5 0 0 0 .5-.5v-11a.5.5 0 0 0-.5-.5H12.5Z",fill:"currentColor"})))},Wf=(0,c.memo)(SvgBox1);var Vf,$f=n(98477);function qf(){return qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qf.apply(this,arguments)}const SvgBox4Alternate=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",qf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Vf||(Vf=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 8A1.5 1.5 0 0 0 8 9.5v6A1.5 1.5 0 0 0 9.5 17h4a1.5 1.5 0 0 0 1.5-1.5v-6A1.5 1.5 0 0 0 13.5 8h-4ZM9 9.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-6Zm.5 9.5A1.5 1.5 0 0 0 8 20.5v2A1.5 1.5 0 0 0 9.5 24h4a1.5 1.5 0 0 0 1.5-1.5v-2a1.5 1.5 0 0 0-1.5-1.5h-4ZM9 20.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-2Zm8-11A1.5 1.5 0 0 1 18.5 8h4A1.5 1.5 0 0 1 24 9.5v3a1.5 1.5 0 0 1-1.5 1.5h-4a1.5 1.5 0 0 1-1.5-1.5v-3Zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-4Zm0 7a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5h4a1.5 1.5 0 0 0 1.5-1.5v-5a1.5 1.5 0 0 0-1.5-1.5h-4Zm-.5 1.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-5Z",fill:"currentColor"})))},Kf=(0,c.memo)(SvgBox4Alternate);var Xf,Qf;function Jf(){return Jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jf.apply(this,arguments)}const SvgBucket=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Jf({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Xf||(Xf=c.createElement("path",{d:"M23.922 19.627c.01.004.014.007.016.009.171.232.534.74.851 1.285.16.274.301.547.403.793.105.257.147.44.147.547 0 .708-.637 1.35-1.5 1.35-.864 0-1.5-.642-1.5-1.35 0-.107.042-.29.147-.547a6.68 6.68 0 0 1 .403-.793c.317-.545.68-1.053.85-1.285a.069.069 0 0 1 .017-.01.212.212 0 0 1 .083-.015c.035 0 .064.007.083.016ZM15.353 7.868l7.778 7.778-7.424 7.425a1.5 1.5 0 0 1-2.121 0l-5.657-5.657a1.5 1.5 0 0 1 0-2.121l7.424-7.425Z",stroke:"currentColor"})),Qf||(Qf=c.createElement("path",{d:"m15.337 21.286 3.53-3.53-9.878-1.403 4.934 4.933a1 1 0 0 0 1.414 0Z",fill:"currentColor"})))},eh=(0,c.memo)(SvgBucket);var th;function nh(){return nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nh.apply(this,arguments)}const SvgCamera=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",nh({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,th||(th=c.createElement("path",{d:"M7 40q-1.2 0-2.1-.9Q4 38.2 4 37V11q0-1.2.9-2.1Q5.8 8 7 8h26q1.2 0 2.1.9.9.9.9 2.1v10.75l8-8v20.5l-8-8V37q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h26V11H7v26Zm0 0V11v26Z",fill:"currentColor"})))},rh=(0,c.memo)(SvgCamera);var ah;function oh(){return oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oh.apply(this,arguments)}const SvgCameraOff=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",oh({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ah||(ah=c.createElement("path",{d:"M7 40q-1.2 0-2.1-.9Q4 38.2 4 37V11q0-1.2.9-2.1Q5.8 8 7 8h26q1.2 0 2.1.9.9.9.9 2.1v10.75l8-8v20.5l-8-8V37q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h26V11H7v26Zm0 0V11v26Zm34.55 8.25L1.8 5.5l1.9-1.9 39.75 39.75Z",fill:"currentColor"})))},ih=(0,c.memo)(SvgCameraOff);var lh,sh;function ch(){return ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ch.apply(this,arguments)}const SvgCaptions=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ch({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,lh||(lh=c.createElement("path",{d:"M7 22V8a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-4.586a1 1 0 0 0-.707.293l-2 2a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 0-.707-.293H8a1 1 0 0 1-1-1Z",stroke:"currentColor"})),sh||(sh=c.createElement("path",{d:"M14.953 13.158a2.577 2.577 0 0 0-1.898-.843c-1.46 0-2.644 1.243-2.644 2.776 0 1.532 1.184 2.775 2.644 2.775.822 0 1.556-.394 2.041-1.012M21.445 13.158a2.577 2.577 0 0 0-1.898-.843c-1.46 0-2.643 1.243-2.643 2.776 0 1.532 1.183 2.775 2.643 2.775.823 0 1.557-.394 2.042-1.012",stroke:"currentColor",strokeLinecap:"round"})))},dh=(0,c.memo)(SvgCaptions);var uh;function ph(){return ph=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ph.apply(this,arguments)}const SvgChecklist=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ph({viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,uh||(uh=c.createElement("path",{d:"M22.5 7h-9v2h9V7zm0 8h-9v2h9v-2zM6.04 11 2.5 7.46l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41L6.04 11zm0 8L2.5 15.46l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41L6.04 19z",fill:"currentColor"})))},mh=(0,c.memo)(SvgChecklist);var gh,fh=n(30648),hh=n(61887),bh=n(34761);function Eh(){return Eh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eh.apply(this,arguments)}const SvgChevronRightSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Eh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,gh||(gh=c.createElement("path",{d:"m14 12 3 4-3 4",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},yh=(0,c.memo)(SvgChevronRightSmall);var _h,vh=n(99832);function wh(){return wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wh.apply(this,arguments)}const SvgChevronUpSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",wh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,_h||(_h=c.createElement("path",{d:"m12 17 4-3 4 3",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},Th=(0,c.memo)(SvgChevronUpSmall);var Sh,Ch;function Ih(){return Ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ih.apply(this,arguments)}const SvgCircleSpeed=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Ih({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Sh||(Sh=c.createElement("path",{d:"M21 20a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),Ch||(Ch=c.createElement("path",{stroke:"currentColor",strokeLinecap:"round",d:"M7.5 13.5h7M9.5 15.5h5M11.5 17.5h3"})))},xh=(0,c.memo)(SvgCircleSpeed);var Ah,kh,Oh;function Ph(){return Ph=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ph.apply(this,arguments)}const SvgColorBucket=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Ph({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ah||(Ah=c.createElement("path",{d:"M23.922 19.627c.01.004.014.007.016.009.171.232.534.74.851 1.285.16.274.301.547.403.793.105.257.147.44.147.547 0 .708-.637 1.35-1.5 1.35-.864 0-1.5-.642-1.5-1.35 0-.107.042-.29.147-.547a6.68 6.68 0 0 1 .403-.793c.317-.545.68-1.053.85-1.285a.069.069 0 0 1 .017-.01.212.212 0 0 1 .083-.015c.035 0 .064.007.083.016Z",fill:"currentColor",stroke:"currentColor"})),kh||(kh=c.createElement("path",{d:"m15.353 7.868 7.778 7.778-7.424 7.425a1.5 1.5 0 0 1-2.121 0l-5.657-5.657a1.5 1.5 0 0 1 0-2.121l7.424-7.425Z",stroke:"currentColor"})),Oh||(Oh=c.createElement("path",{d:"M13.232 13.662a.248.248 0 0 0-.464 0l-.665 1.795a.247.247 0 0 1-.146.146l-1.795.665a.248.248 0 0 0 0 .464l1.795.665a.247.247 0 0 1 .146.146l.665 1.795c.08.216.384.216.464 0l.665-1.795a.247.247 0 0 1 .146-.146l1.795-.665a.248.248 0 0 0 0-.464l-1.795-.665a.247.247 0 0 1-.146-.146l-.665-1.795ZM15.616 11.08a.124.124 0 0 0-.232 0l-.332.899a.123.123 0 0 1-.073.073l-.898.332a.124.124 0 0 0 0 .232l.898.332c.034.013.06.04.073.073l.332.898c.04.108.192.108.232 0l.332-.898a.123.123 0 0 1 .073-.073l.898-.332a.124.124 0 0 0 0-.232l-.898-.332a.123.123 0 0 1-.073-.073l-.332-.898Z",fill:"currentColor"})))},Nh=(0,c.memo)(SvgColorBucket);var Rh;function Mh(){return Mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mh.apply(this,arguments)}const SvgColorDrop=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Mh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Rh||(Rh=c.createElement("path",{d:"M20.245 12.706 16 8.316l-4.245 4.39A6.346 6.346 0 0 0 10 17.087c0 1.554.585 3.193 1.755 4.404A5.89 5.89 0 0 0 16 23.317a5.89 5.89 0 0 0 4.245-1.826C21.415 20.28 22 18.641 22 17.087c0-1.554-.585-3.17-1.755-4.381Zm-9.166 4.66c.007-1.553.56-2.999 1.415-3.877L16 9.831l3.64 3.784c.855.87 1.341 2.198 1.349 3.752h-9.91Z",fill:"currentColor"})))},Lh=(0,c.memo)(SvgColorDrop);var Dh;function Bh(){return Bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bh.apply(this,arguments)}const SvgCorner=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Bh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Dh||(Dh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 10a.5.5 0 0 1 .5.5v6a5.5 5.5 0 0 0 5.5 5.5h6a.5.5 0 0 1 0 1h-6A6.5 6.5 0 0 1 9 16.5v-6a.5.5 0 0 1 .5-.5Z",fill:"currentColor"})))},Fh=(0,c.memo)(SvgCorner);var Hh,Uh,jh=n(94320),zh=n(74698);function Gh(){return Gh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gh.apply(this,arguments)}const SvgDistributeHorizontal=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Gh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Hh||(Hh=c.createElement("path",{d:"M21 8.5v15M11 8.5v15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),Uh||(Uh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 12a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5h1a1.5 1.5 0 0 0 1.5-1.5v-5a1.5 1.5 0 0 0-1.5-1.5h-1Z",fill:"currentColor"})))},Yh=(0,c.memo)(SvgDistributeHorizontal);var Zh,Wh;function Vh(){return Vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vh.apply(this,arguments)}const SvgDistributeVertical=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Vh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Zh||(Zh=c.createElement("path",{d:"M8.5 11h15M8.5 21h15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),Wh||(Wh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 14a1.5 1.5 0 0 0-1.5 1.5v1a1.5 1.5 0 0 0 1.5 1.5h5a1.5 1.5 0 0 0 1.5-1.5v-1a1.5 1.5 0 0 0-1.5-1.5h-5Z",fill:"currentColor"})))},$h=(0,c.memo)(SvgDistributeVertical);var qh;function Kh(){return Kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kh.apply(this,arguments)}const SvgDots=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Kh({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,qh||(qh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 16a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm5 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm4 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",fill:"currentColor"})))},Xh=(0,c.memo)(SvgDots);var Qh;function Jh(){return Jh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jh.apply(this,arguments)}const SvgDotsFillSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Jh({viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Qh||(Qh=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM4 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm4 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm5-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z",fill:"currentColor"})))},eb=(0,c.memo)(SvgDotsFillSmall);var tb,nb,rb;function ab(){return ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ab.apply(this,arguments)}const SvgEraser=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ab({viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,tb||(tb=c.createElement("path",{stroke:"currentColor",strokeWidth:2.471,strokeLinecap:"round",d:"M36.763 57.764H63.94"})),nb||(nb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42.514 51.392 61.08 32.827c.173-.173.29-.392.338-.631l1.261-6.306a1.235 1.235 0 0 0-1.454-1.454l-6.305 1.261c-.24.048-.459.166-.631.338L35.723 44.6l6.791 6.792zm-8.269 6.521a3.706 3.706 0 0 0 5.242 0l23.34-23.34a3.706 3.706 0 0 0 1.013-1.893l1.26-6.306c.52-2.593-1.767-4.879-4.36-4.36l-6.306 1.26a3.706 3.706 0 0 0-1.894 1.014L29.2 47.628a3.706 3.706 0 0 0 0 5.241l5.045 5.044z",fill:"currentColor"})),rb||(rb=c.createElement("path",{d:"M23.747 34.363a.612.612 0 0 0-1.147 0L20.96 38.8a.612.612 0 0 1-.362.362l-4.436 1.641a.612.612 0 0 0 0 1.148l4.436 1.641c.168.062.3.194.362.361L22.6 48.39a.612.612 0 0 0 1.147 0l1.642-4.437a.612.612 0 0 1 .361-.36l4.437-1.642a.612.612 0 0 0 0-1.148l-4.437-1.641a.611.611 0 0 1-.361-.362l-1.641-4.436zm7.221-10.016a.408.408 0 0 0-.765 0l-1.094 2.958a.408.408 0 0 1-.24.24L25.91 28.64a.408.408 0 0 0 0 .765l2.957 1.094c.112.042.2.13.241.241l1.094 2.958a.408.408 0 0 0 .765 0l1.095-2.958c.041-.111.129-.2.24-.24l2.958-1.095a.408.408 0 0 0 0-.765l-2.957-1.094a.408.408 0 0 1-.241-.241l-1.095-2.958z",fill:"currentColor"})))},ob=(0,c.memo)(SvgEraser);var ib,lb=n(48068);function sb(){return sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sb.apply(this,arguments)}const SvgExclamationTriangle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",sb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ib||(ib=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.968 8.032c.508-.863 1.795-.863 2.304 0l8.506 14.436c.528.895-.183 1.917-1.152 1.917H7.614c-.97 0-1.68-1.022-1.153-1.917l8.507-14.436Zm1.152.353a.328.328 0 0 0-.29.155L7.322 22.975a.24.24 0 0 0 .003.26c.051.083.15.15.288.15h17.012a.328.328 0 0 0 .288-.15.24.24 0 0 0 .003-.26L16.41 8.54a.327.327 0 0 0-.29-.155Zm-.117 4.333a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 1 .5-.5Zm0 8.502a1.218 1.218 0 1 0 0-2.435 1.218 1.218 0 0 0 0 2.435Z",fill:"currentColor"})))},cb=(0,c.memo)(SvgExclamationTriangle);var db,ub;function pb(){return pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pb.apply(this,arguments)}const SvgFloppyDisk=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",pb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,db||(db=c.createElement("path",{d:"M12.76 20.8c-.359 0-.649-.358-.649-.8v-3.2c0-.442.29-.8.648-.8h6.482c.358 0 .648.358.648.8V20",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),ub||(ub=c.createElement("path",{d:"M21.6 24H10.4c-.371 0-.727-.169-.99-.469-.262-.3-.41-.707-.41-1.131V9.6c0-.424.148-.831.41-1.131.263-.3.619-.469.99-.469h8.646a1 1 0 0 1 .753.341l2.954 3.376a1 1 0 0 1 .247.659V22.4c0 .424-.148.831-.41 1.131-.263.3-.619.469-.99.469ZM18.333 11.2v1.6",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},mb=(0,c.memo)(SvgFloppyDisk);var gb,fb;function hb(){return hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hb.apply(this,arguments)}const SvgGearWithGauge=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",hb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,gb||(gb=c.createElement("rect",{width:32,height:32,rx:16,fill:"currentColor",fillOpacity:.64})),fb||(fb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.564 15.406a5.122 5.122 0 0 1 0 1.192c-.053.446.132.9.522 1.122l.408.231a1 1 0 0 1 .368 1.377l-.513.873a1 1 0 0 1-1.355.363l-.45-.254c-.382-.217-.858-.15-1.214.108-.336.244-.7.452-1.087.618-.412.177-.716.563-.716 1.012v.452a1 1 0 0 1-1 1h-1.054a1 1 0 0 1-1-1v-.453c0-.449-.304-.835-.717-1.012a5.601 5.601 0 0 1-1.085-.616c-.357-.26-.833-.327-1.216-.11l-.448.254a1 1 0 0 1-1.355-.363l-.514-.873a1 1 0 0 1 .369-1.377l.404-.23c.392-.222.576-.678.524-1.126a5.129 5.129 0 0 1 0-1.188c.052-.448-.132-.904-.524-1.127l-.404-.229a1 1 0 0 1-.369-1.376l.514-.874a1 1 0 0 1 1.355-.363l.447.254c.384.217.86.15 1.216-.11a5.62 5.62 0 0 1 1.086-.617c.413-.177.716-.562.716-1.011V9.5a1 1 0 0 1 1-1h1.054a1 1 0 0 1 1 1v.453c0 .449.304.835.717 1.012.387.166.75.373 1.085.616.357.26.833.327 1.217.11l.446-.254a1 1 0 0 1 1.356.363l.513.874a1 1 0 0 1-.368 1.376l-.404.23c-.393.222-.577.678-.524 1.126zM12.5 16a3.5 3.5 0 0 1 7 0 .5.5 0 0 0 1 0 4.5 4.5 0 1 0-9 0 .5.5 0 0 0 1 0zm5.601-1.46a.5.5 0 0 0-.707-.707l-1.188 1.188a1 1 0 1 0 .745.669l1.15-1.15z",fill:"currentColor"})))},bb=(0,c.memo)(SvgGearWithGauge);var Eb;function yb(){return yb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yb.apply(this,arguments)}const SvgGif=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",yb({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Eb||(Eb=c.createElement("path",{d:"M23.4 30V18h2.4v12Zm-11.7 0q-.75 0-1.225-.475Q10 29.05 10 28.3v-8.6q0-.75.475-1.225Q10.95 18 11.7 18h6.2q.75 0 1.225.475.475.475.475 1.225v.7h-7.2v7.2h4.8V24h2.4v4.3q0 .75-.475 1.225Q18.65 30 17.9 30Zm17.7 0V18H38v2.4h-6.2v3h4.05v2.4H31.8V30Z",fill:"currentColor"})))},_b=(0,c.memo)(SvgGif);var vb;function wb(){return wb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wb.apply(this,arguments)}const SvgGroup=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",wb({viewBox:"0 0 21 21",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,vb||(vb=c.createElement("rect",{x:.5,y:.5,width:20,height:20,rx:2.5,stroke:"currentColor",strokeDasharray:"2 2"})))},Tb=(0,c.memo)(SvgGroup);var Sb,Cb,Ib,xb,Ab,kb,Ob,Pb,Nb,Rb,Mb;function Lb(){return Lb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lb.apply(this,arguments)}const SvgKeyboard=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Lb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Sb||(Sb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 11.5A1.5 1.5 0 0 1 8.5 10h15a1.5 1.5 0 0 1 1.5 1.5v8.91a1.5 1.5 0 0 1-1.5 1.5h-15a1.5 1.5 0 0 1-1.5-1.5V11.5Zm1.5-.5a.5.5 0 0 0-.5.5v8.91a.5.5 0 0 0 .5.5h15a.5.5 0 0 0 .5-.5V11.5a.5.5 0 0 0-.5-.5h-15Z",fill:"currentColor"})),Cb||(Cb=c.createElement("rect",{x:12,y:18.5,width:7.3,height:1,rx:.5,fill:"currentColor"})),Ib||(Ib=c.createElement("circle",{cx:10.25,cy:13.75,r:.75,fill:"currentColor"})),xb||(xb=c.createElement("circle",{cx:12.75,cy:13.75,r:.75,fill:"currentColor"})),Ab||(Ab=c.createElement("circle",{cx:15.75,cy:13.75,r:.75,fill:"currentColor"})),kb||(kb=c.createElement("circle",{cx:18.75,cy:13.75,r:.75,fill:"currentColor"})),Ob||(Ob=c.createElement("circle",{cx:21.75,cy:13.75,r:.75,fill:"currentColor"})),Pb||(Pb=c.createElement("circle",{cx:11.75,cy:15.85,r:.75,fill:"currentColor"})),Nb||(Nb=c.createElement("circle",{cx:14.25,cy:15.85,r:.75,fill:"currentColor"})),Rb||(Rb=c.createElement("circle",{cx:17.25,cy:15.85,r:.75,fill:"currentColor"})),Mb||(Mb=c.createElement("circle",{cx:20.25,cy:15.85,r:.75,fill:"currentColor"})))},Db=(0,c.memo)(SvgKeyboard);var Bb,Fb=n(73035);function Hb(){return Hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hb.apply(this,arguments)}const SvgLetterAHeight=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Hb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Bb||(Bb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.5 9.5a.5.5 0 1 0 0-1h-15a.5.5 0 0 0 0 1h15Zm-8.205 2.993a.747.747 0 0 1 .7-.493c.312 0 .591.196.7.492l2.525 6.867a.475.475 0 0 1-.44.641.47.47 0 0 1-.441-.315l-.668-1.886H14.33l-.667 1.886a.47.47 0 0 1-.442.315.475.475 0 0 1-.44-.641l2.515-6.866Zm2.063 4.412-1.028-2.883-.306-.84a.03.03 0 0 0-.058 0l-.295.84-1.028 2.883h2.715ZM24 23a.5.5 0 0 1-.5.5h-15a.5.5 0 0 1 0-1h15a.5.5 0 0 1 .5.5Z",fill:"currentColor"})))},Ub=(0,c.memo)(SvgLetterAHeight);var jb;function zb(){return zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zb.apply(this,arguments)}const SvgLetterAWidth=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",zb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,jb||(jb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 8.5a.5.5 0 0 0-1 0v15a.5.5 0 0 0 1 0v-15ZM23 8a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-1 0v-15A.5.5 0 0 1 23 8Zm-7.705 4.493a.747.747 0 0 1 .7-.493c.312 0 .591.196.7.492l2.525 6.867a.475.475 0 0 1-.44.641.47.47 0 0 1-.441-.315l-.668-1.886H14.33l-.667 1.886a.47.47 0 0 1-.442.315.475.475 0 0 1-.44-.641l2.515-6.866Zm2.063 4.412-1.028-2.883-.306-.84a.03.03 0 0 0-.029-.02.03.03 0 0 0-.029.02l-.295.84-1.028 2.883h2.715Z",fill:"currentColor"})))},Gb=(0,c.memo)(SvgLetterAWidth);var Yb;function Zb(){return Zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zb.apply(this,arguments)}const SvgLetterBBold=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Zb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Yb||(Yb=c.createElement("path",{d:"M11 11a2 2 0 0 1 2-2h3.316c.751 0 1.443.163 2.075.489.646.326 1.16.775 1.542 1.349.382.574.573 1.206.573 1.897 0 .69-.178 1.29-.534 1.799a3.25 3.25 0 0 1-1.363 1.153v.118a3.58 3.58 0 0 1 1.72 1.231c.447.574.671 1.245.671 2.014 0 .77-.204 1.454-.613 2.053a4.042 4.042 0 0 1-1.62 1.408 5.004 5.004 0 0 1-2.214.489H13a2 2 0 0 1-2-2V11Zm5.217 3.866c.633 0 1.14-.196 1.522-.587.395-.39.593-.84.593-1.349 0-.508-.191-.951-.573-1.33-.369-.39-.857-.586-1.463-.586h-2.583a.5.5 0 0 0-.5.5v2.852a.5.5 0 0 0 .5.5h2.504Zm.336 6.1c.672 0 1.206-.208 1.601-.625.409-.417.613-.9.613-1.447 0-.56-.211-1.043-.633-1.447-.408-.417-.961-.626-1.66-.626h-2.76a.5.5 0 0 0-.5.5v3.145a.5.5 0 0 0 .5.5h2.84Z",fill:"currentColor"})))},Wb=(0,c.memo)(SvgLetterBBold);var Vb;function $b(){return $b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$b.apply(this,arguments)}const SvgLetterIItalic=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",$b({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Vb||(Vb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5 9h-2.489a.5.5 0 0 0-.023 0H15.5a.5.5 0 0 0 0 1h1.823l-3.692 12H11.5a.5.5 0 0 0 0 1h5a.5.5 0 1 0 0-1h-1.823l3.692-12H20.5a.5.5 0 1 0 0-1Z",fill:"currentColor"})))},qb=(0,c.memo)(SvgLetterIItalic);var Kb;function Xb(){return Xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xb.apply(this,arguments)}const SvgLetterIOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Xb({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Kb||(Kb=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 23a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 1a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm0-10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm.5 2a.5.5 0 0 0-1 0v4a.5.5 0 0 0 1 0v-4Z",fill:"currentColor"})))},Qb=(0,c.memo)(SvgLetterIOutline);var Jb,eE;function tE(){return tE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tE.apply(this,arguments)}const SvgLetterMOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",tE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Jb||(Jb=c.createElement("path",{d:"m19.526 12.955-.003.002a.73.73 0 0 0-.198.21L16 18.047l-3.325-4.88-.002-.002a.753.753 0 0 0-.209-.209.408.408 0 0 0-.221-.072.337.337 0 0 0-.266.128.427.427 0 0 0-.093.279v5.332a.95.95 0 0 0 .045.307v.001a.26.26 0 0 0 .123.144c.056.03.12.04.185.04.06 0 .12-.011.174-.042a.277.277 0 0 0 .115-.136.782.782 0 0 0 .059-.314v-4.414l3.049 4.393c.091.137.212.233.366.233.148 0 .268-.098.364-.23l.001-.002 3.05-4.394v4.414c0 .115.017.22.053.311l.002.007a.29.29 0 0 0 .12.132c.052.03.112.043.173.043.065 0 .129-.011.184-.041a.26.26 0 0 0 .123-.144v-.001a.95.95 0 0 0 .046-.307v-5.332c0-.105-.031-.2-.099-.279a.321.321 0 0 0-.26-.128.444.444 0 0 0-.231.071Z",fill:"currentColor",stroke:"currentColor",strokeWidth:.231})),eE||(eE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 9.5A1.5 1.5 0 0 1 9.5 8h13A1.5 1.5 0 0 1 24 9.5v13a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 8 22.5v-13ZM9.5 9a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-13a.5.5 0 0 0-.5-.5h-13Z",fill:"currentColor"})))},nE=(0,c.memo)(SvgLetterMOutline);var rE;function aE(){return aE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aE.apply(this,arguments)}const SvgLetterSStrikethrough=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",aE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,rE||(rE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.503 10.826c.694-.547 1.622-.826 2.603-.826.968 0 1.87.237 2.563.769.704.54 1.142 1.35 1.228 2.39a.5.5 0 1 1-.996.082c-.065-.787-.382-1.327-.841-1.68-.47-.36-1.139-.561-1.954-.561-.801 0-1.499.229-1.985.611a1.95 1.95 0 0 0-.766 1.589c0 .6.265 1.006.613 1.3h-1.284a2.614 2.614 0 0 1-.329-1.3c0-1.003.444-1.82 1.148-2.374Zm5.075 6.674h1.183c.15.332.239.72.239 1.173 0 1.016-.402 1.87-1.138 2.46-.724.578-1.726.867-2.886.867-1.174 0-2.117-.322-2.8-.91-.682-.588-1.057-1.401-1.172-2.292a.5.5 0 0 1 .992-.128c.089.693.37 1.263.833 1.662.463.399 1.157.668 2.147.668 1.005 0 1.764-.251 2.261-.649.485-.387.763-.946.763-1.678 0-.523-.17-.894-.422-1.173Zm-9.078-2a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1h-13Z",fill:"currentColor"})))},oE=(0,c.memo)(SvgLetterSStrikethrough);var iE,lE=n(33291);function sE(){return sE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sE.apply(this,arguments)}const SvgLetterTArrow=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",sE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,iE||(iE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.854 10.146a.5.5 0 0 0-.708 0l-3 3a.5.5 0 0 0 .708.708L21 11.707v8.586l-2.146-2.147a.5.5 0 0 0-.708.708l3 3a.5.5 0 0 0 .351.146h.006a.498.498 0 0 0 .344-.14l.007-.007 3-3a.5.5 0 0 0-.708-.707L22 20.293v-8.586l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3ZM8 10a.5.5 0 0 0 0 1h3.5v10.5a.5.5 0 0 0 1 0V11H16a.5.5 0 0 0 0-1H8Z",fill:"currentColor"})))},cE=(0,c.memo)(SvgLetterTArrow);var dE;function uE(){return uE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uE.apply(this,arguments)}const SvgLetterTPlus=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",uE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,dE||(dE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 11.5a.5.5 0 0 0-.5.5v.711a.5.5 0 1 1-1 0V12A1.5 1.5 0 0 1 8 10.5h7a1.5 1.5 0 0 1 1.5 1.5v.711a.5.5 0 1 1-1 0V12a.5.5 0 0 0-.5-.5h-3v10h1.3a.5.5 0 0 1 0 1H9.7a.5.5 0 0 1 0-1H11v-10H8Zm9.5 4.5a.5.5 0 0 1 .5-.5h3v-3a.5.5 0 0 1 1 0v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1-.5-.5Z",fill:"currentColor"})))},pE=(0,c.memo)(SvgLetterTPlus);var mE;function gE(){return gE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gE.apply(this,arguments)}const SvgLetterTUppercase=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",gE({viewBox:"0 0 33 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,mE||(mE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.94 10a.5.5 0 0 1 .5-.5h5v13h-2.1a.5.5 0 0 0 0 1h5.2a.5.5 0 0 0 0-1h-2.1v-13h5a.5.5 0 0 1 .5.5v1.178a.5.5 0 1 0 1 0V10a1.5 1.5 0 0 0-1.5-1.5h-11a1.5 1.5 0 0 0-1.5 1.5v1.178a.5.5 0 0 0 1 0V10Zm15.12 0a.5.5 0 0 1 .5-.5h5v13h-2.1a.5.5 0 0 0 0 1h5.2a.5.5 0 0 0 0-1h-2.1v-13h5a.5.5 0 0 1 .5.5v1.178a.5.5 0 0 0 1 0V10a1.5 1.5 0 0 0-1.5-1.5h-11a1.5 1.5 0 0 0-1.5 1.5v1.178a.5.5 0 0 0 1 0V10Z",fill:"currentColor"})))},fE=(0,c.memo)(SvgLetterTUppercase);var hE;function bE(){return bE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bE.apply(this,arguments)}const SvgLetterTLargeLetterTSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",bE({viewBox:"0 0 79 79",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,hE||(hE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.677 24.838c0-.679.55-1.229 1.228-1.229H30.19v31.942h-5.16a1.229 1.229 0 1 0 0 2.457h12.777a1.228 1.228 0 1 0 0-2.457h-5.16V23.609h12.286c.678 0 1.228.55 1.228 1.229v2.894a1.229 1.229 0 0 0 2.457 0v-2.894a3.686 3.686 0 0 0-3.685-3.686H17.905a3.686 3.686 0 0 0-3.685 3.686v2.894a1.229 1.229 0 0 0 2.457 0v-2.894zm30.713 17.2c0-.68.55-1.23 1.228-1.23h4.914v14.743h-4.177a1.228 1.228 0 1 0 0 2.457h5.406v-1.229 1.229h5.405a1.228 1.228 0 1 0 0-2.457H55.99V40.809h4.914c.679 0 1.229.55 1.229 1.228v1.229a1.229 1.229 0 0 0 2.457 0v-1.229a3.686 3.686 0 0 0-3.686-3.685H48.618a3.686 3.686 0 0 0-3.685 3.685v1.229a1.228 1.228 0 1 0 2.457 0v-1.229z",fill:"currentColor"})))},EE=(0,c.memo)(SvgLetterTLargeLetterTSmall);var yE;function _E(){return _E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_E.apply(this,arguments)}const SvgLetterUUnderline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",_E({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,yE||(yE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 9.5a.5.5 0 0 0-1 0V15a4 4 0 0 0 8 0V9.5a.5.5 0 0 0-1 0V15a3 3 0 1 1-6 0V9.5ZM9.5 23a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1h-13Z",fill:"currentColor"})))},vE=(0,c.memo)(SvgLetterUUnderline);var wE;function TE(){return TE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TE.apply(this,arguments)}const SvgLink=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",TE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,wE||(wE=c.createElement("path",{d:"M12.364 15.343a.5.5 0 0 0-.707-.707l.707.707Zm3.535-.707a.5.5 0 0 0-.707.707l.707-.707Zm-.353 4.596-3.536 3.536.707.707 3.536-3.536-.707-.707Zm-7.071 0 1.768-1.767-.707-.708-1.768 1.768.707.707Zm1.768-1.767 2.121-2.122-.707-.707-2.121 2.121.707.707Zm6.01-2.475-.354-.354-.707.707.354.354.707-.707Zm-4.243 7.778a2.5 2.5 0 0 1-3.535 0l-.707.707a3.5 3.5 0 0 0 4.95 0l-.708-.707Zm4.243-2.829a3.5 3.5 0 0 0 0-4.95l-.707.708a2.5 2.5 0 0 1 0 3.535l.707.707Zm-7.778 2.829a2.5 2.5 0 0 1 0-3.536l-.707-.707a3.5 3.5 0 0 0 0 4.95l.707-.707ZM18.02 16.757a.5.5 0 1 0 .708.707l-.707-.707Zm-3.535.707a.5.5 0 1 0 .707-.707l-.707.707Zm.354-4.596 3.535-3.535-.707-.707-3.535 3.535.707.707Zm7.07 0-1.767 1.768.707.707 1.768-1.768-.707-.707Zm-1.767 1.768-2.121 2.121.707.707 2.121-2.12-.707-.708Zm-6.01 2.475.353.354.707-.708-.353-.353-.707.707Zm4.242-7.778a2.5 2.5 0 0 1 3.536 0l.707-.707a3.5 3.5 0 0 0-4.95 0l.707.707Zm-4.242 2.828a3.5 3.5 0 0 0 0 4.95l.707-.707a2.5 2.5 0 0 1 0-3.536l-.707-.707Zm7.778-2.828a2.5 2.5 0 0 1 0 3.535l.707.707a3.5 3.5 0 0 0 0-4.95l-.707.708Z",fill:"currentColor"})))},SE=(0,c.memo)(SvgLink);var CE,IE=n(37233);function xE(){return xE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xE.apply(this,arguments)}const SvgLockFilledClosed=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",xE({viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,CE||(CE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 11a3 3 0 1 1 6 0v3h1.5a1.5 1.5 0 0 1 1.5 1.5v7a1.5 1.5 0 0 1-1.5 1.5h-9a1.5 1.5 0 0 1-1.5-1.5v-7a1.5 1.5 0 0 1 1.5-1.5H13v-3Zm5 0v3h-4v-3a2 2 0 1 1 4 0m-2 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",fill:"currentColor"})))},AE=(0,c.memo)(SvgLockFilledClosed);var kE;function OE(){return OE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OE.apply(this,arguments)}const SvgLockOpen=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",OE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,kE||(kE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.816 8.415a3.023 3.023 0 0 0-4.161 1.129l-.255.447a.5.5 0 1 0 .87.494l.254-.447a2.023 2.023 0 0 1 2.786-.76 2.101 2.101 0 0 1 .75 2.844L16.964 14H11.5a1.5 1.5 0 0 0-1.5 1.5v7a1.5 1.5 0 0 0 1.5 1.5h9a1.5 1.5 0 0 0 1.5-1.5v-7a1.5 1.5 0 0 0-1.5-1.5h-2.379l.805-1.376.002-.005c.836-1.47.343-3.351-1.112-4.204ZM11.5 15a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5h-9Zm4.5 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",fill:"currentColor"})))},PE=(0,c.memo)(SvgLockOpen);var NE,RE,ME=n(42914);function LE(){return LE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LE.apply(this,arguments)}const SvgMedia=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",LE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,NE||(NE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25 13.451H13.004v10.441h.264l2.048-3.327a1.5 1.5 0 0 1 2.287-.323l.242.22a.5.5 0 0 0 .758-.1l1.598-2.5a1.5 1.5 0 0 1 2.623.176L25 22.712v-9.26zm0 11.441c.066 0 .13-.006.191-.018h.031a.5.5 0 0 0 .398-.197.998.998 0 0 0 .38-.785v-10.44a1 1 0 0 0-1-1H13.004a1 1 0 0 0-1 1v10.44a1 1 0 0 0 1 1H25zm-3.082-6.432a.5.5 0 0 0-.875-.059l-1.598 2.5a1.5 1.5 0 0 1-2.273.3l-.242-.22a.5.5 0 0 0-.762.108l-1.714 2.785h9.984l-2.52-5.414zm-7.081-2.121a1.055 1.055 0 1 1 2.11 0 1.055 1.055 0 0 1-2.11 0zm1.055-2.055a2.055 2.055 0 1 0 0 4.11 2.055 2.055 0 0 0 0-4.11z",fill:"currentColor"})),RE||(RE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.004 6.11a1 1 0 0 0-1 1v9.038a1 1 0 0 0 1 1h3v-5.697a1 1 0 0 1 1-1h9V7.11a1 1 0 0 0-1-1h-12zm1.524 1.785H7.047v1.48h1.48v-1.48zm8.886 0h1.48v1.48h-1.48v-1.48zm-8.886 2.96H7.047v1.481h1.48v-1.48zm0 2.961H7.047v1.481h1.48v-1.48z",fill:"currentColor"})))},DE=(0,c.memo)(SvgMedia);var BE;function FE(){return FE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FE.apply(this,arguments)}const SvgMic=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",FE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,BE||(BE=c.createElement("path",{d:"M24 26.85q-2.15 0-3.6-1.55-1.45-1.55-1.45-3.75V9q0-2.1 1.475-3.55Q21.9 4 24 4t3.575 1.45Q29.05 6.9 29.05 9v12.55q0 2.2-1.45 3.75-1.45 1.55-3.6 1.55Zm0-11.4ZM22.5 42v-6.8q-5.3-.55-8.9-4.45-3.6-3.9-3.6-9.2h3q0 4.55 3.225 7.65Q19.45 32.3 24 32.3q4.55 0 7.775-3.1Q35 26.1 35 21.55h3q0 5.3-3.6 9.2-3.6 3.9-8.9 4.45V42ZM24 23.85q.9 0 1.475-.675.575-.675.575-1.625V9q0-.85-.6-1.425Q24.85 7 24 7t-1.45.575q-.6.575-.6 1.425v12.55q0 .95.575 1.625T24 23.85Z",fill:"currentColor"})))},HE=(0,c.memo)(SvgMic);var UE;function jE(){return jE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jE.apply(this,arguments)}const SvgMicOff=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",jE({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,UE||(UE=c.createElement("path",{d:"m34.3 29.95-2.15-2.15q1.05-1.3 1.55-2.925.5-1.625.5-3.325h3q0 2.3-.75 4.45-.75 2.15-2.15 3.95ZM23.05 18.7Zm4.85 4.85-2.65-2.6V9.05q0-.85-.6-1.45T23.2 7q-.85 0-1.45.6t-.6 1.45v7.75l-3-3V9.05q0-2.1 1.475-3.575T23.2 4q2.1 0 3.575 1.475T28.25 9.05v12.5q0 .4-.075 1t-.275 1ZM21.7 42v-6.8q-5.3-.55-8.9-4.45-3.6-3.9-3.6-9.2h3q0 4.55 3.225 7.65 3.225 3.1 7.775 3.1 1.9 0 3.65-.625t3.2-1.725l2.15 2.15q-1.55 1.3-3.45 2.075-1.9.775-4.05 1.025V42Zm19.85 3.25L1.8 5.5l1.9-1.9 39.75 39.75Z",fill:"currentColor"})))},zE=(0,c.memo)(SvgMicOff);var GE,YE,ZE;function WE(){return WE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WE.apply(this,arguments)}const SvgMirrorLeftright=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",WE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,GE||(GE=c.createElement("path",{d:"M16 8.5v15",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"0.01 4"})),YE||(YE=c.createElement("path",{d:"m12.5 16-4-3.5v7l4-3.5Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),ZE||(ZE=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.17 12.124a.5.5 0 0 1 .83.376v7a.5.5 0 0 1-.83.376l-4-3.5a.5.5 0 0 1 0-.752l4-3.5Z",fill:"currentColor"})))},VE=(0,c.memo)(SvgMirrorLeftright);var $E,qE,KE;function XE(){return XE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XE.apply(this,arguments)}const SvgMirrorUpdown=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",XE({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,$E||($E=c.createElement("path",{d:"M23.75 15.75h-15",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"0.01 4"})),qE||(qE=c.createElement("path",{d:"m16.25 12.25 3.5-4h-7l3.5 4Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),KE||(KE=c.createElement("path",{d:"M20.126 22.92a.5.5 0 0 1-.376.83h-7a.5.5 0 0 1-.376-.83l3.5-4a.5.5 0 0 1 .752 0l3.5 4Z",fill:"currentColor"})))},QE=(0,c.memo)(SvgMirrorUpdown);var JE,ey,ty,ny,ry;function ay(){return ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ay.apply(this,arguments)}const SvgMuted=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ay({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,JE||(JE=c.createElement("mask",{id:"a",fill:"currentColor"},c.createElement("path",{fillRule:"evenodd",d:"M6 8.6c.2-.3.5-.3.7-.1L26.1 23c.2.2.3.5.1.7-.1.2-.5.3-.7.1L6.1 9.3a.5.5 0 0 1 0-.7Z",clipRule:"evenodd"}),c.createElement("path",{d:"m11.7 12.2-.5.5H6.6c-.4 0-.8.3-.8.8v5.1c0 .5.4.8.8.8h4.6l4.4 4.5c.5.5 1.3.1 1.3-.6v-7.2l-1-.7v7.4l-4-4.1a.8.8 0 0 0-.7-.3H6.8v-4.7h4.4c.3 0 .5-.1.6-.3l.7-.6-.8-.6Zm4.3 1.9V9.3L13.1 12l-.8-.6 3.2-3.2a.8.8 0 0 1 1.3.6v6l-1-.7Zm4.6 4.7-.7.5c-.2 0-.3.2-.3.5s.3.6.7.4c.4-.2.8-.4 1-.7l-.7-.7Zm1.4-.1-.7-.6a3.7 3.7 0 0 0-1.4-5.4.6.6 0 0 1-.3-.5c0-.4.3-.6.7-.5a4.7 4.7 0 0 1 1.8 7Zm1.4 2.3c-.5.6-1.2 1-1.9 1.4-.1.1-.3.3-.3.5 0 .4.4.6.8.4.8-.4 1.6-1 2.2-1.7l-.8-.6Z"}),c.createElement("path",{d:"m24.8 20.8-.8-.6a7.3 7.3 0 0 0-2.5-10.5.5.5 0 0 1-.3-.5c0-.4.4-.6.8-.4a8.3 8.3 0 0 1 2.8 12Z"}))),ey||(ey=c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 8.6c.2-.3.5-.3.7-.1L26.1 23c.2.2.3.5.1.7-.1.2-.5.3-.7.1L6.1 9.3a.5.5 0 0 1 0-.7Z",clipRule:"evenodd"})),ty||(ty=c.createElement("path",{fill:"currentColor",d:"m11.7 12.2-.5.5H6.6c-.4 0-.8.3-.8.8v5.1c0 .5.4.8.8.8h4.6l4.4 4.5c.5.5 1.3.1 1.3-.6v-7.2l-1-.7v7.4l-4-4.1a.8.8 0 0 0-.7-.3H6.8v-4.7h4.4c.3 0 .5-.1.6-.3l.7-.6-.8-.6Zm4.3 1.9V9.3L13.1 12l-.8-.6 3.2-3.2a.8.8 0 0 1 1.3.6v6l-1-.7Zm4.6 4.7-.7.5c-.2 0-.3.2-.3.5s.3.6.7.4c.4-.2.8-.4 1-.7l-.7-.7Zm1.4-.1-.7-.6a3.7 3.7 0 0 0-1.4-5.4.6.6 0 0 1-.3-.5c0-.4.3-.6.7-.5a4.7 4.7 0 0 1 1.8 7Zm1.4 2.3c-.5.6-1.2 1-1.9 1.4-.1.1-.3.3-.3.5 0 .4.4.6.8.4.8-.4 1.6-1 2.2-1.7l-.8-.6Z"})),ny||(ny=c.createElement("path",{fill:"currentColor",d:"m24.8 20.8-.8-.6a7.3 7.3 0 0 0-2.5-10.5.5.5 0 0 1-.3-.5c0-.4.4-.6.8-.4a8.3 8.3 0 0 1 2.8 12Z"})),ry||(ry=c.createElement("path",{fill:"currentColor",d:"m6.7 8.5-.6.8.6-.8ZM26.1 23l-.6.8.6-.8Zm-.6.8.6-.8-.6.8ZM6.1 9.3l-.6.8.6-.8Zm5.6 2.9.6-.8-.7-.6-.6.6.7.8Zm-.5.5v1h.4l.3-.3-.7-.7Zm0 6.7.7-.7-.3-.3h-.4v1Zm4.4 4.5-.7.7.7-.7Zm1.3-7.8h1v-.5l-.4-.3-.6.8Zm-1-.7.6-.8-1.6-1.2v2h1Zm0 7.4-.7.7 1.7 1.7v-2.4h-1Zm-4-4.1-.8.7.7-.7Zm-5.1-.3h-1v1h1v-1Zm0-4.7v-1h-1v1h1Zm5.7-1 .7.8.8-.8-1-.7-.5.8Zm3.4-3.4h1V6.9l-1.7 1.7.7.7Zm0 4.8h-1v.5l.4.3.6-.8Zm-2.7-2-.6.7.7.6.6-.6-.7-.8Zm-.8-.7-.7-.7-.8.9.9.6.6-.8Zm3.2-3.2-.7-.7.7.7Zm1.3 6.7-.6.8 1.6 1.2v-2h-1Zm3.7 4 .6-.9-.6-.4-.7.5.7.7Zm-.7.4.5.8-.5-.8Zm.4 1 .4.8-.4-.9Zm1-.8.8.7.9-.8-1-.7-.6.8Zm0-1.4-.8-.6-.6.8.8.6.6-.8Zm.8.6-.6.8.8.6.6-.8-.8-.6Zm-2.2-6-.4.9.4-1Zm.4-1 .4-.9-.4 1Zm1.2 10.7-.5-.8.5.8Zm1.9-1.4.6-.8-.7-.6-.6.7.7.7ZM22 23.3l.4 1-.4-1Zm2.2-1.7.8.6.7-.8-.9-.6-.6.8Zm-.2-1.4-.8-.6-.5.8.7.6.6-.8Zm.8.6-.6.8.9.6.5-.9-.8-.5ZM21.5 9.7l.5-1-.5 1Zm.5-1-.5 1 .5-1Zm-14.7-1c-.6-.5-1.6-.4-2 .3l1.5 1.2c-.1.2-.4.2-.7 0l1.2-1.5Zm19.4 14.5L7.3 7.7 6.1 9.3l19.4 14.5 1.2-1.6Zm.3 2c.5-.6.4-1.5-.3-2l-1.2 1.6a.5.5 0 0 1 0-.7l1.5 1.2Zm-2 .4c.6.5 1.5.3 2-.3L25.4 23c.2-.2.5-.3.7-.1L25 24.6ZM5.4 10.1 25 24.6l1.2-1.6L6.7 8.5 5.5 10ZM5.2 8c-.4.6-.3 1.6.3 2l1.2-1.5c.3.1.3.5.1.7L5.2 8Zm5.8 3.4-.5.5 1.4 1.5.5-.5-1.4-1.5Zm.2.3H6.6v2h4.6v-2Zm-4.6 0c-1 0-1.8.8-1.8 1.8h2s0 .2-.2.2v-2Zm-1.8 1.8v5.1h2v-5.1h-2Zm0 5.1c0 1 .8 1.8 1.8 1.8v-2l.2.2h-2Zm1.8 1.8h4.6v-2H6.6v2Zm3.9-.2 4.4 4.4 1.4-1.4-4.4-4.5-1.4 1.5Zm4.4 4.4c1.1 1.1 3 .3 3-1.3h-2a.2.2 0 0 1 .2-.2h.2l-1.4 1.5Zm3-1.3v-7.2h-2v7.2h2Zm-.4-8-1-.7-1.2 1.6 1 .7 1.2-1.6Zm-2.6 0v7.5h2v-7.4h-2Zm1.8 6.8L12.5 18l-1.4 1.4 4.1 4.1 1.5-1.4ZM12.5 18c-.3-.4-.8-.6-1.3-.6v2l1.3-1.4Zm-1.3-.6H6.8v2h4.4v-2Zm-3.4 1v-4.7h-2v4.7h2Zm-1-3.7h4.4v-2H6.8v2Zm4.4 0c.5 0 1-.2 1.3-.6l-1.4-1.4h.1v2Zm1.3-.6.7-.6-1.4-1.4-.7.6 1.4 1.4Zm.6-2.1-.8-.6L11 13l.8.6L13 12Zm1.8-2.7V14h2V9.3h-2Zm-1 3.5 2.8-2.8-1.5-1.4-2.7 2.7 1.4 1.5Zm-2.1-.6.8.6 1.2-1.6-.8-.6-1.2 1.6Zm3-4.7-3.1 3.2 1.4 1.4L16.3 9l-1.4-1.4ZM18 8.8c0-1.6-1.9-2.4-3-1.3L16.3 9a.2.2 0 0 1-.2 0H16v-.1h2Zm0 6v-6h-2v6h2Zm-2.6.1 1 .8 1.2-1.6-1-.8-1.2 1.6Zm4.6 3.2-.4.3.9 1.7.8-.5-1.3-1.5Zm-.4.3c-.5.2-.9.7-.9 1.4h2c0 .2-.1.3-.2.3l-1-1.7Zm-.9 1.4c0 1 1 1.8 2 1.3l-.8-1.8h.6l.2.5h-2Zm2 1.3c.6-.2 1-.5 1.5-.9l-1.4-1.5-.9.6.9 1.8Zm1.4-2.4-.8-.7-1.2 1.6.8.7 1.2-1.6Zm-1.3.2.8.6 1.2-1.6-.8-.6-1.2 1.6Zm.3-3c0 .6-.2 1.2-.5 1.6l1.6 1.2c.5-.8.9-1.7.9-2.7h-2Zm-1.5-2.3c.9.4 1.5 1.3 1.5 2.4h2c0-1.9-1-3.4-2.6-4.2l-1 1.8Zm-.9-1.4c0 .6.4 1.1.9 1.4l.9-1.8.2.4h-2Zm2-1.4c-1-.5-2 .4-2 1.4h2c0 .1 0 .3-.2.4h-.6l.9-1.8ZM24 16c0-2.3-1.4-4.3-3.3-5.2l-.9 1.8c1.3.6 2.2 1.9 2.2 3.4h2Zm-1.1 3.3c.7-1 1-2 1-3.3h-2c0 .8-.2 1.5-.6 2.1l1.6 1.2Zm-.9 4c.8-.4 1.5-1 2.1-1.7l-1.4-1.3c-.5.5-1 1-1.7 1.3l1 1.7Zm.2-.4c0 .2 0 .3-.2.4l-1-1.7c-.4.2-.8.7-.8 1.3h2Zm-.7-.4h.5c.2 0 .2.2.2.4h-2c0 1 1.2 1.9 2.2 1.3l-1-1.7Zm2-1.6a10 10 0 0 1-2 1.6l1 1.7c.9-.5 1.7-1.2 2.5-2L23.5 21Zm1.3-.1-.8-.6-1.2 1.6.8.6 1.2-1.6Zm-1.4.2.8.6 1.2-1.6-.8-.6-1.2 1.6Zm1.4-.3c1-1.3 1.5-3 1.5-4.6h-2a6 6 0 0 1-1.1 3.5l1.6 1.1Zm1.5-4.6c0-3.2-1.7-5.9-4.3-7.3l-1 1.7c2 1.1 3.3 3.2 3.3 5.6h2ZM22 8.8l.2.4h-2c0 .6.4 1 .8 1.3l1-1.7Zm.2.4c0 .2 0 .3-.2.4h-.5l1-1.7c-1.1-.6-2.3.2-2.3 1.3h2Zm-.7.4a7.3 7.3 0 0 1 3.8 6.5h2c0-3.6-2-6.7-4.9-8.2l-1 1.7Zm3.8 6.5c0 1.5-.5 3-1.3 4.1l1.6 1.1c1-1.5 1.7-3.3 1.7-5.2h-2Z",mask:"url(#a)"})))},oy=(0,c.memo)(SvgMuted);var iy;function ly(){return ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ly.apply(this,arguments)}const SvgPageMargin=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ly({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,iy||(iy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 9h8a1 1 0 0 1 1 1v1.5H11V10a1 1 0 0 1 1-1Zm-1 3.5v7h10v-7H11Zm10 8H11V22a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1.5ZM10 10a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V10Z",fill:"currentColor"})))},sy=(0,c.memo)(SvgPageMargin);var cy;function dy(){return dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dy.apply(this,arguments)}const SvgPagePlus=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",dy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,cy||(cy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 7.5a.5.5 0 0 0 0 1h7a1.5 1.5 0 0 1 1.5 1.5v9a.5.5 0 0 0 1 0v-9A2.5 2.5 0 0 0 21 7.5h-7Zm-4 3A1.5 1.5 0 0 0 8.5 12v11a1.5 1.5 0 0 0 1.5 1.5h9a1.5 1.5 0 0 0 1.5-1.5V12a1.5 1.5 0 0 0-1.5-1.5h-9ZM9.5 12a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V12Zm2.5 5a.5.5 0 0 0 0 1h2v2a.5.5 0 0 0 1 0v-2h2a.5.5 0 0 0 0-1h-2v-2a.5.5 0 0 0-1 0v2h-2Z",fill:"currentColor"})))},uy=(0,c.memo)(SvgPagePlus);var py,my,gy,fy;function hy(){return hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hy.apply(this,arguments)}const SvgPageSwap=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",hy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,py||(py=c.createElement("rect",{x:12,y:14,width:8,height:12,rx:1,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),my||(my=c.createElement("path",{d:"M15 11V8a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h2",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),gy||(gy=c.createElement("path",{d:"M14 23h4M14 21h2",stroke:"currentColor",strokeLinecap:"round"})),fy||(fy=c.createElement("path",{d:"M20.571 6 18 8.539m0 0 2.571 2.538M18 8.54h3.23A2.77 2.77 0 0 1 24 11.308V12",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},by=(0,c.memo)(SvgPageSwap);var Ey,yy,_y;function vy(){return vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vy.apply(this,arguments)}const SvgPatternLinear=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",vy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ey||(Ey=c.createElement("circle",{cx:16,cy:16,r:12,fill:"url(#a)"})),yy||(yy=c.createElement("circle",{cx:16,cy:16,r:11.5,stroke:"currentColor",strokeOpacity:.16})),_y||(_y=c.createElement("defs",null,c.createElement("linearGradient",{id:"a",x1:16,y1:4,x2:16,y2:35.8,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"currentColor",stopOpacity:.52}),c.createElement("stop",{offset:.802,stopColor:"currentColor",stopOpacity:0})))))},wy=(0,c.memo)(SvgPatternLinear);var Ty,Sy,Cy;function Iy(){return Iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iy.apply(this,arguments)}const SvgPatternRadial=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Iy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ty||(Ty=c.createElement("circle",{cx:16,cy:16,r:12,fill:"url(#a)"})),Sy||(Sy=c.createElement("circle",{cx:16,cy:16,r:11.5,stroke:"currentColor",strokeOpacity:.16})),Cy||(Cy=c.createElement("defs",null,c.createElement("radialGradient",{id:"a",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(90 0 16) scale(23.4)"},c.createElement("stop",{stopColor:"currentColor",stopOpacity:.64}),c.createElement("stop",{offset:.573,stopColor:"currentColor",stopOpacity:0})))))},xy=(0,c.memo)(SvgPatternRadial);var Ay;function ky(){return ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ky.apply(this,arguments)}const SvgPatternSolid=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ky({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ay||(Ay=c.createElement("circle",{cx:16,cy:16,r:11.5,fill:"currentColor",stroke:"currentColor"})))},Oy=(0,c.memo)(SvgPatternSolid);var Py,Ny=n(25252);function Ry(){return Ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ry.apply(this,arguments)}const SvgPercent=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Ry({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Py||(Py=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.785 9.089a.5.5 0 0 1 .126.696l-9 13a.5.5 0 1 1-.822-.57l9-13a.5.5 0 0 1 .696-.126ZM12 14.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm10 4a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm1 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z",fill:"currentColor"})))},My=(0,c.memo)(SvgPercent);var Ly;function Dy(){return Dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dy.apply(this,arguments)}const SvgPhotoCamera=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Dy({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Ly||(Ly=c.createElement("path",{d:"M24 34.7q3.6 0 6.05-2.45 2.45-2.45 2.45-6.1 0-3.6-2.45-6.025Q27.6 17.7 24 17.7q-3.65 0-6.075 2.425Q15.5 22.55 15.5 26.15q0 3.65 2.425 6.1Q20.35 34.7 24 34.7Zm0-3q-2.4 0-3.95-1.575-1.55-1.575-1.55-3.975 0-2.35 1.55-3.9Q21.6 20.7 24 20.7q2.35 0 3.925 1.55 1.575 1.55 1.575 3.9 0 2.4-1.575 3.975Q26.35 31.7 24 31.7ZM7 42q-1.2 0-2.1-.9Q4 40.2 4 39V13.35q0-1.15.9-2.075.9-.925 2.1-.925h7.35L18 6h12l3.65 4.35H41q1.15 0 2.075.925Q44 12.2 44 13.35V39q0 1.2-.925 2.1-.925.9-2.075.9Zm34-3V13.35h-8.75L28.6 9h-9.2l-3.65 4.35H7V39ZM24 26.2Z",fill:"currentColor"})))},By=(0,c.memo)(SvgPhotoCamera);var Fy;function Hy(){return Hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hy.apply(this,arguments)}const SvgPicture=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Hy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Fy||(Fy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 9H8v14h.72l2.843-4.617a1.5 1.5 0 0 1 2.286-.323l.818.743a.5.5 0 0 0 .757-.1l2.519-3.939a1.5 1.5 0 0 1 2.623.175L24 22.315V9Zm-.784 14H9.895l2.52-4.093a.5.5 0 0 1 .762-.108l.817.744a1.5 1.5 0 0 0 2.273-.302l2.518-3.938a.5.5 0 0 1 .875.058L23.216 23ZM8 24h16a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1Zm2.5-11a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm1.5-2.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5Z",fill:"currentColor"})))},Uy=(0,c.memo)(SvgPicture);var jy,zy,Gy;function Yy(){return Yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yy.apply(this,arguments)}const SvgPictureSwap=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Yy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,jy||(jy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.996 15H14v10.441h.264l2.048-3.327a1.5 1.5 0 0 1 2.287-.323l.242.22a.5.5 0 0 0 .758-.1l1.598-2.5a1.5 1.5 0 0 1 2.623.175l2.176 4.674V15Zm0 11.441c.066 0 .13-.006.192-.018h.03a.5.5 0 0 0 .399-.197.998.998 0 0 0 .38-.785V15a1 1 0 0 0-1-1H14a1 1 0 0 0-1 1v10.441a1 1 0 0 0 1 1h11.996Zm-3.082-6.432a.5.5 0 0 0-.875-.059l-1.598 2.5a1.5 1.5 0 0 1-2.273.3l-.242-.22a.5.5 0 0 0-.762.108l-1.714 2.785h9.984l-2.52-5.414Zm-7.081-2.121a1.055 1.055 0 1 1 2.11 0 1.055 1.055 0 0 1-2.11 0Zm1.055-2.055a2.055 2.055 0 1 0 0 4.11 2.055 2.055 0 0 0 0-4.11Z",fill:"currentColor"})),zy||(zy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 9h10v1.727h1V9a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h1.77v-1H7V9Z",fill:"currentColor"})),Gy||(Gy=c.createElement("path",{d:"M22.571 6 20 8.539m0 0 2.571 2.538M20 8.54h3.23A2.77 2.77 0 0 1 26 11.308V12M8.429 26 11 23.462m0 0-2.571-2.54M11 23.463H7.77A2.77 2.77 0 0 1 5 20.692V20",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},Zy=(0,c.memo)(SvgPictureSwap);var Wy;function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vy.apply(this,arguments)}const SvgPipette=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Vy({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Wy||(Wy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.247 8.753a2.571 2.571 0 0 0-3.636 0l-2.075 2.075-1.682-1.682a.5.5 0 1 0-.707.708l7 7a.5.5 0 0 0 .707-.708l-1.682-1.682 2.075-2.075a2.571 2.571 0 0 0 0-3.636Zm-2.783 5.004 2.076-2.075a1.571 1.571 0 1 0-2.222-2.222l-2.075 2.076 2.221 2.221Zm-5.05-.61a.5.5 0 0 1 0 .707L9.566 19.7a1.932 1.932 0 1 0 2.733 2.733l5.848-5.848a.5.5 0 1 1 .707.707l-5.848 5.848a2.932 2.932 0 1 1-4.147-4.147l5.848-5.848a.5.5 0 0 1 .707 0Z",fill:"currentColor"})))},$y=(0,c.memo)(SvgPipette);var qy;function Ky(){return Ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ky.apply(this,arguments)}const SvgPlay=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Ky({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,qy||(qy=c.createElement("path",{d:"M23.426 15.032a1.103 1.103 0 0 1 0 1.936l-11.826 6.4c-.724.392-1.6-.138-1.6-.967V9.599c0-.83.876-1.36 1.6-.967l11.826 6.4Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},Xy=(0,c.memo)(SvgPlay);var Qy,Jy=n(39980);function e_(){return e_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e_.apply(this,arguments)}const SvgPlusFilledSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",e_({viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,Qy||(Qy=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4Z",fill:"currentColor"})))},t_=(0,c.memo)(SvgPlusFilledSmall);var n_;function r_(){return r_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r_.apply(this,arguments)}const SvgPlayOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",r_({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,n_||(n_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 16a7 7 0 1 1 14 0 7 7 0 0 1-14 0Zm7-8a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm-1.215 11.38 4.276-2.575c.585-.353.585-1.257 0-1.61l-4.276-2.575c-.575-.346-1.285.098-1.285.804v5.152c0 .706.71 1.15 1.285.804Z",fill:"currentColor"})))},a_=(0,c.memo)(SvgPlayOutline);var o_;function i_(){return i_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i_.apply(this,arguments)}const SvgPlus=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",i_({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,o_||(o_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.5 9a.5.5 0 0 0-1 0v6.498h-7a.5.5 0 0 0 0 1h7v7.498a.5.5 0 1 0 1 0v-7.498h6.996a.5.5 0 1 0 0-1H16.5V9Z",fill:"currentColor"})))},l_=(0,c.memo)(SvgPlus);var s_;function c_(){return c_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c_.apply(this,arguments)}const SvgPlusFilled=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",c_({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,s_||(s_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 24a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm0-12a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 .5-.5Z",fill:"currentColor"})))},d_=(0,c.memo)(SvgPlusFilled);var u_;function p_(){return p_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p_.apply(this,arguments)}const SvgPlusOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",p_({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,u_||(u_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9a7 7 0 1 0 0 14 7 7 0 0 0 0-14Zm-8 7a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm4 0a.5.5 0 0 1 .5-.5h3v-3a.5.5 0 0 1 1 0v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1-.5-.5Z",fill:"currentColor"})))},m_=(0,c.memo)(SvgPlusOutline);var g_,f_;function h_(){return h_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h_.apply(this,arguments)}const SvgQuestionMarkOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",h_({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,g_||(g_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9a7 7 0 1 0 0 14 7 7 0 0 0 0-14Zm-8 7a8 8 0 1 1 16 0 8 8 0 0 1-16 0Z",fill:"currentColor"})),f_||(f_=c.createElement("path",{d:"M15.438 17.268c0-.406.079-.744.235-1.012.156-.268.436-.59.84-.963.329-.293.563-.541.703-.744.148-.212.222-.464.222-.756 0-.39-.127-.704-.382-.94-.256-.243-.61-.365-1.062-.365-.412 0-.74.118-.988.354-.239.227-.42.512-.543.853l-.963-.402c.173-.472.465-.886.877-1.244.42-.366.958-.549 1.617-.549.494 0 .93.102 1.308.305.38.195.671.467.877.817.214.35.321.74.321 1.17 0 .448-.115.83-.346 1.147-.222.309-.51.622-.864.939-.271.244-.469.476-.592.695-.124.22-.186.476-.186.768v.513h-1.074v-.586Zm.543 3.232a.801.801 0 0 1-.567-.22.78.78 0 0 1-.223-.56c0-.212.074-.39.223-.537a.779.779 0 0 1 .568-.232c.213 0 .395.078.543.232a.707.707 0 0 1 .234.537.76.76 0 0 1-.234.56.744.744 0 0 1-.543.22Z",fill:"currentColor"})))},b_=(0,c.memo)(SvgQuestionMarkOutline);var E_,y_,__,v_;function w_(){return w_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w_.apply(this,arguments)}const SvgRotate=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",w_({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,E_||(E_=c.createElement("path",{d:"M22.02 21.785a.5.5 0 0 0-.687-.727l.687.727Zm-5.68 1.244c-3.262 0-6.01-2.124-6.891-5.023l-.957.29c1.01 3.321 4.146 5.733 7.849 5.733v-1Zm4.993-1.971a7.248 7.248 0 0 1-4.992 1.971v1a8.249 8.249 0 0 0 5.679-2.244l-.687-.727Z",fill:"currentColor"})),y_||(y_=c.createElement("path",{d:"M8.5 24v-5.647h5.647",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),__||(__=c.createElement("path",{d:"M10.51 10.215a.5.5 0 0 0 .686.728l-.686-.728Zm5.679-1.244c3.262 0 6.01 2.124 6.891 5.023l.957-.29c-1.01-3.321-4.145-5.733-7.848-5.733v1Zm-4.993 1.972A7.248 7.248 0 0 1 16.19 8.97v-1a8.249 8.249 0 0 0-5.68 2.244l.687.728Z",fill:"currentColor"})),v_||(v_=c.createElement("path",{d:"M24.03 8v5.647h-5.648",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},T_=(0,c.memo)(SvgRotate);var S_,C_,I_,x_,A_,k_;function O_(){return O_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O_.apply(this,arguments)}const SvgScissors=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",O_({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,S_||(S_=c.createElement("circle",{cx:11.536,cy:11.535,r:2.5,transform:"rotate(-45 11.536 11.535)",stroke:"currentColor"})),C_||(C_=c.createElement("circle",{r:2.5,transform:"scale(1 -1) rotate(-45 -19.02 -24.192)",stroke:"currentColor"})),I_||(I_=c.createElement("path",{d:"m18.646 18.424-.353-.354.707-.707.354.354-.708.707Zm4.708 3.293a.5.5 0 0 1-.708.707l.708-.707Zm-4-4 4 4-.708.707-4-4 .708-.707Z",fill:"currentColor"})),x_||(x_=c.createElement("path",{d:"m14 13.07 1 1",stroke:"currentColor",strokeLinecap:"square"})),A_||(A_=c.createElement("path",{d:"m14.352 19.354-.355.352-.704-.71.355-.352.704.71Zm8.296-9.639a.5.5 0 1 1 .704.71l-.704-.71Zm-9 8.93 9-8.93.704.71-9 8.929-.704-.71Z",fill:"currentColor"})),k_||(k_=c.createElement("path",{d:"m14.352 19.354-.355.352-.704-.71.355-.352.704.71Zm8.296-9.639a.5.5 0 1 1 .704.71l-.704-.71Zm-9 8.93 9-8.93.704.71-9 8.929-.704-.71Z",fill:"currentColor"})))},P_=(0,c.memo)(SvgScissors);var N_;function R_(){return R_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R_.apply(this,arguments)}const SvgSettings=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",R_({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,N_||(N_=c.createElement("path",{d:"m19.4 44-1-6.3q-.95-.35-2-.95t-1.85-1.25l-5.9 2.7L4 30l5.4-3.95q-.1-.45-.125-1.025Q9.25 24.45 9.25 24q0-.45.025-1.025T9.4 21.95L4 18l4.65-8.2 5.9 2.7q.8-.65 1.85-1.25t2-.9l1-6.35h9.2l1 6.3q.95.35 2.025.925Q32.7 11.8 33.45 12.5l5.9-2.7L44 18l-5.4 3.85q.1.5.125 1.075.025.575.025 1.075t-.025 1.05q-.025.55-.125 1.05L44 30l-4.65 8.2-5.9-2.7q-.8.65-1.825 1.275-1.025.625-2.025.925l-1 6.3ZM24 30.5q2.7 0 4.6-1.9 1.9-1.9 1.9-4.6 0-2.7-1.9-4.6-1.9-1.9-4.6-1.9-2.7 0-4.6 1.9-1.9 1.9-1.9 4.6 0 2.7 1.9 4.6 1.9 1.9 4.6 1.9Zm0-3q-1.45 0-2.475-1.025Q20.5 25.45 20.5 24q0-1.45 1.025-2.475Q22.55 20.5 24 20.5q1.45 0 2.475 1.025Q27.5 22.55 27.5 24q0 1.45-1.025 2.475Q25.45 27.5 24 27.5Zm0-3.5Zm-2.2 17h4.4l.7-5.6q1.65-.4 3.125-1.25T32.7 32.1l5.3 2.3 2-3.6-4.7-3.45q.2-.85.325-1.675.125-.825.125-1.675 0-.85-.1-1.675-.1-.825-.35-1.675L40 17.2l-2-3.6-5.3 2.3q-1.15-1.3-2.6-2.175-1.45-.875-3.2-1.125L26.2 7h-4.4l-.7 5.6q-1.7.35-3.175 1.2-1.475.85-2.625 2.1L10 13.6l-2 3.6 4.7 3.45q-.2.85-.325 1.675-.125.825-.125 1.675 0 .85.125 1.675.125.825.325 1.675L8 30.8l2 3.6 5.3-2.3q1.2 1.2 2.675 2.05Q19.45 35 21.1 35.4Z",fill:"currentColor"})))},M_=(0,c.memo)(SvgSettings);var L_;function D_(){return D_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D_.apply(this,arguments)}const SvgShapes=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",D_({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,L_||(L_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 11.5a2.5 2.5 0 1 0 5 0 2.5 2.5 0 0 0-5 0ZM16 8a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Zm3.867 9.134a1.329 1.329 0 0 1 2.265 0l2.665 4.313c.548.886-.076 2.053-1.132 2.053h-5.33c-1.056 0-1.68-1.167-1.132-2.053l2.665-4.313Zm1.415.525a.329.329 0 0 0-.564 0l-2.665 4.313a.344.344 0 0 0 .282.528h5.33c.253 0 .428-.29.282-.528l-2.665-4.313Zm-10.846-.617 3.408 1.968c.149.086.2.276.114.426l-1.968 3.408a.312.312 0 0 1-.426.114L8.156 20.99a.312.312 0 0 1-.114-.426l1.968-3.408c.086-.149.277-.2.426-.114Zm-1.292-.386a1.312 1.312 0 0 1 1.792-.48l3.408 1.968c.627.362.842 1.164.48 1.792l-1.968 3.408a1.312 1.312 0 0 1-1.792.48l-3.408-1.968a1.312 1.312 0 0 1-.48-1.792l1.968-3.408Z",fill:"currentColor"})))},B_=(0,c.memo)(SvgShapes);var F_,H_=n(8753);function U_(){return U_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U_.apply(this,arguments)}const SvgSort=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",U_({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,F_||(F_=c.createElement("path",{d:"M6 36v-3h12v3Zm0-21v-3h36v3Zm0 10.5v-3h24v3Z",fill:"currentColor"})))},j_=(0,c.memo)(SvgSort);var z_,G_;function Y_(){return Y_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y_.apply(this,arguments)}const SvgSparkles=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Y_({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,z_||(z_=c.createElement("path",{d:"m19 10.44 1.342 3.627a1 1 0 0 0 .59.591L24.56 16l-3.626 1.342a1 1 0 0 0-.591.59L19 21.56l-1.342-3.626a1 1 0 0 0-.59-.591L13.44 16l3.626-1.342a1 1 0 0 0 .591-.59L19 10.44Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"bevel"})),G_||(G_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m11 9.96-.432 1.169a.743.743 0 0 1-.439.439L8.961 12l1.168.432a.743.743 0 0 1 .439.439L11 14.039l.432-1.168a.743.743 0 0 1 .439-.439L13.039 12l-1.168-.432a.743.743 0 0 1-.439-.439L11 9.961Zm.232-.798a.248.248 0 0 0-.464 0l-.665 1.795a.247.247 0 0 1-.146.146l-1.795.665a.248.248 0 0 0 0 .464l1.795.665a.247.247 0 0 1 .146.146l.665 1.795c.08.216.384.216.464 0l.665-1.795a.247.247 0 0 1 .146-.146l1.795-.665a.248.248 0 0 0 0-.464l-1.795-.665a.247.247 0 0 1-.146-.146l-.665-1.795ZM10 17.96l-.432 1.169a.743.743 0 0 1-.439.439L7.961 20l1.168.432a.743.743 0 0 1 .439.439L10 22.039l.432-1.168a.743.743 0 0 1 .439-.439L12.039 20l-1.168-.432a.743.743 0 0 1-.439-.439L10 17.961Zm.232-.798a.248.248 0 0 0-.464 0l-.665 1.795a.247.247 0 0 1-.146.146l-1.795.665a.248.248 0 0 0 0 .464l1.795.665a.247.247 0 0 1 .146.146l.665 1.795c.08.216.384.216.464 0l.665-1.795a.247.247 0 0 1 .146-.146l1.795-.665a.248.248 0 0 0 0-.464l-1.795-.665a.247.247 0 0 1-.146-.146l-.665-1.795Z",fill:"currentColor"})))},Z_=(0,c.memo)(SvgSparkles);var W_,V_=n(69682);function $_(){return $_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$_.apply(this,arguments)}const SvgStopOutline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",$_({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,W_||(W_=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 16a7 7 0 1 1 14 0 7 7 0 0 1-14 0Zm7-8a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm-2 5a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4Z",fill:"currentColor"})))},q_=(0,c.memo)(SvgStopOutline);var K_,X_=n(2779);function Q_(){return Q_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q_.apply(this,arguments)}const SvgTailedRectangle=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",Q_({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,K_||(K_=c.createElement("path",{d:"M6.5 7.095c0-.854.743-1.595 1.722-1.595h15.556c.98 0 1.722.741 1.722 1.595v15.81c0 .854-.743 1.595-1.722 1.595H19.8c-.92 0-1.856.356-2.367 1.211l-.894 1.499c-.23.387-.847.387-1.078 0l-.895-1.499c-.488-.819-1.397-1.311-2.366-1.311H8.222c-.98 0-1.722-.742-1.722-1.595V7.095Z",stroke:"currentColor"})))},J_=(0,c.memo)(SvgTailedRectangle);var ev;function tv(){return tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tv.apply(this,arguments)}const SvgTimeline=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",tv({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,ev||(ev=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 10.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm3.95-.5a2.5 2.5 0 1 0 0 1H15a.5.5 0 0 1 .5.5v2.05a2.5 2.5 0 0 0 0 4.9v2.05A1.5 1.5 0 0 0 17 22h2.05a2.5 2.5 0 1 0 0-1H17a.5.5 0 0 1-.5-.5v-2.05a2.5 2.5 0 0 0 0-4.9V11.5A1.5 1.5 0 0 0 15 10h-2.05ZM20 21.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0ZM17.5 16a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z",fill:"currentColor"})))},nv=(0,c.memo)(SvgTimeline);var rv,av=n(96921);function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ov.apply(this,arguments)}const SvgTrashFilledSmall=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",ov({viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,rv||(rv=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM7.501 4a.5.5 0 0 0-.5.5v.3h2.001v-.3a.5.5 0 0 0-.5-.5h-1Zm-1 1.8H3.5a.5.5 0 0 1 0-1h2.501v-.3a1.5 1.5 0 0 1 1.5-1.5h1.001a1.5 1.5 0 0 1 1.5 1.5v.3h2.502a.5.5 0 0 1 0 1H6.5Zm-1.3 1.301a.5.5 0 1 0-1 0v4.202c0 .94.76 1.7 1.7 1.7h4.202a1.7 1.7 0 0 0 1.7-1.7V7.101a.5.5 0 1 0-1 0v4.202a.7.7 0 0 1-.7.7H5.9a.7.7 0 0 1-.7-.7V7.101Zm2.1.3a.5.5 0 1 0-1 0v3.002a.5.5 0 1 0 1 0V7.402Zm1.901-.5a.5.5 0 0 1 .5.5v3.002a.5.5 0 1 1-1 0V7.402a.5.5 0 0 1 .5-.5Z",fill:"currentColor"})))},iv=(0,c.memo)(SvgTrashFilledSmall);var lv;function sv(){return sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sv.apply(this,arguments)}const SvgTurningLine=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",sv({viewBox:"0 0 23 10",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,lv||(lv=c.createElement("path",{d:"M.5 9h21a1 1 0 0 0 1-1V1",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})))},cv=(0,c.memo)(SvgTurningLine);var dv;function uv(){return uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uv.apply(this,arguments)}const SvgUnion=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",uv({viewBox:"0 0 29 19",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,dv||(dv=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.921 0h5.08a.5.5 0 0 1 0 1h-5.08a1.5 1.5 0 0 0-1.139.523l-5.401 6.303-1 1.165 4.159 4.677 2.514 2.829a1.5 1.5 0 0 0 1.121.503H28.5a.5.5 0 0 1 0 1h-5.325a2.5 2.5 0 0 1-1.868-.839l-2.515-2.829-4.067-4.575-4.345 5.069-2.401 2.801a2.5 2.5 0 0 1-1.898.873H1a.5.5 0 1 1 0-1h5.08a1.5 1.5 0 0 0 1.14-.524l2.401-2.801 4.434-5.172-1.48-1.664-5.624-5.876A1.5 1.5 0 0 0 5.867 1H.5a.5.5 0 1 1 0-1h5.367a2.5 2.5 0 0 1 1.806.771l5.632 5.883a.621.621 0 0 1 .012.014l1.394 1.569.91-1.062L21.023.872A2.5 2.5 0 0 1 22.921 0Z",fill:"currentColor"})))},pv=(0,c.memo)(SvgUnion);var mv,gv,fv,hv=n(11923);function bv(){return bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bv.apply(this,arguments)}const SvgRemoveMask=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",bv({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,mv||(mv=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 20v5.441a1 1 0 0 0 1 1h11.996c.066 0 .13-.006.192-.018h.03a.5.5 0 0 0 .399-.197.998.998 0 0 0 .38-.785V15a1 1 0 0 0-1-1H20v1h5.996v9.26l-2.175-4.674a1.5 1.5 0 0 0-2.624-.175l-1.598 2.5a.5.5 0 0 1-.758.1l-.242-.22a1.5 1.5 0 0 0-2.287.323l-2.048 3.327H14V20h-1Zm9.914.009a.5.5 0 0 0-.875-.059l-1.598 2.5a1.5 1.5 0 0 1-2.273.3l-.242-.22a.5.5 0 0 0-.762.108l-1.714 2.785h9.984l-2.52-5.414Z",fill:"currentColor"})),gv||(gv=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 9H9v8h8V9ZM9 8a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1H9Z",fill:"currentColor"})),fv||(fv=c.createElement("path",{d:"m15 11-2 2m0 0 2 2m-2-2-2-2m2 2-2 2",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},Ev=(0,c.memo)(SvgRemoveMask);var yv=n(33485);const _v=function(e,t,n){const r="function"==typeof t?t(e):t;if(!r)return{};let a=Object.keys(r);return a=a.filter((e=>r[e]!==we)),n&&(a=a.filter((e=>""!==r[e]))),0===a.length?{}:Object.fromEntries(a.map((e=>[e,r[e]])))};function vv(e){return e?.padding?.hasHiddenPadding?e.padding:{...e.padding??{},hasHiddenPadding:!0,...["vertical","horizontal"].reduce(((t,n)=>(t[n]=(e?.padding?.[n]||0)+Be[n],t)),{})}}function wv(e){return e?.padding?.hasHiddenPadding?{...e.padding??{},hasHiddenPadding:!1,...["vertical","horizontal"].reduce(((t,n)=>(t[n]=(e?.padding?.[n]||0)-Be[n],t)),{})}:e.padding}function Tv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal";return e?.padding?.hasHiddenPadding?Be[t]:0}const Sv=function(e,t){const n=(0,Kr.getHTMLFormatters)(),{setColor:r}=n,a=Ed();return async()=>{const n=await a(e),{color:o,backgroundColor:i}=n;if(i||o){const n=i?{backgroundColor:{color:i},backgroundTextMode:Mn.BACKGROUND_TEXT_MODE.HIGHLIGHT,padding:vv(e)}:null,a=o?r(e.content,{color:o}):e.content;t({...n,content:a})}}},Cv=(0,u.createContext)({state:{},actions:{}});const Iv=function(e){return(0,u.useContextSelector)(Cv,e??u.identity)},xv=(0,p.default)(Ke.Text).attrs({as:"div"}).withConfig({displayName:"countdown__Number",componentId:"sc-14vheov-0"})(["position:absolute;top:0;left:0;bottom:0;right:0;display:flex;align-items:center;justify-content:center;font-size:70px;font-weight:bold;color:",";"],(e=>{let{theme:t}=e;return t.colors.standard.white}));const Av=function Countdown(){const{countdown:e}=Iv((e=>{let{state:t}=e;return{countdown:t.countdown}}));return e>0?c.createElement(xv,null,e):null},kv=p.default.progress.withConfig({displayName:"progressBar__ProgressIndicator",componentId:"sc-oxcipv-0"})(["-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;width:100%;height:8px;position:absolute;top:0;left:0;right:0;background-color:",";border-top-left-radius:5px;border-top-right-radius:5px;&::-webkit-progress-bar{background-color:",";border-top-left-radius:5px;border-top-right-radius:5px;}&::-webkit-progress-value{background-color:",";border-top-left-radius:5px;}&::-moz-progress-bar{background-color:",";border-top-left-radius:5px;}"],(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.fg.primary,.3)}),(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.fg.primary,.3)}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.fg.primary}));const Ov=function ProgressBar(){const{duration:e,isRecording:t}=Iv((e=>{let{state:t}=e;return{duration:t.duration,isRecording:["recording","paused"].includes(t.status)}}));return t?c.createElement(kv,{value:e,max:120}):null},Pv=(0,u.createContext)({state:{},actions:{}});const Nv=function(e){return(0,u.useContextSelector)(Pv,e??u.identity)};const Rv=function(e){if(!e)return null;switch(e.type){case"radial":return(0,d.__)("Radial","web-stories");case"linear":return(0,d.__)("Linear","web-stories");default:{const{color:{r:t,g:n,b:r}}=e;return function(e,t,n){const r=e=>e.toString(16).padStart(2,"0");return`${r(e)}${r(t)}${r(n)}`.toUpperCase()}(t,n,r)}}};var Mv=n(78559),Lv=n(66044);const Dv=function(e){let{onChange:t=Lv.noop,handleClose:n=Lv.noop}=e;const r="undefined"!=typeof window&&"EyeDropper"in window,a=(0,c.useRef)(null);(0,c.useEffect)((()=>{r&&!a.current&&(a.current=new window.EyeDropper)}),[r]);const o=(0,c.useCallback)((async()=>{if(a.current&&r)try{const{sRGBHex:e}=await a.current.open();t((0,Mv.default)(e.substring(1)).color),n()}catch(e){console.log(e.message)}}),[a,r,t,n]);return{isEyeDropperApiSupported:r,openEyeDropper:o}},Bv=e=>{let{onChange:t}=e;const{fullbleedContainer:r,eyedropperPixelData:a,setEyedropperCallback:o,setIsEyedropperActive:i,setEyedropperImg:l,setEyedropperPixelData:s}=Xs((e=>{let{state:{fullbleedContainer:t,eyedropperPixelData:n},actions:{setEyedropperCallback:r,setIsEyedropperActive:a,setEyedropperImg:o,setEyedropperPixelData:i}}=e;return{fullbleedContainer:t,setEyedropperCallback:r,eyedropperPixelData:n,setIsEyedropperActive:a,setEyedropperImg:o,setEyedropperPixelData:i}})),{isEyeDropperApiSupported:c,openEyeDropper:d}=Dv({onChange:t,handleClose:(0,u.useCallback)((()=>{i(!1)}),[i])}),{zoomSetting:p,setZoomSetting:m}=gs((e=>{let{state:{zoomSetting:t},actions:{setZoomSetting:n}}=e;return{zoomSetting:t,setZoomSetting:n}})),g=(0,u.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return async()=>{if(c)return void(e&&(i(!0),d()));if(!e&&p!==Ie.FIT)return;e&&i(!0);a&&e||(e&&m(Ie.FIT),await new Promise((e=>{setTimeout((()=>{n.e(3182).then(n.bind(n,87559)).then((t=>{t.toCanvas(r,{preferredFontFormat:"woff2",pixelRatio:1}).then((t=>{const n=t.getContext("2d").getImageData(0,0,t.width,t.height).data;s(n),l(t.toDataURL()),e()})).catch((()=>{e()}))}))}))}))),o((()=>e=>{t(e),i(!1),l(null),s(null)}))}}),[r,t,a,p,i,o,l,s,m,c,d]);return{initEyedropper:g}};const Fv=function(e,t){if(!e)return null;const{type:n}=e;if(!n||"solid"===n){const{color:{r:n,g:r,b:a}}=e;return{color:{r:n,g:r,b:a,a:t}}}return{...e,alpha:t}};const Hv=function(e){if(!e.type||"solid"===e.type){const{color:t}=e;return{color:{...t,a:1}}}return t=e,n=["alpha"],Object.keys(t).filter((e=>!n.includes(e))).reduce(((e,n)=>({...e,[n]:t[n]})),{});var t,n};const Uv=function(e){const t=(e||"").toUpperCase().trim().replace(/^#/,"");return/[^0-9a-f]/i.test(t)?null:6===t.length?t:1===t.length?t.repeat(6):2===t.length?t.repeat(3):3===t.length?t.replace(/./g,"$&$&"):4===t.length?`${t.substring(0,2).repeat(2)}${t.substring(2)}`:null};var jv=n(6215);function zv(){return zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zv.apply(this,arguments)}const Gv=p.default.div.withConfig({displayName:"input__Container",componentId:"sc-1dusq6m-0"})(["position:relative;display:inline-block;width:100%;min-width:40px;"]),Yv=(0,p.default)(Ke.Text).withConfig({displayName:"input__Label",componentId:"sc-1dusq6m-1"})(["margin-bottom:12px;display:inline-block;"]),Zv=(0,p.default)(Ke.Text).withConfig({displayName:"input__Hint",componentId:"sc-1dusq6m-2"})(["display:inline-block;margin-top:12px;color:",";"],(e=>{let{hasError:t,theme:n}=e;return n.colors.fg[t?"negative":"tertiary"]})),Wv=(0,p.default)(Ke.Text).withConfig({displayName:"input__Suffix",componentId:"sc-1dusq6m-3"})(["background:transparent;color:",";white-space:nowrap;svg{width:32px;height:32px;margin:2px -10px;display:block;}"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),Vv=p.default.div.withConfig({displayName:"input__InputContainer",componentId:"sc-1dusq6m-4"})((e=>{let{focused:t,hasError:n,theme:r,styleOverride:a}=e;return(0,p.css)(["display:flex;align-items:center;justify-content:space-between;height:36px;padding:4px 12px;border:1px solid ",";border-radius:",";overflow:hidden;",";",";:focus-within{",";}",";"],r.colors.border[n?"negativeNormal":"defaultNormal"],r.borders.radius.small,t&&!n&&(0,p.css)(["border-color:",";"],r.colors.border.defaultActive),t&&(0,p.css)(["","{color:",";}"],Wv,r.colors.fg.primary),(0,up.focusCSS)(r.colors.border.focus),a)})),$v=p.default.input.withConfig({displayName:"input__BaseInput",componentId:"sc-1dusq6m-5"})((e=>{let{hasSuffix:t,theme:n}=e;return(0,p.css)(["height:100%;width:100%;padding:0;"," background-color:inherit;border:none;outline:none;box-shadow:none;color:",";",";::placeholder{color:",";}:disabled{color:",";border-color:",";& ~ ","{color:",";}}:focus{box-shadow:none;}:active:enabled{color:",";}"],t&&(0,p.css)(["padding-right:8px;"]),n.colors.fg.primary,dp.expandPresetStyles({preset:{...n.typography.presets.paragraph[Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL]},theme:n}),n.colors.fg.tertiary,n.colors.fg.disable,n.colors.border.disable,Wv,n.colors.fg.disable,n.colors.fg.primary)})),qv=(0,u.forwardRef)(((e,t)=>{let{inputClassName:n,className:r,disabled:a,hasError:o,hint:i,id:l,label:s,onBlur:d,onFocus:p,hasFocus:m=!1,suffix:g,unit:f="",value:h="",isIndeterminate:b=!1,containerStyleOverride:E="",...y}=e;const _=(0,u.useMemo)((()=>l||(0,pe.default)()),[l]),[v,w]=(0,u.useState)(m),[T,S]=(0,u.useState)(!1);let C=h;f&&h.length&&(C=`${h}${v?"":`${f}`}`),b&&(C="");const I=Boolean(g);return c.createElement(Gv,{className:r},s&&c.createElement(Yv,{htmlFor:_,forwardedAs:"label",disabled:a},s),c.createElement(Vv,{focused:v,hasError:o,styleOverride:E},c.createElement($v,zv({id:_,disabled:a,ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),e&&v&&!T&&(e.select(),S(!0))},onFocus:e=>{p?.(e),w(!0),S(!1)},onBlur:e=>{d?.(e),w(!1)},value:C,hasSuffix:I,className:n},y)),I&&c.createElement(Wv,{hasLabel:Boolean(s),forwardedAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:()=>w(!0)},g)),i&&c.createElement(Zv,{hasError:o},i))}));jv.default,za().string,za().bool,za().bool,za().oneOfType([za().string,za().node]),za().string,jv.default,za().func,za().func.isRequired,za().func,za().node,za().string,za().string,za().bool,za().oneOfType([za().object,za().array]);function Kv(){return Kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kv.apply(this,arguments)}qv.displayName="Input";const Xv=(0,u.forwardRef)((function Hex(e,t){let{value:n,placeholder:r,onChange:a,...o}=e;const[i,l]=(0,u.useState)(""),s=(0,u.useRef)(null),d=(0,u.useRef)(!1),p=Rv(n);(0,u.useEffect)((()=>l(p)),[p]);const m=(0,u.useCallback)((e=>{const t=e.target.value.trim().replace(/^#/,"");l(t)}),[]),g=(0,u.useCallback)((()=>{const e=Uv(i)??p;if(l(e),e!==p){const{red:t,green:r,blue:o}=(0,qe.parseToRgb)(`#${e}`),i=n.color.a;a({color:{r:t,g:r,b:o,a:i}})}}),[i,p,a,n]),f=(0,u.useCallback)((()=>{g()}),[g]),h=(0,u.useCallback)((()=>{d.current||g(),d.current=!1}),[g]),b=(0,u.useCallback)((()=>{l(p),d.current=!0;(t?.current?t:s).current.blur()}),[p,t]);return(0,Ir.useKeyDownEffect)(s,{key:["escape"],editable:!0},b,[b]),(0,Ir.useKeyDownEffect)(s,{key:["enter"],editable:!0},f,[f]),c.createElement(qv,Kv({ref:t||s,value:i||"",onChange:m,onBlur:h,placeholder:r},o))}));function Qv(e){return void 0!==e.a&&e.a<1}const Jv=function(e){const{color:t,alpha:n,stops:r}=e;if(t)return Boolean(Qv(t));if("number"==typeof n&&n<1)return!0;for(const e of r||[])if(Qv(e.color))return!0;return!1};const ew=function(e){return Boolean(e?.type)&&"solid"!==e.type};var tw=n(19362);function nw(){return nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nw.apply(this,arguments)}const rw=24,aw=p.default.div.withConfig({displayName:"swatch__Transparent",componentId:"sc-180wh7-0"})(["width:100%;height:100%;position:absolute;border-radius:100%;",""],tw.transparentBg),ow=p.default.button.withConfig({displayName:"swatch__SwatchButton",componentId:"sc-180wh7-1"})(["cursor:pointer;background-color:transparent;border-color:transparent;padding:0;border-width:0;display:block;width:","px;height:","px;border-radius:100%;overflow:hidden;position:relative;"," ",";::after{content:'';position:absolute;pointer-events:none;left:0;top:0;width:100%;height:100%;border-radius:50%;border:1px solid ",";}"],rw,rw,(e=>{let{disabled:t}=e;return t&&(0,p.css)(["opacity:0.4;cursor:default;pointer-events:none;"])}),(e=>{let{theme:t}=e;return up.focusableOutlineCSS(t.colors.border.focus)}),(e=>{let{theme:t}=e;return t.colors.divider.primary})),iw=(0,p.default)(ow).attrs({as:"div",type:""}).withConfig({displayName:"swatch__SwatchPreview",componentId:"sc-180wh7-2"})([""]),lw=p.default.div.withConfig({displayName:"swatch__SwatchItem",componentId:"sc-180wh7-3"})(["transform:rotate(","deg);display:block;width:100%;height:100%;font-size:13px;position:relative;svg{width:","px;height:","px;position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);filter:drop-shadow(0px 0px 4px rgba(0,0,0,0.4));color:",";transform:rotate(","deg);}"],(e=>{let{displaySplit:t}=e;return t?-45:0}),rw,rw,12,12,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{displaySplit:t}=e;return t?45:0})),sw=p.default.div.withConfig({displayName:"swatch__OpaqueColorWrapper",componentId:"sc-180wh7-4"})(["height:","px;width:50%;overflow:hidden;position:absolute;left:0;top:0;"],rw),cw=p.default.div.withConfig({displayName:"swatch__OpaqueColor",componentId:"sc-180wh7-5"})(["height:","px;width:","px;position:absolute;top:0;left:0;",""],rw,rw,(e=>{let{pattern:t}=e;return(0,ta.default)(t)}));function Swatch(e){let{pattern:t,children:n,isPreview:r=!1,isDisabled:a=!1,isIndeterminate:o=!1,className:i="",...l}=e;if(!t)return null;const s=Jv(t),d=ew(t),u=s?Hv(t):t,p=!d&&s&&!o,m=r?iw:ow;return c.createElement(m,nw({disabled:a,className:i},l),s&&c.createElement(aw,null),c.createElement(lw,{style:(0,ta.default)(t),displaySplit:p},p&&c.createElement(sw,null,c.createElement(cw,{style:(0,ta.default)(u)})),n))}var dw=n(19683),uw=n(13578);const pw=(0,p.default)(m.Button).attrs({type:g.BUTTON_TYPES.DEFAULT}).withConfig({displayName:"focusTrapButton___FocusTrapButton",componentId:"sc-1426fzg-0"})(["background-color:transparent;display:flex;align-items:center;justify-content:flex-start;outline:none;margin:0;padding:0;min-width:inherit;",""],(e=>{let{styleOverride:t}=e;return(0,p.css)(["",""],t)}));pw.propTypes={styleOverride:za().array};const mw=(e,t)=>{"Tab"===e.key?(e.preventDefault(),t.current.focus()):e.stopPropagation()},gw=(0,u.forwardRef)((function FocusTrapButton(e,t){let{inputRef:n,inputLabel:r,children:a,styleOverride:o}=e;return c.createElement(pw,{id:(0,pe.default)(),tabIndex:-1,ref:t,onClick:e=>{e.stopPropagation(),n.current.focus()},onBlur:e=>{e.preventDefault(),e.stopPropagation()},onKeyDown:e=>{e.preventDefault(),"Enter"===e.key&&n.current.focus()},"aria-label":(0,$e.default)(
/* translators: %s: input label that is accessible by pressing Enter */
(0,d.__)("Press Enter to edit %s","web-stories"),r),styleOverride:o},a)}));var fw=n(37723);const hw=function(e){let{ref:t}=e;const n=e=>{const n=(r=t.current)?[...r.querySelectorAll('a[href], button, textarea, input[type]:not([type="hidden"]), select')].filter((e=>!e.hasAttribute("disabled")&&"-1"!==e.getAttribute("tabindex"))):[];var r;const a=n[0],o=n[n.length-1];e.shiftKey||document.activeElement!==o?e.shiftKey&&document.activeElement===a&&(o.focus(),e.preventDefault()):(a.focus(),e.preventDefault())};(0,Ir.useKeyDownEffect)(t,{key:["tab"],allowDefault:!0,editable:!0,shift:!0},n),(0,Ir.useKeyDownEffect)(t,{key:["tab"],allowDefault:!0,editable:!0},n)};var bw=n(80852),Ew=n(42096);function yw(){return yw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yw.apply(this,arguments)}const _w=function(){let{r:e=0,g:t=0,b:n=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return`rgb(${e},${t},${n})`},vw=e=>{let{r:t,g:n,b:r,a}=e;const o=e=>255*(1-a)+a*e;return`rgb(${o(t)}, ${o(n)}, ${o(r)})`},ww=16,Tw=p.default.div.attrs((e=>{let{currentColor:t={},withAlpha:n}=e;return{style:{background:n?vw(t):_w(t)}}})).withConfig({displayName:"pointer__PointerElement",componentId:"sc-1444lan-0"})(["width:","px;height:","px;transform:translate( "," );background:transparent;border:","px solid ",";border-radius:100%;position:relative;&:before{content:'';display:block;width:","px;height:","px;position:absolute;top:-","px;left:-","px;}"],ww,ww,(e=>{let{offsetX:t=0,offsetY:n=0,isRTL:r}=e;return`${(r?-1:1)*t}px, ${n}px`}),2,(e=>{let{theme:t}=e;return t.colors.fg.primary}),32,32,10,10);const Sw=function Pointer(e){const{isRTL:t}=U();return c.createElement(Tw,yw({},e,{isRTL:t}))},Cw=(0,u.lazy)((()=>n.e(341).then(n.bind(n,1150)).then((e=>({default:e.EditableInput}))))),Iw=p.default.button.withConfig({displayName:"editablePreview__Preview",componentId:"sc-cdmcf1-0"})(["margin:0;padding:5px 7px;border:1px solid ",";border-radius:4px;background:transparent;color:",";width:100%;",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),pp),xw=p.default.div.withConfig({displayName:"editablePreview__Wrapper",componentId:"sc-cdmcf1-1"})(["input{",";}"],pp);function EditablePreview(e){let{label:t,value:n,width:r,format:a,onChange:o}=e;const[i,l]=(0,u.useState)(!1),s=(0,u.useCallback)((()=>l(!0)),[]),d=(0,u.useCallback)((()=>l(!1)),[]),p=(0,u.useRef)(null),m=(0,u.useRef)(),g=(0,u.useMemo)((()=>({input:{textAlign:"center",textTransform:"lowercase",width:"100%",padding:"6px 12px",border:"1px solid #5E6668",color:"#E4E5E6",borderRadius:"4px",background:"transparent",lineHeight:"18px"},wrap:{lineHeight:0,maxWidth:`${r}px`}})),[r]);(0,Ir.useKeyDownEffect)(p,{key:"esc",editable:!0},d,[i]);if((0,u.useLayoutEffect)((()=>{const e=setTimeout((()=>{i&&m.current&&(m.current.input.focus(),m.current.input.select(),m.current.input.setAttribute("aria-label",t))}));return()=>clearTimeout(e)}),[i,t]),!i)return c.createElement(Iw,{"aria-label":t,onClick:s,onFocus:s},c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},a(n)));const f="transparent"===n?"000000":n;return c.createElement(xw,{ref:p,tabIndex:-1,onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||d()}},c.createElement(u.Suspense,{fallback:null},c.createElement(Cw,{value:f,ref:m,onChange:o,onChangeComplete:d,style:g})))}EditablePreview.defaultProps={label:"",value:""};const Aw=EditablePreview,kw=(0,u.lazy)((()=>n.e(341).then(n.bind(n,1150)).then((e=>({default:e.Saturation}))))),Ow=(0,u.lazy)((()=>n.e(341).then(n.bind(n,1150)).then((e=>({default:e.Hue}))))),Pw=(0,u.lazy)((()=>n.e(341).then(n.bind(n,1150)).then((e=>({default:e.Alpha}))))),Nw=p.default.div.withConfig({displayName:"currentColorPicker__BodyFallback",componentId:"sc-eqs4bc-0"})(["height:","px;display:flex;align-items:center;justify-content:center;"],240),Rw=p.default.div.withConfig({displayName:"currentColorPicker__SaturationWrapper",componentId:"sc-eqs4bc-1"})(["position:relative;margin:0 16px;flex:0 1 ","px;"],116),Mw=(0,p.css)(["margin:0 16px;border:1px solid ",";flex:0 0 ","px;position:relative;border-radius:","px;background-clip:padding-box;"],(e=>{let{theme:t}=e;return t.colors.shadow.active}),20,50),Lw=p.default.div.withConfig({displayName:"currentColorPicker__HueWrapper",componentId:"sc-eqs4bc-2"})(["",""],Mw),Dw=p.default.div.withConfig({displayName:"currentColorPicker__AlphaWrapper",componentId:"sc-eqs4bc-3"})([""," div:first-child div:first-child div:first-child{background-image:conic-gradient( "," 0.25turn,transparent 0turn 0.5turn,"," 0turn 0.75turn,transparent 0turn 1turn ) !important;background-size:8px 8px !important;}"],Mw,(e=>{let{theme:t}=e;return t.colors.fg.tertiary}),(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),Bw=p.default.div.withConfig({displayName:"currentColorPicker__Footer",componentId:"sc-eqs4bc-4"})(["height:","px;line-height:19px;position:relative;margin:0 16px;display:flex;justify-content:space-between;"],36),Fw=p.default.div.withConfig({displayName:"currentColorPicker__HexValue",componentId:"sc-eqs4bc-5"})(["width:","px;"],74),Hw=p.default.div.withConfig({displayName:"currentColorPicker__Opacity",componentId:"sc-eqs4bc-6"})(["width:","px;"],52);function CurrentColorPicker(e){let{rgb:t,hsl:n,hsv:r,hex:a,onChange:o,showOpacity:i,hasEyedropper:l}=e;const s=String(Math.round(100*t.a)),p="#"===a[0]?a.substr(1):a,f=(0,u.useCallback)((e=>("transparent"===e&&(e="000000"),`#${e}`)),[]),h=(0,u.useCallback)((e=>`${e}%`),[]),b=(0,u.useCallback)((e=>o({hex:e})),[o]),E=(0,u.useCallback)((e=>o({...t,a:isNaN(e)?1:parseInt(e)/100})),[t,o]),{initEyedropper:y}=Bv({onChange:o});return c.createElement(c.Fragment,null,c.createElement(u.Suspense,{fallback:null},c.createElement(Rw,null,c.createElement(kw,{radius:"8px",pointer:()=>c.createElement(Sw,{offsetX:-8,offsetY:-8,currentColor:t}),hsl:n,hsv:r,onChange:o})),c.createElement(Lw,null,c.createElement(Ow,{direction:"horizontal",height:"20px",radius:"50px",pointer:()=>c.createElement(Sw,{offsetX:-8,offsetY:1,currentColor:t}),hsl:n,onChange:o})),i&&c.createElement(Dw,null,c.createElement(Pw,{direction:"horizontal",height:"20px",radius:"50px",pointer:()=>c.createElement(Sw,{offsetX:-8,offsetY:1,currentColor:t,withAlpha:!0}),rgb:t,hsl:n,onChange:o}))),c.createElement(Bw,null,l&&c.createElement(m.Button,{variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.QUATERNARY,size:g.BUTTON_SIZES.SMALL,"aria-label":(0,d.__)("Pick a color from canvas","web-stories"),onClick:y(),onPointerEnter:y(!1)},c.createElement($y,null)),c.createElement(Fw,null,c.createElement(Aw,{label:(0,d.__)("Edit hex value","web-stories"),value:p,onChange:b,width:80,format:f})),i&&c.createElement(Hw,null,c.createElement(Aw,{label:(0,d.__)("Edit opacity","web-stories"),value:s,width:52,format:h,onChange:E}))))}CurrentColorPicker.defaultProps={showOpacity:!0};const Uw=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function DynamicFetcher(e){const r=(0,u.useRef)(!1),[a,o]=(0,u.useState)(null);return(0,u.useEffect)((()=>(r.current=!0,n.e(341).then(n.bind(n,66286)).then((e=>{let{CustomPicker:n}=e;r.current&&o({component:n(...t)})})),()=>{r.current=!1})),[]),a?c.createElement(a.component,e):c.createElement(Nw,null,c.createElement(Ew.default,null))}return DynamicFetcher}(CurrentColorPicker);var jw=n(4251);const zw=112,Gw=12,Yw="solid",Zw="linear",Ww="radial",Vw="DELETE_COLOR_PRESET_DIALOG_DISMISSED",$w=e=>(0,jw.default)(`#${e}`),qw=[$w("00000000"),$w("000000"),$w("454545"),$w("B6B6B6"),$w("EEEEEE"),$w("FFFFFF"),$w("003BAD"),$w("0044C9"),$w("0354F2"),$w("1263FF"),$w("347EFF"),$w("6D9FFF"),$w("4B1283"),$w("5A189A"),$w("7B2CBF"),$w("9D4EDD"),$w("C77DFF"),$w("E0AAFF"),$w("E03568"),$w("FF477E"),$w("FF5C8A"),$w("FF7096"),$w("FF85A1"),$w("FF99AC"),$w("590D22"),$w("800F2F"),$w("A4133C"),$w("C9184A"),$w("FF4D6D"),$w("FF758F"),$w("DBCA09"),$w("FFD900"),$w("FFE747"),$w("FFEE70"),$w("FFF599"),$w("FFFFB7"),$w("E06E04"),$w("EA7D00"),$w("FF9500"),$w("FFA811"),$w("FFBC35"),$w("FFCC4A"),$w("607047"),$w("79895D"),$w("839568"),$w("A5B98B"),$w("C1D3AA"),$w("D4E4C0"),$w("603809"),$w("603808"),$w("6F4518"),$w("8B5E34"),$w("A47148"),$w("BC8A5F")],Kw=p.default.button.attrs((e=>{let{position:t}=e;return{style:{right:t*zw-6+"px"}}})).withConfig({displayName:"gradientStop__Stop",componentId:"sc-1kqiqwc-0"})(["position:absolute;top:-","px;background:transparent;border:0;padding:0;&:focus{outline:none;}"],24),Xw=(0,p.css)(["position:absolute;left:0;top:0;width:100%;height:100%;"]),Qw=p.default.div.withConfig({displayName:"gradientStop__Background",componentId:"sc-1kqiqwc-1"})([""," ",""],Xw,(e=>{let{color:t}=e;return(0,ta.default)(t)})),Jw=p.default.div.withConfig({displayName:"gradientStop__Transparent",componentId:"sc-1kqiqwc-2"})([""," width:100%;height:100%;position:absolute;top:0;"],tw.transparentBg),eT=p.default.div.withConfig({displayName:"gradientStop__StopPointer",componentId:"sc-1kqiqwc-3"})(["transform:translate(",",0);width:","px;height:","px;border-radius:2px;overflow:hidden;"],(e=>{let{offset:t}=e;return`${t}px`}),14,14),tT=p.default.div.withConfig({displayName:"gradientStop__IconWrapper",componentId:"sc-1kqiqwc-4"})(["position:absolute;left:-","px;top:-8px;color:",";svg{width:32px;height:32px;}"],10,(e=>{let{theme:t,isSelected:n}=e;return n?t.colors.fg.primary:t.colors.fg.tertiary}));const nT=(0,u.forwardRef)((function GradientStopWithRef(e,t){let{position:n,index:r,isSelected:a,color:o,onSelect:i}=e;return c.createElement(Kw,{ref:t,key:r,isSelected:a,position:n,onFocus:()=>i(r),onClick:()=>i(r),"aria-label":(0,$e.default)(
/* translators: %d: stop percentage */
(0,d.__)("Gradient stop at %d%%","web-stories"),Math.round(100-100*n))},c.createElement(tT,{isSelected:a},c.createElement(J_,null)),c.createElement(eT,{offset:-1},c.createElement(Jw,null),c.createElement(Qw,{color:o})))}));nT.propTypes={position:za().number.isRequired,index:za().number.isRequired,isSelected:za().bool.isRequired,color:za().object.isRequired,onSelect:za().func.isRequired};const rT=nT;const aT=function(e,t){(0,Ir.useKeyDownEffect)(e,"left",(()=>t(.01)),[t]),(0,Ir.useKeyDownEffect)(e,"right",(()=>t(-.01)),[t])};const oT=function(e,t,n,r){(0,Ir.useKeyDownEffect)(e,"enter",(()=>{return t((e=function(e,t){const n=t===e.length-1;if(n&&e[t].position<1)return 1;if(0===t&&e[0].position>0)return 0;const r=n?e[t-1]:e[t],a=n?e[t]:e[t+1];return r.position+(a.position-r.position)/2}(n,r),a=4,Number(e.toFixed(a))));var e,a}),[t,n,r])};const iT=function(e,t){(0,Ir.useKeyDownEffect)(e,"delete",(()=>{e.current.focus(),t()}),[t,e])};const lT=function(e,t,n){const r=t.length,a=(0,u.useMemo)((()=>Array.from({length:r}).map(u.createRef)),[r]);return(0,u.useLayoutEffect)((()=>{e.current.contains(document.activeElement)&&a[n].current.focus()}),[n,a,r,e]),a};function sT(e){return e.pageX||e.clientX}const cT=function(e,t){const[n,r]=(0,u.useState)(null);return(0,u.useLayoutEffect)((()=>{const n=e.current,a=n.getBoundingClientRect().left,o=e=>{if(e.target!==n)return;const o=(sT(e)-a+7)/zw;t(1.0625-o),r(null)},i=e=>{e.target===n?r(sT(e)-a):r(null)},l=e=>{e.target===n&&r(null)};return n.addEventListener("pointermove",i),n.addEventListener("pointerleave",l),n.addEventListener("pointerdown",o),()=>{n.removeEventListener("pointermove",i),n.removeEventListener("pointerleave",l),n.removeEventListener("pointerdown",o)}}),[e,t]),n};const dT=function(e,t){const n=(0,u.useRef)(null);(0,u.useLayoutEffect)((()=>{const r=e.current,a=e=>{const r=sT(e)-n.current;n.current=sT(e),t(-r/zw)},o=e=>{n.current=null,function(e){e.target.releasePointerCapture&&e.target.releasePointerCapture(e.pointerId)}(e),e.target.removeEventListener("pointermove",a),e.target.removeEventListener("pointerup",o)},i=e=>{e.target!==r&&(n.current=sT(e),function(e){e.target.setPointerCapture&&e.target.setPointerCapture(e.pointerId)}(e),e.target.addEventListener("pointermove",a),e.target.addEventListener("pointerup",o))};return r.addEventListener("pointerdown",i),()=>r.removeEventListener("pointerdown",i)}),[e,t])},uT=p.default.div.withConfig({displayName:"gradientLine__Line",componentId:"sc-1k22wp0-0"})([""," width:","px;height:","px;border-radius:2px;position:relative;&:focus{outline:none;}"],tw.transparentBg,zw,Gw),pT=p.default.div.attrs((e=>{let{stops:t}=e;return{style:(0,ta.default)({type:"linear",stops:t,rotation:.25})}})).withConfig({displayName:"gradientLine__Background",componentId:"sc-1k22wp0-1"})(["position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;"]),mT=(0,p.default)(Sw).attrs((e=>{let{x:t}=e;return{style:{left:`${t}px`},offsetX:-6}})).withConfig({displayName:"gradientLine__TempPointer",componentId:"sc-1k22wp0-2"})(["height:","px;width:","px;opacity:0.6;top:1px;pointer-events:none;"],10,10);const gT=function GradientLine(e){let{stops:t,currentStopIndex:n,onSelect:r,onAdd:a,onDelete:o,onMove:i}=e;const l=(0,u.useRef)();aT(l,i),oT(l,a,t,n),iT(l,o);const s=lT(l,t,n);dT(l,i);const p=cT(l,a);return c.createElement(uT,{ref:l,"aria-label":(0,d.__)("Gradient line","web-stories"),tabIndex:"-1"},c.createElement(pT,{stops:t}),t.map(((e,t)=>{let{position:a,color:o}=e;return c.createElement(rT,{ref:e=>s[t].current=e,key:t,index:t,isSelected:t===n,position:a,onSelect:r,color:{color:o}},c.createElement(Sw,{offsetX:-6}))})),p&&c.createElement(mT,{"aria-label":(0,$e.default)(
/* translators: %d: stop percentage */
(0,d.__)("Temporary gradient stop at %d%%","web-stories"),Math.round(p/zw*100)),x:p}))},fT=p.default.div.withConfig({displayName:"gradientPicker__Wrapper",componentId:"sc-a6h8ls-0"})(["display:flex;justify-content:space-between;align-items:center;padding:16px 16px 0;height:60px;"]),hT=p.default.div.withConfig({displayName:"gradientPicker__Buttons",componentId:"sc-a6h8ls-1"})(["display:flex;gap:8px;"]),bT=(0,p.default)(m.Button).withConfig({displayName:"gradientPicker__SmallButton",componentId:"sc-a6h8ls-2"})(["width:24px;height:24px;padding:0;svg{width:24px;height:24px;}"]);const ET=function GradientPicker(e){let{stops:t,currentStopIndex:n,type:r,onSelect:a,onAdd:o,onDelete:i,onMove:l,onRotate:s,onReverse:u}=e;const p=(0,d.__)("Reverse gradient stops","web-stories"),m=(0,d.__)("Rotate gradient","web-stories"),f="radial"!==r;return c.createElement(fT,null,c.createElement(gT,{stops:t,currentStopIndex:n,onSelect:a,onAdd:o,onDelete:i,onMove:l}),c.createElement(hT,null,c.createElement(Tooltip,{hasTail:!0,title:p},c.createElement(bT,{"aria-label":p,onClick:u,type:g.BUTTON_TYPES.QUATERNARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE},c.createElement(Bf,null))),f&&c.createElement(Tooltip,{hasTail:!0,title:m},c.createElement(bT,{onClick:s,"aria-label":m,type:g.BUTTON_TYPES.QUATERNARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE},c.createElement(Of,{id:"gradient-rotator"})))))};function yT(){return yT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yT.apply(this,arguments)}const _T=p.default.div.withConfig({displayName:"header__Wrapper",componentId:"sc-3jvjbz-0"})(["display:flex;justify-content:space-between;align-items:center;height:","px;padding:4px 8px 4px 8px;position:relative;border-bottom:1px solid ",";"],44,(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),vT=p.default.div.withConfig({displayName:"header__Actions",componentId:"sc-3jvjbz-1"})(["display:flex;margin-left:auto;"]),wT=(0,p.default)(m.Button).withConfig({displayName:"header__StyledButton",componentId:"sc-3jvjbz-2"})(["margin-left:8px;",";"],pp);const TT=function Header(e){let{children:t,handleClose:n,isEditMode:r=!1,setIsEditMode:a=(()=>{}),hasPresets:o=!1}=e;const i=(0,u.useRef)();(0,u.useEffect)((()=>{i.current?.focus()}),[]);const l={type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE,onClick:e=>{e.stopPropagation(),a(!r)},isEditMode:r};return c.createElement(_T,null,t,c.createElement(vT,null,o&&c.createElement(wT,yT({},l,{"aria-label":r?(0,d.__)("Exit edit mode","web-stories"):(0,d.__)("Edit colors","web-stories")}),r?(0,d.__)("Done","web-stories"):c.createElement(Ny.default,null)),c.createElement(wT,{"aria-label":(0,d.__)("Close","web-stories"),onClick:n,type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE,ref:i},c.createElement(cp.default,null))))};function ST(){return ST=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ST.apply(this,arguments)}function CT(e){let{isToggled:t=!1,type:n=null,...r}=e;const a=n===g.BUTTON_TYPES.QUATERNARY?n:t?g.BUTTON_TYPES.SECONDARY:g.BUTTON_TYPES.TERTIARY;return c.createElement(m.Button,ST({},r,{type:a,"aria-pressed":t,isToggled:t}))}function LockToggle(e){let{isLocked:t=!1,...n}=e;return c.createElement(m.Button,ST({},n,{"aria-pressed":t,type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE}),t?c.createElement(IE.default,null):c.createElement(PE,null))}const IT=p.default.div.withConfig({displayName:"patternTypePicker__Wrapper",componentId:"sc-1mq6bg0-0"})(["display:flex;justify-content:flex-start;align-items:center;height:","px;padding:0 16px;position:relative;gap:8px;"],52);const xT=function PatternTypePicker(e){let{type:t,setToGradient:n,setToSolid:r}=e;const a=(0,u.useCallback)((()=>n("linear")),[n]),o=(0,u.useCallback)((()=>n("radial")),[n]);return c.createElement(IT,null,c.createElement(CT,{"aria-label":(0,d.__)("Solid pattern type","web-stories"),onClick:r,type:g.BUTTON_TYPES.QUATERNARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE,isToggled:"solid"===t},c.createElement(Oy,null)),c.createElement(CT,{"aria-label":(0,d.__)("Linear gradient pattern type","web-stories"),onClick:a,type:g.BUTTON_TYPES.QUATERNARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE,isToggled:"linear"===t},c.createElement(wy,null)),c.createElement(CT,{"aria-label":(0,d.__)("Radial gradient pattern type","web-stories"),onClick:o,type:g.BUTTON_TYPES.QUATERNARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE,isToggled:"radial"===t},c.createElement(xy,null)))};const AT=function(e,t){const n=e.findIndex((e=>{let{position:n}=e;return n>t}));if(-1===n)return{index:e.length,color:e[e.length-1].color};if(0===n)return{index:0,color:e[0].color};const r=e[n-1],a=e[n],o=(t-r.position)/(a.position-r.position),{color:{r:i,g:l,b:s,a:c=1}}=r,{color:{r:d,g:u,b:p,a:m=1}}=a,g=(e,t)=>e+(t-e)*o,f={r:Math.round(g(i,d)),g:Math.round(g(l,u)),b:Math.round(g(s,p)),a:g(c,m)};return{index:n,color:1===f.a?{r:f.r,g:f.g,b:f.b}:f}};function kT(e){return e.map((e=>{let{color:{r:t,g:n,b:r,a},position:o}=e;return{color:(0,bw.default)(t,n,r,a).color,position:o}}))}const OT=function(e){const{regenerate:t,type:n}=e;if(!t)return null;switch(n){case Yw:return function(e){let{currentColor:{r:t,g:n,b:r,a}}=e;return(0,bw.default)(t,n,r,a)}(e);case Zw:return function(e){let{stops:t,rotation:n,alpha:r}=e;const a={type:Zw,stops:kT(t)};return 0!==n&&(a.rotation=n),1!==r&&void 0!==r&&(a.alpha=r),a}(e);case Ww:return function(e){let{stops:t,center:n,size:r,alpha:a}=e;const o={type:Ww,stops:kT(t)};return!n||.5===n.x&&.5===n.y||(o.center=n),!r||1===r.w&&1===r.h||(o.size=r),1!==a&&void 0!==a&&(o.alpha=a),o}(e);default:return null}},PT={type:Yw,regenerate:!1,stops:[],currentColor:{r:0,g:0,b:0,a:0},currentStopIndex:0,rotation:.5,alpha:1,center:{x:.5,y:.5},size:{w:1,h:1}},NT={load:(e,t)=>{let{payload:n}=t;const{type:r,color:a,stops:o,rotation:i,center:l,size:s,alpha:c}=n,d=r&&r!==Yw&&(e.type!==r||o?.length!==e.stops?.length)?{currentColor:o[0].color,currentStopIndex:0}:{};switch(r){case Zw:return{...e,...d,type:r,regenerate:!1,stops:o,alpha:isNaN(c)?e.alpha:c,rotation:isNaN(i)?0:i};case Ww:return{...e,...d,type:r,regenerate:!1,stops:o,center:void 0!==l?l:e.center,size:void 0!==s?s:e.size,alpha:isNaN(c)?e.alpha:c};default:return{...e,type:Yw,regenerate:!1,currentColor:a}}},setToSolid:e=>({...e,type:Yw,regenerate:!0}),setToGradient:(e,t)=>{let{payload:n}=t;const r=e.stops&&e.stops.length>=2?e.stops:[{color:e.currentColor,position:0},{color:e.currentColor,position:1}];return{...e,regenerate:!0,type:n,stops:r}},addStopAt:(e,t)=>{let{payload:n}=t;if(n=Number(n.toFixed(2)),e.stops.some((e=>{let{position:t}=e;return t===n})))return e;const{index:r,color:a}=AT(e.stops,n),o=[...e.stops.slice(0,r),{color:a,position:n},...e.stops.slice(r)];return{...e,regenerate:!0,currentColor:a,currentStopIndex:r,stops:o}},moveCurrentStopBy:(e,t)=>{let{payload:n}=t;const r=e.currentStopIndex,a=e.stops[r].position,o=Math.max(0,Math.min(1,Number((a+n).toFixed(2))));if(o===a)return e;const i=[...e.stops.slice(0,r),{...e.stops[r],position:o},...e.stops.slice(r+1)];i.sort(((e,t)=>e.position-t.position));const l=i.findIndex((e=>{let{position:t}=e;return t===o}));return{...e,regenerate:!0,stops:i,currentStopIndex:l}},removeCurrentStop:e=>{if(2===e.stops.length)return e;const t=e.currentStopIndex,n=[...e.stops];n.splice(t,1);const r=t===n.length?t-1:t;return{...e,regenerate:!0,stops:n,currentColor:n[r].color,currentStopIndex:r}},updateCurrentColor:(e,t)=>{let{payload:{rgb:n}}=t;const r={...n},a={...e,regenerate:!0,currentColor:r};return e.type!==Yw&&(a.stops=[...e.stops.slice(0,e.currentStopIndex),{...e.stops[e.currentStopIndex],color:r},...e.stops.slice(e.currentStopIndex+1)]),a},rotateClockwise:e=>({...e,rotation:(e.rotation+.25)%1,regenerate:!0}),selectStop:(e,t)=>{let{payload:n}=t;const r=Math.max(0,Math.min(e.stops.length-1,n)),a=e.stops[r].color;return{...e,currentStopIndex:r,currentColor:a}},reverseStops:e=>{const t=e.stops.map((e=>{let{color:t,position:n}=e;return{color:t,position:1-n}})).reverse(),n=t.length-e.currentStopIndex-1;return{...e,stops:t,currentStopIndex:n,regenerate:!0}}};const RT=function(){const[e,t]=(0,u.useReduction)(PT,NT),n=OT(e);return{state:{...e,generatedColor:n},actions:t}},MT=(0,p.default)(m.Button).withConfig({displayName:"addCustomColor__StyledButton",componentId:"sc-4t2ps2-0"})(["flex:0 0 32px;margin:0 16px 16px;"]);const LT=function AddCustomColor(e){let{color:t,onSave:n}=e;const{updateStory:r,globalStoryStyles:a}=Qa((e=>{let{state:{story:{globalStoryStyles:t}},actions:{updateStory:n}}=e;return{globalStoryStyles:t,updateStory:n}})),o=(0,u.useCallback)((()=>{r({properties:{globalStoryStyles:{...a,colors:Fr([...a.colors,t].filter(Boolean))}}}),n()}),[n,t,a,r]);return c.createElement(MT,{onClick:o,type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Add to Saved Colors","web-stories"))};const DT=function CustomColorPicker(e){let{color:t,allowsGradient:n,allowsOpacity:r,handleColorChange:a,handleClose:o,hideCustomPicker:i,allowsSavedColors:l,hasEyedropper:s}=e;const{state:{type:p,stops:f,currentStopIndex:h,currentColor:b,generatedColor:E},actions:{load:y,updateCurrentColor:_,reverseStops:v,selectStop:w,addStopAt:T,removeCurrentStop:S,rotateClockwise:C,moveCurrentStopBy:I,setToSolid:x,setToGradient:A}}=RT(),k=(0,u.useRef)(!0);(0,u.useEffect)((()=>()=>{k.current=!1}),[]),(0,u.useEffect)((()=>{E&&a(E)}),[a,E]),(0,u.useEffect)((()=>{y(t||(0,bw.default)(0,0,0))}),[t,y]);const O=(0,u.useCallback)((e=>{_(e),!k.current&&e?.rgb&&a({color:e.rgb})}),[_,a]);return c.createElement(c.Fragment,null,c.createElement(TT,{handleClose:o},c.createElement(m.Button,{"aria-label":(0,d.__)("Go back","web-stories"),onClick:i,type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE},c.createElement(bf,null))),n&&c.createElement(xT,{type:p,setToGradient:A,setToSolid:x}),"solid"!==p&&c.createElement(ET,{stops:f,currentStopIndex:h,onSelect:w,onReverse:v,onAdd:T,onDelete:S,onRotate:C,onMove:I,type:p}),c.createElement(Uw,{color:b,onChange:O,showOpacity:r,hasEyedropper:s}),l&&c.createElement(LT,{color:E||t,onSave:i}))},BT='[tabIndex="-1"]:not(:disabled)';function FT(e,t){let n,r=t;for(;r>0;)n=n?n?.parentElement:e.parentElement,r--;return n}function HT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"firstChild";const r=FT(e,t),a=r.parentNode[n];return a.querySelector(BT)}function UT(e){const t=e.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2}}function jT(e,t,n){return n>0?function(e,t,n){const r=FT(e,n);if(r){const e=r[t];return e?e.querySelector(BT):null}return null}(e,t,n):function(e,t){let n=e[t];for(;n&&n.disabled;)n=n[t];return n}(e,t)}function zT(e,t){return(e?"ArrowRight"===t||"ArrowUp"===t||"PageUp"===t:"ArrowLeft"===t||"ArrowUp"===t||"PageUp"===t)?"previousSibling":"nextSibling"}function GT(e,t,n){const r=UT(e);let a=null,o=null,i=null;for(let c=jT(e,t,n);c;c=jT(c,t,n)){const e=UT(c);if(Math.floor(e.y)===Math.floor(r.y))continue;if(a&&Math.floor(e.y)>Math.floor(o.y))break;const t=(l=r,s=e,Math.pow(l.x-s.x,2)+Math.pow(l.y-s.y,2));(!i||t<i)&&(i=t,o=e,a=c)}var l,s;return a}function YT(e){let{ref:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{isRTL:a}=U(),o=(0,u.useCallback)((e=>{let{key:t,target:n}=e;const o=n,i=zT(a,t),l=e=>{if(e){const t=r>0?FT(e,r):e;o.tabIndex=-1,e.tabIndex=0,e.focus(),t.scrollIntoView("previousSibling"===i)}};if("ArrowLeft"===t||"ArrowRight"===t){const e=jT(o,i,r);e&&l(e)}else if("ArrowUp"===t||"ArrowDown"===t){const e=GT(o,i,r);if(e)o.tabIndex=-1,e.tabIndex=0,e.focus();else if("ArrowUp"===t){l(r>0?HT(o,r):o.parentNode.firstChild)}else{l(r>0?HT(o,r,"lastChild"):o.parentNode.lastChild)}}else if("Home"===t){l(r>0?HT(o,r):o.parentNode.firstChild)}else if("End"===t){l(r>0?HT(o,r,"lastChild"):o.parentNode.lastChild)}else if("PageDown"===t||"PageUp"===t){let e=o;for(let t=0;jT(e,i,r)&&t<5;e=jT(e,i,r))t++;l(e)}}),[a,r]);(0,Ir.useKeyDownEffect)(t,{key:["up","down","left","right","pageup","pagedown","home","end"]},o,[t,o,...n])}var ZT=n(63247),WT=n(76611);const VT=["backgroundColor","backgroundTextMode","font","fontSize","lineHeight","padding","textAlign"];function $T(e,t,n){const r=t.colors,a=n?"color":"background";return r.find((t=>{try{return(0,ZT.default)(t,e,a)}catch(e){return!1}}))}function qT(e,t){const{color:n,backgroundColor:r,font:a,fontWeight:o,backgroundTextMode:i,textAlign:l,letterSpacing:s,lineHeight:c,isItalic:d,isUnderline:u,padding:p,fontSize:m}=e;let g={textAlign:l,letterSpacing:s/100+"em",fontWeight:o,textDecoration:u?"underline":null,fontStyle:d?"italic":null,fontFamily:(0,Xn.generateFontFamily)(a),...(0,ta.default)(n,"color")};return t||(g={...g,fontSize:m,lineHeight:c,padding:p,backgroundTextMode:i}),i===Mn.BACKGROUND_TEXT_MODE.NONE||t&&i===Mn.BACKGROUND_TEXT_MODE.HIGHLIGHT||(g={...g,...(0,ta.default)(r,"background")}),g}function KT(e){return e!==we?e:null}function XT(e){const{color:t,fontWeight:n,isItalic:r,isUnderline:a,letterSpacing:o}=(0,Kr.getHTMLInfo)(e);return{color:t!==we?t:(0,bw.default)(0,0,0),fontWeight:KT(n),isItalic:KT(r),isUnderline:KT(a),letterSpacing:KT(o)}}function QT(e,t,n,r){const a=Ue===n?[]:e.map((e=>{let{content:t,backgroundColor:n}=e;return r?n:(0,Kr.getHTMLInfo)(t).color})).filter((e=>e!==we)).filter((e=>e&&!$T(e,t,!0))),o=je===n?[]:e.map((e=>({...er(e,VT),...XT(e.content)}))).filter((e=>!function(e,t){const n=t.textStyles,r=(0,WT.default)(qT(e));return n.find((e=>r===(0,WT.default)(qT(e))))}(e,t)));return{colors:a,textStyles:o}}function JT(e,t){const n=e.map((e=>{let{backgroundColor:t}=e;return t||null})).filter((e=>e&&!$T(e,t,!1)));return{colors:n}}function eS(e,t){return t.length>0&&t.every((t=>{let{type:n}=t;return e===n}))}const tS=function(e){let{presetType:t,isBackgroundColor:n}=e;const{currentPage:r,currentStoryStyles:a={colors:[]},selectedElements:o,globalStoryStyles:i={colors:[],textStyles:[]},updateStory:l}=Qa((e=>{let{state:{currentPage:t,selectedElements:n,story:{globalStoryStyles:r,currentStoryStyles:a}},actions:{updateStory:o}}=e;return{currentPage:t,currentStoryStyles:a,selectedElements:n,globalStoryStyles:r,updateStory:o}})),{colors:s,textStyles:c}=i,{colors:d}=a,p=eS("text",o),m=o?.[0]?.id===r?.elements?.[0]?.id,g=(0,u.useCallback)(((e,a)=>{return p?{...e,...QT(o,a,t,n)}:m?{...e,...(i=r,l=a,{colors:[i.backgroundColor].filter((e=>e&&!$T(e,l,!1)))})}:{...e,...JT(o,a)};var i,l}),[r,m,p,t,o,n]),f=(0,u.useCallback)((e=>{l({properties:{currentStoryStyles:{colors:Fr([...d,...e.colors])}}})}),[d,l]),h=(0,u.useCallback)((e=>{l({properties:{globalStoryStyles:{textStyles:Fr([...c,...e.textStyles]),colors:Fr([...s,...e.colors])}}})}),[s,c,l]),b=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t?a:i;if((e=g(e,n)).colors?.length>0||e.textStyles?.length>0)return t?f(e,n):h(e,n),e}),[g,a,i,h,f]);return{addGlobalPreset:e=>(e.stopPropagation(),b({textStyles:[],colors:[]})),addLocalPreset:e=>(e.stopPropagation(),b({colors:[]},!0))}};function nS(){return nS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nS.apply(this,arguments)}const rS=p.default.button.withConfig({displayName:"colorAdd__AddColorAction",componentId:"sc-1s3q8di-0"})(["cursor:pointer;background-color:transparent;color:",";border-color:",";border-width:1px;border-style:dashed;border-radius:50%;height:","px;width:","px;padding:0;svg{height:100%;width:100%;}:hover{border-color:",";}",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),24,24,(e=>{let{theme:t}=e;return t.colors.border.defaultHover}),pp);const aS=function ColorAdd(e){let{isLocal:t=!1,isGlobal:n=!1,isBackground:r=!1,...a}=e;const{addGlobalPreset:o,addLocalPreset:i}=tS({presetType:je,isBackgroundColor:r});if(!t&&!n)return null;const l=t?(0,d.__)("Add local color","web-stories"):(0,d.__)("Add global color","web-stories");return c.createElement(rS,nS({tabIndex:"0",onClick:t?i:o,"aria-label":l},a),c.createElement(l_,null))};function oS(){return oS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oS.apply(this,arguments)}const iS=(0,p.css)(["",";"],(e=>{let{theme:t}=e;return up.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),lS=p.default.div.attrs({role:"listbox"}).withConfig({displayName:"basicColorList__SwatchList",componentId:"sc-10h6tzp-0"})(["display:flex;max-width:100%;flex-wrap:wrap;gap:6px;"]),sS=(0,p.default)(Swatch).attrs((e=>{let{isSelected:t}=e;return{role:"option","aria-selected":t}})).withConfig({displayName:"basicColorList__StyledSwatch",componentId:"sc-10h6tzp-1"})(["",";",""],iS,(e=>{let{isSelected:t,theme:n}=e;return t&&(0,p.css)(["border:2px solid ",";"],n.colors.border.defaultActive)}));function cS(e){if(!e)return"";const t=(0,ta.default)(e);return t.backgroundColor||t.backgroundImage}function ConditionalTooltip(e){let{tooltip:t,children:n}=e;return t?c.createElement(Tooltip,{title:t},n):n}const dS=function BasicColorList(e){let{color:t,colors:n,handleClick:r,allowsOpacity:a,allowsGradient:o,isLocal:i=!1,isGlobal:l=!1,isEditMode:s,changedStyle:p,...m}=e;const g=cS(t),f=(0,u.useRef)(null);YT({ref:f});const h=n.map(cS).findIndex((e=>g===e));let b=0;const E=i?(0,d.__)("local","web-stories"):(0,d.__)("global","web-stories"),y="background"===p;return c.createElement(c.Fragment,null,n.length>0&&c.createElement(lS,oS({ref:f},m),n.map(((e,t)=>{const n=!a&&Jv(e),l=!o&&ew(e),u=(n||l)&&!s;let p=null;u&&!s&&(p=n?(0,d.__)("Page background colors cannot have an opacity.","web-stories"):(0,d.__)("Gradient not allowed for Text","web-stories"));const m=cS(e),f=s?(0,$e.default)(
/* translators: First %s is the color type, second %s is the color as a string */
(0,d.__)("Delete %1$s color: %2$s","web-stories"),E,m):m,y=g===m;let _=t===b?0:-1;return h>=0?_=y?0:-1:u&&t===b&&(b++,_=-1),c.createElement(ConditionalTooltip,{key:m,tooltip:p},c.createElement(sS,{onClick:()=>r(e,i),pattern:e,isSelected:y,isDisabled:u,tabIndex:_,title:f},s&&c.createElement(cp.default,null)))})),(i||l)&&c.createElement(aS,{isLocal:i,isGlobal:l,isBackground:y})),!n.length&&(i||l)&&c.createElement(aS,{isLocal:i,isGlobal:l,isBackground:y}))};var uS=n(98415);const pS=p.default.label.withConfig({displayName:"confirmationDialog__Label",componentId:"sc-bvt4vo-0"})(["margin-left:12px;"]),mS=p.default.footer.withConfig({displayName:"confirmationDialog__CheckboxWrapper",componentId:"sc-bvt4vo-1"})(["display:flex;margin-top:12px;padding:14px 0 0 9px;border-top:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary}));const gS=function ConfirmationDialog(e){let{onClose:t,onPrimary:n}=e;const[r,a]=(0,u.useState)(Jo.getItemByKey(Qo[Vw])),o=`cb-${(0,pe.default)()}`;return c.createElement(y,{isOpen:!0,onClose:t,secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:n,primaryText:(0,d.__)("Delete","web-stories")},c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("This is a global color. Deleting this color will remove it from the Saved Colors across all stories and the color will no longer be available to any other users on the site.","web-stories")),c.createElement(mS,null,c.createElement(uS.Checkbox,{id:o,checked:r,onChange:()=>{Jo.setItemByKey(Qo[Vw],!r),a(!r)}}),c.createElement(pS,{htmlFor:o},c.createElement(Ke.Text,{as:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Don't ask for confirmation again.","web-stories")))))};const fS=function(e){let{onEmpty:t=(()=>{})}=e;const{currentStoryStyles:n,globalStoryStyles:r,updateStory:a}=Qa((e=>{let{state:{story:{globalStoryStyles:t,currentStoryStyles:n}},actions:{updateStory:r}}=e;return{currentStoryStyles:n,globalStoryStyles:t,updateStory:r}})),{colors:o}=r||{},{colors:i}=n||{},l=i?.length>0,s=(0,u.useCallback)((e=>{const n=o.filter((t=>t!==e));a({properties:{globalStoryStyles:{...r||{},colors:n}}}),0!==n.length||l||t()}),[o,a,l,r,t]),c=(0,u.useCallback)((e=>{const n=i.filter((t=>t!==e));a({properties:{currentStoryStyles:{colors:n}}}),0===n.length&&0===o.length&&t()}),[o,i,a,t]);return{deleteLocalColor:c,deleteGlobalColor:s}},hS=p.default.div.withConfig({displayName:"basicColorPicker__Body",componentId:"sc-c2cm2c-0"})(["display:flex;flex-direction:column;padding:8px 16px 0;overflow:auto;",";"],A.scrollbarCSS),bS=p.default.div.withConfig({displayName:"basicColorPicker__Footer",componentId:"sc-c2cm2c-1"})(["padding:8px 16px 16px;display:flex;flex-direction:column;"]),ES=p.default.div.withConfig({displayName:"basicColorPicker__SavedColors",componentId:"sc-c2cm2c-2"})(["border-bottom:1px solid ",";padding-bottom:16px;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),yS=p.default.div.withConfig({displayName:"basicColorPicker__DefaultColors",componentId:"sc-c2cm2c-3"})([""]),_S=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"basicColorPicker__Label",componentId:"sc-c2cm2c-4"})(["color:",";margin:12px 0 10px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),vS=(0,p.default)(_S).withConfig({displayName:"basicColorPicker__DefaultText",componentId:"sc-c2cm2c-5"})(["margin:0 0 0 8px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),wS=(0,p.default)(m.Button).withConfig({displayName:"basicColorPicker__StyledButton",componentId:"sc-c2cm2c-6"})(["display:flex;justify-content:center;align-items:center;gap:4px;flex-basis:100%;"]),TS=(0,p.default)(Ke.Text).withConfig({displayName:"basicColorPicker__StyledText",componentId:"sc-c2cm2c-7"})(["padding:5px 10px;"]),SS=(0,p.default)(m_).withConfig({displayName:"basicColorPicker__StyledPlus",componentId:"sc-c2cm2c-8"})(["width:32px;margin:-8px 0;"]),CS=p.default.div.withConfig({displayName:"basicColorPicker__EyedropperWrapper",componentId:"sc-c2cm2c-9"})(["display:flex;"]);const IS=function BasicColorPicker(e){let{color:t,handleColorChange:n,allowsOpacity:r,allowsGradient:a,allowsSavedColors:o,showCustomPicker:i,handleClose:l,showDialog:s,setShowDialog:p,changedStyle:f,hasEyedropper:h,allowsSavedColorDeletion:b,shouldCloseOnSelection:E}=e;const{savedColors:y,storyColors:_}=Qa((e=>({savedColors:e.state.story?.globalStoryStyles?.colors||[],storyColors:e.state.story?.currentStoryStyles?.colors||[]}))),[v,w]=(0,u.useState)(!1),[T,S]=(0,u.useState)(null),C=_.length>0||y.length>0,{initEyedropper:I}=Bv({onChange:(0,u.useCallback)((e=>n({color:e})),[n])}),{deleteLocalColor:x,deleteGlobalColor:A}=fS({onEmpty:()=>w(!1)}),k=e=>{n(e),E&&l()},O=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!v)return void k(e);if(t)return void x(e);const n=Jo.getItemByKey(Qo[Vw]);n?A(e):(p(!0),S(e))},P=!E||b;return c.createElement(c.Fragment,null,P&&c.createElement(TT,{handleClose:l,isEditMode:v,setIsEditMode:w,hasPresets:C&&o},c.createElement(vS,null,(0,d.__)("Color","web-stories"))),c.createElement(hS,null,h&&c.createElement(CS,null,c.createElement(m.Button,{variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.QUATERNARY,size:g.BUTTON_SIZES.SMALL,"aria-label":(0,d.__)("Pick a color from canvas","web-stories"),onClick:I(),onPointerEnter:I(!1)},c.createElement($y,null)),c.createElement(TS,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Sample color","web-stories"))),o&&c.createElement(ES,null,c.createElement(_S,{id:"colorpicker-story-colors-title"},(0,d.__)("Current story","web-stories")),c.createElement(dS,{color:t,colors:_,handleClick:O,isLocal:!0,allowsOpacity:r,allowsGradient:a,"aria-labelledby":"colorpicker-story-colors-title",isEditMode:v,"data-testid":"saved-story-colors",changedStyle:f}),c.createElement(_S,{id:"colorpicker-saved-colors-title"},(0,d.__)("Saved colors","web-stories")),c.createElement(dS,{color:t,colors:y,isGlobal:!0,handleClick:O,allowsOpacity:r,allowsGradient:a,"aria-labelledby":"colorpicker-saved-colors-title",isEditMode:v,changedStyle:f})),c.createElement(yS,null,c.createElement(_S,{id:"colorpicker-default-colors-title"},(0,d.__)("Default","web-stories")),c.createElement(dS,{color:t,colors:qw,handleClick:e=>{k(e),w(!1)},allowsOpacity:r,allowsGradient:a,"aria-labelledby":"colorpicker-default-colors-title",isEditMode:!1}))),c.createElement(bS,null,c.createElement(wS,{onClick:i,type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Custom","web-stories"),c.createElement(SS,null))),s&&c.createElement(gS,{onClose:()=>p(!1),onPrimary:()=>{A(T),S(null),p(!1)}}))},xS=p.default.div.withConfig({displayName:"colorPicker__Container",componentId:"sc-1xsejx6-0"})(["border-radius:8px;background:",";user-select:none;display:flex;flex-direction:column;gap:12px;align-items:stretch;",";overflow:hidden;&.picker-appear{opacity:0.01;margin-top:-10px;&.picker-appear-active{opacity:1;margin-top:0;transition:300ms ease-out;transition-property:opacity,margin-top;}}"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{maxHeight:t}=e;return t?`\n          height: ${t}px;\n          width: ${208+A.SCROLLBAR_WIDTH}px;\n        `:"\n          width: 208px;\n        "}));const AS=function ColorPicker(e){let{onChange:t,isEyedropperActive:n=!1,color:r=null,allowsGradient:a=!1,allowsOpacity:o=!0,allowsSavedColors:i=!1,hasEyedropper:l=!0,maxHeight:s=null,onClose:p=(()=>{}),changedStyle:m="background",onDimensionChange:g=(()=>{}),allowsSavedColorDeletion:f=!0,shouldCloseOnSelection:h=!1}=e;const[b,E]=(0,u.useState)(!1),[y,_]=(0,u.useState)(ew(r)),v=(0,u.useCallback)((()=>{_(!0),g()}),[g]),w=(0,u.useCallback)((()=>{_(!1),g()}),[g]),{actions:{pushTransform:T}}=(0,I.useTransform)(),{selectedElementIds:S=[]}=Qa((e=>{let{state:{selectedElementIds:t}}=e;return{selectedElementIds:t}})),C=(0,u.useDebouncedCallback)(t,100,{leading:!0}),x=(0,u.useRef)(!0);(0,u.useEffect)((()=>()=>{x.current=!1}),[]);const A=(0,u.useCallback)((e=>{x.current?C(e):t(e),S.forEach((t=>{T(t,{color:e,style:m,staticTransformation:!0})}))}),[t,C,S,m,T]),k=(0,u.useRef)();(0,u.useFocusOut)(k,(()=>{n||b||p()}),[n,b]);const O=(0,u.useRef)(document.activeElement),P=(0,u.useCallback)((e=>{O.current&&O.current.focus(),p(e)}),[p]);(0,Ir.useKeyDownEffect)(k,"esc",P),hw({ref:k});const N=y?DT:IS;return c.createElement(fw.default,{nodeRef:k,in:!0,appear:!0,classNames:"picker",timeout:300},c.createElement(xS,{role:"dialog","aria-label":(0,d.__)("Color and gradient picker","web-stories"),ref:k,maxHeight:s},c.createElement(N,{color:r,allowsGradient:a,allowsOpacity:o,handleColorChange:A,showCustomPicker:v,hideCustomPicker:w,handleClose:P,hasEyedropper:l,allowsSavedColors:i,showDialog:b,setShowDialog:E,changedStyle:m,allowsSavedColorDeletion:f,shouldCloseOnSelection:h})))};function kS(){return kS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kS.apply(this,arguments)}const OS=p.default.div.withConfig({displayName:"colorInput__Preview",componentId:"sc-1h4cp44-0"})(["height:36px;color:",";cursor:pointer;position:relative;width:100%;padding:0;"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),PS=(0,p.default)(Xv).withConfig({displayName:"colorInput__Input",componentId:"sc-1h4cp44-1"})(["min-width:100px;div{background-color:transparent;}input{padding-left:26px;}"]),NS=(0,p.default)(Tooltip).withConfig({displayName:"colorInput__Tooltip",componentId:"sc-1h4cp44-2"})(["width:100%;height:100%;"]),RS=(0,p.css)(["",";padding-right:6px;"],mp),MS=(0,p.default)(OS).attrs({as:"button",type:"button"}).withConfig({displayName:"colorInput__ColorButton",componentId:"sc-1h4cp44-3"})(["display:flex;overflow:hidden;border:1px solid ",";border-radius:4px;outline:none;background:transparent;&:focus{box-shadow:0 0 0 2px ",",0 0 0 4px ",";border-color:",";}"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.focus}),(e=>{let{theme:t}=e;return t.colors.border.defaultHover})),LS=p.default.div.withConfig({displayName:"colorInput__ColorPreview",componentId:"sc-1h4cp44-4"})(["position:absolute;top:6px;left:6px;padding:0;width:24px;height:24px;background:transparent;border-radius:50px;cursor:pointer;"]),DS=p.default.div.withConfig({displayName:"colorInput__TextualPreview",componentId:"sc-1h4cp44-5"})(["padding:6px 12px 6px 38px;text-align:left;flex-grow:1;height:32px;"]),BS=(0,p.default)(DS).withConfig({displayName:"colorInput__MixedLabel",componentId:"sc-1h4cp44-6"})(["align-self:center;padding:6px 6px 6px 38px;"]),FS=(0,p.default)(Swatch).withConfig({displayName:"colorInput__StyledSwatch",componentId:"sc-1h4cp44-7"})(["",";"],pp),HS=p.default.div.withConfig({displayName:"colorInput__DisclosureContainer",componentId:"sc-1h4cp44-8"})(["width:",";padding-right:8px;display:flex;justify-content:",";align-items:center;align-self:center;"],(e=>{let{isSmall:t}=e;return t?"28px":"58px"}),(e=>{let{isSmall:t}=e;return t?"center":"flex-end"})),US=()=>n.e(341).then(n.bind(n,66286)),jS=(0,u.forwardRef)((function ColorInput(e,t){let{onChange:n,value:r=null,label:a=null,changedStyle:o,pickerPlacement:i=Vd.PLACEMENT.RIGHT_START,isInDesignMenu:l=!1,hasInputs:s=!0,pickerProps:p,spacing:m,tooltipPlacement:g,colorFocusTrap:f=!1,...h}=e;const b=(0,u.useRef)(),E=(0,u.useRef)(),y=r===we;r=y?"":r;const _=r?Hv(r):{color:{r:0,g:0,b:0,a:0}},v=Rv(r),[w,T]=(0,u.useState)(!1),S=(0,u.useRef)(null),{isEyedropperActive:C}=Xs((e=>{let{state:{isEyedropperActive:t}}=e;return{isEyedropperActive:t}})),[I,x]=(0,u.useState)(i),{refs:{sidebar:A}}=ng(),{styleConstants:{topOffset:k}={}}=U(),O=(0,u.useCallback)((e=>{if(i?.startsWith("top")){const{top:t}=e.current?.getBoundingClientRect()||{};t<=k&&x(i.replace("top","bottom"))}}),[i,k]),P=r?.type,N=(!P||"solid"===P)&&s,R={onClick:()=>T(!0),"aria-label":a,onPointerEnter:()=>US(),onFocus:()=>US(),tabIndex:h.tabIndex};(0,u.useUnmount)((()=>()=>T(!1)));const M=(0,u.useCallback)((()=>T(!1)),[]),L=(0,d.__)("Open color picker","web-stories"),D=l?RS:mp;return c.createElement(c.Fragment,null,N?c.createElement(OS,{ref:S},f?c.createElement(gw,{ref:E,inputRef:b,inputLabel:a},c.createElement(PS,kS({ref:b,"aria-label":a,value:y?null:r,onChange:n,isIndeterminate:y,placeholder:y?Te:"",containerStyleOverride:D,id:(0,pe.default)(),onKeyDown:e=>mw(e,E),inputClassName:dw.CONTEXT_MENU_SKIP_ELEMENT},h))):c.createElement(PS,kS({ref:t,"aria-label":a,value:y?null:r,onChange:n,isIndeterminate:y,placeholder:y?Te:"",containerStyleOverride:D,id:(0,pe.default)()},h)),c.createElement(LS,null,c.createElement(NS,{title:L,hasTail:!0,placement:g},c.createElement(FS,kS({isSmall:!0,pattern:_,id:(0,pe.default)()},R))))):c.createElement(NS,{title:L,hasTail:!0,placement:g},c.createElement(MS,kS({ref:S,id:(0,pe.default)()},R),c.createElement(LS,null,c.createElement(Swatch,{isPreview:!0,role:"status",tabIndex:"-1",pattern:_,isIndeterminate:y})),s?c.createElement(DS,null,c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},v)):c.createElement(c.Fragment,null,y&&c.createElement(BS,null,c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"span"},Te)),c.createElement(HS,{isSmall:y},c.createElement(zp.Disclosure,{isOpen:w}))))),c.createElement(uw.Popup,{anchor:S,dock:l?null:A,isOpen:w&&!C,placement:I,spacing:m,refCallback:O,renderContents:e=>{let{propagateDimensionChange:t}=e;return c.createElement(AS,kS({color:y?null:r,isEyedropperActive:C,onChange:n,onClose:M,changedStyle:o,onDimensionChange:t},p))}}))})),zS=jS;var GS=n(13012);function YS(e,t){let{allowEmpty:n,isFloat:r,min:a,max:o}=t;if(`${e}`.length>0){let t=r?parseFloat(e):parseInt(e);return void 0!==a&&(t=Math.max(a,t)),void 0!==o&&(t=Math.min(o,t)),isNaN(t)?null:t}return n?"":null}const ZS=e=>{let{allowEmpty:t,isFloat:n,max:r,min:a,onChange:o,value:i,ref:l}=e;const s=(0,u.useRef)(null),c=l||s,d=(0,u.useRef)(i),p=(0,u.useRef)(!1),[m,g]=(0,u.useState)(i),f=(0,u.useMemo)((()=>({allowEmpty:t,isFloat:n,max:r,min:a})),[t,n,r,a]),h=(0,u.useCallback)((e=>{let t=YS(d.current,f);if(!p.current){const e=YS(m,f);null!==e&&(t=e)}p.current=!1,null!==t&&(g(t),t!==d.current&&o(e,t))}),[m,o,f]),b=(0,u.useCallback)((e=>{g(e.target.value)}),[]),E=(0,u.useCallback)((e=>{const{altKey:t,key:n}=e,i=function(e,t){let{allowEmpty:n,isFloat:r,max:a,min:o}=t;if(n&&0===`${e}`.length)return!0;const i=r?parseFloat(e):parseInt(e);return!(void 0!==o&&i<o||void 0!==a&&i>a||isNaN(i))}(m,f);let l=i?YS(m,f):0;const s=(0,GS.default)(f.isFloat&&t?.1:1);"ArrowUp"===n?l=void 0!==r?Math.min(r,(0,GS.default)(l).plus(s)):(0,GS.default)(l).plus(s):"ArrowDown"===n&&(l=void 0!==a?Math.max(a,(0,GS.default)(l).minus(s)):(0,GS.default)(l).minus(s)),o(e,Number(l))}),[m,r,a,o,f]),y=(0,u.useCallback)((()=>{g(d.current),p.current=!0,c&&c.current?.blur()}),[c]);return(0,u.useEffect)((()=>{d.current=i,g(i)}),[i]),{currentValue:m,inputRef:c,handleBlur:h,handleChange:b,handleEsc:y,handleKeyUpAndDown:E,isIndeterminate:d.current===m}};function WS(){return WS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WS.apply(this,arguments)}const VS=(0,u.forwardRef)((function NumericInput(e,t){let{allowEmpty:n,isFloat:r,onChange:a,max:o,min:i,value:l="",isIndeterminate:s,...d}=e;const{currentValue:u,handleBlur:p,handleChange:m,handleEsc:g,handleKeyUpAndDown:f,inputRef:h,isIndeterminate:b}=ZS({allowEmpty:n,isFloat:r,onChange:a,max:o,min:i,value:l,isIndeterminate:s,ref:t});return(0,Ir.useKeyDownEffect)(h,{key:["up","alt+up","down","alt+down"],editable:!0},f,[f]),(0,Ir.useKeyDownEffect)(h,{key:["escape"],editable:!0},g,[g]),(0,Ir.useKeyDownEffect)(h,{key:["enter"],editable:!0},p,[p]),c.createElement(qv,WS({ref:h,onBlur:p,onChange:m,value:String(u),isIndeterminate:b&&s},d))}));const $S=function(e){if(!e||e===we)return null;if(!("solid"===e.type||!e.type)){const{alpha:t=1}=e;return 100*t}const{color:{a:t=1}}=e;return Math.round(100*t)};function qS(){return qS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qS.apply(this,arguments)}const KS=(0,p.default)(VS).withConfig({displayName:"opacityInput__Input",componentId:"sc-xy6710-0"})(["min-width:100px;div{background-color:transparent;}"]),XS=(0,p.css)(["",";width:76px;padding-right:6px;"],mp),QS=(0,u.forwardRef)((function OpacityInput(e,t){let{value:n,onChange:r,isInDesignMenu:a,...o}=e;const[i,l]=(0,u.useState)(""),s=(0,u.useCallback)(((e,t)=>{l(t),isNaN(t)||r(t/100)}),[r]),p=(0,u.useCallback)((()=>l($S(n))),[n]);(0,u.useEffect)((()=>p()),[p,n]);const m=a?XS:mp;return c.createElement(KS,qS({ref:t,"aria-label":(0,d.__)("Opacity","web-stories"),onChange:s,value:i,unit:(0,d._x)("%","Percentage","web-stories"),suffix:c.createElement(Lh,null),min:0,max:100,allowEmpty:!1,isFloat:!1,containerStyleOverride:m,id:(0,pe.default)()},o))})),JS=p.default.div.withConfig({displayName:"activeOpacity__OpacityWrapper",componentId:"sc-9gk8t7-0"})(["width:",";"],(e=>{let{isInDesignMenu:t}=e;return t?"calc(39% - 10px)":"calc(47% - 10px)"})),eC=e=>{let{handleOpacityChange:t,isInDesignMenu:n,opacityFocusTrap:r,tabIndex:a,value:o}=e;const i=(0,u.useRef)(),l=(0,u.useRef)();return r?c.createElement(gw,{ref:i,inputRef:l,inputLabel:(0,d.__)("Opacity","web-stories"),styleOverride:(0,p.css)(["width:",";"],n?"calc(35%)":"calc(45%)")},c.createElement(JS,{isInDesignMenu:n},c.createElement(QS,{ref:l,tabIndex:a,inputClassName:dw.CONTEXT_MENU_SKIP_ELEMENT,value:o,onChange:t,isInDesignMenu:n,onKeyDown:e=>mw(e,i)}))):c.createElement(JS,{isInDesignMenu:n},c.createElement(QS,{tabIndex:a,value:o,onChange:t,isInDesignMenu:n}))},tC={FLOATING_MENU:{x:0,y:12},DEFAULT_SIDEBAR:{x:12,y:0}},nC=(0,p.css)(["display:flex;align-items:center;"]),rC=p.default.section.withConfig({displayName:"color__Container",componentId:"sc-c7i660-0"})([""," gap:","px;width:",";"],nC,(e=>{let{isInDesignMenu:t}=e;return t?6:8}),(e=>{let{width:t}=e;return t?`${t}px`:"inherit"}));rC.propTypes={isInDesignMenu:za().bool,width:za().number};const aC=p.default.div.withConfig({displayName:"color__ColorInputsWrapper",componentId:"sc-c7i660-1"})([""," gap:","px;"],nC,(e=>{let{isInDesignMenu:t}=e;return t?0:6})),oC=p.default.div.withConfig({displayName:"color__Space",componentId:"sc-c7i660-2"})(["width:8px;height:1px;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary})),iC=p.default.div.withConfig({displayName:"color__InputWrapper",componentId:"sc-c7i660-3"})(["",""],(e=>{let{hasInputs:t}=e;return t&&"width: calc(53% - 10px);"})),lC=(0,p.default)(m.Button).attrs({variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL}).withConfig({displayName:"color__EyeDropperButton",componentId:"sc-c7i660-4"})(["",";"],pp),sC=(0,d.__)("Color input","web-stories"),cC=(0,u.forwardRef)((function Color(e,t){let{onChange:n,allowsGradient:r=!1,allowsOpacity:a=!0,allowsSavedColors:o=!1,value:i=null,label:l=null,containerLabelBase:s=sC,changedStyle:p=null,hasEyedropper:m=!1,pickerHasEyedropper:g=!0,maxHeight:f=null,shouldCloseOnSelection:h=!1,allowsSavedColorDeletion:b=!0,pickerPlacement:E=Vd.PLACEMENT.RIGHT_START,isInDesignMenu:y=!1,hasInputs:_=!0,width:v,tabIndex:w,opacityFocusTrap:T,colorFocusTrap:S}=e;const C=(0,u.useCallback)((e=>n(Fv(i,e))),[i,n]),I=(0,$e.default)(
/* translators: 1: the input section in the editor. 2: color input label name. */
(0,d.__)("%1$s: %2$s","web-stories"),s,l),x=i!==we&&Boolean(Rv(i))&&_,{initEyedropper:A}=Bv({onChange:(0,u.useCallback)((e=>n({color:e})),[n])}),k=(0,d.__)("Pick a color from canvas","web-stories"),O=y||m?Vd.PLACEMENT.BOTTOM:Vd.PLACEMENT.BOTTOM_START,P=v&&i===we;return c.createElement(rC,{"aria-label":I,isInDesignMenu:y,width:!P&&v?v:null},m&&c.createElement(Tooltip,{title:k,hasTail:!0,placement:y?Vd.PLACEMENT.BOTTOM:Vd.PLACEMENT.BOTTOM_START},c.createElement(lC,{id:(0,pe.default)(),tabIndex:w,"aria-label":k,onClick:A(),onPointerEnter:A(!1)},c.createElement($y,null))),c.createElement(aC,{isInDesignMenu:y},c.createElement(iC,{hasInputs:_},c.createElement(zS,{ref:t,tabIndex:w,onChange:n,value:i,label:l,changedStyle:p,pickerPlacement:E,hasInputs:_,isInDesignMenu:y,spacing:y?tC.FLOATING_MENU:tC.DEFAULT_SIDEBAR,tooltipPlacement:O,colorFocusTrap:S,pickerProps:{allowsGradient:r,allowsOpacity:a,allowsSavedColors:o,hasEyedropper:g,allowsSavedColorDeletion:b,maxHeight:f,shouldCloseOnSelection:h}})),a&&x&&c.createElement(c.Fragment,null,c.createElement(oC,null),c.createElement(eC,{handleOpacityChange:C,isInDesignMenu:y,opacityFocusTrap:T,tabIndex:w,value:i}))))})),dC=cC;function uC(){return uC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uC.apply(this,arguments)}const pC=(0,p.css)(["width:100%;height:100%;position:absolute;top:0;left:0;border-radius:",";"],(e=>{let{theme:t}=e;return t.borders.radius.small})),mC=p.default.div.withConfig({displayName:"filterToggle__Overlay",componentId:"sc-1xtaed1-0"})(["",";"],pC),gC=p.default.div.withConfig({displayName:"filterToggle__Filter",componentId:"sc-1xtaed1-1"})(["",";",";"],pC,(e=>{let{filter:t}=e;return(0,ta.default)(t)})),fC=p.default.button.withConfig({displayName:"filterToggle__Button",componentId:"sc-1xtaed1-2"})((e=>{let{theme:t}=e;return(0,p.css)(["border-radius:",";width:100%;height:48px;position:relative;display:flex;align-items:center;justify-content:space-around;box-sizing:border-box;padding:0;margin:0;background:transparent;border:none;cursor:pointer;",";img{width:100%;height:100%;border-radius:",";}","{",";}&:active > ","{box-shadow:0px 0px 0 2px ",",0px 0px 0 3px ",";}&:disabled{pointer-events:none;","{background-color:",";}}transition:background-color ",",color ",";"],t.borders.radius.small,pp,t.borders.radius.small,mC,(e=>{let{isToggled:n}=e;return n&&`\n        box-shadow:\n          0px 0px 0 2px ${t.colors.bg.secondary},\n          0px 0px 0 3px ${t.colors.fg.primary}`}),mC,t.colors.bg.secondary,t.colors.fg.primary,mC,t.colors.opacity.black64,g.BUTTON_TRANSITION_TIMING,g.BUTTON_TRANSITION_TIMING)})),hC=p.default.div.withConfig({displayName:"filterToggle__Wrapper",componentId:"sc-1xtaed1-3"})(["width:60px;"]),bC=(0,p.default)(Ke.Text).attrs({forwardedAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"filterToggle__StyledText",componentId:"sc-1xtaed1-4"})(["color:",";margin-top:8px;text-align:center;width:100%;display:block;"],(e=>{let{theme:t}=e;return t.colors.border.defaultActive}));const EC=function FilterToggle(e){let{isToggled:t,filter:n=null,children:r,label:a,...o}=e;return c.createElement(hC,null,c.createElement(fC,uC({},o,{isToggled:t,"aria-pressed":t}),r,c.createElement(gC,{filter:n}),c.createElement(mC,null)),a&&c.createElement(bC,null,a))},yC={CIRCLE:"circle",RECTANGLE:"rectangle",NONE:"none"};var _C,vC,wC=n(36514);function TC(){return TC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TC.apply(this,arguments)}const SvgLandscape=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",TC({fill:"none",viewBox:"0 0 100 93",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,_C||(_C=c.createElement("path",{d:"M33 52 .5 93h99L75 60 58 82z",fill:"currentColor",opacity:.2})),vC||(vC=c.createElement("circle",{cx:79,cy:13,fill:"currentColor",opacity:.1,r:13})))},SC=(0,c.memo)(SvgLandscape);function CC(){return CC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CC.apply(this,arguments)}const IC=p.default.section.withConfig({displayName:"mediaInput__MediaRectangle",componentId:"sc-1aevzta-0"})(["width:100%;height:100%;background-color:",";border-radius:4px;position:relative;"],(e=>{let{theme:t}=e;return t.colors.bg.primary})),xC=(0,p.default)(IC).withConfig({displayName:"mediaInput__MediaCircle",componentId:"sc-1aevzta-1"})(["border-radius:100px;height:100%;width:100%;"]),AC=p.default.div.withConfig({displayName:"mediaInput__EmptyMediaWrapper",componentId:"sc-1aevzta-2"})([""]),kC=p.default.div.withConfig({displayName:"mediaInput__ImageWrapper",componentId:"sc-1aevzta-3"})(["border-radius:","px;overflow:hidden;height:100%;display:flex;"],(e=>{let{variant:t}=e;return t===yC.CIRCLE?100:4})),OC=p.default.div.withConfig({displayName:"mediaInput__DefaultImageWrapper",componentId:"sc-1aevzta-4"})(["padding:8px;"]),PC=(0,p.default)(SC).withConfig({displayName:"mediaInput__DefaultImage",componentId:"sc-1aevzta-5"})(["width:100%;height:100%;display:block;color:",";"],(e=>{let{theme:t}=e;return t.colors.standard.white})),NC=p.default.img.withConfig({displayName:"mediaInput__Img",componentId:"sc-1aevzta-6"})(["width:100%;height:100%;object-fit:cover;"]),RC=(0,p.css)(["white-space:nowrap;margin-top:0;li{display:block;}"]),MC=(0,p.default)(m.Button).withConfig({displayName:"mediaInput__Button",componentId:"sc-1aevzta-7"})((e=>{let{showImage:t}=e;return(0,p.css)(["background-color:",";position:relative;"," &:hover{background-color:",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),t&&(0,p.css)(["position:absolute;bottom:-8px;right:-8px;"]),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryHover}))})),LC={[yC.RECTANGLE]:IC,[yC.CIRCLE]:xC,[yC.NONE]:AC},DC=(0,p.keyframes)(["0%,20%{color:transparent;text-shadow:6px 0 0 transparent,12px 0 0 transparent;}40%{color:white;text-shadow:6px 0 0 transparent,12px 0 0 transparent;}60%{text-shadow:6px 0 0 ",",12px 0 0 transparent;}80%,100%{text-shadow:6px 0 0 ",",12px 0 0 ",";}"],(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.colors.standard.white})),BC=p.default.div.withConfig({displayName:"mediaInput__LoadingDots",componentId:"sc-1aevzta-8"})(["position:absolute;top:0px;left:0px;width:100%;height:100%;pointer-events:none;border-radius:50%;flex-direction:column;justify-content:center;align-items:center;display:flex;&:after{pointer-events:none;color:",";content:'.';font-weight:bold;animation:"," 1s steps(5,end) infinite;margin-left:-12px;}"],(e=>{let{theme:t}=e;return t.colors.standard.white}),DC),FC=(0,u.forwardRef)((function Media(e,t){let{className:n,onBlur:r,alt:a=(0,d.__)("Preview image","web-stories"),value:o,ariaLabel:i=(0,d.__)("Choose an image","web-stories"),variant:l=yC.RECTANGLE,isLoading:s,menuOptions:p=[],onMenuOption:m,openMediaPicker:f,canUpload:h=!0,menuProps:b={},imgProps:E={},...y}=e;const _=p?.length>0,[v,w]=(0,u.useState)(!1),T=(0,u.useMemo)((()=>`list-${(0,pe.default)()}`),[]),S=(0,u.useMemo)((()=>`button-${(0,pe.default)()}`),[]),C=(0,u.useRef)(null),I=LC[l],x=[{group:p}];return c.createElement(I,{className:n},l!==yC.NONE&&c.createElement(kC,{variant:l},o?c.createElement(NC,{src:o,alt:a,crossOrigin:"anonymous",decoding:"async",width:E?.width||null,height:E?.height||null}):c.createElement(OC,null,c.createElement(PC,null)),s&&c.createElement(BC,null)),h&&c.createElement($d.BaseTooltip,{title:_?null:(0,d.__)("Open media picker","web-stories")},c.createElement(MC,CC({ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),C.current=e},id:S,showImage:l!==yC.NONE,variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,"aria-label":i,onClick:_?()=>w(!0):f,"aria-owns":_?T:null,"aria-pressed":v,"aria-expanded":v},y),c.createElement(Ny.default,null))),c.createElement(uw.Popup,{placement:Vd.PLACEMENT.BOTTOM_END,anchor:C,isOpen:v,zIndex:11},c.createElement(wC.Menu,CC({parentId:S,listId:T,hasMenuRole:!0,options:x,onMenuItemClick:(e,t)=>{m(e,t),w(!1)},onDismissMenu:()=>w(!1),menuStylesOverride:RC},b))))}));function HC(e){try{return"/"!==new URL(e).pathname}catch{return!1}}function CORSMessage(){return c.createElement(fu.default,{mapping:{a:c.createElement(hu.Link,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM,href:"https://wp.stories.google/docs/troubleshooting/common-issues/",target:"_blank",rel:"noopener noreferrer",onClick:e=>(0,P.trackClick)(e,"click_cors_check_docs")})}},(0,d.__)("Unable to load media. Make sure CORS is set up correctly for the file. <a>Learn more</a>.","web-stories"))}const UC=function(e){let{onSelect:t,onClose:n,onError:r,allowedFileTypes:a,canUseProxy:o,requiredImgDimensions:i}=e;const[l,s]=(0,u.useState)(!1),[p,m]=(0,u.useState)(""),[g,f]=(0,u.useState)(null),{actions:{getHotlinkInfo:h}}=W(),{checkResourceAccess:b,getProxiedUrl:E}=ii(),y=g||!p||l,_=function(e){let t=(0,d.__)("No file types are currently supported.","web-stories");return e.length&&(t=(0,$e.default)(
/* translators: %s is a list of allowed file extensions. */
(0,d.__)("You can insert %s.","web-stories"),(0,kt.default)(e))),t}(a),v=(0,u.useCallback)((()=>{if(p?.length>0){const e=la(p);m(e),HC(e)||f((0,d.__)("Invalid link.","web-stories"))}}),[p,f,m]),w=(0,u.useCallback)((e=>{let{target:{value:t}}=e;g&&f(null),m(t)}),[g,m,f]),T=(0,u.useCallback)((()=>{n(),m(""),f(null),s(!1)}),[n]),S=(0,u.useCallback)((async()=>{if(p)if(HC(p)){s(!0);try{const r=await h(p);if(!a.includes(r?.ext))return void f((0,d.__)("Invalid link.","web-stories"));const g=await b(p);if(g&&!o)return void f(c.createElement(CORSMessage,null));if("image"===r?.type&&i){const t=g?E({needsProxy:g},p):p,a=await X(t),o=(e=a.width,n=a.height,l=i?.width,u=i?.height,u&&u!==n&&l&&l!==e?(0,$e.default)(
/* translators: 1: image dimensions. 2: required dimensions. */
(0,d.__)("Image dimensions (%1$s) do not match required image dimensions (%2$s).","web-stories"),`${e}x${n}px`,`${l}x${u}px`):u&&u!==n?(0,$e.default)(
/* translators: 1: supplied height. 2: required height. */
(0,d.__)("Image height (%1$s) does not match required image height (%2$s).","web-stories"),`${n}px`,`${u}px`):l&&l!==e?(0,$e.default)(
/* translators: 1: supplied width. 2: required width. */
(0,d.__)("Image width (%1$s) does not match required image width (%2$s).","web-stories"),`${e}px`,`${l}px`):null);if(o)return void f(o);r.width=a.width,r.height=a.height}await t({link:p,hotlinkInfo:r,needsProxy:g}),m(""),f(null)}catch(e){r&&r(e),f(function(e,t){switch(e){case"rest_invalid_param":case"rest_invalid_url":return(0,d.__)("Invalid link.","web-stories");case"rest_invalid_ext":return(0,$e.default)(
/* translators: %s is the description with allowed file extensions. */
(0,d.__)("Invalid link. %s","web-stories"),t);default:return(0,d.__)("Media failed to load. Please ensure the link is valid and the site allows linking from external sites.","web-stories")}}(e.code,_))}finally{s(!1)}var e,n,l,u}else f((0,d.__)("Invalid link.","web-stories"))}),[p,h,a,b,o,i,t,E,r,_]);return{action:{onChange:w,onSubmit:(0,u.useCallback)((e=>{e.preventDefault(),y||S()}),[y,S]),onBlur:v,onCloseDialog:T,onInsert:S},state:{description:_,isInserting:l,link:p,errorMsg:g,isDisabled:y}}},jC=p.default.form.withConfig({displayName:"hotlinkModal__InputWrapper",componentId:"sc-21vzo8-0"})(["margin:16px 4px;width:470px;height:100px;"]);const zC=function HotlinkModal(e){let{isOpen:t,onClose:n,onSelect:r,onError:a,allowedFileTypes:o=[],insertText:i=(0,d.__)("Insert","web-stories"),insertingText:l=(0,d.__)("Inserting…","web-stories"),title:s,canUseProxy:p=!0,requiredImgDimensions:m={}}=e;const g=(0,u.useRef)(null),{action:{onSubmit:f,onBlur:h,onChange:b,onCloseDialog:E,onInsert:_},state:{errorMsg:v,isInserting:w,link:T,description:S,isDisabled:C}}=UC({allowedFileTypes:o,onClose:n,onError:a,onSelect:r,canUseProxy:p,requiredImgDimensions:m}),I=w?l:i;return(0,u.useLayoutEffect)((()=>{const e=setTimeout((()=>{t&&g.current&&g.current.focus()}));return()=>clearTimeout(e)}),[t,g]),c.createElement(y,{onClose:E,isOpen:t,title:s,onPrimary:_,primaryText:I,secondaryText:(0,d.__)("Cancel","web-stories"),primaryRest:{disabled:C}},c.createElement(jC,{onSubmit:f},c.createElement(qv,{ref:g,onChange:b,value:T,hint:v||S,hasError:Boolean(v),onBlur:h,label:(0,d.__)("URL","web-stories"),type:"url",required:!0})))};const GC=async function(e){const{src:t,mimeType:n,width:r,height:a,isMuted:o,length:i,lengthFormatted:l,...s}=e,c=Q(n);if(!["image","video"].includes(c))throw new Error("Invalid media type.");const d=r&&a,u={};if("video"===c&&(!d||null===o||null===i||null===l)){const e=await re(t);await le(e),u.width=e.videoWidth,u.height=e.videoHeight;const n=ie(e);u.length=n.length,u.lengthFormatted=n.lengthFormatted,u.isMuted=!se(e)}if("image"===c&&!d){const e=await X(t);u.width=e.width,u.height=e.height}return J({type:c,width:r,height:a,isMuted:o,length:i,lengthFormatted:l,src:t,isExternal:!0,mimeType:n,...s,...u})};const YC=function(e){let{onChange:t,type:n,canUseProxy:r}=e;const[a,o]=(0,u.useState)(!1),i=(0,u.useMemo)((()=>Array.isArray(n)?n.map((e=>Rt(e))).flat():[]),[n]),{getProxiedUrl:l}=ii();return{actions:{onSelect:(0,u.useCallback)((async e=>{let{link:n,hotlinkInfo:a,needsProxy:i}=e;const{mimeType:s,fileName:c}=a,d=i&&r?l({needsProxy:i},n):n,u={id:(0,pe.default)(),src:d,mimeType:s,needsProxy:i,alt:c,height:a?.height,width:a?.width},p=await GC(u);p.src=n,t(p),o(!1)}),[r,l,t]),openHotlink:()=>o(!0),onCloseHotlink:()=>o(!1)},state:{allowedFileTypes:i,isOpen:a}}};function ZC(){return ZC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZC.apply(this,arguments)}const WC=(0,p.default)(FC).withConfig({displayName:"media__StyledInput",componentId:"sc-17cx4v4-0"})(["button:focus{","}"],(e=>{let{theme:t}=e;return up.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),MediaInputField=e=>{let{open:t,openHotlink:n,dropdownOptions:r,onChange:a,forwardedRef:o,value:i,...l}=e;const s=(0,u.useCallback)(((e,r)=>{switch(r){case"edit":case"upload":t(e);break;case"hotlink":n(e);break;case"remove":case"reset":a(null)}}),[a,t,n]);return c.createElement(WC,ZC({onMenuOption:s,menuOptions:r,openMediaPicker:t,ref:o,value:i===we?null:i},l))};const VC=(0,u.forwardRef)((function(e,t){let{buttonInsertText:n=(0,d.__)("Choose an image","web-stories"),hotlinkTitle:r=(0,d.__)("Use external image","web-stories"),hotlinkInsertText:a=(0,d.__)("Use image","web-stories"),hotlinkInsertingText:o=(0,d.__)("Using image","web-stories"),menuOptions:i=[],onChange:l,onChangeErrorText:s=(0,d.__)("Unable to use this file type, please select a valid image type.","web-stories"),title:p=(0,d.__)("Choose an image","web-stories"),type:m="image",value:g,cropParams:f,canUseProxy:h=!1,...b}=e;const{MediaUpload:E}=U(),{actions:{onSelect:y,openHotlink:_,onCloseHotlink:v},state:{allowedFileTypes:w,isOpen:T}}=YC({onChange:l,type:m,canUseProxy:h}),S=(0,u.useCallback)((e=>{const n=[{label:(0,d.__)("Upload a file","web-stories"),value:"upload"},{label:(0,d.__)("Link to a file","web-stories"),value:"hotlink"},{label:(0,d.__)("Edit","web-stories"),value:"edit"},{label:(0,d.__)("Remove","web-stories"),value:"remove"},{label:(0,d.__)("Reset","web-stories"),value:"reset"}],r=g===we?[]:n.filter((e=>{let{value:t}=e;return i.includes(t)}));return c.createElement(MediaInputField,ZC({open:e,openHotlink:_,onChange:l,dropdownOptions:r,forwardedRef:t,value:g},b))}),[g,_,l,t,b,i]);return c.createElement(c.Fragment,null,c.createElement(zC,{isOpen:T,title:r,onSelect:y,onClose:v,insertText:a,insertingText:o,allowedFileTypes:w,canUseProxy:h,requiredImgDimensions:f}),c.createElement(E,{title:p,buttonInsertText:n,onSelect:l,onSelectErrorMessage:s,type:m,cropParams:f,render:S}))})),$C=VC;function qC(){return qC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qC.apply(this,arguments)}const KC=(0,p.default)($C).withConfig({displayName:"linkIcon__StyledMedia",componentId:"sc-1078kj7-0"})(["width:54px;height:54px;"]);const XC=function LinkIcon(e){let{handleChange:t,icon:n,isLoading:r=!1,...a}=e;const{allowedMimeTypes:{image:o},capabilities:{hasUploadMediaAction:i}}=U(),l=(0,u.useMemo)((()=>o.map((e=>Rt(e))).flat()),[o]),s=(0,u.useMemo)((()=>{let e=(0,d.__)("No image file types are currently supported.","web-stories");return l.length&&(e=(0,$e.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as an icon.","web-stories"),(0,kt.default)(l))),e}),[l]),p=[i&&"upload",i&&"edit","hotlink",n&&"remove"].filter(Boolean);return c.createElement(KC,qC({value:n||"",cropParams:{width:96,height:96},onChange:t,onChangeErrorText:s,title:(0,d.__)("Select as link icon","web-stories"),ariaLabel:(0,d.__)("Edit link icon","web-stories"),buttonInsertText:(0,d.__)("Select as link icon","web-stories"),hotlinkTitle:(0,d.__)("Use external image as link icon","web-stories"),hotlinkInsertText:(0,d.__)("Use image as link icon","web-stories"),hotlinkInsertingText:(0,d.__)("Using image as link icon","web-stories"),type:o,isLoading:r,variant:yC.CIRCLE,canUpload:0!==p.length,menuOptions:p},a))},QC=p.default.div.withConfig({displayName:"row__Row",componentId:"sc-1olml0k-0"})(["display:flex;flex-direction:row;justify-content:flex-start;align-items:center;margin-bottom:16px;"," ",""],(e=>{let{spaceBetween:t=!0}=e;return t&&"justify-content: space-between;"}),(e=>{let{expand:t=!0}=e;return t&&"flex: 1;"}));function JC(){return JC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JC.apply(this,arguments)}const eI={MIN:2,MAX:2048},tI=(0,u.forwardRef)((function LinkInput(e,t){let{onChange:n,onBlur:r,onFocus:a,value:o="",hint:i,hasError:l,...s}=e;const u=(o||"").trim(),p=ia(la(u)),m=u.length>0&&!p;return c.createElement(QC,null,c.createElement(qv,JC({ref:t,placeholder:(0,d.__)("Web address","web-stories"),onChange:e=>n(e.target.value),onBlur:()=>{if(u?.length){const e=la(u);e!==u&&n(e)}r&&r()},onFocus:a,value:o||"",minLength:eI.MIN,maxLength:eI.MAX,hasError:m||l,hint:m?(0,d.__)("Invalid web address.","web-stories"):i,containerStyleOverride:mp},s)))})),nI=tI;const rI=function MediaUploadButton(e){let{onInsert:t,renderButton:n,buttonInsertText:r}=e;const{allowedMimeTypes:{image:a,vector:o,video:i},MediaUpload:l}=U(),s=(0,u.useMemo)((()=>[...a,...o,...i]),[a,o,i]),p=(0,u.useMemo)((()=>s.map((e=>Rt(e))).flat()),[s]),{canTranscodeResource:m,resetWithFetch:g,postProcessingResource:f,optimizeVideo:h,optimizeGif:b}=Yl((e=>{let{state:{canTranscodeResource:t},actions:{resetWithFetch:n,postProcessingResource:r,optimizeVideo:a,optimizeGif:o}}=e;return{canTranscodeResource:t,resetWithFetch:n,postProcessingResource:r,optimizeVideo:a,optimizeGif:o}})),{isTranscodingEnabled:E}=lo(),{showSnackbar:y}=(0,jr.useSnackbar)(),_=(0,u.useMemo)((()=>E?[...ro,...a,...o,...i]:[...a,...o,...i]),[a,o,i,E]);let v=(0,d.__)("No file types are currently supported.","web-stories");p.length&&(v=(0,$e.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s to insert into page.","web-stories"),(0,kt.default)(p)));const w=(0,u.useCallback)((e=>{try{E&&m(e)&&(!e.isOptimized&&ro.includes(e.mimeType)&&h({resource:e}),"image/gif"===e.mimeType&&b({resource:e})),t(e),f(e)}catch(e){y({message:e.message,dismissible:!0})}}),[E,m,t,b,h,f,y]);return c.createElement(l,{onSelect:w,onSelectErrorMessage:v,onClose:g,type:_,render:n,buttonInsertText:r})};var aI=n(22437);function oI(){return oI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oI.apply(this,arguments)}const iI="ON",lI="OFF",sI=p.default.p.withConfig({displayName:"switch__VisuallyHiddenRadioGroupLabel",componentId:"sc-1kebe5q-0"})(["",";"],aI.visuallyHidden),cI=p.default.span.withConfig({displayName:"switch__SlidingButton",componentId:"sc-1kebe5q-1"})(["position:absolute;display:block;top:0;left:0;width:50%;height:","px;border-radius:100px;transition:all 0.15s ease-out;z-index:0;",""],32,(e=>{let{hasOffset:t}=e;return t&&"left: 50%"})),dI=p.default.div.withConfig({displayName:"switch__SwitchContainer",componentId:"sc-1kebe5q-2"})(["position:relative;height:","px;display:flex;flex-direction:row;justify-content:center;align-items:center;appearance:none;background:",";border-radius:100px;color:",";cursor:pointer;",";"],32,(e=>{let{theme:t}=e;return t.colors.divider.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{disabled:t,theme:n}=e;return t?(0,p.css)(["cursor:default;background:",";","{background-color:",";}"],n.colors.divider.tertiary,cI,n.colors.interactiveBg.disable):(0,p.css)([":hover ","{background-color:",";}"],cI,n.colors.interactiveBg.primaryHover)})),uI=p.default.input.attrs({type:"radio"}).withConfig({displayName:"switch__HiddenRadioButton",componentId:"sc-1kebe5q-3"})(["position:absolute;height:0;width:0;padding:0;min-width:unset;appearance:none;border:0;box-shadow:none;margin:-1px;outline:none;overflow:hidden;opacity:0;"]),pI=(0,p.default)(Ke.Text).attrs({forwardedAs:"label",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"switch__RadioButtonLabel",componentId:"sc-1kebe5q-4"})(["display:flex;align-items:center;justify-content:center;flex:1;height:","px;width:50%;padding:0px 6px;z-index:1;color:",";background-color:",";border-radius:100px;cursor:pointer;overflow:hidden;text-align:center;text-overflow:ellipsis;white-space:nowrap;transition:all 0.15s ease-out;"," :focus-within ~ span{",";}"],32,(e=>{let{isActive:t,theme:n}=e;return t?n.colors.inverted.fg.primary:n.colors.fg.secondary}),(e=>{let{isActive:t,theme:n}=e;return t&&n.colors.interactiveBg.primaryNormal}),(e=>{let{disabled:t,theme:n}=e;return t&&(0,p.css)(["cursor:default;color:",";"],n.colors.fg.disable)}),up.focusCSS),mI=(0,u.forwardRef)((function(e,t){let{className:n,disabled:r,groupLabel:a,id:o,offLabel:i,onChange:l,onLabel:s,value:d,...p}=e;const m=(0,u.useMemo)((()=>({group:o||(0,pe.default)(),offInput:(0,pe.default)(),onInput:(0,pe.default)()})),[o]),g=(0,u.useCallback)((e=>{l(e,e.target.value===iI)}),[l]);return c.createElement(dI,{ref:t,className:n,role:"radiogroup","aria-labelledby":m.group,"aria-disabled":r,disabled:r},c.createElement(sI,{id:m.group},a),c.createElement(pI,{htmlFor:m.onInput,isActive:d,disabled:r},s,c.createElement(uI,oI({checked:d,disabled:r,id:m.onInput,onChange:g,value:iI},p))),c.createElement(pI,{htmlFor:m.offInput,isActive:!d,disabled:r},i,c.createElement(uI,oI({checked:!d,disabled:r,id:m.offInput,onChange:g,value:lI},p))),c.createElement(cI,{hasOffset:!d}))}));mI.displayName="Switch";za().string,za().bool,za().string.isRequired,za().string,za().string.isRequired,za().oneOfType([za().string,za().node]).isRequired,za().func.isRequired,za().oneOfType([za().string,za().node]).isRequired,za().bool;function gI(){return gI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gI.apply(this,arguments)}mI.defaultProps={value:!1};const fI=(0,p.default)(mI).withConfig({displayName:"switch__StyledSwitch",componentId:"sc-xytur2-0"})(["label:focus-within ~ span{",";}"],(e=>{let{theme:t}=e;return`box-shadow: 0px 0px 0 2px ${t.colors.bg.secondary}, 0px 0px 0 4px ${t.colors.border.focus} !important;`}));const hI=function(e){let{offLabel:t=(0,d.__)("Off","web-stories"),onChange:n,onLabel:r=(0,d.__)("On","web-stories"),value:a,...o}=e;const i=(0,u.useRef)(null),l=(0,u.useCallback)((e=>{n(e,!a)}),[n,a]);return(0,Ir.useKeyDownEffect)(i,["space","enter","left","right","up","down"],l,[l,a]),c.createElement(fI,gI({ref:i,offLabel:t,onChange:n,onLabel:r,value:a},o))};function bI(){return bI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bI.apply(this,arguments)}const EI=p.default.div.withConfig({displayName:"textArea__Container",componentId:"sc-sryd46-0"})(["position:relative;width:100%;min-width:100px;"]),yI=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL,forwardedAs:"span"}).withConfig({displayName:"textArea__CounterText",componentId:"sc-sryd46-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),_I=(0,p.default)(Ke.Text).withConfig({displayName:"textArea__Label",componentId:"sc-sryd46-2"})(["margin-bottom:12px;"]),vI=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"textArea__Hint",componentId:"sc-sryd46-3"})(["margin-top:12px;color:",";"],(e=>{let{hasError:t,theme:n}=e;return n.colors.fg[t?"negative":"tertiary"]})),wI=p.default.div.withConfig({displayName:"textArea__InputContainer",componentId:"sc-sryd46-4"})((e=>{let{focused:t,hasError:n,theme:r,styleOverride:a}=e;return(0,p.css)(["box-sizing:border-box;display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border:1px solid ",";border-radius:",";overflow:hidden;",";:focus-within{",";}",";"],r.colors.border[n?"negativeNormal":"defaultNormal"],r.borders.radius.small,t&&!n&&(0,p.css)(["border-color:",";"],r.colors.border.defaultActive),(0,up.focusCSS)(r.colors.border.focus),a)})),TI=p.default.textarea.withConfig({displayName:"textArea__StyledTextArea",componentId:"sc-sryd46-5"})((e=>{let{theme:t}=e;return(0,p.css)(["height:100%;width:100%;padding:0;background-color:inherit;border:none;outline:none;color:",";resize:none;box-shadow:none;",";",";:focus{box-shadow:none;}:disabled{color:",";border-color:",";}:active{color:",";}::placeholder{color:",";}"],t.colors.fg.primary,A.scrollbarCSS,dp.expandPresetStyles({preset:t.typography.presets.paragraph[Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL],theme:t}),t.colors.fg.disable,t.colors.border.disable,t.colors.fg.primary,t.colors.fg.tertiary)})),SI=p.default.div.withConfig({displayName:"textArea__Counter",componentId:"sc-sryd46-6"})(["text-align:right;align-self:flex-end;span{color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),CI=(0,u.forwardRef)(((e,t)=>{let{className:n,disabled:r,hasError:a,hint:o,id:i,label:l,onBlur:s,onFocus:d,value:p,showCount:m=!1,maxLength:g,isIndeterminate:f=!1,containerStyleOverride:h="",...b}=e;const E=(0,u.useMemo)((()=>i||(0,pe.default)()),[i]),y=m&&g>0,[_,v]=(0,u.useState)(!1),[w,T]=(0,u.useState)(!1);let S=p;return f&&(S=""),c.createElement(EI,{className:n},l&&c.createElement(_I,{htmlFor:E,forwardedAs:"label",disabled:r},l),c.createElement(wI,{focused:_,hasError:a,styleOverride:h},c.createElement(TI,bI({id:E,disabled:r,ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),e&&_&&!w&&(e.select(),T(!0))},onFocus:e=>{d?.(e),v(!0),T(!1)},onBlur:e=>{s?.(e),v(!1)},value:S,maxLength:g},b)),y&&c.createElement(SI,null,c.createElement(yI,null,`${p.length}/${g}`))),o&&c.createElement(vI,{hasError:a},o))}));function II(){return II=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},II.apply(this,arguments)}CI.displayName="TextArea";const xI=(0,u.forwardRef)(((e,t)=>{let{className:n,placeholder:r,value:a,disabled:o,rows:i,onChange:l,onBlur:s,...d}=e;const[p,m]=(0,u.useState)(a),g=(0,u.useCallback)((e=>{p!==a&&l(e)}),[p,l,a]);(0,u.useEffect)((()=>{m(a)}),[a]);const f=(0,u.useCallback)((e=>{g(e),s&&s(e)}),[s,g]);return c.createElement(CI,II({placeholder:r,value:p},d,{containerStyleOverride:mp,onChange:e=>m(e.target.value),onBlur:f,ref:t}))}));xI.displayName="TextArea",xI.defaultProps={showTextLimit:!0,rows:2};const AI=xI,kI=(0,u.createContext)({isMultiple:!1,registerPresubmitHandler:()=>{}});const OI=function(e){return(0,u.useContextSelector)(kI,e??u.identity)};const PI=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const n=OI((e=>e.registerPresubmitHandler));(0,u.useEffect)((()=>n(e)),[n].concat(t||[]))},NI=p.default.div.withConfig({displayName:"timeZone__Wrapper",componentId:"sc-1n80l1r-0"})(["white-space:nowrap;"]),RI=(0,p.default)(Ke.Text).withConfig({displayName:"timeZone__StyledText",componentId:"sc-1n80l1r-1"})(["color:",";line-height:30px;"],(e=>{let{theme:t}=e;return t.colors.fg.disable}));const MI=function TimeZone(e){let{date:t}=e;const{timezone:n,gmtOffset:r}=(0,iu.getSettings)(),a=(new Date).getTimezoneOffset()/60*-1;if(Number(r)===a)return null;const{timeZone:o}=(0,su.default)(),i=n?.length?(0,lu.default)(t,"T"):`UTC${o}`,l="UTC"===i?(0,d.__)("Coordinated Universal Time","web-stories"):n;return c.createElement(NI,null,c.createElement(Tooltip,{hasTail:!0,title:l,placement:Vd.PLACEMENT.TOP},c.createElement(RI,{forwardedAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},i)))},LI=p.default.div.withConfig({displayName:"timePicker__TimeWrapper",componentId:"sc-14og2kb-0"})(["margin-bottom:1em;padding:0 20px;"]),DI=p.default.fieldset.withConfig({displayName:"timePicker__Fieldset",componentId:"sc-14og2kb-1"})(["margin-top:0.5em;position:relative;"]),BI=p.default.legend.withConfig({displayName:"timePicker__Legend",componentId:"sc-14og2kb-2"})(["position:absolute;top:-999em;left:-999em;"]),FI=p.default.div.withConfig({displayName:"timePicker__InputRow",componentId:"sc-14og2kb-3"})(["display:flex;"]),HI=(0,p.css)(["min-height:30px;box-shadow:0 0 0 transparent;transition:box-shadow 0.1s linear;border-radius:4px;border:1px solid #006edc;height:28px;vertical-align:middle;background-color:",";color:#32373c;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),UI=p.default.input.withConfig({displayName:"timePicker__NumberInput",componentId:"sc-14og2kb-4"})([""," padding:0;margin-right:4px;text-align:center;width:50%;max-width:50px;::-webkit-inner-spin-button,::-webkit-outer-spin-button{margin:0;appearance:none;}"],HI),jI=p.default.span.withConfig({displayName:"timePicker__TimeSeparator",componentId:"sc-14og2kb-5"})(["padding:0 3px 0 0;color:#555d66;"]),zI=p.default.button.withConfig({displayName:"timePicker__Button",componentId:"sc-14og2kb-6"})(["display:inline-flex;text-decoration:none;font-size:13px;margin:0;border:0;cursor:pointer;transition:box-shadow 0.1s linear;padding:0 10px;line-height:2;height:30px;border-radius:3px;white-space:nowrap;border-width:1px;border-style:solid;color:#006edc;border-color:#006edc;background:#f3f5f6;&:focus{outline:2px solid transparent;background:#f3f5f6;color:rgb(0,93,140);border-color:",";box-shadow:0 0 0 1px ",";text-decoration:none;}",""],(e=>{let{theme:t}=e;return t.colors.fg.linkHover}),(e=>{let{theme:t}=e;return t.colors.fg.linkHover}),(e=>{let{isToggled:t}=e;return t&&"\n  background: #edeff0;\n  border-color: #8f98a1;\n  box-shadow: inset 0 2px 5px -3px #555d66;\n  "})),GI=p.default.div.withConfig({displayName:"timePicker__InputGroup",componentId:"sc-14og2kb-7"})(["flex-basis:100%;"]),YI=(0,p.default)(zI).withConfig({displayName:"timePicker__AMButton",componentId:"sc-14og2kb-8"})(["margin-right:-1px;border-radius:3px 0 0 3px;"]),ZI=(0,p.default)(zI).withConfig({displayName:"timePicker__PMButton",componentId:"sc-14og2kb-9"})(["margin-left:-1px;border-radius:0 3px 3px 0;"]);const WI=function TimePicker(e){let{onChange:t,is12Hour:n,localData:r,setLocalData:a}=e;const o=e=>t=>{a({...r,[e]:parseInt(t.target.value)})},i=()=>n?12:23,l=()=>n?1:0,s=e=>{const{am:t}=r;return n?"AM"===t?e%12:(e%12+12)%24:e},p=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a({...r,...n,date:e}),t(e.toISOString())},m=e=>()=>{const{am:t,date:n,hours:a}=r;if(t===e)return;const o=n;"PM"===e?o.setHours((a%12+12)%24):o.setHours(a%12),p(o,{am:e})},g=(0,u.useRef)();(0,u.useEffect)((()=>{g.current.focus()}),[]);const f="AM"===r.am,h="PM"===r.am;return c.createElement(LI,null,c.createElement(DI,null,c.createElement(BI,null,(0,d.__)("Time","web-stories")),c.createElement(FI,null,c.createElement(GI,null,c.createElement(UI,{ref:g,"aria-label":(0,d.__)("Hours","web-stories"),type:"number",step:1,min:l(),max:i(),value:parseInt(r.hours),onChange:o("hours"),onBlur:()=>{const{hours:e,date:t}=r,n=parseInt(e);if(!(isNaN(n)||n<l()||n>i())&&t.getHours()!==s(e)){const n=t;n.setHours(s(e)),p(n)}}}),c.createElement(jI,null,":"),c.createElement(UI,{"aria-label":(0,d.__)("Minutes","web-stories"),type:"number",min:0,max:59,value:parseInt(r.minutes),onChange:o("minutes"),onBlur:()=>{const{minutes:e,date:t}=r,n=parseInt(e);if(!(isNaN(n)||n<0||n>59)&&t.getMinutes()!==e){const n=t;n.setMinutes(e),p(n)}}})),n&&c.createElement(GI,null,c.createElement(YI,{"aria-pressed":f,type:"button",isToggled:f,onClick:m("AM")},(0,d.__)("AM","web-stories")),c.createElement(ZI,{"aria-pressed":h,type:"button",isToggled:h,tabIndex:"-1",onClick:m("PM")},(0,d.__)("PM","web-stories"))),c.createElement(MI,{date:r?.date}))))},VI=p.default.div.withConfig({displayName:"calendarWrapper__CalendarWrapper",componentId:"sc-u1av1j-0"})(["min-height:236px;.react-calendar{width:350px;max-width:100%;background:white;border:1px solid #a0a096;font-family:Arial,Helvetica,sans-serif;line-height:1.125em;}.react-calendar--doubleView{width:700px;}.react-calendar--doubleView .react-calendar__viewContainer{display:flex;margin:-0.5em;}.react-calendar--doubleView .react-calendar__viewContainer > *{width:50%;margin:0.5em;}.react-calendar,.react-calendar *,.react-calendar *:before,.react-calendar *:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;}.react-calendar button{margin:0;border:0;outline:none;}.react-calendar button:enabled:hover{cursor:pointer;}.react-calendar__navigation{display:flex;height:44px;margin-bottom:1em;}.react-calendar__navigation button{min-width:44px;background:none;}.react-calendar__navigation button:disabled{background-color:#f0f0f0;}.react-calendar__navigation button:enabled:hover,.react-calendar__navigation button:enabled:focus{background-color:#e6e6e6;}.react-calendar__month-view__weekdays{text-align:center;text-transform:uppercase;font-weight:bold;font-size:0.75em;}.react-calendar__month-view__weekdays__weekday{padding:0.5em;}.react-calendar__month-view__weekNumbers .react-calendar__tile{display:flex;align-items:center;justify-content:center;font-size:0.75em;font-weight:bold;}.react-calendar__month-view__days__day--weekend{color:#d10000;}.react-calendar__month-view__days__day--neighboringMonth{color:#757575;}.react-calendar__year-view .react-calendar__tile,.react-calendar__decade-view .react-calendar__tile,.react-calendar__century-view .react-calendar__tile{padding:2em 0.5em;}.react-calendar__tile{max-width:100%;padding:10px 6.6667px;background:none;text-align:center;line-height:16px;}.react-calendar__tile:disabled{background-color:#f0f0f0;}.react-calendar__tile:enabled:hover,.react-calendar__tile:enabled:focus{background-color:#e6e6e6;}.react-calendar__tile--now{background:#ffff76;}.react-calendar__tile--now:enabled:hover,.react-calendar__tile--now:enabled:focus{background:#ffffa9;}.react-calendar__tile--hasActive{background:#76baff;}.react-calendar__tile--hasActive:enabled:hover,.react-calendar__tile--hasActive:enabled:focus{background:#a9d4ff;}.react-calendar__tile--active{background:#006edc;color:white;}.react-calendar__tile--active:enabled:hover,.react-calendar__tile--active:enabled:focus{background:#1087ff;}.react-calendar--selectRange .react-calendar__tile--hover{background-color:#e6e6e6;}"]);const $I=(0,u.lazy)((()=>n.e(2392).then(n.bind(n,73)))),qI=p.default.div.withConfig({displayName:"datePicker__FallbackCalendar",componentId:"sc-9qun1q-0"})(["height:256px;width:350px;display:flex;align-items:center;justify-content:center;"]);const KI=function DatePicker(e){let{currentDate:t,onChange:n,onViewChange:r}=e;const a=(0,u.useRef)(),o=(0,u.useMemo)((()=>new Date(t)),[t]),i=(0,u.useCallback)((e=>{e.setHours(o.getHours()),e.setMinutes(o.getMinutes()),n(e.toISOString(),!0)}),[o,n]),l=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(a.current){const t=[...a.current.querySelectorAll(".react-calendar__navigation button")];t[0].tabIndex="0",t.shift();for(const e of t)e.tabIndex="-1";const n=[...a.current.querySelectorAll(".react-calendar__viewContainer button")];let r=!1;for(const t of n)t.classList.contains("react-calendar__tile--now")?(t.tabIndex="0",e&&t.focus(),r=!0):t.tabIndex="-1";r||(n[0].tabIndex="0",n[0].focus())}}),[a]);(0,u.useEffect)((()=>{const e=setTimeout((()=>{l()}));return()=>{clearTimeout(e)}}),[l]);const{weekStartsOn:s}=(0,su.default)(),p=function(e){return{0:"US",1:"ISO 8601",5:"Hebrew",6:"Arabic"}[e]||"ISO 8601"}(s);return c.createElement(u.Suspense,{fallback:c.createElement(qI,null,c.createElement(Ew.default,null))},c.createElement(VI,{ref:a},c.createElement($I,{value:o,calendarType:p,onChange:i,onViewChange:r,onActiveStartDateChange:()=>l(!0),nextAriaLabel:(0,d._x)("Next","This label can apply to next month, year and/or decade","web-stories"),prevAriaLabel:(0,d._x)("Previous","This label can apply to previous month, year and/or decade","web-stories"),next2AriaLabel:(0,d._x)("Jump forward","This label can apply to month, year and/or decade","web-stories"),prev2AriaLabel:(0,d._x)("Jump backwards","This label can apply to month, year and/or decade","web-stories"),formatDay:(e,t)=>(0,lu.default)(t,"j"),formatWeekday:(e,t)=>(0,lu.default)(t,"l"),formatLongDate:(e,t)=>(0,cu.default)(t),formatMonth:(e,t)=>(0,lu.default)(t,"F"),formatMonthYear:(e,t)=>(0,lu.default)(t,"F Y"),formatShortWeekday:(e,t)=>(0,lu.default)(t,"D"),formatYear:(e,t)=>(0,lu.default)(t,"Y")})))},XI=p.default.div.withConfig({displayName:"dateTime__DateTimeWrapper",componentId:"sc-15cbv9f-0"})(["border-radius:4px;box-shadow:0 3px 30px rgba(25,30,35,0.1);border:1px solid ",";background-color:",";width:100%;padding:4px;"],(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.standard.black,.2)}),(e=>{let{theme:t}=e;return t.colors.standard.white})),QI=(0,p.default)(m.Button).withConfig({displayName:"dateTime__StyledButton",componentId:"sc-15cbv9f-1"})(["color:#006edc;margin:5px 0;"]);const JI=function DateTime(e){let{value:t,onChange:n,onViewChange:r,is12Hour:a=!0,forwardedRef:o,onClose:i,canReset:l=!1}=e;const s=t?new Date(t):new Date,p=s.getHours(),[m,f]=(0,u.useState)({minutes:s.getMinutes(),am:p<12?"AM":"PM",hours:a?p%12||12:p,date:s}),h=(0,u.useRef)(document.activeElement),b=(0,u.useCallback)((e=>{h.current&&h.current.focus(),i(e)}),[i]);return(0,Ir.useKeyDownEffect)(o,{key:["esc"],editable:!0},b),YT({ref:o}),hw({ref:o}),c.createElement(XI,{ref:o},c.createElement(WI,{localData:m,setLocalData:f,onChange:n,is12Hour:a}),c.createElement(KI,{currentDate:t,onChange:n,onViewChange:r}),l&&c.createElement(QI,{size:g.BUTTON_SIZES.SMALL,onClick:()=>{n(null),i()},"aria-label":(0,d.__)("Reset publish time","web-stories")},(0,d.__)("Reset","web-stories")))},ex=p.default.div.withConfig({displayName:"required__RequiredWrapper",componentId:"sc-19c61h7-0"})(["display:flex;flex-direction:row;justify-content:flex-start;align-items:center;"]),tx=(0,p.default)(Ke.Text).attrs({as:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"required__StyledText",componentId:"sc-19c61h7-1"})(["color:",";font-size:12px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const nx=function Required(){return c.createElement(ex,null,c.createElement(tx,null,(0,d._x)("Required","Required form input","web-stories")))};function rx(){return rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rx.apply(this,arguments)}const ax=24,ox=p.default.div.withConfig({displayName:"radio__Container",componentId:"sc-dphfhc-0"})(["display:flex;align-items:center;min-height:","px;padding:8px 0;"],44),ix=p.default.div.withConfig({displayName:"radio__RadioInputContainer",componentId:"sc-dphfhc-1"})(["position:relative;height:","px;width:","px;"],ax,ax),lx=p.default.div.withConfig({displayName:"radio__LabelContainer",componentId:"sc-dphfhc-2"})(["display:flex;flex-direction:column;margin:0 12px;gap:","px;"],8),sx=p.default.span.withConfig({displayName:"radio__RadioBorder",componentId:"sc-dphfhc-3"})((e=>{let{theme:t}=e;return(0,p.css)(["display:inline-block;height:","px;width:","px;border:","px solid ",";border-radius:",";pointer-events:none;transition:all 0.15s;"],ax,ax,1,t.colors.border.defaultNormal,t.borders.radius.round)})),cx=p.default.span.withConfig({displayName:"radio__InnerButton",componentId:"sc-dphfhc-4"})((e=>{let{theme:t}=e;return(0,p.css)(["pointer-events:none;display:none;:after{content:'';position:absolute;height:","px;width:","px;top:50%;left:50%;transform:translate(-50%,-50%);background-color:",";border-radius:",";}"],16,16,t.colors.fg.primary,t.borders.radius.round)})),dx=p.default.input.attrs({type:"radio"}).withConfig({displayName:"radio__HiddenInput",componentId:"sc-dphfhc-5"})(["position:absolute;height:","px;width:","px;margin:0;opacity:0;cursor:pointer;:hover ~ ","{border-color:",";}:focus{outline:none;}:focus ~ ",",&."," ~ ","{",";border-color:",";}:active ~ ","{box-shadow:0 0 0 8px ",";}:checked ~ ","{display:block;}:disabled{cursor:auto;~ ","{border-color:",";}~ ","::after{background-color:",";}}"],ax,ax,sx,(e=>{let{theme:t}=e;return t.colors.border.defaultHover}),sx,Ip.FOCUS_VISIBLE_SELECTOR,sx,(e=>{let{theme:t}=e;return up.focusCSS(t.colors.border.focus)}),(e=>{let{theme:t}=e;return t.colors.border.defaultHover}),sx,(e=>{let{theme:t}=e;return t.colors.shadow.active}),cx,sx,(e=>{let{theme:t}=e;return t.colors.border.disable}),cx,(e=>{let{theme:t}=e;return t.colors.fg.disable})),ux=(0,p.default)(Ke.Text).attrs({forwardedAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"radio__Hint",componentId:"sc-dphfhc-6"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),px=(0,u.forwardRef)((function RadioButton(e,t){let{className:n,hint:r,id:a,label:o,...i}=e;const l=(0,u.useMemo)((()=>a||(0,pe.default)()),[a]);return c.createElement(ox,{className:n},c.createElement(ix,null,c.createElement(dx,rx({id:l,ref:t},i)),c.createElement(sx,null),c.createElement(cx,null)),c.createElement(lx,null,c.createElement(Ke.Text,{htmlFor:l,as:"label",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o),r&&c.createElement(ux,null,r)))}));const mx=function(e){const t=(0,u.useCallback)((t=>{const n=e.current;if(!n)return;const r=Array.from(n.querySelectorAll('input[type="radio"]')),a=r.indexOf(document.activeElement);if(-1===a)return;const o=a+t;o<0||o>=r.length||(r[o].focus(),r[o].click())}),[e]),n=(0,u.useCallback)((()=>t(-1)),[t]);(0,Ir.useKeyDownEffect)(e,["up","left"],n,[n]);const r=(0,u.useCallback)((()=>t(1)),[t]);(0,Ir.useKeyDownEffect)(e,["down","right"],r,[r])};p.default.h3.withConfig({displayName:"radioGroup__VisuallyHiddenLabel",componentId:"sc-k5v4js-0"})(["",";"],aI.visuallyHidden),(0,p.default)(px).withConfig({displayName:"radioGroup__StyledRadio",componentId:"sc-k5v4js-1"})(["input:focus + span,input&."," + span{",";}"],Ip.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return`box-shadow: 0px 0px 0 2px ${t.colors.bg.secondary}, 0px 0px 0 4px ${t.colors.border.focus} !important;`}));var gx=n(71577);function fx(){return fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fx.apply(this,arguments)}const hx=p.default.div.withConfig({displayName:"select__Container",componentId:"sc-1pv4s6p-0"})(["position:relative;width:100%;"]),bx=(0,p.default)(gx.DropDown).withConfig({displayName:"select__StyledDropDown",componentId:"sc-1pv4s6p-1"})(["background-color:transparent;border:0;width:auto;"]),Ex=(0,p.css)(["top:-14px;right:unset;width:auto;"]),yx=(0,p.css)(["border:none;width:auto;margin-right:auto;padding-left:0;",";"],pp),_x=(0,p.css)(["margin-right:0;"]);const vx=function Select(e){return c.createElement(hx,null,c.createElement(bx,fx({isInline:!0,hasSearch:!1,menuStylesOverride:Ex,selectButtonStylesOverride:yx,selectValueStylesOverride:_x},e)))};var wx=n(37309);const Tx=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.map((t=>{const n=e[t.id];return{...t,options:n&&n.length?Tx(e,n):[]}}))},Sx=e=>{const t=e.map((e=>({options:[],parent:0,...e}))),n=(r="parent",t.reduce(((e,t)=>(e[t[r]]?e[t[r]].push(t):e[t[r]]=[t],e)),{}));var r;return Tx(n,n[0])},Cx=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{options:n,...r}=e;let a=[];if(n)for(let e=0;e<n.length;e++)a=a.concat(Cx(n[e],t));const o=e.label.toLowerCase().includes(t.trim().toLowerCase()),i={...r,options:a};return o||a.length?[i]:[]},Ix=(e,t)=>e.reduce(((e,n)=>e.concat(Cx(n,t))),[]);function xx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.flatMap((e=>{let{options:n,...r}=e;return[{...r,$level:t},...xx(n,t+1)]}))}function Ax(){return Ax=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ax.apply(this,arguments)}const kx=p.default.div.withConfig({displayName:"hierarchical__Container",componentId:"sc-1pgjcwl-0"})(["margin-bottom:8px;display:block;"]),Ox=(0,p.default)(Ke.Text).attrs({forwardedAs:"label",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"hierarchical__Label",componentId:"sc-1pgjcwl-1"})(["margin:0 12px;"]),Px=p.default.div.withConfig({displayName:"hierarchical__Border",componentId:"sc-1pgjcwl-2"})(["padding-top:4px;margin-top:-4px;border:1px solid ",";border-top:none;border-radius:",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return`0 0 ${t.borders.radius.small} ${t.borders.radius.small}`})),Nx=p.default.ul.withConfig({displayName:"hierarchical__CheckboxArea",componentId:"sc-1pgjcwl-3"})(["max-height:175px;padding:12px 12px 0 12px;overflow-y:scroll;margin-top:4px;margin-bottom:0;",";:focus-within{",";}"],A.scrollbarCSS,(e=>{let{theme:t}=e;return up.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),Rx=p.default.li.withConfig({displayName:"hierarchical__CheckboxContainer",componentId:"sc-1pgjcwl-4"})(["display:flex;align-items:center;margin-bottom:8px;margin-left:","px;"],(e=>{let{$level:t}=e;return 20*t})),Mx=(0,p.default)(Ke.Text).withConfig({displayName:"hierarchical__NoResultsText",componentId:"sc-1pgjcwl-5"})(["margin-bottom:12px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Lx=e=>`hierarchical_term_option_${e}`,Option=e=>{let{optionRefs:t={current:{}},$level:n=0,...r}=e;const{id:a,label:o,onBlur:i,onChange:l,onFocus:s,checked:d,value:u}=r,p=Lx(r.id),m=`hierarchical_term_${r.label}`;return c.createElement(Rx,{"aria-selected":d,role:"treeitem",$level:n},c.createElement(uS.Checkbox,{id:p,ref:e=>{t.current[a]=e},value:u,checked:d,name:m,onChange:e=>l(e,r),onBlur:i,onFocus:s,tabIndex:-1}),c.createElement(Ox,{htmlFor:p},o))},Dx=e=>{let{className:t,inputValue:n,onInputChange:r,label:a,noOptionsText:o,options:i,onChange:l,...s}=e;const p=(0,wx.default)("assertive"),m=(0,u.useDebouncedCallback)(p,500),g=(0,u.useRef)(null),f=(0,u.useRef)(null),[h,b]=(0,u.useState)(-1),E=(0,u.useRef)({}),y=(0,u.useCallback)((e=>{if(document.activeElement===g.current){if(!i.length)return;if(g.current.contains(e.relatedTarget))return void f.current?.focus();if(-1===h){const e=i.find((e=>e.checked))?.id;b(e||0)}else E.current[h]?.focus()}}),[h,i]),_=(0,u.useCallback)((e=>{const t=i.findIndex((e=>e.id===h));switch(e.key){case tc.KEYS.UP:t>0&&b(i[t-1].id);break;case tc.KEYS.DOWN:t<i.length-1&&b(i[t+1].id)}}),[i,h]),v=(0,u.useCallback)((e=>{r(e.target.value)}),[r]),w=(0,u.useCallback)(((e,t)=>{l(e,{id:t.id,checked:!t.checked})}),[l]),T=(0,u.usePrevious)(n);(0,u.useEffect)((()=>{if(T!==n){const e=i.length,t=(0,$e.default)(
/* translators: %d: number of results. */
(0,d._n)("%d result found.","%d results found.",e,"web-stories"),e);m(t)}}),[m,i,n,T]),(0,Ir.useKeyDownEffect)(g,{key:["up","down","shift+up","shift+down"]},_,[_]),(0,u.useEffect)((()=>{g.current?.contains(document.activeElement)&&E.current[h]?.focus()}),[h]);const S=Boolean(i.length)||Boolean(n.length);return c.createElement(kx,{className:t},c.createElement(qv,Ax({ref:f,value:n,onChange:v,label:a,type:"search",placeholder:(0,d.__)("Search","web-stories")},s)),S&&c.createElement(Px,null,c.createElement(Ku,null,c.createElement(Nx,{id:"checkbox_list",ref:g,tabIndex:0,onFocus:y,role:"tree","aria-activedescendant":-1!==h?Lx(h):void 0,"aria-multiselectable":!0},i.length?i.map((e=>c.createElement(Option,Ax({key:e.id},e,{onChange:w,optionRefs:E})))):c.createElement(Mx,{role:"treeitem",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o)))))},Bx=p.default.div.withConfig({displayName:"videoMode__Wrapper",componentId:"sc-y6q7x7-0"})(["position:absolute;top:20px;right:20px;width:70px;"]),Fx=(0,p.default)(hI).withConfig({displayName:"videoMode__StyledSwitch",componentId:"sc-y6q7x7-1"})(["background:",";"],(e=>{let{theme:t}=e;return t.colors.bg.tertiary})),Hx=(0,p.default)(rh).attrs({title:(0,d.__)("Use as video","web-stories")}).withConfig({displayName:"videoMode__CameraIcon",componentId:"sc-y6q7x7-2"})(["flex:1;"]),Ux=(0,p.default)(_b).attrs({title:(0,d.__)("Use as GIF","web-stories")}).withConfig({displayName:"videoMode__GifIcon",componentId:"sc-y6q7x7-3"})(["flex:1;"]);const jx=function VideoMode(e){let{value:t,onChange:n}=e;return c.createElement(Bx,null,c.createElement(Fx,{groupLabel:(0,d.__)("Video Mode","web-stories"),name:"video-mode-switch",value:t,onLabel:c.createElement(Hx,null),offLabel:c.createElement(Ux,null),onChange:n}))},zx=p.default.div.withConfig({displayName:"playPauseButton__Controls",componentId:"sc-bvqqpx-0"})(["position:absolute;"]),Gx=p.default.button.attrs({tabIndex:-1}).withConfig({displayName:"playPauseButton__ButtonWrapper",componentId:"sc-bvqqpx-1"})(["cursor:pointer;pointer-events:initial;width:","px;height:","px;overflow:hidden;background:transparent;border:none;padding:0;"],82,82),Yx=(0,p.css)(["width:","px;height:","px;color:",";filter:drop-shadow( 0px 0px 10px "," );"],72,72,(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.bg.primary,.4)})),Zx=(0,p.default)(Jy.default).withConfig({displayName:"playPauseButton__Play",componentId:"sc-bvqqpx-2"})(["",";"],Yx),Wx=(0,p.default)(V_.default).withConfig({displayName:"playPauseButton__Pause",componentId:"sc-bvqqpx-3"})(["",";"],Yx);const Vx=function PlayPauseButton(e){let{videoRef:t}=e;const{isRTL:n}=U(),[r,a]=(0,u.useState)(!0),[o,i]=(0,u.useState)(!0);(0,u.useEffect)((()=>{const e=t?.current,n=()=>{e&&(e.currentTime=0),i(!1)};return e?.addEventListener("ended",n),()=>e?.removeEventListener("ended",n)}),[t]),(0,u.useEffect)((()=>{const e=t?.current;if(!e)return;const n=()=>i(!0),r=()=>i(!1),a=e=>{let{target:{paused:t}}=e;return i(!t)};return e.addEventListener("play",n),e.addEventListener("pause",r),e.addEventListener("timeupdate",a),()=>{e.removeEventListener("play",n),e.removeEventListener("pause",r),e.removeEventListener("timeupdate",a)}}),[t]);const l=e=>{e.stopPropagation();const n=t?.current;n&&(o?(n.pause(),a(!0)):n.play().catch((()=>{})))};(0,Ir.useKeyDownEffect)(t,{key:["space"]},l,[l]);const s=(0,u.useRef)(),p=o?(0,d.__)("Click to pause","web-stories"):(0,d.__)("Click to play","web-stories"),m=o?Wx:Zx;return c.createElement(zx,null,r&&c.createElement(Gx,{ref:s,"aria-label":p,"aria-pressed":o,key:"wrapper",onClick:l},c.createElement(m,{$isRTL:n})))},$x=p.default.div.withConfig({displayName:"mediaRecording__MessageWrap",componentId:"sc-tmkrsc-0"})(["display:flex;flex-direction:column;align-items:center;align-content:center;padding:20px;height:100%;justify-content:center;text-align:center;user-select:text;"]),qx=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_LARGE}).withConfig({displayName:"mediaRecording__MessageHeading",componentId:"sc-tmkrsc-1"})(["margin:0 0 14px;"]),Kx=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"mediaRecording__MessageText",componentId:"sc-tmkrsc-2"})(["margin:0 0 14px;"]),Xx=p.default.div.withConfig({displayName:"mediaRecording__Wrapper",componentId:"sc-tmkrsc-3"})(["background-color:",";border-radius:5px;position:absolute;transform:translateZ(0);top:0;left:0;bottom:0;right:0;cursor:default;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),Qx=p.default.div.withConfig({displayName:"mediaRecording__VideoWrapper",componentId:"sc-tmkrsc-4"})(["width:100%;height:100%;background:#000;margin:0 auto;display:flex;align-items:center;justify-content:center;overflow:hidden;"]),Jx=p.default.img.withConfig({displayName:"mediaRecording__Photo",componentId:"sc-tmkrsc-5"})(["display:block;width:100%;height:100%;object-fit:cover;border-radius:5px;"]),eA=p.default.video.attrs({autoPlay:!0,disablePictureInPicture:!0}).withConfig({displayName:"mediaRecording__Video",componentId:"sc-tmkrsc-6"})(["display:block;width:100%;height:100%;object-fit:cover;border-radius:5px;",";"],(e=>{let{$isProcessing:t}=e;return t&&"filter: blur(5px)"})),tA=p.default.div.withConfig({displayName:"audio__AudioWrapper",componentId:"sc-yvjjwu-0"})(["background:",";border-radius:5px;width:100%;height:100%;"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}));const AudioAnalyser=e=>{let{source:t}=e;const[n,r]=(0,u.useState)([]),a=(0,u.useRef)(),o=(0,u.useRef)(),i=(0,u.useRef)(),l=(0,u.useRef)();return i.current||(o.current=new window.AudioContext,i.current=o.current.createAnalyser()),(0,u.useEffect)((()=>{const e=o.current.createMediaStreamSource(t);e.connect(i.current);const n=e=>{if(void 0!==l.current){const e=new Uint8Array(i.current.frequencyBinCount);i.current.getByteTimeDomainData(e),r(e)}l.current=e,a.current=requestAnimationFrame(n)};return a.current=requestAnimationFrame(n),()=>{cancelAnimationFrame(a.current),i.current.disconnect(),e.disconnect()}}),[t]),c.createElement(AudioVisualiser,{data:n})},AudioVisualiser=e=>{let{data:t}=e;const n=(0,u.useRef)(),r=n.current;if(r){r.style.width="100%",r.style.height="100%",r.width=r.offsetWidth,r.height=r.offsetHeight;const e=r.height,n=r.width,a=r.getContext("2d"),o=Number(n)/t.length;a.lineWidth=2,a.strokeStyle="#FFF",a.clearRect(0,0,n,e),a.beginPath(),a.moveTo(0,e/2);let i=0;for(const n of t){const t=n/255*e;a.lineTo(i,t),i+=o}a.lineTo(i,e/2),a.stroke()}return c.createElement("canvas",{ref:n})},nA=function Audio(e){let{liveStream:t}=e;return c.createElement(tA,null,c.createElement(AudioAnalyser,{source:t}))};const rA=function PlaybackMedia(){const{mediaBlob:e,mediaBlobUrl:t,originalMediaBlobUrl:n,liveStream:r,hasVideo:a,hasAudio:o,isGif:i,isImageCapture:l,isAdjustingTrim:s,toggleIsGif:p,setStreamNode:m,isProcessingTrim:g}=Iv((e=>{let{state:t,actions:n}=e;return{mediaBlob:t.mediaBlob,mediaBlobUrl:t.mediaBlobUrl,originalMediaBlobUrl:t.originalMediaBlobUrl,liveStream:t.liveStream,hasVideo:t.hasVideo,hasAudio:t.hasAudio,isGif:t.isGif,isImageCapture:Boolean(t.file?.type?.startsWith("image")),isAdjustingTrim:t.isAdjustingTrim,toggleIsGif:n.toggleIsGif,setStreamNode:n.setStreamNode,isProcessingTrim:t.isProcessingTrim}})),f=Nv((e=>{let{actions:{setVideoNode:t}}=e;return t})),h=!o||i,b=(0,u.useCallback)((()=>{p(),E.current&&E.current.play().catch((()=>{}))}),[p]),E=(0,u.useRef)(),y=(0,u.useCallback)((e=>{f(e),E.current=e}),[f]),_=!i&&!g||s,v=s?n:t,w=t&&a&&!s&&!g;return l?c.createElement(Qx,null,c.createElement(Jx,{decoding:"async",src:t,alt:(0,d.__)("Image capture","web-stories")})):c.createElement(c.Fragment,null,w&&c.createElement(jx,{value:!i,onChange:b}),c.createElement(Qx,null,t&&(a?c.createElement(c.Fragment,null,c.createElement(eA,{ref:y,src:v,muted:h,loop:i||s,$isProcessing:g,tabIndex:0}),_&&c.createElement(Vx,{videoRef:E})):c.createElement("audio",{controls:"controls",src:t})),!e&&!t&&r&&(a?c.createElement(eA,{ref:m,muted:!0}):c.createElement(nA,{liveStream:r}))))},aA=(0,p.default)(qx).withConfig({displayName:"errorDialog__StyledHeading",componentId:"sc-mbe9k2-0"})(["display:flex;align-items:center;"]);function ErrorMessage(e){let{error:t,hasVideo:n}=e,r=t?.message;return window.isSecureContext?"NotAllowedError"===t?.name?r=(0,d.__)("Permission denied","web-stories"):n&&"NotFoundError"!==t?.name&&"OverConstrainedError"!==t?.name||(r=(0,d.__)("No camera found","web-stories")):r=(0,d.__)("Requires a secure browsing context (HTTPS)","web-stories"),c.createElement($x,null,c.createElement(p.ThemeProvider,{theme:{...f.theme,colors:h.light}},c.createElement(aA,null,c.createElement(cb,{size:32,height:32,"aria-hidden":!0}),(0,d.__)("Error","web-stories")),c.createElement(Kx,null,(0,d.__)("Could not initialize recording.","web-stories")),r&&c.createElement(Kx,null,(0,$e.default)(
/* translators: %s: error message. */
(0,d.__)("Reason: %s","web-stories"),r))))}const oA=function ErrorDialog(){const{error:e,hasVideo:t}=Iv((e=>{let{state:t}=e;return{error:t.error,hasVideo:Boolean(t.videoInput)}}));return c.createElement(Xx,null,c.createElement(ErrorMessage,{error:e,hasVideo:t}))};const iA=function PermissionsDialog(){return c.createElement(Xx,null,c.createElement($x,null,c.createElement(p.ThemeProvider,{theme:{...f.theme,colors:h.light}},c.createElement(qx,null,(0,d.__)("Media Recording","web-stories")),c.createElement(Kx,null,(0,d.__)("To get started, you need to allow access to your camera and microphone.","web-stories")))))};var lA=n(13293);const sA=p.default.div.withConfig({displayName:"processingOverlay__Wrapper",componentId:"sc-ksu3mm-0"})(["position:absolute;left:0;top:0;height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;background-color:rgba(0 0 0 / 0.5);gap:2em;padding:3em;"]);const cA=function ProcessingOverlay(){return c.createElement(sA,null,c.createElement(lA.LoadingSpinner,null),c.createElement(Ke.Text,null,(0,d.__)("Video trimming in progress. Please wait up to a few minutes depending on output video length.","web-stories")))};const dA=function MediaRecording(){const{status:e,error:t,needsPermissions:n,isProcessingTrim:r}=Iv((e=>{let{state:t}=e;return{status:t.status,error:t.error,needsPermissions:("idle"===t.status||"acquiring_media"===t.status)&&!t.videoInput,isProcessingTrim:t.isProcessingTrim}}));return"failed"===e||Boolean(t)?c.createElement(oA,null):n?c.createElement(iA,null):c.createElement(c.Fragment,null,c.createElement(Xx,null,c.createElement(rA,null),r&&c.createElement(cA,null)),c.createElement(Ov,null),c.createElement(Av,null))};var uA=n(91703),pA=n.n(uA);const mA=function(e){if(!e)return"00:00:00";let t=e/1e3;const n=parseInt(t/3600);t%=3600;const r=parseInt(t/60);return t%=60,`${ae(n)}:${ae(r)}:${ae(t)}`};const gA=function(e){let{setDuration:t,onTrimmed:n,file:r,isRecording:a}=e;const[o,i]=(0,u.useState)({start:0,end:null}),[l,s]=(0,u.useState)(!1),[d,p]=(0,u.useState)(!1),{trimVideo:m}=lo(),g=(0,u.useRef)(),f=(0,u.useCallback)((async e=>{if(s(!1),e){g.current=!1,p(!0);const a=mA(e.start),o=mA(e.end),l=await m(r,a,o);if(g.current)return;i(e),p(!1),n(l),t(e.end-e.start)}}),[r,n,t,m]),h=(0,u.useCallback)((()=>s(!0)),[]),b=(0,u.useCallback)((()=>{s(!1),i({start:0,end:null})}),[]),E=(0,u.useCallback)((()=>{g.current=!0,p(!1)}),[]);return(0,c.useEffect)((()=>{a&&b()}),[a,b]),{trimData:o,isAdjustingTrim:l,isProcessingTrim:d,onTrim:f,startTrim:h,resetTrim:b,cancelTrim:E}};const fA=function MediaRecordingProvider(e){let{children:t}=e;const[n,r]=(0,u.useState)(!1),[a,o]=(0,u.useState)(!1),[i,l]=(0,u.useState)(!1),[s,p]=(0,u.useState)(null),[m,g]=(0,u.useState)(0),[f,h]=(0,u.useState)(0),[b,E]=(0,u.useState)(!1),[y,_]=(0,u.useState)(!0),[v,w]=(0,u.useState)(!0),[T,S]=(0,u.useState)(Jo.getItemByKey(Qo.MEDIA_RECORDING_VIDEO_INPUT)),[C,I]=(0,u.useState)(Jo.getItemByKey(Qo.MEDIA_RECORDING_AUDIO_INPUT)),[x,A]=(0,u.useState)([]),[k,O]=(0,u.useState)(null),[N,R]=(0,u.useState)(null);(0,u.useEffect)((()=>{x.length&&(S(x.find((e=>e.deviceId===T))?.deviceId||x.find((e=>"videoinput"===e.kind))?.deviceId),I(x.find((e=>e.deviceId===C))?.deviceId||x.find((e=>"audioinput"===e.kind))?.deviceId))}),[C,x,T]);const[M,L]=(0,u.useState)(),[D,B]=(0,u.useState)(),{showSnackbar:F}=(0,jr.useSnackbar)(),H=(0,u.useCallback)((e=>{try{const t=(0,q.createBlob)(e);B(t),L(t);const n=function(e,t){const n=t?"mp4":"mp3",r=t?"video/mp4":"audio/mpeg";return ce(e,`${t?"webcam":"audio"}-capture-${(0,lu.default)(new Date,"Y-m-d-H-i")}.${n}`,r)}(e,y);R(n),O(n)}catch(e){(0,P.trackError)("media_recording_capture",e.message),F({message:(0,d.__)("There was an error recording a video. Please try again.","web-stories"),dismissable:!0})}}),[F,y]),{error:U,status:j,mediaBlob:z,stopRecording:G,startRecording:Y,liveStream:Z,getMediaStream:W,clearMediaStream:V,clearMediaBlob:$,muteAudio:K,unMuteAudio:X,pauseRecording:Q,resumeRecording:J}=pA()({recordScreen:!1,mediaStreamConstraints:{audio:!!v&&(!C||{deviceId:C}),video:!!y&&(!T||{deviceId:T})},onStop:H}),ee="recording"===j,te=(0,u.useCallback)((e=>{L((0,q.createBlob)(e)),O(e)}),[]),{trimData:ne,isAdjustingTrim:re,isProcessingTrim:ae,startTrim:oe,onTrim:ie,resetTrim:le,cancelTrim:se}=gA({setDuration:h,onTrimmed:te,file:N,isRecording:ee});(0,u.useEffect)((()=>{"NotFoundError"!==U?.name&&"NotReadableError"!==U?.name&&"OverConstrainedError"!==U?.name||(_(!1),S(null))}),[U]);const de=(0,wx.default)(),ue=(0,u.useCallback)((()=>{l(!0),G(),de((0,d.__)("Recording stopped","web-stories"))}),[G,de]),pe=(0,u.useCallback)((async()=>{if(navigator.mediaDevices)try{const e=await navigator.mediaDevices.enumerateDevices();A(e.filter((e=>"audiooutput"!==e.kind)).filter((e=>e.label)))}catch(e){}}),[]);(0,u.useEffect)((()=>{if(navigator.mediaDevices)return navigator.mediaDevices.addEventListener("devicechange",pe),()=>{navigator.mediaDevices.removeEventListener("devicechange",pe)}}),[]);const me=(0,u.useCallback)((()=>{_(!y)}),[y]),ge=(0,u.useCallback)((()=>{w(!v),v?K():X()}),[v,K,X]),fe=(0,u.usePrevious)(M);(0,u.useEffect)((()=>{fe&&fe!==M&&fe!==D&&(0,q.revokeBlob)(fe)}),[M,fe,D]),(0,u.useEffect)((()=>{let e;return f>=0&&ee&&(e=setTimeout((()=>h((e=>e+1))),1e3)),()=>clearTimeout(e)}),[f,ee]),(0,u.useEffect)((()=>{let e;return m>0&&(e=setTimeout((()=>g(m-1)),1e3)),()=>clearTimeout(e)}),[m]),(0,u.useEffect)((()=>{f>120&&ue()}),[f,ue]);const he=(0,u.useCallback)((()=>{Z&&Z.getTracks().forEach((e=>e.stop())),$(),V()}),[$,V,Z]),be=(0,u.useCallback)((()=>{O(null),E(!1),L(null),g(0),l(!1),h(0),le(),he()}),[he,le]),Ee=(0,u.useCallback)((()=>{r((e=>!e)),be()}),[be]),ye=(0,u.useCallback)((()=>o((e=>!e))),[]),_e=(0,u.useCallback)((()=>E((e=>!e))),[]),ve=m>0,we=(0,u.usePrevious)(ve),Te=(0,u.useMemo)((()=>({state:{isInRecordingMode:n,hasVideo:y,hasAudio:v,mediaDevices:x,audioInput:C,videoInput:T,isSettingsOpen:a,error:U,status:j,mediaBlob:z,mediaBlobUrl:M,originalMediaBlobUrl:D,liveStream:Z,file:k,isGif:b,duration:f,countdown:m,isProcessing:i,isCountingDown:ve||we,trimData:ne,isAdjustingTrim:re,streamNode:s,isProcessingTrim:ae},actions:{toggleRecordingMode:Ee,setMediaBlobUrl:L,toggleVideo:me,toggleAudio:ge,toggleSettings:ye,toggleIsGif:_e,setAudioInput:I,setVideoInput:S,updateMediaDevices:pe,stopRecording:ue,startRecording:Y,getMediaStream:W,clearMediaStream:V,clearMediaBlob:$,setFile:O,muteAudio:K,unMuteAudio:X,setDuration:h,setCountdown:g,resetState:be,resetStream:he,onTrim:ie,startTrim:oe,setStreamNode:p,pauseRecording:Q,resumeRecording:J,cancelTrim:se}})),[n,y,v,x,C,T,a,U,j,z,M,D,Z,k,b,f,m,ve,we,i,ne,re,s,ae,Ee,me,ge,ye,_e,pe,ue,Y,W,V,$,K,X,be,he,ie,oe,p,Q,J,se]);return c.createElement(Cv.Provider,{value:Te},t)},hA=p.default.div.withConfig({displayName:"settingsModal__Row",componentId:"sc-1xjwc1a-0"})(["margin-bottom:16px;"]);const bA=function SettingsModal(){const{mediaDevices:e,hasAudio:t,videoInput:n,audioInput:r,isSettingsOpen:a,setAudioInput:o,setVideoInput:i,clearMediaStream:l,clearMediaBlob:s,toggleSettings:p}=Iv((e=>{let{state:t,actions:n}=e;return{mediaDevices:t.mediaDevices,hasAudio:t.hasAudio,videoInput:t.videoInput,audioInput:t.audioInput,isSettingsOpen:t.isSettingsOpen,setAudioInput:n.setAudioInput,setVideoInput:n.setVideoInput,clearMediaStream:n.clearMediaStream,clearMediaBlob:n.clearMediaBlob,toggleSettings:n.toggleSettings}})),[m,g]=(0,u.useState)(n),[f,h]=(0,u.useState)(r);(0,u.useEffect)((()=>g(n)),[n]),(0,u.useEffect)((()=>h(r)),[r]);const b=(0,u.useCallback)((()=>{p(),i(m),Jo.setItemByKey(Qo.MEDIA_RECORDING_VIDEO_INPUT,m),o(f),Jo.setItemByKey(Qo.MEDIA_RECORDING_AUDIO_INPUT,f),n===m&&r===f||((0,P.trackEvent)("media_recording_settings_changed"),l(),s())}),[r,s,l,f,m,o,i,p,n]),E=e.filter((e=>"videoinput"===e.kind)).map((e=>{let{deviceId:t,label:n}=e;return{value:t,label:n}})),_=e.filter((e=>"audioinput"===e.kind)).map((e=>{let{deviceId:t,label:n}=e;return{value:t,label:n}})),v=(0,u.useCallback)(((e,t)=>g(t)),[]),w=(0,u.useCallback)(((e,t)=>h(t)),[]),T=(0,u.useCallback)((()=>{p(),g(n),h(r)}),[r,p,n]);return c.createElement(y,{onClose:T,isOpen:a,contentLabel:(0,d.__)("Media Recording Options","web-stories"),title:(0,d.__)("Options","web-stories"),onPrimary:b,primaryText:(0,d.__)("Save","web-stories"),secondaryText:(0,d.__)("Cancel","web-stories")},c.createElement(hA,null,c.createElement(Ke.Text,null,(0,d.__)("Choose the camera and microphone to use for the recording.","web-stories"))),E.length>0&&c.createElement(hA,null,c.createElement(gx.DropDown,{ariaLabel:(0,d.__)("Video Input","web-stories"),placeholder:(0,d.__)("Select Video Input","web-stories"),options:E,onMenuItemClick:v,selectedValue:m,popupZIndex:11})),_.length>0&&c.createElement(hA,null,c.createElement(gx.DropDown,{ariaLabel:(0,d.__)("Audio Input","web-stories"),placeholder:(0,d.__)("Select Audio Input","web-stories"),options:_,onMenuItemClick:w,selectedValue:f,disabled:!t,popupZIndex:11})))},EA=(0,p.default)(m.Button).attrs({type:g.BUTTON_TYPES.PRIMARY,size:g.BUTTON_SIZES.SMALL}).withConfig({displayName:"footer__BaseButton",componentId:"sc-cffjy6-0"})([""]),yA=(0,p.default)(EA).withConfig({displayName:"footer__RecordingButton",componentId:"sc-cffjy6-1"})(["margin-right:20px;padding-top:12px;padding-bottom:12px;svg{margin:-9px 10px -9px 0;}"]),_A=(0,p.default)(EA).attrs({type:g.BUTTON_TYPES.SECONDARY}).withConfig({displayName:"footer__PauseButton",componentId:"sc-cffjy6-2"})(["margin-right:20px;padding-top:12px;padding-bottom:12px;"]),vA=(0,p.default)(EA).withConfig({displayName:"footer__StopButton",componentId:"sc-cffjy6-3"})(["padding-top:12px;padding-bottom:12px;background-color:",";border-color:",";color:",";&:active,&:hover,&:focus{background-color:",";border-color:",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.negativeNormal}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.negativeNormal}),(e=>{let{theme:t}=e;return t.colors.gray[5]}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.negativeHover}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.negativeHover})),wA=(0,p.default)(EA).attrs({type:g.BUTTON_TYPES.QUATERNARY}).withConfig({displayName:"footer__CaptureButton",componentId:"sc-cffjy6-4"})(["background-color:",";padding-top:12px;padding-bottom:12px;svg{margin:-9px 10px -9px 0;}"],(e=>{let{theme:t}=e;return t.colors.opacity.overlayDark})),TA=(0,p.default)(m.Button).attrs({type:g.BUTTON_TYPES.PRIMARY,size:g.BUTTON_SIZES.SMALL}).withConfig({displayName:"footer__InsertButton",componentId:"sc-cffjy6-5"})([""]),SA=(0,p.default)(m.Button).attrs({type:g.BUTTON_TYPES.PLAIN,size:g.BUTTON_SIZES.SMALL}).withConfig({displayName:"footer__RetryButton",componentId:"sc-cffjy6-6"})(["margin-right:20px;"]);const CA=function(){const{status:e,file:t,isGif:n,isMuted:r,hasMediaToInsert:a,countdown:o,duration:i,isCountingDown:l,setMediaBlobUrl:s,setDuration:p,setCountdown:m,startRecording:g,stopRecording:f,setFile:h,toggleRecordingMode:b,getMediaStream:E,resetState:y,resetStream:_,streamNode:v,liveStream:w,hasVideo:T,pauseRecording:S,resumeRecording:C,isProcessingTrim:I,cancelTrim:x}=Iv((e=>{let{state:t,actions:n}=e;return{status:t.status,file:t.file,isGif:t.isGif,isMuted:!t.hasAudio||t.isGif,countdown:t.countdown,duration:t.duration,isCountingDown:t.isCountingDown,hasVideo:t.hasVideo,hasMediaToInsert:Boolean(t.mediaBlobUrl),liveStream:t.liveStream,streamNode:t.streamNode,isProcessingTrim:t.isProcessingTrim,startRecording:n.startRecording,stopRecording:n.stopRecording,setFile:n.setFile,setMediaBlobUrl:n.setMediaBlobUrl,setDuration:n.setDuration,setCountdown:n.setCountdown,toggleRecordingMode:n.toggleRecordingMode,getMediaStream:n.getMediaStream,resetState:n.resetState,resetStream:n.resetStream,pauseRecording:n.pauseRecording,resumeRecording:n.resumeRecording,cancelTrim:n.cancelTrim}})),A=Nv((e=>{let{state:{videoNode:t}}=e;return t})),k=Os(),O=(0,wx.default)(),{allowedMimeTypes:{audio:N}}=U(),R=(0,u.useCallback)((()=>{S(),(0,P.trackEvent)("media_recording_pause")}),[S]),M=(0,u.useCallback)((()=>{C(),(0,P.trackEvent)("media_recording_resume")}),[C]),L=(0,u.useCallback)((async()=>{y(),await E(),(0,P.trackEvent)("media_recording_retry")}),[E,y]),D=(0,u.useDebouncedCallback)(g,3e3),B=(0,u.useCallback)((()=>{O((0,$e.default)(
/* translators: %d: countdown time in seconds. */
(0,d._n)("Starting recording in %d second","Starting recording in %d seconds",3,"web-stories"),3)),p(0),m(3),D()}),[D,m,p,O]),[F,H]=(0,u.useState)(!1),j=["recording","stopping","stopped","paused"].includes(e),z="paused"===e,G=(0,u.useCallback)((async()=>{H(!0),O((0,d.__)("Inserting…","web-stories"));const e={additionalData:{mediaSource:"recording",altText:(0,d.__)("Camera Capture","web-stories")}},{resource:a,posterFile:o}=await Ze(t);if(e.resource={...a,alt:(0,d.__)("Camera Capture","web-stories")},t.type.startsWith("video")){e.additionalData.isMuted=r,e.additionalData.isGif=n,e.resource.length=i,e.resource.lengthFormatted=oe(i),e.resource.isOptimized=!0,e.resource.isMuted=r,e.posterFile=o;const{length:t,lengthFormatted:a}=ie(A);e.resource.length=t||i,e.resource.lengthFormatted=t?a:oe(i)}k([t],!0,e),j&&(s(null),h(null)),(0,P.trackEvent)("media_recording_capture",{type:n?"gif":"video",muted:r,duration:i}),H(!1),b()}),[O,t,k,j,n,r,i,b,A,s,h]);(0,u.useEffect)((()=>{v&&!v.srcObject&&w&&(v.srcObject=w),v&&!w&&(v.srcObject=null)}),[v,w]);const{showSnackbar:Y}=(0,jr.useSnackbar)(),Z=(0,u.useCallback)((async()=>{if(!v)return;let e;try{e=await ue(v),s((0,q.createBlob)(e))}catch(e){(0,P.trackError)("media_recording_capture",e.message),Y({message:(0,d.__)("There was an error taking a photo. Please try again.","web-stories"),dismissable:!0})}const t=ce(e,`image-capture-${(0,lu.default)(new Date,"Y-m-d-H-i")}.jpeg`,"image/jpeg");h(t),_()}),[_,h,s,Y,v]),W=(0,u.useCallback)((()=>{O((0,$e.default)(
/* translators: %d: countdown time in seconds. */
(0,d._n)("Taking photo in %d second","Taking photo in %d seconds",3,"web-stories"),3)),m(3),Z(),(0,P.trackEvent)("media_recording_capture",{type:"image"})}),[Z,m,O]),{actions:{uploadFile:V}}=Dt(),{updateCurrentPageProperties:$,backgroundElementId:K,setSelectedElementsById:X}=Qa((e=>{let{state:{currentPage:t},actions:{updateCurrentPageProperties:n,setSelectedElementsById:r}}=e;return{backgroundElementId:t?.elements.find((e=>{let{isBackground:t}=e;return t}))?.id,updateCurrentPageProperties:n,setSelectedElementsById:r,currentPage:t}})),{setHighlights:Q}=mm((e=>{let{setHighlights:t}=e;return{setHighlights:t}})),{convertToMp3:J}=lo(),ee=async()=>{H(!0),O((0,d.__)("Inserting…","web-stories"));const e=await J(t),n={resource:er(await V(e,{mediaSource:"recording"},N),Object.keys(Mn.BackgroundAudioPropTypeShape))};X({elementIds:[K]}),Q({highlight:_g.PAGE_BACKGROUND_AUDIO}),$({properties:{backgroundAudio:n}}),H(!1),b()};return"acquiring_media"===e?null:I?c.createElement(SA,{onClick:x},(0,d.__)("Cancel trimming","web-stories")):a?c.createElement(c.Fragment,null,c.createElement(SA,{onClick:L,disabled:F},(0,d.__)("Retry","web-stories")),c.createElement(TA,{onClick:T?G:ee,disabled:F},F?(0,d.__)("Inserting…","web-stories"):T?(0,d.__)("Insert","web-stories"):(0,d.__)("Insert page background audio","web-stories"))):0===o?c.createElement(c.Fragment,null,j&&c.createElement(c.Fragment,null,c.createElement(_A,{onClick:z?M:R,"aria-label":z?(0,d.__)("Resume Recording","web-stories"):(0,d.__)("Pause Recording","web-stories")},z?(0,d.__)("Resume","web-stories"):(0,d.__)("Pause","web-stories")),c.createElement(vA,{onClick:f,"aria-label":(0,d.__)("Stop Recording","web-stories")},(0,d.__)("Stop","web-stories"))),!j&&!l&&(T?c.createElement(c.Fragment,null,c.createElement(yA,{onClick:B},c.createElement(rh,{width:24,height:24,"aria-hidden":!0}),(0,d.__)("Record Video","web-stories")),c.createElement(wA,{onClick:W},c.createElement(By,{width:24,height:24,"aria-hidden":!0}),(0,d.__)("Take a photo","web-stories"))):c.createElement(yA,{onClick:B},c.createElement(HE,{width:24,height:24,"aria-hidden":!0}),(0,d.__)("Record Audio","web-stories")))):null},IA=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"durationIndicator__Wrapper",componentId:"sc-5z5bu3-0"})(["font-variant-numeric:tabular-nums;&:before{content:'';display:inline-block;width:10px;height:10px;margin-right:5px;border-radius:100%;background-color:",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.negativeNormal}));const xA=function DurationIndicator(){const{duration:e,isRecording:t}=Iv((e=>{let{state:t}=e;return{duration:t.duration,isRecording:["recording","paused"].includes(t.status)}}));return t?c.createElement(Tooltip,{position:Vd.PLACEMENT.TOP,title:(0,$e.default)(
/* translators: %s: number of minutes */
(0,d._n)("Maximum duration is %d minute","Maximum duration is %d minutes",2,"web-stories"),2),styleOverride:{style:{maxWidth:"20em"}}},c.createElement(IA,null,oe(e))):null};function AA(e){return e?.type===Mn.ELEMENT_TYPES.TEXT&&e?.borderRadius?e.borderRadius.locked&&e.borderRadius.topLeft===Ig.topLeft:!e?.borderRadius||e.borderRadius===xg}const kA=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return[];const n=[];return e?.overlay&&n.push(Sg),t?.length&&n.push(Tg),(e?.opacity<100||!AA(e)||e?.border)&&n.push(Cg),n};function OA(){return OA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OA.apply(this,arguments)}const PA=(0,$e.default)(
/* translators: %s: Ctrl/Cmd + Z keyboard shortcut */
(0,d.__)("Press %s to undo the last change","web-stories"),(0,Ir.prettifyShortcut)("mod+z")),{Bucket:NA,ColorBucket:RA,CircleSpeed:MA,Eraser:LA,LetterTPlus:DA,Link:BA,Media:FA,PictureSwap:HA,Captions:UA,Cross:jA,Settings:zA,Scissors:GA}=i,YA={width:24,height:24},ZA=(0,p.default)(zA).attrs(YA).withConfig({displayName:"useQuickActions__StyledSettings",componentId:"sc-1bc2yud-0"})([""]),WA=(0,p.default)(HE).attrs(YA).withConfig({displayName:"useQuickActions__Mic",componentId:"sc-1bc2yud-1"})([""]),VA=(0,p.default)(zE).attrs(YA).withConfig({displayName:"useQuickActions__MicOff",componentId:"sc-1bc2yud-2"})([""]),$A=(0,p.default)(rh).attrs(YA).withConfig({displayName:"useQuickActions__Video",componentId:"sc-1bc2yud-3"})([""]),qA=(0,p.default)(ih).attrs(YA).withConfig({displayName:"useQuickActions__VideoOff",componentId:"sc-1bc2yud-4"})([""]),MediaPicker=e=>{let{render:t,...n}=e;const{allowedMimeTypes:{image:r,vector:a,video:o},MediaUpload:i}=U(),{selectedElements:l,updateElementsById:s}=Qa((e=>{let{state:{selectedElements:t},actions:{updateElementsById:n}}=e;return{selectedElements:t,updateElementsById:n}})),{resetWithFetch:p,postProcessingResource:m,optimizeVideo:g,optimizeGif:f,canTranscodeResource:h}=Yl((e=>{let{state:{canTranscodeResource:t},actions:{resetWithFetch:n,postProcessingResource:r,optimizeVideo:a,optimizeGif:o}}=e;return{canTranscodeResource:t,resetWithFetch:n,postProcessingResource:r,optimizeVideo:a,optimizeGif:o}})),{isTranscodingEnabled:b}=lo(),{showSnackbar:E}=(0,jr.useSnackbar)();let y=(0,u.useMemo)((()=>[...r,...a,...o]),[r,a,o]);const _=(0,u.useMemo)((()=>y.map((e=>Rt(e))).flat()),[y]);b&&(y=y.concat(ro));const v=ro.filter((e=>!o.includes(e)));let w=(0,d.__)("No file types are currently supported.","web-stories");_.length&&(w=(0,$e.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s to insert into page.","web-stories"),(0,kt.default)(_)));const T=(0,u.useCallback)(((e,t)=>{yv.default.set(e.id,{url:t,type:"cached"}),s({elementIds:[l?.[0]?.id],properties:{type:e.type,resource:e}})}),[l,s]),S=(0,u.useCallback)((e=>{try{b&&h(e)&&(v.includes(e.mimeType)&&g({resource:e}),"image/gif"===e.mimeType&&f({resource:e})),T(e,e.sizes?.medium?.sourceUrl||e.src),m(e)}catch(e){E({message:e.message,dismissable:!0})}}),[b,h,T,m,v,g,f,E]);return c.createElement(i,OA({title:(0,d.__)("Replace media","web-stories"),buttonInsertText:(0,d.__)("Replace media","web-stories"),onSelect:S,onClose:p,type:y,onSelectErrorMessage:w,render:e=>t({onClick:e})},n))},KA=()=>{const{capabilities:{hasUploadMediaAction:e}}=U(),t=(0,u.useContextSelector)(Za,qa),{backgroundElement:n,currentPageNumber:r,selectedElementAnimations:a,selectedElements:o,updateElementsById:i}=Qa((e=>{let{state:{currentPage:t,currentPageNumber:n,selectedElementAnimations:r,selectedElements:a},actions:{updateElementsById:o}}=e;return{backgroundElement:t?.elements.find((e=>e.isBackground)),currentPageNumber:n,selectedElementAnimations:r,selectedElements:a,updateElementsById:o}})),{undo:l}=Br((e=>{let{actions:{undo:t}}=e;return{undo:t}})),s=(0,jr.useSnackbar)((e=>{let{showSnackbar:t}=e;return t})),{setHighlights:c}=mm((e=>{let{setHighlights:t}=e;return{setHighlights:t}})),{isInRecordingMode:p,toggleRecordingMode:m,toggleVideo:g,toggleAudio:f,hasVideo:h,hasAudio:b,toggleSettings:E,audioInput:y,videoInput:_,isReady:v,isProcessing:w,isAdjustingTrim:T,isProcessingTrim:S,startTrim:I}=Iv((e=>{let{state:t,actions:n}=e;return{isInRecordingMode:t.isInRecordingMode,hasAudio:t.hasAudio,hasVideo:t.hasVideo,audioInput:t.audioInput,videoInput:t.videoInput,isReady:"ready"===t.status&&!t.file?.type?.startsWith("image")&&!t.isCountingDown,isProcessing:t.isProcessing,isAdjustingTrim:t.isAdjustingTrim,isProcessingTrim:t.isProcessingTrim,toggleRecordingMode:n.toggleRecordingMode,toggleVideo:n.toggleVideo,toggleAudio:n.toggleAudio,toggleSettings:n.toggleSettings,muteAudio:n.muteAudio,unMuteAudio:n.unMuteAudio,startTrim:n.startTrim}})),x=(0,C.useFeature)("recordingTrimming"),A=(0,u.useRef)(l);A.current=l;const k=o?.[0],O=(0,u.useCallback)((e=>{e.stopPropagation()}),[]),N=(0,u.useCallback)(((e,t,n)=>{const r={};n.includes(Sg)&&(r.overlay=null),n.includes(Tg)&&i({elementIds:[t],properties:e=>_v(e,{animation:{...a?.[0],delete:!0}},!0)}),n.includes(Cg)&&(r.opacity=100,r.border=null,r.borderRadius=null),e===Mn.ELEMENT_TYPES.TEXT&&(r.borderRadius=Ig),i({elementIds:[t],properties:e=>_v(e,r,!0)})}),[a,i]),R=(0,u.useCallback)((e=>{let{elementId:t,resetProperties:n,elementType:r}=e;N(r,t,n),s({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Element properties have been reset","web-stories"),onAction:()=>{A.current(),(0,P.trackEvent)("quick_action",{name:`undo_${wg.RESET_ELEMENT.trackingEventName}`,element:r,isBackground:!0})},actionHelpText:PA})}),[N,s]),M=(0,u.useCallback)((e=>t=>n=>{n.preventDefault(),c({elementId:t||k?.id,highlight:e})}),[c,k]),L=(0,u.useMemo)((()=>{const e=(o?.[0]?.resource?.id?.toString()||"").startsWith("media/");return M(e?_g.MEDIA3P:_g.MEDIA)}),[M,o]),{handleFocusAnimationPanel:D,handleFocusLinkPanel:B,handleFocusPageBackground:F,handleFocusTextSetsPanel:H,handleFocusCaptionsPanel:j}=(0,u.useMemo)((()=>({handleFocusAnimationPanel:M(_g.ANIMATION),handleFocusLinkPanel:M(_g.LINK),handleFocusPageBackground:M(_g.PAGE_BACKGROUND),handleFocusTextSetsPanel:M(_g.TEXT_SET),handleFocusCaptionsPanel:M(_g.CAPTIONS)})),[M]),z=ks(),G=(0,u.useMemo)((()=>({tooltipPlacement:Vd.PLACEMENT.RIGHT,onMouseDown:O})),[O]),Y=(0,u.useMemo)((()=>[{Icon:NA,label:wg.CHANGE_BACKGROUND_COLOR.text,onClick:e=>{F(n?.id)(e),(0,P.trackEvent)("quick_action",{name:wg.CHANGE_BACKGROUND_COLOR.trackingEventName,element:"none"})},...G},{Icon:FA,label:wg.INSERT_BACKGROUND_MEDIA.text,onClick:e=>{L()(e),(0,P.trackEvent)("quick_action",{name:wg.INSERT_BACKGROUND_MEDIA.trackingEventName,element:"none"})},separator:"top",...G},{Icon:DA,label:wg.INSERT_TEXT.text,onClick:e=>{H()(e),z("text",js),(0,P.trackEvent)("quick_action",{name:wg.INSERT_TEXT.trackingEventName,element:"none"})},...G}]),[G,n,L,F,H,z]),Z=(0,u.useMemo)((()=>kA(k,a)),[k,a]),W=Z.length>0,V=(0,u.useMemo)((()=>{const e=[];return r>1&&e.push({Icon:MA,label:wg.ADD_ANIMATION.text,onClick:e=>{D()(e),(0,P.trackEvent)("quick_action",{name:wg.ADD_ANIMATION.trackingEventName,element:k?.type})},...G}),e.push({Icon:BA,label:wg.ADD_LINK.text,onClick:e=>{B()(e),(0,P.trackEvent)("quick_action",{name:wg.ADD_LINK.trackingEventName,element:k?.type})},...G}),W&&e.push({Icon:LA,label:wg.RESET_ELEMENT.text,onClick:()=>{R({elementId:k?.id,resetProperties:Z,elementType:k?.type}),(0,P.trackEvent)("quick_action",{name:wg.RESET_ELEMENT.trackingEventName,element:k?.type})},separator:"top",...G}),e}),[r,D,k?.id,k?.type,G,B,W,R,Z]),$=(0,u.useMemo)((()=>{const n=[];return e&&n.push({Icon:HA,label:wg.REPLACE_MEDIA.text,onClick:()=>{t(Ga.onReplaceForegroundMedia),(0,P.trackEvent)("quick_action",{name:wg.REPLACE_MEDIA.trackingEventName,element:k?.type})},wrapWithMediaPicker:!0,...G}),[...n,...V]}),[G,V,e,t,k?.type]),q=V,K=Sv(k,(e=>i({elementIds:[k?.id],properties:e}))),X=(0,u.useMemo)((()=>[{Icon:RA,label:wg.AUTO_STYLE_TEXT.text,onClick:()=>{K(),(0,P.trackEvent)("quick_action",{name:wg.AUTO_STYLE_TEXT.trackingEventName,element:k?.type})},...G},...V]),[K,V,G,k?.type]),Q=(0,u.useMemo)((()=>{const[e,t]=W?[$.slice(0,$.length-1),$.slice(-1)]:[$,[]];return[...e,{Icon:UA,label:wg.ADD_CAPTIONS.text,onClick:e=>{j()(e),(0,P.trackEvent)("quick_action",{name:wg.ADD_CAPTIONS.trackingEventName,element:k?.type})},...G},...t]}),[G,$,j,k?.type,W]),J=(0,u.useMemo)((()=>{const n=[{Icon:MA,label:wg.ADD_ANIMATION.text,onClick:e=>{D()(e),(0,P.trackEvent)("quick_action",{name:wg.ADD_ANIMATION.trackingEventName,element:k?.type,isBackground:!0})},...G}];e&&n.unshift({Icon:HA,label:wg.REPLACE_BACKGROUND_MEDIA.text,onClick:()=>{t(Ga.onReplaceBackgroundMedia),(0,P.trackEvent)("quick_action",{name:wg.REPLACE_BACKGROUND_MEDIA.trackingEventName,element:k?.type,isBackground:!0})},wrapWithMediaPicker:!0,...G});const r={Icon:LA,label:wg.RESET_ELEMENT.text,onClick:()=>{R({elementId:k?.id,resetProperties:Z,elementType:Mn.ELEMENT_TYPES.IMAGE}),(0,P.trackEvent)("quick_action",{name:wg.RESET_ELEMENT.trackingEventName,element:k?.type,isBackground:!0})},separator:"top",...G};return W?[...n,r]:n}),[G,t,R,D,e,Z,k,W]),ee=(0,u.useMemo)((()=>[{Icon:jA,label:(0,d.__)("Close","web-stories"),onClick:()=>{(0,P.trackEvent)("media_recording_mode_toggled",{status:"closed"}),m()},...G},{Icon:ZA,label:(0,d.__)("Options","web-stories"),onClick:()=>{(0,P.trackEvent)("media_recording_open_settings"),E()},disabled:!v,separator:"top",...G},y&&{Icon:b?WA:VA,label:b?(0,d.__)("Disable Audio","web-stories"):(0,d.__)("Enable Audio","web-stories"),onClick:()=>{(0,P.trackEvent)("media_recording_audio_toggled",{status:b?"muted":"unmuted"}),f()},disabled:!v||!h,...G},_&&{Icon:h?$A:qA,label:h?(0,d.__)("Disable Video","web-stories"):(0,d.__)("Enable Video","web-stories"),onClick:()=>{(0,P.trackEvent)("media_recording_video_toggled",{status:h?"off":"on"}),g()},disabled:!v||!b,...G},x&&{Icon:GA,label:(0,d.__)("Trim Video","web-stories"),onClick:()=>{(0,P.trackEvent)("media_recording_trim_start"),I()},disabled:!w||T||!h||S,...G}].filter(Boolean)),[G,v,y,_,h,b,w,T,S,f,g,m,E,I,x]);if(p)return ee;if(o.length>1)return[];const te=Boolean(n&&n?.resource),ne=0===o.length,re=o?.[0]?.isBackground;if(ne||re&&!te)return Y;if(re&&te){return"video"===k.type?[...J]:J}switch(o?.[0]?.type){case Mn.ELEMENT_TYPES.IMAGE:case Mn.ELEMENT_TYPES.GIF:return $;case Mn.ELEMENT_TYPES.SHAPE:return q;case Mn.ELEMENT_TYPES.TEXT:return X;case Mn.ELEMENT_TYPES.VIDEO:return Q;case Mn.ELEMENT_TYPES.STICKER:return V;default:return[]}},XA={OUTLINE:um,FLASH:dm};var QA=n(86954);const JA=54,ek=96,tk=32,nk=36,rk="VIDEO",ak="IMAGE",ok="TEXT",ik="SHAPE",lk="PAGE",sk="thumbnail-scrim",ck="thumbnail-show-hover-focus",dk=(0,d.__)("Loading","web-stories");function uk(){return uk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uk.apply(this,arguments)}const pk="loading-indicator",mk=p.default.span.withConfig({displayName:"loadingBar__AriaOnlyAlert",componentId:"sc-x990cz-0"})(aI.visuallyHidden),gk=(0,p.keyframes)(["0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}"]),fk=p.default.div.withConfig({displayName:"loadingBar__UploadingIndicator",componentId:"sc-x990cz-1"})(["height:4px;background:",";background-size:400% 400%;position:absolute;bottom:0px;border-radius:",";animation:"," 4s ease infinite;&.","{&.appear{width:0;}&.appear-done{width:100%;transition:1s ease-out;transition-property:width;}}"],(e=>{let{theme:t}=e;return t.colors.gradient.loading}),(e=>{let{theme:t}=e;return`0px 0px ${t.borders.radius.small} ${t.borders.radius.small}`}),gk,pk),LoadingBar=e=>{let{loadingMessage:t,...n}=e;const r=(0,u.useRef)();return c.createElement(c.Fragment,null,t&&c.createElement(mk,{role:"status"},t),c.createElement(fw.default,{nodeRef:r,in:!0,appear:!0,timeout:0,className:pk},c.createElement(fk,uk({ref:r},n))))},hk=p.default.button.withConfig({displayName:"thumbnail__Container",componentId:"sc-jiqsnn-0"})((e=>{let{theme:t,$isError:n,$isOverflow:r}=e;return(0,p.css)(["position:relative;display:flex;align-items:center;justify-content:center;width:","px;height:","px;padding:0;outline:none;border:none;border-radius:",";background-color:",";cursor:pointer;.","{display:none;}&:hover{.","{display:flex;}}"," &:focus,&:focus-within{.","{display:flex;}.","{background-color:",";border:1px solid ",";}}"],JA,ek,t.borders.radius.small,r?t.colors.interactiveBg.secondaryNormal:"transparent",ck,ck,n&&(0,p.css)([".","{border:1px solid ",";background-color:",";}&:hover .","{background-color:",";}"],sk,t.colors.border.negativeNormal,t.colors.opacity.black24,sk,t.colors.opacity.black24),ck,sk,t.colors.opacity.black64,t.colors.border[n?"negativeNormal":"focus"])}));hk.propTypes={$isError:za().bool};const bk=p.default.div.withConfig({displayName:"thumbnail__Background",componentId:"sc-jiqsnn-1"})((e=>{let{theme:t,$isShape:n,$isPage:r}=e;return(0,p.css)(["width:100%;height:100%;display:flex;border-radius:",";& > img,& > video{width:100%;height:100%;object-fit:cover;border-radius:",";}& > div{display:flex;height:100%;margin:0 auto;align-items:center;justify-content:center;align-self:center;color:",";}"," ",""],t.borders.radius.small,t.borders.radius.small,t.colors.fg.primary,n&&(0,p.css)(["& > div{width:","px;height:","px;& > div{width:100%;height:100%;}}"],nk,nk),r&&(0,p.css)([".pagePreviewOverrides{border-color:none;&::after{content:none;border:none;}}& > div > div{width:100%;}"]))}));bk.propTypes={$isPage:za().bool,$isShape:za().bool};const Ek=p.default.div.withConfig({displayName:"thumbnail__NestedIconContainer",componentId:"sc-jiqsnn-2"})((e=>{let{theme:t,$isError:n}=e;return(0,p.css)(["display:flex;position:absolute;top:0;width:100%;height:100%;align-items:center;justify-content:center;z-index:5;& > div{margin:auto;width:","px;}svg{width:100%;height:auto;","}"],tk,n&&(0,p.css)(["color:",";"],t.colors.fg.negative))}));Ek.propTypes={$isError:za().bool};const yk=p.default.div.withConfig({displayName:"thumbnail__Scrim",componentId:"sc-jiqsnn-3"})((e=>{let{theme:t,$showDefaultBackground:n}=e;return(0,p.css)(["position:absolute;box-sizing:border-box;top:0;width:100%;height:100%;border:1px solid transparent;border-radius:",";z-index:2;",";&:hover{background-color:",";}"],t.borders.radius.small,n&&(0,p.css)(["background-color:",";"],t.colors.opacity.black24),t.colors.opacity.black64)}));function _k(){return _k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_k.apply(this,arguments)}yk.propTypes={$showDefaultBackground:za().bool};const vk=[ik,ok],wk=e=>{let{displayBackground:t,isError:n,onClick:r,type:a,isLoading:o,loadingMessage:i=dk,children:l,...s}=e;return c.createElement(hk,_k({as:r?"button":"div",onClick:r,$isError:n},s),o&&c.createElement(LoadingBar,{loadingMessage:i}),!n&&!o&&l&&c.createElement(Ek,{className:ck},l),n&&c.createElement(Ek,{$isError:n},c.createElement(lb.default,null)),c.createElement(yk,{$showDefaultBackground:vk.indexOf(a)>-1,className:sk}),c.createElement(bk,{$isShape:a===ik,$isPage:a===lk},t))};function Tk(){return Tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tk.apply(this,arguments)}const Sk=e=>{let{overflowCount:t,...n}=e;return c.createElement(hk,Tk({$isOverflow:!0,as:"div"},n),c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM},(0,$e.default)(
/* translators: %s: number of thumbnails in overflow */
(0,d.__)("+ %s","web-stories"),t)))},LayerThumbnail=e=>{let{page:t}=e;const{LayerIcon:n}=(0,Mn.getDefinitionForType)(t?.type),{getProxiedUrl:r}=ii(),{isDefaultBackground:a}=t,o={element:t,getProxiedUrl:r,currentPageBackgroundColor:Qa((e=>{let{state:t}=e;return!a||t.currentPage?.backgroundColor}))};return"video"===t?.type&&(o.showVideoPreviewAsBackup=!0),c.createElement(n,o)},Ck={SINGLE_ISSUE:"single_issue",MULTIPLE_ISSUE:"multiple_issue"},Ik={SINGLE_WITH_THUMBNAIL:"single_with_thumbnail",SINGLE:"single",DEFAULT:"single",MULTIPLE_WITH_THUMBNAIL:"multiple_with_thumbnail",MULTIPLE_WITH_THUMBNAIL_WITH_CTA:"multiple_with_thumbnail_with_cta",MULTIPLE_WITH_THUMBNAIL_OVERFLOW:" multiple_with_thumbnail_overflow"},xk={[Ik.SINGLE]:"'title title title title' 'cta cta cta thumbnail' 'footer footer footer footer'",[Ik.SINGLE_WITH_THUMBNAIL]:"'title title title thumbnail' 'cta cta cta thumbnail' 'footer footer footer footer'",[Ik.MULTIPLE_WITH_THUMBNAIL]:"'title title title title' 'thumbnail thumbnail thumbnail thumbnail' 'footer footer footer footer'",[Ik.MULTIPLE_WITH_THUMBNAIL_WITH_CTA]:"'title title title title' 'thumbnail thumbnail thumbnail thumbnail' 'cta cta cta cta' 'footer footer footer footer'",[Ik.MULTIPLE_WITH_THUMBNAIL_WITH_CTA_OVERFLOW]:"'title title title title' 'thumbnail thumbnail thumbnail thumbnail' 'cta cta cta cta' 'footer footer footer footer'",[Ik.MULTIPLE_WITH_THUMBNAIL_OVERFLOW]:"'title title title title' 'thumbnail thumbnail thumbnail thumbnail' 'footer footer footer footer'"},{focusableOutlineCSS:Ak}=QA,kk=p.default.div.withConfig({displayName:"checklistCard__Wrapper",componentId:"sc-1nhlyv8-0"})(["width:","px;display:flex;border-radius:4px;background:",";margin:8px 0;"],272,(e=>{let{theme:t}=e;return t.colors.bg.secondary})),Ok=p.default.div.withConfig({displayName:"checklistCard__Container",componentId:"sc-1nhlyv8-1"})(["width:240px;display:grid;margin:16px;grid-gap:8px;grid-template-columns:52px 52px 52px 52px;",""],(e=>{let{gridVariant:t}=e;return(0,p.css)(["grid-template-areas:",";"],xk[t])}));Ok.propTypes={gridVariant:za().oneOf(Object.values(Ik))};const Pk=p.default.div.withConfig({displayName:"checklistCard__Title",componentId:"sc-1nhlyv8-2"})(["grid-area:title;&:is(button){display:flex;outline:none;margin:0;padding:0;background-color:transparent;border:none;text-align:left;cursor:pointer;border-radius:",";",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return Ak(t.colors.border.focus,t.colors.bg.secondary)})),Nk=p.default.div.withConfig({displayName:"checklistCard__Cta",componentId:"sc-1nhlyv8-3"})(["grid-area:cta;margin:0;"]),Rk=((0,p.default)(Ke.Text).attrs({forwardedAs:"label",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"checklistCard__CheckboxCtaLabel",componentId:"sc-1nhlyv8-4"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.linkNormal})),p.default.div.withConfig({displayName:"checklistCard__CheckboxCtaContainer",componentId:"sc-1nhlyv8-5"})(["display:flex;align-items:center;margin:14px 0 6px;label{margin:0 8px;}"]),(0,p.default)(Sk).withConfig({displayName:"checklistCard__StyledOverflowThumbnail",componentId:"sc-1nhlyv8-6"})(["width:52px;cursor:pointer;"])),Mk=p.default.div.withConfig({displayName:"checklistCard__Footer",componentId:"sc-1nhlyv8-7"})(["grid-area:footer;padding-top:8px;border-top:1px solid ",";& > *{color:",";}"],(e=>{let{theme:t}=e;return t.colors.divider.primary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Lk=p.default.div.withConfig({displayName:"checklistCard__CardListWrapper",componentId:"sc-1nhlyv8-8"})(["margin-left:16px;li{color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Dk=(0,p.default)(bb).withConfig({displayName:"checklistCard__StyledVideoOptimizationIcon",componentId:"sc-1nhlyv8-9"})(["rect{color:",";}path{color:",";}"],(e=>{let{theme:t}=e;return t.colors.opacity.black64}),(e=>{let{theme:t}=e;return t.colors.fg.primary}));function Bk(e){return""===(e.featuredMedia?.url?.trim()||"")}function Fk(e){let t=0;return e.elements.forEach((e=>{"text"===e.type&&(t+=(0,zr.stripHTML)(e.content).length)})),t}function Hk(e,t){return(e||[]).filter(t)}function Uk(e,t){return(e||[]).flatMap((e=>(e?.elements||[]).map((t=>({...t,pageId:e.id}))))).filter(t)}let jk;function zk(){return zk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zk.apply(this,arguments)}const Gk=p.default.button.withConfig({displayName:"pagepreview__Page",componentId:"sc-f0c590-0"})(["display:block;position:relative;cursor:",";padding:0;border:0;background-color:transparent;height:","px;width:","px;flex:none;outline:0;&::after{content:'';display:block;position:absolute;left:-4px;right:-4px;top:-4px;bottom:-4px;pointer-events:none;border-style:solid;border-width:1px;border-radius:8px;border-color:",";}",""],(e=>{let{isInteractive:t}=e;return t?"pointer":"default"}),(e=>{let{height:t}=e;return t}),(e=>{let{width:t}=e;return t}),(e=>{let{isActive:t,isInteractive:n,theme:r}=e;return n&&t?r.colors.border.defaultActive:"transparent"}),(e=>{let{isInteractive:t,isActive:n,theme:r}=e;return t&&(0,p.css)(["&:focus::after{border-color:",";}"],(0,qe.rgba)(r.colors.border.selection,n?1:.7))})),Yk=p.default.div.withConfig({displayName:"pagepreview__PageOffset",componentId:"sc-f0c590-1"})(["position:relative;top:","px;"],(e=>{let{$top:t}=e;return t})),Zk=p.default.div.withConfig({displayName:"pagepreview__PreviewWrapper",componentId:"sc-f0c590-2"})(["height:100%;position:relative;overflow:hidden;background-color:white;border-radius:4px;",""],(e=>{let{background:t}=e;return(0,ta.default)(t)})),Wk=p.default.img.withConfig({displayName:"pagepreview__Image",componentId:"sc-f0c590-3"})(["position:absolute;width:100%;left:0;top:50%;transform:translateY(-50%);"]);const Vk=function PagePreview(e){let{page:t,label:n,...r}=e;const{backgroundColor:a}=t,{width:o,isActive:i}=r,l=Math.round(o/ee.PAGE_RATIO),s=Math.round(o/ee.FULLBLEED_RATIO),d=(s-l)/2,{pageCanvas:p,generateDeferredPageCanvas:m}=yd((e=>{let{state:n,actions:r}=e;return{pageCanvas:n.pageCanvasMap[t.id],generateDeferredPageCanvas:r.generateDeferredPageCanvas}})),[g,f]=(0,u.useState)(),h=(0,u.useCallback)((e=>e&&f(e)),[]);(0,u.useEffect)((()=>{i||p||m([t.id,t])}),[t,p,i,m]);const b=(0,u.useMemo)((()=>p?.toDataURL("image/png")),[p]);return $m({node:g,eventData:Se.PAGE_PREVIEW_CLICK}),c.createElement(ps,{pageSize:{width:o,height:l}},c.createElement(I.TransformProvider,null,c.createElement(Gk,zk({ref:h,"aria-label":n,height:s},r),c.createElement(Zk,{background:a},b?c.createElement(Wk,{draggable:"false",src:b,alt:n,decoding:"async"}):c.createElement(Yk,{$top:d},t.elements.map((e=>c.createElement(qc,{key:e.id,previewMode:!0,element:e}))))))))},ThumbnailPagePreview=e=>{let{page:t}=e;return c.createElement(Vk,{page:t,width:JA,height:ek,as:"div",help:"checklist",isActive:!0,className:"pagePreviewOverrides"})};function $k(){return $k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$k.apply(this,arguments)}const qk=p.default.div.withConfig({displayName:"thumbnailWrapper__Wrapper",componentId:"sc-3oy0ss-0"})(["grid-area:thumbnail;transition:height ease-in-out 300ms;",""],(e=>{let{$isMultiple:t}=e;return t&&(0,p.css)(["display:grid;grid-gap:8px;grid-template-columns:repeat(4,52px);grid-template-rows:auto;"])})),Kk=(0,p.default)(m.Button).attrs({variant:g.BUTTON_VARIANTS.RECTANGLE,size:g.BUTTON_SIZES.SMALL,type:g.BUTTON_TYPES.TERTIARY}).withConfig({displayName:"thumbnailWrapper__StyledButton",componentId:"sc-3oy0ss-1"})(["grid-column:span 4;display:flex;align-items:center;justify-content:space-between;height:32px;width:100%;margin:4px 0;padding:0 64px;",";"],(e=>{let{theme:t}=e;return up.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.tertiary)})),Xk=(0,p.css)(["margin-right:0;"]),Qk=e=>{let{children:t,isExpanded:n,...r}=e;return c.createElement(Kk,$k({"aria-pressed":n},r),t||n?(0,d.__)("Collapse","web-stories"):(0,d.__)("Expand","web-stories"),c.createElement(eO,{duration:"100ms",isOpen:n}))},Jk=e=>{let{children:t,...n}=e;const[r,a]=(0,u.useState)(!1),o=Array.isArray(t)?t.length:1,i=o>0&&o>4,l=r||o<=1?t:(s=t).length>4?s.slice(0,3):s;var s;const d=()=>a((e=>!e));return c.createElement(qk,$k({$isMultiple:o>1},n),l,i&&c.createElement(c.Fragment,null,!r&&c.createElement(Rk,{overflowCount:o-3,onClick:d}),c.createElement(Qk,{isExpanded:r,onClick:d})))};var eO=(0,p.default)(zp.Disclosure).withConfig({displayName:"thumbnailWrapper___StyledDisclosure",componentId:"sc-3oy0ss-2"})(["",""],Xk);function tO(){return tO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tO.apply(this,arguments)}const nO=e=>{let{cardType:t=Ck.SINGLE_ISSUE,className:n,title:r,titleProps:a,footer:o,cta:i,thumbnails:l}=e,s=0;l&&(s=Array.isArray(l)?l.length:1);const d=(e=>{let{cardType:t,thumbnailCount:n,hasCta:r}=e;return t===Ck.SINGLE_ISSUE?n>0?Ik.SINGLE_WITH_THUMBNAIL:Ik.SINGLE:t===Ck.MULTIPLE_ISSUE&&n?r?n<=4?Ik.MULTIPLE_WITH_THUMBNAIL_WITH_CTA:Ik.MULTIPLE_WITH_THUMBNAIL_WITH_CTA_OVERFLOW:n<=4?Ik.MULTIPLE_WITH_THUMBNAIL:Ik.MULTIPLE_WITH_THUMBNAIL_OVERFLOW:Ik.DEFAULT})({cardType:t,thumbnailCount:s,hasCta:Boolean(i)});return c.createElement(kk,{className:n},c.createElement(Ok,{gridVariant:d},c.createElement(Pk,tO({as:a?.onClick?"button":"div"},a),c.createElement(sp.Headline,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL,as:"h2"},r)),c.createElement(Jk,null,l),c.createElement(Nk,null,i),c.createElement(Mk,null,o)))};function rO(){return rO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rO.apply(this,arguments)}const DefaultCtaButton=e=>{let{children:t,...n}=e;return c.createElement(m.Button,rO({size:g.BUTTON_SIZES.SMALL,type:g.BUTTON_TYPES.SECONDARY},n),t)};function aO(){return aO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aO.apply(this,arguments)}const DefaultFooterText=e=>{let{children:t,...n}=e;return c.createElement(Ke.Text,aO({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},n),t)};const oO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.pages})),n=gs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),r=(0,u.useMemo)((()=>n.height>0&&Uk(t,(e=>function(e,t){return!(!["text","image","shape","gif","video"].includes(e.type)||!e.link?.url?.length)&&e.width*e.height/(t.width*t.height)*100>80}(e,n)))),[t,n]),a=mm((e=>{let{setHighlights:t}=e;return t})),o=(0,u.useCallback)(((e,t)=>a({elementId:e,pageId:t})),[a]),i=r.length>0;Wu("ElementLinkTappableRegionTooBig",i);const{title:l,footer:s}=Iu.linkTappableRegionTooBig,p=(r||[]).map((e=>c.createElement(wk,{key:e.id,onClick:()=>o(e.id,e.pageId),type:ok,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending link","web-stories")})));return i&&e&&c.createElement(nO,{title:l,cardType:r.length>1?Ck.MULTIPLE_ISSUE:Ck.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,s),thumbnails:p})};function iO(e){return!(!["text","image","shape","gif","video"].includes(e.type)||!e.link?.url?.length)&&(e.width<48||e.height<48)}const lO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>Uk(t,iO)),[t]),r=mm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({elementId:e,pageId:t})),[r]),o=n.map((e=>c.createElement(wk,{key:e.id,onClick:()=>a(e.id,e.pageId),type:ok,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending link","web-stories")}))),i=n.length>0;Wu("ElementLinkTappableRegionTooSmall",i);const{title:l,footer:s}=Iu.linkTappableRegionTooSmall;return i&&e&&c.createElement(nO,{title:l,cardType:n.length>1?Ck.MULTIPLE_ISSUE:Ck.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,s),thumbnails:o})};const sO=()=>{const e=Qp(),{updatePageProperties:t,pageId:n,pageAnimations:r}=Qa((e=>{let{actions:{updatePageProperties:t},state:{pages:n}}=e;const r=n?.at(0);return{updatePageProperties:t,pageId:r?.id,pageAnimations:r?.animations}})),a=(0,u.useCallback)((()=>{t({pageId:n,properties:{animations:[]}})}),[t,n]),o=Boolean(r?.length);const i=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_checklist_cover_animations")}),[]),{title:l,footer:s}=xu.firstPageAnimation;return Wu("FirstPageAnimation",o),o&&e?c.createElement(nO,{title:l,cta:c.createElement(DefaultCtaButton,{"aria-label":(0,d.__)("Remove Animations","web-stories"),onClick:a},(0,d.__)("Remove Animations","web-stories")),footer:c.createElement(c.Fragment,null,c.createElement(DefaultFooterText,null,s),c.createElement(DefaultFooterText,{as:"span"},c.createElement(hu.Link,{target:"_blank",rel:"noreferrer",onClick:i,href:"https://wp.stories.google/docs/how-to/animations/",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Learn more","web-stories"))))}):null};function cO(e){return["gif","image"].includes(e.type)&&!e.alt?.length&&!e.resource?.alt?.length}const dO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>Uk(t,cO)),[t]),r=mm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e,highlight:_g.ASSISTIVE_TEXT})),[r]),{footer:o,title:i}=Iu.imagesMissingAltText,l=n.length>0;Wu("ImageElementMissingAlt",l);const s=n.map((e=>c.createElement(wk,{key:e.id,onClick:()=>a(e.id,e.pageId),type:ak,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending video","web-stories")})));return l&&e&&c.createElement(nO,{title:i,cardType:n.length>1?Ck.MULTIPLE_ISSUE:Ck.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,o),thumbnails:s})};var uO=n(3605);const pO=p.default.ul.withConfig({displayName:"list__List",componentId:"sc-15nukup-0"})((e=>{let{size:t=Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,theme:n}=e;return(0,p.css)(["list-style-type:disc;list-style-position:outside;margin:0;padding:0;li{",";",";padding:0;margin:0;}"],uO.defaultTypographyStyle,dp.expandPresetStyles({preset:n.typography.presets.paragraph[t],theme:n}))}));function mO(e){if(!["image","gif"].includes(e.type))return!1;const t=(e.scale||100)/100;return e.resource?.height<e.height*t*2||e.resource?.width<e.width*t*2}pO.propTypes={size:za().oneOf(Xe.THEME_CONSTANTS.TYPOGRAPHY.TEXT_SIZES)};const gO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>Uk(t,mO)),[t]),r=mm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e})),[r]),{footer:o,title:i}=xu.imageResolutionTooLow,l=n.length>0;Wu("ImageElementResolution",l);const s=n.map((e=>c.createElement(wk,{key:e.id,onClick:()=>a(e.id,e.pageId),type:ak,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending image","web-stories")})));return l&&e&&c.createElement(nO,{title:i,cardType:n.length>1?Ck.MULTIPLE_ISSUE:Ck.SINGLE_ISSUE,footer:c.createElement(Lk,null,c.createElement(pO,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o)),thumbnails:s})};var fO=n(70333),hO=n(7868);function bO(e,t){return e>=.3333333333333333*t}function EO(e,t,n){const{pageSize:r}=n,a=(0,aa.getBox)(e,r?.width,r?.height),o=(0,fO.default)([a]),i=o.width*o.height,l=[...t].map(((e,t)=>{const a=(0,aa.getBox)(e,r?.width,r?.height),i=(0,fO.default)([a]),l=function(e,t){const n=Math.min(e.endX,t.endX)-Math.max(e.startX,t.startX),r=Math.min(e.endY,t.endY)-Math.max(e.startY,t.startY);return n>=0&&r>=0?n*r:0}(o,i);return{element:e.isBackground||e.isDefaultBackground?{...e,backgroundColor:n?.backgroundColor}:e,area:l,index:t}})).reverse();let s=i;const c=[];for(const e of l){if(!bO(s,i))break;bO(e.area,i)&&c.push(e.element),s-=e.area}return c}function yO(e){let{background:t,text:n,page:r}=e;const{pageSize:a}=r,o=(a?.width/ee.FULLBLEED_RATIO-a?.width/ee.PAGE_RATIO)/2,i=(0,aa.getBox)(n,a?.width,a?.height),l=(0,fO.default)([i]),{resource:s,scale:c,focalX:d,focalY:u}=t,p=(0,aa.getBox)(t,a?.width,a?.height),{width:m,height:g}=p,f=(0,hO.default)(s,m,g,c,d,u);return async function(e){let{bgImage:t,bgBox:n,overlapBox:r}=e;function a(e){return new Promise(((a,o)=>{try{const o=document.createElement("canvas");o.width=t.width,o.height=t.height;const i=o.getContext("2d");if(t.rotationAngle){const e=t.offsetX+n.width/2,r=t.offsetY+n.height/2;i.translate(e,r),i.rotate(t.rotationAngle*_O),i.translate(-e,-r)}let l=0,s=0;const{flip:c}=t;(c.vertical||c.horizontal)&&(l=c.horizontal?-1*t.width:0,s=c.vertical?-1*t.height:0,i.scale(c.horizontal?-1:1,c.vertical?-1:1)),i.drawImage(e,l,s,t.width,t.height);a(i.getImageData(r.x,r.y,r.width,r.height))}catch(e){o(e)}}))}const o=await(0,K.default)({src:t.src,width:t.width,height:t.height}),i=await a(o),l=document.createElement("canvas");l.width=r.width,l.height=r.height;l.getContext("2d").putImageData(i,0,0);const s=await oi(l.toDataURL(),l.width,l.height),{color:{r:c,g:d,b:u}}=(0,jw.default)(s);return{r:c,g:d,b:u}}({bgImage:{offsetX:f.offsetX,offsetY:f.offsetY,src:t.resource.src,width:f.width,height:f.height,rotationAngle:t.isBackground?void 0:t.rotationAngle,flip:t.flip},bgBox:p,overlapBox:{x:t.isBackground?f.offsetX+Math.abs(l.startX):f.offsetX+Math.abs(l.startX)-p.x,y:t.isBackground?f.offsetY+Math.abs(l.startY+o):f.offsetY+Math.abs(l.startY+o)-(p.y+o),width:l.width,height:l.height}}).catch((()=>{}))}const _O=Math.PI/180;function vO(e){const t=function(e){return jk||(jk=document.createElement("div")),jk.innerHTML=e,Array.prototype.slice.call(jk.getElementsByTagName("span"))}(e.content),n=t.map((e=>e.style?.color)).filter(Boolean),r=0===n.length&&0!==t.length,a=0!==e.content.length&&0===t.length;return(r||a)&&n.push("rgb(0, 0, 0)"),n}function wO(e){let{background:t}=e;return t?.backgroundColor?.color}function TO(e){switch(e.type){case"image":return yO;case"shape":return wO;default:return()=>{}}}async function SO(e,t){const n=[];(e||[]).forEach((e=>{const r=async function(e){const t=[];e.elements.forEach(((n,r)=>{if("text"===n.type&&"NONE"===n.backgroundTextMode){const a=vO(n),o=e.elements.slice(0,r),i=EO(n,o,e);for(const r of i){const o=TO(r)({background:r,text:n,page:e}),i=e=>e&&{backgroundColor:e,textStyleColors:a,fontSize:n.fontSize,id:n.id,isBackgroundElement:r.isBackground},l=o instanceof Promise?o.then(i):i(o);t.push(l)}}}));const n=await Promise.all(t);return n.map((e=>function(){let{backgroundColor:e,textStyleColors:t,fontSize:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!t||!e)&&t.some((t=>!!t&&!ld(id(t),od(e),n).WCAG_AA))}(e)&&{id:e.id,isBackground:e.isBackgroundElement})).filter((e=>{let{id:t}=e;return t}))}({...e,pageSize:t});r instanceof Promise?n.push(r.then((t=>({result:t,page:e})))):n.push(r)}));return(await Promise.all(n)).filter((e=>e.result.some((e=>{let{id:t}=e;return t})))).map((e=>e))}const CO=()=>{const e=Qp(),[t,n]=(0,u.useState)([]),r=Qa((e=>{let{state:t}=e;return t?.pages})),a=gs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}}));(0,u.useEffect)((()=>{let e=!1;return SO(r,a).then((t=>{if(e)return;const r=t.map((e=>{let{page:t}=e;return t}));n(r)})).catch((()=>{})),()=>{e=!0}}),[r,a]);const o=mm((e=>{let{setHighlights:t}=e;return t})),i=(0,u.useCallback)((e=>o({pageId:e})),[o]),l=t.length>0;Wu("PageBackgroundTextLowContrast",l);const{title:s,footer:p}=Iu.lowContrast;return l&&e?c.createElement(nO,{title:s,cardType:t.length>1?Ck.MULTIPLE_ISSUE:Ck.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,p),thumbnails:t.map((e=>c.createElement(wk,{key:e.id,onClick:()=>i(e.id),type:lk,displayBackground:c.createElement(ThumbnailPagePreview,{page:e}),"aria-label":(0,d.__)("Go to offending page","web-stories")})))}):null};function IO(e){return Fk(e)<100}const xO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>Hk(t,IO)),[t]),r=mm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)((e=>r({pageId:e})),[r]),{footer:o,title:i}=xu.tooLittlePageText,l=n.length>0;Wu("PageTooLittleText",l);const s=n.map((e=>c.createElement(wk,{key:e.id,onClick:()=>a(e.id),type:lk,displayBackground:c.createElement(ThumbnailPagePreview,{page:e}),"aria-label":(0,d.__)("Go to offending page","web-stories")})));return l&&e?c.createElement(nO,{title:i,cardType:n.length>1?Ck.MULTIPLE_ISSUE:Ck.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,o),thumbnails:s}):null};function AO(e){return e.elements.filter((e=>Boolean(e.link?.url?.length))).length>3}const kO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>Hk(t,AO)),[t]),r=mm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)((e=>r({pageId:e})),[r]),{footer:o,title:i}=xu.tooManyLinksOnPage,l=n.length>0;Wu("PageTooManyLinks",l);const s=n.map((e=>c.createElement(wk,{key:e.id,onClick:()=>a(e.id),type:lk,displayBackground:c.createElement(ThumbnailPagePreview,{page:e}),"aria-label":(0,d.__)("Go to offending page","web-stories")})));return l&&e&&c.createElement(nO,{title:i,cardType:n.length>1?Ck.MULTIPLE_ISSUE:Ck.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,o),thumbnails:s})};function OO(e){return Fk(e)>200}const PO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>Hk(t,OO)),[t]),r=mm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)((e=>{let{pageId:t,elements:n}=e;return r({pageId:t,elements:n})}),[r]),{footer:o,title:i}=xu.tooMuchPageText,l=n.length>0;Wu("PageTooMuchText",l);const s=n.map((e=>c.createElement(wk,{key:e.id,onClick:()=>a({pageId:e.id,elements:e.elements.filter((e=>{let{type:t}=e;return"text"===t}))}),type:lk,displayBackground:c.createElement(ThumbnailPagePreview,{page:e}),"aria-label":(0,d.__)("Go to offending page","web-stories")})));return l&&e&&c.createElement(nO,{title:i,cardType:n.length>1?Ck.MULTIPLE_ISSUE:Ck.SINGLE_ISSUE,footer:c.createElement(Lk,null,c.createElement(pO,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o)),thumbnails:s})};const NO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.story?.publisherLogo})),n=mm((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:_g.PUBLISHER_LOGO})),[n]),a=function(e){return!e?.id}(t);Wu("PublisherLogoMissing",a);const{footer:o,title:i}=Au.noPublisherLogo;return a&&e&&c.createElement(nO,{title:i,titleProps:{onClick:r},footer:c.createElement(Lk,null,c.createElement(pO,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o))})};const RO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.story?.publisherLogo})),n=mm((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:_g.PUBLISHER_LOGO})),[n]),a=function(e){return Boolean(e?.id)&&(e?.height<vu||e?.width<vu)}(t);Wu("PublisherLogoSize",a);const{footer:o,title:i}=Au.logoTooSmall;return a&&e&&c.createElement(nO,{title:i,titleProps:{onClick:r},footer:c.createElement(Lk,null,c.createElement(pO,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o))})};const MO=()=>{const e=(0,u.useRef)(),{isSaving:t,link:n,status:r}=Qa((e=>{let{state:t}=e;return{isSaving:t.meta.isSaving,link:t.story.link,status:t.story.status}})),[a,o]=(0,u.useState)(!1);(0,u.useEffect)((()=>{let a=!0;return t||async function(e){let{link:t,status:n}=e;if(!t||!["publish","future"].includes(n))return!1;try{const e=await fetch(t),n=await e.text();await window.amp.validator.init();const r=window.amp.validator.validateString(n),{status:a,errors:o}=r;return"FAIL"===a&&o.filter((e=>{let{severity:t}=e;return"ERROR"===t})).filter((e=>{let{code:t,params:n}=e;return!("MISSING_URL"===t&&n?.[0].startsWith("poster")||"MISSING_URL"===t&&n?.[0].startsWith("publisher-logo")||"INVALID_URL_PROTOCOL"===t&&n?.[0].startsWith("src"))})).length>0}catch{return!1}}({link:n,status:r}).then((t=>{a&&(o(t),t&&!e?.current&&(e.current=!0))})),()=>{a=!1}}),[n,r,t]),(0,u.useEffect)((()=>{a&&e?.current&&(0,P.trackEvent)("amp_validation_errors_found")}),[a]),Wu("StoryHasAmpErrors",a);const{footer:i,title:l}=Au.ampValidation;return a&&c.createElement(nO,{title:l,footer:c.createElement(DefaultFooterText,null,i)})};const LO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.story?.excerpt})),n=mm((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:_g.EXCERPT})),[n]),{title:a,footer:o}=Au.storyMissingDescription,i=function(e){return!e?.length}(t);return Wu("StoryMissingExcerpt",i),i&&e?c.createElement(nO,{title:a,titleProps:{onClick:r},footer:c.createElement(DefaultFooterText,null,o)}):null};const DO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.story?.title})),n=mm((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:_g.STORY_TITLE})),[n]),a=function(e){return"string"!=typeof e||""===e?.trim()}(t);Wu("StoryMissingTitle",a);const{footer:o,title:i}=Au.storyMissingTitle;return a&&e?c.createElement(nO,{title:i,titleProps:{onClick:r},footer:c.createElement(Lk,null,c.createElement(pO,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o))}):null};const BO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.pages?.length})),{hasTooFewPages:n,hasTooManyPages:r}=(0,u.useMemo)((()=>function(e){return{hasTooFewPages:e<4,hasTooManyPages:e>30}}(t)),[t]),{storyTooShort:a,storyTooLong:o}=xu,i=n&&a||r&&o||{},l=n||r;return Wu("StoryPagesCount",l),l&&e&&c.createElement(nO,{title:i.title,footer:c.createElement(DefaultFooterText,null,i.title)})};function StoryPosterAttached(){const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.story?.featuredMedia})),n=mm((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:_g.POSTER})),[n]),a=(0,u.useMemo)((()=>function(e){return"string"!=typeof e?.url||Bk({featuredMedia:e})}(t)),[t]);Wu("StoryPosterAttached",a);const{title:o,footer:i}=Au.storyMissingPoster;return a&&e?c.createElement(nO,{title:o,titleProps:{onClick:r},footer:c.createElement(Lk,null,c.createElement(pO,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},i))}):null}const FO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.story?.featuredMedia})),n=mm((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:_g.POSTER})),[n]),{footer:a,title:o}=Au.storyPosterSize,i=(0,u.useMemo)((()=>function(e){return!Bk({featuredMedia:e})&&(e?.height<_u||e?.width<yu||!(Math.abs(e.width/e.height-3/4)<=.001))}(t)),[t]);return Wu("StoryPosterSize",i),i&&e&&c.createElement(nO,{title:o,titleProps:{onClick:r},footer:c.createElement(Lk,null,c.createElement(pO,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},a))})};const HO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.story?.title})),n=mm((e=>{let{setHighlights:t}=e;return t})),r=(0,u.useCallback)((()=>n({highlight:_g.STORY_TITLE})),[n]),a=function(e){return e?.length>bu}(t);Wu("StoryTitleLength",a);const{title:o,footer:i}=Au.storyTitleTooLong;return a&&e&&c.createElement(nO,{title:o,footer:c.createElement(DefaultFooterText,null,i),titleProps:{onClick:r}})};function UO(e){return"text"===e.type&&e.fontSize&&e.fontSize<12}const jO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>Uk(t,UO)),[t]),r=mm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({elementId:e,pageId:t})),[r]),{footer:o,title:i}=Iu.fontSizeTooSmall,l=n.length>0;Wu("TextElementFontSizeTooSmall",l);const s=n.map((e=>c.createElement(wk,{key:e.id,onClick:()=>a(e.id,e.pageId),type:ok,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending text element","web-stories")})));return l&&e&&c.createElement(nO,{title:i,cardType:n.length>1?Ck.MULTIPLE_ISSUE:Ck.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,o),thumbnails:s})};function zO(){return zO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zO.apply(this,arguments)}const GO=function(e){let{elements:t,footer:n,onThumbnailClick:r,...a}=e;return c.createElement(nO,zO({},a,{cardType:t.length>1?Ck.MULTIPLE_ISSUE:Ck.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,n),thumbnails:t.map((e=>c.createElement(wk,{key:e.id,onClick:()=>r(e.id,e.pageId),type:rk,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending video","web-stories")})))}))};function YO(e){return"video"===e.type&&!e?.resource?.isMuted&&!e.tracks?.length}const ZO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>Uk(t,YO)),[t]),r=mm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e,highlight:_g.CAPTIONS})),[r]),{footer:o,title:i}=Iu.videoMissingCaptions,l=n.length>0;return Wu("VideoElementMissingCaptions",l),l&&e&&c.createElement(GO,{title:i,elements:n,footer:o,onThumbnailClick:a})};function WO(e){return"video"===e.type&&!e.alt?.length&&!e.resource?.alt?.length}const VO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>Uk(t,WO)),[t]),r=mm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e,highlight:_g.ASSISTIVE_TEXT})),[r]),{footer:o,title:i}=Iu.videoMissingTitle,l=n.length>0;return Wu("VideoElementMissingDescription",l),l&&e&&c.createElement(GO,{title:i,elements:n,footer:o,onThumbnailClick:a})};function $O(e){return"video"===e.type&&!e.resource?.poster&&!e.poster}const qO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>Uk(t,$O)),[t]),r=mm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({pageId:t,elementId:e,highlight:_g.VIDEO_A11Y_POSTER})),[r]),{footer:o,title:i}=Au.videoMissingPoster,l=n.length>0;return Wu("VideoElementMissingPoster",l),l&&e&&c.createElement(GO,{title:i,elements:n,footer:o,onThumbnailClick:a})};function KO(e){if("video"!==e.type)return!1;return e.resource?.height<=480&&e.resource?.width<=852}const XO=()=>{const e=Qp(),t=Qa((e=>{let{state:t}=e;return t?.pages})),n=(0,u.useMemo)((()=>Uk(t,KO)),[t]),r=mm((e=>{let{setHighlights:t}=e;return t})),a=(0,u.useCallback)(((e,t)=>r({elementId:e,pageId:t})),[r]),{footer:o,title:i}=xu.videoResolutionTooLow,l=n.length>0;return Wu("VideoElementResolution",l),l&&e&&c.createElement(GO,{title:i,elements:n,footer:o,onThumbnailClick:a})},QO=(0,p.default)(m.Button).withConfig({displayName:"videoOptimization__OptimizeButton",componentId:"sc-1dz2s9g-0"})(["margin-top:4px;"]);function JO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{resource:t}=e;if(!t)return!1;const{isOptimized:n,height:r=0,width:a=0}=t;if("video"!==e.type||n)return!1;const o=r*a,i=o>_e*ye;return i}const eP={},tP="cancelled",nP="uploaded",rP="uploading";function aP(e,t){switch(t.type){case tP:return{...e,[t.element.resource.id]:tP};case nP:return{...e,[t.element.resource.id]:nP};case rP:return{...e,[t.element.resource.id]:rP};default:throw new Error}}const BulkVideoOptimization=()=>{const e=Qp(),[t,n]=(0,u.useReducer)(aP,eP),r=Qa((e=>{let{state:t}=e;return t?.pages})),{optimizeVideo:a,isNewResourceTranscoding:o,isCurrentResourceTranscoding:i,canTranscodeResource:l}=Yl((e=>{let{actions:{optimizeVideo:t},state:{isNewResourceTranscoding:n,canTranscodeResource:r,isCurrentResourceTranscoding:a}}=e;return{optimizeVideo:t,isNewResourceTranscoding:n,canTranscodeResource:r,isCurrentResourceTranscoding:a}})),s=(0,u.useMemo)((()=>Uk(r,JO)),[r]).filter(((e,t,n)=>n.findIndex((t=>t.resource.id===e.resource.id))===t)),p=mm((e=>{let{setHighlights:t}=e;return t})),m=(0,u.useCallback)((async e=>{if(l(e.resource)&&t[e.resource.id]!==rP){n({type:rP,element:e});try{await a({resource:e.resource})}catch(t){return void n({type:tP,element:e})}n({type:nP,element:e})}}),[l,a,t]),f=(0,u.useCallback)((()=>{const e=s.filter((e=>{let{resource:t}=e;return!o(t?.id)&&!i(t?.id)}));return new Promise((t=>{e.map((e=>async()=>{await m(e)})).reduce(((e,t)=>e.then(t)),Promise.resolve()).then(t)}))}),[o,i,m,s]),h=(0,u.useCallback)((async()=>{await f()}),[f]),b=(0,u.useCallback)((e=>async()=>{p({pageId:e.pageId,elementId:e.id}),await m(e)}),[m,p]),{footer:E,title:y}=Au.videoNotOptimized,_=(0,u.useMemo)((()=>Object.values(t).filter((e=>e===rP))),[t]),v=(0,u.useMemo)((()=>_.length>0||s.some((e=>o(e.resource.id)||i(e.resource.id)))),[_,s,o,i]),w=s.length>0;Wu("VideoOptimization",w);let T=1===s.length?(0,d.__)("Optimize video","web-stories"):(0,d.__)("Optimize all videos","web-stories");if(v){const e=_.length+s.filter((e=>o(e.resource.id)||i(e.resource.id))).length;T=(0,$e.default)(
/* translators: 1: number of videos currently transcoding. 2: total number of videos in list. */
(0,d._n)("Optimizing %1$d of %2$d","Optimizing %1$d of %2$d",e,"web-stories"),e,s.length)}return w&&e&&c.createElement(nO,{cta:c.createElement(QO,{type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,onClick:h,disabled:v},T),title:y,cardType:s.length>1?Ck.MULTIPLE_ISSUE:Ck.SINGLE_ISSUE,footer:c.createElement(DefaultFooterText,null,E),thumbnails:s.map((e=>c.createElement(wk,{key:e.resource.id,onClick:b(e),isLoading:o(e.resource.id)||i(e.resource.id),type:rk,displayBackground:c.createElement(LayerThumbnail,{page:e}),"aria-label":(0,d.__)("Go to offending video","web-stories"),isError:t[e.resource.id]===tP},c.createElement(Tooltip,{title:t[e.resource.id]===rP||o(e.resource.id)||i(e.resource.id)?(0,d.__)("Video optimization in progress","web-stories"):(0,d.__)("Optimize","web-stories")},c.createElement(Dk,null)))))})},oP=()=>{const{isTranscodingEnabled:e}=lo();return e?c.createElement(BulkVideoOptimization,null):null},iP=e=>{let{checkpoint:t,...n}=e;return t===Pu?c.createElement(lb.default,n):null},lP="excerpt",sP="title",cP="44px";function dP(){return dP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dP.apply(this,arguments)}const uP=(0,p.default)(m.Button).withConfig({displayName:"buttonWithChecklistWarning__Button",componentId:"sc-jm08jq-0"})(["padding:4px 6px;height:32px;svg{width:24px;height:auto;}"]),pP=(0,u.forwardRef)((function InnerButton(e,t){let{text:n,checkpoint:r,hasHighPriorityIssues:a=!1,onClick:o,...i}=e;return c.createElement(uP,dP({ref:t,variant:g.BUTTON_VARIANTS.RECTANGLE,type:g.BUTTON_TYPES.PRIMARY,size:g.BUTTON_SIZES.SMALL,onClick:e=>{e.currentTarget.blur(),o?.(e)}},i),n,a&&c.createElement(iP,{checkpoint:r}))})),mP=(0,u.forwardRef)((function ButtonWithChecklistWarning(e,t){let{disabled:n,hasFutureDate:r,...a}=e;const o=Oc(),{isSaving:i,canPublish:l,status:s}=Qa((e=>{let{state:t}=e;return{isSaving:t.meta?.isSaving,status:t.story.status,canPublish:Boolean(t?.capabilities?.publish)}})),{checkpoint:p,hasHighPriorityIssues:m}=zu((e=>{let{state:{checkpoint:t,hasHighPriorityIssues:n}}=e;return{checkpoint:t,hasHighPriorityIssues:n}})),g={[Pu]:m?(0,d.__)("Make updates before publishing to improve discoverability and performance on search engines","web-stories"):"",[Ou]:(0,d.__)("Review checklist to improve performance before publishing","web-stories"),[ku]:""},f=(0,d.__)("Saving is disabled due to media currently being uploaded.","web-stories"),h=(0,d.__)("Submit your work for review, and an Editor will be able to approve it for you.","web-stories");let b=o?f:g[p];l||(b=h);const E=(0,u.useMemo)((()=>r&&"private"!==s?(0,d.__)("Schedule","web-stories"):(0,d.__)("Publish","web-stories")),[r,s]),y=l?E:(0,d.__)("Submit for review","web-stories");return c.createElement(Tooltip,{title:b,popupZIndexOverride:10,hasTail:!0,placement:Vd.PLACEMENT.BOTTOM_END},c.createElement(pP,dP({ref:t,text:y,disabled:n||i||o,checkpoint:p,hasHighPriorityIssues:m},a)))})),gP=p.default.header.withConfig({displayName:"header___Header",componentId:"sc-yxsju1-0"})(["width:100%;height:",";display:flex;align-items:center;margin-bottom:",";background-color:",";border-top-left-radius:",";border-top-right-radius:",";"],cP,"1px",(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.borders.radius.medium})),fP=(0,p.default)(m.Button).withConfig({displayName:"header__CloseButton",componentId:"sc-yxsju1-1"})(["margin:6px auto 5px 6px;"]),hP=p.default.div.withConfig({displayName:"header__PublishButtonWrapper",componentId:"sc-yxsju1-2"})(["margin:6px 6px 5px auto;"]),bP=e=>{let{onClose:t,onPublish:n,publishButtonDisabled:r,hasFutureDate:a}=e;return c.createElement(gP,null,c.createElement(fP,{variant:g.BUTTON_VARIANTS.SQUARE,size:g.BUTTON_SIZES.SMALL,type:g.BUTTON_TYPES.TERTIARY,onClick:t,"aria-label":(0,d.__)("Close","web-stories")},c.createElement(cp.default,null)),c.createElement(sp.Headline,{as:"h2",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL},(0,d.__)("Story Details","web-stories")),c.createElement(hP,null,c.createElement(mP,{onClick:n,disabled:r,hasFutureDate:a})))},EP=e=>{let{currentSlug:t,currentTitle:n,updateStory:r}=e;if(!t){r({properties:{slug:encodeURIComponent(Go(n))}})}},yP=(0,u.createContext)({state:{},actions:{}});function _P(){return _P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_P.apply(this,arguments)}const vP=999999999,wP=p.default.section.withConfig({displayName:"panel__Wrapper",componentId:"sc-1vyy7rt-0"})(["display:flex;flex-direction:column;position:relative;border-bottom:1px solid ",";",""],(e=>{let{theme:t}=e;return t.colors.divider.tertiary}),(e=>{let{noBorder:t}=e;return t&&"border-bottom: none;"}));const TP=function Panel(e){let{name:t,children:n,resizable:r=!1,showDragHandle:a,showFocusStyles:o,canCollapse:i=!0,collapsedByDefault:l=!0,initialHeight:s=null,maxHeight:d=vP,ariaLabel:p=null,ariaHidden:m=!1,isPersistable:g=!0,...f}=e;const h=0===d?vP:d,{selectedElementIds:b}=Qa((e=>{let{state:{selectedElementIds:t}}=e;return{selectedElementIds:t}})),E=(0,u.useMemo)((()=>g?Jo.getItemByKey(`${Qo.PANEL}:${t}`):null),[t,g]),[y,_]=(0,u.useState)((()=>!!g&&(E?.isCollapsed??l))),[v,w]=(0,u.useState)(Math.min(E?.expandToHeight,h)||s),[T,S]=(0,u.useState)(Math.min(E?.height,h)||s),[C,I]=(0,u.useState)(!1),[x,A]=(0,u.useState)(!1),k=(0,u.useCallback)((e=>{S(Math.min(e,h))}),[h]),O=(0,u.useCallback)((e=>{w(Math.min(e,h))}),[h]),N=(0,u.useCallback)((()=>I(!0)),[]),R=(0,u.useCallback)((()=>{i&&(_(!0),A(!0),r&&k(0))}),[r,i,k]),M=(0,u.useCallback)((()=>{i&&(R(),(0,P.trackEvent)("panel_toggled",{name:t,status:"collapsed"}))}),[i,R,t]),L=(0,u.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_(!1),A(!0),e&&r&&k(v)}),[r,v,k]),D=(0,u.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];L(e),(0,P.trackEvent)("panel_toggled",{name:t,status:"expanded"})}),[L,t]);(0,u.useEffect)((()=>{g||L(!0)}),[L,g,b]),(0,u.useEffect)((()=>{r&&T<=10&&!y&&R()}),[R,T,r,y]),(0,u.useEffect)((()=>{x||E||!r||(k(s),O(s))}),[x,s,r,E,t,O,k]),(0,u.useEffect)((()=>{h<T&&k(h),h<v&&O(h)}),[v,T,h,k,O]),(0,u.useEffect)((()=>{g&&x&&Jo.setItemByKey(`${Qo.PANEL}:${t}`,{height:T,isCollapsed:y,expandToHeight:v})}),[t,y,T,v,x,g]);const B=(0,u.useCallback)((e=>{r&&(A(!0),k(Math.min(e(T),h)),y&&e(T)>10&&L(!1))}),[L,T,y,h,r,k,A]),F=(0,u.useCallback)((()=>{A(!1),y&&L(!0)}),[L,y]),H=`panel-${t}-${(0,pe.default)()}`,U=`panel-title-${t}-${(0,pe.default)()}`,j={state:{height:T,resizable:r,showDragHandle:a,showFocusStyles:o,isCollapsed:y,panelContentId:H,panelTitleId:U,panelTitleReadable:`panel-title-${t}`,ariaHidden:m},actions:{setHeight:B,setExpandToHeight:O,collapse:M,expand:D,resetHeight:F,confirmTitle:N}},z=yP.Provider,G=(0,u.useMemo)((()=>C?{"aria-labelledby":U}:{"aria-label":p}),[C,U,p]);return c.createElement(wP,_P({},G,{"aria-hidden":m},f),c.createElement(z,{value:j},n))};var SP=n(98240),CP=n(41044);function IP(){return IP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IP.apply(this,arguments)}const xP={PRIMARY:"primary",SECONDARY:"secondary",TERTIARY:"tertiary",QUATERNARY:"quaternary",POSITIVE:"positive",NEGATIVE:"negative",ACCENT:"accent"};function AP(e){return 9*(e-1)}const kP=p.default.div.withConfig({displayName:"notificationBubble__Bubble",componentId:"sc-1w06lrc-0"})([""," position:relative;height:","px;width:","px;",";"],(e=>{let{theme:t,variant:n}=e;return(0,p.css)(["color:",";background-color:",";border-radius:",";"],t.colors.fg.primary,t.colors.bg[n],t.borders.radius.round)}),24,(e=>{let{digitLen:t}=e;return 24+AP(t)}),(e=>{let{digitLen:t,$isSmall:n}=e;return n&&(0,p.css)(["height:","px;width:","px;"],20,20+AP(t))})),OP=p.default.span.withConfig({displayName:"notificationBubble__Inner",componentId:"sc-1w06lrc-1"})([""," "," ",";font-weight:",";color:",";user-select:none;"],SP.fullSizeAbsolute,CP.centerContent,(e=>{let{$isSmall:t,theme:n}=e;return dp.expandTextPreset(((e,n)=>{let{paragraph:r}=e;return r[t?n.X_SMALL:n.SMALL]}))({theme:n})}),(e=>{let{theme:t}=e;return t.typography.weight.bold}),(e=>{let{$invertColor:t,theme:n}=e;return t?n.colors.inverted.fg.primary:n.colors.fg.primary}));const PP=function(e,t,n){const r=(0,u.useRef)(),[a,o]=(0,u.useState)(!1),i=(0,u.useCallback)((e=>{const n=r.current-e.pageY;t(n),r.current=e.pageY}),[t]),l=(0,u.useCallback)((e=>{e.target.releasePointerCapture(e.pointerId),o(!1),n()}),[n]),s=(0,u.useCallback)((e=>{e.target.setPointerCapture(e.pointerId),r.current=e.pageY,o(!0)}),[]);(0,u.useLayoutEffect)((()=>{const t=e.current;return t.addEventListener("pointerdown",s),a&&(t.addEventListener("pointermove",i),t.addEventListener("pointerup",l)),()=>{t.removeEventListener("pointerdown",s),a&&(t.removeEventListener("pointermove",i),t.removeEventListener("pointerup",l))}}),[a,l,i,s,e])};const NP=function(e,t){(0,Ir.useKeyEffect)(e,"up",(()=>t(20)),[t]),(0,Ir.useKeyEffect)(e,"down",(()=>t(-20)),[t])};function RP(){return RP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RP.apply(this,arguments)}const MP=p.default.div.withConfig({displayName:"handle__Handle",componentId:"sc-ffqbiq-0"})(["border:0;padding:0;height:","px;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:row-resize;user-select:none;position:absolute;",";",";left:0;right:0;width:100%;",";"],8,(e=>{let{$position:t}=e;return"top"===t&&"top: 0"}),(e=>{let{$position:t}=e;return"bottom"===t&&"bottom: 0"}),(e=>{let{$showFocusStyles:t}=e;return t&&(0,p.css)(["border-bottom:1px solid transparent;&:focus{border-color:",";}"],(e=>{let{theme:t}=e;return t.colors.border.focus}))})),LP=p.default.div.withConfig({displayName:"handle__DragBar",componentId:"sc-ffqbiq-1"})(["position:absolute;width:35px;height:3px;top:","px;background:",";border-radius:",";cursor:inherit;"],4,(e=>{let{theme:t}=e;return t.colors.bg.quaternary}),(e=>{let{theme:t}=e;return t.borders.radius.small}));function DragHandle(e){let{height:t,minHeight:n,maxHeight:r,handleHeightChange:a,handleExpandToHeightChange:o,handleDoubleClick:i,position:l,showDragHandle:s,showFocusStyles:p=!0,...m}=e;const g=(0,u.useRef)();return PP(g,a,o),NP(g,a),c.createElement(MP,RP({ref:g,onClick:e=>e.stopPropagation(),onDoubleClick:i,tabIndex:0,$position:l,role:"slider","aria-orientation":"vertical","aria-valuenow":t,"aria-valuemin":n,"aria-valuemax":r,"aria-label":(0,d.__)("Set panel height","web-stories"),$showFocusStyles:p},m),s&&c.createElement(LP,null))}DragHandle.defaultProps={position:"top"};const DP=DragHandle;function BP(){return BP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BP.apply(this,arguments)}const FP=(0,p.default)(sp.Headline).attrs({as:"h2"}).withConfig({displayName:"title__Header",componentId:"sc-1tphhj5-0"})(["color:",";background-color:",";"," margin:0;position:relative;display:flex;flex-direction:row;user-select:none;align-items:center;justify-content:space-between;padding:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{isSecondary:t,theme:n}=e;return t&&n.colors.interactiveBg.secondaryNormal}),(e=>{let{hasResizeHandle:t}=e;return t&&"padding-top: 0;"}),(e=>{let{isCollapsed:t}=e;return t?"14px 16px":"14px 16px 6px 16px"})),HP=p.default.span.withConfig({displayName:"title__Heading",componentId:"sc-1tphhj5-1"})(["color:",";display:flex;align-items:space-between;",";"],(e=>{let{theme:t,isCollapsed:n}=e;return n?t.colors.fg.secondary:t.colors.fg.primary}),(e=>{let{theme:t}=e;return dp.expandPresetStyles({preset:t.typography.presets.headline[Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL],theme:t})})),UP=(0,p.default)((e=>{let{notificationCount:t,isSmall:n,variant:r=xP.ACCENT,invertTextColor:a,...o}=e;return c.createElement(kP,IP({variant:r,$isSmall:n,digitLen:t?.toString().length||1},o),c.createElement(OP,{$invertColor:a,$isSmall:n},t))})).withConfig({displayName:"title__StyledNotificationBubble",componentId:"sc-1tphhj5-2"})(["margin-left:12px;"]),jP=p.default.div.withConfig({displayName:"title__HeaderActions",componentId:"sc-1tphhj5-3"})(["display:flex;align-items:center;"]),zP=p.default.div.withConfig({displayName:"title__IconWrapper",componentId:"sc-1tphhj5-4"})(["position:relative;width:32px;height:32px;svg{position:relative;z-index:1;}"]),GP=p.default.button.withConfig({displayName:"title__Collapse",componentId:"sc-1tphhj5-5"})(["border:none;border-radius:",";background:transparent;color:",";height:32px;display:flex;padding:0 4px 0 0;align-items:center;justify-content:flex-start;cursor:pointer;margin-left:-12px;transition:",";&:hover,&.",",&[","]{color:",";}",";svg{width:32px;height:32px;",";}:hover ",":after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);height:16px;width:16px;border-radius:",";background:",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t,isCollapsed:n}=e;return n?t.colors.fg.secondary:t.colors.fg.primary}),g.BUTTON_TRANSITION_TIMING,Ip.FOCUS_VISIBLE_SELECTOR,Ip.FOCUS_VISIBLE_DATA_ATTRIBUTE,(e=>{let{theme:t}=e;return t.colors.fg.primary}),pp,(e=>{let{$isCollapsed:t,theme:n}=e;return t&&(0,p.css)(["color:",";transform:rotate(-90deg);"],n.colors.fg.secondary)}),zP,(e=>{let{theme:t}=e;return t.borders.radius.round}),(e=>{let{theme:t}=e;return t.colors.bg.quaternary}));function YP(e){let{children:t,isCollapsed:n,toggle:r,...a}=e;return c.createElement(GP,BP({onClick:e=>{e.stopPropagation(),r()},$isCollapsed:n},a),t)}function ZP(e){let{ariaLabel:t,children:n,isPrimary:r,isSecondary:a,secondaryAction:o,isResizable:i,canCollapse:l,maxHeight:s,count:d,...p}=e;const{state:{isCollapsed:m,height:g,resizable:f,showDragHandle:h,showFocusStyles:b,panelContentId:E,panelTitleId:y,ariaHidden:_},actions:{collapse:v,expand:w,setHeight:T,setExpandToHeight:S,resetHeight:C,confirmTitle:I}}=(0,u.useContext)(yP),{state:{sidebarContentHeight:x}}=ng();(0,u.useEffect)(I,[I]);const A=s||Math.round(.7*x),k=(0,u.useCallback)((e=>f?T((t=>Math.max(0,Math.min(A,t+e)))):null),[f,T,A]),O=(0,u.useCallback)((()=>{f&&g>=10&&S(g)}),[S,g,f]),P=m?w:v,N=0===d||Boolean(d);return c.createElement(FP,BP({isPrimary:r,isSecondary:a,hasResizeHandle:i&&!m,isCollapsed:m},p),i&&c.createElement(DP,{height:g,minHeight:0,maxHeight:A,handleHeightChange:k,handleExpandToHeightChange:O,handleDoubleClick:C,tabIndex:_?-1:0,showDragHandle:h,showFocusStyles:b}),c.createElement(YP,{toggle:P,disabled:!l,tabIndex:_?-1:0,"aria-label":t,"aria-expanded":!m,"aria-controls":E,isCollapsed:m},l&&c.createElement(zP,null,c.createElement(Sp.default,null)),c.createElement(HP,{isCollapsed:m,id:y,size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL},n),N&&c.createElement(UP,{"data-testid":"panel-badge",notificationCount:d,variant:xP.PRIMARY,"aria-hidden":!0})),o&&c.createElement(jP,null,o))}ZP.defaultProps={isPrimary:!1,isSecondary:!1,isResizable:!1,canCollapse:!0};const WP=ZP;function VP(){return VP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VP.apply(this,arguments)}const $P=p.default.div.withConfig({displayName:"content__Container",componentId:"sc-1juzn5p-0"})(["padding:",";overflow:auto;background-color:",";"],(e=>{let{padding:t}=e;return t||"8px 12px 8px"}),(e=>{let{isSecondary:t,theme:n}=e;return t?n.colors.interactiveBg.secondaryNormal:"transparent"}));function qP(e){let{children:t,...n}=e;const{state:{isCollapsed:r,height:a,resizable:o,panelContentId:i}}=(0,u.useContext)(yP),l={height:o?`${a}px`:"auto"};return r?null:c.createElement($P,VP({style:l},n,{id:i}),t)}qP.defaultProps={isPrimary:!1};const KP=qP;function XP(){return XP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XP.apply(this,arguments)}const QP=function SimplePanel(e){let{children:t,name:n,ariaLabel:r,title:a,className:o,...i}=e;return c.createElement(TP,XP({name:n},i),c.createElement(WP,XP({ariaLabel:r??("string"==typeof a?a:"")},i),a),c.createElement(KP,{className:o},t))},JP=(0,p.default)(Ke.Text).withConfig({displayName:"excerpt__StyledText",componentId:"sc-t9wjp4-0"})(["color:",";margin-top:-4px;"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary}));const eN=function ExcerptPanel(e){let{nameOverride:t}=e;const{excerpt:n,updateStory:r}=Qa((e=>{let{state:{story:{excerpt:t=""}},actions:{updateStory:n}}=e;return{excerpt:t,updateStory:n}})),a=(0,u.useCallback)((e=>{r({properties:{excerpt:e.target.value}})}),[r]),{highlight:o,resetHighlight:i,cancelHighlight:l}=mm((e=>({highlight:e[_g.EXCERPT],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));return c.createElement(tN,{onAnimationEnd:()=>i(),name:t||"excerpt",title:(0,d.__)("Story Description","web-stories"),collapsedByDefault:!1,isPersistable:!o,$_css:o?.showEffect&&XA.FLASH},c.createElement(QC,null,c.createElement(nN,{ref:e=>{e&&o?.focus&&o?.showEffect&&(e.addEventListener("keydown",l,{once:!0}),e.focus())},value:n,onChange:a,placeholder:(0,d.__)("Write a description of the story","web-stories"),"aria-label":(0,d.__)("Story Description","web-stories"),maxLength:200,showCount:!0,rows:4,$_css2:o?.showEffect&&XA.OUTLINE})),c.createElement(QC,null,c.createElement(JP,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Stories with a description tend to do better on search and have a wider reach","web-stories"))))};var tN=(0,p.default)(QP).withConfig({displayName:"excerpt___StyledSimplePanel",componentId:"sc-t9wjp4-1"})(["",""],(e=>e.$_css)),nN=(0,p.default)(AI).withConfig({displayName:"excerpt___StyledTextArea",componentId:"sc-t9wjp4-2"})(["",""],(e=>e.$_css2));const rN=p.default.div.withConfig({displayName:"mainStoryInfo__FormSection",componentId:"sc-1f06m84-0"})(["padding:0 4px;&:first-of-type{margin:20px 0px 0px;}"]),aN=(0,p.default)(CI).withConfig({displayName:"mainStoryInfo___TextArea",componentId:"sc-1f06m84-1"})(["margin:8px 0 0;& > p{margin-bottom:-4px;}"]),oN=()=>{const e=Qa((e=>{let{actions:t}=e;return t.updateStory})),t=Qa((e=>{let{state:{story:t}}=e;return{[lP]:t.excerpt,[sP]:t.title||""}})),n=Qa((e=>{let{state:{story:{slug:t}}}=e;return t})),r=ng((e=>{let{data:t}=e;return t?.modalSidebarTab?.IsolatedStatusPanel})),[a,o]=(0,u.useState)(t),i=(0,u.useCallback)((t=>{EP({currentSlug:n,currentTitle:t,updateStory:e})}),[n,e]),l=(0,u.useCallback)((t=>{let{target:n}=t;const{value:r,name:a}=n;e({properties:{[a]:r}}),a===sP&&i(r)}),[i,e]),s=e=>{let{currentTarget:t}=e;o((e=>({...e,[t.name]:t.value})))};return c.createElement(c.Fragment,null,c.createElement(rN,null,c.createElement(sp.Headline,{as:"label",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL,htmlFor:sP},(0,d.__)("Story Title","web-stories")),c.createElement(aN,{name:sP,id:"story-title",showCount:!0,value:a[sP],onChange:s,onBlur:l,"aria-label":(0,d.__)("Story Title","web-stories"),placeholder:(0,d.__)("Add title","web-stories")})),c.createElement(rN,null,c.createElement(sp.Headline,{as:"label",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL,htmlFor:lP},(0,d.__)("Story Description","web-stories")),c.createElement(aN,{name:lP,id:"story-excerpt",showCount:!0,maxLength:200,value:a[lP],"aria-label":(0,d.__)("Story Description","web-stories"),placeholder:(0,d.__)("Write a description of the story","web-stories"),hint:(0,d.__)("Stories with a description tend to do better on search and have a wider reach","web-stories"),onChange:s,onBlur:l})),r&&c.createElement(r,null))},iN=p.default.div.withConfig({displayName:"storyPreview__PreviewWrapper",componentId:"sc-zk17py-0"})(["width:","px;height:","px;position:relative;margin-top:8px;"],(e=>{let{width:t}=e;return t}),(e=>{let{height:t}=e;return t}));iN.propTypes={width:za().number.isRequired,height:za().number.isRequired};const lN=p.default.div.withConfig({displayName:"storyPreview__PreviewContainer",componentId:"sc-zk17py-1"})(["width:","px;height:","px;position:absolute;"],(e=>{let{width:t}=e;return t}),(e=>{let{height:t}=e;return t}));lN.propTypes={width:za().number.isRequired,height:za().number.isRequired};const sN=p.default.img.withConfig({displayName:"storyPreview__Image",componentId:"sc-zk17py-2"})(["height:100%;width:100%;display:block;aspect-ratio:",";object-fit:cover;border-radius:",";background:",";"],ee.PAGE_RATIO,(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.primaryNormal})),cN=p.default.div.withConfig({displayName:"storyPreview__EmptyPlaceholder",componentId:"sc-zk17py-3"})(["height:100%;border-radius:",";background:",";"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.primaryNormal})),dN=p.default.div.withConfig({displayName:"storyPreview__Gradient",componentId:"sc-zk17py-4"})(["position:absolute;bottom:0;height:67%;width:100%;border-radius:",";background:",";"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.gradient.posterOverlay})),uN=p.default.div.withConfig({displayName:"storyPreview__ScrimWrapper",componentId:"sc-zk17py-5"})(["position:absolute;top:0;box-sizing:border-box;width:100%;height:100%;border-radius:",";background:",";padding:8px;"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.opacity.black3})),pN=p.default.div.withConfig({displayName:"storyPreview__ScrimContainer",componentId:"sc-zk17py-6"})(["display:flex;height:100%;width:100%;flex-wrap:wrap;justify-content:space-between;"]),mN=p.default.div.withConfig({displayName:"storyPreview__ScrimTop",componentId:"sc-zk17py-7"})(["display:grid;grid-template-columns:50% 50%;grid-template-rows:auto;grid-template-areas:'publisherLogo editButton';justify-content:inherit;width:100%;"]),gN=p.default.img.withConfig({displayName:"storyPreview__PublisherLogo",componentId:"sc-zk17py-8"})(["grid-area:publisherLogo;height:24px;width:24px;border-radius:2px;box-shadow:0 0 8px rgba(0,0,0,0.08);"]),fN=(0,p.default)($C).withConfig({displayName:"storyPreview__StyledMedia",componentId:"sc-zk17py-9"})(["grid-area:editButton;display:flex;flex-direction:row-reverse;"]),hN=p.default.div.withConfig({displayName:"storyPreview__ScrimBottom",componentId:"sc-zk17py-10"})(["width:100%;margin:auto 0 0;align-self:flex-end;"]),bN=(0,p.default)(sp.Headline).attrs({as:"h3",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"storyPreview__Title",componentId:"sc-zk17py-11"})(["max-height:calc(1.2em * 3);display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;padding:0;margin:0 0 4px;overflow:hidden;text-overflow:ellipsis;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),EN=(0,p.default)(Ke.Text).attrs({forwardAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM}).withConfig({displayName:"storyPreview__Publisher",componentId:"sc-zk17py-12"})(["display:block;margin:0;padding:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),yN=()=>{const{title:e,featuredMedia:t,publisherLogo:n,updateStory:r}=Qa((e=>{let{state:{story:t},actions:n}=e;return{title:t?.title,featuredMedia:t?.featuredMedia||{},publisherLogo:t?.publisherLogo||{},updateStory:n.updateStory}})),{allowedImageMimeTypes:a,hasUploadMediaAction:o,publisher:i}=U((e=>{let{allowedMimeTypes:t,capabilities:n,metadata:r}=e;return{allowedImageMimeTypes:t?.image||ze,hasUploadMediaAction:n?.hasUploadMediaAction,publisher:r?.publisher}})),l=(0,u.useMemo)((()=>a.map((e=>Rt(e))).flat()),[a]),s=Math.round(232/ee.PAGE_RATIO),p=(0,u.useCallback)((e=>r({properties:{featuredMedia:{id:e.id,url:e.src,height:e.height,width:e.width,isExternal:e.isExternal,needsProxy:e.needsProxy}}})),[r]);let m=(0,d.__)("No file types are currently supported.","web-stories");l.length&&(m=(0,$e.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as a poster.","web-stories"),(0,kt.default)(l)));const g=[o&&"upload","hotlink"].filter(Boolean);return c.createElement(c.Fragment,null,c.createElement(sp.Headline,{as:"label",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL},(0,d.__)("Cover Preview","web-stories")),c.createElement(iN,{width:232,height:s},c.createElement(lN,{width:232,height:s},t?.url?c.createElement(sN,{crossOrigin:"anonymous",decoding:"async",src:t.url,width:t.width,height:t.height,alt:(0,d.__)("Preview image","web-stories"),"data-testid":"story_preview_featured_media"}):c.createElement(cN,null),c.createElement(dN,null),c.createElement(uN,null,c.createElement(pN,null,c.createElement(mN,null,n?.url?.length>0&&c.createElement(gN,{crossOrigin:"anonymous",decoding:"async",width:n.width,height:n.height,src:n.url,alt:(0,d.__)("Publisher Logo","web-stories")}),c.createElement(fN,{onChange:p,title:(0,d.__)("Select as poster image","web-stories"),hotlinkTitle:(0,d.__)("Use external image as poster image","web-stories"),hotlinkInsertText:(0,d.__)("Use image as poster image","web-stories"),hotlinkInsertingText:(0,d.__)("Using image as poster image","web-stories"),buttonInsertText:(0,d.__)("Select as poster image","web-stories"),type:a,ariaLabel:(0,d.__)("Poster image","web-stories"),onChangeErrorText:m,imgProps:t,variant:yC.NONE,menuOptions:g,cropParams:{width:640,height:853}})),c.createElement(hN,null,e&&c.createElement(bN,null,e),i&&c.createElement(EN,{"data-testid":"story_preview_publisher"},i)))))))},_N=e=>{let{handleReviewChecklist:t}=e;const n=Vu(Su.PRIORITY);return c.createElement(qp,{MainIcon:jp,label:(0,d.__)("Checklist","web-stories"),"aria-label":(0,d.__)("Checklist","web-stories"),popupZIndexOverride:10,onClick:t,notificationCount:n})},vN=p.default.div.withConfig({displayName:"content__Main",componentId:"sc-1d1lm9j-0"})(["display:grid;min-width:917px;width:100%;height:calc(100% - "," - ",");grid-template-columns:30.5% 34% 35.5%;grid-template-rows:auto;grid-template-areas:'preview mainPanel sidePanel' 'footer mainPanel sidePanel';"],"1px",cP),wN=p.default.div.withConfig({displayName:"content___StoryPreview",componentId:"sc-1d1lm9j-1"})(["grid-area:preview;margin:20px 18px 0 32px;"]),TN=p.default.div.withConfig({displayName:"content___MainStoryInfo",componentId:"sc-1d1lm9j-2"})(["grid-area:mainPanel;display:flex;flex-direction:column;padding:0 16px;overflow-y:scroll;gap:34px;& > section{border:none;& > h2{padding-top:0;padding-bottom:2px;& > button{height:1em;}}}"]),SN=p.default.div.attrs({role:"tabpanel"}).withConfig({displayName:"content__PanelContainer",componentId:"sc-1d1lm9j-3"})(["grid-area:sidePanel;height:100%;margin-left:18px;background-color:",";border-bottom-right-radius:",";overflow-y:scroll;",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.borders.radius.medium}),A.scrollbarCSS),CN=p.default.div.withConfig({displayName:"content__Footer",componentId:"sc-1d1lm9j-4"})(["grid-area:footer;display:flex;align-items:flex-end;margin:0 18px 20px 32px;"]),IN=e=>{let{handleReviewChecklist:t}=e;const{DocumentPane:n,id:r}=ng((e=>{let{data:t}=e;return t?.modalSidebarTab||{}})),a=function(){const e=(0,u.useContext)(Gu)?.[0];if(!e)throw new Error("Cannot use `useHasChecklist` outside of `ChecklistCountProvider`");const{hasChecklist:t}=e;return t}();return c.createElement(vN,null,c.createElement(wN,null,c.createElement(yN,null)),c.createElement(TN,null,c.createElement(oN,null)),n&&c.createElement(SN,{"aria-label":(0,d.__)("Story Settings","web-stories"),id:r},c.createElement(n,null)),a&&c.createElement(CN,null,c.createElement(_N,{handleReviewChecklist:t})))},xN=p.default.div.withConfig({displayName:"publishModal__Container",componentId:"sc-16gvo2-0"})(["height:100%;color:",";background-color:",";border:",";border-radius:",";"],f.theme.colors.fg.primary,f.theme.colors.bg.primary,`1px solid ${f.theme.colors.divider.primary}`,f.theme.borders.radius.medium);const AN=function PublishModal(e){let{isOpen:t,onPublish:n,onClose:r,publishButtonDisabled:a,hasFutureDate:o}=e;const i=zu((e=>{let{actions:t}=e;return t.handleReviewChecklist}));(0,u.useEffect)((()=>{t&&(0,P.trackEvent)("publish_modal")}),[t]);const l=(0,u.useCallback)((()=>{(0,P.trackEvent)("review_prepublish_checklist"),r({focusPublishButton:!1}),i()}),[r,i]);return c.createElement(S.Modal,{isOpen:t,onClose:r,contentLabel:(0,d.__)("Story details","web-stories"),contentStyles:{display:"block",width:"71vw",minWidth:"917px",height:"66vh",minHeight:"580px",overflow:"hidden"},overlayStyles:{backgroundColor:f.theme.colors.inverted.interactiveBg.modalScrim}},t&&c.createElement(Ku,null,c.createElement(xN,null,c.createElement(bP,{hasFutureDate:o,publishButtonDisabled:a,onClose:r,onPublish:n}),c.createElement(IN,{handleReviewChecklist:l}))))};const kN=function PublishButton(e){let{forceIsSaving:t}=e;const{date:n,storyId:r,saveStory:a,title:o,editLink:i,canPublish:l}=Qa((e=>{let{state:{story:{date:t,storyId:n,title:r,editLink:a},capabilities:o},actions:{saveStory:i}}=e;return{date:t,storyId:n,saveStory:i,title:r,editLink:a,canPublish:Boolean(o?.publish)}})),s=zu((e=>{let{actions:{showPriorityIssues:t}}=e;return t})),[d,p]=(0,u.useState)(!1),m=(0,u.useRef)(),g=Gr(r,i),f=(0,au.default)((0,nu.default)((0,ou.toDate)(n,(0,su.default)()),1),(0,ou.toDate)(new Date,(0,su.default)())),h=(0,u.useCallback)((()=>{let e="pending";l&&(e=f?"future":"publish"),(0,P.trackEvent)("publish_story",{status:e,title_length:o.length}),p(!1),a({status:e}),g()}),[g,a,f,o,l]),b=(0,u.useCallback)((()=>{s(),p(!0)}),[s]),E=(0,u.useCallback)((function(){let{focusPublishButton:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(!1),e&&m.current.focus()}),[]);return c.createElement(c.Fragment,null,c.createElement(mP,{ref:m,onClick:b,disabled:t,hasFutureDate:f}),c.createElement(AN,{isOpen:d,onPublish:h,onClose:E,hasFutureDate:f,publishButtonDisabled:t}))};const ON=function SwitchToDraftButton(e){let{forceIsSaving:t=!1}=e;const{isSaving:n,saveStory:r}=Qa((e=>{let{state:{meta:{isSaving:t}},actions:{saveStory:n}}=e;return{isSaving:t,saveStory:n}})),a=Oc(),o=(0,u.useCallback)((()=>{r({status:"draft"})}),[r]),i=(0,d.__)("Switch to Draft","web-stories");return c.createElement(Tooltip,{title:i,hasTail:!0},c.createElement(m.Button,{variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.QUATERNARY,size:g.BUTTON_SIZES.SMALL,onClick:o,disabled:n||t||a,"aria-label":i},c.createElement(by,null)))};function PlainButton(e){let{text:t,onClick:n,disabled:r}=e;return c.createElement(Tooltip,{title:t,hasTail:!0},c.createElement(m.Button,{variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.QUATERNARY,size:g.BUTTON_SIZES.SMALL,onClick:n,disabled:r,"aria-label":t},c.createElement(mb,null)))}const PN=function UpdateButton(e){let{hasUpdates:t=!1,forceIsSaving:n=!1}=e;const{isSaving:r,status:a,date:o,saveStory:i,canPublish:l}=Qa((e=>{let{state:{meta:{isSaving:t},story:{status:n,date:r},capabilities:a},actions:{saveStory:o}}=e;return{isSaving:t,status:n,date:r,saveStory:o,canPublish:Boolean(a?.publish)}})),s=r||n,u=Oc(),{state:{hasNewChanges:p}}=Br();(0,Ir.useGlobalKeyDownEffect)({key:["mod+s"]},(e=>{e.preventDefault(),s||u||i()}),[i,s,u]);const m=!s&&!u&&(p||t),g="draft"===a||!a;if("pending"===a)return c.createElement(PlainButton,{text:(0,d.__)("Save as pending","web-stories"),disabled:!m,onClick:()=>i()});if(g)return c.createElement(PlainButton,{text:(0,d.__)("Save draft","web-stories"),disabled:!m,onClick:()=>i()});const f=(0,au.default)((0,nu.default)((0,ou.toDate)(o,(0,su.default)()),1),(0,ou.toDate)(new Date,(0,su.default)()))&&"private"!==a?(0,d.__)("Schedule","web-stories"):(0,d.__)("Update","web-stories");return c.createElement(mP,{text:f,onClick:()=>i(),disabled:!m,isUploading:u,canPublish:l})},NN=p.default.input.withConfig({displayName:"title__Input",componentId:"sc-jcmnyx-0"})(["color:",";margin:0;"," background:",";border:none !important;text-align:start;min-width:60%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;border-radius:",";",";",""],(e=>{let{theme:t}=e;return`${t.colors.fg.primary} !important`}),dp.expandTextPreset(((e,t)=>{let{paragraph:n}=e,{MEDIUM:r}=t;return n[r]})),(e=>{let{isHighlighted:t}=e;return!t&&"none !important"}),(e=>{let{theme:t}=e;return t.borders.radius.small}),up.focusableOutlineCSS,(e=>{let{isHighlighted:t}=e;return t&&(0,p.css)([""," ",""],XA.OUTLINE,XA.FLASH)}));const RN=function HeaderTitle(){const{title:e,slug:t,updateStory:n}=Qa((e=>{let{state:{story:{title:t,slug:n}},actions:{updateStory:r}}=e;return{title:t,slug:n,updateStory:r}})),{highlight:r,resetHighlight:a,cancelHighlight:o}=mm((e=>({highlight:e[_g.STORY_TITLE],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),i=(0,u.useCallback)((e=>n({properties:{title:e.target.value}})),[n]),l=(0,u.useCallback)((()=>{EP({currentSlug:t,currentTitle:e,updateStory:n})}),[t,e,n]);return"string"!=typeof e?null:c.createElement(NN,{ref:e=>{e&&r?.focus&&r?.showEffect&&(e.addEventListener("keydown",o,{once:!0}),e.focus())},value:e,type:"text",onBlur:l,onChange:i,placeholder:(0,d.__)("Add title","web-stories"),"aria-label":(0,d.__)("Story title","web-stories"),isHighlighted:r?.showEffect,onAnimationEnd:()=>a()})},MN=p.default.div.withConfig({displayName:"pageAdvancement__SwitchRow",componentId:"sc-11tn322-0"})(["margin-bottom:16px;"]),LN=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"pageAdvancement__MutedText",componentId:"sc-11tn322-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),DN={MIN:1,MAX:20};const BN=function PageAdvancementPanel(e){let{nameOverride:t}=e;const{autoAdvance:n,defaultPageDuration:r,updateStory:a}=Qa((e=>{let{state:{story:{autoAdvance:t=ra,defaultPageDuration:n=na}},actions:{updateStory:r}}=e;return{autoAdvance:t,defaultPageDuration:n,updateStory:r}})),[o,i]=(0,u.useState)(r);(0,u.useEffect)((()=>{i(r)}),[r]);const l=(0,u.useCallback)(((e,t)=>{a({properties:{autoAdvance:t}}),(0,P.trackEvent)("change_page_advancement",{status:t?"auto":"manual",duration:o})}),[a,o]),s=(0,u.useDebouncedCallback)((e=>{const t=(0,ec.clamp)(e,DN);e!==t&&i(t),r!==t&&(a({properties:{defaultPageDuration:t}}),(0,P.trackEvent)("change_page_advancement",{status:n?"auto":"manual",duration:t}))}),800);(0,u.useEffect)((()=>{s(o)}),[o,s]);const p=(0,u.useCallback)(((e,t)=>i(t)),[]);return c.createElement(QP,{name:t||"pageAdvancement",title:(0,d.__)("Page Advancement","web-stories"),collapsedByDefault:!1},c.createElement(QC,null,c.createElement(LN,null,(0,d.__)("Control whether a story auto-advances between pages, or whether the reader has to manually tap to advance.","web-stories"))),c.createElement(MN,null,c.createElement(hI,{groupLabel:(0,d.__)("Page Advancement","web-stories"),name:"page-advancement-switch",value:n,onLabel:(0,d.__)("Auto","web-stories"),offLabel:(0,d.__)("Manual","web-stories"),onChange:l})),n&&c.createElement(QC,null,c.createElement(VS,{unit:` ${(0,d.__)("seconds","web-stories")}`,suffix:(0,d.__)("Duration","web-stories"),value:o,onChange:p,"aria-label":(0,d.__)("Default page duration in seconds","web-stories"),min:DN.MIN,max:DN.MAX,isFloat:!0,containerStyleOverride:mp})))},FN=(e,t)=>{let{MIN:n,MAX:r}=t;return e>=n&&e<=r},HN={MIN:1,MAX:200},UN=(0,p.default)(QC).withConfig({displayName:"slug__PermalinkRow",componentId:"sc-12ylqoy-0"})(["margin-bottom:12px;input{color:",";:active,:focus,.","{color:",";}}"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary}),Ip.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return t.colors.fg.primary})),jN=p.default.div.withConfig({displayName:"slug__LinkContainer",componentId:"sc-12ylqoy-1"})(["margin-bottom:16px;"]);const zN=function SlugPanel(e){let{nameOverride:t}=e;const{slug:n,link:r,permalinkConfig:a,updateStory:o}=Qa((e=>{let{state:{story:{slug:t="",link:n,permalinkConfig:r}},actions:{updateStory:a}}=e;return{slug:t,link:n,permalinkConfig:r,updateStory:a}})),[i,l]=(0,u.useState)(n);(0,u.useEffect)((()=>{l(n)}),[n]);const s=(0,u.useCallback)((e=>{const t=e.slice(0,HN.MAX);o({properties:{slug:Go(t)}})}),[o]),p=(0,u.useCallback)((e=>l(Go(e.target.value,!0))),[]),m=(0,u.useCallback)((e=>s(e.target.value)),[s]),g=i&&a&&FN(i.length,HN)?a.prefix+i+a.suffix:r;return c.createElement(QP,{name:t||"permalink",title:(0,d.__)("Permalink","web-stories"),collapsedByDefault:!1},a&&c.createElement(UN,null,c.createElement(qv,{value:String(i),onChange:p,onBlur:m,placeholder:(0,d.__)("Enter slug","web-stories"),"aria-label":(0,d.__)("URL slug","web-stories"),minLength:HN.MIN,maxLength:HN.MAX,containerStyleOverride:mp})),c.createElement(jN,null,c.createElement(hu.Link,{rel:"noopener noreferrer",target:"_blank",href:r,size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},g)))};var GN=n(25820);function DropDownKeyEvents(e){let{target:t}=e;YT({ref:t},[],3);const n=xs();return(0,Ir.useKeyDownEffect)(t,"tab",n,[n]),null}function YN(){return YN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YN.apply(this,arguments)}DropDownKeyEvents.propTypes={target:za().shape({current:za().instanceOf(Element)})};const ZN=(0,p.default)(m.Button).withConfig({displayName:"dropDownMenu__MenuButton",componentId:"sc-160pl0l-0"})(["top:4px;right:4px;"]),WN=p.default.div.withConfig({displayName:"dropDownMenu__DropDownContainer",componentId:"sc-160pl0l-1"})(["margin-top:10px;"]),VN=p.default.div.withConfig({displayName:"dropDownMenu__MenuContainer",componentId:"sc-160pl0l-2"})(["z-index:1;"]),$N=(0,p.css)(["min-width:160px;margin-top:0;"]),qN=(0,p.default)(hh.default).withConfig({displayName:"dropDownMenu__ActiveIcon",componentId:"sc-160pl0l-3"})(["position:absolute;left:4px;top:50%;transform:translateY(-50%);"]),KN=(0,u.forwardRef)((function CustomItemRenderer(e,t){let{option:n,isSelected:r,...a}=e;const{MediaUpload:o}=U();return n.mediaPickerProps?c.createElement(o,YN({},n.mediaPickerProps,{render:e=>c.createElement(GN.ListItem,YN({},a,{ref:t,isSelected:r,disabled:n.disabled,"aria-disabled":n.disabled,onClick:t=>{a.onClick?.(t),e(t)}}),c.createElement(GN.ListItemLabelDisplayText,{forwardedAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},n.label))})):c.createElement(GN.ListItem,YN({},a,{ref:t,isSelected:r,disabled:n.disabled,"aria-disabled":n.disabled}),r&&c.createElement(qN,{"data-testid":"dropdownMenuItem_active_icon","aria-label":(0,d.__)("Selected","web-stories"),width:32,height:32}),c.createElement(GN.ListItemLabelDisplayText,{forwardedAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},n.label))}));const XN=function DropDownMenu(e){let{display:t,isMenuOpen:n,onMenuOpen:r,onMenuClose:a,onMenuSelected:o,setParentActive:i=Lv.noop,options:l,children:s,ariaLabel:p=(0,d.__)("More","web-stories"),className:m,...f}=e;const h=(0,u.useRef)(),b=(0,u.useCallback)((()=>{a(),h.current?.focus(),i()}),[a,i]),E=(0,u.useMemo)((()=>`list-${(0,pe.default)()}`),[]),y=(0,u.useMemo)((()=>`button-${(0,pe.default)()}`),[]);return c.createElement(VN,{className:m},h.current&&c.createElement(DropDownKeyEvents,{target:h.current}),c.createElement(ZN,{type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE,ref:h,onClick:r,"aria-label":p,"aria-pressed":n,"aria-haspopup":!0,"aria-expanded":n,"aria-owns":n?E:null,id:y,$display:t,tabIndex:t||n?0:-1},s),(t||n)&&c.createElement(uw.Popup,{anchor:h,placement:Vd.PLACEMENT.BOTTOM_START,isOpen:n},c.createElement(WN,null,c.createElement(wC.Menu,YN({parentId:y,listId:E,onMenuItemClick:(e,t)=>{o(t)},options:l,onDismissMenu:b,hasMenuRole:!0,menuStylesOverride:$N,renderItem:KN},f)))))},QN=p.default.div.withConfig({displayName:"fileRow__InputRow",componentId:"sc-w8gml-0"})(["flex-grow:1;margin:0 8px;min-width:0;"]),JN=(0,p.default)(T_).withConfig({displayName:"fileRow__ReplaceIcon",componentId:"sc-w8gml-1"})(["vertical-align:bottom;"]),eR=(0,p.default)(SE).withConfig({displayName:"fileRow__LinkIcon",componentId:"sc-w8gml-2"})(["width:24px;height:24px;vertical-align:bottom;"]),tR=(0,p.default)(Sf).withConfig({displayName:"fileRow__UploadIcon",componentId:"sc-w8gml-3"})(["width:24px;height:24px;vertical-align:bottom;"]),nR=p.default.a.withConfig({displayName:"fileRow__Link",componentId:"sc-w8gml-4"})(["",";"],(e=>{let{theme:t}=e;return(0,p.css)(["color:",";text-decoration:none;cursor:pointer;:hover,:active,:focus{text-decoration:underline;color:"," !important;}",""],t.colors.fg.primary,t.colors.fg.primary,up.focusableOutlineCSS(t.colors.border.focus))})),rR=(0,p.default)(m.Button).withConfig({displayName:"fileRow__StyledButton",componentId:"sc-w8gml-5"})(["",";"],(e=>{let{theme:t}=e;return up.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),aR=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"fileRow__FileName",componentId:"sc-w8gml-6"})(["color:",";text-overflow:ellipsis;overflow:hidden;"],(e=>{let{theme:t}=e;return t.colors.fg.primary}));const oR=function FileRow(e){let{id:t,isExternal:n,src:r,title:a,options:o,removeItemLabel:i,onRemove:l,children:s}=e;const p=[{group:o}],[m,f]=(0,u.useState)(!1),h=(0,wx.default)(),b=(0,u.useCallback)((e=>{f(!1),o.find((t=>t.value===e))?.onClick()}),[o]),E=(0,u.useCallback)((()=>{l(t),h((0,d.__)("File removed","web-stories"))}),[t,l,h]),y=n?(0,d.__)("External file","web-stories"):(0,d.__)("Local file","web-stories");return c.createElement(QC,{key:`row-filename-${t}`},c.createElement(Tooltip,{title:y},n?c.createElement(eR,{title:y}):c.createElement(tR,{title:y})),c.createElement(QN,null,c.createElement(aR,null,c.createElement(nR,{href:r,rel:"noreferrer",target:"_blank"},a))),s,o.length>0&&c.createElement(XN,{onMenuOpen:()=>f(!0),isMenuOpen:m,onMenuSelected:b,display:!0,onMenuClose:()=>f(!1),options:p,ariaLabel:(0,d.__)("Replace file","web-stories")},c.createElement(Tooltip,{title:(0,d.__)("Replace","web-stories")},c.createElement(JN,null))),c.createElement(Tooltip,{hasTail:!0,title:i},c.createElement(rR,{"aria-label":i,type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE,onClick:E},c.createElement(av.default,null))))},iR=(0,p.default)(QC).withConfig({displayName:"captionsPanelContent__ButtonRow",componentId:"sc-nb4jvi-0"})(["gap:12px;"]),lR=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"captionsPanelContent__FileName",componentId:"sc-nb4jvi-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),sR=(0,p.default)(m.Button).withConfig({displayName:"captionsPanelContent__HotlinkButton",componentId:"sc-nb4jvi-2"})(["padding:12px 8px;"]),cR="hotlink_caption";const dR=function CaptionsPanelContent(e){let{isIndeterminate:t=!1,tracks:n=[],captionText:r=(0,d.__)("Upload a file","web-stories"),handleChangeTrack:a,handleRemoveTrack:o,renderUploadButton:i,removeItemLabel:l=(0,d.__)("Remove file","web-stories")}=e;const{allowedMimeTypes:{caption:s=[]},capabilities:{hasUploadMediaAction:p},MediaUpload:m}=U(),[f,h]=(0,u.useState)(!1),b=(0,u.useMemo)((()=>s.map((e=>Rt(e))).flat()),[s]),E=(0,u.useCallback)((e=>{let{link:t,hotlinkInfo:n,needsProxy:r}=e;a({src:t,needsProxy:r}),(0,P.trackEvent)(cR,{event_label:t,file_size:n.fileSize,file_type:n.mimeType,needs_proxy:r}),h(!1)}),[a]),y=(0,u.useCallback)((e=>(0,P.trackError)(cR,e?.message)),[]);if(!s?.length)return null;const _=[p&&{label:(0,d.__)("Upload a file","web-stories"),value:"upload",onClick:()=>{},mediaPickerProps:{onSelect:a,onSelectErrorMessage:(0,d.__)("Please choose a VTT file to use as caption.","web-stories"),type:s,title:r,buttonInsertText:(0,d.__)("Select caption","web-stories")}},{label:(0,d.__)("Link to a file","web-stories"),value:"hotlink",onClick:()=>{h(!0)}}].filter(Boolean);return c.createElement(c.Fragment,null,t&&c.createElement(QC,null,c.createElement(lR,null,Te)),n.map((e=>c.createElement(oR,{key:e.id,id:e.id,src:e.track,title:e.track.split("/").pop(),isExternal:!e.trackId,options:_,onRemove:o,removeItemLabel:l}))),!n.length&&!t&&c.createElement(iR,{spaceBetween:!1},p&&c.createElement(m,{onSelect:a,onSelectErrorMessage:(0,d.__)("Please choose a VTT file to use as caption.","web-stories"),type:s,title:r,buttonInsertText:(0,d.__)("Select caption","web-stories"),render:i}),c.createElement(sR,{variant:g.BUTTON_VARIANTS.RECTANGLE,type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,onClick:()=>h(!0)},(0,d.__)("Link to caption file","web-stories"))),c.createElement(zC,{title:(0,d.__)("Insert external captions","web-stories"),isOpen:f,onSelect:E,onError:y,onClose:()=>h(!1),allowedFileTypes:b,insertText:(0,d.__)("Use caption","web-stories"),insertingText:(0,d.__)("Selecting caption","web-stories"),canUseProxy:!1}))};function uR(){return uR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uR.apply(this,arguments)}const pR=(0,p.default)(uS.Checkbox).withConfig({displayName:"loopPanelContent__StyledCheckbox",componentId:"sc-4opv01-0"})(["",""],(e=>{let{theme:t}=e;return`\n    input[type='checkbox']&.${Ip.FOCUS_VISIBLE_SELECTOR} ~ div, input[type='checkbox']:focus ~ div {\n      box-shadow: 0px 0px 0 2px ${t.colors.bg.secondary}, 0px 0px 0 4px ${t.colors.border.focus} !important;\n    }\n  `})),mR=p.default.div.withConfig({displayName:"loopPanelContent__Wrapper",componentId:"sc-4opv01-1"})(["display:flex;gap:12px;align-items:center;"]);const gR=function LoopPanelContent(e){let{loop:t,className:n="",onChange:r,...a}=e;const o=(0,u.useInitializedValue)((()=>`cb-${(0,pe.default)()}`));return c.createElement(mR,{className:n},c.createElement(pR,uR({id:o,checked:t,onChange:r},a)),c.createElement(Ke.Text,{as:"label",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,htmlFor:o},(0,d.__)("Loop","web-stories")))},fR=(0,p.default)(Jy.default).withConfig({displayName:"audioPlayer__Play",componentId:"sc-gch3p5-0"})(["width:30px !important;height:30px !important;"]),hR=(0,p.default)(V_.default).withConfig({displayName:"audioPlayer__Stop",componentId:"sc-gch3p5-1"})(["width:30px !important;height:30px !important;"]),bR=(0,p.default)(m.Button).withConfig({displayName:"audioPlayer__StyledButton",componentId:"sc-gch3p5-2"})(["",";"],(e=>{let{theme:t}=e;return up.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),ER=p.default.div.withConfig({displayName:"audioPlayer__Wrapper",componentId:"sc-gch3p5-3"})((e=>{let{theme:t}=e;return(0,p.css)(["color:",";",";"],t.colors.fg.primary,dp.expandPresetStyles({preset:{...t.typography.presets.paragraph[Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL]},theme:t}))})),yR=p.default.audio.withConfig({displayName:"audioPlayer__Audio",componentId:"sc-gch3p5-4"})(["display:none;"]);const _R=function AudioPlayer(e){let{src:t,mimeType:n,tracks:r=[],audioId:a,loop:o,playerRef:i}=e;const[l,s]=(0,u.useState)(!1),{getProxiedUrl:p}=ii(),m=(0,u.useCallback)((()=>{const e=i.current;e&&(l?e.pause():e.play().catch((()=>{})))}),[l,i]);(0,u.useEffect)((()=>{const e=i.current;if(!e)return;const t=()=>s(!0),n=()=>s(!1),r=()=>{e.currentTime=0,s(!1)};return e.addEventListener("play",t),e.addEventListener("pause",n),e.addEventListener("ended",r),()=>{e.removeEventListener("play",t),e.removeEventListener("pause",n),e.removeEventListener("ended",r)}}),[i]);const f=l?(0,d.__)("Pause","web-stories"):(0,d.__)("Play","web-stories"),h=r.map((e=>{const t=p(e,e?.track);return{...e,track:t}}));return c.createElement(ER,null,c.createElement(yR,{crossOrigin:"anonymous",loop:o,ref:i,id:a},c.createElement("source",{src:t,type:n}),h&&h.map(((e,t)=>{let{srclang:n,label:r,track:a,id:o}=e;return c.createElement("track",{srcLang:n,label:r,kind:"metadata",src:a,key:o,default:0===t})}))),c.createElement(Tooltip,{hasTail:!0,title:f,popupZIndexOverride:10},c.createElement(bR,{type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE,"aria-label":f,onClick:m},l?c.createElement(hR,null):c.createElement(fR,null))))},vR=(0,p.default)(m.Button).withConfig({displayName:"backgroundAudioPanelContent__StyledButton",componentId:"sc-t2iem8-0"})(["",";"],(e=>{let{theme:t}=e;return up.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),wR=(0,p.default)(vR).withConfig({displayName:"backgroundAudioPanelContent__UploadButton",componentId:"sc-t2iem8-1"})(["padding:12px 8px;"]),TR=(0,p.default)(QC).withConfig({displayName:"backgroundAudioPanelContent__ButtonRow",componentId:"sc-t2iem8-2"})(["gap:12px;"]),SR=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"backgroundAudioPanelContent__SectionHeading",componentId:"sc-t2iem8-3"})(["font-weight:bold;margin-bottom:12px;"]),CR="hotlink_audio";const IR=function BackgroundAudioPanelContent(e){let{backgroundAudio:t,updateBackgroundAudio:n,showCaptions:r=!1,showLoopControl:a=!1,audioId:o}=e;const{allowedMimeTypes:{audio:i},capabilities:{hasUploadMediaAction:l},MediaUpload:s}=U(),[p,m]=(0,u.useState)(!1),{getProxiedUrl:f}=ii(),h=(0,u.useMemo)((()=>i.map((e=>Rt(e))).flat()),[i]),{resource:b={},tracks:E=[],loop:y=!0}=t||{},_=(0,u.useRef)(),v=f(b,b?.src),w=(0,$e.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s to insert into page.","web-stories"),(0,kt.default)(h)),T=(0,u.useCallback)((e=>{let{src:t,id:o,mimeType:i,needsProxy:l,length:s,lengthFormatted:c}=e;const d={resource:{src:t,id:o,mimeType:i,length:s,lengthFormatted:c,needsProxy:l}};r&&(d.tracks=[]),a&&(d.loop=!0),n(d)}),[r,a,n]),S=(0,u.useCallback)((async e=>{let{link:t,hotlinkInfo:n,needsProxy:r}=e;const{mimeType:a}=n,o=f({needsProxy:r},t),i=await re(o),{length:l,lengthFormatted:s}=ie(i);T({src:t,mimeType:a,length:l,lengthFormatted:s,needsProxy:r}),m(!1),(0,P.trackEvent)(CR,{event_label:t,file_size:n.fileSize,file_type:n.mimeType,needs_proxy:r}),m(!1)}),[f,T]),C=(0,u.useCallback)((e=>(0,P.trackError)(CR,e?.message)),[]),I=(0,u.useCallback)((e=>{n({...t,tracks:e})}),[t,n]),x=(0,u.useCallback)((e=>{n({...t,loop:e.target.checked})}),[t,n]),A=(0,u.useCallback)((e=>{let t=[];if(e){const n=E.findIndex((t=>{let{id:n}=t;return n===e}));t=[...E.slice(0,n),...E.slice(n+1)]}I(t)}),[E,I]),k=(0,u.useCallback)((e=>{let{src:t="",id:n,needsProxy:r=!1}=e;const a={track:t,trackId:n,id:(0,pe.default)(),kind:"captions",srclang:"",label:"",needsProxy:r};I([a])}),[I]),O=(0,u.useCallback)((e=>c.createElement(wR,{onClick:e,type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Upload an audio file","web-stories"))),[]),N=(0,u.useCallback)((e=>c.createElement(wR,{onClick:e,type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Upload audio captions","web-stories"))),[]),R=(0,u.useCallback)((()=>{_.current&&_.current.pause(),n(null)}),[n,_]),M=[l&&{label:(0,d.__)("Upload a file","web-stories"),value:"upload",onClick:()=>{},mediaPickerProps:{onSelect:T,onSelectErrorMessage:(0,d.__)("Please choose a VTT file to use as caption.","web-stories"),type:i,title:(0,d.__)("Upload an audio file","web-stories"),buttonInsertText:(0,d.__)("Select audio file","web-stories")}},{label:(0,d.__)("Link to a file","web-stories"),value:"hotlink",onClick:()=>{m(!0)}}].filter(Boolean);return c.createElement(c.Fragment,null,!b?.src&&c.createElement(TR,{spaceBetween:!1},l&&c.createElement(s,{onSelect:T,onSelectErrorMessage:w,type:i,title:(0,d.__)("Upload an audio file","web-stories"),buttonInsertText:(0,d.__)("Select audio file","web-stories"),render:O}),c.createElement(wR,{variant:g.BUTTON_VARIANTS.RECTANGLE,type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,onClick:()=>m(!0)},(0,d.__)("Link to audio file","web-stories"))),b?.src&&c.createElement(c.Fragment,null,c.createElement(oR,{id:b.id,src:b.src,title:b.src.split("/").pop(),isExternal:!b.id,options:M,onRemove:R,removeItemLabel:(0,d.__)("Remove file","web-stories")},c.createElement(_R,{title:b.src.substring(b?.src.lastIndexOf("/")+1),src:v,mimeType:b.mimeType,tracks:E,audioId:o,playerRef:_,loop:y})),r&&c.createElement(c.Fragment,null,c.createElement(SR,null,(0,d.__)("Caption and Subtitles","web-stories")),c.createElement(dR,{captionText:(0,d.__)("Upload a file","web-stories"),tracks:E||[],handleChangeTrack:k,handleRemoveTrack:A,renderUploadButton:N})),a&&b?.length>0&&c.createElement(c.Fragment,null,c.createElement(SR,null,(0,d.__)("Options","web-stories")),c.createElement(QC,{spaceBetween:!1},c.createElement(gR,{loop:y,onChange:x})))),c.createElement(zC,{title:(0,d.__)("Insert external background audio","web-stories"),isOpen:p,onError:C,onSelect:S,onClose:()=>m(!1),allowedFileTypes:h,insertText:(0,d.__)("Use audio file","web-stories"),insertingText:(0,d.__)("Selecting audio file","web-stories"),canUseProxy:!r&&!a}))},xR=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"backgroundAudio__HelperText",componentId:"sc-1n4veap-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const AR=function BackgroundAudioPanel(e){let{nameOverride:t}=e;const{capabilities:{hasUploadMediaAction:n}}=U(),{backgroundAudio:r,updateStory:a}=Qa((e=>{let{state:{story:{backgroundAudio:t}},actions:{updateStory:n}}=e;return{backgroundAudio:t,updateStory:n}})),o=(0,u.useCallback)((e=>{a({properties:{backgroundAudio:e}})}),[a]);return r||n?c.createElement(QP,{name:t||"backgroundAudio",title:(0,d.__)("Background Audio","web-stories"),collapsedByDefault:!0},c.createElement(QC,null,c.createElement(xR,null,(0,d.__)("Select an audio file that plays throughout the story.","web-stories"))),c.createElement(QC,null,c.createElement(IR,{backgroundAudio:r,updateBackgroundAudio:o}))):null},kR=(za().shape({capabilities:za().object,description:za().string,hierarchical:za().bool,labels:za().object,name:za().string.isRequired,restBase:za().string.isRequired,showCloud:za().bool,slug:za().string.isRequired,types:za().arrayOf(za().string),visibility:za().object}),(0,p.default)(sp.Headline).attrs({as:"h3",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL}).withConfig({displayName:"shared__ContentHeading",componentId:"sc-1pfee07-0"})(["margin:4px 0 16px;font-weight:",";"],(e=>{let{theme:t}=e;return t.typography.weight.regular}))),OR=(0,p.default)(m.Button).attrs({variant:g.BUTTON_VARIANTS.LINK}).withConfig({displayName:"shared__LinkButton",componentId:"sc-1pfee07-1"})([""," margin-bottom:16px;font-weight:500;"],dp.expandTextPreset(((e,t)=>{let{link:n}=e,{X_SMALL:r}=t;return n[r]}))),PR=p.default.div.withConfig({displayName:"shared__SiblingBorder",componentId:"sc-1pfee07-2"})(["padding-left:16px;padding-right:16px;& + &{border-top:1px solid ",";padding-top:16px;padding-bottom:8px;}"],(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),NR={Heading:(0,p.default)(kR).attrs({as:"h4"}).withConfig({displayName:"shared__Heading",componentId:"sc-1pfee07-3"})(["margin-bottom:4px;"]),Wrapper:p.default.div.withConfig({displayName:"shared__Wrapper",componentId:"sc-1pfee07-4"})(["padding:18px 0px;"]),List:p.default.ul.withConfig({displayName:"shared__List",componentId:"sc-1pfee07-5"})(["all:unset;cursor:pointer;"]),ListItem:p.default.li.withConfig({displayName:"shared__ListItem",componentId:"sc-1pfee07-6"})(["all:unset;"]),Word:(0,p.default)(OR).withConfig({displayName:"shared__Word",componentId:"sc-1pfee07-7"})(["margin:0;display:revert;"])},RR="NO_PARENT_VALUE",MR=p.default.div.withConfig({displayName:"HierarchicalTermSelector__ContentArea",componentId:"sc-17x36f5-0"})(["label,* > label{",";color:",";}"],(e=>{let{theme:t}=e;return dp.expandPresetStyles({preset:t.typography.presets.label[Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL],theme:t})}),(e=>{let{theme:t}=e;return t.colors.fg.secondary})),LR=p.default.form.withConfig({displayName:"HierarchicalTermSelector__AddNewCategoryForm",componentId:"sc-17x36f5-1"})(["margin:24px 0 16px;"]),DR=p.default.div.withConfig({displayName:"HierarchicalTermSelector__ButtonContainer",componentId:"sc-17x36f5-2"})(["display:flex;gap:8px;"]),BR=(0,p.default)(Ke.Text).attrs({forwardedAs:"label",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"HierarchicalTermSelector__Label",componentId:"sc-17x36f5-3"})(["display:inline-block;margin:12px 0;"]),FR=(0,p.default)(m.Button).attrs({variant:g.BUTTON_VARIANTS.RECTANGLE,size:g.BUTTON_SIZES.SMALL,type:g.BUTTON_TYPES.SECONDARY}).withConfig({displayName:"HierarchicalTermSelector__AddNewCategoryButton",componentId:"sc-17x36f5-4"})(["margin-top:20px;"]);const HR=function HierarchicalTermSelector(e){let{noParentId:t=RR,taxonomy:n,canCreateTerms:r}=e;const{createTerm:a,termCache:o,terms:i,setTerms:l}=Xl((e=>{let{state:{termCache:t,terms:n},actions:{createTerm:r,setTerms:a}}=e;return{createTerm:r,setTerms:a,termCache:t,terms:n}})),s=(0,u.useMemo)((()=>o?.[n.restBase]?Object.values(o[n.restBase]).map((e=>({id:e.id,parent:e.parent,value:e.id,label:e.name,checked:i[n.restBase]?.includes(e.id),slug:e.slug}))):[]),[n,o,i]),[p,m]=(0,u.useState)(!1),[g,f]=(0,u.useState)(""),[h,b]=(0,u.useState)(t),E=(0,u.useMemo)(pe.default,[]),[y,_]=(0,u.useState)(!1),v=(0,u.useRef)(),w=(0,u.useRef)(),[T,S]=(0,u.useState)(!1),[C,I]=(0,u.useState)(""),x=(0,u.useCallback)((e=>I(e)),[]),A=(0,wx.default)("assertive"),k=(0,u.useCallback)((()=>{f(""),b(t)}),[t]),O=(0,u.useCallback)(((e,t)=>{let{id:r,checked:a}=t;const o=s.find((e=>e.id===r));l(n,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=e.findIndex((e=>e===o.id));return a&&-1===t?[...e,o.id]:!a&&t>-1?[...e.slice(0,t),...e.slice(t+1)]:e}))}),[s,l,n]),P=(0,u.useCallback)((()=>{m(!p),k(),_(!p),S(p)}),[k,p]),N=(0,u.useCallback)((e=>{f(e.target.value)}),[]),R=(0,u.useMemo)((()=>s.find((e=>e.id===h))?.slug),[h,s]),M=(0,u.useCallback)((e=>{e.preventDefault();a(n,g,{id:h===t?0:h,slug:R},!0),A((0,$e.default)(
/* Translators: %s: Taxonomy label name. */
(0,d.__)("%s added.","web-stories"),n.labels.singular_name)),m(!1),k(),S(p)}),[a,A,g,t,k,h,p,n,R]),L=(0,u.useCallback)(((e,t)=>b(t)),[]);(0,u.useEffect)((()=>{const e=v.current;if(e){const t=e=>{"Enter"===e.key&&M(e)};return e.addEventListener("keypress",t),()=>{e.removeEventListener("keypress",t)}}return null}),[M,v]),(0,u.useEffect)((()=>{T&&w.current.focus()}),[T]);const D=(0,u.useMemo)((()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=Sx(e);return xx(Ix(n,t))}(s,C)),[s,C]),B=(0,u.useMemo)((()=>[{value:RR,label:(0,d._x)("None","parent taxonomy","web-stories")}].concat(D).map((e=>{let{$level:t,label:n,...r}=e;return{...r,label:`${Array.from({length:t},(()=>"— ")).join("")} ${n}`}}))),[D]);return c.createElement(MR,null,c.createElement(kR,null,n.labels.name),c.createElement(Dx,{inputValue:C,onInputChange:x,label:n.labels.searchItems,options:D,onChange:O,noOptionsText:n.labels?.notFound}),r?c.createElement(c.Fragment,null,!p&&c.createElement(OR,{ref:w,"aria-expanded":!1,onClick:P},n.labels.addNewItem),p?c.createElement(LR,{ref:v,onSubmit:M},c.createElement(qv,{autoFocus:!0,name:n.labels.newItemName,label:n.labels.newItemName,value:g,onChange:N,hasFocus:y}),c.createElement(BR,{htmlFor:E},n.labels.parentItem),c.createElement(gx.DropDown,{id:E,ariaLabel:n.labels.parentItem,options:B,selectedValue:h,onMenuItemClick:L}),c.createElement(DR,null,c.createElement(FR,{disabled:!g.length,type:"submit"},n.labels.addNewItem),c.createElement(FR,{"aria-expanded":!0,onClick:P},(0,d.__)("Cancel","web-stories")))):null):null)};function UR(e){return e.replace(/( +)/g," ").trim()}function jR(e){const t=new Map;return e.forEach((e=>{t.set(Go(e),e)})),[...t.values()]}function zR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length===t.length&&e.every((e=>t.includes(e)))}const GR="updateValue",YR="submitValue",ZR="removeTag",WR="resetOffset",VR="resetValue",$R="incrementOffset",qR="decrementOffset",KR="updateTags";const XR=function(e,t){switch(t.type){case GR:{const n=t.payload.split(",");if(n.length<=1)return{...e,value:t.payload};const r=n.slice(0,-1).map(UR).filter((e=>e.length)),a=n[n.length-1];return function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>e.includes(t)))}(r,e.tags)?{...e,value:a}:{...e,value:a,tagBuffer:jR([...e.tags.slice(0,e.tags.length-e.offset),...r,...e.tags.slice(e.tags.length-e.offset)])}}case YR:{const n=UR(t?.payload||e.value);return""===n||e.tags.includes(n)?{...e,value:""}:{...e,value:"",tagBuffer:jR([...e.tags.slice(0,e.tags.length-e.offset),n,...e.tags.slice(e.tags.length-e.offset)])}}case ZR:{const n="string"==typeof t.payload?e.tags.findIndex((e=>e===t.payload)):e.tags.length-1-e.offset;return n<0?e:{...e,tagBuffer:[...e.tags.slice(0,n),...e.tags.slice(n+1,e.tags.length)]}}case $R:return{...e,offset:(0,ec.clamp)(e.offset+1,{MIN:0,MAX:e.tags.length})};case qR:return{...e,offset:(0,ec.clamp)(e.offset-1,{MIN:0,MAX:e.tags.length})};case WR:return{...e,offset:0};case VR:return{...e,value:""};case KR:{const n=e.tags.map((e=>[Go(e),e])),r=t.payload.map((e=>[Go(e),e]));if(zR(n.map((e=>{let[t]=e;return t})),r.map((e=>{let[t]=e;return t}))))return e;const a=n.filter((e=>{let[t]=e;return r.map((e=>{let[t]=e;return t})).includes(t)})).map((e=>{let[,t]=e;return t})),o=r.filter((e=>{let[t]=e;return!n.map((e=>{let[t]=e;return t})).includes(t)})).map((e=>{let[,t]=e;return t}));return{...e,tags:[...a,...o],tagBuffer:null}}default:return e}},QR=p.default.button.withConfig({displayName:"tag__Dismiss",componentId:"sc-14unxs6-0"})(["all:unset;cursor:pointer;border-radius:",";",";width:22px;min-width:22px;height:22px;display:flex;justify-content:center;align-items:center;svg{height:20px;width:20px;margin:auto;}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),up.focusableOutlineCSS),JR=p.default.span.withConfig({displayName:"tag__Token",componentId:"sc-14unxs6-1"})([""," position:relative;display:flex;align-items:center;padding:2px;margin:2px;max-width:calc(100% - 4px);height:32px;"],(e=>{let{theme:t}=e;return(0,p.css)(["color:",";border:1px solid ",";border-radius:",";"],t.colors.fg.primary,t.colors.border.defaultNormal,t.borders.radius.small)})),eM=(0,p.default)(Ke.Text).attrs({forwardedAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"tag__TokenText",componentId:"sc-14unxs6-2"})(["padding-left:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]);const tM=function Tag(e){let{children:t,onDismiss:n}=e;const r=(0,u.useMemo)((()=>(0,pe.default)()),[]);return c.createElement(JR,{"data-testid":"flat-term-token"},c.createElement(eM,{id:r},t),c.createElement(Tooltip,{title:(0,d.__)("Remove Tag","web-stories"),placement:Vd.PLACEMENT.BOTTOM,hasTail:!0,popupZIndexOverride:10},c.createElement(QR,{onClick:n,"aria-label":(0,d.__)("Remove Tag","web-stories"),"aria-describedby":r},c.createElement(cp.default,null))))};function nM(){return nM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nM.apply(this,arguments)}const rM=(0,pe.default)(),aM=p.default.div.withConfig({displayName:"input__Border",componentId:"sc-1nuo5lh-0"})([""," display:flex;flex-direction:column;margin-bottom:6px;"],(e=>{let{theme:t,isInputFocused:n}=e;return(0,p.css)(["color:",";border:1px solid ",";border-radius:",";",";"],t.colors.fg.primary,t.colors.border.defaultNormal,t.borders.radius.small,n&&up.focusCSS)})),oM=p.default.div.withConfig({displayName:"input__InputWrapper",componentId:"sc-1nuo5lh-1"})(["display:flex;flex-wrap:wrap;padding:0;"]),iM=(0,p.default)($v).attrs({type:"text"}).withConfig({displayName:"input__TextInput",componentId:"sc-1nuo5lh-2"})(["width:auto;flex-grow:1;height:32px;margin:2px 0;padding-left:4px;"]),lM=(0,p.default)(pO).withConfig({displayName:"input__SuggestionList",componentId:"sc-1nuo5lh-3"})(["max-height:120px;overflow-y:scroll;border-top:",";display:block;list-style-type:none;width:100%;padding:6px 4px 4px;margin-top:6px;li{cursor:pointer;padding:4px;width:100%;"," border-radius:",";&:hover{background-color:",";}}"],(e=>{let{theme:t}=e;return`1px solid ${t.colors.border.defaultNormal}`}),up.focusableOutlineCSS(),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.bg.tertiary}));const sM=function(e){let{suggestedTerms:t=[],onTagsChange:n,onInputChange:r,suggestedTermsLabel:a,tagDisplayTransformer:o,tokens:i=[],onUndo:l=Lv.noop,...s}=e;const[{value:d,tags:p,offset:m,tagBuffer:g},f]=(0,u.useReducer)(XR,{value:"",tags:[...i],tagBuffer:null,offset:0}),[h,b]=(0,u.useState)(!1),[E,y]=(0,u.useState)(!1),_=(0,u.useRef)(),v=(0,u.useRef)(),w=(0,u.useRef)();(0,u.useEffect)((()=>{f({type:KR,payload:i})}),[i]);const T=(0,pe.default)(),S=t.length;(0,u.useEffect)((()=>{y(S>0)}),[S]);const C=(0,u.useRef)(n);C.current=n,(0,u.useEffect)((()=>{g&&C.current?.(g)}),[g]);const I=(0,u.useRef)(r);I.current=r,(0,u.useEffect)((()=>{I.current?.(d)}),[d]);const{handleFocus:x,handleBlur:A,handleKeyDown:k,handleChange:O,removeTag:P}=(0,u.useMemo)((()=>({handleKeyDown:e=>{""===e.target.value&&("ArrowLeft"===e.key&&f({type:$R}),"ArrowRight"===e.key&&f({type:qR}),"Backspace"===e.key&&f({type:ZR}),"z"===e.key&&e.metaKey&&l(e)),"ArrowDown"===e.key&&t.length>0&&v?.current?.firstChild?.focus(),["Comma",",","Enter"].includes(e.key)&&f({type:YR})},handleChange:e=>{f({type:GR,payload:e.target.value})},removeTag:e=>()=>{f({type:ZR,payload:e}),_?.current.focus()},handleFocus:()=>{b(!0)},handleBlur:()=>{f({type:WR}),b(!1)}})),[l,t]),N=g||p,R=(0,u.useCallback)(((e,t)=>{e.preventDefault(),y(!1),f({type:YR,payload:t}),_?.current.focus()}),[]),M=(0,u.useCallback)(((e,t,n)=>{const r=t+1,a=t-1;"ArrowDown"===e.key&&r<S&&v?.current?.children?.[r]?.focus(),"ArrowUp"===e.key&&(a<0?_?.current.focus():v?.current?.children?.[a]?.focus()),"Enter"===e.key&&R(e,n)}),[R,S]);return c.createElement(aM,{ref:w,isInputFocused:h},c.createElement(oM,null,[...N.slice(0,N.length-m),rM,...N.slice(N.length-m)].map((e=>e===rM?c.createElement(iM,nM({},s,{key:rM,value:d,onKeyDown:k,onChange:O,onFocus:x,onBlur:A,size:"4",ref:_,autoComplete:E?"off":"on","aria-expanded":E,"aria-autocomplete":"list","aria-owns":E?T:null,role:"combobox"})):c.createElement(tM,{key:e,onDismiss:P(e)},o(e)||e)))),E&&c.createElement(lM,{"aria-label":a,role:"listbox",ref:v,id:T,"data-testid":"suggested_terms_list"},t.map(((e,t)=>{let{name:n,id:r}=e;return c.createElement("li",{key:r,"aria-selected":d===n,role:"option",tabIndex:0,onClick:e=>R(e,n),onKeyDown:e=>M(e,t,n)},n)}))))},cM=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"description",componentId:"sc-1gy988t-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),dM=(0,p.default)(Ke.Text).attrs({forwardedAs:"label",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"label",componentId:"sc-1y7bq6c-0"})(["display:inline-block;color:",";margin-bottom:8px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),uM={Input:sM,Description:cM,Label:dM};const pM=function FlatTermSelector(e){let{taxonomy:t,canCreateTerms:n}=e;const[r,a]=(0,u.useState)([]),{createTerm:o,termCache:i,addSearchResultsToCache:l,terms:s=[],setTerms:p,addTermToSelection:m}=Xl((e=>{let{state:{termCache:t,terms:n},actions:{createTerm:r,addSearchResultsToCache:a,setTerms:o,addTermToSelection:i}}=e;return{termCache:t,createTerm:r,addSearchResultsToCache:a,terms:n,setTerms:o,addTermToSelection:i}})),{undo:g}=Br((e=>{let{actions:{undo:t}}=e;return{undo:t}})),[f,h]=(0,u.useState)([]),b=(0,wx.default)("assertive"),E=(0,u.useCallback)((e=>{const r=e.map((e=>[Go(e),e])),a=r.map((e=>{let[t]=e;return t})).map((e=>i[t.restBase]?.[e])).filter((e=>e)).map((e=>e.id));if(zR(s[t.restBase],a)||p(t,a),!n)return;const l=r.filter((e=>{let[n]=e;return!i[t.restBase]?.[n]})).map((e=>{let[,t]=e;return t}));l.forEach((e=>o(t,e,null,!0)))}),[n,s,t,i,p,o]),y=(0,u.useDebouncedCallback)((async e=>{if(0===e.length)return void h([]);if(e.length<3)return;const n=await l(t,{search:e,per_page:20});h(n);const r=n.length,a=(0,$e.default)(
/* translators: %d: number of results. */
(0,d._n)("%d result found.","%d results found.",r,"web-stories"),r);b(a)}),300),_=(0,u.useMemo)((()=>(s[t.restBase]||[]).map((e=>Object.values(i[t.restBase]||{}).find((t=>t.id===e)))).filter((e=>void 0!==e)).map((e=>e.name))),[t,s,i]),v=(0,u.useCallback)((e=>i[t.restBase]?.[Go(e)]?.name),[t,i]);return(0,u.useEffect)((()=>{!async function(){const e=await l(t,{orderby:"count",order:"desc",hide_empty:!0});a(e)}()}),[t,l]),c.createElement(c.Fragment,null,c.createElement(kR,null,t.labels.name),c.createElement("div",{key:t.slug},c.createElement(uM.Label,{htmlFor:`${t.slug}-input`},t.labels.addNewItem),c.createElement(uM.Input,{id:`${t.slug}-input`,"aria-describedby":`${t.slug}-description`,name:t.slug,onTagsChange:E,onInputChange:y,tagDisplayTransformer:v,tokens:_,onUndo:g,suggestedTerms:f,suggestedTermsLabel:t?.labels?.itemsList}),c.createElement(uM.Description,{id:`${t.slug}-description`},t.labels.separateItemsWithCommas),r.length>0&&c.createElement(NR.Wrapper,{"data-testid":`${t.slug}-most-used`},c.createElement(NR.Heading,null,t.labels.mostUsed),c.createElement(NR.List,null,r.map(((e,n)=>c.createElement(NR.ListItem,{key:e.id},c.createElement(NR.Word,{onClick:()=>{s[t.restBase]?.includes(e.id)||m(t,e)}},e.name,n<r.length-1&&
/* translators: delimiter used in a list */
(0,d.__)(",","web-stories")),n<r.length-1&&" ")))))))};function mM(){return mM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mM.apply(this,arguments)}const gM=(0,p.default)(QP).withConfig({displayName:"taxonomies__StyledSimplePanel",componentId:"sc-171mnp-0"})(["padding-left:0;padding-right:0;"]);const fM=function TaxonomiesPanel(e){let{nameOverride:t,...n}=e;const{capabilities:r}=Qa((e=>{let{state:{capabilities:t}}=e;return{capabilities:t}})),{taxonomies:a}=Xl((e=>{let{state:{taxonomies:t}}=e;return{taxonomies:t}}));if(!a?.length)return null;const o=a.filter((e=>Boolean(r[`assign-${e?.restBase}`]||r[`assign-${e?.slug}`])));return 0===o.length?null:c.createElement(gM,mM({name:t||"taxonomies",title:(0,d.__)("Taxonomies","web-stories")},n),o.map((e=>{const t=Boolean(r[`create-${e?.restBase}`]||r[`create-${e?.slug}`]);return c.createElement(PR,{key:e.slug},e.hierarchical?c.createElement(HR,{taxonomy:e,canCreateTerms:t}):c.createElement(pM,{taxonomy:e,canCreateTerms:t}))})))},hM=p.default.div.withConfig({displayName:"flipControls__ControlsContainer",componentId:"sc-1gcq876-0"})(["display:flex;justify-content:left;align-items:flex-start;"]),bM=p.default.div.withConfig({displayName:"flipControls__Space",componentId:"sc-1gcq876-1"})(["width:8px;"]),EM=(0,p.default)(CT).withConfig({displayName:"flipControls__StyledToggleButton",componentId:"sc-1gcq876-2"})(["",";"],pp);const yM=function FlipControls(e){let{value:t,onChange:n}=e;const r=(0,u.useCallback)((e=>!0===t[e]),[t]);return c.createElement(hM,null,c.createElement(Tooltip,{title:(0,d.__)("Flip horizontally","web-stories")},c.createElement(EM,{variant:g.BUTTON_VARIANTS.SQUARE,size:g.BUTTON_SIZES.SMALL,isToggled:!0===t.horizontal,onClick:()=>n({...t,horizontal:!r("horizontal")}),"aria-label":(0,d.__)("Flip horizontally","web-stories")},c.createElement(VE,null))),c.createElement(bM,null),c.createElement(Tooltip,{title:(0,d.__)("Flip vertically","web-stories")},c.createElement(EM,{variant:g.BUTTON_VARIANTS.SQUARE,size:g.BUTTON_SIZES.SMALL,isToggled:!0===t.vertical,onClick:()=>n({...t,vertical:!r("vertical")}),"aria-label":(0,d.__)("Flip vertically","web-stories")},c.createElement(QE,null))))},_M=[{key:"sponsored",title:(0,d.__)("Sponsored","web-stories")},{key:"nofollow",title:(0,d.__)("Nofollow","web-stories")}],vM=p.default.div.withConfig({displayName:"linkRelations__CheckboxWrapper",componentId:"sc-123e3hl-0"})(["display:flex;padding:9px 0;"]),wM=p.default.label.withConfig({displayName:"linkRelations__Label",componentId:"sc-123e3hl-1"})(["margin-left:12px;"]),TM=(0,p.default)(Ke.Text).withConfig({displayName:"linkRelations__StyledText",componentId:"sc-123e3hl-2"})(["color:",";padding:8px 0;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const SM=function LinkRelations(e){let{rel:t,onChangeRel:n}=e;const r=(0,d.__)("https://developers.google.com/search/docs/advanced/guidelines/qualify-outbound-links?hl=en","web-stories"),a=(0,u.useCallback)((e=>{const r=t.includes(e)?t.filter((t=>t!==e)):[...t,e];n(r)}),[n,t]);return c.createElement(QC,null,c.createElement("div",null,c.createElement(TM,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Qualify outbound links","web-stories")),_M.map((e=>{let{key:n,title:r}=e;return c.createElement(vM,{key:n},c.createElement(uS.Checkbox,{id:n,name:n,checked:t?.includes(n),onChange:()=>a(n)}),c.createElement(wM,{htmlFor:n},c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"span"},r)))})),c.createElement(hu.Link,{rel:"noopener noreferrer",target:"_blank",href:r,size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Learn more","web-stories"))))};function CM(e,t){return void 0===e?t:e}const IM=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r="function"==typeof t?t:e=>e[t],a=CM(r(e[0]),n),o=e.every((e=>CM(r(e),n)===a));return o?a:we};const xM=function(e,t,n){const r={},a=e.map((e=>e[t]||n));return Object.keys(n).forEach((e=>{r[e]=IM(a,e)})),r};const AM=function(e,t){return(0,u.useMemo)((()=>{const n=e.map((e=>e[t]));if(0===n.length)return null;if(1===n.length)return n[0];const r={};return n.forEach((e=>{const t=(0,WT.default)((0,ta.default)(e));t in r||(r[t]=e)})),1===Object.keys(r).length?Object.values(r)[0]:we}),[e,t])};const kM=function(e,t,n){const r=xM(e,t,n),a=Object.keys(n).map((e=>r[e]));return(0,u.useMemo)((()=>r),a)};var OM=n(30963);function PM(){return PM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PM.apply(this,arguments)}const NM=(0,u.forwardRef)((function FontPicker(e,t){let{zIndex:n,onChange:r,currentValue:a,highlightStylesOverride:o,showDropdownLabel:i,listStyleOverrides:l,containerStyleOverrides:s,className:p,tabIndex:m}=e;const{fonts:g=[],recentFonts:f=[],curatedFonts:h=[],customFonts:b=[],ensureMenuFontsLoaded:E,ensureCustomFontsLoaded:y,getFontsBySearch:_,getCustomFonts:v,getCuratedFonts:w}=Wo((e=>{let{actions:t,state:n}=e;return{getFontsBySearch:t.getFontsBySearch,ensureMenuFontsLoaded:t.ensureMenuFontsLoaded,ensureCustomFontsLoaded:t.ensureCustomFontsLoaded,getCuratedFonts:t.getCuratedFonts,getCustomFonts:t.getCustomFonts,recentFonts:n.recentFonts,curatedFonts:n.curatedFonts,fonts:n.fonts,customFonts:n.customFonts}}));(0,u.useEffect)((()=>{v(),w()}),[v,w]);const T=(0,u.useMemo)((()=>{const e=new Map;return g.forEach((t=>{e.set(t.id,t)})),b?.forEach((t=>{e.set(t.id,t)})),e}),[g,b]),S=(0,u.useCallback)((e=>{e.length&&(E(e.filter((e=>"fonts.google.com"===T.get(e)?.service))),y(e.filter((e=>"custom"===T.get(e)?.service))))}),[T,y,E]),C=(0,u.useCallback)(((e,t)=>{let{option:n,...r}=e;return c.createElement(OM.default.Option,PM({ref:t},r,{fontFamily:"fonts.google.com"===n.service?`'${n.name}::MENU'`:n.name}),a===n.id&&c.createElement(OM.default.Selected,{"aria-label":(0,d.__)("Selected","web-stories")}),n.name)}),[a]),I=(0,u.useMemo)((()=>[...b?.length?[{label:(0,d.__)("Your fonts","web-stories"),options:b}]:[],...f?.length?[{label:(0,d.__)("Recently used","web-stories"),options:f}]:[]]),[b,f]);return c.createElement(OM.default.DropDown,{ref:t,zIndex:n,tabIndex:m,highlightStylesOverride:o,"data-testid":"font",title:(0,d.__)("Available font families","web-stories"),dropdownButtonLabel:(0,d.__)("Font family","web-stories"),options:g,primaryOptions:h,primaryLabel:(0,d.__)("Recommended","web-stories"),priorityOptionGroups:I,searchResultsLabel:(0,d.__)("Search results","web-stories"),selectedId:we===a?"":a,placeholder:we===a?Te:a,hasSearch:!0,getOptionsByQuery:_,onChange:r,onObserve:S,renderer:(0,u.forwardRef)(C),disabled:!g?.length,dropDownLabel:i?(0,d.__)("Font","web-stories"):null,listStyleOverrides:l,containerStyleOverrides:s,className:p})})),RM=NM;var MM=n(15242);const LM={...Mn.ELEMENT_TYPES,MULTIPLE:"multiple",NONE:"none"};var DM=n(98448);const BM=(0,u.createContext)(null),FM={cleanup:null,focusGroups:{},cleanupCallbacks:{}},HM={addNodeToGroup:(e,t)=>{const{groupId:n,nodeTuple:r}=t.payload,a=e.focusGroups[n]||[];let o=[];const i=a.findIndex((e=>e[0]===r[0]));return o=-1===i?[...a,r]:[...a.slice(0,i),r,...a.slice(0,i+1)],{...e,focusGroups:{...e.focusGroups,[n]:o}}},removeNodeFromGroup:(e,t)=>{const{groupId:n,nodeTuple:r}=t.payload,a=(e.focusGroups[n]||[]).filter((e=>e[0]!==r[0]));return{...e,focusGroups:{...e.focusGroups,[n]:a}}},setFocusGroupCleanup:(e,t)=>{const{groupId:n,cleanup:r}=t.payload;return{...e,activeGroupKey:n,cleanupCallbacks:{...e.cleanupCallbacks,[n]:r}}}};function KeyBindings(e){let{uuid:t,node:n,focusGroup:r,exitFocusGroup:a}=e;const o=(0,u.useCallback)((e=>{e.preventDefault();const n=function(e,t){return function(n){if(!t)return;const r=t.findIndex((t=>t[0]===e));if(-1===r)return;const a=((r+n)%(o=t.length)+o)%o;var o;const[,i]=t[a];i?.focus()}}(t,r);e.shiftKey?n(-1):n(1)}),[r,t]),i=(0,u.useCallback)((e=>{e.preventDefault(),a?.()}),[a]);return(0,Ir.useKeyDownEffect)(n,{key:["tab"],allowDefault:!0,editable:!0,shift:!0},o,[o]),(0,Ir.useKeyDownEffect)(n,{key:["esc"],allowDefault:!0,editable:!0},i,[i]),null}KeyBindings.propTypes={uuid:za().string.isRequired,node:"undefined"!=typeof Element?za().instanceOf(Element).isRequired:za().any.isRequired,focusGroup:za().array.isRequired,exitFocusGroup:za().func};const UM=KeyBindings;const jM=function EditLayerFocusManager(e){let{children:t}=e;const[n,r]=(0,u.useReduction)(FM,HM),a=(0,u.useRef)(n);a.current=n;const o=(0,u.useCallback)((e=>{let{groupId:t}=e;const n=a.current.focusGroups?.[t]?.[0];if(n){const[,e]=n;e.focus()}}),[a]),i=Object.entries(n.focusGroups),l=n.cleanupCallbacks;return c.createElement(BM.Provider,{value:{enterFocusGroup:o,setFocusGroupCleanup:r.setFocusGroupCleanup,actions:r}},i.map((e=>{let[t,n]=e;return n.map((e=>{let[r,a]=e;return a&&c.createElement(UM,{key:r,uuid:r,node:a,focusGroup:n,exitFocusGroup:l[t]})}))})),t)};const zM=function(e){const t=(0,u.useContextSelector)(BM,(e=>e.actions)),n=(0,u.useInitializedValue)(pe.default);return(0,u.useCallback)((r=>{null!==r?t.addNodeToGroup({groupId:e,nodeTuple:[n,r]}):t.removeNodeFromGroup({groupId:e,nodeTuple:[n,r]})}),[t,e,n])};const GM=function(e){return(0,u.useContextSelector)(BM,e??u.identity)},YM={EDIT_ELEMENT:"EDIT_ELEMENT",ELEMENT_SELECTION:"ELEMENT_SELECTION"},ZM=(0,u.createContext)({state:{},actions:{}});const WM=function(e){return(0,u.useContextSelector)(ZM,e??u.identity)};const VM=function FloatingMenuProvider(e){let{handleDismiss:t,children:n}=e;const r={state:{},actions:{handleDismiss:t}};return c.createElement(ZM.Provider,{value:r},n)},$M={left:0,right:0,top:0,bottom:0,lockedWidth:!0,color:(0,bw.default)(0,0,0)};function qM(){return qM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qM.apply(this,arguments)}const KM=function FloatingColor(e){const{hasInputs:t,hasEyedropper:n,allowsGradient:r=!0}=e,a=function(e,t){return(e?184:60)+(t?38:0)}(t,n);return c.createElement(dC,qM({width:a,maxHeight:362,pickerPlacement:Vd.PLACEMENT.TOP_START,isInDesignMenu:!0,allowsGradient:r,allowsSavedColors:!0,allowsSavedColorDeletion:!1,pickerHasEyedropper:!n,containerLabelBase:(0,d.__)("Color input (floating menu)","web-stories")},e))};var XM=n(87098);function QM(){return QM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QM.apply(this,arguments)}const JM=p.default.div.withConfig({displayName:"icon__IconWrapper",componentId:"sc-scm7dy-0"})(["width:32px;height:32px;display:flex;align-items:center;justify-content:center;> *{flex:1;}"]);const eL=function(e){let{children:t,title:n,className:r="",...a}=e;return c.createElement(c.Fragment,null,c.createElement(XM.VisuallyHidden,null,n),c.createElement(JM,QM({className:r},a),t))};var tL=n(51537);function nL(){return nL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nL.apply(this,arguments)}const rL=(0,u.forwardRef)((function ToggleButton(e,t){let{isToggled:n,children:r,...a}=e;const o="boolean"==typeof n?{type:n?g.BUTTON_TYPES.SECONDARY:g.BUTTON_TYPES.TERTIARY,"aria-pressed":n,role:"button"}:{};return c.createElement(tL.default,nL({ref:t},o,a),r)}));function aL(){return aL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aL.apply(this,arguments)}const oL=(0,u.memo)((0,u.forwardRef)((function IconButton(e,t){let{Icon:n,...r}=e;return c.createElement(Tooltip,{placement:Vd.PLACEMENT.BOTTOM,title:r.title},c.createElement(rL,aL({ref:t,tabIndex:-1},r),c.createElement(eL,{title:r.title},c.createElement(n,null))))}))),iL=oL,lL=(0,p.default)(VS).attrs({inputClassName:dw.CONTEXT_MENU_SKIP_ELEMENT}).withConfig({displayName:"input__Input",componentId:"sc-79zl03-0"})(["width:70px;flex:0 0 70px;"]);var sL=n(77568);const cL=sL.default;function dL(){return dL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dL.apply(this,arguments)}const uL=(0,p.default)(tL.default).withConfig({displayName:"text__Button",componentId:"sc-fb6dx4-0"})(["font-size:14px;padding:0 12px;font-weight:normal;letter-spacing:normal;"]),pL=(0,u.memo)((function TextButton(e){let{text:t,...n}=e;return c.createElement(uL,dL({forcePadding:!0,title:t},n,{tabIndex:-1}),t)}));const mL=function(e){return Qa((t=>{let{state:{selectedElements:n}}=t;return er(n[0],e)}))};function gL(e,t){return Object.fromEntries(Object.keys(t).map((n=>{const r=e[n]===we,a=void 0!==e[n]&&!function(e,t){const n=e&&"object"==typeof e&&(e.type||e.color),r=t&&"object"==typeof t&&(t.type||t.color);return n&&r?(0,ZT.default)(e,t):e===t}(e[n],t[n]);return r||a?[n,we]:[n,t[n]]})))}const fL=function(e,t){const{hasCurrentEditor:n,selectionInfo:r,selectionActions:a}=(0,Kr.useRichText)((e=>{let{state:t,actions:n}=e;return{hasCurrentEditor:t.hasCurrentEditor,selectionInfo:t.selectionInfo,selectionActions:n.selectionActions}})),{clearEditing:o}=Xs((e=>{let{actions:{clearEditing:t}}=e;return{clearEditing:t}})),i=(0,u.useMemo)((()=>n?r:e.map((e=>{let{content:t}=e;return t})).map(Kr.getHTMLInfo).reduce(gL,{})),[n,r,e]),l=(0,u.useCallback)((function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t((t=>{let{content:n}=t;return{content:e(n,...r)}}),!0)}),[t]),s=(0,u.useRef)(null),c=(0,u.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];s.current=t}),[s]);(0,u.useEffect)((()=>{const e=s.current;e&&(l(...e),s.current=null)}),[e,s,l]);const d=(0,u.useMemo)((()=>{const e=(0,Kr.getHTMLFormatters)();return n?{handleClickBold:()=>a.toggleBoldInSelection(),handleSelectFontWeight:a.setFontWeightInSelection,handleClickItalic:a.toggleItalicInSelection,handleClickUnderline:a.toggleUnderlineInSelection,handleClickUppercase:a.toggleUppercaseInSelection,handleSetLetterSpacing:a.setLetterSpacingInSelection,handleSetColor:a.setColorInSelection,handleResetFontWeight:async t=>{await o(),c(e.setFontWeight,t)}}:{handleClickBold:t=>l(e.toggleBold,t),handleSelectFontWeight:t=>l(e.setFontWeight,t),handleClickItalic:t=>l(e.toggleItalic,t),handleClickUnderline:t=>l(e.toggleUnderline,t),handleClickUppercase:t=>l(e.toggleUppercase,t),handleSetLetterSpacing:t=>l(e.setLetterSpacing,t),handleSetColor:t=>l(e.setColor,t),handleResetFontWeight:t=>l(e.setFontWeight,t)}}),[n,a,l,o,c]),p=(0,u.useCallback)((()=>e.filter((e=>{let{type:t}=e;return"text"===t})).length>0),[e]);return(0,Ir.useGlobalKeyDownEffect)({key:["mod+b","mod+u","mod+i"]},(e=>{let{key:t}=e;if(p)switch(t){case"b":d.handleClickBold();break;case"i":d.handleClickItalic();break;case"u":d.handleClickUnderline()}}),[d,p]),{textInfo:i,handlers:d}};const hL=function(e){let{currentValue:t,handler:n,eventName:r}=e;const{content:a}=mL(["content"]),o=Qa((e=>e.actions.updateSelectedElements)),i=(0,u.useCallback)((e=>{(0,P.trackEvent)("floating_menu",{name:r,element:"text"}),o({properties:t=>_v(t,e,!0)})}),[o,r]),{textInfo:l,handlers:s}=fL([{content:a,type:"text"}],i);return{isToggled:l[t],toggle:()=>{(0,s[n])(!l[t])}}},bL=p.default.div.withConfig({displayName:"borderWidthAndColor__Container",componentId:"sc-1qijom4-0"})(["display:flex;align-items:center;"]),EL=p.default.div.withConfig({displayName:"borderWidthAndColor__Dash",componentId:"sc-1qijom4-1"})(["width:8px;height:1px;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}));const yL={color:{r:0,g:0,b:0}},_L=(0,d.__)("Border width","web-stories"),vL=(0,d.__)("Border color","web-stories");const wL=function BorderWidthAndColor(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{border:n=$M,mask:r,type:a}=mL(["border","mask","type"]),o=Qa((e=>{let{actions:t}=e;return t.updateSelectedElements})),i=n?.left===n?.right&&n?.left===n?.top&&n?.left===n?.bottom;if(!n?.lockedWidth&&!i)return null;const l=(0,$n.canSupportMultiBorder)({mask:r}),s=function(e){if(!e)return!1;const{left:t,right:n,top:r,bottom:a}=e;return Boolean(t||n||r||a)}(n);return c.createElement(bL,null,c.createElement(gw,{ref:t,inputRef:e,inputLabel:_L},c.createElement(lL,{tabIndex:-1,ref:e,suffix:c.createElement(Gf,null),value:n?.left||0,"aria-label":_L,onChange:(e,t)=>(e=>{(0,P.trackEvent)("floating_menu",{name:"set_border_width",element:a}),o({properties:t=>{let{border:r}=t;return{border:{locked:!0,color:n?.color,...r,left:e,right:e,top:e,bottom:e}}}})})(t),onKeyDown:e=>{mw(e,t)}})),s&&c.createElement(c.Fragment,null,c.createElement(EL,null),c.createElement(KM,{tabIndex:-1,label:vL,value:n?.color||yL,onChange:e=>{(0,P.trackEvent)("floating_menu",{name:"set_border_color",element:a}),o({properties:t=>{let{border:n}=t;return{border:{...n,color:e}}}})},hasInputs:!1,hasEyedropper:!1,allowsOpacity:l,allowsGradient:!1,allowsSavedColors:!1})))},TL=(0,p.css)(["position:relative;:focus-within{z-index:1;",";}"],(e=>{let{theme:t}=e;return up.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),SL=(0,p.css)(["width:29px;height:29px;"]),CL=(0,p.default)(VS).withConfig({displayName:"stackableInput__StackableInput",componentId:"sc-bgp531-0"})(["svg{","}& > div{border-radius:0;margin-left:-1px;padding:2px 7px 2px 12px;",";}"],SL,TL),IL=p.default.div.withConfig({displayName:"stackableGroup__StackableContainer",componentId:"sc-ogfpu5-0"})(["display:flex;max-width:",";& > ","{border-radius:0;&:first-of-type > div{border-top-left-radius:4px;border-bottom-left-radius:4px;margin-left:0;}&:last-of-type > div{border-top-right-radius:4px;border-bottom-right-radius:4px;}}",""],(e=>{let{locked:t}=e;return t?"106px":"none"}),CL,(e=>{let{$stackableGroupStyleOverride:t}=e;return t}));const xL=function StackableGroup(e){let{children:t,locked:n,className:r,stackableGroupStyleOverride:a}=e;return c.createElement(IL,{$stackableGroupStyleOverride:a,locked:n,className:r},t)},AL={topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,locked:!0},kL=p.default.div.withConfig({displayName:"radius__FlexContainer",componentId:"sc-10ryvqs-0"})(["display:flex;"]),OL=p.default.div.withConfig({displayName:"radius__LockContainer",componentId:"sc-10ryvqs-1"})(["position:relative;display:flex;align-items:center;width:32px;margin-left:8px;"]),PL=(0,p.default)(LockToggle).withConfig({displayName:"radius__StyledLockToggle",componentId:"sc-10ryvqs-2"})(["",";"],pp),NL=(0,p.default)(Fh).withConfig({displayName:"radius__TopLeft",componentId:"sc-10ryvqs-3"})(["transform:rotate(90deg);"]),RL=(0,p.default)(Fh).withConfig({displayName:"radius__TopRight",componentId:"sc-10ryvqs-4"})(["transform:rotate(180deg);"]),ML=(0,p.default)(Fh).withConfig({displayName:"radius__BottomRight",componentId:"sc-10ryvqs-5"})(["transform:rotate(270deg);"]);const LL=function RadiusControls(e){let{selectedElements:t,pushUpdateForObject:n,stackableGroupStyleOverride:r}=e;const a=kM(t,"borderRadius",AL),o=t.every((e=>(0,$n.canSupportMultiBorder)(e))),i=!0===a.locked,l=(0,u.useCallback)(((e,t)=>{n("borderRadius",i?{topLeft:t,topRight:t,bottomRight:t,bottomLeft:t}:{[e]:t},AL,!0)}),[n,i]),s=(0,u.useCallback)((e=>{const t=e?{locked:e,topLeft:a.topLeft,topRight:a.topLeft,bottomRight:a.topLeft,bottomLeft:a.topLeft}:{locked:e};n("borderRadius",t,AL,!0)}),[n,a]);if(!o)return null;const p=i?(0,d.__)("Corner Radius","web-stories"):(0,d.__)("Top left corner radius","web-stories");return c.createElement(kL,null,c.createElement(xL,{stackableGroupStyleOverride:r,locked:i},c.createElement(CL,{suffix:c.createElement(NL,null),value:a.topLeft===we?"":a.topLeft,"aria-label":p,onChange:(e,t)=>l("topLeft",t),placeholder:a.topLeft===we?Te:"",isIndeterminate:a.topLeft===we}),!i&&c.createElement(c.Fragment,null,c.createElement(CL,{suffix:c.createElement(RL,null),value:a.topRight===we?"":a.topRight,"aria-label":(0,d.__)("Top right corner radius","web-stories"),onChange:(e,t)=>l("topRight",t),placeholder:a.topRight===we?Te:"",isIndeterminate:a.topRight===we}),c.createElement(CL,{value:a.bottomLeft===we?"":a.bottomLeft,"aria-label":(0,d.__)("Bottom left corner radius","web-stories"),onChange:(e,t)=>l("bottomLeft",t),placeholder:a.bottomLeft===we?Te:"",suffix:c.createElement(Fh,null),isIndeterminate:a.bottomLeft===we}),c.createElement(CL,{value:a.bottomRight===we?"":a.bottomRight,"aria-label":(0,d.__)("Bottom right corner radius","web-stories"),onChange:(e,t)=>l("bottomRight",t),placeholder:a.bottomRight===we?Te:"",suffix:c.createElement(ML,null),isIndeterminate:a.bottomRight===we}))),c.createElement(OL,null,c.createElement(Tooltip,{title:(0,d.__)("Toggle consistent corner radius","web-stories"),key:a.locked.toString()},c.createElement(PL,{isLocked:a.locked,onClick:()=>s(!a.locked),"aria-label":(0,d.__)("Toggle consistent corner radius","web-stories")}))))},DL=(0,d.__)("Corner Radius","web-stories");const BL=function BorderRadius(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{borderRadius:n=AL,mask:r,type:a}=mL(["borderRadius","mask","type"]),o=Qa((e=>e.actions.updateSelectedElements)),i=(0,$n.canSupportMultiBorder)({mask:r}),l=n.topLeft===n.topRight&&n.topLeft===n.bottomLeft&&n.topLeft===n.bottomRight;return i&&(n.locked||l)?c.createElement(gw,{ref:t,inputRef:e,inputLabel:DL},c.createElement(lL,{tabIndex:-1,ref:e,suffix:c.createElement(Fh,null),value:n.topLeft,"aria-label":DL,onChange:(e,t)=>(e=>{(0,P.trackEvent)("floating_menu",{name:"set_border_radius",element:a}),o({properties:{borderRadius:{locked:!0,topLeft:e,topRight:e,bottomRight:e,bottomLeft:e}}})})(t),onKeyDown:e=>{mw(e,t)}}),c.createElement(cL,null)):null};const FL=function(e){let{isMultiple:t}=e;const{type:n}=mL(["type"]),{handleDismiss:r}=WM((e=>{let{actions:{handleDismiss:t}}=e;return{handleDismiss:t}}));return c.createElement(iL,{Icon:cp.default,title:(0,d.__)("Dismiss menu","web-stories"),onClick:()=>{(0,P.trackEvent)("floating_menu",{name:"dismiss_menu",element:t?"multiple":n}),r()}})},HL={startX:0,startY:0,endX:ee.PAGE_WIDTH,endY:ee.PAGE_HEIGHT,width:ee.PAGE_WIDTH,height:ee.PAGE_HEIGHT},UL="left",jL="right",zL="top",GL="bottom";const YL=function(e){let{selectedElements:t,updateElements:n,isFloatingMenu:r}=e;const a=t.length>2,o=(0,u.useMemo)((()=>t.map((e=>{const{id:t,groupId:n,x:r,y:a,width:o,height:i,rotationAngle:l}=e;let s=r,c=a,d=o,u=i;if(l){const e=(0,fO.calcRotatedObjectPositionAndSize)(l,r,a,o,i);s=e.x,c=e.y,d=e.width,u=e.height}return{id:t,groupId:n,x:r,y:a,width:o,height:i,frameX:s,frameY:c,frameWidth:d,frameHeight:u}}))),[t]),i=t[0].groupId,l=i&&t.every((e=>e.groupId&&e.groupId===i)),s=1===t.length||l?HL:(0,fO.default)(t),c=e=>{(0,P.trackEvent)(r?"floating_menu":"design_panel",{name:`set_alignment_${e}`,element:"multiple"})},d=e=>{c(e),n((n=>{const{id:r,groupId:a}=n,i=a?(0,fO.default)(t.filter((e=>e.groupId===a))):null,l=o.find((e=>e.id===r)),{width:c=0,height:d=0,frameWidth:u=0,frameHeight:p=0}=l||{},m=e===UL||e===jL?(u-c)/2:(p-d)/2,g=a?e===UL||e===jL?l.frameX-i.startX:l.frameY-i.startY:0,f=a?i.width:c,h=a?i.height:d;return e===UL||e===jL?{x:e===UL?s.startX+m+g:s.endX-f-m+g}:{y:e===zL?s.startY+m+g:s.endY-h-m+g}}))};return{isDistributionEnabled:a,handleAlignLeft:()=>d(UL),handleAlignCenter:()=>{c("center");const e=(s.endX+s.startX)/2;n((n=>{const{id:r,width:a,groupId:i}=n,l=i?(0,fO.default)(t.filter((e=>e.groupId===i))):null,s=i?l.width:a,c=o.find((e=>e.id===r)),d=i?c.frameX-l.startX:0;return{x:e-s/2+d}}))},handleAlignRight:()=>d(jL),handleAlignTop:()=>d(zL),handleAlignMiddle:()=>{c("middle");const e=(s.endY+s.startY)/2;n((n=>{const{id:r,height:a,groupId:i}=n,l=i?(0,fO.default)(t.filter((e=>e.groupId===i))):null,s=i?l.height:a,c=o.find((e=>e.id===r)),d=i?c.frameY-l.startY:0;return{y:e-s/2+d}}))},handleAlignBottom:()=>d(GL),handleHorizontalDistribution:()=>{c("horizontal_distribution");const e=[...o];e.sort(((e,t)=>(e.frameX+e.frameWidth)/2-(t.frameX+t.frameWidth)/2));const t=e.reduce(((e,t)=>e+t.frameWidth),0),r=s.width-t,a=(0,aa.dataPixels)(r/(e.length-1)),i={};let l=0;e.forEach(((t,n)=>{const{id:r,x:o,width:s,frameWidth:c}=t;0===n||n===e.length-1?(i[r]={x:o},l=o):i[r]={x:l+(c-s)/2},l+=c+a})),n((e=>{let{id:t}=e;return i[t]}))},handleVerticalDistribution:()=>{c("vertical_distribution");const e=[...o];e.sort(((e,t)=>(e.frameY+e.frameHeight)/2-(t.frameY+t.frameHeight)/2));const t=e.reduce(((e,t)=>e+t.frameHeight),0),r=s.height-t,a=(0,aa.dataPixels)(r/(e.length-1)),i={};let l=0;e.forEach(((t,n)=>{const{id:r,y:o,height:s,frameHeight:c}=t;0===n||n===e.length-1?(i[r]={y:o},l=o):i[r]={y:l+(c-s)/2},l+=c+a})),n((e=>{let{id:t}=e;return i[t]}))}}};const ZL=function ElementAlignment(){const{selectedElements:e,updateSelectedElements:t}=Qa((e=>{let{state:{selectedElements:t},actions:{updateSelectedElements:n}}=e;return{selectedElements:t,updateSelectedElements:n}})),{isDistributionEnabled:n,handleAlignLeft:r,handleAlignCenter:a,handleAlignRight:o,handleAlignTop:i,handleAlignMiddle:l,handleAlignBottom:s,handleHorizontalDistribution:u,handleVerticalDistribution:p}=YL({selectedElements:e,updateElements:e=>t({properties:e}),isFloatingMenu:!0});return c.createElement(c.Fragment,null,n&&c.createElement(c.Fragment,null,c.createElement(iL,{Icon:Yh,title:(0,d.__)("Distribute horizontally","web-stories"),onClick:u}),c.createElement(iL,{Icon:$h,title:(0,d.__)("Distribute vertically","web-stories"),onClick:p}),c.createElement(cL,null)),c.createElement(iL,{Icon:Hg,title:(0,d.__)("Align left","web-stories"),onClick:r}),c.createElement(iL,{Icon:Lg,title:(0,d.__)("Align center","web-stories"),onClick:a}),c.createElement(iL,{Icon:Vg,title:(0,d.__)("Align right","web-stories"),onClick:o}),c.createElement(iL,{Icon:df,title:(0,d.__)("Align top","web-stories"),onClick:i}),c.createElement(iL,{Icon:Gg,title:(0,d.__)("Align vertical center","web-stories"),onClick:l}),c.createElement(iL,{Icon:Pg,title:(0,d.__)("Align bottom","web-stories"),onClick:s}))};const WL=function(e){const{flip:t,type:n}=mL(["flip","type"]),r=Qa((e=>e.actions.updateSelectedElements));return{[e]:t[e]||!1,toggle:()=>{(0,P.trackEvent)("floating_menu",{name:`set_flip_${e}`,element:n}),r({properties:t=>({flip:{...t.flip,[e]:!t.flip[e]||!1}})})}}};const VL=function FlipHorizontal(){const{horizontal:e,toggle:t}=WL("horizontal");return c.createElement(iL,{Icon:VE,title:(0,d.__)("Flip horizontally","web-stories"),onClick:t,isToggled:e})};const $L=function FlipVertical(){const{vertical:e,toggle:t}=WL("vertical");return c.createElement(iL,{Icon:QE,title:(0,d.__)("Flip vertically","web-stories"),onClick:t,isToggled:e})};const qL=function(e){const{width:t,height:n,rotationAngle:r,x:a,y:o}=e,i=(0,aa.dataPixels)((0,Kn.calculateTextHeight)(e,t)),[l,s]=(0,Fc.default)(r,0,0,0,i-n);return{height:i,x:(0,aa.dataPixels)(a+l),y:(0,aa.dataPixels)(o+s)}},KL=400;const XL=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:KL,t=arguments.length>1?arguments[1]:void 0;return e=parseInt(e),isNaN(parseInt(e))?KL:t&&0!==t.length?t.reduce(((t,n)=>{t=parseInt(t),n=parseInt(n);const r=Math.abs(t-e),a=Math.abs(n-e);return r===a?t<n?t:n:a<r?n:t})):e};function QL(){return QL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QL.apply(this,arguments)}const JL=(0,u.forwardRef)((function StoryFontPicker(e,t){let{...n}=e;const{updateSelectedElements:r,selectedElements:a}=Qa((e=>{let{state:t,actions:n}=e;return{updateSelectedElements:n.updateSelectedElements,selectedElements:t.selectedElements}})),o=(0,u.useCallback)(((e,t)=>{r({properties:n=>{const r=_v(n,e,t),a=qL({...n,...r});return{...r,...a}}})}),[r]),{textInfo:{fontWeight:i,isItalic:l},handlers:{handleResetFontWeight:s}}=fL(a,o),{addRecentFont:d,maybeEnqueueFontStyle:p}=Wo((e=>{let{actions:t}=e;return{addRecentFont:t.addRecentFont,maybeEnqueueFontStyle:t.maybeEnqueueFontStyle}})),m=IM(a,(e=>{let{font:t}=e;return t?.family})),g=l?"italic":"normal",f=(0,u.useCallback)((async e=>{const{id:t,name:n,value:r,...l}=e;(0,P.trackEvent)("font_family_changed",{name:n}),await p(a.map((e=>{let{content:t}=e;return{font:l,fontStyle:g,fontWeight:i,content:(0,zr.stripHTML)(t)}}))),d(e),o({font:l},!0);const c=XL(400,l.weights);await s(c)}),[d,g,i,p,o,a,s]);return c.createElement(RM,QL({onChange:f,currentValue:m},n,{ref:t}))})),eD=JL,tD=(0,p.default)(eD).withConfig({displayName:"fontFamily__StyledFontPicker",componentId:"sc-sk3dxe-0"})(["width:164px;"]),nD=(0,p.css)(["max-height:200px;"]),rD=(0,p.css)(["border:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}));const aD=function FontFamily(){return c.createElement(tD,{tabIndex:-1,listStyleOverrides:nD,containerStyleOverrides:rD})};const oD=function(e){const t=[{label:me[400],value:"400"}];return e?.weights?e.weights.map((e=>({label:me[e],value:e.toString()}))):t},iD={MIN:8,MAX:800},lD=p.default.div.withConfig({displayName:"font__Space",componentId:"sc-1upk4a3-0"})(["flex:0 0 10px;"]),sD=(0,p.default)(VS).withConfig({displayName:"font__StyledNumericInput",componentId:"sc-1upk4a3-1"})(["flex-basis:80px;text-align:center;"]),cD=(0,p.default)(gx.DropDown).withConfig({displayName:"font__StyledDropDown",componentId:"sc-1upk4a3-2"})(["background-color:transparent;"]);const dD=function FontControls(e){let{selectedElements:t,pushUpdate:n,highlightStylesOverride:r,fontDropdownRef:a}=e;const o=IM(t,(e=>{let{font:t}=e;return t?.family})),i=IM(t,"fontSize"),{textInfo:{fontWeight:l,isItalic:s},handlers:{handleSelectFontWeight:p}}=fL(t,n),{fonts:m=[],maybeEnqueueFontStyle:g,getFontByName:f}=Wo((e=>{let{actions:{maybeEnqueueFontStyle:t,getFontByName:n},state:{fonts:r}}=e;return{maybeEnqueueFontStyle:t,getFontByName:n,fonts:r}})),h=(0,u.useMemo)((()=>oD(f(o))),[f,o]),b=s?"italic":"normal",E=(0,u.useCallback)((async(e,n)=>{await g(t.map((e=>{let{font:t,content:r}=e;return{font:t,fontStyle:b,fontWeight:parseInt(n),content:(0,zr.stripHTML)(r)}}))),p(n)}),[b,p,g,t]);return PI((e=>{let{fontSize:t}=e;return{fontSize:(0,ec.clamp)(t,iD)}}),[]),c.createElement(c.Fragment,null,m&&c.createElement(QC,null,c.createElement(eD,{ref:a,highlightStylesOverride:r,showDropdownLabel:!0})),c.createElement(QC,null,h&&c.createElement(c.Fragment,null,c.createElement(cD,{ariaLabel:(0,d.__)("Font weight","web-stories"),placeholder:Te,options:h,selectedValue:we===l?"":l,onMenuItemClick:E,selectButtonStylesOverride:pp}),c.createElement(lD,null)),c.createElement(sD,{"aria-label":(0,d.__)("Font size","web-stories"),isFloat:!0,value:i,onChange:(e,t)=>n({fontSize:t},!0),min:iD.MIN,max:iD.MAX,isIndeterminate:we===i,placeholder:we===i?Te:null,containerStyleOverride:mp})))},uD=(0,p.default)(VS).attrs({inputClassName:dw.CONTEXT_MENU_SKIP_ELEMENT}).withConfig({displayName:"fontSize__Input",componentId:"sc-17k2x26-0"})(["width:50px;flex:0 0 50px;"]),pD=(0,d.__)("Font size","web-stories");const mD=function FontSize(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{fontSize:n,updateSelectedElements:r}=Qa((e=>{let{state:t,actions:n}=e;return{fontSize:t.selectedElements[0].fontSize,updateSelectedElements:n.updateSelectedElements}})),a=(0,u.useCallback)((e=>{(0,P.trackEvent)("floating_menu",{name:"set_font_size"}),r({properties:t=>{const n=_v(t,e,!0),r=qL({...t,...n});return{...n,...r}}})}),[r]);return c.createElement(gw,{ref:t,inputRef:e,inputLabel:pD},c.createElement(uD,{tabIndex:-1,ref:e,"aria-label":pD,isFloat:!0,value:n,onChange:(e,t)=>a({fontSize:t}),min:iD.MIN,max:iD.MAX,placeholder:n,containerStyleOverride:mp,selectButtonStylesOverride:pp,onKeyDown:e=>{mw(e,t)}}))},gD={MIN:0,MAX:100};function fD(e){let{opacity:t}=e;return void 0!==t?t:gD.MAX}const hD=function OpacityControls(e){let{selectedElements:t,pushUpdate:n}=e;const r=IM(t,fD),a=(0,u.useCallback)(((e,t)=>n({opacity:t??100},!0)),[n]);return c.createElement(VS,{suffix:c.createElement(Lh,null),unit:(0,d._x)("%","Percentage","web-stories"),value:r,onChange:a,min:gD.MIN,max:gD.MAX,"aria-label":(0,d.__)("Opacity in percent","web-stories"),placeholder:r===we?Te:"",isIndeterminate:r===we,containerStyleOverride:mp})},bD=(0,p.default)(VS).withConfig({displayName:"layerOpacity__Input",componentId:"sc-1pptz1t-0"})(["width:82px;flex:0 0 82px;"]),ED=(0,d.__)("Opacity in percent","web-stories");const yD=function LayerOpacity(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{opacity:n,type:r}=mL(["opacity","type"]),a=Qa((e=>e.actions.updateSelectedElements));return c.createElement(gw,{ref:t,inputRef:e,inputLabel:ED},c.createElement(bD,{ref:e,tabIndex:-1,suffix:c.createElement(Lh,null),unit:(0,d._x)("%","Percentage","web-stories"),value:n||0,"aria-label":ED,onChange:(e,t)=>{a({properties:()=>({opacity:t??100})}),(0,P.trackEvent)("floating_menu",{name:"set_opacity",element:r})},inputClassName:dw.CONTEXT_MENU_SKIP_ELEMENT,onKeyDown:e=>{mw(e,t)},min:gD.MIN,max:gD.MAX}))},_D=(0,p.default)(gR).withConfig({displayName:"loop__StyledLoopContent",componentId:"sc-154lze5-0"})(["gap:8px;"]);const vD=function Loop(){const{loop:e}=mL(["loop"]),t=Qa((e=>e.actions.updateSelectedElements));return c.createElement(_D,{tabIndex:-1,loop:e,onChange:()=>{(0,P.trackEvent)("floating_menu",{name:"set_loop"}),t({properties:e=>{let{loop:t}=e;return{loop:!t}}})}})};const wD=function More(){const e=mm((e=>{let{setHighlights:t}=e;return t})),t=Qa((e=>{let{state:t}=e;return t.selectedElements[0].type}));return c.createElement(pL,{text:(0,d._x)("More","Link to more options in design panel for selected element","web-stories"),onClick:()=>{e({highlight:_g.STYLE_PANE}),(0,P.trackEvent)("floating_menu",{name:"click_more_button",element:t})}})};const TD=function(e){let{resource:t,elementId:n,isSingleElement:r=!0}=e;const{isTranscodingEnabled:a}=lo(),{muteExistingVideo:o,isElementTrimming:i,isNewResourceMuting:l,canTranscodeResource:s}=Yl((e=>{let{state:{canTranscodeResource:t,isNewResourceMuting:n,isElementTrimming:r},actions:{muteExistingVideo:a}}=e;return{canTranscodeResource:t,isNewResourceMuting:n,isElementTrimming:r,muteExistingVideo:a}})),{isMuted:c,id:d=0}=t,p=!!r&&i(n),m=l(d),g=(0,u.useCallback)((()=>{o({resource:t})}),[t,o]),f=!s(t),h=a&&r&&(!c&&s(t)||m),{hasTrimMode:b,toggleTrimMode:E}=Nv((e=>{let{state:{hasTrimMode:t},actions:{toggleTrimMode:n}}=e;return{hasTrimMode:t,toggleTrimMode:n}}));return{state:{canTrim:b,canMute:h,isTrimming:p,isMuting:m,isDisabled:f},actions:{handleMute:g,handleTrim:E}}};const SD=function Mute(){const{id:e,resource:t}=mL(["id","resource"]),{state:{canMute:n,isMuting:r,isDisabled:a},actions:{handleMute:o}}=TD({elementId:e,resource:t});if(!n)return null;const i=r?(0,d.__)("Removing audio","web-stories"):(0,d.__)("Remove audio","web-stories");return c.createElement(iL,{Icon:oy,title:i,disabled:a||r,onClick:e=>{(0,P.trackEvent)("floating_menu",{name:"set_mute"}),o(e)}})};const CD=function ShapeColor(){const{backgroundColor:e,updateSelectedElements:t}=Qa((e=>{let{state:t,actions:n}=e;return{backgroundColor:t.selectedElements[0].backgroundColor,updateSelectedElements:n.updateSelectedElements}})),n=(0,u.useCallback)((e=>{(0,P.trackEvent)("floating_menu",{name:"set_shape_color",element:"shape"}),t({properties:()=>({backgroundColor:e})})}),[t]);return c.createElement(KM,{tabIndex:-1,label:(0,d.__)("Shape color","web-stories"),value:e,allowsSavedColors:!0,onChange:n,hasInputs:!0,hasEyedropper:!0,allowsOpacity:!0,allowsGradient:!0,opacityFocusTrap:!0,colorFocusTrap:!0})},ID=p.default.div.withConfig({displayName:"textAlign__SubMenuContainer",componentId:"sc-1i0z5qr-0"})(["position:absolute;top:calc(var(--height) + ","px);z-index:9999;"],3),xD=(0,p.default)(tL.default).withConfig({displayName:"textAlign__StyledMenuButton",componentId:"sc-1i0z5qr-1"})(["flex:0 0 60px;height:36px;border:1px solid ",";padding:2px 0;border-radius:4px;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),AD=(0,p.default)(eL).withConfig({displayName:"textAlign__StyledMenuIcon",componentId:"sc-1i0z5qr-2"})(["width:auto;display:flex;overflow:hidden;svg{width:32px;}svg:last-child{margin-left:-8px;}"]),kD=[{value:"left",icon:nf,label:(0,d.__)("Align text left","web-stories")},{value:"center",icon:Kg,label:(0,d.__)("Align text center","web-stories")},{value:"right",icon:of,label:(0,d.__)("Align text right","web-stories")},{value:"justify",icon:Jg,label:(0,d.__)("Align text justified","web-stories")}];const OD=function TextAlign(){const{textAlign:e="left"}=mL(["textAlign"]),t=Qa((e=>e.actions.updateSelectedElements)),[n,r]=(0,u.useState)(!1),a=(0,u.useRef)(),o=(0,u.useRef)(),[i,l]=(0,u.useState)(0);(0,u.useEffect)((()=>l(o.current.parentNode.offsetLeft+-8)),[]);const s=e=>{e&&setTimeout((()=>e.focus()))},{icon:p,label:m}=kD.find((t=>{let{value:n}=t;return n===e}))||kD[0],g=e=>()=>{(0,P.trackEvent)("floating_menu",{name:`set_text_alignment_${e}`,element:"text"}),t({properties:{textAlign:e}})},f=()=>{r(!1),o.current.focus()},h=(0,d.__)("Change text alignment","web-stories"),b=n?"":h;return(0,Ir.useKeyDownEffect)(o,"down",(()=>r(!0)),[]),c.createElement(c.Fragment,null,c.createElement(Tooltip,{placement:Vd.PLACEMENT.BOTTOM,title:b},c.createElement(xD,{tabIndex:-1,ref:o,onClick:()=>r((e=>!e)),"aria-haspopup":"menu","aria-expanded":n,"aria-label":h},c.createElement(AD,{title:b},c.createElement(p,{role:"img","aria-label":m}),c.createElement(zp.Disclosure,{style:{marginLeft:-8,marginRight:0},isOpen:n})))),c.createElement(ID,{ref:a,style:{left:`${i}px`}},c.createElement(DM.default,{onDismiss:f,isOpen:n,onCloseSubMenu:f,"aria-label":(0,d.__)("Text alignment options","web-stories"),isSubMenu:!0,isSecondary:!0,parentMenuRef:o,isHorizontal:!0},kD.map((t=>{let{value:n,icon:r,label:a}=t;return c.createElement(iL,{isToggled:n===e,ref:n===e?s:null,key:n,Icon:r,title:a,onClick:g(n)})})))))};const PD=function TextColor(){const{content:e}=mL(["content"]),t=Qa((e=>e.actions.updateSelectedElements)),n=(0,u.useCallback)((e=>{(0,P.trackEvent)("floating_menu",{name:"set_text_color",element:"text"}),t({properties:t=>_v(t,e,!0)})}),[t]),{textInfo:{color:r},handlers:{handleSetColor:a}}=fL([{content:e,type:"text"}],n);return c.createElement(KM,{tabIndex:-1,label:(0,d.__)("Text color","web-stories"),value:r,allowsSavedColors:!0,onChange:a,hasInputs:!1,hasEyedropper:!0,allowsOpacity:!0,allowsGradient:!1})};const ND=function ToggleBold(){const{isToggled:e,toggle:t}=hL({currentValue:"isBold",handler:"handleClickBold",eventName:"set_bold"});return c.createElement(iL,{isToggled:e,Icon:Wb,title:(0,d.__)("Toggle bold","web-stories"),onClick:t,tabIndex:-1})};const RD=function ToggleItalics(){const{isToggled:e,toggle:t}=hL({currentValue:"isItalic",handler:"handleClickItalic",eventName:"set_italic"});return c.createElement(iL,{isToggled:e,Icon:qb,title:(0,d.__)("Toggle italic","web-stories"),onClick:t,tabIndex:-1})};const MD=function ToggleUnderline(){const{isToggled:e,toggle:t}=hL({currentValue:"isUnderline",handler:"handleClickUnderline",eventName:"set_underline"});return c.createElement(iL,{isToggled:e,Icon:vE,title:(0,d.__)("Toggle underline","web-stories"),onClick:t,tabIndex:-1})};const LD=function Trim(){const{id:e,resource:t}=mL(["id","resource"]),{state:{canTrim:n,isTrimming:r,isDisabled:a},actions:{handleTrim:o}}=TD({elementId:e,resource:t});if(!n)return null;const i=r?(0,d.__)("Trimming video","web-stories"):(0,d.__)("Trim video","web-stories");return c.createElement(iL,{Icon:P_,title:i,disabled:a||r,onClick:e=>{(0,P.trackEvent)("floating_menu",{name:"set_trim"}),o(e)}})};const DD=function Trash(e){let{title:t,handleRemove:n}=e;return c.createElement(iL,{Icon:av.default,title:t,onClick:n})},BD=(0,u.memo)((function FloatingImageMenu(){return c.createElement(c.Fragment,null,c.createElement(yD,null),c.createElement(cL,null),c.createElement(VL,null),c.createElement($L,null),c.createElement(cL,null),c.createElement(wL,null),c.createElement(cL,null),c.createElement(wD,null),c.createElement(cL,null),c.createElement(FL,null))})),FD=(0,u.memo)((function FloatingMultipleMenu(){return c.createElement(c.Fragment,null,c.createElement(ZL,null),c.createElement(cL,null),c.createElement(FL,{isMultiple:!0}))})),HD=(0,u.memo)((function FloatingShapeMenu(){return c.createElement(c.Fragment,null,c.createElement(CD,null),c.createElement(cL,null),c.createElement(BL,null),c.createElement(VL,null),c.createElement($L,null),c.createElement(cL,null),c.createElement(wL,null),c.createElement(cL,null),c.createElement(wD,null),c.createElement(cL,null),c.createElement(FL,null))})),UD=(0,u.memo)((function FloatingStickerMenu(){return c.createElement(c.Fragment,null,c.createElement(yD,null),c.createElement(cL,null),c.createElement(VL,null),c.createElement($L,null),c.createElement(cL,null),c.createElement(wD,null),c.createElement(cL,null),c.createElement(FL,null))})),jD=(0,u.memo)((function FloatingTextMenu(){return c.createElement(c.Fragment,null,c.createElement(aD,null),c.createElement(mD,null),c.createElement(OD,null),c.createElement(ND,null),c.createElement(RD,null),c.createElement(MD,null),c.createElement(cL,null),c.createElement(PD,null),c.createElement(cL,null),c.createElement(wD,null),c.createElement(cL,null),c.createElement(FL,null))})),zD=(0,u.memo)((function FloatingVideoMenu(){return c.createElement(c.Fragment,null,c.createElement(yD,null),c.createElement(cL,null),c.createElement(VL,null),c.createElement($L,null),c.createElement(cL,null),c.createElement(wL,null),c.createElement(cL,null),c.createElement(vD,null),c.createElement(LD,null),c.createElement(SD,null),c.createElement(cL,null),c.createElement(wD,null),c.createElement(cL,null),c.createElement(FL,null))}));function GD(){return GD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GD.apply(this,arguments)}const YD=function ProductDropdown(e){let{product:t,setProduct:n,...r}=e;const a=(0,u.useMemo)((()=>[{id:t?.productId,name:t?.productTitle,product:t}]),[t]),[o,i]=(0,u.useState)(!1),[l,s]=(0,u.useState)(a),{actions:{getProducts:p}}=W(),{isSaving:m,currentPageProductIds:g}=Qa((e=>{let{state:{meta:{isSaving:n},currentPage:r}}=e;return{isSaving:n,currentPageProductIds:r?.elements?.filter((e=>{let{type:t}=e;return t===Mn.ELEMENT_TYPES.PRODUCT})).filter((e=>{let{product:n}=e;return n.productId!==t.productId})).map((e=>{let{product:t}=e;return t?.productId}))}})),f=(0,u.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{products:t}=await p(e);return t.filter((e=>e.productImages.length&&!g.includes(e.productId))).map((e=>({name:e.productTitle,id:e.productId,product:e})))}),[g,p]);(0,u.useEffect)((()=>{(async()=>{try{i(!0);const e=await f();s(e)}catch(e){s(a)}finally{i(!1)}})()}),[a]);const h={hasSearch:!0,lightMode:!0,onChange:e=>{let{product:t}=e;return n(t)},getOptionsByQuery:f,selectedId:t?.productId,dropDownLabel:(0,d.__)("Product","web-stories"),disabled:m,primaryOptions:o?a:l,zIndex:10};return c.createElement(OM.default.DropDown,GD({options:l,searchResultsLabel:(0,d.__)("Search results","web-stories"),"aria-label":(0,d.__)("Product","web-stories")},h,r))},ZD=(0,p.default)(YD).withConfig({displayName:"product__StyledDropDown",componentId:"sc-6kpcrl-0"})(["width:240px;"]),WD=(0,u.memo)((function FloatingProductMenu(){const{selectedElement:e,updateSelectedElements:t,deleteSelectedElements:n}=Qa((e=>{let{actions:t,state:n}=e;return{updateSelectedElements:t.updateSelectedElements,selectedElement:n.selectedElements[0],deleteSelectedElements:t.deleteSelectedElements}})),{shoppingProvider:r}=U(),a="none"!==r,o=(0,u.useCallback)((e=>t({properties:{product:e}})),[t]);return c.createElement(c.Fragment,null,a&&c.createElement(c.Fragment,null,c.createElement(ZD,{product:e?.product,setProduct:o}),c.createElement(cL,null)),c.createElement(DD,{title:(0,d.__)("Remove product","web-stories"),handleRemove:n}),c.createElement(FL,null))})),VD=WD,$D=(0,u.memo)((function FloatingMenuSelector(e){let{selectedElementType:t}=e;switch(t){case LM.MULTIPLE:return c.createElement(FD,null);case LM.GIF:case LM.IMAGE:return c.createElement(BD,null);case LM.SHAPE:return c.createElement(HD,null);case LM.STICKER:return c.createElement(UD,null);case LM.TEXT:return c.createElement(jD,null);case LM.VIDEO:return c.createElement(zD,null);case LM.PRODUCT:return c.createElement(VD,null);default:return null}})),qD=(0,d.__)("To exit the floating menu, press Escape.","web-stories"),KD=p.default.section.withConfig({displayName:"menu__MenuWrapper",componentId:"sc-pi2qzl-0"})(["display:flex;position:absolute;z-index:",";visibility:",";transition:140ms opacity;"],4,(e=>{let{visuallyHidden:t}=e;return t?"hidden":"visible"})),XD=(0,u.memo)((0,u.forwardRef)((function FloatingMenu(e,t){let{selectionIdentifier:n,selectedElementType:r,handleDismiss:a,visuallyHidden:o}=e;const i=zM(YM.EDIT_ELEMENT),l=(0,wx.default)(),s=(0,u.useCallback)((()=>{l(qD)}),[l]);return(0,u.useLayoutEffect)((()=>{const e=t.current,n=()=>{e.style.width="";const t=e.getBoundingClientRect();e.style.setProperty("--width",`${t.width.toFixed(2)}px`),e.style.setProperty("--height",`${t.height.toFixed(2)}px`),e.style.width="var(--width)"};n();const r=new MutationObserver(n),a=e.querySelector("[role=menu]");return r.observe(a,{childList:!0}),()=>r.disconnect()}),[t,n]),c.createElement(KD,{ref:t,"aria-label":(0,d.__)("Design menu","web-stories"),visuallyHidden:o},c.createElement(VM,{handleDismiss:a},c.createElement(DM.default,{isInline:!0,isHorizontal:!0,isSecondary:!0,isAlwaysVisible:!0,tabIndex:-1,ref:i,dismissOnEscape:!1,onFocus:s,"aria-label":(0,d.__)("Design options for selected element","web-stories"),onMouseDown:e=>{e.stopPropagation()},popoverZIndex:4},c.createElement($D,{selectedElementType:r}))))}))),QD=XD;const JD=function FloatingMenuLayer(){const{setMoveableMount:e,isEyedropperActive:t}=Xs((e=>{let{actions:t,state:n}=e;return{setMoveableMount:t.setMoveableMount,isEyedropperActive:n.isEyedropperActive}})),{workspaceWidth:n,workspaceHeight:r}=gs((e=>{let{state:{workspaceWidth:t,workspaceHeight:n}}=e;return{workspaceWidth:t,workspaceHeight:n}})),{selectedElementType:a,selectionIdentifier:o}=Qa((e=>{let{state:{selectedElements:t}}=e;return{selectedElementType:1!==t.length||t[0].isBackground?t.length>1?LM.MULTIPLE:LM.NONE:t[0]?.type,selectionIdentifier:t.map((e=>{let{id:t}=e;return t})).join("")}})),i=(0,I.useTransform)((e=>{let{state:t}=e;return t.isAnythingTransforming})),[l,s]=(0,u.useState)(null),d=(0,u.useRef)(),p=(0,u.useRef)(),[m,g]=(0,u.useState)(!1),f=(0,u.useCallback)((()=>g(!0)),[]);(0,u.useEffect)((()=>g(!1)),[o]),(0,u.useEffect)((()=>(e((()=>s)),()=>e(null))),[e]),(0,u.useEffect)((()=>{g(!!t)}),[t]),(0,u.useEffect)((()=>{p.current={width:n,height:r}}),[n,r]);const h=function(e){switch(e){case LM.MULTIPLE:return!0;case LM.NONE:return!1;default:return(0,Mn.getDefinitionForType)(e)?.hasDesignMenu}}(a)&&!m&&l;return(0,u.useEffect)((()=>{const e=d.current;if(!e||!l)return;const t=()=>{const t=l.getRect(),{width:n,height:r}=p.current,a=t.left+t.width/2;e.style.left=`clamp(0px, ${a}px - (var(--width) / 2), ${n}px - var(--width))`;const o=t.top+t.height+10;e.style.top=`clamp(0px, ${o}px, ${r}px - var(--height))`};t();const n=new MutationObserver(t),r=document.querySelector(".moveable-control-box");return n.observe(r,{attributes:!0,subtree:!0,attributeFilter:["style"]}),()=>n.disconnect()}),[l,h]),!!h&&c.createElement(QD,{ref:d,handleDismiss:f,selectedElementType:a,selectionIdentifier:o,visuallyHidden:i})},eB=new Map;const tB=async function(e,t,n,r){const{width:a,height:o,scale:i,focalX:l,focalY:s,flip:c}=e,{src:d,length:u}=t,p=JSON.stringify([d,n,r,i,l,s,c,a,o]);if(eB.has(p))return eB.get(p);const m=r,g=m/o*a,f=Math.ceil(n/g),h=n/f,b=h/g*a,{width:E,height:y,offsetX:_,offsetY:v}=(0,hO.default)(t,b,o,i,c?.horizontal?100-l:l,c?.vertical?100-s:s),w=u/(f-1),T=await re(d);T.width=E,T.height=y,await le(T,1e-6);const S=document.createElement("canvas");S.width=n,S.height=r;const C=S.getContext("2d");let I=0,x=0;const A=async()=>{await le(T,I);const e=x*h;return(c.vertical||c.horizontal)&&(C.translate(e+h/2,m/2),C.scale(c.horizontal?-1:1,c.vertical?-1:1),C.translate(-(e+h/2),-m/2)),C.drawImage(T,_,v,b,o,e,0,h,m),C.setTransform(1,0,0,1,0,0),x+=1,x===f?Promise.resolve():(I+=w,A())};return A().then((()=>{const e=S.toDataURL();return eB.set(p,e),e}))};const nB=function(e,t,n){const[r,a]=(0,u.useState)(null);return(0,u.useEffect)((()=>{if(!e)return;const{element:r,resource:o}=t;tB(r,o,n,36).then(a)}),[e,t,n]),r};function rB(){return rB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rB.apply(this,arguments)}const aB=p.default.button.withConfig({displayName:"slider__Thumb",componentId:"sc-50zvue-0"})(["position:absolute;padding:0;"]);function oB(e){return e.pageX||e.clientX}const iB=function Slider(e){let{railWidth:t,min:n,max:r,step:a,minorStep:o=null,value:i=0,onChange:l=(()=>{}),getValueText:s=null,onPointerDown:d=(()=>{}),onNudge:p=(()=>{}),...m}=e;const g=(0,u.useRef)(),f=(0,u.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),g.current.focus(),d?.();const a=function(a){const o=oB(a)-oB(e);l(i+o/t*(r-n)),a.preventDefault(),a.stopPropagation()},o=function(){document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",o)};return document.addEventListener("pointermove",a),document.addEventListener("pointerup",o),o}),[i,r,n,l,t,d]),h=(0,u.useCallback)((e=>{l(i+e),p?.()}),[l,p,i]);(0,Ir.useKeyDownEffect)(g,"left",(()=>h(-a)),[h,a]),(0,Ir.useKeyDownEffect)(g,"shift+left",(()=>h(-o)),[h,o]),(0,Ir.useKeyDownEffect)(g,"right",(()=>h(a)),[h,a]),(0,Ir.useKeyDownEffect)(g,"shift+right",(()=>h(o)),[h,o]);const b={left:`${((i-n)/(r-n)*t).toFixed(2)}px`};return c.createElement(aB,rB({ref:g,onPointerDown:f,style:b,role:"slider","aria-valuemin":n,"aria-valuemax":r,"aria-valuenow":i,"aria-valuetext":s?.(i)},m))};function lB(){return lB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lB.apply(this,arguments)}const sB=(0,p.default)(iB).withConfig({displayName:"currentTime__StyledSlider",componentId:"sc-tf91kz-0"})(["top:-3px;bottom:-3px;width:6px;margin-left:-3px;border-radius:6px;border-width:0;background-color:",";box-shadow:0px 1px 2px rgba(60,64,67,0.3),0px 1px 3px 1px rgba(60,64,67,0.15);"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.primaryNormal}));const cB=function CurrentTime(e){const t=Nv((e=>{let{state:{currentTime:t}}=e;return t}));return c.createElement(sB,lB({"aria-label":(0,d.__)("Current time","web-stories"),value:t,disabled:!0},e))},dB=p.default.aside.withConfig({displayName:"trimmerComponents__Menu",componentId:"sc-1vmlktu-0"})(["display:flex;justify-content:center;align-items:flex-start;height:","px;gap:14px;"],40),uB=p.default.div.withConfig({displayName:"trimmerComponents__RailWrapper",componentId:"sc-1vmlktu-1"})(["display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-end;"]),pB=p.default.div.withConfig({displayName:"trimmerComponents__Rail",componentId:"sc-1vmlktu-2"})(["position:relative;width:","px;height:","px;border-radius:4px;border:1px solid ",";background-color:",";"],(e=>{let{width:t}=e;return t}),36,(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.colors.standard.white}));function Duration(e){let{children:t}=e;return c.createElement(Ke.Text,{as:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},t)}const mB=(0,p.default)(iB).withConfig({displayName:"trimmerComponents__Handle",componentId:"sc-1vmlktu-3"})(["top:6px;bottom:6px;width:6px;margin-left:-3px;border-radius:6px;background-color:",";border:1px solid ",";box-shadow:0px 1px 2px rgba(60,64,67,0.3),0px 1px 3px 1px rgba(60,64,67,0.15);cursor:col-resize;&:focus{border-color:",";}&.focus-visible{outline:none !important;}"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.border.focus})),gB=p.default.svg.withConfig({displayName:"trimmerComponents__SVG",componentId:"sc-1vmlktu-4"})(["position:absolute;top:-1px;"]),fB=p.default.div.withConfig({displayName:"trimmerComponents__ButtonWrapper",componentId:"sc-1vmlktu-5"})(["flex-grow:1;flex-basis:100px;display:flex;justify-content:",";"],(e=>{let{isStart:t}=e;return t?"flex-end":"flex-start"}));function hB(e){let{width:t,isLeftAligned:n=!1}=e;const r=n?{left:"-1px"}:{right:"-1px"},a=n?`M 4 0 h ${t} a 4 4 0 0 0 -4 4 v 28 a 4 4 0 0 0 4 4 h -${t} a 4 4 0 0 1 -4 -4 v -28 a 4 4 0 0 1 4 -4 Z`:`M 0 0 h ${t} a 4 4 0 0 1 4 4 v 28 a 4 4 0 0 1 -4 4 h -${t} a 4 4 0 0 0 4 -4 v -28 a 4 4 0 0 0 -4 -4 Z`;return c.createElement(gB,{style:{width:`${t+4}px`,...r},viewBox:`0 0 ${t+4} 36`},c.createElement("path",{stroke:"transparent",fill:"black",fillOpacity:"0.5",d:a}))}function bB(){return bB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bB.apply(this,arguments)}const EB=function VideoTrimmer(){const{startOffset:e,endOffset:t,maxOffset:n,setStartOffset:r,setEndOffset:a,hasChanged:o,performTrim:i,setIsDraggingHandles:l,toggleTrimMode:s,videoData:p}=Nv((e=>{let{state:{startOffset:t,endOffset:n,maxOffset:r,hasChanged:a,videoData:o},actions:{setStartOffset:i,setEndOffset:l,performTrim:s,toggleTrimMode:c,setIsDraggingHandles:d}}=e;return{startOffset:t,endOffset:n,maxOffset:r,setStartOffset:i,setEndOffset:l,hasChanged:a,performTrim:s,setIsDraggingHandles:d,toggleTrimMode:c,videoData:o}})),{workspaceWidth:f,pageWidth:h}=gs((e=>{let{state:{workspaceWidth:t,pageWidth:n}}=e;return{workspaceWidth:t,pageWidth:n}})),b=(0,u.useDebouncedCallback)((()=>l(!1)),1e3),E=(0,u.useRef)(null);hw({ref:E});const y=(0,u.useCallback)((e=>{e&&e.focus()}),[]),_=Math.min(h,f-260),v=h&&n&&p,w=nB(v,p,_),T={ref:E,"aria-label":(0,d.__)("Video trimmer","web-stories")};if(!v)return c.createElement(dB,T);const S={min:0,max:n,step:100,minorStep:10,onPointerDown:()=>l(!0),onPointerUp:()=>l(!1),onNudge:()=>{l(!0),b()}};return c.createElement(dB,T,c.createElement(fB,{isStart:!0},c.createElement(m.Button,{variant:g.BUTTON_VARIANTS.RECTANGLE,type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,onClick:s,ref:y},(0,d.__)("Cancel","web-stories"))),c.createElement(uB,null,c.createElement(pB,{width:_,style:{backgroundImage:w?`url(${w})`:void 0}},c.createElement(hB,{isLeftAligned:!0,width:e/n*_}),c.createElement(hB,{width:(n-t)/n*_}),c.createElement(cB,bB({railWidth:_},S)),c.createElement(mB,bB({railWidth:_,value:e,"aria-label":(0,d.__)("Start offset","web-stories"),onChange:e=>r(e)},S)),c.createElement(mB,bB({railWidth:_,value:t,"aria-label":(0,d.__)("End offset","web-stories"),onChange:e=>a(e)},S))),c.createElement(Duration,null,oe(Math.ceil((t-e)/1e3)))),c.createElement(fB,null,c.createElement(m.Button,{variant:g.BUTTON_VARIANTS.RECTANGLE,type:g.BUTTON_TYPES.PRIMARY,size:g.BUTTON_SIZES.SMALL,onClick:i,disabled:!o},(0,d.__)("Trim","web-stories"))))};function yB(){return yB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yB.apply(this,arguments)}const _B={FLOAT_PANEL:11},vB=p.default.div.withConfig({displayName:"editElement__Wrapper",componentId:"sc-1w8k2uc-0"})([""," "," "," pointer-events:initial;"],qn.elementWithPosition,qn.elementWithSize,qn.elementWithRotation),wB=(0,u.memo)((0,u.forwardRef)((function EditElement(e,t){let{element:n,editWrapper:r,onResize:a}=e;const{id:o,type:i}=n,{getBox:l,getBoxWithBorder:s}=(0,Bc.default)((e=>({getBox:e.actions.getBox,getBoxWithBorder:e.actions.getBoxWithBorder}))),{getProxiedUrl:d}=ii(),{isRTL:p,styleConstants:{topOffset:m}={}}=U(),{actions:{maybeEnqueueFontStyle:g}}=Wo(),{updateElementById:f,deleteSelectedElements:h}=Qa((e=>({updateElementById:e.actions.updateElementById,deleteSelectedElements:e.actions.deleteSelectedElements}))),{isTrimMode:b,resource:E,setVideoNode:y}=Nv((e=>{let{state:{isTrimMode:t,videoData:n},actions:{setVideoNode:r}}=e;return{isTrimMode:t,setVideoNode:r,resource:n?.resource}})),[_,v]=(0,u.useState)(null),{Edit:w}=(0,Mn.getDefinitionForType)(i),T=_?{...n,..._}:n,S="text"===i?s(T):l(T);return c.createElement(vB,yB({"aria-labelledby":`layer-${o}`},S,{ref:t}),c.createElement(w,{element:T,box:S,editWrapper:r,onResize:a,setLocalProperties:v,getProxiedUrl:d,isRTL:p,topOffset:m,isTrimMode:b,resource:E,setVideoNode:y,updateElementById:f,deleteSelectedElements:h,maybeEnqueueFontStyle:g,zIndexCanvas:_B}))}))),TB=wB,SB=Xe.THEME_CONSTANTS.ICON_SIZE,CB=SB+8,IB=Xe.THEME_CONSTANTS.ICON_SIZE+6+2,xB=2*(Xe.THEME_CONSTANTS.LARGE_BUTTON_SIZE+2)+IB+16+16;const AB=function(){const{carouselState:e}=gs((e=>{let{state:{carouselState:t}}=e;return{carouselState:t}}));return e===xe.CLOSED?52:136},kB=(0,p.css)(["",""],(e=>{let{pointerEvents:t}=e;return t&&"string"==typeof t?`pointer-events: ${t};`:""}));const OB=function(e){let{containerRef:t}=e;const{zoomLevel:n,setZoomLevel:r}=gs((e=>{let{state:{zoomLevel:t},actions:{setZoomLevel:n}}=e;return{zoomLevel:t,setZoomLevel:n}})),a=(0,u.useDebouncedCallback)((e=>r(e)),25);(0,u.useLayoutEffect)((()=>{if(!t.current)return;const e=e=>Math.min(3,Math.max(.25,e-e%.25)),r=r=>{const{ctrlKey:o,deltaY:i}=r,l=t.current.childNodes[0];if(o&&l.contains(r.target)&&i){a(e(i>0?n-.25:n+.25)),r.preventDefault()}},o=e=>{t.current.childNodes[0].contains(e.target)&&e.preventDefault()},i=r=>{const o=t.current.childNodes[0],{scale:i}=r;if(o.contains(r.target)&&i){a(e(i<1?n-.25:n+.25)),r.preventDefault()}};return document.addEventListener("wheel",r,{passive:!1}),document.addEventListener("gesturestart",o),document.addEventListener("gestureend",o),document.addEventListener("gesturechange",i),()=>{document.removeEventListener("wheel",r,{passive:!1}),document.removeEventListener("gesturestart",o),document.removeEventListener("gestureend",o),document.removeEventListener("gesturechange",i)}}),[t,a,n])};function PB(){return PB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PB.apply(this,arguments)}const NB=Xe.THEME_CONSTANTS.LARGE_BUTTON_SIZE+8,RB=p.default.section.withConfig({displayName:"layout__LayerGrid",componentId:"sc-1n0mp4m-0"})([""," position:absolute;top:0;left:0;right:0;bottom:0;"," display:grid;grid:'h h h h h h h' ","px '. . . t . . .' minmax(","px,1fr) 'p b . c . f n' var(--viewport-height-px) '. . . . . . .' 1fr 'w w w w w w w' ","px '. . . . . . .' ","px / 1fr var(--page-nav-width) var(--page-nav-gap) var(--viewport-width-px) var(--page-nav-gap) var(--page-nav-width) 1fr;height:100%;"],kB,(e=>{let{zIndex:t}=e;return"number"==typeof t?`z-index: ${t};`:""}),64,10,(e=>{let{footerHeight:t}=e;return t}),16),MB=p.default.div.withConfig({displayName:"layout__Area",componentId:"sc-1n0mp4m-1"})([""," grid-area:",";overflow:",";position:relative;width:100%;height:100%;",";"],kB,(e=>{let{area:t}=e;return t}),(e=>{let{showOverflow:t}=e;return t?"visible":"hidden"}),(e=>{let{zIndex:t}=e;return void 0!==t?`z-index: ${t}`:null})),LB=(0,p.default)(MB).attrs({area:"c"}).withConfig({displayName:"layout__PageAreaContainer",componentId:"sc-1n0mp4m-2"})(["position:relative;display:flex;justify-content:",";align-items:",";overflow:",";",""],(e=>{let{hasHorizontalOverflow:t}=e;return t?"flex-start":"center"}),(e=>{let{hasVerticalOverflow:t}=e;return t?"flex-start":"center"}),(e=>{let{showOverflow:t}=e;return t?"visible":"var(--overflow-x) var(--overflow-y)"}),(e=>{let{isControlled:t,hasVerticalOverflow:n,hasHorizontalOverflow:r,showOverflow:a}=e;return t&&`\n      overflow: ${a?"visible":"hidden"};\n      width: calc(\n        100% - ${n?A.SCROLLBAR_WIDTH:0}px\n      );\n      height: calc(\n        100% - ${r?A.SCROLLBAR_WIDTH:0}px\n      );\n    `})),DB=(0,p.default)(MB).attrs({area:"t"}).withConfig({displayName:"layout__PageTitleContainer",componentId:"sc-1n0mp4m-3"})(["position:relative;display:flex;justify-content:center;align-items:center;"]),BB=(0,u.forwardRef)((function Layer(e,t){let{children:n,...r}=e;const a=AB();return c.createElement(RB,PB({ref:t,footerHeight:a},r),n)})),FB=p.default.div.withConfig({displayName:"layout__PaddedPage",componentId:"sc-1n0mp4m-4"})(["padding:calc(0.5 * var(--page-padding-px));"]),HB=p.default.div.withConfig({displayName:"layout__PageClip",componentId:"sc-1n0mp4m-5"})(["",""],(e=>{let{hasHorizontalOverflow:t,hasVerticalOverflow:n}=e;return(t||n)&&`\n      overflow: hidden;\n      width: ${t?"calc(var(--page-width-px) + var(--page-padding-px))":`calc(var(--viewport-width-px) - ${A.SCROLLBAR_WIDTH}px)`};\n      flex-basis: ${t?"calc(var(--page-width-px) + var(--page-padding-px))":`calc(var(--viewport-width-px) - ${A.SCROLLBAR_WIDTH}px)`};\n      height: ${n?"calc(var(--fullbleed-height-px) + var(--page-padding-px))":`calc(var(--viewport-height-px) - ${A.SCROLLBAR_WIDTH}px)`};\n      flex-shrink: 0;\n      flex-grow: 0;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    `})),UB=p.default.div.withConfig({displayName:"layout__FullbleedContainer",componentId:"sc-1n0mp4m-6"})([""," overflow:visible;position:relative;width:var(--page-width-px);height:var(--fullbleed-height-px);display:flex;justify-content:center;align-items:center;border-radius:5px;",";",""],(e=>{let{background:t}=e;return(0,ta.default)(t)}),(e=>{let{isControlled:t}=e;return t&&"\n      left: var(--scroll-left-px);\n      top: var(--scroll-top-px);\n    "}),(e=>{let{isBackgroundSelected:t,theme:n}=e;return t&&`\n      &:before {\n        content: '';\n        position: absolute;\n        top: -4px;\n        left: -4px;\n        right: -4px;\n        bottom: -4px;\n        border: ${n.colors.border.selection} 1px solid;\n        border-radius: ${n.borders.radius.medium};\n      }\n    `})),jB=p.default.div.withConfig({displayName:"layout__PageAreaWithoutOverflow",componentId:"sc-1n0mp4m-7"})(["overflow:",";position:relative;width:var(--page-width-px);height:var(--fullbleed-height-px);display:flex;justify-content:center;align-items:center;"],(e=>{let{showOverflow:t}=e;return t?"initial":"hidden"})),zB=p.default.div.withConfig({displayName:"layout__PageAreaSafeZone",componentId:"sc-1n0mp4m-8"})(["width:var(--page-width-px);height:var(--page-height-px);overflow:visible;position:relative;"]),GB=(0,p.default)(MB).attrs({area:"h"}).withConfig({displayName:"layout__HeadArea",componentId:"sc-1n0mp4m-9"})([""]),YB=((0,p.default)(MB).attrs({area:"m"}).withConfig({displayName:"layout__MenuArea",componentId:"sc-1n0mp4m-10"})([""]),(0,p.default)(MB).withConfig({displayName:"layout__NavArea",componentId:"sc-1n0mp4m-11"})(["display:flex;align-items:center;justify-content:center;"])),ZB=(0,p.default)(YB).attrs({area:"b"}).withConfig({displayName:"layout__NavPrevArea",componentId:"sc-1n0mp4m-12"})([""]),WB=(0,p.default)(YB).attrs({area:"f"}).withConfig({displayName:"layout__NavNextArea",componentId:"sc-1n0mp4m-13"})([""]),VB=(0,p.default)(MB).attrs({area:"p"}).withConfig({displayName:"layout__PageBeforeArea",componentId:"sc-1n0mp4m-14"})([""]),$B=(0,p.default)(MB).attrs({area:"n"}).withConfig({displayName:"layout__PageAfterArea",componentId:"sc-1n0mp4m-15"})([""]),qB=p.default.div.withConfig({displayName:"layout__PageMenuArea",componentId:"sc-1n0mp4m-16"})(["grid-area:c;position:absolute;right:calc(-24px + var(--page-padding-px));top:calc(0.5 * var(--page-padding-px));min-height:calc(100% - var(--page-padding-px));"]),KB=(0,p.default)(MB).attrs({area:"w",showOverflow:!0}).withConfig({displayName:"layout__FooterArea",componentId:"sc-1n0mp4m-17"})([""]);const XB=(0,u.forwardRef)((function PageArea(e,t){let{children:n,fullbleedRef:r=null,fullBleedContainerLabel:a=(0,d.__)("Fullbleed area","web-stories"),overlay:o=[],background:i,isControlled:l=!1,className:s="",showOverflow:p=!1,isBackgroundSelected:m=!1,pageAreaRef:g=(0,u.createRef)(),withSafezone:f=!0,...h}=e;const b=(0,u.useRef)(),E=r||b,{hasVerticalOverflow:y,hasHorizontalOverflow:_,zoomSetting:v,scrollLeft:w,scrollTop:T}=gs((e=>{let{state:{hasVerticalOverflow:t,hasHorizontalOverflow:n,zoomSetting:r,scrollLeft:a,scrollTop:o}}=e;return{hasVerticalOverflow:t,hasHorizontalOverflow:n,zoomSetting:r,scrollLeft:a,scrollTop:o}})),S=(0,u.useRef)();S.current={top:T,left:w},(0,u.useEffect)((()=>{l||(E.current.scrollTop=S.current.top,E.current.scrollLeft=S.current.left)}),[l,v,E]);const C=(0,u.useRef)(null);return OB({containerRef:C}),c.createElement(LB,PB({showOverflow:p,isControlled:l,hasHorizontalOverflow:_,hasVerticalOverflow:y,className:s,"data-scroll-container":!0},h),c.createElement(HB,{hasHorizontalOverflow:_,hasVerticalOverflow:y},c.createElement(FB,{ref:C},c.createElement(UB,{"aria-label":a,role:"region",ref:E,"data-testid":"fullbleed",background:i,isControlled:l,isBackgroundSelected:m},c.createElement(jB,{ref:g,showOverflow:p},f?c.createElement(zB,{ref:t,"data-testid":"safezone"},n):n,o)))))}));var QB=n(94184),JB=n.n(QB);const eF=function(e){let{canSnap:t,otherNodes:n,snappingOffsetX:r=null,isDragging:a}=e;const o=Js($s),i=Js(qs),l=Xs((e=>{let{state:t}=e;return t.designSpaceGuideline})),{pageWidth:s,pageHeight:c}=gs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{pageWidth:t,pageHeight:n}})),{activeDropTargetId:d,isDropTargetingDisabled:p}=ds((e=>{let{state:t}=e;return{activeDropTargetId:t.activeDropTargetId,isDropTargetingDisabled:t.isDropTargetingDisabled}})),m=function(e){const t=e(xc),{openToUnreadTip:n=Bt}=Ic((e=>{let{actions:t}=e;return{openToUnreadTip:t.openToUnreadTip}})),r=(0,u.useDebouncedCallback)(n,300);return(0,u.useCallback)((()=>{t===xc.SAFE_ZONE&&r(oc)}),[t,r])}((e=>{let{SAFE_ZONE:t}=e;return t}));t=t&&!p&&!d;const g=(0,u.useCallback)((e=>{let{elements:t}=e;const n=t.flat().some((e=>{let{center:t,element:n}=e;return n===l&&!t}));a&&n&&m()}),[a,l,m]);if(!o||!i)return{};const f=r||o.x,h=Math.ceil(i.x-f),b=Math.floor(i.y-o.y),E=t?[h,h+s/2,h+s]:[],y=(s/ee.FULLBLEED_RATIO-c)/2,_={left:!0,top:!0,right:!0,bottom:!0,center:!0,middle:!0};return{snappable:t,snapGap:t,snapDirections:_,elementSnapDirections:_,isDisplaySnapDigit:!1,onSnap:g,horizontalGuidelines:t?[b-y,b,b+c/2,b+c,b+c+y]:[],verticalGuidelines:E,elementGuidelines:t?[...n,l]:[]}};const tF=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,u.useEffect)((()=>{let t=!0;const n=()=>{t&&e.current?.updateRect?.()};n();const r=setTimeout(n);return()=>{t=!1,clearTimeout(r)}}),t)};const nF=function(e){(0,u.useEffect)((()=>{const t=()=>e.current?.updateRect();return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[e])};const rF=function(e,t){const{left:n,right:r,top:a,bottom:o}=e.getBoundingClientRect(),i=t.getBoundingClientRect();return n>i.right||r<i.left||o<i.top||a>i.bottom};const aF=function(){const{deleteSelectedElements:e}=Qa((e=>({deleteSelectedElements:e.actions.deleteSelectedElements}))),{clearTransforms:t}=(0,I.useTransform)((e=>({clearTransforms:e.actions.clearTransforms}))),{fullbleedContainer:n}=Xs((e=>{let{state:{fullbleedContainer:t}}=e;return{fullbleedContainer:t}}));return{handleElementOutOfCanvas:r=>!!rF(r,n)&&(e(),t(),!0)}};var oF=n(63594),iF=n.n(oF);const lF=function(){const e=Xs((e=>{let{state:{nodesById:t}}=e;return t})),t=Qa((e=>{let{state:t}=e;return t.currentPage?.elements?.find((e=>{let{isBackground:t}=e;return t}))})),{getBoxWithBorder:n,getBox:r}=(0,Bc.default)((e=>{let{actions:{getBox:t,getBoxWithBorder:n}}=e;return{getBoxWithBorder:n,getBox:t}}));return a=>{const o=e[t.id],{x:i,y:l,width:s,height:c}=o.getBoundingClientRect(),d=new(iF().Box)(new(iF().Vector)(i,l),s,c).toPolygon(),u=-r(t).y;if(a.isBackground)return d;const{id:p,rotationAngle:m}=a;if(!e[p])return null;const g=(0,$n.canSupportMultiBorder)(a)?n(a):r(a),f=new(iF().Vector)(d.pos.x+g.x+g.width/2,d.pos.y+u+g.y+g.height/2),h=new(iF().Box)(f,g.width,g.height).toPolygon(),b=new(iF().Vector)(-g.width/2,-g.height/2);return h.setOffset(b),h.setAngle(m*Math.PI/180),h}};const sF=function(){const[e,t]=(0,u.useState)(Jo.getItemByKey(Qo.BACKGROUND_IS_SET_DIALOG_DISMISSED)),{setBackgroundElement:n,isDefaultBackground:r}=Qa((e=>({setBackgroundElement:e.actions.setBackgroundElement,isDefaultBackground:e.state.currentPage?.elements[0]?.isDefaultBackground}))),{fullbleedContainer:a}=Xs((e=>{let{state:{fullbleedContainer:t}}=e;return{fullbleedContainer:t}})),{showSnackbar:o}=(0,jr.useSnackbar)(),i=lF();return{handleFullbleedMediaAsBackground:l=>{if(r&&Mn.MEDIA_ELEMENT_TYPES.includes(l.type)){const r=i(l),s=a.getBoundingClientRect(),c=new(iF().Box)(new(iF().Vector)(s.x+2,s.y+2),s.width-4,s.height-4).toPolygon(),u=new(iF().Response);iF().testPolygonPolygon(r,c,u),u.bInA&&n({elementId:l.id}),e||(o({message:(0,d.__)("Full bleed images and videos are automatically set as background. Double click to scale and position at any time.","web-stories"),dismissible:!0}),Jo.setItemByKey(Qo.BACKGROUND_IS_SET_DIALOG_DISMISSED,!0),t(!0))}}}};const cF=function(e){let{setIsDragging:t,resetMoveable:n,selectedElement:r,setTransformStyle:a,frame:o}=e;const{isDropSource:i,handleDrag:l,handleDrop:s,setDraggingResource:c}=ds((e=>{let{actions:{handleDrag:t,handleDrop:n,isDropSource:r,setDraggingResource:a}}=e;return{handleDrag:t,handleDrop:n,setDraggingResource:a,isDropSource:r}})),{handleElementOutOfCanvas:d}=aF(),{handleFullbleedMediaAsBackground:p}=sF(),{updateSelectedElements:m}=Qa((e=>({updateSelectedElements:e.actions.updateSelectedElements}))),{editorToDataX:g,editorToDataY:f}=(0,Bc.default)((e=>{let{actions:{editorToDataX:t,editorToDataY:n}}=e;return{editorToDataX:t,editorToDataY:n}})),h=(0,u.useBatchingCallback)((e=>{t(!1),c(null),n(e)}),[t,c,n]);return{onDrag:e=>{let{target:n,beforeTranslate:s,clientX:d,clientY:u}=e;t(!0),i(r.type)&&c(r.resource),o.translate=s,a(n,o),i(r.type)&&l(r.resource,d,u,r.id)},throttleDrag:0,onDragStart:e=>{let{set:t}=e;t(o.translate)},onDragEnd:e=>{let{target:n,isDrag:a}=e;if(!a)return!1;if(d(n))return t(!1),void c(null);const l=e=>Math.abs(e)<=1?0:e,[u,b]=o.translate;let E={};0===u&&0===b||(E={x:l(r.x+g(u)),y:l(r.y+f(b))},m({properties:E}),i(r.type)&&s(r.resource,r.id)),h(n),p({...r,...E})}}},dF=[],uF=["n","s"],pF=["e","w"],mF=["nw","ne","sw","se"];function gF(e){let{vertical:t,horizontal:n,diagonal:r}=e;return[...t?uF:dF,...n?pF:dF,...r?mF:dF]}const fF=function(e){let{resetMoveable:t,selectedElement:n,setTransformStyle:r,frame:a,isEditMode:o,pushTransform:i,classNames:l,forceLockRatio:s}=e;const{updateSelectedElements:c}=Qa((e=>({updateSelectedElements:e.actions.updateSelectedElements}))),{handleElementOutOfCanvas:d}=aF(),{handleFullbleedMediaAsBackground:p}=sF(),{editorToDataX:m,editorToDataY:g,dataToEditorY:f,dataToEditorX:h}=(0,Bc.default)((e=>{let{actions:{editorToDataX:t,editorToDataY:n,dataToEditorY:r,dataToEditorX:a}}=e;return{editorToDataX:t,editorToDataY:n,dataToEditorY:r,dataToEditorX:a}})),{lockAspectRatio:b,type:E,border:y}=n,_="text"===E,[v,w]=(0,u.useState)(!0),T=!_&&(s||b)||_&&v,{resizeRules:S,updateForResizeEvent:C}=(0,Mn.getDefinitionForType)(E),I=h(S.minWidth),x=f(S.minHeight),A=n.width/n.height,{left:k=0,right:O=0,top:P=0,bottom:N=0}=y||{},R=n.width<=S.minWidth||n.height<=S.minHeight;return{onResize:e=>{let{target:t,direction:o,width:i,height:l,drag:s}=e,c=i-(k+O),d=l-(P+N),u=null;T?(c<I&&(c=I,d=c/A),d<x&&(d=x,c=x*A)):(d=Math.max(d,x),c=Math.max(c,I)),C&&(u=C(n,o,m(c,!1),g(d,!1))),u&&u.height&&(d=f(u.height)),u&&u.marginOffset&&(t.querySelector(".syncMargin").style.margin=-f(u.marginOffset)/2+"px 0");const p=c+k+O,h=d+P+N;t.style.width=`${p}px`,t.style.height=`${h}px`,a.direction=o,a.resize=[p,h],a.translate=s.beforeTranslate,a.updates=u,r(t,a)},onResizeStart:e=>{let{setOrigin:t,dragStart:r,direction:l}=e;t(["%","%"]),r&&r.set(a.translate);const s=0!==l[0]&&0!==l[1];v!==s&&_&&w(s),o&&i(n.id,a)},onResizeEnd:e=>{let{target:r}=e;if(d(r))return;const[o,i]=a.resize;let l={};if(0!==o&&0!==i){const{direction:e}=a,[t,r]=a.translate,s=m(o-(k+O)),d=g(i-(P+N));l={width:s,height:d,x:n.x+m(t),y:n.y+g(r)},C&&Object.assign(l,C(n,e,s,d)),c({properties:l})}w(!0),t(r),p({...n,...l})},keepRatio:T,renderDirections:gF(S),className:JB()(l,{"visually-hide-handles":R})}};const utils_normalizeRotationDegrees=function(e){return(e%360+360)%360};const hF=function(e){let{selectedElement:t,isEditMode:n,pushTransform:r,frame:a,setTransformStyle:o,resetMoveable:i,throttleRotation:l}=e;const{updateSelectedElements:s}=Qa((e=>({updateSelectedElements:e.actions.updateSelectedElements}))),{handleElementOutOfCanvas:c}=aF();return{throttleRotate:l?30:0,onRotate:e=>{let{target:t,beforeRotate:n}=e;a.rotate=utils_normalizeRotationDegrees(n),o(t,a)},onRotateEnd:e=>{let{target:t}=e;if(c(t))return;const n={rotationAngle:Math.round(a.rotate)};s({properties:n}),i(t)},onRotateStart:e=>{let{set:o}=e;n&&r(t.id,a),o(a.rotate)}}};function bF(){return bF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bF.apply(this,arguments)}const EF=(0,u.forwardRef)((function SingleSelectionMoveable(e,t){let{selectedElement:n,targetEl:r,pushEvent:a,isEditMode:o,...i}=e;const l=(0,u.useRef)(null),[s,d]=(0,u.useState)(!1),p=Xs((e=>{let{state:t}=e;return t.nodesById})),m=(0,Bc.default)((e=>{let{actions:t}=e;return t.getBox})),g=(0,I.useTransform)((e=>{let{actions:t}=e;return t.pushTransform})),{zoomSetting:f,scrollLeft:h,scrollTop:b}=gs((e=>{let{state:t}=e;return{zoomSetting:t.zoomSetting,scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}})),{isLocked:E}=n,y=!n.isBackground&&!E,_=(0,u.useRef)(),v=Qa((e=>{let{state:t}=e;return t.currentPage?.elements[0]?.id})),w=(0,Ir.useGlobalIsKeyPressed)("shift");nF(l),(0,u.useEffect)((()=>{_.current=a}),[a]),(0,u.useEffect)((()=>{l.current&&l.current.updateRect()}),[h,b]),tF(l,[f]),(0,u.useEffect)((()=>{l.current&&(_.current&&r.contains(_.current.target)&&y&&l.current.moveable.dragStart(_.current),l.current.updateRect())}),[r,l,y]),(0,u.useEffect)((()=>{l.current&&l.current.updateRect()}));const T=m(n),S=(0,u.useMemo)((()=>({translate:[0,0],rotate:T.rotationAngle,resize:[0,0],updates:null})),[T.rotationAngle]),{border:C}=n,{left:A=0,right:k=0,top:O=0,bottom:P=0}=C||{},N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;S.translate=t.translate,S.direction=t.direction,S.resize=t.resize,S.updates=t.updates,S.rotate=t.rotate,e.style.transform=`translate(${S.translate[0]}px, ${S.translate[1]}px) rotate(${S.rotate}deg)`,S.resize[0]&&(e.style.width=`${S.resize[0]}px`),S.resize[1]&&(e.style.height=`${S.resize[1]}px`);let r={...S};if((S.resize[0]||S.resize[1])&&(0,$n.canSupportMultiBorder)(n)){const e=S.resize[0]-(A+k),t=S.resize[1]-(O+P);r={...S,resize:[e,t]}}g(n.id,r)},R=(0,u.useBatchingCallback)((e=>{l.current&&(S.direction=[0,0],S.translate=[0,0],S.resize=[0,0],S.updates=null,g(n.id,null),e.style.transform="",e.style.width="",e.style.height="",l.current.updateRect())}),[S,g,n.id]),M=!o,L=s,D=JB()("default-moveable",{"hide-handles":L,"type-text":"text"===n.type,immoveable:E}),B=cF({setIsDragging:d,resetMoveable:R,selectedElement:n,setTransformStyle:N,frame:S}),F=o?{onDrag:()=>!1,onDragEnd:()=>!1,onDragStart:()=>!1}:B,H=fF({resetMoveable:R,selectedElement:n,setTransformStyle:N,frame:S,isEditMode:o,pushTransform:g,classNames:D,forceLockRatio:w}),U=hF({selectedElement:n,isEditMode:o,pushTransform:g,frame:S,setTransformStyle:N,resetMoveable:R,throttleRotation:w}),j=Object.values(vn(p,[n.id,v])),z=eF({otherNodes:j,canSnap:M&&y,isDragging:s}),G=y&&!L&&!0!==n.lockDimensions,Y=y&&!L&&!1!==n.supportsRotation;return c.createElement(x.Moveable,bF({},i,{className:D,zIndex:0,ref:(0,u.useCombinedRefs)(l,t),target:r,edge:!0,draggable:y,resizable:G,rotatable:Y},F,H,U,z,{origin:!1,pinchable:!0}))})),yF=EF,_F=(0,x.withOverlay)((0,p.default)(BB).withConfig({displayName:"editLayer__LayerWithGrayout",componentId:"sc-1j9iuj3-0"})(["background-color:",";"],(e=>{let{grayout:t,theme:n}=e;return t?n.colors.opacity.overlayDark:"transparent"}))),vF=(0,x.withOverlay)(XB);function EditLayerForElement(e){let{element:t,showOverflow:n}=e;const r=(0,u.useRef)(null),a=(0,u.useRef)(null),{editModeGrayout:o}=(0,Mn.getDefinitionForType)(t.type),{isTrimMode:i}=Nv((e=>{let{state:{isTrimMode:t}}=e;return{isTrimMode:t}})),{clearEditing:l,onMoveableMount:s}=Xs((e=>({clearEditing:e.actions.clearEditing,onMoveableMount:e.state.onMoveableMount}))),p=xs(),[m,g]=(0,u.useState)(null);(0,Ir.useKeyDownEffect)(r,{key:"esc",editable:!0},(()=>l()),[l]),(0,u.useEffect)((()=>()=>p(!1)),[p]);const f=(0,u.useRef)(null),h=(0,u.useCallback)((e=>{f.current=e,s?.(e)}),[s]),b=(0,u.useCallback)((()=>{f.current&&f.current.updateRect()}),[]),{hasEditModeMoveable:E}=(0,Mn.getDefinitionForType)(t.type);return c.createElement(_F,{ref:r,"aria-label":(0,d._x)("Edit layer","compound noun","web-stories"),"data-testid":"editLayer",grayout:o,zIndex:3,onPointerDown:e=>{e.target!==r.current&&e.target!==a.current||l()}},c.createElement(vF,{ref:a,fullBleedContainerLabel:(0,d.__)("Fullbleed area (Edit layer)","web-stories"),isControlled:!0,showOverflow:n,overflow:n?"visible":"hidden"},c.createElement(TB,{editWrapper:E&&m,onResize:b,element:t,ref:g})),E&&m&&c.createElement(yF,{selectedElement:t,targetEl:m,isEditMode:!0,ref:h}),i&&c.createElement(KB,{showOverflow:!0},c.createElement(EB,null)))}const wF=(0,u.memo)((function EditLayer(){const{currentPage:e}=Qa((e=>({currentPage:e.state.currentPage}))),{editingElement:t,showOverflow:n=!0}=Xs((e=>{let{state:{editingElement:t,editingElementState:{showOverflow:n}={}}}=e;return{editingElement:t,showOverflow:n}})),r=t&&e&&e.elements.find((e=>e.id===t));return r?c.createElement(EditLayerForElement,{element:r,showOverflow:n}):null}));const TF=function(){const{pageAttachmentContainer:e}=Xs((e=>({pageAttachmentContainer:e.state.pageAttachmentContainer}))),{hasLinksInAttachmentArea:t,hasInvalidLinkSelected:n,hasPageAttachment:r,hasElementsInAttachmentArea:a}=Qa((t=>{let{state:n}=t;const r=e=>{let{link:t}=e;return t?.url?.length},a=n.currentPage.elements.filter(r),o=Boolean(n.currentPage?.pageAttachment?.url?.length);return{hasInvalidLinkSelected:Boolean(e&&o&&n.selectedElements.filter(r).some(Mn.isElementBelowLimit)),hasLinksInAttachmentArea:Boolean(e&&a.some((e=>(0,Mn.isElementBelowLimit)(e,!0)))),hasElementsInAttachmentArea:Boolean(e&&o&&n.selectedElements.some((e=>(0,Mn.isElementBelowLimit)(e,!1)))),hasPageAttachment:o}}));return{hasLinksInAttachmentArea:t,hasInvalidLinkSelected:n,isElementInAttachmentArea:(0,u.useCallback)((t=>!!e&&(!!r&&(0,Mn.isElementBelowLimit)(t,!1))),[e,r]),hasElementsInAttachmentArea:a}};var SF,CF;function IF(){return IF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IF.apply(this,arguments)}const SvgDefaultIcon=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",IF({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,SF||(SF=c.createElement("path",{fillOpacity:.1,d:"M12 0c6.6 0 12 5.4 12 12s-5.4 12-12 12S0 18.6 0 12 5.4 0 12 0z"})),CF||(CF=c.createElement("path",{d:"M13.8 14.6c.1.1.2.3.2.5s-.1.3-.2.5L12.3 17c-.7.7-1.7 1.1-2.7 1.1-1 0-1.9-.4-2.7-1.1-.7-.7-1.1-1.7-1.1-2.7 0-1 .4-1.9 1.1-2.7l1.5-1.5c.2 0 .3-.1.5-.1s.3.1.5.2c.1.1.2.3.2.5s-.1.4-.2.5l-1.5 1.5c-.5.5-.7 1.1-.7 1.7 0 .6.3 1.3.7 1.7.5.5 1.1.7 1.7.7s1.3-.3 1.7-.7l1.5-1.5c.3-.3.7-.3 1 0zM17 7c-.7-.7-1.7-1.1-2.7-1.1-1 0-1.9.4-2.7 1.1l-1.5 1.5c0 .1-.1.3-.1.4 0 .2.1.3.2.5.1.1.3.2.5.2s.3-.1.5-.2l1.5-1.5c.5-.5 1.1-.7 1.7-.7.6 0 1.3.3 1.7.7.5.5.7 1.1.7 1.7 0 .6-.3 1.3-.7 1.7l-1.5 1.5c-.1.1-.2.3-.2.5s.1.3.2.5c.1.1.3.2.5.2s.3-.1.5-.2l1.5-1.5c.7-.7 1.1-1.7 1.1-2.7-.1-1-.5-1.9-1.2-2.6zm-7.9 7.2c0 .2.1.3.2.5.1.1.3.2.5.2s.4-.1.5-.2l4.5-4.5c.1-.1.2-.3.2-.5s-.1-.4-.2-.5c-.3-.2-.8-.2-1 .1l-4.5 4.5c-.1.1-.2.3-.2.4z"})))},xF=(0,c.memo)(SvgDefaultIcon);var AF;function kF(){return kF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kF.apply(this,arguments)}const SvgArrowBar=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",kF({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 8","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,AF||(AF=c.createElement("path",{d:"M18 7.7c-.2 0-.5-.1-.7-.2l-7.3-4-7.3 4c-.7.4-1.6.2-2-.6-.4-.7-.1-1.6.6-2l8-4.4c.5-.2 1-.2 1.5 0l8 4.4c.7.4 1 1.3.6 2-.4.5-.9.8-1.4.8z"})))},OF=(0,c.memo)(SvgArrowBar),PF=p.default.div.withConfig({displayName:"pageAttachment__Wrapper",componentId:"sc-1bseqmx-0"})(["position:absolute;display:flex;align-items:center;justify-content:flex-end;flex-direction:column;bottom:0;height:20%;width:100%;color:",";z-index:3;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),NF=p.default.div.withConfig({displayName:"pageAttachment__Guideline",componentId:"sc-1bseqmx-1"})(["mix-blend-mode:difference;position:absolute;height:1px;bottom:20%;width:100%;background-image:",";background-position:top;background-size:16px 0.5px;background-repeat:repeat-x;z-index:3;"],(e=>{let{theme:t}=e;return`linear-gradient(to right, ${t.colors.standard.black} 50%, ${t.colors.standard.white} 0%)`})),RF=(0,p.default)(OF).withConfig({displayName:"pageAttachment__ArrowBar",componentId:"sc-1bseqmx-2"})(["display:block;cursor:pointer;margin-bottom:10px;filter:drop-shadow(0px 2px 6px rgba(0,0,0,0.3));width:20px;height:8px;"]),MF=p.default.div.withConfig({displayName:"pageAttachment__OutlinkChip",componentId:"sc-1bseqmx-3"})(["height:","px;display:flex;position:relative;padding:","px ","px;margin:0 0 20px;max-width:calc(100% - 64px);border-radius:30px;place-items:center;box-shadow:0px 4px 10px rgba(0,0,0,0.15);background:",";"],(e=>{let{$factor:t}=e;return t(36)}),(e=>{let{$factor:t}=e;return t(10)}),(e=>{let{$factor:t}=e;return t(6)}),(e=>{let{bgColor:t}=e;return t})),LF=p.default.span.withConfig({displayName:"pageAttachment__TextWrapper",componentId:"sc-1bseqmx-4"})(["font-family:Roboto,sans-serif;font-size:","px;line-height:18px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;position:relative;padding-inline-start:6px;padding-inline-end:8px;height:16px;letter-spacing:0.3px;font-weight:700;max-width:210px;color:",";"],(e=>{let{$factor:t}=e;return t(16)}),(e=>{let{fgColor:t}=e;return t})),DF=p.default.div.withConfig({displayName:"pageAttachment__Tooltip",componentId:"sc-1bseqmx-5"})(["background-color:",";color:",";width:200px;padding:8px;font-size:14px;border-radius:4px;text-align:center;"],(e=>{let{theme:t}=e;return t.colors.standard.black}),(e=>{let{theme:t}=e;return t.colors.standard.white})),BF=p.default.img.withConfig({displayName:"pageAttachment__LinkImage",componentId:"sc-1bseqmx-6"})(["height:24px;width:24px;vertical-align:middle;border-radius:50%;border:0 none;object-fit:contain;"]),FF={x:8},HF="#FFFFFF",UF="#000000";const jF=function PageAttachment(e){let{pageAttachment:t={}}=e;const{displayLinkGuidelines:n,pageAttachmentContainer:r,setPageAttachmentContainer:a}=Xs((e=>({displayLinkGuidelines:e.state.displayLinkGuidelines,pageAttachmentContainer:e.state.pageAttachmentContainer,setPageAttachmentContainer:e.actions.setPageAttachmentContainer}))),{dataToEditorY:o}=(0,Bc.default)((e=>{let{actions:{dataToEditorY:t}}=e;return{dataToEditorY:t}})),{hasInvalidLinkSelected:i}=TF(),{ctaText:l,url:s,icon:u,theme:p}=t,m=p===Fe?UF:HF,g=p===Fe?HF:UF;return c.createElement(c.Fragment,null,(n||i)&&c.createElement(NF,null),c.createElement(PF,{role:"presentation",ref:a},s?.length>0&&c.createElement(c.Fragment,null,c.createElement(RF,{fill:m}),c.createElement(MF,{bgColor:m,$factor:o},u?c.createElement(BF,{src:u,alt:(0,d.__)("Site Icon","web-stories"),decoding:"async",crossOrigin:"anonymous"}):c.createElement(xF,{fill:g,width:o(24),height:o(24)}),c.createElement(LF,{fgColor:g,$factor:o},l||(0,d.__)("Learn more","web-stories"))),r&&i&&c.createElement(uw.Popup,{anchor:{current:r},isOpen:!0,placement:Vd.PLACEMENT.LEFT,spacing:FF},c.createElement(DF,null,(0,d.__)("Links can not reside below the dashed line when a page attachment is present. Your viewers will not be able to click on the link.","web-stories"))))))};var zF;function GF(){return GF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GF.apply(this,arguments)}const YF=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",GF({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 8","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,zF||(zF=c.createElement("path",{d:"M18 7.7c-.2 0-.5-.1-.7-.2l-7.3-4-7.3 4c-.7.4-1.6.2-2-.6-.4-.7-.1-1.6.6-2l8-4.4c.5-.2 1-.2 1.5 0l8 4.4c.7.4 1 1.3.6 2-.4.5-.9.8-1.4.8z"})))},ZF=(0,c.memo)(YF),WF=p.default.div.withConfig({displayName:"shoppingPageAttachment__Wrapper",componentId:"sc-7unzl7-0"})(["position:absolute;display:flex;align-items:center;justify-content:flex-end;flex-direction:column;bottom:0;height:20%;width:100%;color:",";z-index:3;"],(e=>{let{theme:t}=e;return t.colors.standard.white})),VF=p.default.div.withConfig({displayName:"shoppingPageAttachment__InnerWrap",componentId:"sc-7unzl7-1"})(["position:relative;width:100%;height:100%;"]),$F=p.default.div.withConfig({displayName:"shoppingPageAttachment__Inner",componentId:"sc-7unzl7-2"})(["position:absolute;bottom:0;width:100%;",";display:flex;flex-direction:column;align-items:center;"],(e=>{let{$hasGradient:t}=e;return t&&"background: linear-gradient(0, rgba(0, 0, 0, 0.15), transparent) !important"})),qF=p.default.div.withConfig({displayName:"shoppingPageAttachment__ArrowWrap",componentId:"sc-7unzl7-3"})(["width:","px;min-height:","px;border-radius:50%;background:",";display:flex;align-items:center;justify-content:center;"],(e=>{let{$factor:t}=e;return t(32)}),(e=>{let{$factor:t}=e;return t(32)}),(e=>{let{bgColor:t}=e;return t})),KF=(0,p.default)(ZF).withConfig({displayName:"shoppingPageAttachment__ArrowBar",componentId:"sc-7unzl7-4"})(["display:block;cursor:pointer;filter:drop-shadow(0px 2px 6px rgba(0,0,0,0.3));width:","px;height:","px;"],(e=>{let{$factor:t}=e;return t(20)}),(e=>{let{$factor:t}=e;return t(8)})),XF=p.default.div.withConfig({displayName:"shoppingPageAttachment__OutlinkChip",componentId:"sc-7unzl7-5"})(["height:","px;display:flex;position:relative;padding:","px ","px;margin:0 0 ","px;max-width:calc(100% - 64px);border-radius:30px;place-items:center;background:",";"],(e=>{let{$factor:t}=e;return t(36)}),(e=>{let{$factor:t}=e;return t(10)}),(e=>{let{$factor:t}=e;return t(6)}),(e=>{let{$factor:t}=e;return t(20)}),(e=>{let{bgColor:t}=e;return t})),QF=p.default.span.withConfig({displayName:"shoppingPageAttachment__TextWrapper",componentId:"sc-7unzl7-6"})(["font-family:Roboto,sans-serif;font-size:","px;line-height:18px;text-overflow:ellipsis;white-space:nowrap;position:relative;padding-inline-start:6px;padding-inline-end:8px;height:","px;letter-spacing:0.3px;font-weight:700;max-width:210px;color:",";"],(e=>{let{$factor:t}=e;return t(16)}),(e=>{let{$factor:t}=e;return t(16)}),(e=>{let{fgColor:t}=e;return t})),JF="#FFFFFF",eH="#000000";const tH=function(e){let{ctaText:t,theme:n}=e;const r=n===Fe?JF:eH,a=n===Fe?eH:JF,{dataToEditorY:o}=(0,Bc.default)((e=>{let{actions:{dataToEditorY:t}}=e;return{dataToEditorY:t}}));return c.createElement(WF,{role:"presentation"},c.createElement(VF,null,c.createElement($F,{$hasGradient:n!==Fe},c.createElement(qF,{bgColor:a,$factor:o},c.createElement(KF,{fill:r,$factor:o})),c.createElement(XF,{$factor:o},c.createElement(QF,{fgColor:a,$factor:o},t||(0,d.__)("Shop Now","web-stories"))))))};const nH=function(e){const t=/^(?:(\d{2,}):)?(\d{2}):(\d{2})\.(\d{3})$/.exec(e);return t?3600*(t[1]?parseInt(t[1]):0)+60*parseInt(t[2])+parseInt(t[3])+parseInt(t[4])/1e3:null},rH=p.default.span.withConfig({displayName:"cue__CueWrapper",componentId:"sc-h5j1x4-0"})(["text-align:center;height:",";"],(e=>{let{$height:t}=e;return`${t}px`})),aH=p.default.span.withConfig({displayName:"cue__CueEl",componentId:"sc-h5j1x4-1"})(["color:",";"],(e=>{let{$isFutureCue:t,theme:n}=e;return t?n.colors.fg.black:n.colors.fg.white})),oH=p.default.span.withConfig({displayName:"cue__Section",componentId:"sc-h5j1x4-2"})(["margin:0 10px 10px;padding:6px 12px;vertical-align:middle;border-radius:15px;background:rgba(11,11,11,0.6);color:rgba(255,255,255,1);display:inline-block;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen-Sans,Ubuntu,Cantarell,'Helvetica Neue',sans-serif;line-height:1.4;word-break:break-word;word-wrap:break-word;overflow-wrap:break-word;"]);const iH=function Cue(e){let{cue:t,videoTime:n,height:r}=e;const a=t.getCueAsHTML();return c.createElement(rH,{$height:r},c.createElement(oH,null,[...a.childNodes].map((e=>{if("timestamp"===e.target)return null;{let t=null;"timestamp"===e.previousSibling?.target&&(t=nH(e.previousSibling.data));const r=t>n;return e.nodeType===Node.TEXT_NODE?null!==t?c.createElement("span",null,c.createElement(aH,{$isFutureCue:r},e.textContent)):c.createElement(aH,null,e.textContent):null!==t?c.createElement("span",null,c.createElement(aH,{$isFutureCue:r,dangerouslySetInnerHTML:{__html:e.innerHTML}})):c.createElement(aH,{dangerouslySetInnerHTML:{__html:e.innerHTML}})}}))))},lH=p.default.div.withConfig({displayName:"trackRenderer__Track",componentId:"sc-7rx40r-0"})(["width:100%;height:100%;display:grid;align-content:end;font-size:",";"],(e=>{let{$fontSize:t}=e;return`${t}px`}));const sH=function TrackRenderer(e){let{elementId:t,trackIndex:n}=e;const{pageWidth:r,pageHeight:a}=gs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{pageWidth:t,pageHeight:n}})),o=.04*r,i=.2*a,[l,s]=(0,u.useState)(null),[d,p]=(0,u.useState)(0),[m,g]=(0,u.useState)([]),f=(0,u.useCallback)((()=>{const e=l?.activeCues?[...l.activeCues]:[];g(e)}),[l]);return(0,u.useEffect)((()=>{f(),p(0);const e=document.getElementById(t);if(!e)return;const r=e.textTracks?.[n];return r?(r.mode="hidden",f(),s(r),e.addEventListener("timeupdate",(()=>{p(e.currentTime)})),r.addEventListener("cuechange",f),()=>{r.removeEventListener("cuechange",f)}):void 0}),[n,f,t,r,a]),m&&l?c.createElement(lH,{$fontSize:o},m.map(((e,t)=>c.createElement(iH,{key:t,cue:e,videoTime:d,height:i})))):null},cH=(0,p.default)(BB).withConfig({displayName:"mediaCaptionsLayer__CaptionsLayer",componentId:"sc-11mx67a-0"})([""]),dH=(0,p.default)(XB).withConfig({displayName:"mediaCaptionsLayer__CaptionsPageArea",componentId:"sc-11mx67a-1"})(["position:absolute;pointer-events:none;"]),uH=p.default.div.withConfig({displayName:"mediaCaptionsLayer__CaptionsCanvas",componentId:"sc-11mx67a-2"})(["background:transparent;border-radius:5px;position:absolute;z-index:2;transform:translateZ(0);top:0;left:0;bottom:0;right:0;cursor:default;"]);const pH=function MediaCaptionsLayer(){const{isEditing:e}=Xs((e=>{let{state:{isEditing:t}}=e;return{isEditing:t}})),{currentPageId:t,backgroundAudio:n,videoElement:r}=Qa((e=>{let{state:t}=e;const{selectedElements:n,currentPage:r}=t,{backgroundAudio:a}=r;let o=null,i=null;if(1===n.length){const e=n[0],{isBackground:t,type:r,tracks:l}=e;t&&a&&a?.tracks?.length>0&&(o=a),"video"===r&&l?.length>0&&(i=e)}return{currentPageId:r?.id,backgroundAudio:o,videoElement:i}})),[a,o]=(0,u.useState)(0),[i,l]=(0,u.useState)("");return(0,u.useEffect)((()=>{if(o(0),l(""),n)return l(`page-${t}-background-audio`),void o(n?.tracks?.length);!e&&r&&(l(`video-${r.id}`),o(r.tracks.length))}),[r,n,t,e]),a?c.createElement(cH,null,c.createElement(dH,{withSafezone:!1,showOverflow:!0},c.createElement(uH,null,Array.from({length:a}).map(((e,t)=>c.createElement(sH,{key:t,elementId:i,trackIndex:t})))))):null},mH=(0,p.default)(XB).withConfig({displayName:"displayLayer__DisplayPageArea",componentId:"sc-13e1aq-0"})(["position:absolute;"]);function DisplayPage(e){let{pageElements:t,editingElement:n}=e;return t?t.map((e=>{if(n===e.id)return null;const r=t.filter((t=>{let{type:n}=t;return n===e.type})).length-1;return c.createElement(qc,{key:e.id,element:e,isAnimatable:!0,siblingCount:r})})):null}function DisplayPageAnimationController(e){let{resetAnimationState:t}=e;const{animationState:n,pageId:r}=Qa((e=>{let{state:t}=e;return{animationState:t.animationState,pageId:t.currentPage?.id}})),a=(0,Un.useStoryAnimationContext)((e=>{let{actions:t}=e;return t.WAAPIAnimationMethods}));return(0,u.useEffect)((()=>{switch(n){case Un.STORY_ANIMATION_STATE.PLAYING_SELECTED:case Un.STORY_ANIMATION_STATE.PLAYING:return void a.play();case Un.STORY_ANIMATION_STATE.RESET:return void a.reset();case Un.STORY_ANIMATION_STATE.SCRUBBING:case Un.STORY_ANIMATION_STATE.PAUSED:return void a.pause();default:return}}),[n,a]),(0,u.useEffect)((()=>t),[t,r]),null}function StoryAnimations(e){let{children:t}=e;const{isAnimationPlaying:n,currentPageAnimations:r,currentPageElements:a,selectedElements:o,updateAnimationState:i}=Qa((e=>{let{state:t,actions:n}=e;return{isAnimationPlaying:t.animationState===Un.STORY_ANIMATION_STATE.PLAYING_SELECTED,currentPageAnimations:t.currentPage?.animations||ze,currentPageElements:t.currentPage?.elements||ze,selectedElements:t.selectedElements,updateAnimationState:n.updateAnimationState}})),l=(0,u.useCallback)((()=>{i({animationState:Un.STORY_ANIMATION_STATE.RESET})}),[i]),s=(0,u.useMemo)((()=>o.map((e=>e.id))),[o]);return c.createElement(Un.StoryAnimation.Provider,{animations:r,elements:a,onWAAPIFinish:l,selectedElementIds:n?s:ze},c.createElement(DisplayPageAnimationController,{resetAnimationState:l}),t)}DisplayPageAnimationController.propTypes={resetAnimationState:za().func};const gH=(0,u.memo)((function DisplayLayer(){const{backgroundColor:e,isBackgroundSelected:t,pageAttachment:n,shoppingAttachment:r,hasProducts:a}=Qa((e=>{let{state:t}=e;return{hasCurrentPage:Boolean(t.currentPage),backgroundColor:t.currentPage?.backgroundColor,isBackgroundSelected:t.selectedElements?.[0]?.isBackground,pageAttachment:t.currentPage?.pageAttachment||{},shoppingAttachment:t.currentPage?.shoppingAttachment||{},hasProducts:t.currentPage?.elements?.some((e=>{let{type:t,product:n}=e;return t===Mn.ELEMENT_TYPES.PRODUCT&&n?.productId}))}})),o=Qa((e=>{let{state:t}=e;return t.currentPage?.elements||ze})),i=Qs(qs),{editingElement:l,setPageContainer:s,setFullbleedContainer:p}=Xs((e=>{let{state:{editingElement:t},actions:{setPageContainer:n,setFullbleedContainer:r}}=e;return{editingElement:t,setPageContainer:n,setFullbleedContainer:r}})),m=(0,u.useMemo)((()=>a?c.createElement(tH,r):c.createElement(jF,{pageAttachment:n})),[a,n,r]);return c.createElement(StoryAnimations,null,c.createElement(BB,{"data-testid":"DisplayLayer",pointerEvents:"none","aria-label":(0,d._x)("Display layer","compound noun","web-stories")},c.createElement(mH,{ref:(0,u.useCombinedRefs)(s,i),fullbleedRef:p,background:e,isBackgroundSelected:t,fullBleedContainerLabel:(0,d.__)("Fullbleed area (Display layer)","web-stories"),overlay:m,isControlled:!0},c.createElement(DisplayPage,{pageElements:o,editingElement:l})),c.createElement(pH,null)))}));var fH=n(49640);const hH=function(e,t,n,r){if(!n||n.length>1)return{};let a=null;if("ArrowUp"===e&&(a=t?Pe:Re),"ArrowDown"===e&&(a=t?Ne:Me),!a)return{};const{id:o,groupId:i}=n[0],l=r.findIndex((e=>{let{id:t}=e;return t===o}));if(i){const e=r[l-1]?.groupId!==i,t=r[l+1]?.groupId!==i;if(e&&a===Me||t&&a===Re)return{position:l,groupId:null}}else{if(r[l-1]?.groupId&&a===Me)return{position:l,groupId:r[l-1].groupId};if(r[l+1]?.groupId&&a===Re)return{position:l,groupId:r[l+1].groupId}}return{position:a}};const bH=function(e){const{selectedElementIds:t,selectedElements:n,arrangeSelection:r,deleteSelectedElements:a,duplicateElementsById:o,updateSelectedElements:i,setSelectedElementsById:l,currentPage:s,currentPageNumber:c,animationState:p,updateAnimationState:m,currentPageProductIds:g,pageElements:f}=Qa((e=>{let{state:{selectedElementIds:t,selectedElements:n,currentPage:r,currentPageNumber:a,animationState:o},actions:{arrangeSelection:i,deleteSelectedElements:l,duplicateElementsById:s,updateSelectedElements:c,setSelectedElementsById:d,updateAnimationState:u}}=e;return{currentPage:r,currentPageNumber:a,selectedElementIds:t,selectedElements:n,arrangeSelection:i,deleteSelectedElements:l,duplicateElementsById:s,updateSelectedElements:c,setSelectedElementsById:d,animationState:o,updateAnimationState:u,currentPageProductIds:r?.elements?.filter((e=>{let{type:t}=e;return t===Mn.ELEMENT_TYPES.PRODUCT})).map((e=>{let{product:t}=e;return t?.productId})),pageElements:r?.elements}})),h=(0,jr.useSnackbar)((e=>{let{showSnackbar:t}=e;return t})),{setHighlights:b}=mm((e=>{let{setHighlights:t}=e;return{setHighlights:t}})),{isEditing:E,getNodeForElement:y,setEditingElement:_}=Xs((e=>{let{state:{isEditing:t},actions:{getNodeForElement:n,setEditingElement:r}}=e;return{isEditing:t,getNodeForElement:n,setEditingElement:r}})),v=(0,u.useRef)(null);v.current=t,(0,u.useEffect)((()=>{const t=e.current;if(!t)return;const n=t.ownerDocument,r=()=>{setTimeout((()=>{if(n.activeElement===n.body){const e=v.current,n=1===e?.length?y(e[0]):null;if(""!==window.getSelection().toString())return;n?n.focus({preventScroll:!0}):t.focus({preventScroll:!0})}}),300)};return n.addEventListener("focusout",r,!0),()=>{n.removeEventListener("focusout",r,!0)}}),[e,y]),(0,Ir.useGlobalKeyDownEffect)("delete",(()=>a()),[a]),(0,Ir.useGlobalKeyDownEffect)({key:["mod+a"]},(()=>{const e=s.elements.map((e=>{let{id:t}=e;return t}));l({elementIds:e})}),[s,l]),(0,Ir.useGlobalKeyDownEffect)({key:["up","down","left","right"],shift:!0},(e=>{let{key:t,shiftKey:r}=e;if(E)return;const{isBackground:a,isLocked:o}=n?.[0]||{};if(a||o)return;const{dx:l,dy:s}=(0,fH.default)(t,r);i({properties:e=>{let{x:t,y:n}=e;return{x:t+l,y:n+s}}})}),[i,E,n]),(0,Ir.useGlobalKeyDownEffect)({key:["mod+up","mod+down","mod+left","mod+right"],shift:!0},(e=>{const{key:t,shiftKey:a}=e;if(e.preventDefault(),1===n?.length){const{position:e,groupId:o}=hH(t,a,n,f);(e||o)&&r({position:e,groupId:o})}}),[r,n,f]),(0,Ir.useGlobalKeyDownEffect)({key:"enter",clickable:!1},(()=>{if(1!==n.length)return;const{type:e,id:t,isLocked:r}=n[0],{hasEditMode:a,hasEditModeIfLocked:o}=(0,Mn.getDefinitionForType)(e);!a||!o&&r||_(t)}),[n,_]);const w=(0,u.useCallback)((()=>{if(0!==n.length){for(const{type:e,product:t}of n){const{productId:n,productTitle:r,productImages:a}=t||{};e===Mn.ELEMENT_TYPES.PRODUCT&&n&&g.includes(n)&&h({message:(0,$e.default)(
/* translators: %s: product title. */
(0,d.__)('Product "%s" already exists on the page.',"web-stories"),r),thumbnail:a?.[0]?.url&&{src:a[0].url,alt:a[0].alt}})}o({elementIds:n.map((e=>e.id))})}}),[o,n,g,h]);(0,Ir.useGlobalKeyDownEffect)("clone",(()=>w()),[w]);const T=[Un.STORY_ANIMATION_STATE.PLAYING,Un.STORY_ANIMATION_STATE.PLAYING_SELECTED].includes(p);(0,Ir.useGlobalKeyDownEffect)({key:["mod+enter"]},(e=>{e.preventDefault(),1!==c&&(m({animationState:T?Un.STORY_ANIMATION_STATE.RESET:Un.STORY_ANIMATION_STATE.PLAYING}),(0,P.trackEvent)("canvas_play_animations",{status:T?"stop":"play"}))}),[T,m,c]),(0,Ir.useGlobalKeyDownEffect)({key:["mod+k"]},(e=>{e.preventDefault(),n.length&&!n?.[0]?.isBackground&&b({elements:n,highlight:_g.LINK})}),[b,n])},EH=p.default.div.withConfig({displayName:"extraPages__ExtraPageWrapper",componentId:"sc-12b8j4d-0"})(["display:flex;overflow:hidden;justify-content:",";align-items:center;height:100%;"],(e=>{let{isPrevious:t}=e;return t?"flex-end":"flex-start"})),yH=p.default.ol.withConfig({displayName:"extraPages__ExtraPageList",componentId:"sc-12b8j4d-1"})(["display:flex;flex-direction:",";width:","px;margin:0;padding:0 ","px;gap:","px;"],(e=>{let{isPrevious:t}=e;return t?"row-reverse":"row"}),(e=>{let{listWidth:t}=e;return t}),32,32),_H=p.default.li.withConfig({displayName:"extraPages__ExtraPage",componentId:"sc-12b8j4d-2"})(["display:block;width:","px;height:100%;border-radius:4px;background-color:white;opacity:",";transition:opacity 0.2s ease;&:hover{opacity:1;}",""],(e=>{let{extraPageWidth:t}=e;return t-32}),(e=>{let{$distance:t}=e;return.6-.15*t}),(e=>{let{$inert:t}=e;return t&&"pointer-events: none;"})),vH=(0,p.default)(Vk).withConfig({displayName:"extraPages__ExtraPagePreview",componentId:"sc-12b8j4d-3"})(["cursor:pointer;"]);function wH(e,t){return e<t?Array.from(Array(t-e)).map(((t,n)=>n+e)):[]}const TH=(0,u.memo)((function ExtraPages(e){let{isPrevious:t=!1}=e;const{currentPageIndex:n,pages:r,setCurrentPage:a}=Qa((e=>{let{state:{pages:t,currentPageIndex:n},actions:{setCurrentPage:r}}=e;return{currentPageIndex:n,pages:t,setCurrentPage:r}})),{hasExtraPages:o,extraPageWidth:i,extraPageCount:l}=gs((e=>{let{state:{hasExtraPages:t,extraPageWidth:n,extraPageCount:r}}=e;return{hasExtraPages:t,extraPageWidth:n,extraPageCount:r}})),s=(0,I.useTransform)((e=>{let{state:{isAnythingTransforming:t}}=e;return t})),u=(0,C.useFeature)("extraPages"),p=r?.length;if(!p||!u)return null;const m=function(e){let{isPrevious:t,hasExtraPages:n,currentPageIndex:r,extraPageCount:a,pageCount:o}=e;if(!n)return[];if(t)return wH(Math.max(0,r-a),r).reverse();return wH(r+1,Math.min(o,r+a+2))}({isPrevious:t,hasExtraPages:o,currentPageIndex:n,extraPageCount:l,pageCount:p});if(0===m.length)return null;const g=m.length*i,f=(i-32)/ee.PAGE_RATIO;return c.createElement(EH,{isPrevious:t},c.createElement(yH,{isPrevious:t,listWidth:g,extraPageHeight:f},m.map(((e,t)=>{return c.createElement(_H,{key:e,extraPageWidth:i,$inert:s,$distance:t},c.createElement(vH,{page:r[e],onClick:(n=r[e].id,()=>a({pageId:n})),"aria-label":(0,$e.default)(
/* translators: %s: page number. */
(0,d.__)("Go to page %s","web-stories"),e+1),width:i-32}));var n}))))}));function SH(){let{url:e="",needsProxy:t=!1,rel:n=[],...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{needsProxy:t,url:e,rel:n,...r}}const CH=(0,p.default)(Tooltip).withConfig({displayName:"frame__StyledTooltip",componentId:"sc-1fjzoyw-0"})(["box-shadow:0px 6px 10px ",";align-items:center;p{display:flex;max-width:100%;}"],(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.standard.black,.1)})),IH=p.default.div.withConfig({displayName:"frame__IconWrapper",componentId:"sc-1fjzoyw-1"})(["background-color:",";width:24px;height:24px;border-radius:50%;margin-right:8px;display:inline-block;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),xH=p.default.img.withConfig({displayName:"frame__BrandIcon",componentId:"sc-1fjzoyw-2"})(["width:100%;height:100%;border:none;"]),AH=p.default.span.withConfig({displayName:"frame__LinkDesc",componentId:"sc-1fjzoyw-3"})(["padding-top:2px;flex:1;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;"]);const kH=function(e){let{element:t,active:n,children:r,anchorRef:a}=e;const o=function(e){return e.link||null}(t),i=o?.url&&n?c.createElement(c.Fragment,null,c.createElement(IH,null,o?.icon&&c.createElement(xH,{src:o.icon,alt:(0,d.__)("Site Icon","web-stories"),decoding:"async",crossOrigin:"anonymous"})),c.createElement(AH,null,o.desc||o.url)):null;return c.createElement(CH,{forceAnchorRef:a,placement:Vd.PLACEMENT.TOP_START,title:i},r)};var OH;function PH(){return PH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PH.apply(this,arguments)}const SvgPill=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",PH({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,OH||(OH=c.createElement("path",{d:"M11.49 5.755 6.24.505a1.16 1.16 0 0 0-.823-.338H1.334A1.17 1.17 0 0 0 .167 1.333v4.084c0 .32.128.612.344.828l5.25 5.25c.21.21.502.338.823.338.32 0 .612-.128.822-.344l4.083-4.083a1.14 1.14 0 0 0 .345-.823c0-.32-.134-.618-.345-.828ZM2.208 3.083a.874.874 0 1 1 0-1.75.874.874 0 1 1 0 1.75Z",fill:"currentColor"})))},NH=(0,c.memo)(SvgPill),RH=(0,p.default)(Tooltip).withConfig({displayName:"frame__StyledTooltip",componentId:"sc-uvs0u9-0"})(["align-items:center;p{display:flex;max-width:100%;color:#fff;font-family:'Poppins',sans-serif;font-weight:700;font-size:14px;line-height:24px;padding:0;}background-color:rgba(125,125,125,0.75);border-radius:18px;padding-inline-start:6px;padding-inline-end:12px;cursor:pointer;height:36px;"]),MH=p.default.span.withConfig({displayName:"frame__PillImage",componentId:"sc-uvs0u9-1"})(["width:24px;height:24px;display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,0.6);border-radius:100%;flex-shrink:0;flex-shrink:0;margin-inline-end:4px;"]);function TooltipTitle(e){let{productTagText:t}=e;return c.createElement(c.Fragment,null,c.createElement(MH,null,c.createElement(NH,{width:14,height:14,"aria-hidden":!0})),t)}const LH=function WithProductPill(e){let{element:t,active:n,children:r,anchorRef:a}=e;const{actions:{maybeEnqueueFontStyle:o}}=Wo(),{locale:{locale:i}}=U(),l=t.type;if((0,u.useEffect)((()=>{l===Mn.ELEMENT_TYPES.PRODUCT&&o([{font:{family:"Poppins",service:"fonts.google.com",weights:[700],styles:["regular"],variants:[[0,700]]},fontWeight:700}])}),[l,o]),l!==Mn.ELEMENT_TYPES.PRODUCT)return r;const{productPrice:s,productPriceCurrency:d,productTitle:p}=t.product,m=s&&d&&i?new Intl.NumberFormat(i,{style:"currency",currency:d}).format(s):p;return c.createElement(RH,{forceAnchorRef:a,placement:Vd.PLACEMENT.RIGHT,hasTail:!1,title:n?c.createElement(TooltipTitle,{productTagText:m}):null},r)},DH=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const[r,a]=(0,u.useState)(null),[o,i]=(0,u.useState)(null),l=(0,u.useCallback)((n=>o=>{if(o.stopPropagation(),r!==n)return r&&e(o,r),a(n),void i(o);t(o,r),a(null)}),[e,t,r]);return(0,u.useEffect)((()=>{if(!r)return;const t=setTimeout((()=>{a(null),e(o,r)}),n||BH);return()=>{clearTimeout(t)}}),[r,o,e,n]),l},BH=200;function FH(){return FH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FH.apply(this,arguments)}const HH=p.default.div.withConfig({displayName:"frameElement__Wrapper",componentId:"sc-80q0sm-0"})([""," "," "," outline:1px solid transparent;transition:outline-color 0.5s;&:focus,&:active{outline-color:",";}"," ",""],qn.elementWithPosition,qn.elementWithSize,qn.elementWithRotation,(e=>{let{theme:t,hasMask:n}=e;return n?"transparent":t.colors.border.selection}),(e=>{let{isLocked:t,hasMask:n,theme:r}=e;return!t&&!n&&`\n    &:hover {\n      outline-color: ${r.colors.border.selection};\n    }\n  `}),(e=>{let{isClickable:t}=e;return!t&&"pointer-events: none;"})),UH=p.default.div.withConfig({displayName:"frameElement__EmptyFrame",componentId:"sc-80q0sm-1"})(["position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;"]),NOOP=()=>{},jH=(0,$e.default)(
/* translators: %s: Ctrl+Alt+P keyboard shortcut. */
(0,d.__)("To exit the canvas area, press Escape. Press Tab to move to the next group or element. To enter floating menu, press %s.","web-stories"),(0,Ir.prettifyShortcut)("ctrl+alt+p"));const zH=(0,u.memo)((function FrameElement(e){let{id:t}=e;const n=(0,wx.default)(),{enterFocusGroup:r,setFocusGroupCleanup:a}=GM((e=>{let{enterFocusGroup:t,setFocusGroupCleanup:n}=e;return{enterFocusGroup:t,setFocusGroupCleanup:n}})),[o,i]=(0,u.useState)(!1),l=zM(YM.ELEMENT_SELECTION),{setNodeForElement:s,handleSelectElement:p,isEditing:m,setEditingElement:g,setEditingElementWithState:f}=Xs((e=>{let{state:t,actions:n}=e;return{setNodeForElement:n.setNodeForElement,handleSelectElement:n.handleSelectElement,isEditing:t.isEditing,setEditingElement:n.setEditingElement,setEditingElementWithState:n.setEditingElementWithState}})),{isSelected:h,isOnlySelectedElement:b,isActive:E,isBackground:y,element:_}=Qa((e=>{let{state:n}=e;const r=n.selectedElementIds.includes(t),a=r&&1===n.selectedElementIds.length,i=a&&!o&&!m;return{isSelected:r,isBackground:n.currentPage?.elements[0].id===t,element:n.currentPage?.elements.find((e=>e.id===t)),isOnlySelectedElement:a,isActive:i}})),{type:v,flip:w,isLocked:T}=_,S=!T||h,{Frame:C,isMaskable:x,Controls:A}=(0,Mn.getDefinitionForType)(v),k=(0,u.useRef)(),O=(0,u.useCombinedRefs)(k,l),[P,N]=(0,u.useState)(!1),{isRTL:R,styleConstants:{topOffset:M}={}}=U(),{draggingResource:L,activeDropTargetId:D,isDropSource:B,registerDropTarget:F,unregisterDropTarget:H}=ds((e=>{let{state:{draggingResource:t,activeDropTargetId:n},actions:{isDropSource:r,registerDropTarget:a,unregisterDropTarget:o}}=e;return{draggingResource:t,activeDropTargetId:n,isDropSource:r,registerDropTarget:a,unregisterDropTarget:o}})),j=(0,I.useTransform)((e=>{let{state:t}=e;return!h&&P&&!t.isAnythingTransforming}))&&!T,z=(0,Bc.default)((e=>{let{actions:t}=e;return t.getBoxWithBorder}));(0,u.useLayoutEffect)((()=>{s(t,k.current)}),[t,s]);const G=z(_);(0,I.useTransformHandler)(t,(e=>{const t=k.current;void 0!==e?.dropTargets?.hover&&(t.style.opacity=e.dropTargets.hover?0:1),i(null!==e)}));const{isMedia:Y}=(0,Mn.getDefinitionForType)(v),Z=(0,u.useCallback)((e=>{h||p(t,e),g(t)}),[t,g,p,h]),W=DH(NOOP,Z),V=(0,u.useCallback)((e=>{h||p(t,e),y||n(jH)}),[p,t,y,h,n]),{clearTransforms:$}=(0,I.useTransform)((e=>({clearTransforms:e.actions.clearTransforms}))),q=(0,u.useCallback)((e=>{h||(p(t,e),$()),k.current.focus({preventScroll:!0}),y||e.stopPropagation()}),[p,t,y,h,$]);$m({node:k.current,eventData:{...Se.SELECT_ELEMENT,label:_.type},eventType:"pointerdown"}),(0,Ir.useKeyDownEffect)(k,{key:["ctrl+alt+p"]},(()=>{r({groupId:YM.EDIT_ELEMENT})}),[r]),(0,u.useEffect)((()=>{h&&a({groupId:YM.EDIT_ELEMENT,cleanup:()=>k.current?.focus()})}),[a,h]);const K=(0,Mn.getLayerName)(_),X=_.isLocked?(0,$e.default)(// translators: %s: Name of element
(0,d.__)("Locked element: %s","web-stories"),K):(0,$e.default)(// translators: %s: Name of element
(0,d.__)("Element: %s","web-stories"),K);return c.createElement(LH,{element:_,active:j,anchorRef:k},c.createElement(kH,{element:_,active:j,anchorRef:k},A&&c.createElement(A,{isTransforming:o,box:G,elementRef:k,element:_,isRTL:R,topOffset:M,isActive:E}),c.createElement(HH,FH({ref:O,"data-element-id":t},G,{tabIndex:-1,role:"button","aria-label":X,hasMask:x,isClickable:S,"data-testid":"frameElement",onMouseDown:q,onFocus:V,onPointerEnter:()=>N(!0),onPointerLeave:()=>N(!1),onClick:Y?W(t):null}),c.createElement($n.FrameWithMask,{element:_,fill:!0,flip:w,draggingResource:L,activeDropTargetId:D,isDropSource:B,registerDropTarget:F,unregisterDropTarget:H,isSelected:h},C?c.createElement(C,{wrapperRef:k,element:_,box:G,isOnlySelectedElement:b,setEditingElementWithState:f}):c.createElement(UH,null)))))}));const GH=function(e){let{targetList:t,frames:n,setTransformStyle:r,onGroupEventStart:a,onGroupEventEnd:o,isDragging:i,setIsDragging:l}=e;const{draggingResource:s}=ds((e=>{let{state:{draggingResource:t}}=e;return{draggingResource:t}})),{nodesById:c,handleSelectElement:d}=Xs((e=>{let{state:{nodesById:t},actions:{handleSelectElement:n}}=e;return{nodesById:t,handleSelectElement:n}})),p=(0,u.useRef)({}),m=i||Boolean(s);return{onDragGroup:e=>{let{events:a}=e;a.forEach(((e,a)=>{let{target:o,beforeTranslate:i}=e;const l=n[a],{element:s}=t[a];l.translate=i,r(s,o,l)}))},onDragGroupEnd:e=>{let{targets:t,inputEvent:n}=e;l(!1),(e=>{if((0,x.areEventsDragging)(p.current,e))return!1;const t=Object.keys(c).find((t=>c[t].contains(e.target)));return t&&d(t,e),!0})(n)||o({targets:t})},onDragGroupStart:e=>{let{events:t,inputEvent:n}=e;(e=>{const{timeStamp:t,clientX:n,clientY:r}=e;p.current={timeStamp:t,clientX:n,clientY:r}})(n),i||l(!0),a({events:t,isDrag:!0})},className:"default-moveable "+(m?"hide-handles":""),resizable:!m,rotatable:!m}};const YH=function(e){let{onGroupEventEnd:t,targetList:n,setTransformStyle:r,frames:a}=e;const{editorToDataX:o,editorToDataY:i,dataToEditorY:l,dataToEditorX:s}=(0,Bc.default)((e=>({editorToDataX:e.actions.editorToDataX,editorToDataY:e.actions.editorToDataY,dataToEditorY:e.actions.dataToEditorY,dataToEditorX:e.actions.dataToEditorX})));return{onResizeGroup:e=>{let{events:t}=e;t.forEach(((e,t)=>{let{target:c,direction:d,width:u,height:p,drag:m}=e;const g=a[t],{element:f,updateForResizeEvent:h}=n[t],{border:b,type:E}=f,{resizeRules:y}=(0,Mn.getDefinitionForType)(E),_=s(y.minWidth),v=l(y.minHeight),{left:w=0,right:T=0,top:S=0,bottom:C=0}=b||{};let I=u-(w+T),x=p-(S+C);const A=f.width/f.height;I<_&&(I=_,x=I/A),x<v&&(x=v,I=v*A);let k=null;h&&(k=h(f,d,o(I),i(x))),k&&k.height&&(x=l(k.height));const O=I+w+T,P=x+S+C;c.style.width=`${O}px`,c.style.height=`${P}px`,g.direction=d,g.resize=[O,P],g.translate=m.beforeTranslate,g.updates=k,r(f,c,g)}))},onResizeGroupStart:e=>{let{events:t}=e;t.forEach(((e,t)=>{const n=a[t];e.setOrigin(["%","%"]),e.dragStart&&e.dragStart.set(n.translate)}))},onResizeGroupEnd:e=>{let{targets:n}=e;t({targets:n,isResize:!0})}}};const ZH=function(e){let{onGroupEventStart:t,setTransformStyle:n,onGroupEventEnd:r,targetList:a,frames:o}=e;return{onRotateGroup:e=>{let{events:t}=e;t.forEach(((e,t)=>{let{target:r,beforeRotate:i,drag:l}=e;const s=o[t],{element:c}=a[t];s.rotate=utils_normalizeRotationDegrees(i),s.translate=l.beforeTranslate,n(c,r,s)}))},onRotateGroupEnd:e=>{let{targets:t}=e;r({targets:t,isRotate:!0})},onRotateGroupStart:e=>{let{events:n}=e;t({events:n,isRotate:!0})},throttleRotate:(0,Ir.useGlobalIsKeyPressed)("shift")?30:0}};function WH(){return WH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WH.apply(this,arguments)}const VH=["nw","ne","sw","se"],$H=(0,u.forwardRef)((function MultiSelectionMoveable(e,t){let{selectedElements:n,...r}=e;const a=(0,u.useRef)(),[o,i]=(0,u.useState)(!1),l=n.some((e=>e.isLocked)),s=!l,{updateElementsById:d,deleteElementsById:p,backgroundElement:m}=Qa((e=>({updateElementsById:e.actions.updateElementsById,deleteElementsById:e.actions.deleteElementsById,backgroundElement:e.state.currentPage.elements[0]??{}}))),{nodesById:g,fullbleedContainer:f}=Xs((e=>{let{state:{nodesById:t,fullbleedContainer:n}}=e;return{fullbleedContainer:n,nodesById:t}})),{editorToDataX:h,editorToDataY:b}=(0,Bc.default)((e=>({editorToDataX:e.actions.editorToDataX,editorToDataY:e.actions.editorToDataY}))),{zoomSetting:E,scrollLeft:y,scrollTop:_}=gs((e=>{let{state:{zoomSetting:t,scrollLeft:n,scrollTop:r}}=e;return{zoomSetting:t,scrollLeft:n,scrollTop:r}})),{actions:{pushTransform:v}}=(0,I.useTransform)();nF(a),(0,u.useEffect)((()=>{a.current&&a.current.updateRect()}),[n,a,g,y,_]),tF(a,[E]);const w=n.map((e=>({element:e,node:g[e.id],updateForResizeEvent:(0,Mn.getDefinitionForType)(e.type).updateForResizeEvent}))),T=(e,t,n)=>{const{id:r,border:a}=e;t.style.transform=`translate(${n.translate[0]}px, ${n.translate[1]}px) rotate(${n.rotate}deg)`;const{left:o=0,right:i=0,top:l=0,bottom:s=0}=a||{};let c={...n};if((n.resize[0]||n.resize[1])&&(0,$n.canSupportMultiBorder)(e)){const e=n.resize[0]-(o+i),t=n.resize[1]-(l+s);c={...n,resize:[e,t]}}v(r,c)},S=w?w.map((e=>{let{element:t}=e;return{translate:[0,0],rotate:t.rotationAngle,direction:[0,0],resize:[0,0],updates:null}})):[],C=e=>{let{events:t,isDrag:n,isRotate:r}=e;t.forEach(((e,t)=>{const a=S[t];n?e.set(a.translate):r&&e.set(a.rotate)}))},A=e=>{let{targets:t,isRotate:n,isResize:r}=e;const o={},i=[];t.forEach(((e,t)=>{const{element:a,updateForResizeEvent:l}=w[t];if(rF(e,f))return void i.push(a.id);const s=S[t],{direction:c}=s,d=e=>Math.abs(e)<=1?0:e,u={x:d(a.x+h(s.translate[0])),y:d(a.y+b(s.translate[1]))};n&&(u.rotationAngle=s.rotate);const[p,m]=s.resize;if(r&&(0!==p&&0!==m)){const{border:e}=a,{left:t=0,right:n=0,top:r=0,bottom:o=0}=e||{},i=h(p-(t+n)),s=b(m-(r+o));u.width=i,u.height=s,l&&Object.assign(u,l(a,c,i,s))}o[a.id]=u})),d({elementIds:Object.keys(o),properties:e=>o[e.id]}),i.length>0&&p({elementIds:i}),w.forEach(((e,t)=>{let{element:n,node:r}=e;S[t].direction=[0,0],S[t].translate=[0,0],S[t].resize=[0,0],S[t].updates=null,r.style.transform="",r.style.width="",r.style.height="",v(n.id,null)})),a.current&&a.current.updateRect()},k=Object.values(vn(g,[...n.map((e=>e.id)),m.id])),O=eF({canSnap:!0,otherNodes:k}),P=GH({targetList:w,frames:S,setTransformStyle:T,onGroupEventStart:C,onGroupEventEnd:A,isDragging:o,setIsDragging:i}),N=YH({onGroupEventEnd:A,targetList:w,setTransformStyle:T,frames:S}),R=ZH({onGroupEventStart:C,setTransformStyle:T,onGroupEventEnd:A,targetList:w,frames:S}),M=(0,u.useCombinedRefs)(a,t);if(w.some((e=>{let{node:t}=e;return void 0===t})))return null;const L=JB()("default-moveable",{"hide-handles":o,immoveable:l});return c.createElement(x.Moveable,WH({},r,{className:L,ref:M,zIndex:0,target:w.map((e=>{let{node:t}=e;return t})),renderDirections:VH},P,{draggable:s,resizable:s,rotatable:s},R,N,O))})),qH=$H;function KH(){return KH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KH.apply(this,arguments)}const XH=function Selection(e){const t=Qa((e=>{let{state:t}=e;return t.selectedElements[0]?.id===t.currentPage?.elements?.[0]?.id})),{selectedElements:n,isAnimating:r}=Qa((e=>({selectedElements:e.state.selectedElements,isAnimating:[Un.STORY_ANIMATION_STATE.PLAYING,Un.STORY_ANIMATION_STATE.PLAYING_SELECTED,Un.STORY_ANIMATION_STATE.SCRUBBING].includes(e.state.animationState)}))),{editingElement:a,lastSelectionEvent:o,nodesById:i,onMoveableMount:l}=Xs((e=>{let{state:{editingElement:t,lastSelectionEvent:n,nodesById:r,onMoveableMount:a}}=e;return{editingElement:t,lastSelectionEvent:n,nodesById:r,onMoveableMount:a}}));if(0===n.length)return null;if(t)return null;const s=n[0]?.resource?.isPlaceholder;if(s)return null;if(a||r)return null;if(1===n.length){const t=n[0],r=i[t.id];return r?c.createElement(yF,KH({selectedElement:t,targetEl:r,pushEvent:o},e,l&&{ref:l})):null}return c.createElement(qH,KH({selectedElements:n},e,l&&{ref:l}))},QH=p.default.div.withConfig({displayName:"pagenav__Wrapper",componentId:"sc-j8q0gt-0"})(["display:flex;align-items:center;color:",";& > *{pointer-events:initial;}"],(e=>{let{theme:t}=e;return t.colors.fg.white})),JH=(0,p.default)(wf.default).withConfig({displayName:"pagenav__FlippableArrow",componentId:"sc-j8q0gt-1"})(["transform:rotate(","turn);"],(e=>{let{$isLeft:t}=e;return t?0:.5}));const eU=function PageNav(e){let{isNext:t=!0}=e;const{pages:n,currentPageIndex:r,setCurrentPage:a}=Qa((e=>{let{state:{pages:t,currentPageIndex:n},actions:{setCurrentPage:r}}=e;return{pages:t,currentPageIndex:n,setCurrentPage:r}})),{isRTL:o}=U(),i=(0,u.useRef)(null),l=(0,u.useCallback)((e=>e.stopPropagation()),[]),s=(0,u.useCallback)((()=>{const e=t?n[r+1]:n[r-1];e&&a({pageId:e.id})}),[a,r,t,n]),{hasPageNavigation:p}=gs((e=>{let{state:{hasPageNavigation:t}}=e;return{hasPageNavigation:t}}));if($m({node:i.current,eventData:Se.PAGE_NAVIGATION}),!p)return!1;const f=t&&r<n.length-1||!t&&r>0,h=o===t;return c.createElement(QH,null,c.createElement(m.Button,{ref:i,variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.MEDIUM,"aria-disabled":!f,"aria-label":t?(0,d.__)("Next Page","web-stories"):(0,d.__)("Previous Page","web-stories"),onClick:s,onMouseDown:l},c.createElement(JH,{$isLeft:h})))},tU=(0,p.default)(XB).withConfig({displayName:"framesLayer__FramesPageArea",componentId:"sc-5ltl4w-0"})(["pointer-events:initial;"]),nU=48/ee.PAGE_WIDTH*100,rU=p.default.div.withConfig({displayName:"framesLayer__FocusContainer",componentId:"sc-5ltl4w-1"})(["grid-row:2 / -1;grid-column:1 / -1;margin:5px;",";"],up.focusableOutlineCSS),aU=(0,d.__)("Canvas Area. To navigate into the page, press Enter.","web-stories"),oU=(0,d.__)("To exit the canvas area, press Escape. Press Tab to move to the next group or element.","web-stories"),iU=p.default.div.withConfig({displayName:"framesLayer__DesignSpaceGuidelineBorder",componentId:"sc-5ltl4w-2"})(["border:1px solid ",";left:","%;right:","%;top:0;bottom:0;position:absolute;pointer-events:none;z-index:1;visibility:",";"],(e=>{let{theme:t}=e;return t.colors.border.negativePress}),nU,nU,(e=>{let{isVisible:t}=e;return t?"visible":"hidden"}));function DesignSpaceGuideline(){const e=Xs((e=>{let{actions:t}=e;return t.setDesignSpaceGuideline})),{isAnythingTransforming:t}=(0,I.useTransform)((e=>{let{state:t}=e;return{isAnythingTransforming:t.isAnythingTransforming}}));return c.createElement(iU,{ref:e,isVisible:t})}function FramesNavAndSelection(e){let{children:t}=e;const n=(0,u.useRef)(null),r=kc((e=>e.onOpenMenu));return(0,Ir.useKeyDownEffect)(n,"mod+alt+shift+m",(e=>{document.dispatchEvent(new KeyboardEvent("keydown",{key:"tab"})),r(e)})),c.createElement(BB,{ref:n,"data-testid":"FramesLayer",pointerEvents:"initial",tabIndex:"-1","aria-label":(0,d.__)("Frames layer","web-stories")},t,c.createElement(VB,null,c.createElement(TH,{isPrevious:!0})),c.createElement($B,null,c.createElement(TH,null)),c.createElement(ZB,null,c.createElement(eU,{isNext:!1})),c.createElement(WB,null,c.createElement(eU,null)),c.createElement(XH,{onContextMenu:r}))}function FrameElements(){const e=Qa((e=>{let{state:t}=e;return t.currentPage?.elements?.map((e=>e.id))||ze})),t=Qa((e=>{let{state:t}=e;return[Un.STORY_ANIMATION_STATE.PLAYING,Un.STORY_ANIMATION_STATE.SCRUBBING].includes(t.animationState)})),n=kc((e=>e.onOpenMenu)),{setScrollOffset:r}=gs((e=>{let{actions:{setScrollOffset:t}}=e;return{setScrollOffset:t}})),a=(0,u.useCallback)((e=>r({left:e.target.scrollLeft,top:e.target.scrollTop})),[r]);return!t&&c.createElement(tU,{fullBleedContainerLabel:(0,d.__)("Fullbleed area (Frames layer)","web-stories"),onContextMenu:n,onScroll:a},e.map((e=>c.createElement(zH,{key:e,id:e}))),c.createElement(DesignSpaceGuideline,null))}const lU=(0,u.memo)((function FramesLayer(){const e=(0,u.useRef)(),t=(0,wx.default)(),{enterFocusGroup:n,setFocusGroupCleanup:r}=GM((e=>{let{enterFocusGroup:t,setFocusGroupCleanup:n}=e;return{enterFocusGroup:t,setFocusGroupCleanup:n}}));return(0,Ir.useGlobalKeyDownEffect)({key:"mod+option+2",editable:!0},(()=>{n({groupId:YM.ELEMENT_SELECTION})}),[n]),bH(e),(0,Ir.useKeyDownEffect)(e,{key:["enter"]},(()=>{n({groupId:YM.ELEMENT_SELECTION}),t(oU)}),[n,t]),(0,c.useEffect)((()=>{r({groupId:YM.ELEMENT_SELECTION,cleanup:()=>e.current?.focus()})}),[r]),c.createElement(FramesNavAndSelection,null,c.createElement(rU,{role:"region","data-testid":"canvas-focus-container",ref:e,"aria-label":aU,tabIndex:0}),c.createElement(FrameElements,null))})),sU=(0,u.createContext)({state:{},actions:{}}),cU=e=>{let{children:t}=e;const[n,r]=(0,u.useState)(!1),a=(0,u.useCallback)((e=>{e.preventDefault(),(0,P.trackEvent)("shortcuts_menu_toggled",{status:n?"closed":"open"}),r((e=>!e))}),[n]),o=(0,u.useCallback)((()=>{n&&((0,P.trackEvent)("shortcuts_menu_toggled",{status:"closed"}),r(!1))}),[n]),i=(0,u.useMemo)((()=>({state:{isOpen:n},actions:{toggle:a,close:o}})),[o,n,a]);return c.createElement(sU.Provider,{value:i},t)};function dU(e){return(0,u.useContextSelector)(sU,e??u.identity)}const uU=(0,u.createContext)({state:{},actions:{}});const pU=function(e){return(0,u.useContextSelector)(uU,e??u.identity)},mU=(0,p.default)(bf).withConfig({displayName:"carouselScroll__FlippableArrow",componentId:"sc-1npfzcu-0"})(["transform:rotate(","turn);"],(e=>{let{$isLeft:t}=e;return t?0:.5}));function CarouselScrollButton(e){let{isNext:t=!1}=e;const{hasOverflow:n,canScrollBack:r,canScrollForward:a,scrollBack:o,scrollForward:i}=pU((e=>{let{state:{hasOverflow:t,canScrollBack:n,canScrollForward:r},actions:{scrollBack:a,scrollForward:o}}=e;return{hasOverflow:t,canScrollBack:n,canScrollForward:r,scrollBack:a,scrollForward:o}})),{isRTL:l}=U();if(!n)return null;const s=t?a:r,u=t?i:o,p=t?(0,d.__)("Scroll Forward","web-stories"):(0,d.__)("Scroll Back","web-stories"),f=l===t;return c.createElement(m.Button,{variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.PLAIN,size:g.BUTTON_SIZES.SMALL,disabled:!s,onClick:u,"aria-label":p},c.createElement(mU,{$isLeft:f}))}function CarouselScrollForward(){return c.createElement(CarouselScrollButton,{isNext:!0})}function CarouselScrollBack(){return c.createElement(CarouselScrollButton,null)}const gU=(0,u.createContext)({state:{},actions:{}});const fU=function(e,t){const[n,r]=(0,u.useState)(!1),[a,o]=(0,u.useState)(null),[i,l]=(0,u.useState)(null),[s,c]=(0,u.useState)(null),p=(0,wx.default)("assertive"),m=(0,u.useCallback)((e=>{let{position:t,data:n={},onStartReordering:r=(()=>{})}=e;return e=>{const a=e.shiftKey||e.metaKey||e.ctrlKey||e.altKey,o=0===e.button;!a&&o&&(r(),l({position:t,data:n}),c(e.target))}}),[]),g=(0,u.useRef)(null);return(0,u.useEffect)((()=>{g.current=a}),[a]),(0,u.useEffect)((()=>{if(!s)return;const t=t=>{if(t.preventDefault(),null!==g.current){const n=g.current,r=n.position>i.position?n.position-1:n.position;e(i,{...g.current,position:r},t)}c(null)},n=()=>r(!0),a=e=>{"Escape"===e.key&&(c(null),e.stopPropagation())};return s.ownerDocument.addEventListener("pointerup",t),s.ownerDocument.addEventListener("keydown",a,!0),s.addEventListener("pointermove",n),()=>{o(null),r(!1),s.removeEventListener("pointermove",n),s.ownerDocument.removeEventListener("pointerup",t),s.ownerDocument.removeEventListener("keydown",a,!0)}}),[s,i,o,r,e]),(0,u.useEffect)((()=>{if(n&&a){const e=t-a.position,n=(0,$e.default)(
/* translators: %d: new position. */
(0,d.__)("Reordering. Press Escape to abort. Release mouse to drop in position %d.","web-stories"),e);p(n)}}),[n,a,t,p]),{isReordering:n,currentSeparator:a,setCurrentSeparator:o,handleStartReordering:m}},hU=p.default.div.withConfig({displayName:"reorderableScroller__Scroller",componentId:"sc-lvxibs-0"})(["z-index:3;opacity:0;position:sticky;"]),bU=(0,p.default)(hU).withConfig({displayName:"reorderableScroller__HorizontalScroller",componentId:"sc-lvxibs-1"})(["padding-left:","px;height:100%;",""],(e=>{let{size:t}=e;return t}),(e=>{let{direction:t,size:n}=e;return-1===t?`\n        left: 0px;\n        margin-right: -${n}px;\n        `:`\n        right: 0px;\n        margin-left: -${n}px;\n        `})),EU=(0,p.default)(hU).withConfig({displayName:"reorderableScroller__VerticalScroller",componentId:"sc-lvxibs-2"})(["padding-top:","px;width:100%;",""],(e=>{let{size:t}=e;return t}),(e=>{let{direction:t,size:n}=e;return-1===t?`\n        top: 0px;\n        margin-bottom: -${n}px;\n        `:`\n        bottom: 0px;\n        margin-top: -${n}px;\n        `}));const yU=(0,u.memo)((function ReorderableScroller(e){let{direction:t,size:n}=e;const{state:{canScrollEnd:r,canScrollStart:a,mode:o},actions:{startScroll:i}}=(0,u.useContext)(gU),[l,s]=(0,u.useState)(!1),d=(0,u.useCallback)((()=>s(!0)),[]),p=(0,u.useCallback)((()=>s(!1)),[]);(0,u.useEffect)((()=>{if(l)return i(t)}),[t,i,l]);const m=-1===t&&a||1===t&&r;if((0,u.useEffect)((()=>{m||s(!1)}),[m]),!m)return null;const g="horizontal"===o?bU:EU;return c.createElement(g,{size:n,direction:t,onPointerEnter:d,onPointerLeave:p,mode:o})}));const _U=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const[a,o]=(0,u.useState)(!1),[i,l]=(0,u.useState)(!1),[s,c]=(0,u.useState)(0),d=(0,u.useBatchingCallback)((()=>{const t=n.current;if(t)if("horizontal"===e){const e=t.scrollWidth-t.clientWidth;e<=0?(o(!1),l(!1)):(o(t.scrollLeft>0),l(t.scrollLeft<e))}else{const e=t.scrollHeight-t.clientHeight;e<=0?(o(!1),l(!1)):(o(t.scrollTop>0),l(t.scrollTop<e))}}),[e,n]),p=(0,u.useCallback)((e=>(c(e),()=>c(0))),[c]),m=t&&a,g=t&&i;return(0,u.useEffect)((()=>{if(0===s||!(m&&s<0||g&&s>0))return;let t=!0;const a=()=>{const o=Math.max(Math.min(.2*r,10),0);"horizontal"===e?n.current.scrollLeft+=s*o:n.current.scrollTop+=s*o,d(),t&&window.requestAnimationFrame(a)};return a(),()=>{t=!1}}),[s,d,m,g,r,e,n]),(0,u.useEffect)((()=>d()),[t,d]),{startScroll:p,canScrollEnd:g,canScrollStart:m}};function vU(){return vU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vU.apply(this,arguments)}const wU=p.default.div.attrs({role:"listbox"}).withConfig({displayName:"reorderable__ReorderableContainer",componentId:"sc-plmujd-0"})(["display:flex;"]),TU=(0,u.forwardRef)((function Reorderable(e,t){let{children:n,onPositionChange:r,getItemSize:a,scrollSize:o=null,mode:i="horizontal",...l}=e;const s=(0,u.useRef)(null),d=t||s,{isReordering:p,currentSeparator:m,setCurrentSeparator:g,handleStartReordering:f}=fU(r,n.length),{startScroll:h,canScrollEnd:b,canScrollStart:E}=_U(i,p,d,a()),y={state:{isReordering:p,currentSeparator:m,containerRef:d,mode:i,canScrollEnd:b,canScrollStart:E},actions:{setCurrentSeparator:g,handleStartReordering:f,startScroll:h}},_=o||a();return c.createElement(gU.Provider,{value:y},c.createElement(wU,vU({ref:d},l),c.createElement(yU,{direction:-1,size:_}),n,c.createElement(yU,{direction:1,size:_})))}));const SU=function(e){return(0,u.useContextSelector)(gU,e??u.identity)};function CU(){return CU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CU.apply(this,arguments)}const IU=p.default.div.withConfig({displayName:"reorderableItem__Container",componentId:"sc-5aswet-0"})(["z-index:1;"]);const xU=function ReorderableItem(e){let{children:t,position:n,onStartReordering:r,disabled:a,data:o,...i}=e;const l=SU((e=>{let{actions:t}=e;return t.handleStartReordering}));return c.createElement(IU,CU({},a?null:{onPointerDown:l({position:n,onStartReordering:r,data:o})},i),t)},AU=35;function kU(){return kU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kU.apply(this,arguments)}const OU=p.default.div.withConfig({displayName:"reorderableSeparator__Wrapper",componentId:"sc-1tnz6qo-0"})(["opacity:0;position:relative;z-index:",";&:hover{opacity:",";}"],(e=>{let{isReordering:t,isNested:n}=e;return t?n?3:2:-1}),(e=>{let{isReordering:t}=e;return t?1:0})),PU=p.default.div.withConfig({displayName:"reorderableSeparator__Line",componentId:"sc-1tnz6qo-1"})(["height:4px;margin:0 0 -4px;background:",";width:100%;"," width:",""],(e=>{let{theme:t}=e;return t.colors.accent.secondary}),(e=>{let{isNested:t}=e;return t&&"margin-left: 30px;"}),(e=>{let{isNested:t}=e;return t?"calc(100% - 30px)":"100%"}));const NU=function ReorderableSeparator(e){let{position:t,groupId:n=null,isNested:r=!1,nestedOffset:a=!1,nestedOffsetCalcFunc:o=(()=>{}),children:i=null,...l}=e;const s=(0,u.useRef)(null),[d,p]=(0,u.useState)(!1),{isReordering:m,setCurrentSeparator:g}=SU((e=>{let{state:t,actions:n}=e;return{isReordering:t.isReordering,setCurrentSeparator:n.setCurrentSeparator}})),f=(0,u.useCallback)((()=>{m&&g({position:t,data:{groupId:n}})}),[g,m,t,n]);return null===i&&(i=c.createElement(PU,{isNested:r||d})),c.createElement(OU,kU({onPointerOver:f,onPointerMove:e=>{a&&p(o(e.nativeEvent))},ref:s,isReordering:m,isNested:r||d},l),i)},RU=p.default.div.withConfig({displayName:"carouselPage__Line",componentId:"sc-mvqls9-0"})(["background:",";height:","px;width:","px;margin:0px;"],(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{height:t}=e;return t}),4),MU=p.default.li.attrs({role:"presentation"}).withConfig({displayName:"carouselPage__ItemContainer",componentId:"sc-mvqls9-1"})(["display:flex;position:relative;margin:0;padding:0;"]),LU=(0,p.default)(NU).withConfig({displayName:"carouselPage__PageSeparator",componentId:"sc-mvqls9-2"})(["position:absolute;bottom:0;left:","px;width:","px;height:","px;display:flex;justify-content:center;",":first-of-type &:first-of-type,",":last-of-type &:last-of-type{width:","px;}",":first-of-type &:first-of-type{left:","px;justify-content:flex-start;}",":first-of-type &:last-of-type{left:","px;}",":last-of-type &:last-of-type{justify-content:flex-end;}"],(e=>{let{width:t}=e;return t/2}),(e=>{let{width:t,margin:n}=e;return t+n}),(e=>{let{height:t}=e;return t}),MU,MU,(e=>{let{width:t,margin:n}=e;return(t+n+4)/2}),MU,(e=>{let{margin:t}=e;return(t-4)/2}),MU,(e=>{let{width:t,margin:n}=e;return n+t/2}),MU),DU=(0,p.default)(xU).withConfig({displayName:"carouselPage__ReorderablePage",componentId:"sc-mvqls9-3"})(["display:flex;z-index:1;margin-right:","px;margin-left:","px;"],(e=>{let{margin:t}=e;return t}),(e=>{let{margin:t,position:n}=e;return 0===n?t:0}));const BU=function CarouselPage(e){let{pageId:t,index:n}=e;const{pageThumbWidth:r,pageThumbHeight:a,pageThumbMargin:o,clickPage:i,setPageRef:l,page:s,isCurrentPage:u,hasMultiplePages:p}=pU((e=>{let{state:{pageThumbWidth:n,pageThumbHeight:r,pageThumbMargin:a,numPages:o,pages:i,currentPageId:l},actions:{clickPage:s,setPageRef:c}}=e;return{pageThumbWidth:n,pageThumbHeight:r,pageThumbMargin:a,clickPage:s,setPageRef:c,page:i.find((e=>{let{id:n}=e;return n===t})),isCurrentPage:t===l,hasMultiplePages:o>1}}));return s&&s.id?c.createElement(MU,{ref:e=>l(s,e),"data-testid":`carousel-page-preview-${t}`},0===n&&c.createElement(LU,{position:0,width:r,height:a,margin:o},c.createElement(RU,{height:a})),c.createElement(DU,{position:n,margin:o},c.createElement(Vk,{tabIndex:u&&p?0:-1,onClick:()=>i(s),role:"option","data-page-id":s.id,label:u?(0,$e.default)(
/* translators: %s: page number. */
(0,d.__)("Page %s (current page)","web-stories"),n+1):(0,$e.default)(
/* translators: %s: page number. */
(0,d.__)("Go to page %s","web-stories"),n+1),isActive:u,page:s,width:r,height:a,isInteractive:p})),c.createElement(LU,{position:n+1,width:r,height:a,margin:o},c.createElement(RU,{height:a}))):null},FU=p.default.li.attrs({role:"presentation"}).withConfig({displayName:"skeletonPage__EmptyPage",componentId:"sc-szsuww-0"})(["display:block;position:relative;flex:0 0;margin:0;padding:0;border-radius:4px;"]);const HU=function SkeletonPage(e){let{pageId:t,index:n}=e;const{pageThumbWidth:r,pageThumbHeight:a,pageThumbMargin:o,page:i}=pU((e=>{let{state:{pageThumbWidth:n,pageThumbHeight:r,pageThumbMargin:a,pages:o}}=e;return{pageThumbWidth:n,pageThumbHeight:r,pageThumbMargin:a,page:o.find((e=>{let{id:n}=e;return n===t}))}}));if(!i||!i.id)return null;const l=i.elements[0],{isMedia:s}=(0,Mn.getDefinitionForType)(l.type),d=s&&Wr(l.resource?.baseColor)?(0,Mv.default)(l.resource.baseColor.replace("#","")):i.backgroundColor;return c.createElement(FU,{style:{flexBasis:`${r}px`,height:`${a}px`,marginLeft:`${0===n?o:0}px`,marginRight:`${o}px`,...(0,ta.default)(d)},"data-testid":`carousel-page-preview-skeleton-${t}`})},UU=(0,p.default)(TU).attrs({role:"listbox","aria-orientation":"horizontal",mode:"horizontal"}).withConfig({displayName:"carouselList__PageList",componentId:"sc-1oa14z5-0"})(["grid-area:carousel;flex-direction:row;align-items:center;justify-content:center;overflow-x:hidden;overflow-y:hidden;width:","px;list-style:none;padding:4px 0;margin:-4px 0;",";::-webkit-scrollbar-thumb{border:6px solid transparent !important;}"],(e=>{let{width:t}=e;return t}),(e=>{let{hasOverflow:t}=e;return t&&(0,p.css)(["overflow-x:visible;overflow-x:overlay;justify-content:flex-start;"])}));const jU=function CarouselList(){const{pageThumbWidth:e,carouselWidth:t,hasOverflow:n,pageIds:r,rearrangePages:a,setListRef:o,showSkeleton:i}=pU((e=>{let{state:{pageThumbWidth:t,carouselWidth:n,hasOverflow:r,pageIds:a,showSkeleton:o},actions:{rearrangePages:i,setListRef:l}}=e;return{pageThumbWidth:t,carouselWidth:n,hasOverflow:r,pageIds:a,rearrangePages:i,setListRef:l,showSkeleton:o}})),l=i?HU:BU;return c.createElement(UU,{mode:"horizontal",width:t,ref:o,hasOverflow:n,"aria-label":(0,d.__)("Pages List","web-stories"),onPositionChange:a,getItemSize:()=>e},r.map(((e,t)=>c.createElement(l,{key:e,pageId:e,index:t}))))},zU=(0,p.css)(["width:32px;margin:-8px;"]),GU=(0,p.default)(Sp.default).withConfig({displayName:"carouselDrawerIcon__IconDown",componentId:"sc-b03fdn-0"})(["",""],zU),YU=(0,p.default)(Th).withConfig({displayName:"carouselDrawerIcon__IconUp",componentId:"sc-b03fdn-1"})(["",""],zU);const ZU=function CarouselDrawerIcon(e){let{state:t}=e;return[xe.OPEN,xe.CLOSING].includes(t)?c.createElement(GU,null):c.createElement(YU,null)},WU=p.default.div.withConfig({displayName:"carouselDrawer__Wrapper",componentId:"sc-1dxh28m-0"})(["display:flex;justify-content:center;"]),VU=(0,p.default)(m.Button).withConfig({displayName:"carouselDrawer__StyledButton",componentId:"sc-1dxh28m-1"})(["white-space:nowrap;gap:8px;"]);const $U=function CarouselDrawer(){const{carouselState:e,openCarousel:t,closeCarousel:n}=gs((e=>{let{state:{carouselState:t},actions:{openCarousel:n,closeCarousel:r}}=e;return{carouselState:t,openCarousel:n,closeCarousel:r}})),{currentPageNumber:r,pageCount:a}=Qa((e=>{let{state:{currentPageNumber:t,pages:n}}=e;return{currentPageNumber:t,pageCount:n.length}})),o=(0,u.useCallback)((()=>{e===xe.OPEN?n():e===xe.CLOSED&&t()}),[e,t,n]);return c.createElement(WU,null,c.createElement(VU,{"aria-label":(0,d.__)("Toggle page carousel","web-stories"),onClick:o,variant:g.BUTTON_VARIANTS.RECTANGLE,size:g.BUTTON_SIZES.SMALL,type:g.BUTTON_TYPES.TERTIARY},(0,$e.default)(
/* translators: 1: current page number. 2: total page count. */
(0,d._n)("%1$d of %2$d page","%1$d of %2$d pages",a,"web-stories"),r,a),c.createElement(ZU,{state:e})))},qU=p.default.section.withConfig({displayName:"carouselLayout__Wrapper",componentId:"sc-iaovfa-0"})(["position:relative;display:grid;grid:'. d d d d d .' 32px '. . . . . . .' ","px '. p . c . n .' auto / 1fr ","px ","px auto ","px ","px 1fr;width:100%;height:auto;z-index:",";&.carousel-enter{top:","px;&.carousel-enter-active{top:0;transition:","ms ease-out;transition-property:top;}}&.carousel-exit{top:0;&.carousel-exit-active{top:","px;transition:","ms ease-out;transition-property:top;}}"],(e=>{let{isCollapsed:t}=e;return t?2:8}),SB,8,8,SB,3,(e=>{let{thumbHeight:t}=e;return t+6}),Ae,(e=>{let{thumbHeight:t}=e;return t+6}),Ae),KU=p.default.div.withConfig({displayName:"carouselLayout__Area",componentId:"sc-iaovfa-1"})(["grid-area:",";display:flex;align-items:center;justify-content:center;flex-direction:column;"],(e=>{let{area:t}=e;return t}));const XU=function CarouselLayout(){const{carouselState:e}=gs((e=>{let{state:{carouselState:t}}=e;return{carouselState:t}})),{numPages:t,pageThumbHeight:n}=pU((e=>{let{state:{numPages:t,pageThumbHeight:n}}=e;return{numPages:t,pageThumbHeight:n}})),r=(0,u.useRef)();if(t<=0)return null;const a=e===xe.CLOSED,o=[xe.OPEN,xe.OPENING].includes(e);return c.createElement(fw.default,{in:o,classNames:"carousel",containerRef:!0,nodeRef:r,timeout:Ae},c.createElement(qU,{ref:r,"aria-label":(0,d.__)("Page Carousel","web-stories"),isCollapsed:a,thumbHeight:n},c.createElement(KU,{area:"d"},c.createElement($U,null)),!a&&c.createElement(c.Fragment,null,c.createElement(KU,{area:"p"},c.createElement(CarouselScrollBack,null)),c.createElement(KU,{area:"c"},c.createElement(jU,null)),c.createElement(KU,{area:"n"},c.createElement(CarouselScrollForward,null)))))};const QU=function(e){let{availableSpace:t,numPages:n}=e;return(0,u.useMemo)((()=>{const e=t>=400,r=t-2*CB,a=e?45:36,o=e?80:64,i=a+16,l=Math.floor((r-16)/i),s=l<n;return{pageThumbWidth:a,pageThumbHeight:o,pageThumbMargin:16,carouselWidth:Math.min(l,n)*(a+16)+16,showablePages:l,hasOverflow:s}}),[t,n])};const JU=function(e){let{listElement:t,carouselWidth:n,hasOverflow:r,showablePages:a,pageThumbWidth:o,pageThumbMargin:i}=e;const[l,s]=(0,u.useState)(0),{isRTL:c}=U(),{carouselState:d}=gs((e=>{let{state:{carouselState:t}}=e;return{carouselState:t}})),{currentPageIndex:p}=Qa((e=>{let{state:{currentPageId:t,pages:n}}=e;return{currentPageIndex:n.findIndex((e=>{let{id:n}=e;return n===t}))}})),m=(0,u.useCallback)((e=>{c&&(e*=-1),t.scrollBy?t.scrollBy({left:e,behavior:"smooth"}):t.scrollLeft+=e}),[t,c]),g=n,f=r&&!(c?1===l:0===l),h=r&&!(c?0===l:1===l),b=(0,u.useCallback)((()=>m(g)),[m,g]),E=(0,u.useCallback)((()=>m(-g)),[m,g]);(0,u.useLayoutEffect)((()=>{if(!r||!t)return;const e=()=>{const{offsetWidth:e,scrollLeft:n,scrollWidth:r}=t;s(n/(r-e))};return t.addEventListener("scroll",e,{passive:!0}),()=>t.removeEventListener("scroll",e)}),[t,r]);const y=(0,u.useCallback)((e=>(o+i)*e),[o,i]),_=(0,u.useRef)(!0);return(0,u.useEffect)((()=>{d===xe.CLOSED&&(_.current=!0)}),[d]),(0,u.useLayoutEffect)((()=>{if(!r||!t)return;const{scrollLeft:e}=t,n=Math.max(0,p-a+1),o=p,i=y(n),l=y(o);if(e>=i&&e<=l)return;const s=e<i?i:l,c=setInterval((()=>{if(t.scrollWidth-t.offsetWidth<s)return;const e=_.current?"instant":"smooth";_.current=!1,t.scrollTo({left:s,top:0,behavior:e}),clearInterval(c)}),100);return()=>clearInterval(c)}),[t,r,p,a,y]),{canScrollBack:f,canScrollForward:h,scrollForward:b,scrollBack:E}};function ej(e,t,n,r){const a=r?-1:1;return e===t?a:e===n?-a:0}const tj=function(e){let{listElement:t,pageRefs:n}=e;const{isRTL:r}=U(),{addPageAt:a,arrangePage:o,currentPage:i,currentPageId:l,deletePage:s,pages:c,setCurrentPage:d}=Qa((e=>{let{state:{pages:t,currentPage:n,currentPageId:r},actions:{addPageAt:a,arrangePage:o,deletePage:i,setCurrentPage:l}}=e;return{addPageAt:a,arrangePage:o,currentPage:n,currentPageId:r,deletePage:i,pages:t,setCurrentPage:l}})),p=(0,u.useMemo)((()=>c.map((e=>{let{id:t}=e;return t}))),[c]);(0,Ir.useEscapeToBlurEffect)(t,[t]),(0,Ir.useKeyDownEffect)(t,{key:["up","down","left","right"]},(e=>{let{key:t}=e;const a=ej(t,"ArrowRight","ArrowLeft",r);if(0===a)return;const o=p.indexOf(l)+a;if(o>=0&&o<p.length){const e=p[o];d({pageId:e});const t=(n.current&&n.current[e])?.querySelector("button");t&&t.focus()}}),[l,r,p,d,n,t]),(0,Ir.useKeyDownEffect)(t,{key:["mod+up","mod+down","mod+left","mod+right"],shift:!0},(e=>{const{key:t,shiftKey:n}=e;e.preventDefault();const a=ej(t,"ArrowRight","ArrowLeft",r);if(0===a)return;const i=p.indexOf(l);let s=i+a;n&&(s=a<0?0:p.length-1),s!==i&&s>=0&&s<p.length&&o({pageId:l,position:s})}),[o,l,r,p,d]),(0,Ir.useKeyDownEffect)(t,"delete",(()=>{s({pageId:l});const e=document.activeElement,n=()=>{if(document.activeElement!==e){const e=t.querySelector('[role="option"][tabindex="0"]');if(e)return void e.focus()}setTimeout(n,100)};n()}),[l,s,t]),(0,Ir.useKeyDownEffect)(t,"clone",(()=>{const e=p.indexOf(i.id);a({page:(0,Mn.duplicatePage)(i),position:e+1})}),[a,i,p])};const nj=function CarouselProvider(e){let{availableSpace:t,children:n}=e;const{pages:r,currentPageId:a,setCurrentPage:o,arrangePage:i}=Qa((e=>{let{state:{pages:t,currentPageId:n},actions:{setCurrentPage:r,arrangePage:a}}=e;return{pages:t,currentPageId:n,setCurrentPage:r,arrangePage:a}})),[l,s]=(0,u.useState)(null),d=(0,u.useRef)([]),p=r.length,m=(0,u.useMemo)((()=>r.map((e=>{let{id:t}=e;return t}))),[r]),[g,f]=(0,u.useState)(!0);(0,u.useEffect)((()=>{const e=Mc((()=>f(!1)),{timeout:5e3});return()=>Lc(e)}),[]);const{pageThumbWidth:h,pageThumbHeight:b,pageThumbMargin:E,carouselWidth:y,hasOverflow:_,showablePages:v}=QU({availableSpace:t,numPages:p}),{canScrollBack:w,canScrollForward:T,scrollBack:S,scrollForward:C}=JU({listElement:l,carouselWidth:y,hasOverflow:_,showablePages:v,pageThumbWidth:h,pageThumbMargin:E});tj({listElement:l,pageRefs:d});const I=(0,u.useCallback)(((e,t)=>{d.current[e.id]=t}),[]),x=(0,u.useCallback)((e=>o({pageId:e.id})),[o]),A=(0,u.useCallback)(((e,t)=>{let{position:n}=e,{position:r}=t;const a=m[n];i({pageId:a,position:r}),o({pageId:a})}),[m,i,o]),k={state:{pageThumbWidth:h,pageThumbHeight:b,pageThumbMargin:E,carouselWidth:y,hasOverflow:_,pages:r,pageIds:m,numPages:p,currentPageId:a,canScrollBack:w,canScrollForward:T,showSkeleton:g},actions:{scrollBack:S,scrollForward:C,clickPage:x,rearrangePages:A,setListRef:s,setPageRef:I}};return c.createElement(uU.Provider,{value:k},n)},rj=p.default.div.withConfig({displayName:"carouselContainer__Wrapper",componentId:"sc-1dsu28u-0"})(["height:auto;width:100%;align-self:flex-end;"]);const aj=(0,u.memo)((function CarouselContainer(){const e=(0,u.useRef)(),[t,n]=(0,u.useState)(0);return(0,u.useResizeEffect)(e,(e=>{let{width:t}=e;return n(t)}),[]),c.createElement(nj,{availableSpace:t},c.createElement(rj,{ref:e},c.createElement(XU,null)))})),oj=(0,p.css)(["width:80px;height:36px;padding:0 10px;border-width:1px;border-style:solid;border-color:",";background-color:",";transition:background-color ",";&:hover,&:focus,&:active{border-color:",";background-color:",";}span{height:100%;padding:0;display:flex;align-items:center;}svg{margin:0 -10px;}"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),g.BUTTON_TRANSITION_TIMING,(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.colors.bg.tertiary})),ij=[{label:(0,d._x)("100%","zoom level","web-stories"),value:1},{label:(0,d._x)("200%","zoom level","web-stories"),value:2},{label:(0,d._x)("Fill","zoom level","web-stories"),value:Ie.FILL},{label:(0,d._x)("Fit","zoom level","web-stories"),value:Ie.FIT}];const lj=function ZoomSelector(){const{zoomSetting:e,zoomLevel:t,setZoomSetting:n,setZoomLevel:r}=gs((e=>{let{state:{zoomSetting:t,zoomLevel:n},actions:{setZoomSetting:r,setZoomLevel:a}}=e;return{zoomSetting:t,zoomLevel:n,setZoomSetting:r,setZoomLevel:a}})),a=(0,u.useMemo)((()=>{const n=ij.find((n=>{let{value:r}=n;return e===Ie.FIXED?r===t:r===e}));return n?n.label:(0,$e.default)(
/* translators: %d: zoom level percentage value. */
(0,d._x)("%d%%","zoom level","web-stories"),Math.round(100*t))}),[e,t]),o=(0,u.useCallback)(((e,t)=>{Object.prototype.hasOwnProperty.call(Ie,t)?n(t):r(t)}),[n,r]);return c.createElement(gx.DropDown,{ariaLabel:(0,d.__)("Zoom Level","web-stories"),placeholder:a,options:ij,placement:Vd.PLACEMENT.TOP_START,onMenuItemClick:o,selectedValue:e,popupFillWidth:!1,selectButtonStylesOverride:oj,className:"zoom-selector-dropdown"})};var sj=n(93401),cj=n(21193);const dj=p.default.section.withConfig({displayName:"gridView__Container",componentId:"sc-ytsaos-0"})(["display:flex;flex-direction:column;height:100%;width:100%;padding:32px;"]),uj=p.default.header.withConfig({displayName:"gridView__TopRow",componentId:"sc-ytsaos-1"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:36px;@media ","{margin-bottom:72px;}@media ","{margin-bottom:112px;}"],(e=>{let{theme:t}=e;return t.breakpoint.desktop}),(e=>{let{theme:t}=e;return t.breakpoint.wide})),pj=(0,p.default)(TU).withConfig({displayName:"gridView__Wrapper",componentId:"sc-ytsaos-2"})(["position:relative;overflow-y:auto;overflow-y:overlay;overflow-x:hidden;flex-grow:1;display:flex;flex-direction:column;pointer-events:all;padding:4px;"]),mj=p.default.div.withConfig({displayName:"gridView__Grid",componentId:"sc-ytsaos-3"})(["position:relative;display:grid;grid-template-columns:",";grid-template-rows:repeat(auto-fill,","px);grid-gap:","px;justify-content:center;align-items:flex-start;flex-grow:1;"],(e=>{let{pageWidth:t}=e;return`repeat(auto-fit, minmax(${t}px, max-content))`}),(e=>{let{pageHeight:t}=e;return t}),(e=>{let{gapWidth:t}=e;return t})),gj=p.default.div.withConfig({displayName:"gridView__NoButton",componentId:"sc-ytsaos-4"})(["flex:0 0 56px;"]),fj=(0,p.default)(m.Button).withConfig({displayName:"gridView__ClickableButton",componentId:"sc-ytsaos-5"})(["pointer-events:all;"]),hj=(0,p.default)(sj.Slider).withConfig({displayName:"gridView__ClickableSlider",componentId:"sc-ytsaos-6"})(["pointer-events:all;width:366px;"]),bj=(0,p.default)(NU).withConfig({displayName:"gridView__PageSeparator",componentId:"sc-ytsaos-7"})(["position:absolute;bottom:0;left:","px;width:","px;height:","px;display:flex;justify-content:center;align-items:center;",""],(e=>{let{width:t}=e;return t/2}),(e=>{let{width:t,margin:n}=e;return t+n}),(e=>{let{height:t}=e;return t}),(e=>{let{before:t,width:n,margin:r}=e;return t&&`\n      left: -${(n+2*r)/2}px;\n    `})),Ej=p.default.div.withConfig({displayName:"gridView__Line",componentId:"sc-ytsaos-8"})(["background:",";height:","px;width:2px;margin:0px;"],(e=>{let{theme:t}=e;return t.colors.border.selection}),(e=>{let{height:t}=e;return t})),yj=p.default.div.withConfig({displayName:"gridView__ItemContainer",componentId:"sc-ytsaos-9"})(["display:flex;flex-direction:row;position:relative;"]);const _j=function GridView(e){let{onClose:t}=e;const{pages:n,currentPageId:r,currentPageIndex:a,setCurrentPage:o,arrangePage:i}=Qa((e=>{let{state:{pages:t,currentPageIndex:n,currentPageId:r},actions:{setCurrentPage:a,arrangePage:o}}=e;return{pages:t,currentPageIndex:n,currentPageId:r,setCurrentPage:a,arrangePage:o}})),{isRTL:l}=U(),[s,p]=(0,u.useState)(4),[m,f]=(0,u.useState)(null),h=(0,u.useRef)();(0,u.useResizeEffect)(h,(e=>{let{width:t}=e;return f(t)}),[]);const b=(m-20*(s-1))/s,E=12*Math.floor(b/12),y=E*s,_=Math.floor((m-y)/(s-1)),v=E/ee.FULLBLEED_RATIO,w=e=>()=>o({pageId:e.id}),T=(0,u.useRef)(),S=(0,u.useRef)({}),C=(0,u.useCallback)(((e,t)=>{i({pageId:e,position:t})}),[i]);(0,cj.default)({containerRef:h,gridRef:T,itemRefs:S,isRTL:l,currentItemId:r,items:n,arrangeItem:C});const I=Math.min(v-24,64);return c.createElement(dj,{"aria-label":(0,d.__)("Grid View","web-stories")},c.createElement(uj,null,c.createElement(fj,{variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.MEDIUM,onClick:t,"aria-label":(0,d.__)("Close","web-stories")},c.createElement(cp.default,null)),c.createElement(hj,{min:4,max:12,majorStep:1,minorStep:1,value:s,handleChange:e=>p(e),"aria-label":(0,d.__)("Pages per row","web-stories"),popupZIndexOverride:11}),c.createElement(gj,null)),c.createElement(pj,{"aria-label":(0,d.__)("Grid View Pages List","web-stories"),ref:h,onPositionChange:(e,t)=>{let{position:r}=e,{position:a}=t;const l=n[r].id;i({pageId:l,position:a}),o({pageId:l})},mode:"grid",getItemSize:()=>v,scrollSize:64},c.createElement(mj,{pageWidth:E,pageHeight:v,gapWidth:_,ref:T},n.map(((e,t)=>{const r=t===a,o=n.length>1;return c.createElement(yj,{key:e.id,ref:t=>{S.current[e.id]=t}},c.createElement(bj,{position:t,width:E,height:v,margin:_,before:!0},c.createElement(Ej,{height:I})),c.createElement(xU,{position:t},c.createElement(Vk,{key:e.id,label:r?(0,$e.default)(
/* translators: %s: page number. */
(0,d.__)("Page %s (current page)","web-stories"),t+1):(0,$e.default)(
/* translators: %s: page number. */
(0,d.__)("Page %s","web-stories"),t+1),tabIndex:r&&o?0:-1,isActive:r&&o,page:e,width:E,height:v,onClick:w(e),isInteractive:o,gridRef:T,role:"option"})),c.createElement(bj,{position:t+1,width:E,height:v,margin:_},c.createElement(Ej,{height:I})))})))))},vj=p.default.div.withConfig({displayName:"gridViewButton__Box",componentId:"sc-1gc0r0y-0"})(["width:32px;height:32px;display:flex;justify-content:center;align-items:center;"]);const wj=function GridViewButton(){const[e,t]=(0,u.useState)(!1),n=(0,u.useCallback)((()=>{t((e=>{const t=!e;return(0,P.trackEvent)("grid_view_toggled",{status:t?"open":"closed"}),t}))}),[t]);return c.createElement(c.Fragment,null,c.createElement(vj,null,c.createElement(Tooltip,{title:(0,d.__)("Grid View","web-stories"),placement:Vd.PLACEMENT.TOP,hasTail:!0},c.createElement(m.Button,{variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,onClick:n,"aria-label":(0,d.__)("Grid View","web-stories")},c.createElement($f.default,null)))),c.createElement(S.Modal,{isOpen:e,onClose:n,contentLabel:(0,d.__)("Grid View","web-stories"),overlayStyles:{alignItems:"stretch",backgroundColor:"#131516"},contentStyles:{pointerEvents:"none",flex:1}},c.createElement(_j,{onClose:n})))},Tj=e=>{const{updateElementById:t}=Qa((e=>{let{actions:t}=e;return{updateElementById:t.updateElementById,combineElements:t.combineElements}})),n=ks(),{isMedia:r}=(0,Mn.getDefinitionForType)(e.type);return{hasShapeMask:r&&e?.mask?.type!==$n.MaskTypes.RECTANGLE,removeShapeMask:(0,u.useCallback)((()=>{if(!e)return;const r=er(e,["x","y","width","height","scale","rotationAngle"]);n("shape",{...r,mask:{type:e.mask.type}}),t({elementId:e.id,properties:{mask:{type:$n.MaskTypes.RECTANGLE}}})}),[e,n,t])}};const Sj=function(e){const{id:t}=e,{isSelected:n,toggleLayer:r}=Qa((e=>{let{state:n,actions:r}=e;return{isSelected:n.selectedElementIds.includes(t),toggleLayer:r.toggleLayer}})),a=Xs((e=>{let{actions:t}=e;return t.setRenamableLayer}));return{isSelected:n,handleClick:(0,u.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),r({elementId:t,metaKey:e.metaKey,shiftKey:e.shiftKey,withLinked:!1});2===e.detail&&a({elementId:t})}),[r,t,a])}},Cj=p.default.div.withConfig({displayName:"shapeMaskWrapper__MaskedIconWrapper",componentId:"sc-1blxy5z-0"})(["position:relative;clip-path:url(#",");"],(e=>{let{maskId:t}=e;return t}));const Ij=function ShapeMaskWrapper(e){let{element:t,children:n}=e;const{hasShapeMask:r}=Tj(t);return r?c.createElement(Cj,{maskId:(0,$n.generateMaskId)(t,"frame")},n):n},xj=(0,p.css)(["background-color:var(--background-color);::before{position:absolute;content:'';width:32px;height:100%;top:0;left:0;transform:translateX(-100%);background:linear-gradient( to right,var(--background-color-opaque),var(--background-color) );pointer-events:none;}"]),Aj=p.default.div.withConfig({displayName:"layer__ActionsContainer",componentId:"sc-n017st-0"})(["position:absolute;display:none;align-items:center;height:100%;top:0;right:0;padding-right:6px;column-gap:6px;",""],xj),kj=p.default.div.attrs({"data-testid":"layer-option"}).withConfig({displayName:"layer__LayerContainer",componentId:"sc-n017st-1"})(["position:relative;height:","px;width:100%;overflow:hidden;--background-color:",";--background-color-opaque:",";:is(:hover,:focus-within) ","{display:inline-flex;}"],AU,(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.bg.secondary,0)}),Aj),Oj=(0,p.default)(m.Button).attrs({type:g.BUTTON_TYPES.PLAIN,tabIndex:-1,role:"option"}).withConfig({displayName:"layer__LayerButton",componentId:"sc-n017st-2"})(["position:relative;display:grid;grid-template-columns:36px 1fr;border:0;padding:0;background:transparent;height:100%;width:100%;overflow:hidden;align-items:center;user-select:none;border-radius:0;padding-left:","px;transition:revert;"," :hover{background:",";}:hover,:hover + *{--background-color:",";--background-color-opaque:",";}:active{background:",";}:active,:active + *{--background-color:",";--background-color-opaque:",";}"],(e=>{let{isNested:t}=e;return t?30:12}),(e=>{let{isSelected:t,theme:n}=e;return t&&(0,p.css)(["background:",";&,& + *{--background-color:",";--background-color-opaque:",";--selected-hover-color:",";}"],n.colors.interactiveBg.tertiaryPress,n.colors.interactiveBg.tertiaryPress,(0,qe.rgba)(n.colors.interactiveBg.tertiaryPress,0),n.colors.interactiveBg.tertiaryHover)}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.interactiveBg.tertiaryHover,0)}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryPress}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryPress}),(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.interactiveBg.tertiaryPress,0)})),Pj=p.default.div.withConfig({displayName:"layer__LayerInputWrapper",componentId:"sc-n017st-3"})(["display:grid;grid-template-columns:23px 1fr;height:100%;width:100%;padding-left:","px;padding-right:10px;:hover{background:",";}:hover,:hover + *{--background-color:",";--background-color-opaque:",";}"],(e=>{let{isNested:t}=e;return t?30:12}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.interactiveBg.tertiaryHover,0)})),Nj=(0,p.default)(qv).withConfig({displayName:"layer__LayerInput",componentId:"sc-n017st-4"})(["overflow:visible;div{height:100%;}"]),Rj=p.default.div.withConfig({displayName:"layer__LayerIconWrapper",componentId:"sc-n017st-5"})(["display:flex;align-items:center;justify-content:flex-start;color:",";:hover{background:",";}:hover,:hover + *{--background-color:",";--background-color-opaque:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.interactiveBg.tertiaryHover,0)})),Mj=p.default.div.withConfig({displayName:"layer__LayerDescription",componentId:"sc-n017st-6"})(["position:relative;width:100%;overflow:hidden;display:flex;align-items:center;margin-left:0;text-align:left;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),Lj=(0,p.default)(Mj).attrs({as:"form"}).withConfig({displayName:"layer__LayerInputForm",componentId:"sc-n017st-7"})(["overflow:visible;"]),Dj=(0,p.default)(Ke.Text).attrs({forwardedAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"layer__LayerText",componentId:"sc-n017st-8"})(["color:inherit;white-space:nowrap;text-overflow:' ';overflow:hidden;max-width:100%;"]),Bj=p.default.div.withConfig({displayName:"layer__IconWrapper",componentId:"sc-n017st-9"})(["display:flex;align-items:center;justify-content:flex-start;position:absolute;right:0;width:32px;aspect-ratio:1;"," svg{position:relative;display:block;width:100%;color:",";}"],xj,(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Fj=p.default.div.withConfig({displayName:"layer__LayerContentContainer",componentId:"sc-n017st-10"})(["margin-right:8px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;"]),Hj=(0,p.default)(m.Button).attrs({type:g.BUTTON_TYPES.PLAIN,tabIndex:-1}).withConfig({displayName:"layer__LayerAction",componentId:"sc-n017st-11"})(["position:relative;aspect-ratio:1;width:20px;padding:0;svg{position:absolute;width:32px;height:auto;top:50%;left:50%;transform:translate(-50%,-50%);}&&{transition:revert;background:var(--background-color);}:disabled{color:",";}:hover{color:var( --selected-hover-color,"," );}& + &{margin-left:4px;}*{pointer-events:none;}:focus{","}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return up.focusCSS(t.colors.border.focus,"var(--background-color)")}));function Uj(e){e.stopPropagation(),e.preventDefault()}const jj=(0,u.memo)((function(e){let{element:t}=e;const n=(0,Mn.getLayerName)(t),[r,a]=(0,u.useState)(n),o=(0,C.useFeature)("layerLocking"),{LayerIcon:i,hasDuplicateMenu:l}=(0,Mn.getDefinitionForType)(t.type),{isSelected:s,handleClick:p}=Sj(t),{isDefaultBackground:m}=t,{duplicateElementsById:g,updateElementById:f,deleteElementById:h,currentPageBackgroundColor:b,groups:E}=Qa((e=>{let{actions:t,state:n}=e;return{duplicateElementsById:t.duplicateElementsById,deleteElementById:t.deleteElementById,updateElementById:t.updateElementById,groups:n.currentPage?.groups||{},currentPageBackgroundColor:!m||n.currentPage?.backgroundColor}})),{renamableLayer:y,setRenamableLayer:_}=Xs((e=>{let{state:t,actions:n}=e;return{renamableLayer:t.renamableLayer,setRenamableLayer:n.setRenamableLayer}}));(0,u.useEffect)((()=>{a(n)}),[n]);const{hasShapeMask:v,removeShapeMask:w}=Tj(t),T=(0,d.__)("Unmask","web-stories"),{getProxiedUrl:S}=ii(),I=(0,u.useRef)(null);$m({node:I.current,eventData:{...Se.SELECT_ELEMENT,label:t.type}});const x=(0,u.useRef)(null);$m({node:x.current,eventData:{...Se.DELETE_ELEMENT,label:t.type}});const A=`layer-${t.id}`,k=t.groupId,O=k?t.isLocked?(0,d.__)("Group is Locked","web-stories"):(0,d.__)("Group is Unlocked","web-stories"):t.isLocked?(0,d.__)("Unlock Layer","web-stories"):(0,d.__)("Lock Layer","web-stories"),P=t.isLocked?IE.default:PE,N=()=>{_(null);const e=r.trim();e&&f({elementId:t.id,properties:{layerName:e}})},R=(0,C.useFeature)("layerNaming"),M=y?.elementId===t.id;return E[t.groupId]?.isCollapsed?null:c.createElement(kj,null,M&&R?c.createElement(Pj,{isNested:k},c.createElement(Rj,null,c.createElement(Ij,{element:t},c.createElement(i,{element:t,getProxiedUrl:S,currentPageBackgroundColor:b}))),c.createElement(Lj,{onSubmit:e=>{e.preventDefault(),N()}},c.createElement(Nj,{tabIndex:-1,"aria-label":(0,d.__)("Layer Name","web-stories"),value:r,onChange:e=>{a(e.target.value)},onKeyDown:e=>{"Escape"===e.key&&(a(n),_(null))},onBlur:N,onPointerDown:e=>e.stopPropagation(),hasFocus:!0}),c.createElement("button",{hidden:!0}))):c.createElement(Oj,{ref:I,id:A,onClick:p,isSelected:s,isNested:k},c.createElement(Rj,null,c.createElement(Ij,{element:t},c.createElement(i,{element:t,getProxiedUrl:S,currentPageBackgroundColor:b}))),c.createElement(Mj,null,c.createElement(Fj,null,c.createElement(Dj,null,n)),t.isBackground&&c.createElement(Bj,null,c.createElement(AE,null)),t.isLocked&&o&&c.createElement(Bj,{"aria-label":(0,d.__)("Locked","web-stories")},k?c.createElement(AE,null):c.createElement(IE.default,null)))),!t.isBackground&&!M&&c.createElement(Aj,null,v&&c.createElement(Tooltip,{title:T,hasTail:!0,isDelayed:!0},c.createElement(Hj,{"aria-label":T,"aria-describedby":A,onClick:w},c.createElement(Ev,null))),c.createElement(Tooltip,{title:(0,d.__)("Delete Layer","web-stories"),hasTail:!0,isDelayed:!0},c.createElement(Hj,{ref:x,"aria-label":(0,d.__)("Delete","web-stories"),"aria-describedby":A,onPointerDown:Uj,onClick:()=>h({elementId:t.id})},c.createElement(av.default,null))),l&&c.createElement(Tooltip,{title:(0,d.__)("Duplicate Layer","web-stories"),hasTail:!0,isDelayed:!0},c.createElement(Hj,{"aria-label":(0,d.__)("Duplicate","web-stories"),"aria-describedby":A,onPointerDown:Uj,onClick:()=>g({elementIds:[t.id]})},c.createElement(uy,null))),o&&c.createElement(Tooltip,{title:O,hasTail:!0,isDelayed:!0},c.createElement(Hj,{"aria-label":(0,d.__)("Lock/Unlock","web-stories"),"aria-describedby":A,disabled:k,onPointerDown:Uj,onClick:()=>f({elementId:t.id,properties:{isLocked:!t.isLocked}})},k?c.createElement(AE,null):c.createElement(P,null)))))}));const zj=function(e){const{toggleLayer:t,groupLayers:n,selectedElementIds:r}=Qa((t=>{let{state:n,actions:r}=t;return{groupLayers:n.currentPage.elements.filter((t=>t.groupId===e)),selectedElementIds:n.selectedElementIds,toggleLayer:r.toggleLayer}})),a=Xs((e=>{let{actions:t}=e;return t.setRenamableLayer}));return{isSelected:n.every((e=>r.includes(e.id))),handleClick:(0,u.useCallback)((r=>{r.preventDefault(),r.stopPropagation(),t({elementId:n[0].id,metaKey:r.metaKey,shiftKey:r.shiftKey,withLinked:!0});2===r.detail&&a({elementId:e})}),[t,n,a,e])}},Gj=(0,p.css)(["background-color:var(--background-color);::before{position:absolute;content:'';width:32px;height:100%;top:0;left:0;transform:translateX(-100%);background:linear-gradient( to right,var(--background-color-opaque),var(--background-color) );pointer-events:none;}"]),Yj=p.default.div.withConfig({displayName:"group__ActionsContainer",componentId:"sc-1ik68z7-0"})(["position:absolute;display:none;align-items:center;height:100%;top:0;right:0;padding-right:6px;column-gap:6px;",""],Gj),Zj=p.default.div.attrs({"data-testid":"layer-option"}).withConfig({displayName:"group__LayerContainer",componentId:"sc-1ik68z7-1"})(["position:relative;height:","px;width:100%;overflow:hidden;--background-color:",";--background-color-opaque:",";:is(:hover,:focus-within) ","{display:inline-flex;}"],AU,(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.bg.secondary,0)}),Yj),Wj=(0,p.default)(m.Button).attrs({type:g.BUTTON_TYPES.PLAIN,tabIndex:-1,role:"option"}).withConfig({displayName:"group__LayerButton",componentId:"sc-1ik68z7-2"})(["position:relative;display:grid;grid-template-columns:36px 1fr;border:0;padding:0;background:transparent;height:100%;width:100%;overflow:hidden;align-items:center;user-select:none;border-radius:0;padding-left:","px;transition:revert;"," :hover{background:",";}:hover,:hover + *{--background-color:",";--background-color-opaque:",";}:active{background:",";}:active,:active + *{--background-color:",";--background-color-opaque:",";}"],(e=>{let{isNested:t}=e;return t?30:12}),(e=>{let{isSelected:t,theme:n}=e;return t&&(0,p.css)(["background:",";&,& + *{--background-color:",";--background-color-opaque:",";--selected-hover-color:",";}"],n.colors.interactiveBg.tertiaryPress,n.colors.interactiveBg.tertiaryPress,(0,qe.rgba)(n.colors.interactiveBg.tertiaryPress,0),n.colors.interactiveBg.tertiaryHover)}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.interactiveBg.tertiaryHover,0)}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryPress}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryPress}),(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.interactiveBg.tertiaryPress,0)})),Vj=p.default.div.withConfig({displayName:"group__GroupIconsWrapper",componentId:"sc-1ik68z7-3"})(["display:flex;align-items:center;justify-content:flex-start;width:48px;svg{position:relative;display:block;width:100%;color:",";}transform:translateX(-12px);"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),$j=(0,p.default)(bh.default).withConfig({displayName:"group__ChevronDown",componentId:"sc-1ik68z7-4"})(["min-width:32px;min-height:32px;"]),qj=(0,p.default)(bh.default).withConfig({displayName:"group__ChevronRight",componentId:"sc-1ik68z7-5"})(["min-width:32px;min-height:32px;transform:rotate(-90deg);"]),Kj=p.default.div.withConfig({displayName:"group__LayerDescription",componentId:"sc-1ik68z7-6"})(["position:relative;max-width:100%;overflow:hidden;display:flex;align-items:center;margin-left:12px;text-align:left;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),Xj=(0,p.default)(Ke.Text).attrs({forwardedAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"group__LayerText",componentId:"sc-1ik68z7-7"})(["color:inherit;white-space:nowrap;text-overflow:' ';overflow:hidden;max-width:100%;"]),Qj=p.default.div.withConfig({displayName:"group__IconWrapper",componentId:"sc-1ik68z7-8"})(["display:flex;align-items:center;justify-content:flex-start;position:absolute;right:0;width:32px;aspect-ratio:1;"," svg{position:relative;display:block;width:100%;color:",";}"],Gj,(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Jj=p.default.div.withConfig({displayName:"group__LayerContentContainer",componentId:"sc-1ik68z7-9"})(["margin-right:8px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;"]),ez=(0,p.default)(m.Button).attrs({type:g.BUTTON_TYPES.PLAIN,tabIndex:-1}).withConfig({displayName:"group__LayerAction",componentId:"sc-1ik68z7-10"})(["position:relative;aspect-ratio:1;width:20px;padding:0;svg{position:absolute;width:32px;height:auto;top:50%;left:50%;transform:translate(-50%,-50%);}&&{transition:revert;background:var(--background-color);}:disabled{color:",";}:hover{color:var( --selected-hover-color,"," );}& + &{margin-left:4px;}*{pointer-events:none;}:focus{","}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return up.focusCSS(t.colors.border.focus,"var(--background-color)")})),tz=p.default.div.withConfig({displayName:"group__LayerInputWrapper",componentId:"sc-1ik68z7-11"})(["display:grid;grid-template-columns:23px 1fr;height:100%;width:100%;padding-left:","px;padding-right:10px;:hover{background:",";}:hover,:hover + *{--background-color:",";--background-color-opaque:",";}"],(e=>{let{isNested:t}=e;return t?30:12}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.tertiaryHover}),(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.interactiveBg.tertiaryHover,0)})),nz=(0,p.default)(Kj).attrs({as:"form"}).withConfig({displayName:"group__LayerInputForm",componentId:"sc-1ik68z7-12"})(["overflow:visible;"]),rz=(0,p.default)(qv).withConfig({displayName:"group__LayerInput",componentId:"sc-1ik68z7-13"})(["overflow:visible;div{height:100%;}"]);function az(e){e.stopPropagation(),e.preventDefault()}const oz=(0,u.memo)((function Group(e){let{groupId:t}=e;const n=(0,C.useFeature)("layerLocking"),{groups:r,updateGroupById:a,deleteGroupAndElementsById:o,updateElementsById:i,duplicateGroupById:l,groupLayers:s}=Qa((e=>{let{actions:n,state:r}=e;return{groups:r.currentPage.groups,updateGroupById:n.updateGroupById,deleteGroupAndElementsById:n.deleteGroupAndElementsById,updateElementsById:n.updateElementsById,duplicateGroupById:n.duplicateGroupById,groupLayers:r.currentPage.elements.filter((e=>e.groupId===t))}})),p=r[t],m=(0,u.useRef)(null),g=(0,u.useRef)(null),f=`group-${t}`,h=p.isLocked?(0,d.__)("Unlock Group","web-stories"):(0,d.__)("Lock Group","web-stories"),b=p.isLocked?IE.default:PE,E=p.name,[y,_]=(0,u.useState)(E),{isSelected:v,handleClick:w}=zj(t),T=(0,C.useFeature)("layerNaming"),{renamableLayer:S,setRenamableLayer:I}=Xs((e=>{let{state:t,actions:n}=e;return{renamableLayer:t.renamableLayer,setRenamableLayer:n.setRenamableLayer}})),x=S?.elementId===t,A=()=>{I(null);const e=y.trim();e?a({groupId:t,properties:{name:e}}):_(E)},k=()=>{a({groupId:t,properties:{isCollapsed:!p.isCollapsed}})},O=p.isCollapsed?c.createElement(qj,{onClick:k}):c.createElement($j,{onClick:k});return c.createElement(Zj,null,x&&T?c.createElement(tz,null,c.createElement(Vj,null,O,c.createElement(Tb,null)),c.createElement(nz,{onSubmit:e=>{e.preventDefault(),A()}},c.createElement(rz,{tabIndex:-1,"aria-label":(0,d.__)("Layer Name","web-stories"),value:y,onChange:e=>{_(e.target.value)},onKeyDown:e=>{"Escape"===e.key&&(_(E),I(null))},onBlur:A,onPointerDown:e=>e.stopPropagation(),hasFocus:!0}),c.createElement("button",{hidden:!0}))):c.createElement(Wj,{ref:m,id:f,onClick:w,isSelected:v},c.createElement(Vj,null,O,c.createElement(Tb,null)),c.createElement(Kj,null,c.createElement(Jj,null,c.createElement(Xj,null,p.name)),p.isLocked&&n&&c.createElement(Qj,{"aria-label":(0,d.__)("Locked","web-stories")},c.createElement(IE.default,null)))),!x&&c.createElement(Yj,null,c.createElement(Tooltip,{title:(0,d.__)("Delete Group","web-stories"),hasTail:!0,isDelayed:!0},c.createElement(ez,{ref:g,"aria-label":(0,d.__)("Delete","web-stories"),"aria-describedby":f,onPointerDown:az,onClick:()=>o({groupId:t})},c.createElement(av.default,null))),c.createElement(Tooltip,{title:(0,d.__)("Duplicate Group","web-stories"),hasTail:!0,isDelayed:!0},c.createElement(ez,{"aria-label":(0,d.__)("Duplicate","web-stories"),"aria-describedby":f,onPointerDown:az,onClick:()=>{const e=(0,pe.default)(),n=Ss(r,p.name);l({oldGroupId:t,groupId:e,name:n,isLocked:p.isLocked,isCollapsed:p.isCollapsed})}},c.createElement(uy,null))),n&&c.createElement(Tooltip,{title:h,hasTail:!0,isDelayed:!0},c.createElement(ez,{"aria-label":(0,d.__)("Lock/Unlock","web-stories"),"aria-describedby":f,onPointerDown:az,onClick:()=>{a({groupId:t,properties:{isLocked:!p.isLocked}}),i({elementIds:s.map((e=>e.id)),properties:{isLocked:!p.isLocked}})}},c.createElement(b,null)))))})),iz=(0,p.default)(NU).withConfig({displayName:"reorderableGroup__LayerSeparator",componentId:"sc-korag-0"})(["height:","px;margin:-","px 0;padding:","px 0;"],AU,17.5,17.5),lz=(0,u.memo)((function ReorderableGroup(e){let{groupId:t,position:n,handleStartReordering:r}=e;return c.createElement(u.Fragment,{key:t},c.createElement(iz,{groupId:null,position:n+1}),c.createElement(xU,{position:n,data:{group:t},onStartReordering:r({id:t})},c.createElement(oz,{groupId:t})))})),sz=(0,p.default)(TU).attrs({"aria-orientation":"vertical","aria-label":(0,d.__)("Layers List","web-stories")}).withConfig({displayName:"layerList__LayerList",componentId:"sc-1ykjl19-0"})(["flex-direction:column;width:100%;height:100%;align-items:stretch;user-select:",";overflow-y:auto;padding-bottom:4px;"],(e=>{let{hasUserSelect:t}=e;return t?"none":"initial"})),cz=(0,p.default)(NU).withConfig({displayName:"layerList__LayerSeparator",componentId:"sc-1ykjl19-1"})(["height:","px;margin:-","px 0;padding:","px 0;"],AU,17.5,17.5),dz=(0,u.memo)((function ReorderableLayer(e){let{id:t,position:n,nestedOffset:r,nestedOffsetCalcFunc:a,handleStartReordering:o}=e;const i=Qa((e=>{let{state:n}=e;return n.currentPage?.elements.find((e=>e.id===t))}));return i?c.createElement(u.Fragment,{key:t},c.createElement(cz,{groupId:i.groupId,nestedOffset:Boolean(r),nestedOffsetCalcFunc:a,position:n+1,isNested:i.groupId}),c.createElement(xU,{position:n,onStartReordering:o(i),disabled:i.isBackground},c.createElement(jj,{element:i}))):null}));const uz=function LayerPanel(e){let{layers:t}=e;const{arrangeElement:n,arrangeGroup:r,setSelectedElementsById:a}=Qa((e=>{let{actions:t}=e;return{arrangeElement:t.arrangeElement,arrangeGroup:t.arrangeGroup,setSelectedElementsById:t.setSelectedElementsById}})),o=kc((e=>e.onOpenMenu)),i=t.length,l=xs(),{renamableLayer:s}=Xs((e=>{let{state:t}=e;return{renamableLayer:t.renamableLayer}})),d=(0,u.useCallback)((e=>()=>{a({elementIds:[e.id]}),s&&l()}),[a,l,s]);if(!i)return null;const p=[],m=[];for(const e of t){if(e.groupId&&!m.includes(e.groupId)){const t={groupId:e.groupId,position:e.position,name:e.groupId};p.push({group:t}),m.push(t.groupId)}p.push({layer:e})}const g=e=>e.offsetY<AU/1.7;return c.createElement(sz,{onContextMenu:o,onPositionChange:(e,a,o)=>{const{position:i}=e,{position:l,data:{groupId:s}}=a,c=g(o),d=t.find((e=>e.position===i)),u=t.find((e=>e.position===(l<=2?1:l+1)));let p=s;c&&u?.groupId&&(p=u.groupId),e.data?.group?a.data?.groupId||r({groupId:e.data.group,position:l}):n({elementId:d.id,position:l,groupId:p})},mode:"vertical",getItemSize:()=>AU},p.map(((e,t)=>{let{layer:n,group:r}=e;if(r)return c.createElement(lz,{key:r.groupId,groupId:r.groupId,position:r.position,name:r.name,handleStartReordering:d});const a=t>0&&p[t-1].layer?.groupId;return c.createElement(dz,{key:n.id,id:n.id,position:n.position,nestedOffset:a,nestedOffsetCalcFunc:g,handleStartReordering:d})})))};const pz=function(){const e=Qa((e=>{let{state:t}=e;return t.currentPage?.elements?.map((e=>{let{id:t,groupId:n,layerName:r}=e;return{id:t,groupId:n,layerName:r}}))||ze})),t=e.map(((e,t)=>{let{id:n,groupId:r,layerName:a}=e;return{id:n,groupId:r,layerName:a,position:t}}));return t.reverse(),t},mz=p.default.div.withConfig({displayName:"layerPanel__Container",componentId:"sc-1ogzglc-0"})(["filter:drop-shadow(0px -4px 8px rgba(0,0,0,0.2));max-height:","px;background-color:",";"],(e=>{let{maxHeight:t}=e;return t}),(e=>{let{theme:t}=e;return t.colors.bg.secondary}));const gz=(0,u.memo)((function(){const e=pz(),t=ng((e=>{let{state:t}=e;return t.sidebarContentHeight}));return c.createElement(mz,{maxHeight:t},c.createElement(KP,{padding:"0"},c.createElement(uz,{layers:e})))})),fz=p.default.div.withConfig({displayName:"layers__Container",componentId:"sc-12gh0kb-0"})(["background-color:",";overflow:auto;z-index:",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),3),hz=(0,p.default)(lp).withConfig({displayName:"layers__StyledNavigationWrapper",componentId:"sc-12gh0kb-1"})(["width:260px;"]);const bz=function Layers(){const e=pz().length,[t,n]=(0,u.useState)(!1),r=(0,u.useRef)(),{renamableLayer:a}=Xs((e=>{let{state:t}=e;return{renamableLayer:t.renamableLayer}}));return(0,u.useEffect)((()=>{a&&n(!0)}),[a]),c.createElement(c.Fragment,null,c.createElement(Tp,{isOpen:t,placement:Vd.PLACEMENT.RIGHT,ariaLabel:(0,d.__)("Layers Panel","web-stories")},c.createElement(hz,{alignRight:!0,ref:r,isOpen:t},c.createElement(fz,null,c.createElement(gz,null)))),c.createElement(qp,{hasMenuList:!0,isOpen:t,notificationCount:e,copy:(0,d.__)("Layers","web-stories"),onClick:()=>n((e=>!e)),"aria-label":(0,$e.default)(
/* translators: %d: number of layers */
(0,d.__)("Layers (%d)","web-stories"),e)}))},Ez=p.default.div.withConfig({displayName:"primaryMenu__Wrapper",componentId:"sc-1n6k8y9-0"})(["display:flex;align-items:flex-end;justify-content:flex-end;width:100%;height:100%;z-index:",";"],3),yz=p.default.div.withConfig({displayName:"primaryMenu__MenuItems",componentId:"sc-1n6k8y9-1"})(["position:relative;display:flex;flex-direction:row;align-items:center;margin-right:","px;gap:","px;"],16,8);const _z=function PrimaryMenu(){return c.createElement(Ez,null,c.createElement(yz,{id:"primary-menu-items"},c.createElement(lj,null),c.createElement(wj,null),c.createElement(bz,null)))};function vz(){return vz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vz.apply(this,arguments)}const wz=(0,Ir.isPlatformMacOS)(),LargeKey=e=>c.createElement("kbd",vz({className:"large-key"},e)),ShiftKeyWrapper=e=>wz?c.createElement("kbd",e):c.createElement(LargeKey,e),Tz={header:{label:(0,d.__)("Keyboard Shortcuts","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,"/"))},landmarks:[{label:(0,d.__)("Element","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,Ir.prettifyShortcut)("alt")),c.createElement("kbd",null,"1"))},{label:(0,d.__)("Workspace","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,Ir.prettifyShortcut)("alt")),c.createElement("kbd",null,"2"))},{label:(0,d.__)("Design panels","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,Ir.prettifyShortcut)("alt")),c.createElement("kbd",null,"3"))}],sections:[{title:(0,d.__)("Basics","web-stories"),commands:[{label:(0,d.__)("Undo","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,"Z"))},{label:(0,d.__)("Redo","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement(ShiftKeyWrapper,null,(0,Ir.prettifyShortcut)("shift")),c.createElement("kbd",null,"Z"))},{label:(0,d.__)("Save","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,"S"))},{label:(0,d.__)("Play / Stop","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,Ir.prettifyShortcut)("enter")))}]},{title:(0,d.__)("Text","web-stories"),commands:[{label:(0,d.__)("Insert/edit link","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,"K"))},{label:(0,d.__)("Bold","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,"B"))},{label:(0,d.__)("Italic","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,"I"))},{label:(0,d.__)("Underline","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,"U"))}]},{title:(0,d.__)("Element","web-stories"),commands:[{label:(0,d.__)("Copy","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,"C"))},{label:(0,d.__)("Cut","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,"X"))},{label:(0,d.__)("Duplicate","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,"D"))},{label:(0,d.__)("Paste","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,"V"))},{label:(0,d.__)("Copy Styles","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,Ir.prettifyShortcut)("alt")),c.createElement("kbd",null,"O"))},{label:(0,d.__)("Paste Styles","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,(0,Ir.prettifyShortcut)("alt")),c.createElement("kbd",null,"P"))},{label:(0,d.__)("Select all","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,"A"))},{label:(0,d.__)("Select multiple","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(fu.default,{mapping:{lkbd:c.createElement(LargeKey,null),shortcut:c.createElement(Ir.Shortcut,{shortcut:"shift"})}},(0,$e.default)(
/* translators: 1: Shift key. */
(0,d.__)("<lkbd>%s</lkbd> <span>+ click</span>","web-stories"),(0,Ir.prettifyShortcut)("shift"))))},{label:(0,d.__)("Move forward or back","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(fu.default,{mapping:{kbd:c.createElement("kbd",null),lkbd:c.createElement(LargeKey,null)}},(0,$e.default)(
/* translators: 1: Cmd/Ctrl key. 2: Up key. 3: Down key. */
(0,d.__)("<lkbd>%1$s</lkbd> <kbd>%2$s</kbd> <span>or</span> <kbd>%3$s</kbd>","web-stories"),(0,Ir.prettifyShortcut)("mod"),(0,Ir.prettifyShortcut)("up"),(0,Ir.prettifyShortcut)("down"))))},{label:(0,d.__)("Move to front or back","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(fu.default,{mapping:{kbd:c.createElement("kbd",null),lkbd:c.createElement(LargeKey,null)}},(0,$e.default)(
/* translators: 1: Cmd/Ctrl key. 2: Shift key. 3: Up key. 4: Down key. */
(0,d.__)("<lkbd>%1$s</lkbd> <lkbd>%2$s</lkbd> <kbd>%3$s</kbd> <span>or</span> <kbd>%4$s</kbd>","web-stories"),(0,Ir.prettifyShortcut)("mod"),(0,Ir.prettifyShortcut)("shift"),(0,Ir.prettifyShortcut)("up"),(0,Ir.prettifyShortcut)("down"))))},{label:(0,d.__)("Enter crop/edit mode","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(fu.default,{mapping:{kbd:c.createElement("kbd",null)}},(0,$e.default)(
/* translators: %s: Enter key. */
(0,d.__)("<kbd>%s</kbd> <span>or double-click</span>","web-stories"),(0,Ir.prettifyShortcut)("enter"))))},{label:(0,d.__)("Delete","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("delete")))},{disabled:!0,label:(0,d.__)("Insert/edit link","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",null,"A"))},{label:(0,d.__)("Disable snapping and drop targeting","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(fu.default,{mapping:{lkbd:c.createElement(LargeKey,null)}},(0,$e.default)(
/* translators: %s: Cmd/Ctrl key. */
(0,d.__)("<span>Hold</span> <lkbd>%s</lkbd>","web-stories"),(0,Ir.prettifyShortcut)("mod"))))},{label:(0,d.__)("Access floating toolbar","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("ctrl")),c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("alt")),c.createElement("kbd",null,"P"))},{label:(0,d.__)("Open context menu","web-stories"),shortcut:c.createElement("kbd",null,c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("mod")),c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("alt")),c.createElement("kbd",{className:"large-key"},(0,Ir.prettifyShortcut)("shift")),c.createElement("kbd",null,"M"))},{label:(0,d.__)("Move element 1px","web-stories"),shortcut:c.createElement("kbd",null,c.createElement(fu.default,{mapping:{lkbd:c.createElement(LargeKey,null),shortcut:c.createElement(Ir.Shortcut,{shortcut:"shift"})}},(0,$e.default)(
/* translators: 1: Shift key. */
(0,d.__)("<lkbd>%s</lkbd> <span>+ arrow keys</span>","web-stories"),(0,Ir.prettifyShortcut)("shift"))))}]}]},Sz=Tz.header,Cz=Tz.landmarks.filter((e=>!e.disabled)),Iz=Tz.sections.map((e=>({...e,commands:e.commands.filter((e=>!e.disabled))})));function xz(){return xz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xz.apply(this,arguments)}const Az=p.default.dd.withConfig({displayName:"shortcutLabel__Wrapper",componentId:"sc-6tlmvo-0"})(["display:block;margin:0;kbd{"," display:flex;justify-content:",";align-items:center;margin:0;padding:0;color:",";background-color:transparent;& > kbd{display:flex;justify-content:center;align-items:center;padding:0 5px;height:24px;width:24px;border-radius:",";border:1px solid ",";color:",";}& > kbd.large-key{width:auto;}kbd + kbd{margin-left:2px;}kbd + span{margin-left:4px;}span + kbd{margin-left:4px;}}"],dp.expandTextPreset(((e,t)=>{let{paragraph:n}=e,{X_SMALL:r}=t;return n[r]})),(e=>{let{alignment:t}=e;return t}),(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.border.defaultNormal}),(e=>{let{theme:t}=e;return t.colors.fg.primary}));const kz=function ShortCutLabel(e){let{keys:t,alignment:n="center",...r}=e;return c.createElement(Az,xz({alignment:n},r),t)};function Oz(){return Oz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oz.apply(this,arguments)}const Pz=p.default.dl.withConfig({displayName:"headerShortcut__List",componentId:"sc-1egg06k-0"})(["margin:24px;display:flex;flex-shrink:0;"]),Nz=p.default.dt.withConfig({displayName:"headerShortcut__Item",componentId:"sc-1egg06k-1"})(["margin:0 12px 0 0;"]);const Rz=function HeaderShortcut(e){const{label:t,shortcut:n}=Sz;return c.createElement(Pz,null,c.createElement(Nz,null,c.createElement(sp.Headline,Oz({as:"h2",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},e),t)),c.createElement(kz,{keys:n}))},Mz=p.default.dl.withConfig({displayName:"landmarkShortcuts__LandmarksWrapper",componentId:"sc-k7r8e2-0"})(["background-color:",";margin:0;padding:16px 24px;display:flex;justify-content:space-between;user-select:text;"],(e=>{let{theme:t}=e;return t.colors.bg.secondary})),Lz=p.default.div.withConfig({displayName:"landmarkShortcuts__Landmark",componentId:"sc-k7r8e2-1"})(["display:flex;flex-direction:column;"]),Dz=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL,forwardedAs:"span"}).withConfig({displayName:"landmarkShortcuts__Label",componentId:"sc-k7r8e2-2"})(["text-align:center;margin-top:8px;white-space:nowrap;display:inline-block;"]);const Bz=function LandmarkShortcuts(){return c.createElement(Mz,null,Cz.map((e=>{let{label:t,shortcut:n}=e;return c.createElement(Lz,{key:t},c.createElement(kz,{keys:n}),c.createElement("dt",null,c.createElement(Dz,null,t)))})))},Fz=(0,p.default)(sp.Headline).attrs({as:"h3",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL}).withConfig({displayName:"shortcutMenuSection__Header",componentId:"sc-xssjcb-0"})(["margin-top:24px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),Hz=p.default.dl.withConfig({displayName:"shortcutMenuSection__List",componentId:"sc-xssjcb-1"})(["display:grid;grid-template-columns:1fr;row-gap:12px;align-items:center;margin:12px 0 0;"]),Uz=p.default.div.withConfig({displayName:"shortcutMenuSection__ListRow",componentId:"sc-xssjcb-2"})(["display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto;column-gap:5px;align-items:center;dd{grid-column:1;grid-row:1;}dt{grid-column:2;grid-row:1;}"]),jz=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,forwardedAs:"span"}).withConfig({displayName:"shortcutMenuSection__Label",componentId:"sc-xssjcb-3"})(["display:inline-block;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const zz=function ShortcutMenuSection(e){let{title:t,commands:n}=e;const r=`header-${(0,pe.default)()}`;return c.createElement(c.Fragment,null,c.createElement(Fz,{id:r},t),c.createElement(Hz,{title:t},n.map((e=>{let{label:t,shortcut:n}=e;return c.createElement(Uz,{key:t},c.createElement(kz,{keys:n,alignment:"left"}),c.createElement("dt",null,c.createElement(jz,null,t)))}))))},Gz=p.default.div.withConfig({displayName:"regularShortcuts__ContentWrapper",componentId:"sc-fl8s7-0"})(["display:flex;flex-direction:column;margin:0 24px 24px;*{user-select:text;}"]);const Yz=function RegularShortcuts(){return c.createElement(Gz,null,Iz.map((e=>{let{title:t,commands:n}=e;return c.createElement(zz,{key:t,title:t,commands:n})})))},Zz="mod+/",Wz=p.default.div.withConfig({displayName:"shortcutMenu__Container",componentId:"sc-m0xcqa-0"})(["position:absolute;left:0;bottom:0;width:352px;border-radius:",";background-color:",";border:","px solid ",";"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),1,(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),Vz=p.default.div.withConfig({displayName:"shortcutMenu__FlexContent",componentId:"sc-m0xcqa-1"})(["display:flex;flex-direction:column;max-height:calc( 100vh - ","px - ","px );"],110,(e=>{let{bottomOffset:t}=e;return t})),$z=p.default.div.withConfig({displayName:"shortcutMenu__CloseContainer",componentId:"sc-m0xcqa-2"})(["position:absolute;right:4px;top:4px;"]),qz=p.default.div.withConfig({displayName:"shortcutMenu__ScrollableContent",componentId:"sc-m0xcqa-3"})(["overflow:auto;flex-shrink:1;",";"],up.focusableOutlineCSS),Kz=`kb-header-${(0,pe.default)()}`;const Xz=function ShortcutMenu(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{close:n,toggleMenu:r,isOpen:a}=dU((e=>{let{actions:t,state:n}=e;return{toggleMenu:t.toggleMenu,close:t.close,isOpen:n.isOpen}})),[o,i]=(0,u.useState)(0);return(0,u.useLayoutEffect)((()=>{const e=t.current;if(!e)return;const n=()=>{const t=e.getBoundingClientRect(),n=e.ownerDocument.documentElement.getBoundingClientRect();i(n.height-t.y-t.height)};return n(),setTimeout(n),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)}),[]),(0,u.useEffect)((()=>{a&&e.current&&e.current.focus()}),[a]),(0,Ir.useKeyDownEffect)(t,Zz,r,[r]),(0,Ir.useKeyDownEffect)(t,"esc",n),c.createElement(Wz,{ref:t},c.createElement($z,null,c.createElement(m.Button,{ref:e,type:g.BUTTON_TYPES.PLAIN,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.CIRCLE,onClick:n,"aria-label":(0,d.__)("Close Menu","web-stories")},c.createElement(cp.default,null))),c.createElement(Vz,{bottomOffset:o},c.createElement(Rz,{id:Kz}),c.createElement(qz,{role:"presentation",tabIndex:0},c.createElement(Bz,null),c.createElement(Yz,null))))},Qz=p.default.div.withConfig({displayName:"keyboardShortcutsMenu__Wrapper",componentId:"sc-1nngfyy-0"})(["z-index:",";"],3);const Jz=function KeyboardShortcutsMenu(){const e=(0,u.useRef)(),t=(0,u.useRef)(),{close:n,toggle:r,isOpen:a}=dU((e=>{let{actions:{close:t,toggle:n},state:{isOpen:r}}=e;return{close:t,toggle:n,isOpen:r}}));return(0,u.useEffect)((()=>{document.body.classList.contains(Od)&&!a&&e?.current?.focus?.()}),[a]),(0,Ir.useGlobalKeyDownEffect)(Zz,r,[r]),(0,u.useFocusOut)(t,n,[n]),c.createElement(Ku,null,c.createElement(Qz,{ref:t},c.createElement(Tp,{popupId:"keyboard_shortcut_menu",isOpen:a,ariaLabel:(0,d.__)("Keyboard Shortcuts","web-stories")},c.createElement(Xz,{toggleMenu:r})),c.createElement(qp,{ref:e,isOpen:a,"aria-owns":"keyboard_shortcut_menu",onClick:r,"aria-label":(0,d.__)("Keyboard Shortcuts","web-stories"),label:(0,d.__)("Keyboard Shortcuts","web-stories"),MainIcon:Db,shortcut:"mod+/"})))};var eG=n(11443);function tG(){document.querySelector(hc)?.focus()}const nG=(0,p.css)(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),rG=(0,p.default)(gp).withConfig({displayName:"bottomNavigation__BottomNavBar",componentId:"sc-yk08yc-0"})(["position:absolute;bottom:0;transition:transform ","ms ",";z-index:2;",""],pc,Xe.BEZIER.default,(e=>{let{isHidden:t}=e;return t&&(0,p.css)(["transform:translateY(100%);"])})),aG=p.default.div.withConfig({displayName:"bottomNavigation__BottomNavButtons",componentId:"sc-yk08yc-1"})(["display:flex;padding:0 16px;white-space:nowrap;"]),oG=p.default.div.withConfig({displayName:"bottomNavigation__ArrowWrap",componentId:"sc-yk08yc-2"})([""," margin:-5px -16px;"," svg{display:block;}"],nG,(e=>{let{$isRTL:t}=e;return t&&(0,p.css)(["transform:rotate(180deg);"])}));function BottomNavigation(e){let{onAllTips:t,onPrev:n,onNext:r,hasBottomNavigation:a,isNextDisabled:o,isPrevDisabled:i}=e;const{isRTL:l}=U(),s=(0,u.useRef)(null),p=(0,u.useRef)(null),[m,f]=(0,u.useState)({isPrevDisabled:i,isNextDisabled:o});return(0,u.useEffect)((()=>{[i&&document.activeElement===s.current,o&&document.activeElement===p.current].forEach((e=>(e=>t=>{e&&t()})(e)(tG))),f({isPrevDisabled:i,isNextDisabled:o})}),[i,o]),c.createElement(rG,{"aria-hidden":!a,isHidden:!a},c.createElement(aG,null,c.createElement(fp,{onClick:()=>{tG(),t()},type:g.BUTTON_TYPES.PLAIN,size:g.BUTTON_SIZES.SMALL,disabled:!a},c.createElement(oG,{$isRTL:l},c.createElement(bf,null)),c.createElement(iG,null,(0,d.__)("All Tips","web-stories")))),c.createElement(aG,null,c.createElement(fp,{ref:s,onClick:n,type:g.BUTTON_TYPES.PLAIN,size:g.BUTTON_SIZES.SMALL,disabled:!a||m.isPrevDisabled},(0,d.__)("Previous","web-stories")),c.createElement(fp,{ref:p,onClick:r,type:g.BUTTON_TYPES.PLAIN,size:g.BUTTON_SIZES.SMALL,disabled:!a||m.isNextDisabled},(0,d.__)("Next","web-stories"))))}var iG=(0,p.default)("span").withConfig({displayName:"bottomNavigation___StyledSpan",componentId:"sc-yk08yc-3"})(["",""],nG);const lG=p.default.div.withConfig({displayName:"navigator__Layout",componentId:"sc-3xgugm-0"})([""," contain:content;"],SP.fullSizeRelative),sG=p.default.div.withConfig({displayName:"navigator__Content",componentId:"sc-3xgugm-1"})([""]),cG=p.default.div.withConfig({displayName:"navigator__ContentInner",componentId:"sc-3xgugm-2"})(["position:relative;"]);const dG=(0,u.memo)((function Navigator(e){let{children:t,isOpen:n,onClose:r,onNext:a,onPrev:o,onAllTips:i,hasBottomNavigation:l,isNextDisabled:s,isPrevDisabled:p}=e;const m=(0,u.useRef)(null),g=(0,u.useRef)(null);return(0,u.useEffect)((()=>function(e,t){if(!e||!t)return()=>{};const{height:n}=e.getBoundingClientRect();t.style.height=`${n}px`,e.style.position="absolute",e.style.bottom=0,e.style.content="contain";let r=requestAnimationFrame((()=>{r=requestAnimationFrame((()=>{t.style.transition=`height 500ms ${Xe.BEZIER.default}`}))}));return()=>cancelAnimationFrame(r)}(m.current,g.current)),[]),(0,u.useResizeEffect)(m,(e=>{let{height:t}=e;g.current&&(g.current.style.height=`${t}px`)}),[]),c.createElement(lp,{isOpen:n},c.createElement(Ep,{onClose:r,label:(0,d.__)("Quick Tips","web-stories"),popupId:fc}),c.createElement(lG,{ref:g},c.createElement(sG,{ref:m},c.createElement(cG,null,t))),c.createElement(BottomNavigation,{onNext:a,onPrev:o,onAllTips:i,hasBottomNavigation:l,isNextDisabled:s,isPrevDisabled:p}))}));var uG=n(94537);const pG=p.default.div.withConfig({displayName:"header__Panel",componentId:"sc-1aci6do-0"})(["padding:24px 0 16px 0;border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.bg.tertiary})),mG=p.default.h1.withConfig({displayName:"header__Heading",componentId:"sc-1aci6do-1"})([""," color:",";line-height:32px;margin:0 0 8px 0;"],dp.expandTextPreset(((e,t)=>{let{label:n}=e,{MEDIUM:r}=t;return n[r]})),(e=>{let{theme:t}=e;return t.colors.fg.primary}));function gG(){return c.createElement(pG,null,c.createElement(mG,{as:"h2"},(0,d.__)("Web Stories Help Center","web-stories")),c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Discover tips & resources to help you get the most out of your Web Stories.","web-stories")))}const fG=p.default.div.withConfig({displayName:"tips__Panel",componentId:"sc-1bvshes-0"})(["padding:24px 0;"]),hG=(0,p.default)(m.Button).withConfig({displayName:"tips__StyledButton",componentId:"sc-1bvshes-1"})([""," display:flex;justify-content:space-between;width:100%;padding:6px 0;"],dp.expandTextPreset(((e,t)=>{let{label:n}=e,{SMALL:r}=t;return n[r]}))),bG=p.default.span.withConfig({displayName:"tips__ButtonText",componentId:"sc-1bvshes-2"})(["vertical-align:middle;text-align:left;",""],(e=>{let{unread:t,theme:n}=e;return t&&(0,p.css)(["&::before{content:' ';display:inline-block;height:10px;width:10px;margin-right:16px;border-radius:",";background-color:",";}"],n.borders.radius.round,n.colors.accent.primary)})),EG=p.default.div.withConfig({displayName:"tips__ArrowWrap",componentId:"sc-1bvshes-3"})(["width:32px;margin:-9px;transform-origin:50% 50%;transform:",";"],(e=>{let{$isRTL:t}=e;return t?"none":"rotate(180deg)"})),yG=(0,p.default)(bf).withConfig({displayName:"tips__StyledArrow",componentId:"sc-1bvshes-4"})(["width:100%;"]);function Tip(e){let{children:t,onClick:n,unread:r=!0}=e;const{isRTL:a}=U();return c.createElement(hG,{size:g.BUTTON_SIZES.SMALL,onClick:n},c.createElement(bG,{unread:r},t),c.createElement(EG,{$isRTL:a},c.createElement(yG,null)))}function Tips(e){let{onTipSelect:t=(()=>{}),readTips:n}=e;const{state:{tips:r}}=Ic(),a=Object.entries(r);return c.createElement(fG,null,a.map((e=>{let[r,a]=e;return c.createElement(Tip,{unread:!n[r],key:r,onClick:()=>{tG(),t(r)}},a.title)})))}function _G(){return _G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_G.apply(this,arguments)}const vG=(0,p.css)(["opacity:1;transform:none;"]),wG=(0,p.css)(["position:absolute;bottom:0;opacity:0.6;transform:scale(0.96);"]),TG={entering:vG,entered:vG,exiting:wG,exited:wG},SG=p.default.div.withConfig({displayName:"transitioner__Manager",componentId:"sc-aat78p-0"})(["position:relative;color:",";opacity:0.6;transform-origin:50% 50%;transform:scale(0.96);transition:transform ","ms ",",opacity ","ms ",";z-index:",";",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),600,Xe.BEZIER.default,600,Xe.BEZIER.default,mc,(e=>{let{state:t}=e;return TG[t]}));function Transitioner(e){let{children:t,...n}=e;return c.createElement(ScheduledTransition,_G({},n,{timeout:600,mountOnEnter:!0,unmountOnExit:!0}),(e=>c.createElement(SG,{state:e},t)))}const CG=p.default.div.withConfig({displayName:"menu__Container",componentId:"sc-ztoh5v-0"})(["padding:0 ","px;max-height:60vh;overflow-y:scroll;*{user-select:text;}"],24);function IG(e){let{onTipSelect:t=Bt,readTips:n,components:r,...a}=e;const o=r?.Footer;return c.createElement(Transitioner,a,c.createElement(CG,{"data-testid":"help_center_container"},c.createElement(gG,null),c.createElement(Tips,{readTips:n,onTipSelect:t}),o&&c.createElement(o,null)))}function xG(){return xG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xG.apply(this,arguments)}const AG=420,kG=p.default.div.withConfig({displayName:"transitioner__Opacity",componentId:"sc-cc5d3w-0"})([""]),OG=()=>(0,p.css)(["transition-delay:","ms;transform:none;","{opacity:1;}"],80,kG),PG=e=>{let{isLeftToRightTransition:t}=e;return(0,p.css)(["position:absolute;bottom:0;","{opacity:0;}",""],kG,t?(0,p.css)(["transform:translateX(-100%);"]):(0,p.css)(["transform:translateX(100%);"]))},NG={entering:OG,entered:OG,exiting:PG,exited:PG},RG=p.default.div.withConfig({displayName:"transitioner__Manager",componentId:"sc-cc5d3w-1"})(["position:relative;color:",";background-color:",";transition:transform ","ms ",";transform-origin:50% 50%;z-index:",";"," ","{opacity:0.6;transition:opacity ","ms ",";}",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.bg.primary}),AG,Xe.BEZIER.default,gc,(e=>{let{isLeftToRightTransition:t}=e;return t?(0,p.css)(["transform:translateX(100%);"]):(0,p.css)(["transform:translateX(-100%);"])}),kG,AG,Xe.BEZIER.default,(e=>{let{state:t,...n}=e;return NG[t]?.(n)}));function MG(e){let{children:t,isLeftToRightTransition:n,...r}=e;return c.createElement(ScheduledTransition,xG({},r,{timeout:{enter:500,exit:AG},mountOnEnter:!0,unmountOnExit:!0}),(e=>c.createElement(RG,{state:e,isLeftToRightTransition:n},c.createElement(kG,null,t))))}var LG,DG,BG;function FG(){return FG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FG.apply(this,arguments)}const SvgDoneCheckmark=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",FG({viewBox:"0 0 135 136",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,LG||(LG=c.createElement("circle",{cx:67.5,cy:68.5,r:67.5,fill:"currentColor"})),DG||(DG=c.createElement("path",{d:"M67.5 93.146c13.889 0 25.148-11.259 25.148-25.147 0-13.889-11.26-25.147-25.147-25.147-13.889 0-25.148 11.258-25.148 25.147 0 13.888 11.26 25.147 25.148 25.147Z",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"})),BG||(BG=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M81.698 57.64a1.5 1.5 0 0 1 .037 2.12l-17.93 18.563a1.5 1.5 0 0 1-2.157 0l-7.383-7.643a1.5 1.5 0 1 1 2.158-2.084l6.304 6.526 16.85-17.445a1.5 1.5 0 0 1 2.121-.037Z",fill:"currentColor"})))},HG=(0,c.memo)(SvgDoneCheckmark);function UG(){return UG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UG.apply(this,arguments)}const jG=p.default.div.withConfig({displayName:"quickTip__Panel",componentId:"sc-1kyj87z-0"})(["width:100%;padding-bottom:","px;*{user-select:text;}"],48),zG=p.default.div.withConfig({displayName:"quickTip__Overflow",componentId:"sc-1kyj87z-1"})(["position:relative;width:100%;max-height:70vh;padding:","px;strong{font-weight:700;}"],24),GG=p.default.video.withConfig({displayName:"quickTip__Video",componentId:"sc-1kyj87z-2"})(["height:180px;margin-bottom:","px;max-width:100%;"],24),YG=p.default.h1.withConfig({displayName:"quickTip__Title",componentId:"sc-1kyj87z-3"})([""," color:",";line-height:32px;margin:0 0 8px 0;"],dp.expandTextPreset(((e,t)=>{let{label:n}=e,{MEDIUM:r}=t;return n[r]})),(e=>{let{theme:t}=e;return t.colors.fg.primary})),ZG=(0,p.default)(Ke.Text).withConfig({displayName:"quickTip__Paragraph",componentId:"sc-1kyj87z-4"})(["& + &{margin-top:8px;}"]),WG=p.default.div.withConfig({displayName:"quickTip__DoneContainer",componentId:"sc-1kyj87z-5"})([""," height:180px;margin-bottom:","px;color:#f4f2ef;svg{display:block;path{color:#4285f4;}}"],CP.centerContent,24);function QuickTip(e){let{title:t,description:n,isLeftToRightTransition:r=!0,figureSrc:a,figureSrcImg:o,figureAlt:i,href:l,isDone:s=!1,...d}=e;const{cdnURL:u}=U();return c.createElement(MG,UG({},d,{isLeftToRightTransition:r}),c.createElement(jG,null,c.createElement(zG,null,Boolean(a)&&c.createElement(GG,{controls:!1,autoPlay:!0,loop:!0,muted:!0,noControls:!0,preload:"true",crossOrigin:"anonymous"},c.createElement("source",{src:`${u}${a}.webm`,type:"video/webm"}),c.createElement("source",{src:`${u}${a}.mp4`,type:"video/mp4"})),o&&c.createElement(GG,{as:"img",alt:i,src:`${u}${o}.png`,crossOrigin:"anonymous"}),s&&c.createElement(WG,null,c.createElement(HG,{height:135,width:135})),c.createElement(YG,null,t),n.map(((e,n)=>c.createElement(ZG,{key:`${t}-${n}`,size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(fu.default,{mapping:{a:c.createElement(hu.Link,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,rel:"noreferrer noopener",target:"_blank",href:l}),screenreader:c.createElement(XM.VisuallyHidden,null)}},e)))))))}function VG(){return VG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VG.apply(this,arguments)}const $G=(0,u.memo)((function Companion(e){let{tipKey:t,onTipSelect:n,isLeftToRightTransition:r,readTips:a,components:o}=e;const{state:{tips:i}}=Ic(),l={...i,[uc[0]]:uc[1]},s=t&&l[t];return c.createElement(uG.default,null,s?c.createElement(QuickTip,VG({key:t,isDone:t===uc[0],transitionKey:t,isLeftToRightTransition:r},s)):c.createElement(IG,{key:"menu",readTips:a,onTipSelect:n,components:o}))}));function qG(e){let{isOpen:t=!1,popupId:n="",onClick:r=(()=>{}),notificationCount:a=0}=e;return c.createElement(qp,{"aria-owns":n,"aria-label":a>0?(0,$e.default)(
/* translators: %s:  number of unread notifications. */
(0,d._n)("Help Center: %s unread notification","Help Center: %s unread notifications",a,"web-stories"),a):(0,d.__)("Help Center","web-stories"),onClick:r,isOpen:t,label:(0,d.__)("Help","web-stories"),MainIcon:b_,notificationCount:a})}const KG=p.default.div.withConfig({displayName:"helpCenter__Wrapper",componentId:"sc-12zoy5g-0"})(["z-index:",";"],3),HelpCenter=e=>{let{components:t}=e;const n=(0,u.useRef)(null),{state:r,actions:a}=Ic();return(0,u.useEffect)((()=>{r.isOpen&&tG()}),[r.isOpen]),Ka(Ga.onReplaceBackgroundMedia,(0,u.useCallback)((()=>{a.openToUnreadTip(nc)}),[a])),Ka(Ga.onReplaceForegroundMedia,(0,u.useCallback)((()=>{a.openToUnreadTip(rc)}),[a])),c.createElement(Ku,null,c.createElement(c.Fragment,null,c.createElement(eG.Styles,null),c.createElement(KG,{ref:n},c.createElement(Tp,{popupId:fc,isOpen:r.isOpen,ariaLabel:(0,d.__)("Help Center","web-stories")},c.createElement(dG,{isOpen:r.isOpen,onNext:a.goToNext,onPrev:a.goToPrev,onAllTips:a.goToMenu,onClose:a.close,hasBottomNavigation:r.hasBottomNavigation,isNextDisabled:r.isNextDisabled,isPrevDisabled:r.isPrevDisabled},c.createElement($G,{readTips:r.readTips,tipKey:r.navigationFlow[r.navigationIndex],onTipSelect:a.goToTip,isLeftToRightTransition:r.isLeftToRightTransition,components:t}))),c.createElement(qG,{isOpen:r.isOpen,onClick:a.toggle,notificationCount:r.unreadTipsCount,popupId:fc}))))},XG=p.default.div.withConfig({displayName:"secondaryMenu__Wrapper",componentId:"sc-4921wn-0"})(["display:flex;align-items:flex-end;justify-content:flex-start;width:100%;height:100%;"]),QG=p.default.div.withConfig({displayName:"secondaryMenu__MenuItems",componentId:"sc-4921wn-1"})(["position:relative;display:flex;flex-direction:row;align-items:center;margin-left:","px;gap:","px;"],16,8),JG="help_center",eY="checklist",tY="keyboard_shortcuts";const nY=function SecondaryMenu(e){let{menu:t}=e;const n=(0,u.useRef)(""),{close:r,isHelpCenterOpen:a}=Ic((e=>{let{actions:{close:t},state:{isOpen:n}}=e;return{close:t,isHelpCenterOpen:n}})),{close:o,open:i,isChecklistOpen:l}=gu((e=>{let{actions:{close:t,open:n},state:{isOpen:r}}=e;return{close:t,open:n,isChecklistOpen:r}})),{close:s,isKeyboardShortcutsMenuOpen:d}=dU((e=>{let{actions:{close:t},state:{isOpen:n}}=e;return{close:t,isKeyboardShortcutsMenuOpen:n}})),{handleResetReviewChecklist:p,reviewChecklistRequested:m}=zu((e=>{let{actions:{handleResetReviewChecklist:t},state:{reviewChecklistRequested:n}}=e;return{reviewChecklistRequested:n,handleResetReviewChecklist:t}})),g=Xs((e=>{let{state:{editingElementState:{isTrimMode:t},isEditing:n}}=e;return t||n})),f=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.current=e}),[]);return(0,u.useEffect)((()=>{l&&n.current!==eY&&(r(),s(),f(eY))}),[r,s,l,f]),(0,u.useEffect)((()=>{a&&n.current!==JG&&(o(),s(),f(JG))}),[o,s,a,f]),(0,u.useEffect)((()=>{d&&n.current!==tY&&(o(),r(),f(tY))}),[o,r,d,f]),(0,u.useEffect)((()=>{m&&(f(),p(),i())}),[m,p,i,f]),(0,u.useEffect)((()=>{g&&n.current&&(f(),o(),r())}),[o,r,g,f]),c.createElement(XG,null,c.createElement(QG,null,c.createElement(HelpCenter,{components:t?.helpCenter}),t?.checklist&&c.createElement(Checklist,{items:t.checklist}),c.createElement(Jz,null)))},rY=p.default.section.withConfig({displayName:"footerLayout__Wrapper",componentId:"sc-gme2s1-0"})(["position:relative;display:grid;grid:'secondary carousel primary' auto / 1fr minmax(auto,calc(100% - ","px)) 1fr;width:100%;max-width:100%;height:100%;"],3*xB),aY=p.default.div.withConfig({displayName:"footerLayout__Area",componentId:"sc-gme2s1-1"})(["grid-area:",";display:flex;align-items:flex-end;justify-content:center;z-index:",";"],(e=>{let{area:t}=e;return t}),(e=>{let{zIndex:t="auto"}=e;return t}));const oY=function FooterLayout(e){let{footer:t,zIndex:n}=e;return c.createElement(Ku,null,c.createElement(rY,{"aria-label":(0,d.__)("Workspace Footer","web-stories")},c.createElement(aY,{area:"carousel"},c.createElement(aj,null)),c.createElement(aY,{area:"primary",zIndex:n},c.createElement(_z,null)),c.createElement(aY,{area:"secondary",zIndex:n},c.createElement(nY,{menu:t?.secondaryMenu}))))},iY=p.default.section.withConfig({displayName:"footer__Outer",componentId:"sc-124zhi3-0"})(["height:100%;"]),lY=(0,p.default)(iY).withConfig({displayName:"footer__Inner",componentId:"sc-124zhi3-1"})(["margin-right:","px;"],(e=>{let{marginRight:t}=e;return t}));const sY=(0,u.memo)((function(e){let{footer:t,zIndex:n}=e;const r=(0,u.useRef)(),[a,o]=(0,u.useState)(0);(0,u.useResizeEffect)(r,(e=>{let{width:t}=e;return o(t)}),[]);const i=(0,u.useMemo)((()=>a>=1e3?8:0),[a]);return c.createElement(mu,null,c.createElement(cU,null,c.createElement(iY,{ref:r},c.createElement(lY,{marginRight:i},c.createElement(oY,{footer:t,zIndex:n})))))}));function cY(){return cY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cY.apply(this,arguments)}const dY=(0,p.default)(m.Button).withConfig({displayName:"pageMenuButton__StyledButton",componentId:"sc-x8fz92-0"})(["margin-top:12px;"]);const uY=(0,u.forwardRef)((function PageMenuButtonWithRef(e,t){let{children:n,title:r,shortcut:a,...o}=e;return c.createElement(Tooltip,{title:r,shortcut:a,placement:Vd.PLACEMENT.RIGHT,hasTail:!0},c.createElement(dY,cY({variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,ref:t},o),n))}));uY.propTypes={children:za().node,title:za().string,shortcut:za().string};const pY=uY;const mY=function AnimationToggle(){const{animationState:e,updateAnimationState:t,isFirstPage:n}=Qa((e=>{let{state:{animationState:t,currentPageNumber:n},actions:{updateAnimationState:r}}=e;return{animationState:t,updateAnimationState:r,isFirstPage:1===n}})),r=[Un.STORY_ANIMATION_STATE.PLAYING,Un.STORY_ANIMATION_STATE.PLAYING_SELECTED].includes(e),a=n?(0,d.__)("Animations Disabled","web-stories"):r?(0,d.__)("Stop","web-stories"):(0,d.__)("Play","web-stories"),o=n?(0,d.__)("Page Animations Disabled","web-stories"):r?(0,d.__)("Stop Page Animations","web-stories"):(0,d.__)("Play Page Animations","web-stories"),i=n?null:"mod+enter",l=r?q_:a_,s=(0,u.useCallback)((()=>{t({animationState:r?Un.STORY_ANIMATION_STATE.RESET:Un.STORY_ANIMATION_STATE.PLAYING}),(0,P.trackEvent)("canvas_play_animations",{status:r?"stop":"play"})}),[r,t]);return c.createElement(pY,{title:a,shortcut:i,onClick:s,"aria-label":o,disabled:n},c.createElement(l,null))},gY=p.default.div.withConfig({displayName:"pageMenu__Wrapper",componentId:"sc-m9u2n8-0"})(["margin-top:auto;padding:0 4px;pointer-events:all;"]);const fY=(0,u.memo)((function PageMenu(){const{currentPage:e,numberOfPages:t,deleteCurrentPage:n,addPage:r,hasAnimations:a}=Qa((e=>{let{state:{currentPage:t,pages:n},actions:{deleteCurrentPage:r,addPage:a}}=e;return{currentPage:t,numberOfPages:n.length,deleteCurrentPage:r,addPage:a,hasAnimations:t?.animations?.length>0}})),o=(0,u.useRef)(null),i=(0,u.useRef)(null);$m({node:o.current,eventData:Se.PAGE_ADD}),$m({node:i.current,eventData:Se.PAGE_DELETE});const l=(0,u.useCallback)((()=>n()),[n]),s=(0,u.useCallback)((()=>r({page:(0,Mn.createPage)()})),[r]),p=(0,u.useCallback)((()=>r({page:(0,Mn.duplicatePage)(e)})),[r,e]),m=t<=1;return e?c.createElement(gY,{role:"group","aria-label":(0,d.__)("Page actions","web-stories")},a&&c.createElement(mY,null),c.createElement(pY,{ref:o,title:(0,d.__)("New Page","web-stories"),onClick:s,"aria-label":(0,d.__)("Add New Page","web-stories")},c.createElement(m_,null)),c.createElement(pY,{title:(0,d.__)("Duplicate Page","web-stories"),onClick:p,"aria-label":(0,d.__)("Duplicate Page","web-stories")},c.createElement(uy,null)),c.createElement(pY,{ref:i,title:(0,d.__)("Delete Page","web-stories"),disabled:m,onClick:l,"aria-label":(0,d.__)("Delete Page","web-stories")},c.createElement(av.default,null))):null}));function hY(){return hY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hY.apply(this,arguments)}const bY=p.default.section.withConfig({displayName:"pageSideMenu__MenusWrapper",componentId:"sc-sll2i1-0"})(["position:absolute;display:flex;flex-direction:column;align-items:center;justify-content:space-between;z-index:",";pointer-events:auto;min-height:100%;pointer-events:none;",""],(e=>{let{$zIndex:t}=e;return t}),(e=>{let{isZoomed:t,theme:n}=e;return t&&`\n    min-height: initial;\n    background-color: ${(0,qe.rgba)(n.colors.standard.black,.45)};\n    border-radius: ${n.borders.radius.small};\n    padding: 8px;\n    margin-left: -24px;\n  `})),EY=p.default.div.withConfig({displayName:"pageSideMenu__Divider",componentId:"sc-sll2i1-1"})(["width:20px;height:1px;margin:13px auto 1px;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary})),yY=(0,p.default)(DM.default).withConfig({displayName:"pageSideMenu__StyledContextMenu",componentId:"sc-sll2i1-2"})(["pointer-events:all;"]);const _Y=function PageSideMenu(){const{zoomSetting:e}=gs((e=>{let{state:{zoomSetting:t}}=e;return{zoomSetting:t}})),t=KA(),{isInRecordingMode:n}=Iv((e=>{let{state:{isInRecordingMode:t}}=e;return{isInRecordingMode:t}})),r=e!==Ie.FIT;return c.createElement(bY,{"aria-label":(0,d.__)("Page side menu","web-stories"),isZoomed:r,$zIndex:n?7:3},t.length?c.createElement(yY,{isInline:!0,isAlwaysVisible:!0,isIconMenu:!0,disableControlledTabNavigation:!0,"data-testid":"Element quick actions","aria-label":(0,d.__)("Group of available options for selected element","web-stories"),onMouseDown:e=>{e.stopPropagation()}},t.map((e=>{let{Icon:t,label:n,onClick:r,separator:a,tooltipPlacement:o,wrapWithMediaPicker:i,...l}=e;const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lv.noop;return c.createElement(u.Fragment,{key:n},"top"===a&&c.createElement(sL.default,null),c.createElement(Tooltip,{placement:o,title:n},c.createElement(tL.default,hY({"aria-label":n,onClick:t=>{r(t),e(t)}},l),c.createElement(eL,{title:n},c.createElement(t,null)))),"bottom"===a&&c.createElement(sL.default,null))};return i?c.createElement(MediaPicker,{key:n,render:e=>{let{onClick:t}=e;return s(t)}}):s()}))):null,!n&&c.createElement(c.Fragment,null,r&&c.createElement(EY,null),c.createElement(fY,null)))};const vY=(0,u.memo)((function NavLayer(e){let{header:t,footer:n}=e;return c.createElement(ChecklistCountProvider,{hasChecklist:Boolean(n?.secondaryMenu?.checklist)},c.createElement(BB,{pointerEvents:"none",onMouseDown:e=>e.stopPropagation()},c.createElement(GB,{pointerEvents:"initial",zIndex:5},t),c.createElement(Ku,null,c.createElement(qB,null,c.createElement(_Y,null))),c.createElement(KB,{pointerEvents:"initial"},c.createElement(sY,{footer:n,zIndex:5}))))})),wY=0,TY=1,SY=2,CY=(0,x.withOverlay)(p.default.div.withConfig({displayName:"selectionCanvas__Container",componentId:"sc-qsqc5z-0"})(["position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;user-select:none;"])),IY=p.default.div.withConfig({displayName:"selectionCanvas__Lasso",componentId:"sc-qsqc5z-1"})(["display:none;position:absolute;border:1px dotted ",";z-index:1;"],(e=>{let{theme:t}=e;return t.colors.border.selection}));const xY=function SelectionCanvas(e){let{children:t}=e;const n=Qa((e=>{let{state:t}=e;return t.currentPage?.elements||ze})),{selectedElements:r,clearSelection:a,setSelectedElementsById:o}=Qa((e=>{let{state:{selectedElements:t},actions:{clearSelection:n,setSelectedElementsById:r}}=e;return{selectedElements:t,clearSelection:n,setSelectedElementsById:r}})),{isEditing:i,nodesById:l,clearEditing:s}=Xs((e=>{let{state:{isEditing:t,nodesById:n},actions:{clearEditing:r}}=e;return{isEditing:t,nodesById:n,clearEditing:r}})),d=(0,u.useRef)(null),p=(0,u.useRef)(null),m=(0,u.useRef)([0,0]),g=(0,u.useRef)([0,0]),f=(0,u.useRef)(wY),h=(0,u.useCallback)((()=>{const[e,t]=m.current,[n,r]=g.current;return[Math.min(e,n),Math.min(t,r),Math.abs(e-n),Math.abs(t-r)]}),[]),b=(0,u.useCallback)((()=>{const e=p.current;if(!e)return;const t=f.current,[n,r,a,o]=h();let i=0,l=0;for(let e=d.current;e;e=e.offsetParent)i+=e.offsetLeft,l+=e.offsetTop;const s=n-i,c=r-l;e.style.left=`${s}px`,e.style.top=`${c}px`,e.style.width=`${a}px`,e.style.height=`${o}px`,e.style.display=t===TY?"block":"none"}),[h]),E=(0,u.useCallback)((e=>{l[n[0].id]?.contains(e.target)||(r.length&&a(),i&&s()),m.current=[e.pageX,e.pageY],g.current=[e.pageX,e.pageY],f.current=SY,b()}),[s,a,n,i,l,r.length,b]),y=(0,u.useCallback)((e=>{if(f.current===wY)return;const[t,n]=m.current,r=e.pageX,a=e.pageY;g.current[0]=r,g.current[1]=a,b(),Math.abs(t-r)+Math.abs(n-a)>10&&(f.current=TY)}),[b]),_=lF(),v=(0,u.useCallback)((e=>{let{x:t,y:r,width:a,height:i}=e;const l=new(iF().Box)(new(iF().Vector)(t,r),a,i).toPolygon(),s=n.filter((e=>{let{isBackground:t,isLocked:n}=e;return!t&&!n})).map((e=>{let{id:t,...n}=e;const r=_({id:t,...n});return iF().testPolygonPolygon(l,r)?t:null})).filter((e=>e));o({elementIds:s,withLinked:!0})}),[n,o,_]),w=(0,u.useCallback)((()=>{if(f.current===TY){const[e,t,n,r]=h();a(),s(),v({x:e,y:t,width:n,height:r})}f.current=wY,b()}),[s,a,h,v,b]);return(0,u.useEffect)((()=>(document.addEventListener("mouseup",w),()=>{document.removeEventListener("mouseup",w)})),[w]),(0,u.useEffect)(b),c.createElement(CY,{onMouseDown:E,onMouseMove:y,"data-fix-caret":!0},t,c.createElement(x.InOverlay,{ref:d},c.createElement(IY,{ref:p})))},AY="edit-story-canvas-upload-message";const kY=function CanvasUploadDropTarget(e){let{children:t}=e;const n=Os(),r=(0,u.useCallback)((e=>{e&&e.length>0&&n(e)}),[n]);return c.createElement(Pm,{onDrop:r,labelledBy:AY},t,c.createElement(Fm,null,c.createElement(BB,null,c.createElement(XB,{overlay:c.createElement(Gm,{id:AY,message:(0,d.__)("Upload to media library and add to the page.","web-stories")})}))))},OY=p.default.div.withConfig({displayName:"canvasElementDropzone__Container",componentId:"sc-8cm35g-0"})(["width:100%;height:100%;"]);const PY=function CanvasElementDropzone(e){let{children:t}=e;const n=ks(),{activeDropTargetId:r}=ds((e=>({activeDropTargetId:e.state.activeDropTargetId}))),{pageContainer:a}=Xs((e=>({pageContainer:e.state.pageContainer}))),{editorToDataX:o,editorToDataY:i}=(0,Bc.default)((e=>({editorToDataX:e.actions.editorToDataX,editorToDataY:e.actions.editorToDataY}))),l=(0,u.useCallback)((e=>{if(Cm(e,"resource/media")&&!r){const{resource:t,offset:{x:r,y:l,w:s,h:c}}=JSON.parse(e.dataTransfer.getData("resource/media")),{x:d,y:u}=a.getBoundingClientRect();n(t.type,{resource:t,x:o(e.clientX-d-r),y:i(e.clientY-u-l),width:o(s),height:i(c)}),e.stopPropagation(),e.preventDefault()}}),[r,a,n,o,i]),s=(0,u.useCallback)((e=>{Cm(e,"resource/media")&&!r&&(e.stopPropagation(),e.preventDefault())}),[r]);return c.createElement(OY,{onDrop:l,onDragOver:s},t)};const NY=function(e,t,n,r){const a=((e,t,n)=>{const r=4*(Math.floor(t)*n+Math.floor(e));return[r,r+1,r+2,r+3]})(t,n,r),[o,i,l,s]=a;return{r:e[o],g:e[i],b:e[l],a:e[s]/255}},RY=200,MY=RY/7,LY=(0,p.default)(BB).withConfig({displayName:"eyedropperLayer__EyedropperBackground",componentId:"sc-nf74gq-0"})(["background:",";cursor:not-allowed;z-index:2;"],(e=>{let{theme:t}=e;return t.colors.opacity.black64})),DY=(0,p.default)(XB).withConfig({displayName:"eyedropperLayer__DisplayPageArea",componentId:"sc-nf74gq-1"})(["position:absolute;"]),BY=p.default.div.withConfig({displayName:"eyedropperLayer__EyedropperCanvas",componentId:"sc-nf74gq-2"})(["background:transparent;border-radius:5px;position:absolute;z-index:2;transform:translateZ(0);top:0;left:0;bottom:0;right:0;cursor:default;"]),FY=p.default.div.withConfig({displayName:"eyedropperLayer__ColorInfo",componentId:"sc-nf74gq-3"})(["text-transform:uppercase;margin-top:30px;padding:9px;min-width:102px;text-align:center;"]),HY=p.default.div.withConfig({displayName:"eyedropperLayer__Circle",componentId:"sc-nf74gq-4"})(["transform:translateY(20px);background:",";border:2px solid black;border-radius:50%;overflow:hidden;width:","px;height:","px;"],(e=>{let{theme:t}=e;return t.colors.bg.primary}),198,RY),UY=p.default.div.withConfig({displayName:"eyedropperLayer__Magnifier",componentId:"sc-nf74gq-5"})(["position:absolute;top:0;left:0;transform:translateY(-2000px);pointer-events:none;"]),jY=p.default.div.withConfig({displayName:"eyedropperLayer__Center",componentId:"sc-nf74gq-6"})(["position:absolute;top:0;left:0;right:0;bottom:0;z-index:3;background:",";cursor:not-allowed;display:flex;justify-content:center;align-items:center;"],(e=>{let{theme:t}=e;return t.colors.opacity.black64})),zY=p.default.img.withConfig({displayName:"eyedropperLayer__CanvasImage",componentId:"sc-nf74gq-7"})(["width:100%;"]);const GY=function EyedropperLayer(){const{fullbleedContainer:e,isEyedropperActive:t,eyedropperCallback:n,eyedropperImg:r,eyedropperPixelData:a,setIsEyedropperActive:o,setEyedropperImg:i,setEyedropperPixelData:l}=Xs((e=>{let{state:{fullbleedContainer:t,isEyedropperActive:n,eyedropperCallback:r,eyedropperImg:a,eyedropperPixelData:o},actions:{setIsEyedropperActive:i,setEyedropperImg:l,setEyedropperPixelData:s}}=e;return{fullbleedContainer:t,isEyedropperActive:n,eyedropperCallback:r,eyedropperImg:a,eyedropperPixelData:o,setIsEyedropperActive:i,setEyedropperImg:l,setEyedropperPixelData:s}})),{isEyeDropperApiSupported:s}=Dv({}),{pageWidth:d}=gs((e=>{let{state:{pageWidth:t}}=e;return{pageWidth:t}})),p=d/ee.FULLBLEED_RATIO,m=r,g=(0,u.useRef)(),f=(0,u.useRef)(),h=(0,u.useRef)(),b=(0,u.useRef)(),E=(0,u.useRef)(),y=()=>{o(!1),i(null),l(null)};return(0,u.useFocusOut)(E,y,[t,m]),(0,Ir.useGlobalKeyDownEffect)("esc",y),s?null:t&&!m?c.createElement(c.Fragment,null,c.createElement(jY,{onClick:y},c.createElement(Ew.default,null))):t&&m?c.createElement(LY,{"data-testid":"eyedropperLayer",onMouseMove:t=>{const{left:n,top:r,width:o,height:i}=e.getBoundingClientRect(),l=(t.clientX-n)*(d/o),s=(t.clientY-r)*(p/i);if(l<0||s<0||l>o||s>i)return void(h.current.style.display="none");h.current.style.display="block",h.current.style.transform=`translate(${l-100}px, ${s}px)`,function(e,t){const n=f.current;if(n){const r=n.getContext("2d");r.imageSmoothingEnabled=!1,r.mozImageSmoothingEnabled=!1,r.webkitImageSmoothingEnabled=!1,r.msImageSmoothingEnabled=!1,r.clearRect(0,0,RY,RY),r.drawImage(g.current,Math.round(e-3.5),Math.round(t-3.5),7,7,0,0,RY,RY),r.beginPath(),r.rect(Math.round(100)-14.285714285714286,Math.round(100)-14.285714285714286,MY,MY),r.stroke()}}(l,s);const c=NY(a,l,s,o),{r:u,g:m,b:E,a:y}=c,_=(0,qe.rgba)(u,m,E,y);b.current.style.background=`rgba(${u},${m},${E},${y})`,b.current.style.color=(0,qe.readableColor)(_,"#333","#EDEDED",!1),b.current.innerText=_}},c.createElement(DY,{withSafezone:!1,showOverflow:!0},c.createElement(BY,{ref:E,onClick:t=>{const{left:r,top:o,width:i,height:l}=e.getBoundingClientRect(),s=(t.clientX-r)*(d/i),c=(t.clientY-o)*(p/l),u=NY(a,s,c,d);n(u)}},c.createElement(zY,{ref:g,src:m,alt:""}),c.createElement(UY,{ref:h},c.createElement(HY,null,c.createElement("canvas",{ref:f,width:RY,height:RY})),c.createElement(FY,{ref:b}))))):null};var YY=n(52589);const ZY=e=>{if(!(1===e.length))return!1;if(!(1===e[0].elements?.length))return!1;if(!e[0].elements[0].isDefaultBackground)return!1;const t=e[0].pageAttachment?.url;if(t)return!1;return!!(0,u.shallowEqual)(Mn.DEFAULT_PAGE_BACKGROUND_COLOR.color,e[0].backgroundColor.color)},WY=(0,p.default)(XB).withConfig({displayName:"emptyStateLayer__DisplayPageArea",componentId:"sc-1ypjr32-0"})(["position:absolute;z-index:1;"]),VY=p.default.div.withConfig({displayName:"emptyStateLayer__EmptyStateMessage",componentId:"sc-1ypjr32-1"})(["display:flex;flex-direction:column;align-items:center;padding:20px;text-align:center;svg{pointer-events:none;}p{margin-top:14px;}"]),$Y=(0,p.default)(m.Button).withConfig({displayName:"emptyStateLayer__StyledButton",componentId:"sc-1ypjr32-2"})(["pointer-events:initial;"]);const qY=function EmptyStateLayer(){const{isRTL:e}=U(),{isMenuOpen:t,onOpenMenu:n}=kc((e=>{let{isMenuOpen:t,onOpenMenu:n}=e;return{isMenuOpen:t,onOpenMenu:n}})),{pages:r}=Qa((e=>{let{state:{pages:t}}=e;return{pages:t}})),{isAnythingTransforming:a}=(0,I.useTransform)((e=>({isAnythingTransforming:e.state.isAnythingTransforming})));return!ZY(r)||a?null:c.createElement(BB,{onContextMenu:n,pointerEvents:"none","aria-label":(0,d.__)("Empty state layer","web-stories")},c.createElement(WY,{withSafezone:!1},c.createElement(VY,null,c.createElement($Y,{type:g.BUTTON_TYPES.SECONDARY,variant:g.BUTTON_VARIANTS.CIRCLE,onClick:t=>{const r=t.target.getBoundingClientRect();t.clientX=r.left-(e?-1:1)*YY.CONTEXT_MENU_MIN_WIDTH/2+r.width/2;t.clientY=r.top-132+r.height,n(t)},"aria-haspopup":"true","aria-label":(0,d.__)("Add content","web-stories"),"aria-describedby":"emptystate-message","aria-expanded":t},c.createElement(DE,null)),c.createElement(p.ThemeProvider,{theme:{...f.theme,colors:h.light}},c.createElement(Ke.Text,{id:"emptystate-message",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Add an image, video or template to get started","web-stories"))))))};const KY=function(e){const[t,n]=(0,u.useState)(null),[r,a]=(0,u.useState)(null),[o,i]=(0,u.useState)(null),[l,s]=(0,u.useState)(null),[c,d]=(0,u.useState)(null),[p,m]=(0,u.useState)(null),[g,f]=(0,u.useState)(null),[h,b]=(0,u.useState)(!1),E=(0,u.useRef)(!1);(0,u.useEffect)((()=>{g&&(E.current||(h?g.pause():(g.currentTime=r/1e3,g.play().catch((()=>{})))))}),[g,h,r]);const y=g?g.paused:null;(0,u.useEffect)((()=>{h||(E.current=y)}),[y,h]),(0,u.useEffect)((()=>{e||(a(null),i(null),n(null),s(null),d(null),m(null))}),[e]),(0,u.useEffect)((()=>{if(g&&e)return isFinite(g.duration)&&null===r?o({target:g}):isFinite(g.duration)?g.addEventListener("loadedmetadata",o):(g.currentTime=Number.MAX_SAFE_INTEGER,g.addEventListener("timeupdate",o)),l&&g.addEventListener("timeupdate",c),()=>{g.removeEventListener("timeupdate",c),g.removeEventListener("timeupdate",o),g.removeEventListener("loadedmetadata",o)};function t(e){g.currentTime=e/1e3,g.play().catch((()=>{}))}function o(r){if(!isFinite(r.target.duration))return;const o=Math.floor(1e3*r.target.duration);a(e.start),i(e.start),n(e.start),s(e.end??o),d(e.end??o),m(o),t(e.start)}function c(e){if(!l)return;const a=Math.floor(1e3*e.target.currentTime);n(Math.min(a,l)),a>l&&!E.current&&t(r)}}),[r,l,e,g]);const _=(0,u.useCallback)((e=>{e=Math.min(l-100,e),e=Math.max(0,e),a(e),g.currentTime=e/1e3}),[g,l]),v=(0,u.useCallback)((e=>{e=Math.max(r+100,e),e=Math.min(p,e),s(e),g.currentTime=e/1e3}),[g,r,p]);return{hasChanged:(0,u.useMemo)((()=>r!==o||l!==c),[r,o,l,c]),currentTime:t,startOffset:r,endOffset:l,maxOffset:p,videoNode:g,setStartOffset:_,setEndOffset:v,setVideoNode:f,setIsDraggingHandles:b}};const XY=function VideoRecordingTrimProvider(e){let{children:t,onTrim:n,videoData:r}=e;const{hasChanged:a,currentTime:o,startOffset:i,endOffset:l,maxOffset:s,videoNode:d,setStartOffset:p,setEndOffset:m,setVideoNode:g,setIsDraggingHandles:f}=KY(r),h=(0,u.useCallback)((()=>{n({start:i,end:l}),(0,P.trackEvent)("recording_video_trim",{start_offset:i,end_offset:l})}),[l,i,n]),b={state:{videoData:r,hasChanged:a,isTrimMode:!0,currentTime:o,startOffset:i,endOffset:l,maxOffset:s,videoNode:d},actions:{performTrim:h,setVideoNode:g,setStartOffset:p,setEndOffset:m,setIsDraggingHandles:f,toggleTrimMode:()=>n()}};return c.createElement(Pv.Provider,{value:b},t)};Object.defineProperty(_.default,"name",{value:"stylisRTLPlugin"});const QY=(0,p.default)(XB).withConfig({displayName:"mediaRecordingLayer__DisplayPageArea",componentId:"sc-18wneqt-0"})(["position:absolute;"]),JY=(0,x.withOverlay)((0,p.default)(BB).withConfig({displayName:"mediaRecordingLayer__LayerWithGrayout",componentId:"sc-18wneqt-1"})(["background-color:",";z-index:",";"],(e=>{let{theme:t}=e;return t.colors.opacity.overlayExtraDark}),6)),eZ=(0,p.default)(KB).withConfig({displayName:"mediaRecordingLayer__StyledFooter",componentId:"sc-18wneqt-2"})(["display:flex;align-items:start;flex-direction:row;justify-content:center;z-index:",";"],6);const tZ=function MediaRecordingLayer(){const{isRTL:e}=U(),{status:t,audioInput:n,videoInput:r,hasVideo:a,isAdjustingTrim:o,trimData:i,originalMediaBlobUrl:l,duration:s,updateMediaDevices:m,getMediaStream:g,resetStream:f,onTrim:h}=Iv((e=>{let{state:t,actions:n}=e;return{status:t.status,audioInput:t.audioInput,videoInput:t.videoInput,hasVideo:t.hasVideo,isAdjustingTrim:t.isAdjustingTrim,trimData:t.trimData,originalMediaBlobUrl:t.originalMediaBlobUrl,duration:t.duration,updateMediaDevices:n.updateMediaDevices,getMediaStream:n.getMediaStream,resetStream:n.resetStream,onTrim:n.onTrim}})),b="ready"===t;(0,u.useEffect)((()=>{f(),g()}),[n,r,a]),(0,u.useEffect)((()=>{b&&m()}),[b,m]);const E=(0,u.useMemo)((()=>o?{element:{width:480*ee.FULLBLEED_RATIO,height:480,scale:1,focalX:50,focalY:50,flip:{}},resource:{src:l,length:s},...i}:null),[o,i,l,s]);return c.createElement(p.StyleSheetManager,{stylisPlugins:e?[_.default]:[]},c.createElement(XY,{onTrim:h,videoData:E},c.createElement(JY,{"aria-label":(0,d.__)("Media Recording layer","web-stories")},c.createElement(DB,null,c.createElement(xA,null)),c.createElement(QY,{withSafezone:!1,showOverflow:!0},c.createElement(dA,null)),c.createElement(eZ,{showOverflow:!0},o?c.createElement(EB,null):c.createElement(CA,null))),c.createElement(bA,null)))},nZ=p.default.section.attrs({"aria-label":(0,d.__)("Canvas","web-stories"),"data-fix-caret":!0}).withConfig({displayName:"canvasLayout__Background",componentId:"sc-1ciyn0c-0"})(["background-color:",";width:100%;height:100%;position:relative;user-select:none;"],(e=>{let{theme:t}=e;return t.colors.bg.primary}));const rZ=(0,u.memo)((function CanvasLayout(e){let{header:t,footer:n}=e;const r=Qs($s),a=Xs((e=>e.actions.setCanvasContainer)),o=(0,u.useRef)(null),i=(0,u.useCombinedRefs)(o,a,r);!function(e){const{setWorkspaceSize:t}=gs((e=>{let{actions:{setWorkspaceSize:t}}=e;return{setWorkspaceSize:t}})),n=AB();(0,u.useResizeEffect)(e,(e=>{let{width:r,height:a}=e;t({width:r,height:a,availableHeight:a-64-10-n-16})}),[t,n])}(o);const l=function(){const{pageWidth:e,pageHeight:t,pagePadding:n,viewportWidth:r,viewportHeight:a,hasPageNavigation:o,hasVerticalOverflow:i,hasHorizontalOverflow:l,scrollLeft:s,scrollTop:c}=gs((e=>{let{state:{pageWidth:t,pageHeight:n,pagePadding:r,viewportWidth:a,viewportHeight:o,hasPageNavigation:i,hasVerticalOverflow:l,hasHorizontalOverflow:s,scrollLeft:c,scrollTop:d}}=e;return{pageWidth:t,pageHeight:n,pagePadding:r,viewportWidth:a,viewportHeight:o,hasPageNavigation:i,hasVerticalOverflow:l,hasHorizontalOverflow:s,scrollLeft:c,scrollTop:d}})),d=e/ee.FULLBLEED_RATIO;return{"--page-nav-width":`${o?NB:0}px`,"--page-nav-gap":(o?20:0)+"px","--page-width-px":`${e}px`,"--page-height-px":`${t}px`,"--page-padding-px":`${n}px`,"--fullbleed-height-px":`${d}px`,"--viewport-width-px":`${r}px`,"--viewport-height-px":`${a}px`,"--overflow-x":l?"scroll":"visible","--overflow-y":i?"scroll":"visible","--scroll-left-px":-s+"px","--scroll-top-px":-c+"px"}}(),{pageWidth:s,pageHeight:d}=gs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{pageWidth:t,pageHeight:n}})),{isInRecordingMode:m}=Iv((e=>{let{state:{isInRecordingMode:t}}=e;return{isInRecordingMode:t}})),g=(0,C.useFeature)("floatingMenu"),f=0!==s&&0!==d;return c.createElement(p.StyleSheetManager,{stylisPlugins:[]},c.createElement(jM,null,c.createElement(nZ,{ref:i,style:l},c.createElement(kY,null,c.createElement(PY,null,c.createElement(xY,null,f&&!m&&c.createElement(gH,null),f&&!m&&c.createElement(lU,null),c.createElement(vY,{header:t,footer:n})),c.createElement(wF,null),!m&&c.createElement(c.Fragment,null,c.createElement(GY,null),c.createElement(qY,null),g&&c.createElement(JD,null)),m&&c.createElement(tZ,null))))))}));const aZ=function Canvas(e){let{header:t,footer:n}=e;return c.createElement(rZ,{header:t,footer:n})},oZ=24;const iZ=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=ks(),n=Ed(),{setSelectedElementsById:r}=Qa((e=>{let{actions:{setSelectedElementsById:t}}=e;return{setSelectedElementsById:t}})),a=(0,u.useBatchingCallback)((async function(a){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;const i=(0,Kr.getHTMLFormatters)(),{setColor:l}=i,s=[],c=a.some((e=>e.content?.includes("color:")));let d=[],u=null;const p={r:255,g:255,b:255},m={r:0,g:0,b:0},g={...p,a:.3},f={...m,a:.3};let h,b,E;if(o&&!c){d=await Promise.all(a.map((e=>"text"===e.type?n(e):null))),u=d.find((e=>e));const e=d.every((e=>null===e||e.color?.r===u.color?.r&&e.color?.g===u.color?.g&&e.color?.b===u.color?.b&&e.color?.a===u.color?.a));b=d.reduce(((e,t)=>t?.backgroundColor?e+1:e),0);const r=d.reduce(((e,t)=>0===t?.backgroundColor?.r&&0===t?.backgroundColor?.g&&0===t?.backgroundColor?.b?e+1:e),0);if(h=b-r>0?f:g,E=b>0||!1===e,E){const{textSetHeight:e,textSetWidth:n}=a[0],r=e=>Math.min.apply(null,a.map((t=>t[e]))),o=r("x"),i=r("y"),l={x:o-oZ,y:i-oZ,width:n+48,height:e+48,backgroundColor:{color:h},type:"shape"};s.push(t(Mn.ELEMENT_TYPES.SHAPE,l))}}a.forEach(((e,n)=>{const r=vn(e,["id","normalizedOffsetX","normalizedOffsetY","textSetWidth","textSetHeight"]);if(o&&!c){const t=0===h.r?p:m,a=E?{color:t}:d[n];"text"===e.type&&a.color&&(r.content=l(r.content,a)),"shape"===e.type&&u.color&&(e.border?r.border.color=u:r.backgroundColor=u)}s.push(t(e.type,r))})),r({elementIds:s.map((e=>{let{id:t}=e;return t}))})}),[n,e,t,r]),o=(0,u.useCallback)(((e,t)=>{let{offsetX:n,offsetY:r}=t;if(!e.length)return;const o=e.map((e=>{const t=e.normalizedOffsetX+n,a=e.normalizedOffsetY+r,{width:o,height:i}=e;return t>ee.PAGE_WIDTH||t+o<0||a>ee.FULLBLEED_HEIGHT||a+i<-ee.DANGER_ZONE_HEIGHT?null:{...e,x:t,y:a}})).filter((e=>e));a(o,!1)}),[a]);return{insertTextSet:a,insertTextSetByOffset:o}};const lZ=function(e){if(!e)return 0;const t=e.split(":");if(3!==t.length)return 0;const n=parseFloat(t[2])+60*parseInt(t[1])+3600*parseInt(t[0]);return Math.round(1e3*n)};const sZ=function(){const{isEditing:e,isTrimMode:t,setEditingElementWithState:n,clearEditing:r}=Xs((e=>{let{state:{isEditing:t,editingElementState:{isTrimMode:n}={}},actions:{setEditingElementWithState:r,clearEditing:a}}=e;return{isEditing:t,isTrimMode:n,setEditingElementWithState:r,clearEditing:a}})),{selectedElement:a}=Qa((e=>{let{state:{selectedElements:t}}=e;return{selectedElement:1===t.length?t[0]:null}})),{actions:{getMediaById:o}}=W(),[i,l]=(0,u.useState)(null),{isCurrentResourceUploading:s}=Yl((e=>{let{state:{isCurrentResourceUploading:t}}=e;return{isCurrentResourceUploading:t}})),c=(0,u.useCallback)((()=>{const{resource:e}=a,{trimData:t}=e,n={element:a,resource:e,start:0,end:null};o&&t?.original?(l(null),o(t.original).then((e=>({element:a,resource:e,start:lZ(t.start),end:lZ(t.end)})),(()=>n)).then((e=>l(e)))):l(n)}),[o,a]),d=(0,u.useCallback)((()=>{e?r():(n(a.id,{isTrimMode:!0,hasEditMenu:!0,showOverflow:!1}),c()),(0,P.trackEvent)("video_trim_mode_toggled",{status:e?"closed":"open"})}),[e,r,n,a,c]),{isTranscodingEnabled:p}=lo(),m=(0,u.useMemo)((()=>{if("video"!==a?.type||!a?.resource)return!1;const{id:e,isExternal:t}=a.resource;return p&&!t&&!s(e)}),[a,p,s]);return{isTrimMode:Boolean(e&&t),hasTrimMode:m,toggleTrimMode:d,videoData:i}};const cZ=function VideoTrimProvider(e){let{children:t}=e;const{trimExistingVideo:n}=Yl((e=>{let{actions:{trimExistingVideo:t}}=e;return{trimExistingVideo:t}})),{isTrimMode:r,hasTrimMode:a,toggleTrimMode:o,videoData:i}=sZ(),{hasChanged:l,currentTime:s,startOffset:d,endOffset:p,maxOffset:m,videoNode:g,setStartOffset:f,setEndOffset:h,setVideoNode:b,setIsDraggingHandles:E}=KY(i),y=(0,u.useCallback)((()=>{const{resource:e,element:t}=i;if(!e)return;const r=Math.round(p/1e3-d/1e3);n({resource:{...e,length:r,lengthFormatted:oe(r)},canvasResourceId:t.resource.id,elementId:t.id,start:mA(d),end:mA(p)}),(0,P.trackEvent)("video_trim",{original_length:e.length,new_length:r,start_offset:d,end_offset:p}),o()}),[p,d,n,o,i]),_={state:{videoData:i,hasChanged:l,isTrimMode:r,hasTrimMode:a,currentTime:s,startOffset:d,endOffset:p,maxOffset:m,videoNode:g},actions:{performTrim:y,toggleTrimMode:o,setVideoNode:b,setStartOffset:f,setEndOffset:h,setIsDraggingHandles:E}};return c.createElement(Pv.Provider,{value:_},t)},dZ=p.default.div.withConfig({displayName:"layout__Area",componentId:"sc-1encx56-0"})(["grid-area:",";position:relative;overflow:hidden;z-index:",";"],(e=>{let{area:t}=e;return t}),(e=>{let{zIndex:t}=e;return t})),uZ=(0,p.default)(dZ).attrs({area:"canv",zIndex:1}).withConfig({displayName:"layout__CanvasArea",componentId:"sc-1encx56-1"})([""]),pZ=(0,p.default)(dZ).attrs({area:"sidebar",zIndex:2}).withConfig({displayName:"layout__SidebarArea",componentId:"sc-1encx56-2"})([""]);const mZ=function Workspace(e){let{header:t,footer:n}=e;const{editingElementState:r}=Xs((e=>({editingElementState:e.state.editingElementState})));return c.createElement(cZ,null,c.createElement(Kr.RichTextProvider,{editingState:r},c.createElement(pZ,null,c.createElement(B,null,c.createElement(ug,null))),c.createElement(uZ,null,c.createElement(B,null,c.createElement(aZ,{header:t,footer:n})))))},gZ="OPEN_MENU",fZ="CLOSE_MENU",hZ="RESET",bZ={isMenuOpen:!1,menuPosition:{x:0,y:0}};const EZ=function(e,t){switch(t.type){case fZ:return{...e,isMenuOpen:!1,menuPosition:bZ.menuPosition};case gZ:return{...e,isMenuOpen:!0,menuPosition:t.payload};case hZ:return{...bZ};default:return e}};const yZ=function(e){let{pushUpdate:t}=e;PI(qL,[]);const n=Qa((e=>{let{state:{selectedElements:t}}=e;return t?t?.filter((e=>{let{type:t}=e;return"text"===t})):ze})),r=(0,u.useRef)(null),a=(0,u.useCallback)((e=>{const n=r.current||{};r.current=null,t((t=>({...e(t),...n})),!0)}),[t]),{handlers:{handleSetColor:o,handleSetLetterSpacing:i,handleClickUnderline:l,handleClickItalic:s,handleSelectFontWeight:c}}=fL(n,a),d=(0,u.useCallback)((e=>{const{color:t,fontWeight:n,isItalic:a,isUnderline:d,letterSpacing:u,...p}=e;r.current=p,o(t),i(u),c(n),l(d),s(a)}),[o,i,l,s,c]);return d},_Z=(0,$e.default)(
/* translators: %s: Ctrl/Cmd + Z keyboard shortcut */
(0,d.__)("Press %s to undo the last change","web-stories"),(0,Ir.prettifyShortcut)("mod+z"));const vZ=()=>{const e=Br((e=>{let{actions:t}=e;return t.undo})),{addAnimations:t,copySelectedElement:n,copiedElementState:r,selectedElement:a,selectedElementType:o,selectedElementAnimations:i,updateSelectedElements:l,isSelectedElementBackground:s}=Qa((e=>{let{state:t,actions:n}=e;return{addAnimations:n.addAnimations,copiedElementState:t.copiedElementState,copySelectedElement:n.copySelectedElement,selectedElement:t.selectedElements?.[0],selectedElementType:t.selectedElements?.[0]?.type,isSelectedElementBackground:t.selectedElements?.[0]?.isBackground,selectedElementAnimations:t.selectedElementAnimations,updateSelectedElements:n.updateSelectedElements}})),c=(0,jr.useSnackbar)((e=>e.showSnackbar)),p=(0,u.useRef)(e);p.current=e;const m=(0,u.useCallback)((()=>{n(),c({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Copied style.","web-stories"),onAction:()=>{p.current(),(0,P.trackEvent)("context_menu_action",{name:"undo_copy_styles",element:o,isBackground:s})},actionHelpText:_Z}),(0,P.trackEvent)("context_menu_action",{name:"copy_styles",element:o,isBackground:s})}),[n,c,o,s]),g=(0,u.useCallback)(((e,t)=>{l({properties:n=>{const r=_v(n,e,t),a=qL({...n,...r});return{...r,...a}}})}),[l]),f=yZ({pushUpdate:g}),h=(0,u.useCallback)((()=>{const e=a?.id;if(!e||o!==r.type)return;const n=i.length?{...i[0],delete:!0}:void 0,u=r.animations.map((e=>({...e,id:(0,pe.default)(),targets:[a.id]})));if(t({animations:u}),"text"===r.type&&r.styles.content){const e=function(e,t){const{textStyles:n}=QT([e.styles],{textStyles:[],colors:[]},Ue),{colors:r}=QT([e.styles],{textStyles:[],colors:[]},je),{content:a,...o}=e.styles;return{...o,...n[0],...r[0].color,animation:t,border:o.border||null}}(r,n);f(e)}else l({properties:e=>_v(e,{...r.styles,animation:n},!0)});c({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Pasted style.","web-stories"),onAction:()=>{p.current(),(0,P.trackEvent)("context_menu_action",{name:"undo_paste_styles",element:o,isBackground:s})},actionHelpText:_Z}),(0,P.trackEvent)("context_menu_action",{name:"paste_styles",element:o,isBackground:s})}),[t,r,f,a,i,c,l,o,s]);return{copiedElementType:r?.type,handleCopyStyles:m,handlePasteStyles:h}},wZ=()=>{const{clearBackgroundElement:e,duplicateElementsById:t,selectedElements:n,setBackgroundElement:r,updateElementsById:a,deleteGroupById:o,addGroup:i,groups:l,elements:s,arrangeElement:c}=Qa((e=>{let{state:t,actions:n}=e;return{clearBackgroundElement:n.clearBackgroundElement,duplicateElementsById:n.duplicateElementsById,selectedElements:t.selectedElements,setBackgroundElement:n.setBackgroundElement,updateElementsById:n.updateElementsById,addGroup:n.addGroup,deleteGroupById:n.deleteGroupById,groups:t.currentPage.groups,elements:t.currentPage?.elements||[],arrangeElement:n.arrangeElement}})),p=(0,jr.useSnackbar)((e=>e.showSnackbar)),m=Xs((e=>{let{actions:t}=e;return t.setEditingElement})),g=Br((e=>{let{actions:t}=e;return t.undo})),f=(0,u.useRef)(g);f.current=g;return{handleDuplicateSelectedElements:(0,u.useCallback)((()=>{n.length&&(t({elementIds:n.map((e=>{let{id:t}=e;return t}))}),p({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Duplicated elements.","web-stories"),onAction:()=>{f.current(),(0,P.trackEvent)("context_menu_action",{name:"undo_duplicate_elements",elements:n.map((e=>e.type))})},actionHelpText:_Z}),(0,P.trackEvent)("context_menu_action",{name:"duplicate_elements",elements:n.map((e=>e.type))}))}),[t,n,p]),handleGroupSelectedElements:(0,u.useCallback)((()=>{if(!n.length)return;const e=(0,pe.default)(),t=Ss(l);i({groupId:e,name:t}),a({elementIds:n.map((e=>{let{id:t}=e;return t})),properties:t=>_v(t,{groupId:e},!0)});const r=Math.max(...n.map((e=>s.findIndex((t=>{let{id:n}=t;return n===e?.id})))));for(const[e,t]of n.reverse().entries()){if(s.findIndex((e=>{let{id:n}=e;return n===t?.id}))!==r){const n=r-e;c({elementId:t.id,position:n})}}}),[n,a,i,l,c,s]),handleUngroupSelectedElements:(0,u.useCallback)((()=>{n.length&&(o({groupId:n[0]?.groupId}),a({elementIds:n.map((e=>{let{id:t}=e;return t})),properties:e=>_v(e,{groupId:null},!0)}))}),[n,a,o]),handleOpenScaleAndCrop:(0,u.useCallback)((e=>{const t=n?.[0];t&&(m(t.id,e),(0,P.trackEvent)("context_menu_action",{name:"open_scale_and_crop",element:t.type,isBackground:t.isBackground}))}),[n,m]),handleSetPageBackground:(0,u.useCallback)((()=>{const e=n?.[0];e&&!e.isBackground&&(r({elementId:e.id}),p({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Set page background.","web-stories"),onAction:()=>{f.current(),(0,P.trackEvent)("context_menu_action",{name:"undo_set_page_background",element:e.type,isBackground:e.isBackground})},actionHelpText:_Z}),(0,P.trackEvent)("context_menu_action",{name:"set_as_page_background",element:e.type,isBackground:e.isBackground}))}),[n,r,p]),handleRemovePageBackground:(0,u.useCallback)((()=>{const t=n?.[0];t&&t.isBackground&&(a({elementIds:[t.id],properties:e=>_v(e,{isBackground:!1,opacity:100,overlay:null},!0)}),e(),p({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)("Removed page background.","web-stories"),onAction:()=>{f.current(),(0,P.trackEvent)("context_menu_action",{name:"undo_remove_page_background",elements:t.type,isBackground:t.isBackground})},actionHelpText:_Z}),(0,P.trackEvent)("context_menu_action",{name:"remove_media_from_background",element:t.type,isBackground:t.isBackground}))}),[e,n,p,a])}},TZ=()=>{const{arrangeElement:e,elements:t,selectedElement:n}=Qa((e=>{let{state:t,actions:n}=e;return{arrangeElement:n.arrangeElement,elements:t.currentPage?.elements||[],selectedElement:t.selectedElements?.[0]}})),r=t.findIndex((e=>{let{id:t}=e;return t===n?.id})),a=n&&!n.isBackground&&r>1,o=n&&!n.isBackground&&r<t.length-1,i=(0,u.useCallback)((()=>{if(!a)return;const o=t.findLastIndex(((e,t)=>t<r&&!e.groupId)),i=1===r?r:o;e({elementId:n.id,position:i}),(0,P.trackEvent)("context_menu_action",{name:"send_backward",element:n.type,isBackground:n.isBackground})}),[e,a,r,n,t]),l=(0,u.useCallback)((()=>{a&&(e({elementId:n.id,position:1}),(0,P.trackEvent)("context_menu_action",{name:"send_to_back",element:n.type}))}),[e,a,n]),s=(0,u.useCallback)((()=>{if(!o)return;const a=t.findIndex(((e,n)=>n>r&&!e.groupId||n===t.length-1)),i=r>=t.length-1?r:a;e({elementId:n.id,position:i}),(0,P.trackEvent)("context_menu_action",{name:"bring_forward",element:n.type})}),[e,o,r,t,n]),c=(0,u.useCallback)((()=>{o&&(e({elementId:n.id,position:t.length-1}),(0,P.trackEvent)("context_menu_action",{name:"bring_to_front",element:n.type}))}),[e,o,t,n]);return{canElementMoveBackwards:a,canElementMoveForwards:o,handleBringForward:s,handleBringToFront:c,handleSendBackward:i,handleSendToBack:l}},SZ=()=>{const{addPageAt:e,currentPage:t,deleteCurrentPage:n,isSelectedElementBackground:r,pageLength:a,selectedElementType:o}=Qa((e=>{let{state:t,actions:n}=e;return{addPageAt:n.addPageAt,currentPage:t.currentPage,deleteCurrentPage:n.deleteCurrentPage,isSelectedElementBackground:t.selectedElements?.[0]?.background||!1,pageLength:t.pages?.length||1,selectedElementType:t.selectedElements?.[0]?.type||null}}));return{handleAddPageAtPosition:(0,u.useCallback)((t=>{let n=Boolean(t)||0===t?t:a-1;n=n>a?a-1:n,n=n<0?0:n,e({page:(0,Mn.createPage)(),position:n}),(0,P.trackEvent)("context_menu_action",{name:"page_added",element:o,isBackground:r})}),[e,r,a,o]),handleDuplicatePage:(0,u.useCallback)((()=>{e({page:(0,Mn.duplicatePage)(t),position:null})}),[e,t]),handleDeletePage:(0,u.useCallback)((()=>{n(),(0,P.trackEvent)("context_menu_action",{name:"page_deleted",element:o,isBackground:r})}),[n,r,o])}};const CZ=function(e){let{onEmpty:t}=e;const{globalStoryStyles:n,updateStory:r}=Qa((e=>{let{state:{story:{globalStoryStyles:t}},actions:{updateStory:n}}=e;return{globalStoryStyles:t,updateStory:n}})),{textStyles:a}=n||{},o=(0,u.useCallback)((e=>{const o=a.filter((t=>t!==e));r({properties:{globalStoryStyles:{...n,textStyles:o}}}),0===o.length&&t()}),[a,r,n,t]);return o},IZ=()=>{const{addGlobalPreset:e}=tS({presetType:Ue}),{addGlobalPreset:t}=tS({presetType:je}),n=CZ({onEmpty:Bt}),{deleteGlobalColor:r}=fS({onEmpty:Bt}),a=Qa((e=>{let{state:t}=e;return t.selectedElements?.[0]})),o=(0,jr.useSnackbar)((e=>e.showSnackbar)),i=Br((e=>{let{actions:t}=e;return t.undo}));(0,u.useRef)(i).current=i;return{handleAddTextPreset:(0,u.useCallback)((t=>{const r=e(t);o({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)('Saved style to "Saved Styles".',"web-stories"),onAction:()=>{n(r),(0,P.trackEvent)("context_menu_action",{name:"remove_text_preset",element:a?.type})},actionHelpText:_Z}),(0,P.trackEvent)("context_menu_action",{name:"add_text_preset",element:a?.type})}),[e,n,a?.type,o]),handleAddColorPreset:(0,u.useCallback)((e=>{const n=t(e);o({actionLabel:(0,d.__)("Undo","web-stories"),dismissible:!1,message:(0,d.__)('Added color to "Saved Colors".',"web-stories"),onAction:()=>{r(n),(0,P.trackEvent)("context_menu_action",{name:"remove_color_preset",element:a?.type})},actionHelpText:_Z}),(0,P.trackEvent)("context_menu_action",{name:"add_color_preset",element:a?.type})}),[t,r,a?.type,o])}};const xZ=function RightClickMenuProvider(e){let{children:t}=e;const[{isMenuOpen:n,menuPosition:r},a]=(0,u.useReducer)(EZ,bZ),{handleCopyStyles:o,handlePasteStyles:i}=vZ(),l=(0,u.useCallback)((e=>{e.preventDefault(),e.stopPropagation();let t=e?.clientX,n=e?.clientY;if(!t&&!n){const r=e.target.getBoundingClientRect();t=r.x,n=r.y}a({type:gZ,payload:{x:t,y:n}}),(0,P.trackEvent)("context_menu_action",{name:"context_menu_opened"})}),[]),s=(0,u.useCallback)((()=>{n&&a({type:fZ})}),[n]);(0,Ir.useGlobalKeyDownEffect)({key:["mod+alt+o"]},(e=>{e.preventDefault(),o()}),[o]),(0,Ir.useGlobalKeyDownEffect)({key:["mod+alt+p"]},(e=>{e.preventDefault(),i()}),[i]);const d=(0,u.useMemo)((()=>({isMenuOpen:n,menuPosition:r,onCloseMenu:s,onOpenMenu:l})),[s,l,n,r]);return c.createElement(Ac.Provider,{value:d},t)};var AZ=n(8682);const kZ=(0,p.default)(Ke.Text).attrs({forwardedAs:"kbd",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"shortcut__StyledText",componentId:"sc-74dfi9-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const OZ=function Shortcut(e){return c.createElement(kZ,e)},PZ=p.default.div.withConfig({displayName:"suffix__Suffix",componentId:"sc-1l1uahg-0"})(["position:relative;svg{width:32px;color:",";position:absolute;right:-14px;top:-16px;}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),NZ=PZ;function RZ(){return RZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RZ.apply(this,arguments)}const MZ=(0,p.default)(tL.default).withConfig({displayName:"item__StyledButton",componentId:"sc-p2jje0-0"})(["",""],(e=>{let{supportsIcon:t}=e;return t&&"\n    svg {\n      width: 32px;\n      position: absolute;\n      margin-left: -12px;\n    }\n    span {\n      padding-left: 18px;\n      font-size: 12px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  "}));const LZ=(0,u.forwardRef)((function MenuItemWithRef(e,t){let{label:n,shortcut:r,icon:a,SuffixIcon:o,...i}=e;return c.createElement(MZ,RZ({ref:t},i),a,n,r&&c.createElement(OZ,null,r.display),o&&c.createElement(NZ,null,c.createElement(o,null)))}));LZ.propTypes={label:za().oneOfType([za().string,za().object]),shortcut:za().shape({display:za().object.isRequired,title:za().string}),icon:za().node,SuffixIcon:za().object};const DZ=LZ;function BZ(){return BZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BZ.apply(this,arguments)}const FZ=function SubMenuTrigger(e){let{openSubMenu:t,closeSubMenu:n,isSubMenuOpen:r,isRTL:a=!1,subMenuRef:o,parentMenuRef:i,...l}=e;const s=(0,u.useRef)(),d=(0,u.useRef)({}),{setFocusedId:p}=(0,AZ.default)((e=>{let{actions:t}=e;return{setFocusedId:t.setFocusedId}})),m=e=>{const{x:t,y:n,width:r,height:a}=e.getBoundingClientRect(),{x:o,y:i}=d.current;if(void 0===o||void 0===i)return!0;return o<t-2||o>t+r+2||i<n-2||i>n+a+2},g=(0,u.useDebouncedCallback)((()=>{s.current&&o.current?.firstChild&&m(s.current)&&m(o.current.firstChild)&&n()}),200);(0,u.useEffect)((()=>{if(r&&o.current){const t=(e=o.current,Array.from(e.querySelectorAll(tc.FOCUSABLE_SELECTORS.join(", "))));t[0].focus(),p(t[0].id)}var e}),[r,o,p]),(0,u.useEffect)((()=>{const e=i.current?.querySelector('[role="dialog"]');if(!r||!e)return;const t=e=>{d.current.x=e.clientX,d.current.y=e.clientY,g()};return e.addEventListener("pointermove",t),()=>{e.removeEventListener("pointermove",t)}}),[r,i,g]);const f=(0,u.useCallback)((e=>{const{code:o}=e;[tc.KEYS.SPACE,tc.KEYS.ENTER].includes(o)?r?n():t():(!a&&tc.KEYS.RIGHT===o||(a&&tc.KEYS.LEFT)===o)&&(r||t())}),[t,n,r,a]);return(0,Ir.useKeyDownEffect)(s,{key:["enter","space","left","right"]},f,[f]),c.createElement(DZ,BZ({},l,{ref:s,onPointerEnter:t,onPointerLeave:()=>{d.current={},g()},onClick:e=>e.preventDefault(),"aria-haspopup":!0,"aria-expanded":r,dismissOnClick:!1}))},HZ={ADD_NEW_PAGE_AFTER:(0,d.__)("Add New Page After","web-stories"),ADD_NEW_PAGE_BEFORE:(0,d.__)("Add New Page Before","web-stories"),ADD_TO_COLOR_PRESETS:(0,d.__)("Add Color to “Saved Colors”","web-stories"),ADD_TO_TEXT_PRESETS:(0,d.__)("Add Style to “Saved Styles”","web-stories"),BRING_FORWARD:(0,d.__)("Bring Forward","web-stories"),BRING_TO_FRONT:(0,d.__)("Bring to Front","web-stories"),BROWSE_STOCK_IMAGES_AND_VIDEO:(0,d.__)("Browse Stock Images and Video","web-stories"),BROWSE_PAGE_TEMPLATES:(0,d.__)("Browse Page Templates","web-stories"),CLEAR_IMAGE_STYLES:(0,d.__)("Clear Image Styles","web-stories"),CLEAR_SHAPE_STYLES:(0,d.__)("Clear Shape Styles","web-stories"),CLEAR_VIDEO_STYLES:(0,d.__)("Clear Video Styles","web-stories"),CHOOSE_IMAGE_OR_VIDEO:(0,d.__)("Choose Image or Video","web-stories"),COPY_IMAGE_STYLES:(0,d.__)("Copy Image Styles","web-stories"),COPY_SHAPE_STYLES:(0,d.__)("Copy Shape Styles","web-stories"),COPY_VIDEO_STYLES:(0,d.__)("Copy Video Styles","web-stories"),COPY_STYLES:(0,d.__)("Copy Style","web-stories"),DELETE_PAGE:(0,d.__)("Delete Page","web-stories"),DETACH_IMAGE_FROM_BACKGROUND:(0,d.__)("Detach Image From Background","web-stories"),DETACH_VIDEO_FROM_BACKGROUND:(0,d.__)("Detach Video From Background","web-stories"),DUPLICATE_PAGE:(0,d.__)("Duplicate Page","web-stories"),DUPLICATE_ELEMENTS:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,d._n)("Duplicate Element","Duplicate Elements",e,"web-stories")},GROUP_LAYERS:(0,d.__)("Group Layers","web-stories"),UNGROUP_LAYERS:(0,d.__)("Ungroup Layers","web-stories"),UNGROUP_LAYER:(0,d.__)("Remove from Group","web-stories"),LOCK_UNLOCK:(0,d.__)("Lock/Unlock","web-stories"),RENAME_LAYER:(0,d.__)("Rename Layer","web-stories"),PASTE_IMAGE_STYLES:(0,d.__)("Paste Image Styles","web-stories"),PASTE_SHAPE_STYLES:(0,d.__)("Paste Shape Styles","web-stories"),PASTE_VIDEO_STYLES:(0,d.__)("Paste Video Styles","web-stories"),PASTE_STYLES:(0,d.__)("Paste Style","web-stories"),SCALE_AND_CROP_BACKGROUND_IMAGE:(0,d.__)("Scale & Crop Background Image","web-stories"),SCALE_AND_CROP_BACKGROUND_VIDEO:(0,d.__)("Scale & Crop Background Video","web-stories"),SCALE_AND_CROP_IMAGE:(0,d.__)("Scale & Crop Image","web-stories"),SCALE_AND_CROP_VIDEO:(0,d.__)("Scale & Crop Video","web-stories"),SEND_BACKWARD:(0,d.__)("Send Backward","web-stories"),SEND_TO_BACK:(0,d.__)("Send to Back","web-stories"),SET_AS_PAGE_BACKGROUND:(0,d.__)("Set as Page Background","web-stories"),TRIM_VIDEO:(0,d.__)("Trim Video","web-stories"),UPLOAD_IMAGE_OR_VIDEO:(0,d.__)("Upload Image or Video","web-stories"),USE_SHAPE_AS_MASK:(0,d.__)("Use Shape as a Mask","web-stories"),REMOVE_MASK:(0,d.__)("Unmask","web-stories"),RECORD_VIDEO:(0,d.__)("Record Video","web-stories"),HEADING_LEVEL:(0,d.__)("Heading Level","web-stories")},UZ=(0,p.default)(Ke.Text).attrs({forwardedAs:"kbd",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"constants__StyledKbd",componentId:"sc-m1qol5-0"})(["color:inherit;:not(:last-child){margin-right:4px;}"]),jZ={SEND_BACKWARD:{display:c.createElement(Ir.Shortcut,{shortcut:"mod down",component:UZ}),title:(0,Ir.createShortcutAriaLabel)("mod down")},SEND_TO_BACK:{display:c.createElement(Ir.Shortcut,{shortcut:"mod shift down",component:UZ}),title:(0,Ir.createShortcutAriaLabel)("mod shift down")},BRING_FORWARD:{display:c.createElement(Ir.Shortcut,{shortcut:"mod up",component:UZ}),title:(0,Ir.createShortcutAriaLabel)("mod up")},BRING_TO_FRONT:{display:c.createElement(Ir.Shortcut,{shortcut:"mod shift up",component:UZ}),title:(0,Ir.createShortcutAriaLabel)("mod shift up")},DELETE:{display:c.createElement(Ir.Shortcut,{shortcut:"delete",component:UZ}),title:(0,Ir.createShortcutAriaLabel)("delete")},COPY_STYLES:{display:c.createElement(Ir.Shortcut,{shortcut:"alt mod O",component:UZ}),title:(0,Ir.createShortcutAriaLabel)("alt mod O")},PASTE_STYLES:{display:c.createElement(Ir.Shortcut,{shortcut:"alt mod P",component:UZ}),title:(0,Ir.createShortcutAriaLabel)("alt mod P")}},zZ=(0,p.default)(yh).withConfig({displayName:"useLayerSelect__ReversedIcon",componentId:"sc-169lxcx-0"})(["transform:rotate(180deg);"]);const GZ=function(e){let{menuItemProps:t,menuPosition:n,isMenuOpen:r}=e;const{isRTL:a}=U(),[o,i]=(0,u.useState)(!1),l=Xs((e=>{let{state:{nodesById:t}}=e;return t})),{currentPage:s,selectedElements:p,setSelectedElementsById:m}=Qa((e=>{let{state:{currentPage:t,selectedElements:n},actions:{setSelectedElementsById:r}}=e;return{currentPage:t,selectedElements:n,setSelectedElementsById:r}})),g=lF();(0,u.useEffect)((()=>{r||i(!1)}),[r]);const{x:f,y:h}=n,b=(0,u.useCallback)((()=>{if(!s?.elements?.length||!Object.keys(l)?.length)return[];const e=new(iF().Vector)(f,h),t=s.elements.map((e=>({element:e,polygon:g(e)}))).map((t=>{let{element:n,polygon:r}=t;return iF().pointInPolygon(e,r)?n:null})).filter(Boolean);return t.reverse(),t}),[s,f,h,l,g]),E=(0,u.useMemo)((()=>{if(!r||0===p.length)return[];const e=b();return 1===e.length&&e[0].id===p[0].id?[]:e.map((e=>{const{id:n,isBackground:r,type:a}=e;return{key:n,supportsIcon:!0,icon:p[0].id===n?c.createElement(hh.default,null):null,label:c.createElement("span",null,(0,Mn.getLayerName)(e)),onClick:()=>{m({elementIds:[n]}),(0,P.trackEvent)("context_menu_action",{name:"layer_selected",element:a,isBackground:r})},...t}}))}),[b,r,t,m,p]);return E.length>0?{label:(0,d.__)("Select Layer","web-stories"),openSubMenu:()=>i(!0),closeSubMenu:()=>i(!1),isSubMenuOpen:o,subMenuItems:o?E:[],SuffixIcon:a?zZ:yh,...t}:null};const YZ=function LayerLock(){const e=Qa((e=>e.actions.updateSelectedElements)),t=(0,u.useCallback)((()=>e({properties:e=>({...e,isLocked:!e.isLocked})})),[e]);return(0,C.useFeature)("layerLocking")?c.createElement(tL.default,{onClick:t},HZ.LOCK_UNLOCK):null};const ZZ=function LayerName(){const{selectedElementIds:e}=Qa((e=>{let{state:t}=e;return{selectedElementIds:t.selectedElementIds}})),{setRenamableLayer:t}=Xs((e=>{let{state:t,actions:n}=e;return{setRenamableLayer:n.setRenamableLayer,renamableLayer:t.renamableLayer}})),n=(0,u.useCallback)((()=>{t({elementId:e[0]})}),[t,e]);return(0,C.useFeature)("layerNaming")?c.createElement(c.Fragment,null,c.createElement(sL.default,null),c.createElement(tL.default,{onClick:n},HZ.RENAME_LAYER)):null};const WZ=function LayerUngroup(){const{selectedElements:e,removeElementFromGroup:t}=Qa((e=>{let{state:t,actions:n}=e;return{selectedElements:t.selectedElements,removeElementFromGroup:n.removeElementFromGroup}})),n=(0,u.useCallback)((()=>{t({elementId:e[0].id,groupId:e[0].groupId})}),[e,t]),r=(0,C.useFeature)("layerGrouping"),a=e.some((e=>e.groupId));return r&&a?c.createElement(tL.default,{onClick:n},HZ.UNGROUP_LAYER):null},VZ=p.default.div.withConfig({displayName:"shared__SubMenuContainer",componentId:"sc-anftx6-0"})(["position:absolute;top:","px;left:","px;z-index:9999;"],(e=>{let{position:t}=e;return t?.y??0}),(e=>{let{position:t}=e;return t?.x??0}));VZ.propTypes={position:za().shape({x:za().number,y:za().number})};const $Z=210,qZ=(0,d.__)("Select a layer","web-stories");za().oneOfType([za().func,za().shape({current:za().instanceOf(Element)})]).isRequired;function KZ(){return KZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KZ.apply(this,arguments)}const XZ=function ForegroundMediaMenu(e){let{parentMenuRef:t}=e;const{copiedElementType:n,selectedElement:r}=Qa((e=>{let{state:t}=e;return{copiedElementType:t.copiedElementState.type,selectedElement:t.selectedElements?.[0]}})),{handleCopyStyles:a,handlePasteStyles:o}=vZ(),{handleDuplicateSelectedElements:i,handleOpenScaleAndCrop:l,handleSetPageBackground:s}=wZ(),{canElementMoveBackwards:d,canElementMoveForwards:p,handleSendBackward:m,handleSendToBack:g,handleBringForward:f,handleBringToFront:h}=TZ(),{hasShapeMask:b,removeShapeMask:E}=Tj(r),y=Yl((e=>e.state.canTranscodeResource)),{hasTrimMode:_,toggleTrimMode:v}=Nv((e=>{let{state:t,actions:n}=e;return{hasTrimMode:t.hasTrimMode,toggleTrimMode:n.toggleTrimMode}})),w=(0,u.useRef)(),{menuPosition:T,onCloseMenu:S}=kc(),C=GZ({menuPosition:T,isMenuOpen:!0}),{closeSubMenu:I,isSubMenuOpen:x,subMenuItems:A,...k}=C||{},O="video"===r?.type,P=O?HZ.SCALE_AND_CROP_VIDEO:HZ.SCALE_AND_CROP_IMAGE,N=O?HZ.COPY_VIDEO_STYLES:HZ.COPY_IMAGE_STYLES,R=O?HZ.PASTE_VIDEO_STYLES:HZ.PASTE_IMAGE_STYLES,M=O&&_;return c.createElement(c.Fragment,null,C&&c.createElement(c.Fragment,null,c.createElement(FZ,KZ({closeSubMenu:I,parentMenuRef:t,subMenuRef:w,isSubMenuOpen:x},k)),c.createElement(VZ,{ref:w,position:{x:(t.current.firstChild?.offsetWidth||$Z)+2,y:0}},c.createElement(DM.default,{onDismiss:S,isOpen:x,onCloseSubMenu:I,"aria-label":qZ,isSubMenu:!0,parentMenuRef:t},A.map((e=>{let{key:t,...n}=e;return c.createElement(DZ,KZ({key:t},n))})))),c.createElement(sL.default,null)),c.createElement(tL.default,{onClick:i},HZ.DUPLICATE_ELEMENTS(1)),b&&c.createElement(tL.default,{onClick:E},HZ.REMOVE_MASK),c.createElement(sL.default,null),c.createElement(tL.default,{disabled:!d,onClick:m},HZ.SEND_BACKWARD,c.createElement(OZ,null,jZ.SEND_BACKWARD.display)),c.createElement(tL.default,{disabled:!d,onClick:g},HZ.SEND_TO_BACK,c.createElement(OZ,null,jZ.SEND_TO_BACK.display)),c.createElement(tL.default,{disabled:!p,onClick:f},HZ.BRING_FORWARD,c.createElement(OZ,null,jZ.BRING_FORWARD.display)),c.createElement(tL.default,{disabled:!p,onClick:h},HZ.BRING_TO_FRONT,c.createElement(OZ,null,jZ.BRING_TO_FRONT.display)),c.createElement(ZZ,null),c.createElement(YZ,null),c.createElement(WZ,null),c.createElement(sL.default,null),c.createElement(tL.default,{onClick:s},HZ.SET_AS_PAGE_BACKGROUND),c.createElement(tL.default,{onClick:l},P),M&&c.createElement(tL.default,{disabled:!y(r?.resource),onClick:v},HZ.TRIM_VIDEO),c.createElement(tL.default,{onClick:a},N,c.createElement(OZ,null,jZ.COPY_STYLES.display)),c.createElement(tL.default,{disabled:n!==r?.type,onClick:o},R,c.createElement(OZ,null,jZ.PASTE_STYLES.display)))},QZ=()=>{const{selectedElements:e,combineElements:t}=Qa((e=>{let{state:t,actions:n}=e;return{selectedElements:t.selectedElements,combineElements:n.combineElements}})),[n,r]=(0,u.useState)({}),[a,o]=(0,u.useState)(!1);(0,u.useEffect)((()=>{if(e?.length>2)return void o(!1);let t,n;if(e.forEach((e=>{const{isMedia:r}=(0,Mn.getDefinitionForType)(e.type);"shape"===e.type&&(n=e),r&&(t=e)})),n&&t)return o(!0),void r({shape:n,target:t});o(!1)}),[e]);return{canMergeIntoMask:a,mergeIntoMask:()=>{const{target:e,shape:r}=n;e&&r&&t({firstElement:e,secondId:r.id})}}};const JZ=function MultipleElementsMenu(){const{handleDuplicateSelectedElements:e,handleGroupSelectedElements:t,handleUngroupSelectedElements:n}=wZ(),{canMergeIntoMask:r,mergeIntoMask:a}=QZ(),o=(0,C.useFeature)("layerGrouping"),{selectedElements:i}=Qa((e=>{let{state:t}=e;return{selectedElements:t.selectedElements}})),l=i.some((e=>e.groupId)),s=i.every((e=>e.groupId&&e.groupId===i[0].groupId));return c.createElement(c.Fragment,null,c.createElement(tL.default,{onClick:e},HZ.DUPLICATE_ELEMENTS(2)),r&&c.createElement(tL.default,{onClick:a},HZ.USE_SHAPE_AS_MASK),o&&!s&&c.createElement(tL.default,{onClick:t},HZ.GROUP_LAYERS),o&&l&&c.createElement(tL.default,{onClick:n},HZ.UNGROUP_LAYERS))};function eW(){return eW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eW.apply(this,arguments)}const tW=function(e){let{parentMenuRef:t}=e;const{currentPageIndex:n,canDeletePage:r,selectedElement:a}=Qa((e=>{let{state:t}=e;return{currentPageIndex:t.currentPageIndex,canDeletePage:t.pages.length>1,selectedElement:t.selectedElements?.[0]}})),{handleOpenScaleAndCrop:o,handleRemovePageBackground:i}=wZ(),{handleAddPageAtPosition:l,handleDeletePage:s,handleDuplicatePage:d}=SZ(),p=Yl((e=>e.state.canTranscodeResource)),{hasTrimMode:m,toggleTrimMode:g}=Nv((e=>{let{state:t,actions:n}=e;return{hasTrimMode:t.hasTrimMode,toggleTrimMode:n.toggleTrimMode}})),f=(0,u.useRef)(),{menuPosition:h,onCloseMenu:b}=kc(),E=GZ({menuPosition:h,isMenuOpen:!0}),{closeSubMenu:y,isSubMenuOpen:_,subMenuItems:v,...w}=E||{},T=a?.isDefaultBackground,S="video"===a?.type,C=S?HZ.DETACH_VIDEO_FROM_BACKGROUND:HZ.DETACH_IMAGE_FROM_BACKGROUND,I=S?HZ.SCALE_AND_CROP_BACKGROUND_VIDEO:HZ.SCALE_AND_CROP_BACKGROUND_IMAGE,x=S&&m;return c.createElement(c.Fragment,null,E&&c.createElement(c.Fragment,null,c.createElement(FZ,eW({closeSubMenu:y,parentMenuRef:t,subMenuRef:f,isSubMenuOpen:_},w)),c.createElement(VZ,{ref:f,position:{x:(t.current.firstChild?.offsetWidth||$Z)+2,y:0}},c.createElement(DM.default,{onDismiss:b,isOpen:_,onCloseSubMenu:y,"aria-label":qZ,isSubMenu:!0,parentMenuRef:t},v.map((e=>{let{key:t,...n}=e;return c.createElement(DZ,eW({key:t},n))})))),c.createElement(sL.default,null)),c.createElement(tL.default,{disabled:T,onClick:i},C),c.createElement(tL.default,{disabled:T,onClick:o},I),c.createElement(sL.default,null),x&&c.createElement(c.Fragment,null,c.createElement(tL.default,{disabled:!p(a?.resource),onClick:g},C),c.createElement(sL.default,null)),c.createElement(tL.default,{onClick:()=>l(n+1)},HZ.ADD_NEW_PAGE_AFTER),c.createElement(tL.default,{onClick:()=>l(n)},HZ.ADD_NEW_PAGE_BEFORE),c.createElement(tL.default,{onClick:d},HZ.DUPLICATE_PAGE),c.createElement(tL.default,{disabled:!r,onClick:s},HZ.DELETE_PAGE))};function nW(){return nW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nW.apply(this,arguments)}const rW=function ShapeMenu(e){let{parentMenuRef:t}=e;const{copiedElementType:n,selectedElementType:r}=Qa((e=>{let{state:t}=e;return{copiedElementType:t.copiedElementState.type,selectedElementType:t.selectedElements?.[0].type}})),{handleCopyStyles:a,handlePasteStyles:o}=vZ(),{handleDuplicateSelectedElements:i}=wZ(),{canElementMoveBackwards:l,canElementMoveForwards:s,handleSendBackward:d,handleSendToBack:p,handleBringForward:m,handleBringToFront:g}=TZ(),{handleAddColorPreset:f}=IZ(),h=(0,u.useRef)(),{menuPosition:b,onCloseMenu:E}=kc(),y=GZ({menuPosition:b,isMenuOpen:!0}),{closeSubMenu:_,isSubMenuOpen:v,subMenuItems:w,...T}=y||{};return c.createElement(c.Fragment,null,y&&c.createElement(c.Fragment,null,c.createElement(FZ,nW({closeSubMenu:_,parentMenuRef:t,subMenuRef:h,isSubMenuOpen:v},T)),c.createElement(VZ,{ref:h,position:{x:(t.current.firstChild?.offsetWidth||$Z)+2,y:0}},c.createElement(DM.default,{onDismiss:E,isOpen:v,onCloseSubMenu:_,"aria-label":qZ,isSubMenu:!0,parentMenuRef:t},w.map((e=>{let{key:t,...n}=e;return c.createElement(DZ,nW({key:t},n))})))),c.createElement(sL.default,null)),c.createElement(tL.default,{onClick:i},HZ.DUPLICATE_ELEMENTS(1)),c.createElement(sL.default,null),c.createElement(tL.default,{disabled:!l,onClick:d},HZ.SEND_BACKWARD,c.createElement(OZ,null,jZ.SEND_BACKWARD.display)),c.createElement(tL.default,{disabled:!l,onClick:p},HZ.SEND_TO_BACK,c.createElement(OZ,null,jZ.SEND_TO_BACK.display)),c.createElement(tL.default,{disabled:!s,onClick:m},HZ.BRING_FORWARD,c.createElement(OZ,null,jZ.BRING_FORWARD.display)),c.createElement(tL.default,{disabled:!s,onClick:g},HZ.BRING_TO_FRONT,c.createElement(OZ,null,jZ.BRING_TO_FRONT.display)),c.createElement(ZZ,null),c.createElement(YZ,null),c.createElement(WZ,null),c.createElement(sL.default,null),c.createElement(tL.default,{onClick:a},HZ.COPY_SHAPE_STYLES,c.createElement(OZ,null,jZ.COPY_STYLES.display)),c.createElement(tL.default,{disabled:n!==r,onClick:o},HZ.PASTE_SHAPE_STYLES,c.createElement(OZ,null,jZ.PASTE_STYLES.display)),c.createElement(tL.default,{onClick:f},HZ.ADD_TO_COLOR_PRESETS))};function aW(){return aW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aW.apply(this,arguments)}const oW=function StickerMenu(e){let{parentMenuRef:t}=e;const{handleDuplicateSelectedElements:n}=wZ(),{canElementMoveBackwards:r,canElementMoveForwards:a,handleSendBackward:o,handleSendToBack:i,handleBringForward:l,handleBringToFront:s}=TZ(),d=(0,u.useRef)(),{menuPosition:p,onCloseMenu:m}=kc(),g=GZ({menuPosition:p,isMenuOpen:!0}),{closeSubMenu:f,isSubMenuOpen:h,subMenuItems:b,...E}=g||{};return c.createElement(c.Fragment,null,g&&c.createElement(c.Fragment,null,c.createElement(FZ,aW({closeSubMenu:f,parentMenuRef:t,subMenuRef:d,isSubMenuOpen:h},E)),c.createElement(VZ,{ref:d,position:{x:(t.current.firstChild?.offsetWidth||$Z)+2,y:0}},c.createElement(DM.default,{onDismiss:m,isOpen:h,onCloseSubMenu:f,"aria-label":qZ,isSubMenu:!0,parentMenuRef:t},b.map((e=>{let{key:t,...n}=e;return c.createElement(DZ,aW({key:t},n))})))),c.createElement(sL.default,null)),c.createElement(tL.default,{onClick:n},HZ.DUPLICATE_ELEMENTS(1)),c.createElement(sL.default,null),c.createElement(tL.default,{disabled:!r,onClick:o},HZ.SEND_BACKWARD,c.createElement(OZ,null,jZ.SEND_BACKWARD.display)),c.createElement(tL.default,{disabled:!r,onClick:i},HZ.SEND_TO_BACK,c.createElement(OZ,null,jZ.SEND_TO_BACK.display)),c.createElement(tL.default,{disabled:!a,onClick:l},HZ.BRING_FORWARD,c.createElement(OZ,null,jZ.BRING_FORWARD.display)),c.createElement(tL.default,{disabled:!a,onClick:s},HZ.BRING_TO_FRONT,c.createElement(OZ,null,jZ.BRING_TO_FRONT.display)),c.createElement(ZZ,null),c.createElement(YZ,null),c.createElement(WZ,null))},iW=(0,p.default)(yh).withConfig({displayName:"useHeadingSelect__ReversedIcon",componentId:"sc-1xwrfrm-0"})(["transform:rotate(180deg);"]);const lW=function(e){let{menuItemProps:t,isMenuOpen:n}=e;const{isRTL:r}=U(),[a,o]=(0,u.useState)(!1),{textElements:i}=Qa((e=>{let{state:t}=e;return{textElements:t.currentPage?.elements?.filter((e=>{let{type:t}=e;return"text"===t}))}})),l=ma(i),{selectedElements:s,updateSelectedElements:p}=Qa((e=>{let{state:{selectedElements:t},actions:{updateSelectedElements:n}}=e;return{selectedElements:t,updateSelectedElements:n}})),m=s.map((e=>({...e,tagName:l.get(e.id),defaultTagName:e.tagName||"auto"}))),g=IM(m,"defaultTagName","auto"),f=[...new Set(m.map((e=>{let{tagName:t}=e;return t||"auto"})))],h=f?.length?f[0]:"auto",b="auto"===g?"auto":h;(0,u.useEffect)((()=>{n||o(!1)}),[n]);const E=(0,u.useMemo)((()=>{if(!n||0===s.length)return[];return[{value:"auto",label:"auto"===b&&Ce[h]?(0,$e.default)(
/* translators: %s: heading level. */
(0,d.__)("Automatic (%s)","web-stories"),Ce[h]):(0,d.__)("Automatic","web-stories")},{value:"h1",label:Ce.h1},{value:"h2",label:Ce.h2},{value:"h3",label:Ce.h3},{value:"p",label:Ce.p}].map((e=>{const{value:n}=e;return{key:n,supportsIcon:!0,icon:b===n?c.createElement(hh.default,null):null,label:c.createElement("span",null,e.label),onClick:()=>{p({properties:e=>({...e,tagName:n})})},...t}}))}),[n,t,p,b,s,h]);return E.length>0?{label:HZ.HEADING_LEVEL,openSubMenu:()=>o(!0),closeSubMenu:()=>o(!1),isHeadingSubMenuOpen:a,headingSubMenuItems:a?E:[],SuffixIcon:r?iW:yh,...t}:null};function sW(){return sW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sW.apply(this,arguments)}const cW=function TextMenu(e){let{parentMenuRef:t}=e;const{copiedElementType:n,selectedElementType:r}=Qa((e=>{let{state:t}=e;return{copiedElementType:t.copiedElementState.type,selectedElementType:t.selectedElements?.[0].type}})),{handleCopyStyles:a,handlePasteStyles:o}=vZ(),{handleDuplicateSelectedElements:i}=wZ(),{canElementMoveBackwards:l,canElementMoveForwards:s,handleSendBackward:d,handleSendToBack:p,handleBringForward:m,handleBringToFront:g}=TZ(),{handleAddColorPreset:f,handleAddTextPreset:h}=IZ(),b=(0,u.useRef)(),E=(0,u.useRef)(),{menuPosition:y,onCloseMenu:_}=kc(),v=GZ({menuPosition:y,isMenuOpen:!0}),{closeSubMenu:w,isSubMenuOpen:T,subMenuItems:S,...C}=v||{},I=lW({menuPosition:y,isMenuOpen:!0}),{closeHeadingSubMenu:x,isHeadingSubMenuOpen:A,headingSubMenuItems:k,...O}=I||{};return c.createElement(c.Fragment,null,v&&c.createElement(c.Fragment,null,c.createElement(FZ,sW({closeSubMenu:w,parentMenuRef:t,subMenuRef:b,isSubMenuOpen:T},C)),c.createElement(VZ,{ref:b,position:{x:(t.current.firstChild?.offsetWidth||$Z)+2,y:0}},c.createElement(DM.default,{onDismiss:_,isOpen:T,onCloseSubMenu:w,"aria-label":qZ,isSubMenu:!0,parentMenuRef:t},S.map((e=>{let{key:t,...n}=e;return c.createElement(DZ,sW({key:t},n))})))),c.createElement(sL.default,null)),I&&c.createElement(c.Fragment,null,c.createElement(FZ,sW({closeSubMenu:x,parentMenuRef:t,subMenuRef:E,isSubMenuOpen:A},O)),c.createElement(VZ,{ref:E,position:{x:(t.current.firstChild?.offsetWidth||$Z)+2,y:40}},c.createElement(DM.default,{onDismiss:_,isOpen:A,onCloseSubMenu:x,"aria-label":HZ.HEADING_LEVEL,isSubMenu:!0,parentMenuRef:t},k.map((e=>{let{key:t,...n}=e;return c.createElement(DZ,sW({key:t},n))})))),c.createElement(sL.default,null)),c.createElement(tL.default,{onClick:i},HZ.DUPLICATE_ELEMENTS(1)),c.createElement(sL.default,null),c.createElement(tL.default,{disabled:!l,onClick:d},HZ.SEND_BACKWARD,c.createElement(OZ,null,jZ.SEND_BACKWARD.display)),c.createElement(tL.default,{disabled:!l,onClick:p},HZ.SEND_TO_BACK,c.createElement(OZ,null,jZ.SEND_TO_BACK.display)),c.createElement(tL.default,{disabled:!s,onClick:m},HZ.BRING_FORWARD,c.createElement(OZ,null,jZ.BRING_FORWARD.display)),c.createElement(tL.default,{disabled:!s,onClick:g},HZ.BRING_TO_FRONT,c.createElement(OZ,null,jZ.BRING_TO_FRONT.display)),c.createElement(ZZ,null),c.createElement(YZ,null),c.createElement(WZ,null),c.createElement(sL.default,null),c.createElement(tL.default,{onClick:a},HZ.COPY_STYLES,c.createElement(OZ,null,jZ.COPY_STYLES.display)),c.createElement(tL.default,{disabled:n!==r,onClick:o},HZ.PASTE_STYLES,c.createElement(OZ,null,jZ.PASTE_STYLES.display)),c.createElement(tL.default,{onClick:h},HZ.ADD_TO_TEXT_PRESETS),c.createElement(tL.default,{onClick:f},HZ.ADD_TO_COLOR_PRESETS))};function dW(){return dW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dW.apply(this,arguments)}const uW=function ProductMenu(e){let{parentMenuRef:t}=e;const{canElementMoveBackwards:n,canElementMoveForwards:r,handleSendBackward:a,handleSendToBack:o,handleBringForward:i,handleBringToFront:l}=TZ(),s=(0,u.useRef)(),{menuPosition:d,onCloseMenu:p}=kc(),m=GZ({menuPosition:d,isMenuOpen:!0}),{closeSubMenu:g,isSubMenuOpen:f,subMenuItems:h,...b}=m||{};return c.createElement(c.Fragment,null,m&&c.createElement(c.Fragment,null,c.createElement(FZ,dW({closeSubMenu:g,parentMenuRef:t,subMenuRef:s,isSubMenuOpen:f},b)),c.createElement(VZ,{ref:s,position:{x:(t.current.firstChild?.offsetWidth||$Z)+2,y:0}},c.createElement(DM.default,{onDismiss:p,isOpen:f,onCloseSubMenu:g,"aria-label":qZ,isSubMenu:!0,parentMenuRef:t},h.map((e=>{let{key:t,...n}=e;return c.createElement(DZ,dW({key:t},n))})))),c.createElement(sL.default,null)),c.createElement(tL.default,{disabled:!n,onClick:a},HZ.SEND_BACKWARD,c.createElement(OZ,null,jZ.SEND_BACKWARD.display)),c.createElement(tL.default,{disabled:!n,onClick:o},HZ.SEND_TO_BACK,c.createElement(OZ,null,jZ.SEND_TO_BACK.display)),c.createElement(tL.default,{disabled:!r,onClick:i},HZ.BRING_FORWARD,c.createElement(OZ,null,jZ.BRING_FORWARD.display)),c.createElement(tL.default,{disabled:!r,onClick:l},HZ.BRING_TO_FRONT,c.createElement(OZ,null,jZ.BRING_TO_FRONT.display)),c.createElement(ZZ,null),c.createElement(YZ,null),c.createElement(WZ,null))},pW=(0,u.createContext)({tabs:{}});const mW=function(e){return(0,u.useContextSelector)(pW,e??u.identity)};const gW=function(){const{insertElement:e}=mW((e=>({insertElement:e.actions.insertElement}))),t=(0,u.useCallback)(((t,n)=>{yv.default.set(t.id,{url:n,type:"cached"}),e(t.type,{resource:t})}),[e]),n=(0,u.useCallback)((e=>{t(e,e.sizes?.medium?.source_url||e.src)}),[t]);return{insertMediaElement:t,onSelect:n}};async function fW(e){const t=await n(38803)(`./${e}.json`);return(0,Cr.migrate)(t.default,t.default.version).pages.reduce(((t,n)=>{const r={minX:1/0,maxX:0,minY:1/0,maxY:0},a=n.elements.filter((e=>!e.isBackground&&Boolean(function(e,t){return e.minX=Math.min(e.minX,t.x),e.maxX=Math.max(e.maxX,t.x+t.width),e.minY=Math.min(e.minY,t.y),e.maxY=Math.max(e.maxY,t.y+t.height),e}(r,e))));return[...t,{textSetFonts:n.fonts,id:n.id,textSetCategory:e,elements:a.map((e=>({...e,normalizedOffsetX:e.x-r.minX,normalizedOffsetY:e.y-r.minY,textSetWidth:r.maxX-r.minX,textSetHeight:r.maxY-r.minY})))}]}),[])}var hW=n(52829),bW=n(65727);const EW=(0,p.default)(bW.default).withConfig({displayName:"searchInput__StyledSearchInput",componentId:"sc-145nauf-0"})(["input{",";}"],pp);const yW=function WrappedSearchInput(e){let{initialValue:t,placeholder:n,onSearch:r,disabled:a=!1}=e;const[o,i]=(0,u.useState)(t),l=(0,u.useCallback)((e=>{const t=e.target.value;i(t),""===t&&r(t)}),[r]),s=(0,u.useCallback)((()=>{i(""),r("")}),[r]),p=(0,u.useCallback)((e=>{e.preventDefault(),r(o)}),[o,r]),m=o.length>0;return c.createElement("form",{onSubmit:p},c.createElement(EW,{inputValue:o,placeholder:n,onChange:l,handleClearInput:s,disabled:a,ariaClearLabel:(0,d.__)("Clear Search","web-stories"),isOpen:m,"aria-label":(0,d.__)("Search","web-stories")}))},_W=p.default.div.withConfig({displayName:"section__Container",componentId:"sc-emh1dh-0"})(["position:relative;margin-top:28px;margin-bottom:28px;&:first-child{margin-top:0px;}"]),vW=(0,p.default)(sp.Headline).attrs({as:"h2",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL}).withConfig({displayName:"section__Title",componentId:"sc-emh1dh-1"})(["flex:1 1 auto;color:",";margin-bottom:28px;"],(e=>{let{theme:t}=e;return t.colors.fg.primary}));function wW(e){let{title:t,children:n,...r}=e;return c.createElement(_W,r,c.createElement(vW,null,t),n)}p.default.h3.withConfig({displayName:"common__Title",componentId:"sc-q5ifvb-0"})(["color:",";margin:0;font-size:19px;line-height:1.4;flex:3 0 0;display:flex;align-items:center;padding:2px 0;"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),p.default.div.withConfig({displayName:"common__Header",componentId:"sc-q5ifvb-1"})(["display:flex;margin:0 0 25px;"]);var TW=n(32214);const SW=function(e){let{sectionRef:t,innerContainerRef:n,isExpanded:r,setFocusedRowOffset:a,collapsedHeight:o,bottomMargin:i,topMargin:l}=e;(0,u.useLayoutEffect)((()=>{if(!t.current||!n.current)return;let e;e=r?`${n.current.offsetHeight+l+i}px`:`${o}px`,t.current.style.height=e,t.current.style.minHeight=e,a(0)}),[i,o,n,r,t,a,l])};const CW=function(e){let{innerContainerRef:t,isExpanded:n,setFocusedRowOffset:r,selectedItemId:a,itemRefs:o,offsetSpacing:i=0}=e;(0,u.useLayoutEffect)((()=>{if(!t.current)return;const e=o.current?.[a]?o.current[a]:null;!n&&e&&r(e?.offsetTop-i||0)}),[t,n,o,i,a,r]),(0,u.useLayoutEffect)((()=>{if(!t.current)return;const e=o.current?.[a]?o.current[a]:null,r=e?.offsetTop||0;for(const t of o.current){if(!t)continue;const a=e&&t.offsetTop===r;!e||a||n?t.classList.remove("invisible"):t.classList.add("invisible")}}),[t,n,a,o])},IW=p.default.div.withConfig({displayName:"chipGroup__Section",componentId:"sc-emvo4b-0"})(["height:","px;min-height:","px;background-color:",";display:flex;flex-direction:column;align-items:flex-start;flex:0 1 auto;position:relative;transition:height 0.2s,min-height 0.2s;"],80,80,(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),xW=p.default.div.withConfig({displayName:"chipGroup__Container",componentId:"sc-emvo4b-1"})(["overflow:hidden;margin:","px 12px ","px 24px;"],16,20),AW=p.default.div.withConfig({displayName:"chipGroup__InnerContainer",componentId:"sc-emvo4b-2"})(["display:flex;justify-content:center;flex-wrap:wrap;position:relative;padding:4px 0;transition:transform 0.2s;column-gap:8px;row-gap:14px;"]),kW=(0,p.default)(m.Button).attrs({type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.CIRCLE}).withConfig({displayName:"chipGroup__ExpandButton",componentId:"sc-emvo4b-3"})(["display:flex;position:absolute;bottom:-24px;background:",";max-height:none;width:32px;height:32px;"," visibility:inherit;align-self:center;justify-content:center;align-items:center;"],(e=>{let{theme:t}=e;return t.colors.bg.tertiary}),(e=>{let{isExpanded:t}=e;return t&&"transform: scaleY(-1);"})),OW=e=>{let{items:t,selectedItemId:n,selectItem:r,deselectItem:a,ariaLabel:o}=e;const[i,l]=(0,u.useState)(!1),s=(0,u.useRef)(),p=(0,u.useRef)(),m=(0,u.useRef)([]),[g,f]=(0,u.useState)(0),h=(0,u.useCallback)(((e,t)=>{e&&null!==t?a():(l(!1),r(t))}),[a,r]),b=(0,u.useCallback)((()=>l((e=>!e))),[]);SW({sectionRef:s,innerContainerRef:p,isExpanded:i,setFocusedRowOffset:f,collapsedHeight:80,bottomMargin:20,topMargin:16}),CW({isExpanded:i,innerContainerRef:p,selectedItemId:n,setFocusedRowOffset:f,itemRefs:m,offsetSpacing:4});const E=t.length>0;YT({ref:s},[i]),(0,Ir.useKeyDownEffect)(s,i?"":"down",(()=>E&&l(!0)),[i,E]);const y=(0,u.useMemo)((()=>`pill-group-${(0,pe.default)()}`),[]);return c.createElement(IW,{ref:s},E&&c.createElement(c.Fragment,null,c.createElement(xW,{id:y,isExpanded:i,role:"listbox","aria-label":o||(0,d.__)("List of filtering options","web-stories")},c.createElement(AW,{role:"presentation",ref:p,style:{transform:`translateY(-${g}px`}},t.map(((e,t)=>{const{id:r,label:a}=e,o=r===n,i=o||!o&&0===t?0:-1;return c.createElement(TW.Chip,{key:r,role:"option",ref:e=>{m.current[r]=e},active:o,"aria-selected":o,onClick:()=>h(o,r),tabIndex:i},a)})))),c.createElement(kW,{onClick:b,isExpanded:i,"aria-controls":y,"aria-expanded":i,"aria-label":(0,d.__)("Expand","web-stories")},c.createElement(vh.default,null))))},PW="1em",NW=p.default.section.attrs((e=>{let{isActive:t}=e;return{role:"tabpanel","aria-expanded":t,hidden:!t}})).withConfig({displayName:"shared__Pane",componentId:"sc-10fhorr-0"})(["padding:1.5em ",";",""],PW,(e=>{let{isOverflowScrollable:t=!1}=e;return t&&(0,p.css)(["overflow-y:scroll;height:100%;"])}));function RW(e){return`library-pane-${e}`}function MW(e){return`library-tab-${e}`}const LW=p.default.div.withConfig({displayName:"shared__LoadingContainer",componentId:"sc-10fhorr-1"})(["display:flex;justify-content:center;margin-top:18px;"]),DW=(0,p.default)(m.Button).attrs({variant:g.BUTTON_VARIANTS.ICON}).withConfig({displayName:"shared__ActionButton",componentId:"sc-10fhorr-2"})(["display:flex;align-items:center;position:absolute;top:calc(50% - ","px);right:calc(50% - ","px);color:",";border-radius:",";width:","px;height:","px;opacity:",";"],8,8,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.borders.radius.round}),16,16,(e=>{let{$display:t}=e;return t?"1":"0"})),BW=p.default.div.withConfig({displayName:"shared__PageTemplateTitleContainer",componentId:"sc-10fhorr-3"})(["position:absolute;bottom:0;width:100%;padding:8px;background-color:",";opacity:",";"],(e=>{let{theme:t}=e;return t.colors.opacity.black64}),(e=>{let{isActive:t}=e;return t?1:0})),FW=p.default.div.withConfig({displayName:"common__PaneInner",componentId:"sc-18rwr03-0"})(["height:100%;display:flex;flex-direction:column;"]),HW=p.default.div.withConfig({displayName:"common__PaneHeader",componentId:"sc-18rwr03-1"})(["padding-top:24px;flex:0 1 auto;"]),UW=p.default.div.withConfig({displayName:"common__GalleryContainer",componentId:"sc-18rwr03-2"})(["display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;"]),jW=p.default.div.withConfig({displayName:"common__MediaGalleryContainer",componentId:"sc-18rwr03-3"})(["overflow-y:scroll;overflow-x:hidden;padding:0 ",";margin-top:1em;position:relative;width:100%;flex:1 1 auto;min-height:100px;"],PW),zW=p.default.div.withConfig({displayName:"common__MediaGalleryInnerContainer",componentId:"sc-18rwr03-4"})(["width:calc(100% + ","px);"],A.SCROLLBAR_WIDTH),GW=p.default.div.withConfig({displayName:"common__MediaGalleryLoadingPill",componentId:"sc-18rwr03-5"})(["display:block;position:absolute;bottom:20px;left:60px;right:60px;width:240px;text-align:center;padding:8px 80px;background-color:",";border-radius:100px;"],(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.standard.black,.4)})),YW=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM}).withConfig({displayName:"common__MediaGalleryMessage",componentId:"sc-18rwr03-6"})(["color:",";padding:1em;text-align:center;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),ZW=(0,p.default)(NW).withConfig({displayName:"common__StyledPane",componentId:"sc-18rwr03-7"})(["height:100%;padding:0;overflow:hidden;"]),WW=p.default.div.withConfig({displayName:"common__SearchInputContainer",componentId:"sc-18rwr03-8"})(["padding:0 ",";"],PW);var VW=n(63240);const $W=function DeleteDialog(e){let{mediaId:t,type:n,onClose:r}=e;const{actions:{deleteMedia:a}}=W(),{showSnackbar:o}=(0,jr.useSnackbar)(),{deleteMediaElement:i}=Yl((e=>{let{actions:{deleteMediaElement:t}}=e;return{deleteMediaElement:t}})),{deleteElementsByResourceId:l}=Qa((e=>({deleteElementsByResourceId:e.actions.deleteElementsByResourceId}))),s=(0,u.useCallback)((async()=>{r();try{await a(t),i({id:t}),l({id:t})}catch(e){(0,P.trackError)("local_media_deletion",e.message),o({message:(0,d.__)("Failed to delete media item.","web-stories"),dismissible:!0})}}),[a,i,l,t,r,o]),p=(0,d.__)("Delete Image?","web-stories"),m=(0,d.__)("Delete Video?","web-stories"),g=(0,d.__)("You are about to permanently delete this image from your site. The image will appear broken in any content that uses it.","web-stories"),f=(0,d.__)("You are about to permanently delete this video from your site. The video will appear broken in any content that uses it.","web-stories");return c.createElement(y,{isOpen:!0,onClose:r,title:"image"===n?p:m,secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:s,primaryText:(0,d.__)("Delete","web-stories"),maxWidth:512},c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},"image"===n?g:f),c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},(0,d.__)("This action can not be undone.","web-stories")))},qW=(0,p.css)(["display:flex;width:","px;margin-right:28px;"],152),KW=p.default.img.withConfig({displayName:"mediaEditDialog__Image",componentId:"sc-ctku7j-0"})(["",""],qW),XW=p.default.video.withConfig({displayName:"mediaEditDialog__Video",componentId:"sc-ctku7j-1"})(["",""],qW),QW=p.default.div.withConfig({displayName:"mediaEditDialog__DialogBody",componentId:"sc-ctku7j-2"})(["display:flex;justify-content:left;align-items:flex-start;"]),JW=p.default.div.withConfig({displayName:"mediaEditDialog__MetadataTextContainer",componentId:"sc-ctku7j-3"})(["display:flex;flex-direction:column;margin:0 4px;"]),eV=(0,p.default)(Ke.Text).withConfig({displayName:"mediaEditDialog__DateText",componentId:"sc-ctku7j-4"})(["margin-bottom:8px;"]),tV=(0,p.default)(CI).withConfig({displayName:"mediaEditDialog__AssistiveTextArea",componentId:"sc-ctku7j-5"})(["margin:20px 0 4px;"]),nV=(0,d.__)("Edit Image","web-stories"),rV=(0,d.__)("Edit Video","web-stories"),aV=(0,d.__)("Assistive text","web-stories"),oV=(0,d.__)("Video description","web-stories"),iV=(0,d.__)("Describe the appearance and function of the image. Leave empty if the image is purely decorative.","web-stories"),lV=(0,d.__)("For indexability and accessibility. Include any burned-in text inside the video.","web-stories");const sV=function MediaEditDialog(e){let{resource:t,onClose:n}=e;const{id:r,src:a,creationDate:o,width:i,height:l,type:s,alt:p,poster:m,mimeType:g}=t,{actions:{updateMedia:f}}=W(),{updateMediaElement:h}=Yl((e=>{let{actions:{updateMediaElement:t}}=e;return{updateMediaElement:t}})),{showSnackbar:b}=(0,jr.useSnackbar)(),[E,_]=(0,u.useState)(p),v=(0,ou.toDate)(o),w=(0,u.useCallback)((e=>{_(e.target.value)}),[]),T=(0,u.useCallback)((async()=>{try{await f(r,{altText:E}),h({id:r,data:{alt:E}}),n()}catch(e){(0,P.trackError)("local_media_edit",e.message),b({message:(0,d.__)("Failed to update, please try again.","web-stories"),dismissible:!0})}}),[E,r,n,b,f,h]),S="image"===s;return c.createElement(y,{isOpen:!0,onClose:n,title:S?nV:rV,secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:T,primaryText:(0,d.__)("Save","web-stories")},c.createElement(QW,null,"image"===s?c.createElement(KW,{src:(0,Vo.default)(152,t),alt:p,loading:"lazy",crossOrigin:"anonymous",decoding:"async"}):c.createElement(XW,{key:a,crossOrigin:"anonymous",poster:m,preload:"metadata",muted:!0},c.createElement("source",{src:a,type:g})),c.createElement(JW,null,(0,ru.default)(v)&&c.createElement(eV,{forwardedAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,$e.default)(
/* translators: %s: upload date of media item. */
(0,d.__)("Uploaded: %s","web-stories"),(0,cu.default)(o))),c.createElement(Ke.Text,{as:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,$e.default)(
/* translators: 1: image width. 2: image height. */
(0,d.__)("%1$d x %2$d pixels","web-stories"),i,l)),c.createElement(tV,{value:E,"aria-label":S?aV:oV,type:"text",placeholder:S?aV:oV,onChange:w}),c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},S?iV:lV))))},cV=(0,p.default)(DW).withConfig({displayName:"dropDownMenu__MoreButton",componentId:"sc-1eq0xdj-0"})(["top:4px;right:4px;"]),dV=p.default.div.withConfig({displayName:"dropDownMenu__DropDownContainer",componentId:"sc-1eq0xdj-1"})(["margin-top:10px;"]),uV=p.default.div.withConfig({displayName:"dropDownMenu__MenuContainer",componentId:"sc-1eq0xdj-2"})(["z-index:1;"]),pV=(0,p.css)(["min-width:160px;margin-top:0;li{display:block;}"]),mV="edit",gV="delete";const fV=function(e){let{resource:t,display:n,isMenuOpen:r,onMenuOpen:a,onMenuCancelled:o,onMenuSelected:i,setParentActive:l=Lv.noop}=e;const s=[{group:[{label:(0,d.__)("Edit meta data","web-stories"),value:mV},{label:(0,d.__)("Delete from library","web-stories"),value:gV}]}],[p,m]=(0,u.useState)(!1),[g,f]=(0,u.useState)(!1),h=(0,u.useRef)(),b=(0,u.useCallback)((()=>{o(),h.current?.focus(),l()}),[o,l]),{canTranscodeResource:E}=Yl((e=>{let{state:{canTranscodeResource:t}}=e;return{canTranscodeResource:t}})),y=(0,u.useCallback)((()=>{m(!1),b()}),[m,b]),_=(0,u.useCallback)((()=>{f(!1),b()}),[f,b]),v=(0,u.useMemo)((()=>`list-${(0,pe.default)()}`),[]),w=(0,u.useMemo)((()=>`button-${(0,pe.default)()}`),[]);return E(t)&&c.createElement(uV,null,h.current&&c.createElement(DropDownKeyEvents,{target:h.current}),c.createElement(cV,{ref:h,onClick:a,"aria-label":(0,d.__)("More","web-stories"),"aria-pressed":r,"aria-haspopup":!0,"aria-expanded":r,"aria-owns":r?v:null,id:w,$display:n,tabIndex:n||r?0:-1},c.createElement(eb,null)),(n||r)&&c.createElement(uw.Popup,{anchor:h,placement:Vd.PLACEMENT.BOTTOM_START,isOpen:r},c.createElement(dV,null,c.createElement(wC.Menu,{parentId:w,listId:v,onMenuItemClick:(e,t)=>{switch(i(),t){case mV:f(!0);break;case gV:m(!0)}},options:s,onDismissMenu:b,hasMenuRole:!0,menuStylesOverride:pV}))),p&&c.createElement($W,{mediaId:t.id,type:t.type,onClose:y}),g&&c.createElement(sV,{resource:t,onClose:_}))},hV=(0,p.default)(Ke.Text).withConfig({displayName:"attribution__StyledText",componentId:"sc-dg18hp-0"})(["color:",";"],(e=>{let{theme:t,active:n}=e;return(0,qe.rgba)(t.colors.standard.white,n?1:.6)})),bV=p.default.a.withConfig({displayName:"attribution__Link",componentId:"sc-dg18hp-1"})(["display:block;position:absolute;left:0;bottom:0;width:100%;padding:8px;background-color:",";text-overflow:ellipsis;overflow:hidden;white-space:nowrap;text-decoration:none;"],(e=>{let{theme:t,active:n}=e;return(0,qe.rgba)(t.colors.bg.primary,n?.8:.6)})),EV=e=>{let{author:t,url:n}=e;const[r,a]=(0,u.useState)(!1),o=()=>a(!0),i=()=>a(!1);return c.createElement(bV,{title:t,active:r,onPointerEnter:o,onFocus:o,onPointerLeave:i,onBlur:i,href:n,target:"_blank",rel:"noreferrer"},c.createElement(hV,{forwardedAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},t))};function yV(){return yV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yV.apply(this,arguments)}const _V=p.default.div.withConfig({displayName:"libraryMoveable__TargetBox",componentId:"sc-jgbz52-0"})(["position:absolute;width:100%;height:100%;top:0;z-index:1;cursor:pointer;"]);const vV=function LibraryMoveable(e){let{type:t,elementProps:n={},handleDrag:r,handleDragEnd:a,onClick:o=Bt,cloneElement:i,cloneProps:l,elements:s=[],active:d=!1}=e;const p=i,[m,g]=(0,u.useState)(!1),[f,h]=(0,u.useState)(!1),[b,E]=(0,u.useState)(!1),y=(0,u.useRef)(null),_=(0,u.useRef)(null),v=(0,u.useRef)(null),w=(0,u.useRef)(null),T=(0,u.useRef)(null),S=gs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),{setZoomSetting:C}=gs((e=>{let{actions:{setZoomSetting:t}}=e;return{setZoomSetting:t}})),A=ks(),{backgroundElement:k}=Qa((e=>({backgroundElement:e.state.currentPage?.elements?.[0]??{}}))),{fullbleedContainer:O,nodesById:P,pageContainer:N}=Xs((e=>({fullbleedContainer:e.state.fullbleedContainer,pageContainer:e.state.pageContainer,nodesById:e.state.nodesById}))),{activeDropTargetId:R,setDraggingResource:M}=ds((e=>{let{state:{activeDropTargetId:t},actions:{setDraggingResource:n}}=e;return{activeDropTargetId:t,setDraggingResource:n}})),{clearTransforms:L,pushTransform:D}=(0,I.useTransform)((e=>({clearTransforms:e.actions.clearTransforms,pushTransform:e.actions.pushTransform}))),B={translate:[0,0]},{insertTextSetByOffset:F}=iZ(),H=(0,u.useRef)({}),U=(0,u.useCallback)((()=>{_.current&&y.current&&(_.current.style.transform=null,y.current.style.transform=null,y.current.style.opacity=0,g(!1),L(),M(null))}),[M,L]);(0,Ir.useKeyDownEffect)(m?document.body:{current:null},"esc",(()=>{h(!0),U()}),[m,U]);const j=(0,u.useCallback)((()=>{let e=0,t=0;for(let n=w.current;n;n=n.offsetParent)e+=n.offsetLeft,t+=n.offsetTop;return{offsetX:e,offsetY:t}}),[w]);$m({node:_.current,eventData:{...Se.INSERT_ELEMENT,label:t},eventType:"pointerdown"});const{offsetX:z}=j(),G=eF({isDragging:!0,canSnap:!0,otherNodes:Object.values(vn(P,[k.id])),snappingOffsetX:z});return c.createElement(c.Fragment,null,c.createElement(_V,{ref:_,onPointerOver:()=>E(!0),onPointerOut:()=>E(!1)}),(m||d||b)&&c.createElement(c.Fragment,null,c.createElement(x.InOverlay,{ref:w,zIndex:1,pointerEvents:"none",render:()=>c.createElement(p,yV({ref:y},l))}),c.createElement(x.Moveable,yV({ref:T,className:"default-moveable hide-handles",target:_.current,edge:!0,draggable:!0,origin:!1,pinchable:!0,onDragStart:e=>{let{set:t,inputEvent:n}=e;n.stopPropagation(),h(!1),t(B.translate),g(!0),(e=>{const{timeStamp:t,clientX:n,clientY:r}=e;H.current={timeStamp:t,clientX:n,clientY:r}})(n),C(Ie.FIT);const{offsetX:r,offsetY:a}=j(),o=_.current.getBoundingClientRect();v.current={width:o.width,height:o.height},_.current.style.width=`${l.width}px`,_.current.style.height=`${l.height}px`;const i=o.left-r,s=o.top-a;y.current.style.left=`${i}px`,y.current.style.top=`${s}px`,T.current&&T.current.updateRect()},onDrag:e=>{let{beforeTranslate:t,inputEvent:n}=e;if(D(null,{drag:t}),f)return!1;B.translate=t,y.current&&(0,x.areEventsDragging)(H.current,n)&&(1===y.current.style.opacity||R?R&&(y.current.style.opacity=0):y.current.style.opacity=1,y.current.style.transform=`translate(${t[0]}px, ${t[1]}px)`,_.current.style.transform=`translate(${t[0]}px, ${t[1]}px)`),r?.(n)},onDragEnd:e=>{let{inputEvent:r}=e;if(f)return!1;if(_.current.style.width=`${v.current.width}px`,_.current.style.height=`${v.current.height}px`,!(0,x.areEventsDragging)(H.current,r))return U(),o(),!1;if(R&&a)a();else if(!rF(y.current,O)){const{x:e,y:r,width:a,height:o}=y.current.getBoundingClientRect(),{x:i,y:l}=N.getBoundingClientRect();"textSet"===t?F(s,{offsetX:(0,aa.editorToDataX)(e-i,S.width),offsetY:(0,aa.editorToDataY)(r-l,S.height)}):A(t,"product"===t?{...n,width:25,height:25,x:(0,aa.editorToDataX)(e-i,S.width),y:(0,aa.editorToDataY)(r-l,S.height)}:{...n,x:(0,aa.editorToDataX)(e-i,S.width),y:(0,aa.editorToDataY)(r-l,S.height),width:(0,aa.editorToDataX)(a,S.width),height:(0,aa.editorToDataY)(o,S.height)})}U()}},G))))},wV=p.default.div.withConfig({displayName:"insertionOverlay__IconContainer",componentId:"sc-x3oxxu-0"})(["height:","px;width:","px;position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);color:",";border-radius:",";pointer-events:none;svg{position:absolute;top:0;left:0;}"],16,16,8,8,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.borders.radius.round})),TV=p.default.div.withConfig({displayName:"insertionOverlay__Scrim",componentId:"sc-x3oxxu-1"})(["position:absolute;width:100%;height:100%;top:0;left:0;background-color:",";pointer-events:none;"],(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.standard.black,.5)}));const SV=function InsertionOverlay(e){let{showIcon:t=!0}=e;return c.createElement(TV,null,t&&c.createElement(wV,{role:"presentation"},c.createElement(t_,null)))};function CV(){return CV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CV.apply(this,arguments)}const IV=(0,p.css)(["width:100%;cursor:pointer;transition:0.2s transform,0.15s opacity;border-radius:4px;opacity:0;object-fit:cover;"]),xV=p.default.img.withConfig({displayName:"innerElement__Image",componentId:"sc-qkk7ov-0"})(["",""],IV),AV=p.default.video.withConfig({displayName:"innerElement__Video",componentId:"sc-qkk7ov-1"})([""," ",""],IV,(e=>{let{showWithoutDelay:t}=e;return t?"opacity: 1;":""})),kV=p.default.div.withConfig({displayName:"innerElement__DurationWrapper",componentId:"sc-qkk7ov-2"})(["position:absolute;bottom:8px;left:8px;background:",";border-radius:100px;height:18px;padding:0 6px;"],(e=>{let{theme:t}=e;return t.colors.opacity.black64})),OV=p.default.div.withConfig({displayName:"innerElement__MuteWrapper",componentId:"sc-qkk7ov-3"})(["position:absolute;bottom:8px;right:8px;height:24px;width:24px;background:",";color:",";border-radius:100px;"],(e=>{let{theme:t}=e;return t.colors.opacity.black64}),(e=>{let{theme:t}=e;return t.colors.fg.primary})),PV=(0,p.default)(Ke.Text).attrs({forwardedAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"innerElement__Duration",componentId:"sc-qkk7ov-4"})(["color:",";display:block;"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),NV=p.default.img.withConfig({displayName:"innerElement__CloneImg",componentId:"sc-qkk7ov-5"})(["opacity:0;width:",";height:",";position:absolute;"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`}));const RV=(0,u.memo)((function InnerElement(e){let{type:t,src:n,resource:r,alt:a,width:o,height:i,onClick:l,onLoad:s=Lv.noop,showVideoDetail:d,mediaElement:p,active:m,isMuted:g}=e;const f=(0,u.useRef)(null),h=(0,u.useRef)(null),{handleDrag:b,handleDrop:E}=ds((e=>{let{state:t,actions:n}=e;return{handleDrag:n.handleDrag,handleDrop:n.handleDrop,dropTargets:t.dropTargets,activeDropTargetId:t.activeDropTargetId}}),((e,t)=>{if(h.current)return!1;if(null===h.current)return h.current=!1,!1;if(e?.dropTargets&&t?.dropTargets){const n=Object.keys(e.dropTargets),r=Object.keys(t.dropTargets);if(n.join()!==r.join())return!1}return e?.activeDropTargetId===t?.activeDropTargetId})),{setDraggingResource:y}=ds((e=>{let{actions:{setDraggingResource:t}}=e;return{setDraggingResource:t}}));let _;(0,u.useEffect)((()=>{r.poster&&(f.current=r.poster)}),[r.poster]);const{lengthFormatted:v,poster:w,mimeType:T}=r,S=w??f.current,C=S||(0,Vo.default)(o,r),I={width:o,height:i,alt:a,crossOrigin:"anonymous"},x={...I,onLoad:()=>{p.current&&(p.current.style.opacity=1),s()},loading:"lazy",decoding:"async",draggable:!1},A={...x,onLoad:void 0},k={...x,src:C},O={...I,title:a,alt:null,loop:t===bt.GIF,muted:!0,preload:"metadata",poster:S,showWithoutDelay:m};if(t===bt.IMAGE||t===bt.STICKER?(_=c.createElement(xV,CV({key:n},k,{ref:p})),A.src=C):[bt.VIDEO,bt.GIF].includes(t)&&(_=c.createElement(c.Fragment,null,w&&!m?c.createElement(xV,CV({key:n},k,{ref:p})):c.createElement(AV,CV({key:n},O,{ref:p}),t===bt.GIF?r.output.src&&c.createElement("source",{src:r.output.src,type:r.output.mimeType}):c.createElement("source",{src:(0,Vo.default)(o,r),type:T})),t===bt.VIDEO&&d&&v&&c.createElement(kV,null,c.createElement(PV,null,v)),t===bt.VIDEO&&d&&g&&c.createElement(OV,null,c.createElement(oy,null))),A.src=w),!_)throw new Error("Invalid media element type.");const P=t===bt.IMAGE?C:w;return c.createElement(c.Fragment,null,_,m&&c.createElement(SV,{showIcon:!1}),c.createElement(vV,{active:m,handleDrag:e=>{h.current||(yv.default.set(r.id,{url:C,type:"cached"}),y(r),h.current=!0),b(r,e.clientX,e.clientY)},handleDragEnd:()=>{E(r),h.current=!1},type:r.type,elementProps:{resource:r},onClick:l(P),cloneElement:NV,cloneProps:A}))})),MV=p.default.div.withConfig({displayName:"insertionMenu__DropDownContainer",componentId:"sc-xjd4tf-0"})(["margin-top:10px;min-width:160px;"]),LV=p.default.div.withConfig({displayName:"insertionMenu__MenuContainer",componentId:"sc-xjd4tf-1"})(["z-index:1;"]),DV=(0,p.css)(["min-width:160px;margin-top:0;li{display:block;}"]),BV="insert",FV="addBackground";const HV=function InsertionMenu(e){let{resource:t,display:n,onInsert:r,width:a,index:o,isLocal:i=!1,setParentActive:l=Lv.noop,setParentInactive:s=Lv.noop}=e;const p=(0,u.useRef)(),[m,g]=(0,u.useState)(!1),f=(0,u.useCallback)((e=>{e.stopPropagation(),g(!0)}),[]),h=(0,u.useCallback)((()=>{g(!1),p.current?.focus(),l()}),[l]),{currentBackgroundId:b,combineElements:E}=Qa((e=>({currentBackgroundId:e.state.currentPage?.elements?.[0]?.id,combineElements:e.actions.combineElements}))),{type:y,poster:_}=t,v=[{group:[{label:["image","gif"].includes(y)?(0,d.__)("Insert image","web-stories"):(0,d.__)("Insert video","web-stories"),value:BV},{label:(0,d.__)("Add as background","web-stories"),value:FV}]}];YT({ref:p},[],3);const w=xs();(0,Ir.useKeyDownEffect)(i?null:p,"tab",w,[w]);const T=(0,u.useMemo)((()=>`list-${(0,pe.default)()}`),[]),S=(0,u.useMemo)((()=>`button-${(0,pe.default)()}`),[]);return c.createElement(LV,null,c.createElement(DW,{ref:p,onClick:f,"aria-label":(0,d.__)("Open insertion menu","web-stories"),"aria-pressed":m,"aria-haspopup":!0,"aria-expanded":m,"aria-owns":m?T:null,id:S,$display:n,tabIndex:0===o?0:-1},c.createElement(t_,null)),m&&c.createElement(uw.Popup,{anchor:p,placement:Vd.PLACEMENT.BOTTOM_START,isOpen:m},c.createElement(MV,null,c.createElement(wC.Menu,{parentId:S,listId:T,onMenuItemClick:(e,n)=>{const o=_||(0,Vo.default)(a,t),i=rs(t.type,{resource:t});switch(g(!1),n){case BV:r(t,o);break;case FV:E({firstElement:i,secondId:b})}s()},options:v,onDismissMenu:h,hasMenuRole:!0,menuStylesOverride:DV}))))},UV=p.default.div.attrs((e=>({style:{width:e.width+"px",height:e.height+"px",margin:e.margin,backgroundColor:"transparent",color:"inherit",border:"none",padding:0}}))).withConfig({displayName:"mediaElement__Container",componentId:"sc-n7038j-0"})([""]),jV=p.default.div.withConfig({displayName:"mediaElement__InnerContainer",componentId:"sc-n7038j-1"})(["position:relative;display:flex;margin-bottom:10px;background-color:",";"],(e=>{let{theme:t,$baseColor:n}=e;return n||(0,qe.rgba)(t.colors.standard.black,.3)})),zV=(0,p.default)(Uc.Blurhash).withConfig({displayName:"mediaElement__BlurhashContainer",componentId:"sc-n7038j-2"})(["position:absolute !important;top:0;left:0;"]);function GV(e){let{index:t,resource:n,width:r,height:a,margin:o,onInsert:i,providerType:l,canEditMedia:s}=e;const{id:p,src:m,type:g,width:f,height:h,alt:b,isMuted:E,baseColor:y,blurHash:_}=n,{isCurrentResourceProcessing:v,isCurrentResourceUploading:w}=Yl((e=>{let{state:t}=e;return{isCurrentResourceProcessing:t.isCurrentResourceProcessing,isCurrentResourceUploading:t.isCurrentResourceUploading}})),T=f&&h?f/h:1,S=r||a/T,C=a||S/T,I=(0,u.useRef)(),[x,A]=(0,u.useState)(!0),[k,O]=(0,u.useState)(!1),[P,N]=(0,u.useState)(!1),[R,M]=(0,u.useState)(!1),L=(0,u.useCallback)((()=>O(!0)),[]),D=(0,u.useCallback)((()=>O(!1)),[]),B=(0,u.useCallback)((()=>N(!0)),[]),F=(0,u.useCallback)((()=>N(!1)),[]),H=(0,u.useCallback)((()=>{N(!1),O(!1)}),[]),[U,j]=(0,u.useState)(null),z=(0,u.useRef)(k);z.current=k,(0,u.useEffect)((()=>{if(![bt.VIDEO,bt.GIF].includes(g))return;const e=()=>{null!==U&&(clearTimeout(U),j(null))};if(!P)if(k){if(A(!1),I.current&&null==U){const e=setTimeout((()=>{z.current&&m&&I.current.play().catch((()=>{}))}),600);j(e)}}else A(!0),e(),I.current&&I.current?.pause&&m&&(I.current.pause(),I.current.currentTime=0);return e}),[P,k,g,m,U,j,z]);const G=(0,u.useCallback)((e=>()=>{i(n,e)}),[i,n]),Y=k&&n.attribution?.author?.displayName&&n.attribution?.author?.url&&c.createElement(EV,{author:n.attribution.author.displayName,url:n.attribution.author.url}),Z=(0,u.useRef)(),W=(0,u.useCallback)((()=>M(!0)),[]),V=!R&&!k;return c.createElement(UV,{ref:Z,"data-testid":`mediaElement-${g}`,"data-id":p,className:"mediaElement",width:S,height:C,margin:o,onPointerEnter:L,onFocus:L,onPointerLeave:D,onBlur:D,tabIndex:"-1"},c.createElement(jV,{$baseColor:V&&y},c.createElement(RV,{type:g,src:m,mediaElement:I,resource:n,alt:b,isMuted:E,width:S,height:C,onClick:G,onLoad:W,showVideoDetail:x,active:k}),Y,V&&_&&c.createElement(zV,{hash:_,width:S,height:C,punch:1}),(!m||v(p)||w(p))&&c.createElement(LoadingBar,{loadingMessage:(0,d.__)("Uploading media…","web-stories")}),c.createElement(HV,{resource:n,display:k,onInsert:i,width:S,index:t,isLocal:"local"===l,setParentActive:L,setParentInactive:D}),"local"===l&&s&&c.createElement(fV,{resource:n,display:k,isMenuOpen:P,onMenuOpen:B,onMenuCancelled:F,onMenuSelected:H,setParentActive:L})))}function MediaElement(e){const{isCurrentResourceProcessing:t,isCurrentResourceUploading:n}=Yl((e=>{let{state:t}=e;return{isCurrentResourceProcessing:t.isCurrentResourceProcessing,isCurrentResourceUploading:t.isCurrentResourceUploading}})),{id:r}=e.resource;return t(r)||n(r)?c.createElement(Tooltip,{title:(0,d.__)("Uploading media…","web-stories")},c.createElement(GV,e)):c.createElement(GV,e)}MediaElement.defaultProps={providerType:"local",canEditMedia:!1};const YV=(0,u.memo)(MediaElement),ZV={maxPhotos:2},ContainerRenderer=e=>{let{children:t,containerRef:n}=e;return c.createElement(UW,{ref:n},t)},RowRenderer=e=>{let{children:t}=e;return t};function MediaGallery(e){let{resources:t,onInsert:n,providerType:r,canEditMedia:a}=e;const o=t.map(((e,t)=>({index:t,key:e.id,src:e.src,width:e.width,height:e.height}))),i=(0,u.useCallback)((e=>{let{photo:o,layout:i}=e;return c.createElement(YV,{key:o.key,index:o.index,margin:"0px 0px 8px 0px",resource:t[o.index],width:i.width,height:i.height,onInsert:n,providerType:r,canEditMedia:a})}),[r,n,t,a]);return c.createElement("div",null,c.createElement(VW.default,{layout:"rows",photos:o,renderPhoto:i,renderRowContainer:RowRenderer,renderContainer:ContainerRenderer,targetRowHeight:110,rowConstraints:ZV,spacing:8}))}MediaGallery.defaultProps={canEditMedia:!1};const WV=MediaGallery,VV=(0,p.default)(Ke.Text).withConfig({displayName:"paginatedMediaGallery__StyledText",componentId:"sc-1xn8t7i-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));function PaginatedMediaGallery(e){let{providerType:t,resources:n,searchTerm:r,selectedCategoryId:a,isMediaLoading:o,isMediaLoaded:i,hasMore:l,onInsert:s,setNextPage:p,canEditMedia:m}=e;const g=(0,u.useRef)(),f=(0,u.useCallback)((()=>g.current.clientHeight===g.current.scrollHeight?p():()=>{}),[p]),h=(0,u.useDebouncedCallback)(f,500),b=(0,u.useCallback)((()=>{const e=g.current;if(!n.length||!e||0===e.clientHeight||!l||!i||o)return;if(e.clientHeight===e.scrollHeight)return void h();e.scrollHeight-e.scrollTop<=e.clientHeight+300&&p()}),[n.length,l,i,o,h,p]);(0,u.useEffect)((()=>{g.current?.scrollTo?.(0,0)}),[r,a]);const E=(0,u.useDebouncedCallback)(b,500);(0,u.useLayoutEffect)((()=>{!async function(){var e;await(e=200,new Promise((t=>setTimeout(t,e)))),b()}()}),[b]),(0,u.useEffect)((()=>{const e=g.current;if(e)return e.addEventListener("scroll",E),window.addEventListener("resize",E),()=>{e.removeEventListener("scroll",E),window.removeEventListener("resize",E)}}),[E]);const y=i&&0===n.length?c.createElement(YW,null,(0,d.__)("No media found.","web-stories")):c.createElement("div",{style:{marginBottom:15}},c.createElement(WV,{providerType:t,canEditMedia:m,resources:n,onInsert:s})),[_,v]=(0,u.useState)(!1);(0,u.useEffect)((()=>{if(o&&l){const e=setTimeout((()=>{v(o)}),1e3);return()=>clearTimeout(e)}v(!1)}),[o,l]);const w="local"!==t&&wt[t].attributionComponent&&wt[t].attributionComponent();return c.createElement(c.Fragment,null,c.createElement(jW,{"data-testid":"media-gallery-container",ref:g},c.createElement(zW,null,y)),_&&c.createElement(GW,{"data-testid":"loading-pill"},c.createElement(VV,{forwardedAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Loading…","web-stories"))),!_&&w)}PaginatedMediaGallery.defaultProps={canEditMedia:!1};const $V=PaginatedMediaGallery,qV=RW("media"),KV=Qo.VIDEO_OPTIMIZATION_DIALOG_DISMISSED;const XV=function VideoOptimizationDialog(){const{isTranscoding:e}=Yl((e=>{let{state:{isTranscoding:t}}=e;return{isTranscoding:t}})),[t,n]=(0,u.useState)(Boolean(Jo.getItemByKey(KV))),{updateCurrentUser:r}=no((e=>{let{actions:t}=e;return{updateCurrentUser:t.updateCurrentUser}})),a=(0,u.useCallback)((e=>{n(e),Jo.setItemByKey(KV,e)}),[]),o=(0,u.useCallback)((()=>{r({mediaOptimization:!1}),a(!0)}),[r,a]),i=(0,u.useCallback)((()=>{a(!0)}),[a]),l=(0,d.__)("Video optimization in progress","web-stories"),s=(0,d.__)("This process can’t be stopped once it begins. Optimization is automatically enabled for all videos to ensure smooth playback. You can disable optimization any time in Settings.","web-stories");return c.createElement(y,{isOpen:e&&!t,onClose:i,title:l,onSecondary:o,secondaryText:(0,d.__)("Disable optimization","web-stories"),onPrimary:i,primaryText:(0,d.__)("Sounds good","web-stories")},c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},s))},QV="hotlink_media";const JV=function(){const[e,t]=(0,u.useState)(!1),{insertElement:n}=mW((e=>({insertElement:e.actions.insertElement}))),{capabilities:{hasUploadMediaAction:r},allowedMimeTypes:{image:a,vector:o,video:i}}=U(),{updateBaseColor:l}=Yl((e=>{let{actions:{updateBaseColor:t}}=e;return{updateBaseColor:t}})),s=(0,u.useMemo)((()=>[...a,...o,...i]),[a,o,i]),c=(0,u.useMemo)((()=>s.map((e=>Rt(e))).flat()),[s]),{uploadVideoPoster:d}=Ja({}),{getProxiedUrl:p}=ii(),m=(0,u.useCallback)((async e=>{let{link:a,hotlinkInfo:o,needsProxy:i}=e;const{ext:s,type:c,mimeType:u,fileName:m}=o,g="video"===c;try{const e=i?p({needsProxy:i},a):a,f={id:(0,pe.default)(),src:e,mimeType:u,needsProxy:i,alt:m};if(g){const t=await re(e);await le(t),f.width=t.videoWidth,f.height=t.videoHeight;const n=ie(t);if(f.length=n.length,f.lengthFormatted=n.lengthFormatted,f.isMuted=!se(t),r)try{const e=Ge(m.replace(`.${s}`,"")),n=await ue(t),r=await d(0,e,n);f.poster=r.poster,f.posterId=r.posterId}catch{}}const h=await GC(f);h.src=a,n(c,{resource:h}),l(h),(0,P.trackEvent)(QV,{event_label:a,file_size:o.fileSize,file_type:o.mimeType,needs_proxy:i}),t(!1)}catch(e){}}),[p,n,l,r,d]);return{action:{onSelect:m,onError:(0,u.useCallback)((e=>(0,P.trackError)(QV,e?.message)),[]),onClick:()=>t(!0),onClose:()=>t(!1)},state:{allowedFileTypes:c,isOpen:e}}},e$=(0,p.default)(m.Button).withConfig({displayName:"hotlink__Button",componentId:"sc-1njsgyy-0"})(["",";margin:0 10px 0 0;"],pp);const t$=function Hotlink(){const e=(0,d.__)("Insert by link","web-stories"),{action:{onSelect:t,onError:n,onClose:r,onClick:a},state:{allowedFileTypes:o,isOpen:i}}=JV();return c.createElement(c.Fragment,null,c.createElement(Tooltip,{title:e},c.createElement(e$,{variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,onClick:a,"aria-label":e},c.createElement(SE,null))),c.createElement(zC,{onClose:r,isOpen:i,onError:n,onSelect:t,allowedFileTypes:o,title:(0,d.__)("Insert external image or video","web-stories")}))},n$=(0,p.default)(m.Button).withConfig({displayName:"mediaRecording__Button",componentId:"sc-zpc7g2-0"})(["",";margin:0 10px 0 0;"],pp),r$=(0,p.default)(rh).withConfig({displayName:"mediaRecording__Camera",componentId:"sc-zpc7g2-1"})(["width:24px !important;height:24px !important;"]);const a$=function(){const{isInRecordingMode:e,toggleRecordingMode:t}=Iv((e=>{let{state:{isInRecordingMode:t},actions:{toggleRecordingMode:n}}=e;return{isInRecordingMode:t,toggleRecordingMode:n}})),{isTranscodingEnabled:n}=lo(),r=(0,u.useCallback)((()=>{(0,P.trackEvent)("media_recording_toggled",{status:e?"closed":"open"}),t()}),[e,t]);if(!n)return null;const a=(0,d.__)("Record Video/Audio","web-stories");return c.createElement(Tooltip,{title:a},c.createElement(n$,{variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,onClick:r,"aria-label":a,"aria-pressed":e,isToggled:e},c.createElement(r$,null)))};function o$(){return o$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o$.apply(this,arguments)}const i$=(0,p.default)(m.Button).withConfig({displayName:"mediaPane__Button",componentId:"sc-usipec-0"})(["",";"],pp),l$=p.default.div.withConfig({displayName:"mediaPane__FilterArea",componentId:"sc-usipec-1"})(["display:flex;justify-content:space-between;margin-top:24px;padding:0 "," 0 ",";"],PW,PW),s$=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM}).withConfig({displayName:"mediaPane__SearchCount",componentId:"sc-usipec-2"})(["display:flex;align-items:center;justify-content:center;flex-shrink:0;"]),c$=p.default.div.withConfig({displayName:"mediaPane__ButtonsWrapper",componentId:"sc-usipec-3"})(["display:flex;flex:1;justify-content:flex-end;"]),d$=Ci,u$=[{value:d$,label:(0,d.__)("All Types","web-stories")},{value:"image",label:(0,d.__)("Images","web-stories")},{value:"video",label:(0,d.__)("Video","web-stories")}];const p$=function MediaPane(e){const{hasMore:t,media:n,isMediaLoading:r,isMediaLoaded:a,mediaType:o,searchTerm:i,setNextPage:l,setMediaType:s,setSearchTerm:p,totalItems:m}=Yl((e=>{let{state:{hasMore:t,media:n,isMediaLoading:r,isMediaLoaded:a,mediaType:o,searchTerm:i,totalItems:l},actions:{setNextPage:s,setMediaType:c,setSearchTerm:d}}=e;return{hasMore:t,media:n,isMediaLoading:r,isMediaLoaded:a,mediaType:o,searchTerm:i,totalItems:l,setNextPage:s,setMediaType:c,setSearchTerm:d}})),{capabilities:{hasUploadMediaAction:f}}=U(),h=i.length>0,b=(0,u.useCallback)(((e,t)=>{s({mediaType:t})}),[s]),{onSelect:E,insertMediaElement:y}=gW();(0,u.useEffect)((()=>{i.length>0&&(0,P.trackEvent)("search",{search_type:"media",search_term:i,search_filter:o})}),[i,o]);const _=(0,u.useCallback)((e=>c.createElement(i$,{variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,onClick:e,"aria-label":(0,d.__)("Upload","web-stories")},c.createElement(Mm,null))),[]);return c.createElement(ZW,o$({id:qV},e),c.createElement(FW,null,c.createElement(HW,null,c.createElement(WW,null,c.createElement(yW,{initialValue:i,placeholder:(0,d.__)("Search","web-stories"),onSearch:e=>{const t=e.trim();t!==i&&p({searchTerm:t})}})),c.createElement(l$,null,c.createElement(vx,{selectedValue:o?.toString()||d$,onMenuItemClick:b,options:u$,placement:Vd.PLACEMENT.BOTTOM_START}),h&&n.length>0&&c.createElement(s$,null,(0,$e.default)(
/* translators: %d: number of results. */
(0,d._n)("%s result found.","%s results found.",m,"web-stories"),m)),!h&&c.createElement(c$,null,c.createElement(a$,null),c.createElement(t$,null),f&&c.createElement(Tooltip,{title:(0,d.__)("Upload","web-stories")},c.createElement(rI,{renderButton:_,onInsert:E}))))),a&&!n.length?c.createElement(YW,null,h?(0,d.__)("No results found.","web-stories"):(0,d.__)("No media found.","web-stories")):c.createElement($V,{providerType:"local",canEditMedia:f,resources:n,isMediaLoading:r,isMediaLoaded:a,hasMore:t,onInsert:y,setNextPage:l,searchTerm:i}),c.createElement(XV,null)))};const m$=function MediaIcon(){return c.createElement(Mm,{title:(0,d.__)("Media Gallery","web-stories")})};const g$=function TermsDialog(){const e=Jo.getItemByKey(Qo.TERMS_MEDIA3P),[t,n]=(0,u.useState)(!e),r=(0,u.useCallback)((()=>{n(!1),Jo.setItemByKey(Qo.TERMS_MEDIA3P,!0),(0,P.trackEvent)("media3p_terms_acknowledged")}),[]);(0,u.useEffect)((()=>{n(!e)}),[e]);const a=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_terms_of_service")}),[]);return e?null:c.createElement(y,{isOpen:t,contentLabel:(0,d.__)("Third party stock content terms","web-stories"),onClose:r,ariaHideApp:!1,onPrimary:r,primaryText:(0,d.__)("Dismiss","web-stories")},c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(fu.default,{mapping:{a:c.createElement(hu.Link,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:"https://wp.stories.google/docs/terms/",rel:"noreferrer",target:"_blank","aria-label":(0,d.__)("Learn more by visiting Web Stories for WordPress","web-stories"),onClick:a})}},(0,d.__)("Your use of stock content is subject to third party terms. <a>Learn more.</a>","web-stories"))))},f$=RW("media3p");function h$(){return h$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h$.apply(this,arguments)}const b$=(0,p.default)(Ke.Text).withConfig({displayName:"providerTab__StyledText",componentId:"sc-1muzdn0-0"})(["color:inherit;"]),E$=p.default.button.withConfig({displayName:"providerTab__Tab",componentId:"sc-1muzdn0-1"})(["padding:6px 16px;background:none;border:none;color:",";position:relative;cursor:pointer;:hover{color:",";}border-radius:",";",";",""],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.borders.radius.x_large}),pp,(e=>{let{$isActive:t,theme:n}=e;return t&&(0,p.css)(["::after{content:'';position:absolute;background-color:",";height:2px;border-radius:1px;bottom:-17px;left:16px;right:16px;}"],n.colors.border.selection)}));const y$=function ProviderTab(e){let{name:t,isActive:n,...r}=e;return c.createElement(E$,h$({$isActive:n},r),c.createElement(b$,{forwardedAs:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},t))},_$=p.default.div.attrs({role:"tablist"}).withConfig({displayName:"providerTabList__Section",componentId:"sc-19jgogw-0"})(["display:flex;flex-wrap:wrap;margin-top:16px;margin-bottom:16px;padding:0 1em;"]);const v$=function ProviderTabList(e){let{providers:t}=e;const{isRTL:n}=U(),r=(0,u.useRef)(),{selectedProvider:a,setSelectedProvider:o}=Gl((e=>{let{media3p:{state:{selectedProvider:t},actions:{setSelectedProvider:n}}}=e;return{selectedProvider:t,setSelectedProvider:n}})),[i,l]=(0,u.useState)(0),s=t.length;(0,u.useEffect)((()=>l(t.indexOf(a))),[t,a]);const d=(0,u.useCallback)((e=>{if(!r.current)return;r.current.children[e].focus()}),[]),p=(0,u.useCallback)((()=>o({provider:t[i]})),[i,o,t]),m=n?-1:1;return(0,Ir.useKeyDownEffect)(r,"left",(()=>d((i-m+s)%s)),[d,i,m,s]),(0,Ir.useKeyDownEffect)(r,"right",(()=>d((i+m+s)%s)),[d,i,m,s]),(0,Ir.useKeyDownEffect)(r,"home",(()=>d(0)),[d]),(0,Ir.useKeyDownEffect)(r,"end",(()=>d(s-1)),[d,s]),(0,Ir.useKeyDownEffect)(r,["enter","space"],p,[p]),c.createElement(_$,{ref:r},t.map(((e,t)=>c.createElement(y$,{key:e,index:t,name:wt[e].displayName,isActive:a===e,onClick:()=>o({provider:e}),onFocus:()=>l(t),tabIndex:a===e?0:-1,role:"tab",id:`provider-tab-${e}`,"aria-controls":`provider-tabpanel-${e}`}))))};function w$(){return w$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w$.apply(this,arguments)}const T$=(0,p.default)(sp.Headline).attrs((()=>({as:"h2",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XX_SMALL}))).withConfig({displayName:"providerPanel__MediaSubheading",componentId:"sc-1c53rqi-0"})(["margin-top:24px;padding:0 24px;",""],(e=>e.shouldDisplay||"display: none;")),S$=p.default.div.withConfig({displayName:"providerPanel__ProviderWrapper",componentId:"sc-1c53rqi-1"})(["position:relative;display:flex;flex-direction:column;height:100%;min-height:100px;max-width:100%;top:0;left:0;",""],(e=>{let{hidden:t}=e;return t&&(0,p.css)(["position:absolute;visibility:hidden;"])}));const C$=function ProviderPanel(e){let{providerType:t,isActive:n,searchTerm:r,...a}=e;const{insertElement:o}=mW((e=>({insertElement:e.actions.insertElement}))),{actions:{registerUsage:i}}=Uo(),{updateBaseColor:l}=Yl((e=>{let{actions:{updateBaseColor:t}}=e;return{updateBaseColor:t}})),s=(0,u.useCallback)((e=>{e?.attribution?.registerUsageUrl&&i({registerUsageUrl:e.attribution.registerUsageUrl})}),[i]),p=(0,u.useCallback)(((e,t)=>{yv.default.set(e.id,{url:t,type:"cached"}),o(e.type,{resource:e}),s(e),e.baseColor||l(e)}),[o,s,l]),{media3p:m}=Gl((e=>{let{media3p:t}=e;return{media3p:t}}));if(!n)return c.createElement(S$,w$({},a,{hidden:!0}));const g=m[t].state,f=m[t].actions,h=g.categories.selectedCategoryId?g.categories.categories.find((e=>e.id===g.categories.selectedCategoryId)).label:(0,d.__)("Trending","web-stories"),b=Boolean(g.media?.length||g.categories.selectedCategoryId),E=(0,d.__)("Search Results","web-stories");return c.createElement(S$,a,wt[t].supportsCategories&&c.createElement(OW,{items:g.categories.categories,selectedItemId:g.categories.selectedCategoryId,selectItem:f.selectCategory,deselectItem:f.deselectCategory}),c.createElement(T$,{"data-testid":"media-subheading",shouldDisplay:b},r.length&&!g.categories.selectedCategoryId?E:h),c.createElement($V,{providerType:t,resources:g.media,isMediaLoading:g.isMediaLoading,isMediaLoaded:g.isMediaLoaded,hasMore:g.hasMore,setNextPage:f.setNextPage,onInsert:p,searchTerm:r,selectedCategoryId:g.categories.selectedCategoryId}))};function I$(){return I$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I$.apply(this,arguments)}const x$=p.default.div.withConfig({displayName:"media3pPane__PaneBottom",componentId:"sc-1hq1xk8-0"})(["position:relative;height:100%;flex:1 1 auto;min-height:0;"]);const A$=function Media3pPane(e){const{isActive:t}=e,{searchTerm:n,selectedProvider:r,setSelectedProvider:a,setSearchTerm:o,media3p:i}=Gl((e=>{let{media3p:{state:{selectedProvider:t,searchTerm:n},actions:{setSelectedProvider:r,setSearchTerm:a}},media3p:o}=e;return{searchTerm:n,selectedProvider:t,setSelectedProvider:r,setSearchTerm:a,media3p:o}}));(0,u.useEffect)((()=>{t&&!r&&a({provider:Object.keys(wt)[0]})}),[t,r,a]);const l=i[r]?.state?.categories?.selectedCategoryId;(0,u.useEffect)((()=>{n.length&&(0,P.trackEvent)("search",{search_type:"media3p",search_term:n,search_filter:r,search_category:l})}),[r,n,l]);const s=(0,u.useCallback)((e=>{const t=e.trim();t!==n&&o({searchTerm:t})}),[n,o]),p=(0,u.useRef)(),m=(0,C.useFeatures)(),g=(0,u.useMemo)((()=>Object.keys(wt).filter((e=>!wt[e].featureName||m[wt[e].featureName]))),[m]);return c.createElement(c.Fragment,null,t&&c.createElement(g$,null),c.createElement(ZW,I$({id:f$},e),c.createElement(FW,null,c.createElement(HW,null,c.createElement(WW,null,c.createElement(yW,{initialValue:n,placeholder:(0,d.__)("Search","web-stories"),onSearch:s,disabled:Boolean(r&&wt[r].supportsCategories&&i[r]?.state.categories.selectedCategoryId)})),c.createElement(v$,{providers:g})),c.createElement(x$,{ref:p},g.map((e=>c.createElement(C$,{key:e,providerType:e,isActive:e===r,searchTerm:n,role:"tabpanel","aria-labelledby":`provider-tab-${e}`,id:`provider-tabpanel-${e}`})))))))};const k$=function Media3pIcon(){return c.createElement(Uy,{title:(0,d.__)("Explore Media","web-stories")})},O$=ee.PAGE_WIDTH/3,P$=p.default.button.withConfig({displayName:"shapePreview__Aspect",componentId:"sc-1pj9cm0-0"})(["background:transparent;outline:none;border:0;padding:0;position:relative;border-radius:",";background-color:",";&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.previewOverlay}),Ip.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return up.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),N$=p.default.div.withConfig({displayName:"shapePreview__AspectInner",componentId:"sc-1pj9cm0-1"})(["position:relative;padding-bottom:95.5%;"]),R$=p.default.div.withConfig({displayName:"shapePreview__ShapePreviewContainer",componentId:"sc-1pj9cm0-2"})(["position:absolute;top:0;left:0;height:100%;width:100%;border-radius:",";display:flex;justify-content:center;align-items:center;svg{display:inline-block;width:36px;height:36px;}"],(e=>{let{theme:t}=e;return t.borders.radius.small})),M$=p.default.div.withConfig({displayName:"shapePreview__ShapeClone",componentId:"sc-1pj9cm0-3"})(["position:absolute;top:0;left:0;opacity:0;width:",";height:",";svg{display:inline-block;width:100%;height:100%;path{fill:#c4c4c4;}}"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`})),L$=p.default.div.withConfig({displayName:"shapePreview__ShapePreviewSizer",componentId:"sc-1pj9cm0-4"})(["padding-top:100%;"]),D$=p.default.path.withConfig({displayName:"shapePreview__Path",componentId:"sc-1pj9cm0-5"})(["fill:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}));const B$=function ShapePreview(e){let{mask:t,isPreview:n,index:r}=e;const{insertElement:a}=mW((e=>({insertElement:e.actions.insertElement}))),{dataToEditorX:o,dataToEditorY:i}=(0,Bc.default)((e=>({dataToEditorX:e.actions.dataToEditorX,dataToEditorY:e.actions.dataToEditorY}))),[l,s]=(0,u.useState)(!1),d=()=>s(!0),p=()=>s(!1),m=(0,u.useRef)(),g=(0,u.createRef)(),f=(0,u.useMemo)((()=>({backgroundColor:(0,jw.default)("#c4c4c4"),width:O$*t.ratio,height:O$,mask:{type:t.type},lockAspectRatio:$n.MaskTypes.RECTANGLE!==t.type})),[t.ratio,t.type]),h=(0,u.useCallback)((()=>{a("shape",f),(0,P.trackEvent)("insert_shape",{name:t.type})}),[a,f,t.type]),b=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return c.createElement("svg",{viewBox:"0 0 1 "+1/(n&&t.iconRatio?t.iconRatio:t.ratio),width:36*(n&&t.iconRatio?t.iconRatio:t.ratio),height:36},e&&c.createElement("title",null,t.name),c.createElement(D$,{d:n&&t.iconPath?t.iconPath:t.path,ref:g}))};return c.createElement(P$,{ref:m,onClick:h,tabIndex:0===r?0:-1,"aria-label":t.name,onPointerEnter:d,onFocus:d,onPointerLeave:p,onBlur:p},c.createElement(N$,null,c.createElement(R$,{key:t.type},c.createElement(L$,null),b()),l&&c.createElement(SV,null)),c.createElement(vV,{type:"shape",elementProps:f,cloneElement:M$,cloneProps:{width:o(O$*t.ratio),height:i(O$),children:b(!1)}}))},F$=(0,p.default)(m.Button).attrs({size:g.BUTTON_SIZES.SMALL}).withConfig({displayName:"stickerPreview__StickerButton",componentId:"sc-rjblwe-0"})(["position:relative;padding:0 0 95.5% 0;margin:0;height:60px;background-color:",";&.",",&[data-focus-visible-added] [role='presentation']{box-shadow:none;}&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.previewOverlay}),Ip.FOCUS_VISIBLE_SELECTOR,Ip.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return up.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),H$=p.default.div.withConfig({displayName:"stickerPreview__StickerInner",componentId:"sc-rjblwe-1"})(["position:absolute;top:0;left:0;height:100%;width:100%;display:flex;align-items:center;justify-content:center;"]),U$=p.default.div.withConfig({displayName:"stickerPreview__StickerClone",componentId:"sc-rjblwe-2"})(["position:absolute;top:0;left:0;opacity:0;width:",";height:",";"],(e=>{let{width:t}=e;return`${t}px`}),(e=>{let{height:t}=e;return`${t}px`}));const j$=function StickerPreview(e){let{stickerType:t,index:n}=e;const{insertElement:r}=mW((e=>({insertElement:e.actions.insertElement}))),{dataToEditorX:a,dataToEditorY:o}=(0,Bc.default)((e=>({dataToEditorX:e.actions.dataToEditorX,dataToEditorY:e.actions.dataToEditorY}))),i=Ql.default[t],l=i.aspectRatio,s=(0,u.useMemo)((()=>({width:O$*l,height:O$,sticker:{type:t}})),[l,t]),[d,p]=(0,u.useState)(!1),m=()=>p(!0),g=()=>p(!1),f=i.svg;return c.createElement(F$,{"data-testid":`library-sticker-${t}`,onClick:()=>r("sticker",{width:O$,sticker:{type:t}}),tabIndex:0===n?0:-1,onPointerEnter:m,onFocus:m,onPointerLeave:g,onBlur:g},c.createElement(H$,null,c.createElement(f,{style:{height:l<.955?"60%":"auto",width:l<.955?"auto":"60%"}}),d&&c.createElement(SV,null),c.createElement(vV,{type:"sticker",elementProps:s,cloneElement:U$,cloneProps:{width:a(O$*(l<1?l:1)),height:o(O$/(l<1?1:l)),children:c.createElement(f,{style:{height:"auto",width:"100%"}})}})))},z$=RW("shapes");function G$(){return G$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G$.apply(this,arguments)}const Y$=p.default.div.withConfig({displayName:"shapesPane__SectionContent",componentId:"sc-ffcyax-0"})(["position:relative;display:grid;grid-column-gap:12px;grid-row-gap:24px;@media screen and (min-width:1220px){grid-template-columns:repeat(4,1fr);}@media screen and (min-width:1100px) and (max-width:1220px){grid-template-columns:repeat(3,1fr);}@media screen and (max-width:1100px){grid-template-columns:repeat(2,1fr);}"]),Z$=Object.keys(Ql.default);const W$=function ShapesPane(e){const t=(0,u.useRef)();YT({ref:t});const n=(0,u.useRef)(null);return YT({ref:n}),c.createElement(NW,G$({id:z$},e,{isOverflowScrollable:!0}),c.createElement(wW,{"data-testid":"shapes-library-pane",title:(0,d.__)("Shapes","web-stories")},c.createElement(Y$,{ref:t},$n.MASKS.filter((e=>e.showInLibrary)).map(((e,t)=>c.createElement(B$,{mask:e,key:e.type,index:t,isPreview:!0}))))),c.createElement(wW,{"data-testid":"stickers-library-pane",title:(0,d.__)("Stickers","web-stories")},c.createElement(Y$,{ref:n},Z$.map(((e,t)=>c.createElement(j$,{key:e,index:t,stickerType:e}))))))};const V$=function ShapesIcon(){return c.createElement(B_,{title:(0,d.__)("Shapes library","web-stories")})};function $$(){return $$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$$.apply(this,arguments)}const q$=p.default.div.withConfig({displayName:"toggle__Wrapper",componentId:"sc-29rl44-0"})(["padding:","px;"],4),K$=p.default.div.withConfig({displayName:"toggle__Background",componentId:"sc-29rl44-1"})((e=>{let{theme:t}=e;return(0,p.css)(["position:absolute;top:-","px;left:-","px;height:","px;width:","px;background-color:transparent;border-radius:",";border:","px solid ",";pointer-events:none;transition:all 0.3s;"],1,1,20,44,t.borders.radius.x_large,1,t.colors.border.defaultNormal)})),X$=p.default.span.withConfig({displayName:"toggle__Circle",componentId:"sc-29rl44-2"})((e=>{let{theme:t}=e;return(0,p.css)(["pointer-events:none;:after{content:'';position:absolute;top:","px;left:","px;height:","px;width:","px;background-color:",";border-radius:",";cursor:pointer;transition:background-color 0.3s,border-color 0.3s,left 0.15s;}"],-5,-5,28,28,t.colors.fg.secondary,t.borders.radius.round)})),Q$=p.default.div.withConfig({displayName:"toggle__IconContainer",componentId:"sc-29rl44-3"})((e=>{let{theme:t}=e;return(0,p.css)(["position:absolute;width:","px;top:","px;left:","px;z-index:1;opacity:0;transition:opacity 0.15s;pointer-events:none;svg{color:",";}"],32,-6,19,t.colors.standard.white)})),J$=p.default.div.withConfig({displayName:"toggle__ToggleContainer",componentId:"sc-29rl44-4"})((e=>{let{theme:t}=e;return(0,p.css)(["position:relative;height:","px;width:","px;background-color:transparent;border-radius:",";input[type='checkbox']{position:absolute;top:-","px;left:-","px;height:","px;width:","px;margin:0;opacity:0;cursor:pointer;:disabled{cursor:default;~ ","{border-color:",";}:checked ~ ","{background-color:",";border-color:",";}~ ",":after{background-color:",";}:checked ~ ",":after{background-color:",";}~ "," svg{color:",";}}&.","{~ ","{outline:none;box-shadow:0 0 0 5px ",",0 0 0 7px ",";}}:checked{~ ","{background-color:",";border-color:",";}~ ",":after{left:","px;background-color:",";}~ ","{opacity:1;}}:hover{:not(:disabled) ~ ","{border-color:",";}:checked:not(:disabled) ~ ","{background-color:",";border-color:",";}}:active{~ ","{box-shadow:0 0 0 8px ",";}}}"],20,44,t.borders.radius.x_large,.5,.5,20,44,K$,t.colors.fg.disable,K$,t.colors.fg.disable,t.colors.fg.disable,X$,t.colors.fg.disable,X$,t.colors.bg.secondary,Q$,t.colors.fg.disable,Ip.FOCUS_VISIBLE_SELECTOR,K$,t.colors.bg.primary,t.colors.border.focus,K$,t.colors.interactiveBg.positivePress,t.colors.interactiveBg.positivePress,X$,21,t.colors.interactiveBg.positiveNormal,Q$,K$,t.colors.fg.secondary,K$,t.colors.interactiveBg.positiveHover,t.colors.interactiveBg.positiveHover,K$,t.colors.shadow.active)})),eq=e=>{let{className:t,...n}=e;return c.createElement(q$,{className:t},c.createElement(J$,null,c.createElement("input",$$({type:"checkbox"},n)),c.createElement(K$,null),c.createElement(Q$,null,c.createElement(hh.default,null)),c.createElement(X$,null)))};function tq(){return tq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tq.apply(this,arguments)}const nq=p.default.button.withConfig({displayName:"fontPreview__Preview",componentId:"sc-kfwh27-0"})(["position:relative;display:flex;align-items:center;background-color:",";padding:8px 0px;border-radius:",";width:100%;border:none;cursor:pointer;text-align:left;"," &."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{isTextSelected:t}=e;return t?pp:"outline: none;"}),Ip.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return up.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),rq=(0,p.default)(Ke.Text).attrs({forwardedAs:"span"}).withConfig({displayName:"fontPreview__PreviewText",componentId:"sc-kfwh27-1"})(["color:",";font-size:","px;font-weight:",";font-family:",";line-height:normal;margin:",";"],(e=>{let{theme:t,isClone:n}=e;return n?t.colors.standard.black:t.colors.fg.primary}),(e=>{let{fontSize:t}=e;return t}),(e=>{let{fontWeight:t}=e;return t}),(e=>{let{fontFamily:t}=e;return t}),(e=>{let{isClone:t}=e;return t?0:"0px 16px"})),aq=p.default.div.withConfig({displayName:"fontPreview__DragContainer",componentId:"sc-kfwh27-2"})(["position:absolute;opacity:0;background-color:",";width:","px;line-height:","px;"],(e=>{let{theme:t}=e;return t.colors.opacity.white24}),(e=>{let{width:t}=e;return t}),(e=>{let{lineHeight:t}=e;return t}));const oq=function FontPreview(e){let{title:t,element:n,insertPreset:r,getPosition:a,index:o}=e;const i=(0,Kr.getHTMLFormatters)(),{font:l,fontSize:s,content:p}=n,{fontWeight:m}=XT(p),{actions:{maybeEnqueueFontStyle:g}}=Wo(),{dataToEditorX:f,dataToEditorY:h}=(0,Bc.default)((e=>({dataToEditorX:e.actions.dataToEditorX,dataToEditorY:e.actions.dataToEditorY}))),{shouldUseSmartColor:b}=mW((e=>({shouldUseSmartColor:e.state.shouldUseSmartColor}))),E=Ed(),{isTextSelected:y,updateSelectedElements:_}=Qa((e=>{let{state:t,actions:n}=e;return{isTextSelected:eS("text",t.selectedElements),updateSelectedElements:n.updateSelectedElements}})),v=(0,u.useRef)(null);(0,u.useEffect)((()=>{g([{font:l,fontWeight:m,content:(0,zr.stripHTML)(p)}])}),[l,m,p,g]);const w=(0,u.useCallback)(((e,t)=>{let{fontWeight:n,isItalic:r,isUnderline:a,letterSpacing:o}=e;return t=i.setFontWeight(t,n),t=i.toggleItalic(t,r),t=i.toggleUnderline(t,a),t=i.setLetterSpacing(t,o)}),[i]),T=(0,u.useCallback)((async()=>{if(y)return void _({properties:e=>{const t=w(XT(n.content),e.content),r=vn(n,["x","y","content","width"]),a=qL({...e,...r});return{...e,...r,...a,content:t}}});let e=n;const o={isPositioned:!1};if(b){const t=a(n);o.isPositioned=!0,e={...n,...t},o.accessibleColors=await E(e)}r(e,o),(0,P.trackEvent)("insert_text_preset",{name:t})}),[y,a,n,b,r,t,_,w,E]),S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{isClone:n}=e;return c.createElement(rq,tq({font:l,fontSize:s,fontWeight:m},e),n?(0,zr.stripHTML)(p):t)};(0,Ir.useKeyDownEffect)(v,{key:["enter","space"]},T,[T]),YT({ref:v});const[C,I]=(0,u.useState)(!1),x=()=>I(!0),A=()=>I(!1);return c.createElement(nq,{ref:v,onPointerEnter:x,onFocus:x,onPointerLeave:A,onBlur:A,tabIndex:0===o?0:-1,isTextSelected:y,"aria-label":y?(0,$e.default)(
/* translators: %s: preset name */
(0,d.__)("Apply preset: %s","web-stories"),t):null},S(),C&&!y&&c.createElement(SV,null),c.createElement(vV,{cloneElement:aq,cloneProps:{children:S({fontSize:h(s),isClone:!0}),width:f(n.width),lineHeight:Math.ceil(h(s))},elementProps:n,type:"text",onClick:T}))},iq=RW("text"),lq=(0,aa.dataFontEm)(1),sq="text";const cq=function(e){let{shouldUseSmartColor:t}=e;const{insertElement:n}=mW((e=>({insertElement:e.actions.insertElement}))),{state:{versionNumber:r}}=Br(),a=(0,Kr.getHTMLFormatters)(),{setColor:o}=a,[i,l]=(0,u.useState)(null),[s,c]=(0,u.useState)(null),d=(0,u.useRef)(null),p=Ed();(0,u.useEffect)((()=>{d.current?.element&&!d.current.versionNumber?d.current.versionNumber=r:d.current?.versionNumber&&(d.current=null)}),[r]);const m=(0,u.useCallback)((e=>{const{y:t}=e;if(!d.current)return t;const{element:{height:n,y:r}}=d.current;let a=r+n+lq;const{width:o,height:i}=ts(sq,e.width,e.height,{...e,y:a});return a+i>=ee.PAGE_HEIGHT&&(a=t),{width:o,height:i,y:a}}),[]);(0,u.useEffect)((()=>{if(i&&s){const{content:e}=s,{color:t,backgroundColor:r}=i,a=r?{backgroundColor:{color:r},backgroundTextMode:Mn.BACKGROUND_TEXT_MODE.HIGHLIGHT,padding:vv(s)}:null,u={...s,content:t?o(e,{color:t}):e,...a},p=n(sq,{...u,height:(0,Kn.calculateTextHeight)(u,u.width)});d.current={versionNumber:null,element:p},l(null),c(null)}}),[i,s,n,o]);const g=(0,u.useCallback)((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isPositioned:a,accessibleColors:o}=r,i=a?{}:m(e);if(t){if(c({...e,...i}),o)return void l(o);l(await p({...e,...i}))}else{const t=n(sq,{...e,...i});d.current={versionNumber:null,element:t}}}),[m,p,t,n]);return{getPosition:m,insertPreset:g}};const dq=function(e){switch(e.length){case 0:return"";case 1:return e[0];case 2:return(0,$e.default)(
/* translators: %1$s: first item of list. %2$s: second item of list. */
(0,d.__)("%1$s and %2$s","web-stories"),e[0],e[1]);default:return(0,$e.default)(
/* translators: %1$s: is a comma separated list. %2$s: last entry in list  */
(0,d.__)("%1$s, and %2$s","web-stories"),e.slice(0,e.length-1).join(
/* translators: delimiter used in a list */
(0,d.__)(", ","web-stories")),e[e.length-1])}},uq=p.default.div.withConfig({displayName:"common__FullWidthWrapper",componentId:"sc-10l2iqe-0"})(["margin-left:-",";margin-right:-",";"],PW,PW);function pq(e){return Array.from(new Set(e.map((e=>{let{elements:t=[]}=e;return t.map((e=>"text"===e.type&&Boolean(e.font?.family)?e.font?.family:null))})).flat().filter(Boolean)))||[]}const mq=(0,p.css)(["margin-top:38px;padding-top:2px;width:100%;height:100%;"]),gq=p.default.div.withConfig({displayName:"virtualizedPanelGrid__VirtualizedWrapper",componentId:"sc-qhv222-0"})(["height:",";width:100%;position:relative;"],(e=>{let{height:t}=e;return`${t}px`}));gq.propTypes={height:za().number.isRequired};const fq=p.default.div.withConfig({displayName:"virtualizedPanelGrid__VirtualizedContainer",componentId:"sc-qhv222-1"})(["position:absolute;top:0;left:",";display:grid;grid-template-columns:1fr 1fr;grid-template-columns:",";grid-template-rows:",";gap:","px;width:calc(100% - ",");height:100%;margin-top:4px;"],(e=>{let{paneLeft:t}=e;return t}),(e=>{let{columnWidth:t}=e;return`\n    repeat(auto-fill, ${t}px)`}),(e=>{let{rowHeight:t}=e;return`minmax(${t}px, auto)`}),(e=>{let{rowGap:t}=e;return t}),(e=>{let{paneLeft:t}=e;return t}));fq.propTypes={columnWidth:za().number.isRequired,rowHeight:za().number.isRequired,rowGap:za().number,paneLeft:za().oneOfType([za().string,za().number])},fq.defaultProps={rowGap:12,paneLeft:0};var hq,bq,Eq;function yq(){return yq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yq.apply(this,arguments)}const SvgDesertBw=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",yq({viewBox:"0 0 274 118",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,hq||(hq=c.createElement("path",{d:"M59.68 117.706 8.551 106.934C2.505 105.66-.951 99.261 1.3 93.506l1.18-3.019a10 10 0 0 1 7.987-6.268l78.794-10.544a10.003 10.003 0 0 0 2.525-.683l82.061-34.244a10 10 0 0 1 8.263.255l56.296 27.675c.436.215.886.397 1.349.545l26.84 8.637c9.132 2.939 9.287 15.804.228 18.962l-26.529 9.248c-.819.285-1.671.463-2.536.529L62.497 117.892a9.985 9.985 0 0 1-2.818-.186Z",fill:"#767E80"})),bq||(bq=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M224 26a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v31h4V44a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-7v17h-10V49h-7a2 2 0 0 1-2-2V31a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v13h4V26ZM120.857 53.178a2.143 2.143 0 0 1 4.286 0v14.25h1.714v-5.357a1.072 1.072 0 0 1 2.143 0V68.5a1.146 1.146 0 0 1-.048.319 1.073 1.073 0 0 1-1.023.753h-2.786v5.892h-4.286v-7.892h-2.786A1.073 1.073 0 0 1 117 66.5v-6.429a1.072 1.072 0 0 1 2.143 0v5.358h1.714v-12.25ZM64.786 8a8 8 0 0 1 8-8h.428a8 8 0 0 1 8 8v34.643h6.572V22a4 4 0 0 1 4-4H92a4 4 0 0 1 4 4v24.857a4 4 0 0 1-4 4H81.214v42.786H64.786V78.857H54a3.987 3.987 0 0 1-2.828-1.171A3.988 3.988 0 0 1 50 74.857V50a4 4 0 0 1 4-4h.214a4 4 0 0 1 4 4v20.643h6.572V8Z",fill:"#ADB1B3"})),Eq||(Eq=c.createElement("circle",{cx:213,cy:72,r:13,fill:"#E4E5E6"})))},_q=(0,c.memo)(SvgDesertBw),vq=p.default.div.withConfig({displayName:"emptyContentMessage__Message",componentId:"sc-vwmhk4-0"})(["display:flex;flex-direction:column;align-items:center;max-width:400px;margin:8vh auto;text-align:center;*{text-align:center;margin:0 auto;}"]),wq=(0,p.default)(_q).withConfig({displayName:"emptyContentMessage__EmptyImage",componentId:"sc-vwmhk4-1"})(["margin-bottom:48px;"]);const Tq=function EmptyContentMessage(e){let{children:t,...n}=e;return c.createElement(vq,n,c.createElement(wq,{"aria-hidden":!0,width:274,height:118}),t)};var Sq=n(78720);function Cq(e,t){return e?{content:t?`<span style="color: #fff">${e}<span>`:e}:{}}function TextSetContainer(e){let{pageSize:t,children:n}=e;return t?c.createElement(ps,{pageSize:t},n):n}const Iq=function TextSetElements(e){let{elements:t,isForDisplay:n,pageSize:r}=e;const{textSetHeight:a,textSetWidth:o}=t[0],i=n?(ee.PAGE_WIDTH-o)/2:0,l=n?(ee.PAGE_WIDTH-a)/2:0;return c.createElement(TextSetContainer,{pageSize:r},t.map((e=>{let{id:t,content:r,normalizedOffsetX:a,normalizedOffsetY:o,...s}=e;return c.createElement(qc,{previewMode:!0,key:t,element:{id:t,...Cq(r,n),...s,x:a+i,y:o+l}})})))};function xq(){return xq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xq.apply(this,arguments)}const Aq=p.default.button.withConfig({displayName:"textSet__TextSetItem",componentId:"sc-1hor9ow-0"})(["border:0;background:none;position:absolute;top:0;height:","px;width:","px;display:flex;align-items:center;justify-content:center;flex-direction:column;transform:",";background-color:",";border-radius:",";cursor:pointer;transition:background-color ",";outline:none;&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],Oe,Oe,(e=>{let{translateX:t,translateY:n}=e;return`translateX(${t}px) translateY(${n}px)`}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),(e=>{let{theme:t}=e;return t.borders.radius.small}),g.BUTTON_TRANSITION_TIMING,Ip.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return up.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),kq=p.default.img.withConfig({displayName:"textSet__TextSetImg",componentId:"sc-1hor9ow-1"})(["width:","px;height:","px;"],Oe,Oe),Oq=p.default.div.withConfig({displayName:"textSet__DragContainer",componentId:"sc-1hor9ow-2"})(["position:absolute;opacity:0;width:","px;height:","px;background-color:",";"],(e=>{let{width:t}=e;return t}),(e=>{let{height:t}=e;return t}),(e=>{let{theme:t}=e;return t.colors.opacity.white24}));function TextSet(e,t){let{id:n,elements:r,translateY:a,translateX:o,isActive:i,index:l,...s}=e;const{insertTextSet:d}=mW((e=>({insertTextSet:e.actions.insertTextSet}))),{cdnURL:p}=U(),{pageWidth:m,pageHeight:g}=gs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{pageWidth:t,pageHeight:n}})),f=(0,u.useCallback)((()=>{d(r),(0,P.trackEvent)("insert_textset")}),[r,d]),h=(0,u.useCallback)((e=>{let{code:t}=e;"Enter"!==t&&"Space"!==t||f()}),[f]);YT({ref:t.current});const[b,E]=(0,u.useState)(!1),{textSetHeight:y,textSetWidth:_}=r[0],v=(0,aa.dataToEditorX)(_,m),w=(0,aa.dataToEditorY)(y,g);return c.createElement(Aq,xq({translateX:o,translateY:a,ref:t,onKeyUp:h,onPointerEnter:()=>E(!0),onPointerLeave:()=>E(!1),tabIndex:0===l?0:-1},s),c.createElement(kq,{src:`${p}images/text-sets/${n}.png`,alt:"",crossOrigin:"anonymous",decoding:"async"}),(i||b)&&c.createElement(SV,null),c.createElement(vV,{type:"textSet",elements:r,elementProps:{},onClick:f,cloneElement:Oq,cloneProps:{width:v,height:w,children:c.createElement(Iq,{elements:r,pageSize:{width:m,height:g}})}}))}const Pq=(0,u.forwardRef)(TextSet);TextSet.displayName="TextSet";const Nq=Pq,Rq={contact:(0,d._x)("Contact","text set category","web-stories"),editorial:(0,d._x)("Editorial","text set category","web-stories"),list:(0,d._x)("List","text set category","web-stories"),cover:(0,d._x)("Cover","text set category","web-stories"),section_header:(0,d._x)("Header","text set category","web-stories"),step:(0,d._x)("Steps","text set category","web-stories"),table:(0,d._x)("Table","text set category","web-stories"),quote:(0,d._x)("Quote","text set category","web-stories")},Mq={TITLE:(0,d.__)("Text Sets","web-stories"),SWITCH_LABEL:(0,d.__)("Match fonts from story","web-stories")},Lq={width:Oe,height:Oe/ee.PAGE_RATIO};const Dq=function TextSets(e){let{paneRef:t,filteredTextSets:n}=e;const r=(0,u.useRef)(),a=(0,u.useRef)({}),o=(0,u.useMemo)((()=>n.map((e=>e.id))),[n]),i=(0,Sq.useVirtual)({size:Math.ceil((n||[]).length/2),parentRef:t,estimateSize:(0,u.useCallback)((()=>162),[]),overscan:4}),l=(0,Sq.useVirtual)({horizontal:!0,size:2,parentRef:t,estimateSize:(0,u.useCallback)((()=>162),[]),overscan:0}),{activeGridItemId:s,handleGridFocus:p,handleGridItemFocus:m,isGridFocused:g}=function(e){let{containerRef:t,gridItemRefs:n,gridItemIds:r,rowVirtualizer:a}=e;const[o,i]=(0,u.useState)(),[l,s]=(0,u.useState)(!1),c=(0,u.useMemo)((()=>a.virtualItems),[a]),d=(0,u.useRef)();(0,u.useEffect)((()=>{c!==d?.current&&(d.current=c),o&&l&&n.current?.[o]?.focus()}),[o,c,l,n]),YT({ref:t});const p=(0,u.useCallback)((()=>{if(!l){const e=n.current?.[o]?o:r?.[0];i(e),s(!0),n.current?.[e]?.focus()}}),[o,l,r,n]),m=(0,u.useCallback)((e=>{o!==e&&i(e)}),[o]),g=xs(),f=(0,u.useCallback)((()=>{g(),s(!1)}),[g]);return(0,Ir.useKeyDownEffect)(t,"tab",f,[f]),(0,u.useFocusOut)(t,(()=>{s(!1)}),[]),(0,u.useMemo)((()=>({handleGridFocus:p,handleGridItemFocus:m,activeGridItemId:o,isGridFocused:l})),[o,l,p,m])}({rowVirtualizer:i,containerRef:r,gridItemRefs:a,gridItemIds:o});return c.createElement(ps,{pageSize:Lq},c.createElement(gq,{height:i.totalSize},c.createElement(fq,{height:i.totalSize,ref:r,columnWidth:Oe,rowHeight:Oe,onFocus:p,role:"group","aria-label":(0,d.__)("Text Set Options","web-stories")},i.virtualItems.map((e=>l.virtualItems.map((t=>{const r=(e=>{let{columnIndex:t,rowIndex:n}=e;return 0===t?2*n:2*n+1})({columnIndex:t.index,rowIndex:e.index}),o=n[r];if(!o?.elements)return null;const i=s===o.id&&g;return c.createElement(Nq,{key:r,id:o.id,"data-testid":`text_set_${o.id}`,ref:e=>a.current[o.id]=e,translateY:e.start,translateX:t.start,"aria-label":o.title,isActive:i,onFocus:()=>m(o.id),elements:o.elements,index:r})})))))))},Bq=p.default.div.withConfig({displayName:"textSetsPane__TitleBar",componentId:"sc-vycaev-0"})(["display:flex;justify-content:space-between;padding:20px 0;"]),Fq=p.default.div.withConfig({displayName:"textSetsPane__TextSetsToggle",componentId:"sc-vycaev-1"})(["display:flex;label{cursor:pointer;margin:auto 12px;color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Hq=p.default.div.withConfig({displayName:"textSetsPane__TextSetsWrapper",componentId:"sc-vycaev-2"})(["",";"],mq);const Uq=function TextSetsPane(e){let{paneRef:t}=e;const{areTextSetsLoading:n,textSets:r}=mW((e=>{let{state:{areTextSetsLoading:t,textSets:n}}=e;return{areTextSetsLoading:t,textSets:n}})),[a,o]=(0,u.useState)(!1),i=(0,u.useRef)(!1),l=(0,u.useMemo)((()=>Object.values(r).flat()),[r]),s=Qa((e=>{let{state:{pages:t}}=e;return t})),[p,m]=(0,u.useState)(Jo.getItemByKey(Qo.TEXT_SET_SETTINGS)?.selectedCategory),g=(0,u.useCallback)((()=>function(e){let{fonts:t,textSets:n}=e;return n.map((e=>e.elements.reduce(((e,n)=>"text"===n.type&&Boolean(n.font?.family)?e|-1!==t.indexOf(n.font?.family):e),!1)&&e)).filter(Boolean)}({fonts:pq(s),textSets:p?r[p]:l})),[l,s,p,r]),f=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((e=>{let{textSetFonts:t=[],textSetCategory:n,elements:r,id:a}=e;return{id:a,title:(0,$e.default)(
/* translators: 1: text set category. 2: list of fonts. */
(0,d._n)("Text set %1$s with %2$s font","Text set %1$s with %2$s fonts",t.length,"web-stories"),Rq[n],dq(t)),elements:r}}))}),[]),h=(0,u.useMemo)((()=>f(a?g():p?r?.[p]:l)),[p,r,l,f,g,a]),b=(0,u.useMemo)((()=>[{id:null,label:(0,d._x)("All","text sets","web-stories")},...Object.keys(r).map((e=>({id:e,label:Rq[e]??e})))]),[r]),E=(0,wx.default)(),y=(0,u.useCallback)((e=>{m(e),E(null===e?(0,d.__)("Show all text sets","web-stories"):(0,$e.default)(
/* translators: %s: filter category name */
(0,d.__)("Selected text set filter %s","web-stories"),Rq[e])),Jo.setItemByKey(Qo.TEXT_SET_SETTINGS,{selectedCategory:e}),i.current=!0}),[E]),_=(0,u.useCallback)((()=>{requestAnimationFrame((()=>o((e=>!e)))),i.current=!0}),[o]);(0,u.useEffect)((()=>{i.current&&(0,P.trackEvent)("search",{search_type:"textsets",search_term:"",search_category:p,search_filter:a?"show_in_use":void 0})}),[p,a]);const v=(0,u.useMemo)((()=>`section-${(0,pe.default)()}`),[]),w=(0,u.useMemo)((()=>`toggle_text_sets_${(0,pe.default)()}`),[]),T=(0,u.useMemo)((()=>a?(0,d.__)("No matching Text Sets available. Try adding text to your story.","web-stories"):(0,d.__)("No Text Sets available.","web-stories")),[a]);return c.createElement(_W,{id:v},c.createElement(Bq,null,c.createElement(sp.Headline,{as:"h2",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL},Mq.TITLE),c.createElement(Fq,null,c.createElement(Ke.Text,{as:"label",htmlFor:w,size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Mq.SWITCH_LABEL),c.createElement(eq,{id:w,"aria-label":Mq.SWITCH_LABEL,name:w,checked:a,onChange:_}))),c.createElement(uq,null,c.createElement(OW,{items:b,selectedItemId:p,selectItem:y,deselectItem:()=>y(null),ariaLabel:(0,d.__)("Select filter for text sets list","web-stories")})),c.createElement(Hq,null,h?.length||n?c.createElement(Dq,{paneRef:t,filteredTextSets:h}):c.createElement(Tq,null,T)))};const jq=function(e){let{activeIndex:t,setActiveIndex:n,groupRef:r}=e;(0,Ir.useKeyDownEffect)(r,{key:["up","down","left","right"]},(e=>{let{key:a}=e;if(r.current){const e=((e,t)=>{switch(e){case"ArrowUp":return-t;case"ArrowDown":return t;case"ArrowLeft":return-1;case"ArrowRight":return 1;default:return 0}})(a,2),o=r.current.querySelectorAll("button:not([disabled])"),i=o.length-1,l=(t??0)+e,s=Math.max(0,Math.min(i,l));n(s),o[s]&&o[s].focus()}}),[t,n,r])},zq=p.default.button.withConfig({displayName:"styleItem__PresetButton",componentId:"sc-157dmik-0"})(["background-color:",";border-color:transparent;position:relative;cursor:pointer;border-width:0;border-radius:4px;padding:3px;height:100%;width:100%;display:flex;justify-content:center;align-items:center;> svg{width:","px;height:","px;position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);color:",";filter:drop-shadow(0px 0px 4px rgba(0,0,0,0.4));}",""],(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),32,32,16,16,(e=>{let{theme:t}=e;return t.colors.fg.primary}),pp),Gq=p.default.span.withConfig({displayName:"styleItem__HighLight",componentId:"sc-157dmik-1"})(["padding:0 2px;"," box-decoration-break:clone;"],(e=>{let{background:t}=e;return(0,ta.default)(t)})),Yq=p.default.div.withConfig({displayName:"styleItem__TextWrapper",componentId:"sc-157dmik-2"})(["position:relative;display:inline-block;line-height:","px;max-height:","px;overflow:hidden;border-radius:4px;padding:3px;max-width:100%;"," font-size:12px;",""],20,43,(e=>{let{styles:t}=e;return t}),(e=>{let{background:t}=e;return t?(0,ta.default)(t):null}));const Zq=function StyleItem(e){let{style:t,i:n,activeIndex:r,handleOnClick:a,isEditMode:o,activeItemOverlay:i,applyLabel:l=(0,d.__)("Apply style","web-stories")}=e;const s=Qa((e=>{let{state:t}=e;return t.selectedElements})),[p,m]=(0,u.useState)(!1),g=()=>{i&&m(!0)},f=()=>{i&&m(!1)};if(!t)return null;const h=s[0]?.content?(0,zr.stripHTML)(s[0].content):(0,d.__)("Lorem ipsum dolor sit amet","web-stories");return c.createElement(zq,{tabIndex:r===n?0:-1,style:t,onClick:()=>a(t),onPointerEnter:g,onFocus:g,onPointerLeave:f,onBlur:f,"aria-label":o?(0,d.__)("Delete style","web-stories"):l},(()=>{const e=t.backgroundTextMode===Mn.BACKGROUND_TEXT_MODE.HIGHLIGHT,n=t.backgroundTextMode===Mn.BACKGROUND_TEXT_MODE.FILL;return c.createElement(Yq,{styles:qT(t,!0),background:n?t.backgroundColor:null},e?c.createElement(Gq,{background:t.backgroundColor},h):h)})(),o&&c.createElement(cp.default,null),!o&&p&&i)};function Wq(){return Wq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wq.apply(this,arguments)}const Vq=p.default.div.withConfig({displayName:"styleGroup__Group",componentId:"sc-1cojpnq-0"})(["display:grid;grid-template-columns:repeat(2,1fr);grid-column-gap:20px;grid-row-gap:16px;"]),$q=p.default.div.withConfig({displayName:"styleGroup__ButtonWrapper",componentId:"sc-1cojpnq-1"})(["height:","px;width:","px;"],64,(e=>{let{width:t}=e;return t}));const qq=function StyleGroup(e){let{styles:t,isEditMode:n=!1,handleClick:r,buttonWidth:a=128,...o}=e;const[i,l]=(0,u.useState)(0),s=(0,u.useRef)(null);return jq({activeIndex:i,setActiveIndex:l,groupRef:s,type:Ue}),c.createElement(Vq,{ref:s},t.map(((e,t)=>c.createElement($q,{key:JSON.stringify(e),width:a},c.createElement(Zq,Wq({style:e,i:t,activeIndex:i,handleOnClick:r,isEditMode:n},o))))))};function Kq(){return Kq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kq.apply(this,arguments)}const Xq=p.default.div.withConfig({displayName:"header__Wrapper",componentId:"sc-10q8amw-0"})(["display:flex;justify-content:space-between;align-items:center;height:","px;padding:4px 8px 4px 8px;position:relative;border-bottom:1px solid ",";"],44,(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),Qq=p.default.div.withConfig({displayName:"header__Actions",componentId:"sc-10q8amw-1"})(["display:flex;margin-left:auto;"]),Jq=(0,p.default)(m.Button).withConfig({displayName:"header__StyledButton",componentId:"sc-10q8amw-2"})(["margin-left:8px;",";"],pp);const eK=function(e){let{children:t,handleClose:n,isEditMode:r=!1,setIsEditMode:a=(()=>{})}=e;const o=(0,u.useRef)();(0,u.useEffect)((()=>{o.current?.focus()}),[]);const i={type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE,onClick:e=>{e.stopPropagation(),a(!r)},isEditMode:r};return c.createElement(Xq,null,t,c.createElement(Qq,null,c.createElement(Jq,Kq({},i,{"aria-label":r?(0,d.__)("Exit edit mode","web-stories"):(0,d.__)("Edit styles","web-stories")}),r?(0,d.__)("Done","web-stories"):c.createElement(Ny.default,null)),c.createElement(Jq,{"aria-label":(0,d.__)("Close","web-stories"),onClick:n,type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE,ref:o},c.createElement(cp.default,null))))},tK="DELETE_STYLE_PRESET_DIALOG_DISMISSED",nK=p.default.label.withConfig({displayName:"confirmationDialog__Label",componentId:"sc-ezab89-0"})(["margin-left:12px;"]),rK=p.default.footer.withConfig({displayName:"confirmationDialog__CheckboxWrapper",componentId:"sc-ezab89-1"})(["display:flex;margin-top:12px;padding:14px 0 0 9px;border-top:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary}));const aK=function(e){let{onClose:t,onPrimary:n}=e;const[r,a]=(0,u.useState)(Jo.getItemByKey(Qo[tK])),o=(0,d.__)("This is a global style. Deleting this style will remove it from the Saved Styles across all stories and the style will no longer be available to any other users on the site.","web-stories"),i=`cb-${(0,pe.default)()}`;return c.createElement(y,{isOpen:!0,onClose:t,secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:n,primaryText:(0,d.__)("Delete","web-stories")},c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o),c.createElement(rK,null,c.createElement(uS.Checkbox,{id:i,checked:r,onChange:()=>{Jo.setItemByKey(Qo[tK],!r),a(!r)}}),c.createElement(nK,{htmlFor:i},c.createElement(Ke.Text,{as:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Don't ask for confirmation again.","web-stories")))))};function oK(){return oK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oK.apply(this,arguments)}const iK=p.default.div.withConfig({displayName:"styleManager__Container",componentId:"sc-4hlmhs-0"})(["border-radius:8px;background:",";width:256px;user-select:none;display:flex;flex-direction:column;align-items:stretch;overflow:hidden;&.style-manager-appear{opacity:0.01;margin-top:-10px;&.style-manager-appear-active{opacity:1;margin-top:0;transition:300ms ease-out;transition-property:opacity,margin-top;}}"],(e=>{let{theme:t}=e;return t.colors.bg.secondary})),lK=p.default.div.withConfig({displayName:"styleManager__Body",componentId:"sc-4hlmhs-1"})(["display:flex;margin:8px 12px 16px;"]),sK=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"styleManager__StyledText",componentId:"sc-4hlmhs-2"})(["margin:0 0 0 8px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}));const cK=function StyleManager(e){let{styles:t,onClose:n,applyStyle:r,...a}=e;const[o,i]=(0,u.useState)(!1),[l,s]=(0,u.useState)(!1),[p,m]=(0,u.useState)(null),g=(0,u.useRef)(null),f=(0,u.useRef)(document.activeElement),h=(0,u.useCallback)((e=>{f.current&&f.current.focus(),n(e)}),[n]);(0,Ir.useKeyDownEffect)(g,"esc",h);const b=CZ({onEmpty:h});return(0,u.useFocusOut)(g,(()=>{l||n()}),[l]),hw({ref:g}),c.createElement(fw.default,{nodeRef:g,in:!0,appear:!0,classNames:"style-manager",timeout:300},c.createElement(iK,{role:"dialog","aria-label":(0,d.__)("Style presets manager","web-stories"),ref:g},c.createElement(eK,{handleClose:h,isEditMode:o,setIsEditMode:i},c.createElement(sK,null,(0,d.__)("Saved Styles","web-stories"))),c.createElement(lK,null,c.createElement(qq,oK({styles:[...t].reverse(),handleClick:e=>{if(!o)return void r(e);Jo.getItemByKey(Qo[tK])?b(e):(s(!0),m(e))},isEditMode:o,buttonWidth:106},a))),l&&c.createElement(aK,{onClose:()=>s(!1),onPrimary:()=>{b(p),m(null),s(!1)}})))},dK=p.default.div.withConfig({displayName:"styleManager__NoStylesWrapper",componentId:"sc-1u9p583-0"})(["display:flex;justify-content:center;align-items:center;width:calc(100% + 32px);margin:0 0 -8px -16px;background-color:",";height:64px;"],(e=>{let{theme:t}=e;return t.colors.opacity.black24})),uK=(0,p.default)(m.Button).attrs({type:g.BUTTON_TYPES.PLAIN,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.RECTANGLE}).withConfig({displayName:"styleManager__MoreButton",componentId:"sc-1u9p583-1"})(["",";margin:12px 0;padding:0 16px;justify-content:center;align-self:center;width:100%;svg{transform:rotate(-90deg);height:32px;width:32px;margin-left:-4px;}"],pp);function pK(){return pK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pK.apply(this,arguments)}const mK=(0,p.default)(_W).withConfig({displayName:"stylePresets__SectionContainer",componentId:"sc-bczcw0-0"})(["padding:16px 0;margin-bottom:-24px;border-top:1px solid ",";border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.tertiary}),(e=>{let{theme:t}=e;return t.colors.divider.tertiary})),gK=p.default.div.withConfig({displayName:"stylePresets__TitleBar",componentId:"sc-bczcw0-1"})(["display:flex;padding-bottom:16px;justify-content:space-between;align-items:center;"]),fK=p.default.div.withConfig({displayName:"stylePresets__StylesWrapper",componentId:"sc-bczcw0-2"})([""]),hK=(0,p.default)(m.Button).withConfig({displayName:"stylePresets__StyledButton",componentId:"sc-bczcw0-3"})(["margin-left:auto;"]),bK=(0,p.default)(Ke.Text).withConfig({displayName:"stylePresets__NoStylesText",componentId:"sc-bczcw0-4"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),EK={x:40},yK="text";const _K=(0,u.memo)((function PresetPanel(){const{textStyles:e,isText:t,updateSelectedElements:n}=Qa((e=>{let{state:t,actions:n}=e;return{isText:Boolean(t.selectedElements&&eS(yK,t.selectedElements)),textStyles:t.story?.globalStoryStyles?.textStyles||[],updateSelectedElements:n.updateSelectedElements}})),{insertElement:r}=mW((e=>({insertElement:e.actions.insertElement}))),{setColor:a,setFontWeight:o,setLetterSpacing:i,toggleItalic:l,toggleUnderline:s}=(0,Kr.getHTMLFormatters)(),p=(0,u.useRef)(null),m=(0,u.useRef)(null),[f,h]=(0,u.useState)(!1),b=e.length>0,E=(0,u.useCallback)((e=>{n({properties:t=>{const n=_v(t,e,!0),r=qL({...t,...n});return{...n,...r}}})}),[n]),y=yZ({pushUpdate:E}),{addGlobalPreset:_}=tS({presetType:Ue}),v=e=>{t?y(e):((e=>{const{color:t,fontWeight:n,isItalic:c,isUnderline:d,letterSpacing:u}=e;let p=js.content;p=a(p,t),p=o(p,n),p=l(p,c),p=s(p,d),p=i(p,u),r(yK,{...js,...e,content:p})})(e),h(!1))},w=t?{}:{activeItemOverlay:c.createElement(SV,null),applyLabel:(0,d.__)("Add new text","web-stories")};return c.createElement(mK,null,c.createElement(gK,null,c.createElement(sp.Headline,{as:"h2",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL},(0,d.__)("Saved Styles","web-stories")),c.createElement(hK,{type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE,onClick:_,"aria-label":(0,d.__)("Add style","web-stories"),disabled:!t},c.createElement(l_,null))),b&&c.createElement(c.Fragment,null,c.createElement(fK,{ref:m},c.createElement(qq,pK({styles:[...e].reverse().slice(0,2),handleClick:v,buttonWidth:150},w))),c.createElement(uK,{ref:p,onClick:()=>h(!0),"aria-haspopup":"dialog","aria-expanded":f},(0,d.__)("More styles","web-stories"),c.createElement(zp.Disclosure,{isOpen:f})),c.createElement(uw.Popup,{anchor:p,isOpen:f,placement:Vd.PLACEMENT.RIGHT_START,spacing:EK,renderContents:()=>c.createElement(cK,pK({styles:e,applyStyle:v,onClose:()=>h(!1)},w))})),!b&&c.createElement(dK,null,c.createElement(bK,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("No Styles Saved","web-stories"))))}));function vK(){return vK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vK.apply(this,arguments)}const wK=(0,p.default)(NW).withConfig({displayName:"textPane__Pane",componentId:"sc-zvmbdp-0"})(["overflow-y:scroll;max-height:100%;position:relative;"]),TK=p.default.div.withConfig({displayName:"textPane__GridContainer",componentId:"sc-zvmbdp-1"})(["display:grid;grid-template-columns:1fr 1fr;gap:12px;"]),SK=p.default.div.withConfig({displayName:"textPane__SmartColorToggle",componentId:"sc-zvmbdp-2"})(["display:flex;label{cursor:pointer;margin:auto 12px;color:",";}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const CK=function TextPane(e){const t=(0,u.useRef)(),[,n]=(0,u.useState)(),{shouldUseSmartColor:r,setShouldUseSmartColor:a}=mW((e=>({shouldUseSmartColor:e.state.shouldUseSmartColor,setShouldUseSmartColor:e.actions.setShouldUseSmartColor}))),{getPosition:o,insertPreset:i}=cq({shouldUseSmartColor:r}),l=yd((e=>{let{actions:t}=e;return t.generateDeferredCurrentPageCanvas}));(0,u.useResizeEffect)(t,(()=>{n(Date.now())}),[]);const s=(0,u.useCallback)((()=>a((e=>!e))),[a]),p=(0,u.useMemo)((()=>`toggle_auto_color_${(0,pe.default)()}`),[]);return c.createElement(wK,vK({id:iq},e,{ref:t}),c.createElement(SK,null,c.createElement(Ke.Text,{as:"label",htmlFor:p,size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Adaptive text colors","web-stories")),c.createElement(Tooltip,{title:(0,d.__)("May impact performance when inserting text","web-stories")},c.createElement(eq,{id:p,checked:r,onChange:s}))),c.createElement(_W,{onPointerOver:()=>r&&l()},c.createElement(TK,null,zs.map(((e,t)=>{let{title:n,element:r}=e;return c.createElement(oq,{key:n,title:n,element:r,insertPreset:i,getPosition:o,index:t})})))),c.createElement(_K,null),t.current&&c.createElement(Uq,{paneRef:t}))};const IK=function TextIcon(){return c.createElement(lE.default,{title:(0,d.__)("Text library","web-stories")})},xK=RW("pageTemplates"),AK={cover:{name:(0,d.__)("Cover","web-stories")},section:{name:(0,d.__)("Section","web-stories")},quote:{name:(0,d.__)("Quote","web-stories")},editorial:{name:(0,d.__)("Editorial","web-stories")},list:{name:(0,d.__)("List","web-stories")},table:{name:(0,d.__)("Table","web-stories")},steps:{name:(0,d.__)("Steps","web-stories")}};function kK(){return kK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kK.apply(this,arguments)}const OK=p.default.div.withConfig({displayName:"defaultPageTemplate__PageTemplateWrapper",componentId:"sc-kt5s68-0"})([""]),PK=(0,p.default)(m.Button).attrs({type:g.BUTTON_TYPES.PLAIN}).withConfig({displayName:"defaultPageTemplate__PageTemplateButton",componentId:"sc-kt5s68-1"})(["position:relative;display:block;padding:0;border-radius:",";overflow:hidden;&.",",&[data-focus-visible-added] [role='presentation']{box-shadow:none;}&."," [role='presentation'],&[data-focus-visible-added] [role='presentation']{",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),Ip.FOCUS_VISIBLE_SELECTOR,Ip.FOCUS_VISIBLE_SELECTOR,(e=>{let{theme:t}=e;return up.focusCSS(t.colors.border.focus,t.colors.bg.secondary)})),NK=(0,p.default)(BW).withConfig({displayName:"defaultPageTemplate__TemplateTitleContainer",componentId:"sc-kt5s68-2"})(["",":hover &,",":focus &{opacity:1;}"],PK,PK),RK=p.default.img.withConfig({displayName:"defaultPageTemplate__PosterImg",componentId:"sc-kt5s68-3"})(["display:block;width:100%;"]),MK=(0,u.forwardRef)(((e,t)=>{let{page:n,columnWidth:r,isActive:a,onFocus:o,...i}=e;const l=(0,$e.default)(
/* translators: 1: template name. 2: page template name. */
(0,d._x)("%1$s %2$s","page template title","web-stories"),n.title,AK[n.type].name),[s,p]=(0,u.useState)(!1);return c.createElement(OK,{ref:t,role:"listitem"},c.createElement(PK,kK({columnWidth:r,tabIndex:a?0:-1,"aria-label":l,onPointerEnter:()=>p(!0),onPointerLeave:()=>p(!1),onFocus:()=>{p(!0),o?.()},onBlur:()=>p(!1)},i),n.png&&c.createElement(RK,{src:n.png,alt:(0,$e.default)(
/* translators: 1: page title */
(0,d.__)("Snapshot of page template for %1$s","web-stories"),n.title),crossOrigin:"anonymous",decoding:"async",draggable:!1}),s&&c.createElement(SV,null),n.title&&c.createElement(NK,null,c.createElement(Ke.Text,{as:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},l))))}));MK.displayName="DefaultPageTemplate";const LK=MK,DK=p.default.img.withConfig({displayName:"savedPageTemplate__TemplateImage",componentId:"sc-5hfe38-0"})(["width:100%;height:auto;"]),BK=p.default.div.withConfig({displayName:"savedPageTemplate__PageTemplateWrapper",componentId:"sc-5hfe38-1"})(["height:","px;width:","px;cursor:pointer;",";",";"],(e=>{let{pageSize:t}=e;return t.height}),(e=>{let{pageSize:t}=e;return t.width}),(e=>{let{isHighlighted:t}=e;return t&&up.focusCSS}),pp);BK.propTypes={pageSize:Hc.isRequired};const FK=p.default.div.withConfig({displayName:"savedPageTemplate__PreviewPageWrapper",componentId:"sc-5hfe38-2"})(["position:relative;height:","px;width:","px;background-color:",";border-radius:",";overflow:hidden;",""],(e=>{let{pageSize:t}=e;return t.height}),(e=>{let{pageSize:t}=e;return t.width}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondary}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{background:t}=e;return(0,ta.default)(t)}));FK.propTypes={pageSize:Hc.isRequired};const HK=(0,p.default)(DW).withConfig({displayName:"savedPageTemplate__DeleteButton",componentId:"sc-5hfe38-3"})(["top:4px;right:4px;"]);function SavedPageTemplate(e,t){let{page:n,pageSize:r,handleDelete:a,index:o,...i}=e;const{capabilities:{hasUploadMediaAction:l}}=U(),{actions:{updatePageTemplate:s}}=W(),{actions:{uploadFile:p}}=Dt(),{updateSavedTemplate:m}=mW((e=>({updateSavedTemplate:e.actions.updateSavedTemplate}))),g=Rc((e=>{let{actions:t}=e;return t.queuePageImageGeneration})),f=Rc((e=>{let{state:{dataUrls:t}}=e;return t[n.id]}))||n.pregeneratedPageDataUrl,[h,b]=(0,u.useState)(!1);(0,u.useFocusOut)(t,(()=>b(!1)),[]);const{highlightedTemplate:E,onClick:y}=i,_=(0,u.useCallback)((()=>b(!0)),[]),v=(0,u.useCallback)((()=>{b(!1)}),[]),w=n.image?.url||f,T=l&&f&&!n.image?.url;(0,u.useEffect)((()=>{T&&(async()=>{try{const e=await $o(f),t=ce(e,`web-stories-page-template-${n.templateId}.jpg`,"image/jpeg"),r=await p(t,{templateId:n.templateId,mediaSource:"page-template"});s(n.templateId,{featured_media:r.id}),m({templateId:n.templateId,image:{id:r.id,height:r.height,width:r.width,url:r.src}})}catch(e){(0,P.trackError)("upload_generated_page_template_image",e?.message)}})()}),[f,p,s,n.templateId,T,m]),(0,u.useEffect)((()=>{!w&&l&&g(n)}),[w,g,n,l]);const S=(0,u.useRef)(),C=(0,u.useRef)();YT({ref:S},[],2),YT({ref:C},[],2);const I=xs();return(0,Ir.useKeyDownEffect)(C,"tab",I,[I]),c.createElement(BK,{pageSize:r,role:"listitem",ref:t,onPointerEnter:_,onPointerLeave:v,"aria-label":n.title,isHighlighted:n.id===E,onFocus:_,onBlur:v,onClick:y},c.createElement(FK,{pageSize:r,background:n.backgroundColor},w?c.createElement(DK,{alt:n.image?.alt||(0,d.__)("Saved Page Template","web-stories"),src:w,height:n.image?.height,width:n.image?.height,draggable:!1}):c.createElement(ps,{pageSize:{height:r.height,width:r.width}},n.elements.map((e=>c.createElement(qc,{key:e.id,previewMode:!0,element:e})))),h&&c.createElement(SV,{showIcon:!1}),c.createElement(DW,{ref:S,onClick:e=>{e.stopPropagation(),y(e)},"aria-label":(0,d.__)("Use template","web-stories"),$display:h,tabIndex:0===o?0:-1},c.createElement(t_,null)),c.createElement(HK,{ref:C,$display:h,onClick:e=>{e.stopPropagation(),a(n,e)},"aria-label":(0,d.__)("Delete Page Template","web-stories"),tabIndex:h?0:-1},c.createElement(iv,null))))}const UK=(0,u.forwardRef)(SavedPageTemplate);SavedPageTemplate.displayName="SavedPageTemplate";const jK=UK;function zK(){return zK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zK.apply(this,arguments)}const GK=p.default.div.withConfig({displayName:"templateList__WrapperGrid",componentId:"sc-1ukppvz-0"})(["display:grid;width:100%;margin-left:",";margin-bottom:12px;gap:12px;grid-template-columns:",";grid-template-rows:",";"],PW,(e=>{let{columnWidth:t}=e;return`repeat(auto-fit, ${t}px)`}),(e=>{let{rowHeight:t}=e;return`repeat(minmax(${t}px, 1fr))`}));const YK=function TemplateList(e){let{pages:t,parentRef:n,pageSize:r,handleDelete:a,fetchTemplates:o,...i}=e;const{addPage:l}=Qa((e=>{let{actions:t}=e;return{addPage:t.addPage}})),{isRTL:s}=U(),{showSnackbar:p}=(0,jr.useSnackbar)(),[m,g]=(0,u.useState)(),f=(0,u.useRef)(),h=(0,u.useRef)({}),b=(0,u.useCallback)((e=>{let{templateId:t,version:n,title:r,...a}=e;const o=(0,Mn.duplicatePage)(a);l({page:o}),(0,P.trackEvent)("insert_page_template",{name:r||"custom"}),p({message:(0,d.__)("Page Template added.","web-stories"),dismissible:!0})}),[l,p]),E=(0,u.useCallback)((e=>{g(e)}),[]),y=a||o;return(0,u.useEffect)((()=>{t.length>0&&(m&&t.some((e=>e.id===m))||g(t[0].id))}),[m,t]),(0,u.useEffect)((()=>{o?.()}),[o]),(0,cj.default)({containerRef:n,gridRef:f,itemRefs:h,items:t,currentItemId:m,isRTL:s}),c.createElement(GK,{ref:f,columnWidth:r.width,rowHeight:r.containerHeight,role:"list","aria-label":(0,d.__)("Page Template Options","web-stories")},y?t.map(((e,t)=>c.createElement(jK,zK({key:e.id,"data-testid":`page_template_${e.id}`,ref:t=>h.current[e.id]=t,page:e,pageSize:r,onClick:()=>b(e),handleDelete:a,onFocus:()=>E(e.id),index:t},i)))):t.map((e=>c.createElement(LK,zK({ref:t=>h.current[e.id]=t,key:e.id,"data-testid":`page_template_${e.id}`,page:e,pageSize:r,onFocus:()=>E(e.id),isActive:m===e.id,onClick:()=>b(e.story),columnWidth:r.width},i)))))},ZK=p.default.div.withConfig({displayName:"defaultTemplates__ActionRow",componentId:"sc-14vj9wc-0"})(["display:flex;justify-content:space-between;margin:0px 16px 22px 16px;"]),WK=p.default.div.withConfig({displayName:"defaultTemplates__PageTemplatesParentContainer",componentId:"sc-14vj9wc-1"})(["",";margin-top:26px;overflow-x:hidden;overflow-y:scroll;"],mq);const VK=function DefaultTemplates(e){let{pageSize:t}=e;const{actions:{getPageTemplates:n}}=W(),[r,a]=(0,u.useState)([]),[o,i]=(0,u.useState)(!1);(0,u.useEffect)((()=>{!async function(){i(!0);const e=(0,P.getTimeTracker)("load_page_templates");a(await n()),i(!1),e()}()}),[n,a]);const l=(0,u.useRef)(),[s,p]=(0,u.useState)(null),m=(0,u.useMemo)((()=>[{id:null,label:(0,d._x)("All","page templates","web-stories")},...Object.entries(AK).map((e=>{let[t,{name:n}]=e;return{id:t,label:n}}))]),[]),g=(0,u.useMemo)((()=>r.reduce(((e,t)=>[...e,...Object.values(t.postersByPage).map(((e,n)=>({id:`${t.slug}_${n}`,title:t.title,story:t.pages[n],...e}))).reduce(((e,t)=>!t.type||s&&t.type!==s?e:[...e,t]),[])]),[])),[r,s]),f=(0,u.useCallback)((e=>{p(e),(0,P.trackEvent)("search",{search_type:"page_templates",search_term:"",search_category:e})}),[]);return c.createElement(c.Fragment,null,c.createElement(OW,{items:m,selectedItemId:s,selectItem:f,deselectItem:()=>f(null)}),c.createElement(WK,{ref:l,tabIndex:-1},c.createElement(ZK,null,c.createElement(sp.Headline,{as:"h2",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL},(0,d.__)("Templates","web-stories"))),!o&&l.current?c.createElement(YK,{pageSize:t,parentRef:l,pages:g}):c.createElement(LW,null,c.createElement(lA.LoadingSpinner,{animationSize:64,numCircles:8}))))};function $K(){return $K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$K.apply(this,arguments)}const qK=p.default.div.withConfig({displayName:"savedTemplates__Wrapper",componentId:"sc-1bm5y87-0"})(["height:100%;padding-top:5px;overflow-y:scroll;overflow-x:hidden;min-height:96px;"]);const KK=function SavedTemplates(e){let{pageSize:t,loadTemplates:n,isLoading:r,...a}=e;const{actions:{deletePageTemplate:o}}=W(),{savedTemplates:i,setSavedTemplates:l,nextTemplatesToFetch:s}=mW((e=>({savedTemplates:e.state.savedTemplates,nextTemplatesToFetch:e.state.nextTemplatesToFetch,setSavedTemplates:e.actions.setSavedTemplates}))),{showSnackbar:p}=(0,jr.useSnackbar)(),[m,g]=(0,u.useState)(null),[f,h]=(0,u.useState)(null),b=(0,u.useRef)();(0,u.useLayoutEffect)((()=>{g(!1)}),[]);const E=(0,u.useCallback)((()=>{s&&n()}),[s,n]),_=(0,u.useCallback)(((e,t)=>{let{templateId:n}=e;t?.stopPropagation(),n&&(g(!0),h(n))}),[]),v=(0,u.useCallback)((()=>o(f).then((()=>{l(i.filter((e=>{let{templateId:t}=e;return t!==f}))),g(!1)})).catch((()=>{p({message:(0,d.__)("Unable to delete the template. Please try again.","web-stories"),dismissible:!0})}))),[o,f,i,p,l]);return c.createElement(qK,{ref:b,tabIndex:-1},!r&&b.current?c.createElement(YK,$K({parentRef:b,pageSize:t,pages:i,handleDelete:_,fetchTemplates:E},a)):c.createElement(LW,null,c.createElement(lA.LoadingSpinner,{animationSize:64,numCircles:8})),m&&c.createElement(y,{isOpen:!0,onClose:()=>g(!1),title:(0,d.__)("Delete Page Template","web-stories"),secondaryText:(0,d.__)("Cancel","web-stories"),onPrimary:v,primaryText:(0,d.__)("Delete","web-stories")},c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Are you sure you want to delete this template? This action cannot be undone.","web-stories"))))},XK=e=>{if(e.elements.length>1)return!1;const t=(0,Mn.createPage)();if(!(0,u.shallowEqual)(e.backgroundColor?.color,t.backgroundColor?.color))return!1;const n=e.elements.find((e=>e.isBackground));return!(n&&!n.isDefaultBackground)};const QK=function(e){const t=document.createElement("canvas"),n=t.getContext("2d"),r=Number(e.height),a=Number(e.width)/ee.PAGE_RATIO,o=(r-a)/2;return t.width=e.width,t.height=a,n.drawImage(e,0,-o),t};var JK,eX,tX;function nX(){return nX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nX.apply(this,arguments)}const SvgIllustration=e=>{let{title:t,titleId:n,...r}=e;return c.createElement("svg",nX({viewBox:"0 0 32 43",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?c.createElement("title",{id:n},t):null,JK||(JK=c.createElement("path",{d:"M21.903 0H4a4 4 0 0 0-4 4v34.4a4 4 0 0 0 4 4h24a4 4 0 0 0 4-4V10.03a4 4 0 0 0-1.187-2.844l-6.097-6.03A4 4 0 0 0 21.903 0Z",fill:"#767E80"})),eX||(eX=c.createElement("path",{d:"m30.146 8.146-5.893-5.893a.5.5 0 0 0-.853.354V8.5a.5.5 0 0 0 .5.5h5.893a.5.5 0 0 0 .353-.854Z",fill:"#ADB1B3"})),tX||(tX=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 29a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm0-12.469c.535 0 .969.434.969.969v2.531H19.5a.969.969 0 0 1 0 1.938h-2.531V24.5a.969.969 0 0 1-1.938 0v-2.531H12.5a.969.969 0 0 1 0-1.938h2.531V17.5c0-.535.434-.969.969-.969Z",fill:"#E4E5E6"})))},rX=(0,c.memo)(SvgIllustration),aX=(0,p.default)(Ke.Text).withConfig({displayName:"templateSave__StyledText",componentId:"sc-vcrsmn-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),oX=p.default.div.withConfig({displayName:"templateSave__IconWrapper",componentId:"sc-vcrsmn-1"})(["width:32px;height:42px;margin-right:29px;"]),iX=p.default.button.withConfig({displayName:"templateSave__SaveButton",componentId:"sc-vcrsmn-2"})(["border:0;background:none;height:56px;width:100%;padding:7px;background-color:",";transition:background-color ",";border-radius:",";display:flex;flex-direction:row;align-items:center;cursor:pointer;&:hover{background-color:",";}"," ",";"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryNormal}),g.BUTTON_TRANSITION_TIMING,(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryHover}),(e=>{let{$isDisabled:t,theme:n}=e;return t&&`\n      cursor: default;\n      background-color: ${n.colors.interactiveBg.disable};\n      &:hover {\n        background-color: ${n.colors.interactiveBg.disable};\n      }\n\n      ${oX} svg {\n        path:nth-child(1): ${n.colors.fg.disable};\n        path:nth-child(2) {\n          fill: ${n.colors.fg.tertiary};\n        }\n        path:nth-child(3) {\n          fill: ${n.colors.fg.secondary};\n        }\n      }\n\n      ${aX} {\n        color: ${n.colors.fg.disable};\n      }\n  `}),pp);const lX=function TemplateSave(e){let{setShowDefaultTemplates:t,updateList:n}=e;const{actions:{addPageTemplate:r}}=W(),{showSnackbar:a}=(0,jr.useSnackbar)(),{currentPage:o}=Qa((e=>{let{state:{currentPage:t}}=e;return{currentPage:t}})),i=yd((e=>{let{state:t}=e;return t.pageCanvasMap})),l=(0,u.useMemo)((()=>o&&XK(o)),[o]),s=(0,u.useCallback)((async e=>{if(e.preventDefault(),l)return;let s;const c=i[o.id];if(c){s=QK(c).toDataURL("image/jpeg")}try{const{templateId:e,...t}=o,i=await r({story_data:{...t,id:(0,pe.default)(),version:Cr.DATA_VERSION},featured_media:undefined,title:null});s&&(i.pregeneratedPageDataUrl=s),n?.(i),a({message:(0,d.__)("Page Template saved.","web-stories"),dismissable:!0})}catch{a({message:(0,d.__)("Unable to save the template. Please try again.","web-stories"),dismissable:!0})}t(!1)}),[l,r,o,t,a,n,i]);return c.createElement(iX,{"aria-disabled":l,onClick:s,$isDisabled:l},c.createElement(oX,null,c.createElement(rX,{"aria-hidden":!0})),c.createElement(aX,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,forwardedAs:"span"},(0,d.__)("Save current page as template","web-stories")))};function sX(){return sX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sX.apply(this,arguments)}const cX=(0,p.default)(NW).withConfig({displayName:"pageTemplatesPane__StyledPane",componentId:"sc-hm7mfr-0"})(["height:100%;padding:0;overflow:hidden;"]),dX=p.default.div.withConfig({displayName:"pageTemplatesPane__PaneInner",componentId:"sc-hm7mfr-1"})(["height:100%;display:flex;flex-direction:column;"]),uX=p.default.div.withConfig({displayName:"pageTemplatesPane__DropDownWrapper",componentId:"sc-hm7mfr-2"})(["text-align:left;margin:28px 16px 17px;"]),pX=p.default.div.withConfig({displayName:"pageTemplatesPane__ButtonWrapper",componentId:"sc-hm7mfr-3"})(["padding:0 1em;margin-top:24px;"]),mX="default",gX="saved",fX=Qo.DEFAULT_VIEW_PAGE_TEMPLATE_LAYOUT,hX=Jo.getItemByKey(fX);const bX=function PageTemplatesPane(e){const{actions:{getCustomPageTemplates:t}}=W(),{canViewDefaultTemplates:n}=U(),r=Boolean(t),{savedTemplates:a,setSavedTemplates:o,nextTemplatesToFetch:i,setNextTemplatesToFetch:l}=mW((e=>({savedTemplates:e.state.savedTemplates,nextTemplatesToFetch:e.state.nextTemplatesToFetch,setSavedTemplates:e.actions.setSavedTemplates,setNextTemplatesToFetch:e.actions.setNextTemplatesToFetch}))),[s,p]=(0,u.useState)(null===hX?n:n&&hX),[m,g]=(0,u.useState)(null),[f,h]=(0,u.useState)(!1),b=(0,u.useCallback)((e=>{o((t=>[e,...t||[]])),g(e.id),Jo.setItemByKey(fX,!1)}),[o]),E=(0,u.useCallback)((()=>{i&&(h(!0),t(i).then((e=>{let{templates:t,hasMore:n}=e;const r=t.map((e=>{let{version:t,templateId:n,...r}=e;const a={pages:[r]},o=(0,Cr.migrate)(a,t||25);return{templateId:n,version:Cr.DATA_VERSION,...o.pages[0]}}));o((e=>[...e||[],...r])),l(!!n&&i+1)})).catch((e=>{(0,P.trackError)("saved_templates",e.message),l(!1),o((e=>e??[]))})).finally((()=>h(!1))))}),[t,i,o,l]);(0,u.useEffect)((()=>{a||s||E()}),[a,E,s]),(0,u.useEffect)((()=>{let e=null;return m&&(e=setTimeout((()=>{g(null)}),1e3)),()=>clearTimeout(e)}),[m]);const y=[];n&&y.push({value:mX,label:(0,d.__)("Default templates","web-stories")}),r&&y.push({value:gX,label:(0,d.__)("Saved templates","web-stories")});const _=(0,u.useMemo)((()=>({width:158,height:Math.round(158/ee.PAGE_RATIO),containerHeight:Math.round(158/ee.FULLBLEED_RATIO)})),[]);return c.createElement(cX,sX({id:xK},e),c.createElement(dX,null,c.createElement(c.Fragment,null,r&&c.createElement(pX,null,c.createElement(lX,{setShowDefaultTemplates:p,updateList:b})),c.createElement(uX,null,y.length>1&&c.createElement(vx,{options:y,selectedValue:s?mX:gX,onMenuItemClick:(e,t)=>{const n=t===mX;s!==n&&(p(mX===t),Jo.setItemByKey(fX,n))},"aria-label":(0,d.__)("Select templates type","web-stories")}))),s?c.createElement(VK,{pageSize:_}):c.createElement(KK,{pageSize:_,highlightedTemplate:m,loadTemplates:E,isLoading:f})))};const EX=function PageTemplatesIcon(){return c.createElement(Kf,{title:(0,d.__)("Page templates library","web-stories")})};var yX=n(55177);const _X=RW("shopping");function vX(e){let{isMenuFocused:t,products:n=[]}=e;const r=(0,u.useRef)([]),[a,o]=(0,u.useState)(0);(0,u.useEffect)((()=>{const e=r.current[`row-${a}`];e&&t&&!e.contains(document.activeElement)&&e.focus()}),[a,t]);return{handleListNav:(0,u.useCallback)((e=>{const{key:t}=e;"ArrowUp"===t?(e.preventDefault(),o((e=>Math.max(0,e-1)))):"ArrowDown"===t&&(e.preventDefault(),o((e=>Math.min(n.length-1,e+1))))}),[n]),currentRowsRef:r,setCurrentFocusIndex:o}}vX.propTypes={isMenuFocused:za().bool,products:za().arrayOf(za().object)};const wX=vX,TX=(0,p.css)(["display:block;margin-right:10px;border-radius:4px;background-color:",";width:41px;height:41px;"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.disable})),SX=p.default.div.withConfig({displayName:"productImage__StyledImgPlaceHolder",componentId:"sc-17w7h9b-0"})(["",""],TX),CX=p.default.div.withConfig({displayName:"productImage__ProductImageWrap",componentId:"sc-17w7h9b-1"})(["position:relative;"]),IX=p.default.img.withConfig({displayName:"productImage__StyledImage",componentId:"sc-17w7h9b-2"})([""," object-fit:cover;"],TX),xX=p.default.img.withConfig({displayName:"productImage__StyledImageClone",componentId:"sc-17w7h9b-3"})(["opacity:0;position:absolute;object-fit:cover;border-radius:4px;width:","px;height:","px;"],25,25);function ProductImage(e){let{product:t}=e;const n=t?.productImages[0]?.url||"";return n?c.createElement(IX,{alt:t?.productImages[0]?.alt,src:n,loading:"lazy",decoding:"async",draggable:!1,crossOrigin:"anonymous"}):c.createElement(SX,null)}const AX=function DraggableProductImage(e){let{product:t,draggable:n}=e;const r=t?.productImages[0]?.url||"";return c.createElement(CX,null,c.createElement(ProductImage,{product:t}),n&&r&&c.createElement(vV,{type:"product",elementProps:{product:t},cloneElement:xX,cloneProps:{loading:"lazy",decoding:"async",crossOrigin:"anonymous",src:r}}))},kX=(0,p.default)(fh.default).withConfig({displayName:"productButton__Checkmark",componentId:"sc-8ap58c-0"})(["width:16px !important;height:16px !important;border-radius:100%;color:",";background-color:",";"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.disable}),(e=>{let{theme:t}=e;return t.colors.fg.positive})),OX=(0,p.default)(cp.default).withConfig({displayName:"productButton__Cross",componentId:"sc-8ap58c-1"})(["width:16px !important;height:16px !important;border-radius:100%;color:",";background-color:",";"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.disable}),(e=>{let{theme:t}=e;return t.colors.fg.negative})),PX=(0,p.default)(m.Button).withConfig({displayName:"productButton__StyledButton",componentId:"sc-8ap58c-2"})(["","{display:none;}&:hover ",",&:focus-within ",",&:active ","{display:none;}&:hover ",",&:focus-within ",",&:active ","{display:block;}"],OX,kX,kX,kX,OX,OX,OX),NX=p.default.div.withConfig({displayName:"productButton__StyledActionsContainer",componentId:"sc-8ap58c-3"})(["margin-right:10px;"]),RX=(0,$e.default)(
/* translators: %d: max number of products. */
(0,d._n)("Only %d item can be added per page.","Only %d items can be added per page.",6,"web-stories"),6),MX=(0,d.__)("Products without images cannot be added.","web-stories"),TooltipWrapper=e=>{let{hasImage:t,disabled:n,children:r}=e;return t?n?c.createElement(Tooltip,{hasTail:!0,title:RX},r):r:c.createElement(Tooltip,{hasTail:!0,title:MX},r)};const LX=function ProductButton(e){let{product:t,onClick:n,onFocus:r,isOnPage:a,canAddMore:o}=e;const i=(0,$e.default)(
/* translators: %s: product title. */
(0,d.__)("Add %s","web-stories"),t?.productTitle),l=Boolean(t?.productImages?.length),s=(0,$e.default)(
/* translators: %s: product title. */
(0,d.__)("Remove %s","web-stories"),t?.productTitle),u=!a&&!o;let p="";return p=l?a?s:u?RX:i:MX,c.createElement(TooltipWrapper,{hasImage:l,disabled:u},c.createElement(NX,null,c.createElement(PX,{"aria-label":p,"aria-disabled":!l||u,onClick:l&&!u?()=>{n(t,a)}:Bt,type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE,onFocus:r},a?c.createElement(c.Fragment,null,c.createElement(kX,null),c.createElement(OX,null)):c.createElement(d_,null))))},DX=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"productPrice__StyledPrice",componentId:"sc-1b0ir4w-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary}));const BX=function ProductPrice(e){let{price:t,currency:n}=e;const{locale:{locale:r}}=U();return t&&n&&r?c.createElement(DX,null,new Intl.NumberFormat(r,{style:"currency",currency:n}).format(t)):null},FX=p.default.div.withConfig({displayName:"product__StyledDescription",componentId:"sc-1bhc150-0"})(["padding-left:12px;"]),HX=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"product__StyledTitle",componentId:"sc-1bhc150-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.primary}));const UX=function Product(e){let{product:t,onClick:n,onFocus:r,isOnPage:a,canAddMore:o}=e;return c.createElement(c.Fragment,null,c.createElement(LX,{product:t,isOnPage:a,canAddMore:o,onClick:n,onFocus:r}),c.createElement(AX,{product:t,draggable:!a&&o}),c.createElement(FX,null,c.createElement(HX,{isBold:!0},t?.productTitle),c.createElement(BX,{price:t?.productPrice,currency:t?.productPriceCurrency})))},jX=p.default.div.withConfig({displayName:"productList__StyledListItem",componentId:"sc-16x13t7-0"})(["display:flex;width:100%;padding:5px 0;align-items:center;border-bottom:1px solid ",";transition:background-color ease-in-out 300ms;"],(e=>{let{theme:t}=e;return t.colors.divider.tertiary}));const zX=function ProductList(e){let{products:t=[],onPageProducts:n=[],onClick:r,isMenuFocused:a=!0}=e;const{handleListNav:o,currentRowsRef:i,setCurrentFocusIndex:l}=wX({isMenuFocused:a,products:t});(0,u.useEffect)((()=>{a||l(0)}),[a,l]);const s=n.length<6;return c.createElement("div",{"aria-label":(0,d.__)("Products list","web-stories"),role:"list",onKeyDown:o},t.map(((e,t)=>c.createElement(jX,{role:"listitem",key:e?.productId,tabIndex:-1,ref:e=>i.current[`row-${t}`]=e},c.createElement(UX,{product:e,canAddMore:s,isOnPage:n.some((t=>t.product.productId===e?.productId)),onClick:r,onFocus:e=>{((e,t)=>{i.current[`row-${t}`]&&"focus"===e.type&&l(t)})(e,t)}})))))},GX=(0,p.default)(XN).withConfig({displayName:"productSort__StyledDropDownMenu",componentId:"sc-1apxa0h-0"})(["margin-left:12px;"]),YX=(0,p.default)(j_).withConfig({displayName:"productSort__StyledIcon",componentId:"sc-1apxa0h-1"})(["width:28px !important;height:28px !important;"]),ZX=(0,p.css)(["min-width:180px;margin-top:0;"]),WX=[{value:"date-desc",orderby:"date",order:"desc",label:(0,d.__)("Recently Added","web-stories")},{value:"title-asc",orderby:"title",order:"asc",label:(0,d.__)("Alphabetical: A-Z","web-stories")},{value:"title-desc",orderby:"title",order:"desc",label:(0,d.__)("Alphabetical: Z-A","web-stories")},{value:"price-asc",orderby:"price",order:"asc",label:(0,d.__)("Lowest Price","web-stories")},{value:"price-desc",orderby:"price",order:"desc",label:(0,d.__)("Highest Price","web-stories")}];const VX=function ProductSort(e){let{onChange:t,value:n="date-desc"}=e;const[r,a]=(0,u.useState)(!1),o=(0,u.useCallback)((e=>{a(!1),t(WX.find((t=>t.value===e)))}),[t]),i=[{group:WX.map((e=>({value:`${e.orderby}-${e.order}`,...e})))}];return c.createElement(GX,{onMenuOpen:()=>a(!0),isMenuOpen:r,onMenuSelected:o,display:!0,onMenuClose:()=>a(!1),options:i,ariaLabel:(0,d.__)("Product sort options","web-stories"),activeValue:n,dropDownHeight:340,menuStylesOverride:ZX},c.createElement(Tooltip,{title:(0,d.__)("Sort","web-stories")},c.createElement(YX,null)))};function $X(){return $X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$X.apply(this,arguments)}const qX=p.default.div.withConfig({displayName:"shoppingPane__LoadingContainer",componentId:"sc-14o47kz-0"})(["display:flex;justify-content:center;"]),KX=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"shoppingPane__HelperText",componentId:"sc-14o47kz-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),XX={animationSize:25,circleSize:3};const QX=function ShoppingPane(e){const{showSnackbar:t}=(0,jr.useSnackbar)(),{shoppingProvider:n}=U(),r=(0,wx.default)("assertive"),{actions:{getProducts:a}}=W(),{currentPageProducts:o,deleteElementById:i,currentPageNumber:l}=Qa((e=>{let{actions:t,state:{currentPage:n,currentPageNumber:r}}=e;return{currentPageProducts:n?.elements?.filter((e=>{let{type:t}=e;return t===Mn.ELEMENT_TYPES.PRODUCT})).map((e=>{let{id:t,product:n}=e;return{elementId:t,product:n}})),deleteElementById:t.deleteElementById,currentPageNumber:r}})),{insertElement:s}=mW((e=>({insertElement:e.actions.insertElement}))),[p,m]=(0,u.useState)(!1),[g,f]=(0,u.useState)(!1),[h,b]=(0,u.useState)(!1),[E,y]=(0,u.useState)(""),[_,v]=(0,u.useState)(1),[w,T]=(0,u.useState)("date"),[S,C]=(0,u.useState)("desc"),[I,x]=(0,u.useState)(!1),[A,k]=(0,u.useState)([]),O=(0,u.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;f(!0),v(n),1===n&&m(!1);try{const{products:t,hasNextPage:i}=await a(e,n,r,o),l=1===n?t:[...A,...t];k(l),b(i)}catch(e){(0,P.trackError)("search_products",e?.message),t({message:e.message}),1===n&&(k([]),v(1)),b(!1)}finally{f(!1),m(!0)}}),[a,A,t]),N=(0,u.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;O(e,t,r,a),(0,P.trackEvent)("search",{search_type:"products",search_term:e,search_order:a,search_orderby:r,search_provider:n})}),[O,n]),R=(0,u.useDebouncedCallback)(N,300),M=(0,u.useCallback)((e=>{const t=e.target.value;t!==E&&(y(t),R(t,1,w,S))}),[R,S,w,E]),L="none"!==n;(0,u.useEffect)((()=>{L&&O(E,_,w,S)}),[L]);const D=A.length;(0,u.useEffect)((()=>{L||0!==D||(k(o?.map((e=>{let{product:t}=e;return t}))),f(!1),m(!0))}),[o,L,D]);const B=(0,u.useCallback)((e=>{T(e.orderby),C(e.order),R(E,1,e.orderby,e.order)}),[R,E]),F=(0,u.useCallback)((e=>{const{key:t}=e;"ArrowDown"!==t&&"Tab"!==t||x(!0)}),[]),H=(0,u.useCallback)((e=>{s(Mn.ELEMENT_TYPES.PRODUCT,{width:25,height:25,product:e}),(0,P.trackEvent)("insert_product",{page:l,provider:n});const t=(0,$e.default)(
/* translators: %s: product title. */
(0,d.__)("%s added to page","web-stories"),e.productTitle);r(t)}),[s,r,l,n]),j=(0,u.useCallback)((e=>{const t=o.find((t=>t.product.productId===e.productId));if(t){i({elementId:t.elementId});const n=(0,$e.default)(
/* translators: %s: product title. */
(0,d.__)("%s removed","web-stories"),e?.productTitle);r(n)}}),[i,o,r]),z=(0,u.useCallback)(((e,t)=>t?j(e):H(e)),[j,H]),G=(0,u.useCallback)((()=>{y(""),R("",1,w,S)}),[R,S,w]),Y=(0,u.useCallback)((()=>{h&&O(E,_+1,w,S)}),[h,O,S,w,_,E]),Z=_>1?(0,d.__)("No more products","web-stories"):"";return c.createElement(NW,$X({id:_X},e),c.createElement(wW,{"data-testid":"products-library-pane",title:(0,d.__)("Products","web-stories")},c.createElement(QC,null,c.createElement(KX,null,(0,d.__)("This will add products as a tappable dot on your story.","web-stories"))),L&&c.createElement(QC,null,c.createElement(bW.default,{"aria-label":(0,d.__)("Product search","web-stories"),inputValue:E,onChange:M,placeholder:(0,d.__)("Search","web-stories"),onKeyDown:F,onFocus:()=>x(!1),isOpen:!0,ariaClearLabel:(0,d.__)("Clear product search","web-stories"),clearId:"clear-product-search",handleClearInput:G}),c.createElement(VX,{onChange:B,value:`${w}-${S}`})),!p&&g&&c.createElement(qX,null,c.createElement(lA.LoadingSpinner,XX)),p&&A?.length>0&&c.createElement(c.Fragment,null,c.createElement(zX,{isMenuFocused:I,onClick:z,products:A,onPageProducts:o}),c.createElement(yX.default,{allDataLoadedMessage:Z,allDataLoadedAriaMessage:(0,d.__)("Products are loaded","web-stories"),onLoadMore:Y,canLoadMore:h,isLoading:g,loadingSpinnerProps:XX,loadingAriaMessage:(0,d.__)("Loading more products","web-stories")})),p&&!g&&0===A?.length&&c.createElement(KX,null,(0,d.__)("No products found.","web-stories"))))};const JX=function ShoppingIcon(){return c.createElement(H_.default,{title:(0,d.__)("Shopping library","web-stories")})},eQ={icon:m$,tooltip:(0,d.__)("Media","web-stories"),placement:Vd.PLACEMENT.BOTTOM_START,Pane:p$,id:pg},tQ={icon:k$,tooltip:(0,d.__)("Third-party media","web-stories"),Pane:A$,id:mg},nQ={icon:IK,tooltip:(0,d.__)("Text","web-stories"),Pane:CK,id:gg},rQ={icon:V$,tooltip:(0,d.__)("Shapes & Stickers","web-stories"),Pane:W$,id:fg},aQ={icon:EX,tooltip:(0,d.__)("Page Templates","web-stories"),Pane:bX,id:hg},oQ={icon:JX,tooltip:(0,d.__)("Shopping","web-stories"),Pane:QX,id:bg},iQ=new Set([eQ,tQ,aQ,rQ,nQ,oQ].map((e=>e.id)));const lQ=function LibraryProvider(e){let{children:t}=e;const{showMedia3p:n,shoppingProvider:r,canViewDefaultTemplates:a}=U(),{actions:{getMedia:o,getCustomPageTemplates:i}}=W(),{hasProducts:l}=Qa((e=>{let{state:{currentPage:t}}=e;return{hasProducts:t?.elements?.some((e=>{let{type:t}=e;return t===Mn.ELEMENT_TYPES.PRODUCT}))}})),s="none"!==r||l,d=Boolean(i),p=a||d,m=Boolean(o),[g,f]=(0,u.useState)({}),[h,b]=(0,u.useState)({}),[E,y]=(0,u.useState)(null),[_,v]=(0,u.useState)(1),[w,T]=(0,u.useState)(!1),S=(0,u.useCallback)((e=>y((t=>(0,hW.default)("function"==typeof e?e(t):e,"templateId")))),[]),C=(0,u.useCallback)((e=>{y((t=>t.map((t=>t.templateId===e.templateId?{...t,...e}:t))))}),[]),I=(0,u.useMemo)((()=>[m&&eQ,n&&tQ,nQ,rQ,s&&oQ,p&&aQ].filter(Boolean)),[n,m,p,s]),[x,A]=(0,u.useState)(I[0].id),k=ks(),{insertTextSet:O,insertTextSetByOffset:N}=iZ(w),{highlightedTab:R}=mm((e=>{let{section:t}=e;return{highlightedTab:t}}));(0,u.useEffect)((()=>{iQ.has(R)&&(A(R),(0,P.trackEvent)("quick_action_tab_change",{name:R}))}),[R]);const M=(0,u.useRef)(null),L=(0,u.useRef)(null),D=(0,u.useRef)(null),B=(0,u.useRef)(null),F=(0,u.useRef)(null),H=(0,u.useRef)(null),j=(0,u.useMemo)((()=>({[eQ.id]:M,[tQ.id]:L,[nQ.id]:D,[rQ.id]:B,[aQ.id]:F,[oQ.id]:H})),[]),z=(0,u.useMemo)((()=>({state:{areTextSetsLoading:h,tab:x,tabRefs:j,textSets:g,savedTemplates:E,nextTemplatesToFetch:_,shouldUseSmartColor:w},actions:{setTab:A,insertElement:k,insertTextSet:O,insertTextSetByOffset:N,setSavedTemplates:S,updateSavedTemplate:C,setNextTemplatesToFetch:v,setShouldUseSmartColor:T},data:{tabs:I}})),[h,x,j,g,E,k,O,N,I,_,v,w,S,C]);return(0,u.useEffect)((()=>{let e=!0;return x!==nQ.id||Object.keys(g).length||async function(){const t=(0,P.getTimeTracker)("load_text_sets");b(!0);const n=await async function(){const e=await Promise.all(["cover","step","section_header","editorial","contact","table","list","quote"].map((async e=>[e,await fW(e)])));return Object.fromEntries(e)}();t(),e&&(f(n),b(!1))}(),()=>{e=!1}}),[x,g]),(0,u.useEffect)((()=>{x!==oQ.id||s||A(I[0].id)}),[s,x,I]),c.createElement(pW.Provider,{value:z},t)},MediaButton=()=>{const{onSelect:e}=gW();return c.createElement(rI,{renderButton:e=>c.createElement(tL.default,{onClick:e},HZ.UPLOAD_IMAGE_OR_VIDEO),onInsert:e})};const sQ=function EmptyStateMenu(){const{setHighlights:e}=mm((e=>{let{setHighlights:t}=e;return{setHighlights:t}})),{toggleRecordingMode:t}=Iv((e=>{let{actions:t}=e;return{toggleRecordingMode:t.toggleRecordingMode}})),{isTranscodingEnabled:n}=lo();return c.createElement(c.Fragment,null,c.createElement(tL.default,{onClick:()=>{e({highlight:_g.MEDIA})}},HZ.CHOOSE_IMAGE_OR_VIDEO),c.createElement(lQ,null,c.createElement(MediaButton,null)),n&&c.createElement(tL.default,{onClick:t},HZ.RECORD_VIDEO),c.createElement(tL.default,{onClick:()=>{e({highlight:_g.PAGE_TEMPLATES})}},HZ.BROWSE_PAGE_TEMPLATES),c.createElement(tL.default,{onClick:()=>{e({highlight:_g.MEDIA3P})}},HZ.BROWSE_STOCK_IMAGES_AND_VIDEO))},cQ=p.default.div.withConfig({displayName:"rightClickMenu__RightClickMenuContainer",componentId:"sc-11e09ag-0"})(["position:absolute;top:","px;left:","px;z-index:9999;"],(e=>{let{position:t}=e;return t?.y??0}),(e=>{let{position:t}=e;return t?.x??0})),dQ=()=>{const{isRTL:e}=U(),{selectedElements:t,isThisEmptyStory:n}=Qa((e=>({selectedElements:e.state.selectedElements,isThisEmptyStory:ZY(e.state.pages)}))),{isMenuOpen:r,menuPosition:a,onCloseMenu:o,maskRef:i}=kc(),l=(0,u.useRef)(),s=e=>{e.preventDefault(),e.stopPropagation()},m=(0,u.useMemo)((()=>{if(n)return sQ;if(t.length>1)return JZ;const e=t?.[0];if(e?.isDefaultBackground)return tW;switch(e?.type){case Mn.ELEMENT_TYPES.IMAGE:case Mn.ELEMENT_TYPES.VIDEO:case Mn.ELEMENT_TYPES.GIF:return e?.isBackground?tW:XZ;case Mn.ELEMENT_TYPES.SHAPE:return rW;case Mn.ELEMENT_TYPES.TEXT:return cW;case Mn.ELEMENT_TYPES.STICKER:return oW;case Mn.ELEMENT_TYPES.PRODUCT:return uW;default:return tW}}),[t,n]);return(0,u.useEffect)((()=>{const e=l.current;return e.addEventListener("contextmenu",s),()=>{e.removeEventListener("contextmenu",s)}}),[l]),(0,u.createPortal)(c.createElement(p.StyleSheetManager,{stylisPlugins:[]},c.createElement(cQ,{position:a,ref:l},c.createElement(Ku,null,c.createElement(DM.default,{"data-testid":"right-click-context-menu",isOpen:r,onDismiss:o,"aria-label":(0,d.__)("Context Menu for the selected element","web-stories"),maskRef:i,onMouseDown:e=>e.stopPropagation(),isRTL:e},c.createElement(m,{parentMenuRef:l}))))),document.body)};function uQ(){return uQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uQ.apply(this,arguments)}const pQ=function LibraryPanes(){const{tab:e,tabs:t}=mW((e=>({tab:e.state.tab,tabs:e.data.tabs}))),{actions:{getMedia:n}}=W(),r=Boolean(n),a=mm((e=>{let{...t}=e;return t})),o=a[eQ.id],i=a[tQ.id],l=a[nQ.id];return t.map((t=>{let{id:n}=t;const a=n===e,s={key:n,isActive:a,"aria-labelledby":MW(n)};if(!a)return c.createElement(NW,uQ({key:n},s));switch(n){case eQ.id:return r?c.createElement(mQ,uQ({},s,{$_css:o?.showEffect&&XA.FLASH})):null;case tQ.id:return c.createElement(gQ,uQ({},s,{$_css2:i?.showEffect&&XA.FLASH}));case rQ.id:return c.createElement(W$,s);case nQ.id:return c.createElement(fQ,uQ({},s,{$_css3:l?.showEffect&&XA.FLASH}));case aQ.id:return c.createElement(bX,s);case oQ.id:return c.createElement(QX,s);default:return null}}))};var mQ=(0,p.default)(p$).withConfig({displayName:"libraryPanes___StyledMediaPane",componentId:"sc-g5zq8j-0"})(["",""],(e=>e.$_css)),gQ=(0,p.default)(A$).withConfig({displayName:"libraryPanes___StyledMedia3pPane",componentId:"sc-g5zq8j-1"})(["",""],(e=>e.$_css2)),fQ=(0,p.default)(CK).withConfig({displayName:"libraryPanes___StyledTextPane",componentId:"sc-g5zq8j-2"})(["",""],(e=>e.$_css3));const hQ=p.default.section.attrs({"aria-label":(0,d.__)("Library","web-stories"),"data-testid":"libraryLayout"}).withConfig({displayName:"libraryLayout__Layout",componentId:"sc-6ze1kl-0"})(["height:100%;display:flex;flex-direction:column;background-color:",";color:",";max-height:100%;"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.primary})),bQ=p.default.nav.attrs({"aria-label":(0,d.__)("Library tabs","web-stories")}).withConfig({displayName:"libraryLayout__TabsArea",componentId:"sc-6ze1kl-1"})([""]),EQ=p.default.div.withConfig({displayName:"libraryLayout__LibraryPaneContainer",componentId:"sc-6ze1kl-2"})(["height:100%;min-height:0;"]);const yQ=function LibraryLayout(){const{setTab:e,tab:t,tabRefs:n,tabs:r}=mW((e=>({tab:e.state.tab,tabRefs:e.state.tabRefs,setTab:e.actions.setTab,tabs:e.data.tabs}))),{highlight:a,resetHighlight:o}=mm((e=>({highlight:{[eQ.id]:e[_g.MEDIA],[tQ.id]:e[_g.MEDIA3P],[nQ.id]:e[_g.TEXT_SET],[aQ.id]:e[_g.PAGE_TEMPLATES]},resetHighlight:e.onFocusOut}))),i=(0,u.useCallback)((t=>{e(t),o(),(0,P.trackEvent)("library_tab_change",{name:t})}),[e,o]);return c.createElement(hQ,null,c.createElement(bQ,null,c.createElement(eg,{label:(0,d.__)("Element Library Selection","web-stories"),tabs:r,tabRefs:n,tab:t,onTabChange:i,onTabRefUpdated:(e,t)=>{const n=a[t];e&&n?.focus&&n?.showEffect&&e.focus()},getTabId:MW,getAriaControlsId:RW,shortcut:"mod+option+1"})),c.createElement(EQ,null,c.createElement(pQ,null)))},_Q="edit-story-library-upload-message";const vQ=function LibraryUploadDropTarget(e){let{children:t}=e;const{uploadMedia:n}=Yl((e=>{let{actions:{uploadMedia:t}}=e;return{uploadMedia:t}})),r=(0,u.useCallback)((e=>{n(e)}),[n]);return c.createElement(Pm,{onDrop:r,labelledBy:_Q},t,c.createElement(Gm,{id:_Q,message:(0,d.__)("Upload to media library","web-stories")}))};const wQ=function Library(){return c.createElement(lQ,null,c.createElement(vQ,null,c.createElement(yQ,null)))};const TQ=function(){return c.createElement(SE,{title:(0,d.__)("Link","web-stories")})};const SQ=function AnimationIcon(){return c.createElement(xh,{title:(0,d.__)("Animation","web-stories")})},CQ={id:fm,icon:function SelectionIcon(){return c.createElement($f.default,{title:(0,d.__)("Selection","web-stories")})},tooltip:(0,d.__)("Selection","web-stories")},IQ={id:hm,icon:TQ,tooltip:(0,d.__)("Link","web-stories")},xQ={id:bm,icon:SQ,tooltip:(0,d.__)("Animation","web-stories")},AQ=(0,u.createContext)({state:{},actions:{},tabs:{},refs:{}});const kQ=function TextSelectionIcon(){return c.createElement(lE.default,{title:(0,d.__)("Text selection","web-stories")})};const OQ=function ImageSelectionIcon(){return c.createElement(Uy,{title:(0,d.__)("Image selection","web-stories")})};const PQ=function VideoSelectionIcon(){return c.createElement(hv.default,{title:(0,d.__)("Video selection","web-stories")})};const NQ=function ShapeSelectionIcon(){return c.createElement(B_,{title:(0,d.__)("Shape selection","web-stories")})};const RQ=function MultiSelectionIcon(){return c.createElement(Xh,{title:(0,d.__)("Multi selection","web-stories")})},MQ=(0,p.default)(H_.default).withConfig({displayName:"productSelectionIcon__StyledIcon",componentId:"sc-1jpxe2a-0"})(["width:32px !important;height:32px !important;"]);const LQ=function ProductSelectionIcon(){return c.createElement(MQ,{title:(0,d.__)("Product selection","web-stories")})},DQ=new Set([CQ.id,IQ.id,xQ.id]);const BQ=function StyleProvider(e){let{children:t}=e;const{selectedElements:n}=Qa((e=>{let{state:t}=e;return{selectedElements:t.selectedElements}})),{tab:r}=mm((e=>({tab:e.section})));(0,u.useEffect)((()=>{DQ.has(r)&&i(r)}),[r]);const a=(0,u.useRef)(null),[o,i]=(0,u.useState)(CQ.id),l=(0,u.useRef)(null),s=(0,u.useRef)(null),d=(0,u.useRef)(null),p=(0,u.useMemo)((()=>({[CQ.id]:l,[IQ.id]:s,[xQ.id]:d})),[]);let m=RQ;const g=[...new Set(n.map((e=>{let{type:t}=e;return t})))];1===g.length?("text"===g[0]&&(m=kQ),("image"===g[0]||n[0].isBackground)&&(m=OQ),"video"===g[0]&&(m=PQ),"shape"!==g[0]&&"sticker"!==g[0]||(m=NQ),"product"===g[0]&&(m=LQ)):m=RQ;const f={state:{tab:o},refs:{styleRef:a,tabRefs:p},actions:{setTab:i},data:{tabs:[{...CQ,icon:m}]}},h=n[0]?.isBackground||n[0]?.isDefaultBackground,b=n.some((e=>{let{type:t}=e;return"product"===t}));return h||b||f.data.tabs.push(IQ),n[0]?.isDefaultBackground||b||f.data.tabs.push(xQ),(0,u.useEffect)((()=>{f.data.tabs.find((e=>e.id===o))||i(CQ.id)}),[f.data.tabs,o]),c.createElement(AQ.Provider,{value:f},t)};const FQ=function(e){return(0,u.useContextSelector)(AQ,e??u.identity)};const HQ=function(){const e=(0,u.useRef)([]),t=(0,u.useCallback)((t=>{const n=e.current;return n.push(t),()=>{n.splice(n.indexOf(t),1)}}),[]);return(0,u.useMemo)((()=>[e.current,t]),[t])};function UQ(){return UQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UQ.apply(this,arguments)}const jQ=p.default.form.withConfig({displayName:"designPanel__Form",componentId:"sc-14jgzfz-0"})(["padding:0;margin:0;"]),zQ=p.default.input.attrs({type:"submit"}).withConfig({displayName:"designPanel__AutoSubmitButton",componentId:"sc-14jgzfz-1"})(["display:none;"]);const GQ=function(e){let{panelType:t,selectedElements:n,onSetProperties:r,registerSubmitHandler:a,...o}=e;const i=(0,u.useRef)(null),[l,s]=HQ(),d=(0,u.useMemo)((()=>({isMultiple:n.length>1,registerPresubmitHandler:s})),[n,s]),[p,m]=(0,u.useState)({}),g=(0,u.useMemo)((()=>n.map((e=>({...e,...p[e.id]})))),[n,p]),f=(0,u.useCallback)((e=>{if(0===Object.keys(e).length)return;const t=e;l.length>0&&n.forEach((n=>{const r=_v(n,e[n.id],!0);let a=r;l.forEach((e=>{const t=e({...n,...a},r,n);a={...a,...t}})),t[n.id]=a})),r((e=>t[e.id]))}),[l,n,r]),h=a((0,u.useCallback)((e=>{e&&(e.preventDefault(),m({})),f(p)}),[f,p])),b=(0,u.useCallback)((()=>{setTimeout((()=>{const e=i.current;e&&e.dispatchEvent(new window.Event("submit",{cancelable:!0,bubbles:!0}))}))}),[]),E=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m((t=>{const r={};return n.forEach((n=>{const a={...n,...t[n.id]},o=_v(a,e,!1);r[n.id]={...t[n.id],...o}})),r})),t&&b()}),[n,b]),y=(0,u.useCallback)((function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];E((r=>{const a=r[e]||n;return{[e]:t?{...a,..._v(a,t,!1)}:null}}),r)}),[E]),_=t;return c.createElement(jQ,{ref:i,onSubmit:h},c.createElement(zQ,null),c.createElement(kI.Provider,{value:d},c.createElement(_,UQ({selectedElements:g,submittedSelectedElements:n,pushUpdate:E,pushUpdateForObject:y,submit:b},o))))},YQ=p.default.div.withConfig({displayName:"warning__WarningContainer",componentId:"sc-16blgsz-0"})(["display:flex;gap:8px;margin:14px auto;border:1px solid ",";border-radius:",";padding:8px;"],(e=>{let{theme:t}=e;return t.colors.border.defaultHover}),(e=>{let{theme:t}=e;return t.borders.radius.small})),ZQ=(0,p.default)(cb).withConfig({displayName:"warning__WarningIcon",componentId:"sc-16blgsz-1"})(["width:32px;height:100%;color:",";"],(e=>{let{theme:t}=e;return t.colors.status.warning})),WQ=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"warning__Message",componentId:"sc-16blgsz-2"})(["max-width:calc(100% - 40px);"]);const VQ=function Warning(e){let{message:t}=e;const n=(0,wx.default)("assertive");return(0,u.useEffect)((()=>{n(t)}),[t,n]),c.createElement(YQ,{"data-testid":"warningContainer"},c.createElement(ZQ,{title:Iu.lowContrast.warningIcon}),c.createElement(WQ,null,t))};function $Q(){return $Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$Q.apply(this,arguments)}const qQ=(0,p.default)(m.Button).withConfig({displayName:"directionRadioInput__StyledButton",componentId:"sc-1g0wivz-0"})(["z-index:0;width:28px;height:28px;"," svg{transform-origin:50% 50%;transform:",";}"],(e=>{let{selected:t,disabled:n,theme:r}=e;return t&&!n&&(0,p.css)(["background-color:",";"],r.colors.interactiveBg.secondaryPress)}),(e=>{let{direction:t}=e;switch(t){case Un.DIRECTION.RIGHT_TO_LEFT:return"rotate(270deg)";case Un.DIRECTION.TOP_TO_BOTTOM:return"rotate(180deg)";case Un.DIRECTION.LEFT_TO_RIGHT:return"rotate(90deg)";case Un.ROTATION.COUNTER_CLOCKWISE:return"rotateX(180deg) rotateZ(90deg)";case Un.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT:return"rotate(-135deg)";case Un.SCALE_DIRECTION.SCALE_IN_TOP_LEFT:return"rotate(135deg)";case Un.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT:return"rotate(-315deg)";case Un.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT:return"rotate(315deg)";default:return"rotate(0deg)"}})),KQ=(0,p.default)((e=>{let{className:t,direction:n,...r}=e;return c.createElement(qQ,$Q({variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,className:t,direction:n},r),[...Object.values(Un.DIRECTION),...Object.values(Un.SCALE_DIRECTION)].includes(n)&&c.createElement(Mf,null))})).withConfig({displayName:"directionRadioInput__DirectionIndicator",componentId:"sc-1g0wivz-1"})([""]),XQ=p.default.fieldset.withConfig({displayName:"directionRadioInput__Fieldset",componentId:"sc-1g0wivz-2"})(["position:relative;height:91px;width:88px;margin-top:1px;border-right:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),QQ=p.default.div.withConfig({displayName:"directionRadioInput__Figure",componentId:"sc-1g0wivz-3"})(["position:absolute;top:50%;left:50%;width:8px;height:8px;background-color:",";border-radius:2px;transform:translate(-50%,-50%);"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),JQ=p.default.label.withConfig({displayName:"directionRadioInput__Label",componentId:"sc-1g0wivz-4"})(["position:absolute;cursor:",";",""],(e=>{let{disabled:t}=e;return t?"default":"pointer"}),(e=>{let{direction:t}=e;switch(t){case Un.DIRECTION.RIGHT_TO_LEFT:return(0,p.css)(["top:50%;right:","px;transform:translateY(-50%);"],3);case Un.DIRECTION.TOP_TO_BOTTOM:return(0,p.css)(["top:","px;left:50%;transform:translateX(-50%);"],3);case Un.DIRECTION.LEFT_TO_RIGHT:return(0,p.css)(["top:50%;left:","px;transform:translateY(-50%);"],3);case Un.ROTATION.COUNTER_CLOCKWISE:return(0,p.css)(["bottom:","px;right:","px;transform:translate(-10%,-10%);"],3,3);case Un.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT:return(0,p.css)(["bottom:","px;left:","px;"],3,3);case Un.SCALE_DIRECTION.SCALE_IN_TOP_LEFT:return(0,p.css)(["top:","px;left:","px;"],3,3);case Un.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT:return(0,p.css)(["top:","px;right:","px;"],3,3);case Un.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT:return(0,p.css)(["bottom:","px;right:","px;"],3,3);default:return(0,p.css)(["bottom:","px;left:50%;transform:translateX(-50%);"],3)}})),eJ=p.default.legend.withConfig({displayName:"directionRadioInput__HiddenLegend",componentId:"sc-1g0wivz-5"})(["position:absolute;opacity:0;clip-path:polygon(0 0);cursor:pointer;"]),tJ=p.default.div.withConfig({displayName:"directionRadioInput__RadioGroup",componentId:"sc-1g0wivz-6"})(["position:absolute;top:0;right:0;bottom:0;left:0;"]),nJ={[Un.DIRECTION.RIGHT_TO_LEFT]:(0,d._x)("right to left","animation direction","web-stories"),[Un.DIRECTION.LEFT_TO_RIGHT]:(0,d._x)("left to right","animation direction","web-stories"),[Un.DIRECTION.TOP_TO_BOTTOM]:(0,d._x)("top to bottom","animation direction","web-stories"),[Un.DIRECTION.BOTTOM_TO_TOP]:(0,d._x)("bottom to top","animation direction","web-stories"),[Un.ROTATION.CLOCKWISE]:(0,d._x)("clockwise","rotation direction","web-stories"),[Un.ROTATION.COUNTER_CLOCKWISE]:(0,d._x)("counterclockwise","rotation direction","web-stories"),[Un.SCALE_DIRECTION.SCALE_IN]:(0,d._x)("scale in","scale direction","web-stories"),[Un.SCALE_DIRECTION.SCALE_OUT]:(0,d._x)("scale out","scale direction","web-stories")},rJ=e=>{switch(e){case Un.SCALE_DIRECTION.SCALE_IN_TOP_LEFT:case Un.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT:return Un.SCALE_DIRECTION.SCALE_IN;case Un.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT:case Un.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT:return Un.SCALE_DIRECTION.SCALE_OUT;default:return e}},aJ=e=>[...Un.SCALE_DIRECTION_MAP.SCALE_IN,...Un.SCALE_DIRECTION_MAP.SCALE_OUT].includes(e),oJ=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?.replace(/([a-z])([A-Z])/g,"$1 $2")?.toLocaleLowerCase()?.split(" ")||[]},iJ=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return oJ(e)?.[0]},lJ=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=oJ(e);return t[t.length-1]},sJ=[Un.DIRECTION.TOP_TO_BOTTOM,Un.DIRECTION.RIGHT_TO_LEFT,Un.DIRECTION.BOTTOM_TO_TOP,Un.DIRECTION.LEFT_TO_RIGHT],cJ=[Un.SCALE_DIRECTION.SCALE_IN_TOP_LEFT,Un.SCALE_DIRECTION.SCALE_OUT_TOP_RIGHT,Un.SCALE_DIRECTION.SCALE_IN_BOTTOM_RIGHT,Un.SCALE_DIRECTION.SCALE_OUT_BOTTOM_LEFT],dJ=(e,t,n)=>{const r=n?t.reverse():t;return e.sort(((e,t)=>r.indexOf(e)-r.indexOf(t)))},DirectionRadioInput=e=>{let{value:t,directions:n=[],onChange:r,disabled:a=[],tooltip:o}=e;const i=(0,u.useRef)(),{isRTL:l}=U(),s=(0,u.useMemo)((()=>{const e=[];if(n.includes(Un.SCALE_DIRECTION.SCALE_OUT)||n.includes(Un.SCALE_DIRECTION.SCALE_IN)){const t=[];n.includes(Un.SCALE_DIRECTION.SCALE_OUT)&&t.push(...Un.SCALE_DIRECTION_MAP.SCALE_OUT),n.includes(Un.SCALE_DIRECTION.SCALE_IN)&&t.push(...Un.SCALE_DIRECTION_MAP.SCALE_IN),e.push(...dJ(t,cJ,l))}else e.push(...dJ(n,sJ,l));return e}),[n,l]);return mx(i),c.createElement(XQ,null,c.createElement(QQ,null),c.createElement(eJ,null,(0,d.__)("Which Direction?","web-stories")),c.createElement(tJ,{ref:i},s.map((e=>{const n=a?.includes(rJ(e));return c.createElement(JQ,{key:e,"aria-label":nJ[e],htmlFor:e,direction:e,disabled:n},c.createElement(Tooltip,{title:n?o:"",placement:aJ(e)?lJ(e):iJ(e)},c.createElement(KQ,{direction:e,selected:t===e||e?.includes(t),disabled:n,onClick:()=>r(rJ(e))})))}))))},uJ=(0,p.css)(["border-radius:0;border-color:"," transparent transparent transparent;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),pJ=(0,p.default)(VS).withConfig({displayName:"effectInput__StyledInput",componentId:"sc-1gnssiy-0"})(["height:","px;div{height:calc(100% + 1px);"," &:focus-within{border-radius:",";}}"],45,uJ,(e=>{let{theme:t}=e;return t.borders.radius.small})),mJ=(0,p.default)(gx.DropDown).withConfig({displayName:"effectInput__StyledDropDown",componentId:"sc-1gnssiy-1"})(["button{height:46px;"," &:hover{","}&.",",&[","]{border-radius:",";}}"],uJ,uJ,Ip.FOCUS_VISIBLE_SELECTOR,Ip.FOCUS_VISIBLE_DATA_ATTRIBUTE,(e=>{let{theme:t}=e;return t.borders.radius.small})),gJ=[...Object.values(Un.DIRECTION),...Object.values(Un.ROTATION),...Object.values(Un.SCALE_DIRECTION)];const fJ=function EffectInput(e){let{effectProps:t,effectConfig:n,field:r,onChange:a,disabledOptions:o,disabled:i=!1,tooltip:l}=e;const s=(0,u.useCallback)((e=>a(e,!0)),[a]),p=(0,u.useMemo)((()=>i?gJ:o),[o,i]),m=n[r]??t[r].defaultValue,g=t[r].type===Un.FIELD_TYPES.FLOAT;switch(t[r].type){case Un.FIELD_TYPES.DROPDOWN:return c.createElement(mJ,{options:(t[r].values||[]).map((e=>{let{name:t,...n}=e;return{...n,label:t,disabled:i||o.includes(n.value)}})),placeholder:(0,d.__)("Select a value","web-stories"),ariaLabel:(0,d.__)("Select effect value","web-stories"),isKeepMenuOpenOnSelection:!1,selectedValue:m,onMenuItemClick:e=>a(e.target.value,!0),disabled:i});case Un.FIELD_TYPES.DIRECTION_PICKER:return c.createElement(DirectionRadioInput,{value:m,directions:t[r].values,onChange:s,disabled:p,tooltip:l});default:return c.createElement(pJ,{"aria-label":t[r].label,suffix:t[r].label,unit:t[r].unit,value:m,min:0,onChange:e=>a(g?parseFloat(e.target.value):parseInt(e.target.value),!0),isFloat:g,containerStyleOverride:mp,disabled:i})}};function hJ(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(!e.zoomDirection||!e.panDir)&&(e.zoomDirection?e.zoomDirection:e.scaleDirection?e.scaleDirection:e.flyInDir?e.flyInDir:e.rotateInDir?e.rotateInDir:e.whooshInDir?e.whooshInDir:!!e.panDir&&e.panDir)}const bJ=p.default.div.withConfig({displayName:"effectPanel__AnimationGrid",componentId:"sc-s89nzp-0"})(["display:grid;grid-template-columns:auto auto;"]),EJ=p.default.div.withConfig({displayName:"effectPanel__AnimationGridField",componentId:"sc-s89nzp-1"})((e=>{let{isRotationComponent:t,isHalfWidthField:n}=e;return[{gridColumn:"1/3"},t&&{gridRow:"1/3",gridColumn:"auto"},n&&{gridColumn:"auto"}]}));const yJ=function EffectPanel(e){let{animation:{id:t,type:n,...r},onChange:a,disabledTypeOptionsMap:o,disabled:i=!1}=e;const{props:l}=(0,Un.getAnimationEffectProps)(n),s=(0,u.useCallback)(((e,o)=>{a({id:t,type:n,...r,...e},o)}),[t,n,r,a]),d=(0,u.useMemo)((()=>Object.keys(l).reduce(((e,t)=>l[t].type===Un.FIELD_TYPES.DIRECTION_PICKER||l[t].type===Un.FIELD_TYPES.ROTATION_PICKER||e),!1)),[l]),p=Object.keys(l).map(((e,t)=>c.createElement(EJ,{key:e,isRotationComponent:d&&0===t,isHalfWidthField:d&&(1===t||2===t)},c.createElement(fJ,{effectProps:l,effectConfig:r,field:e,onChange:(t,n)=>s({[e]:Math.max(t,0)},n),disabledOptions:o[n]?.options||[],disabled:i,tooltip:o[n]?.tooltip}))));return c.createElement(bJ,null,p)},_J=p.default.div.withConfig({displayName:"effectChooserElements__BaseAnimationCell",componentId:"sc-13qk6mh-0"})(["display:none;transform-origin:50% 50%;"]),vJ=(0,p.keyframes)(["0%{transform:translateY(-100%);animation-timing-function:cubic-bezier(.75,.05,.86,.08);}15%{transform:translateY(0%);animation-timing-function:cubic-bezier(.22,.61,.35,1);}26%{transform:translateY(-62%);animation-timing-function:cubic-bezier(.75,.05,.86,.08);}37%{transform:translateY(-0%);animation-timing-function:cubic-bezier(.22,.61,.35,1);}41.5%{transform:translateY(-30%);animation-timing-function:cubic-bezier(.75,.05,.86,.08);}50%,100%{transform:translateY(0%);animation-timing-function:cubic-bezier(.22,.61,.35,1);}"]),wJ=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__DropAnimation",componentId:"sc-13qk6mh-1"})(["animation:"," 3.2s linear infinite;"],vJ),TJ=(0,p.keyframes)(["0%{opacity:0;}50%,100%{opacity:1;}"]),SJ=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__FadeInAnimation",componentId:"sc-13qk6mh-2"})(["animation:"," 2.5s linear infinite;"],TJ),CJ=(0,p.keyframes)(["0%{transform:translateX(-100%);}50%,100%{transform:translateX(0%);}"]),IJ=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__FlyInLeftAnimation",componentId:"sc-13qk6mh-3"})(["animation:"," 2s linear infinite;"],CJ),xJ=(0,p.keyframes)(["0%{transform:translateX(100%);}50%,100%{transform:translateX(0%);}"]),AJ=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__FlyInRightAnimation",componentId:"sc-13qk6mh-4"})(["animation:"," 2s linear infinite;"],xJ),kJ=(0,p.keyframes)(["0%{transform:translateY(-100%);}50%,100%{transform:translateY(0%);}"]),OJ=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__FlyInTopAnimation",componentId:"sc-13qk6mh-5"})(["animation:"," 2s linear infinite;"],kJ),PJ=(0,p.keyframes)(["0%{transform:translateY(100%);}50%,100%{transform:translateY(0%);}"]),NJ=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__FlyInBottomAnimation",componentId:"sc-13qk6mh-6"})(["animation:"," 2s linear infinite;"],PJ),RJ=(0,p.keyframes)(["0%{transform:scale(1);}12.5%{transform:scale(0.75);}37.5%{transform:scale(1.25);}50%,100%{transform:scale(1);}"]),MJ=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__PulseAnimation",componentId:"sc-13qk6mh-7"})(["animation:"," 2s cubic-bezier(0.4,0,0.2,1) infinite;"],RJ),LJ=(0,p.keyframes)(["0%{transform:translateX(-100%) rotate(-360deg);}50%,100%{transform:translateX(0%);}"]),DJ=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__RotateInLeftAnimation",componentId:"sc-13qk6mh-8"})(["animation:"," 2s linear infinite;"],LJ),BJ=(0,p.keyframes)(["0%{transform:translateX(100%) rotate(360deg);}50%,100%{transform:translateX(0%);}"]),FJ=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__RotateInRightAnimation",componentId:"sc-13qk6mh-9"})(["animation:"," 2s linear infinite;"],BJ),HJ=(0,p.keyframes)(["0%{transform:rotate(-540deg) scale(0.1);opacity:0;}50%,100%{transform:none;opacity:1;}"]),UJ=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__TwirlInAnimation",componentId:"sc-13qk6mh-10"})(["animation:"," 2s cubic-bezier(0.2,0.75,0.4,1) infinite;"],HJ),jJ=(0,p.keyframes)(["0%{transform:translateX(-100%);opacity:0;}50%,100%{transform:translateX(0%);opacity:1;}"]),zJ=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__WhooshInLeftAnimation",componentId:"sc-13qk6mh-11"})(["animation:"," 2s cubic-bezier(0,0,0.2,1) infinite;"],jJ),GJ=(0,p.keyframes)(["0%{transform:translateX(100%);opacity:0;}50%,100%{transform:translateX(0%);opacity:1;}"]),YJ=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__WhooshInRightAnimation",componentId:"sc-13qk6mh-12"})(["animation:"," 2s cubic-bezier(0,0,0.2,1) infinite;"],GJ),ZJ=(0,p.keyframes)(["0%{transform:translateX(-100%) scale(1.5);}50%,100%{transform:translateX(200%) scale(1.5);}"]),WJ=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__PanLeftAnimation",componentId:"sc-13qk6mh-13"})(["animation:"," 3s linear infinite;"],ZJ),VJ=(0,p.keyframes)(["0%{transform:translateX(100%) scale(1.5);}50%,100%{transform:translateX(-200%) scale(1.5);}"]),$J=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__PanRightAnimation",componentId:"sc-13qk6mh-14"})(["animation:"," 3s linear infinite;"],VJ),qJ=(0,p.keyframes)(["0%{transform:translateY(-100%) scale(1.5);}50%,100%{transform:translateY(200%) scale(1.5);}"]),KJ=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__PanTopAnimation",componentId:"sc-13qk6mh-15"})(["animation:"," 3s linear infinite;"],qJ),XJ=(0,p.keyframes)(["0%{transform:translateY(100%) scale(1.5);}50%,100%{transform:translateY(-200%) scale(1.5);}"]),QJ=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__PanBottomAnimation",componentId:"sc-13qk6mh-16"})(["animation:"," 3s linear infinite;"],XJ),JJ=(0,p.keyframes)(["0%{opacity:0;transform:scale(0);}50%,100%{opacity:1;transform:scale(1);}"]),e0=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__ZoomInAnimation",componentId:"sc-13qk6mh-17"})(["animation:"," 2s linear infinite;"],JJ),t0=(0,p.keyframes)(["0%{opacity:0;transform:scale(2);}50%,100%{opacity:1;transform:scale(1);}"]),n0=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__ZoomOutAnimation",componentId:"sc-13qk6mh-18"})(["animation:"," 2s linear infinite;"],t0),r0=(0,p.keyframes)(["0%{opacity:0;transform:translate3d(-50%,0,0) scale(2);}50%,100%{opacity:1;transform:none;}"]),a0=(0,p.default)(_J).withConfig({displayName:"effectChooserElements__PanAndZoomAnimation",componentId:"sc-13qk6mh-19"})(["animation:"," 2s linear infinite;"],r0),o0=(e,t)=>d0.includes(e)?e:t?`${e} ${t}`.trim():e,i0="none",l0="dynamicPropertyValue",s0={HALF:"half",QUARTER:"quarter"},c0=[],d0=[Un.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value],u0={NO_ANIMATION:{value:i0,label:(0,d._x)("None","animation effect","web-stories")},[o0(Un.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Un.DIRECTION.LEFT_TO_RIGHT)]:{value:o0(Un.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Un.DIRECTION.LEFT_TO_RIGHT),label:(0,d._x)("Pan Left","animation effect","web-stories"),animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Pan Left","animation effect","web-stories")),value:Un.BACKGROUND_ANIMATION_EFFECTS.PAN.value,panDirection:Un.DIRECTION.LEFT_TO_RIGHT,gridSpace:s0.QUARTER,Effect:WJ,size:16}},[o0(Un.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Un.DIRECTION.RIGHT_TO_LEFT)]:{value:o0(Un.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Un.DIRECTION.RIGHT_TO_LEFT),label:(0,d._x)("Pan Right","animation effect","web-stories"),animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Pan Right","animation effect","web-stories")),value:Un.BACKGROUND_ANIMATION_EFFECTS.PAN.value,panDirection:Un.DIRECTION.RIGHT_TO_LEFT,gridSpace:s0.QUARTER,Effect:$J,size:16}},[o0(Un.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Un.DIRECTION.BOTTOM_TO_TOP)]:{value:o0(Un.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Un.DIRECTION.BOTTOM_TO_TOP),label:(0,d._x)("Pan Up","animation effect","web-stories"),animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Pan Up","animation effect","web-stories")),value:Un.BACKGROUND_ANIMATION_EFFECTS.PAN.value,panDirection:Un.DIRECTION.BOTTOM_TO_TOP,gridSpace:s0.QUARTER,Effect:QJ,size:16}},[o0(Un.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Un.DIRECTION.TOP_TO_BOTTOM)]:{value:o0(Un.BACKGROUND_ANIMATION_EFFECTS.PAN.value,Un.DIRECTION.TOP_TO_BOTTOM),label:(0,d._x)("Pan Down","animation effect","web-stories"),animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Pan Down","animation effect","web-stories")),value:Un.BACKGROUND_ANIMATION_EFFECTS.PAN.value,panDirection:Un.DIRECTION.TOP_TO_BOTTOM,gridSpace:s0.QUARTER,Effect:KJ,size:16}},[o0(Un.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,Un.SCALE_DIRECTION.SCALE_IN)]:{value:o0(Un.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,Un.SCALE_DIRECTION.SCALE_IN),label:(0,d._x)("Zoom In","animation effect","web-stories"),animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Zoom In","animation effect","web-stories")),value:Un.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,zoomDirection:Un.SCALE_DIRECTION.SCALE_IN,gridSpace:s0.HALF,Effect:e0,size:14}},[o0(Un.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,Un.SCALE_DIRECTION.SCALE_OUT)]:{value:o0(Un.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,Un.SCALE_DIRECTION.SCALE_OUT),label:(0,d._x)("Zoom Out","animation effect","web-stories"),animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Zoom Out","animation effect","web-stories")),value:Un.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value,zoomDirection:Un.SCALE_DIRECTION.SCALE_OUT,gridSpace:s0.HALF,Effect:n0,size:20}},[Un.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:{value:Un.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value,label:Un.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.name,animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),Un.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.name),value:Un.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value,zoomDirection:l0,Effect:a0,size:26}}},p0={NO_ANIMATION:{value:i0,label:(0,d._x)("None","animation effect","web-stories")},[Un.ANIMATION_EFFECTS.DROP.value]:{value:Un.ANIMATION_EFFECTS.DROP.value,label:Un.ANIMATION_EFFECTS.DROP.name,animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),Un.ANIMATION_EFFECTS.DROP.name),value:Un.ANIMATION_EFFECTS.DROP.value,Effect:wJ}},[Un.ANIMATION_EFFECTS.FADE_IN.value]:{value:Un.ANIMATION_EFFECTS.FADE_IN.value,label:Un.ANIMATION_EFFECTS.FADE_IN.name,animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),Un.ANIMATION_EFFECTS.FADE_IN.name),value:Un.ANIMATION_EFFECTS.FADE_IN.value,Effect:SJ}},[o0(Un.ANIMATION_EFFECTS.FLY_IN.value,Un.DIRECTION.LEFT_TO_RIGHT)]:{value:o0(Un.ANIMATION_EFFECTS.FLY_IN.value,Un.DIRECTION.LEFT_TO_RIGHT),label:Un.ANIMATION_EFFECTS.FLY_IN.name,animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Fly In from Left","animation effect","web-stories")),value:Un.ANIMATION_EFFECTS.FLY_IN.value,flyInDirection:Un.DIRECTION.LEFT_TO_RIGHT,gridSpace:s0.QUARTER,Effect:IJ,size:16}},[o0(Un.ANIMATION_EFFECTS.FLY_IN.value,Un.DIRECTION.TOP_TO_BOTTOM)]:{value:o0(Un.ANIMATION_EFFECTS.FLY_IN.value,Un.DIRECTION.TOP_TO_BOTTOM),label:Un.ANIMATION_EFFECTS.FLY_IN.name,animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Fly In from Top","animation effect","web-stories")),value:Un.ANIMATION_EFFECTS.FLY_IN.value,flyInDirection:Un.DIRECTION.TOP_TO_BOTTOM,gridSpace:s0.QUARTER,Effect:OJ,size:16}},[o0(Un.ANIMATION_EFFECTS.FLY_IN.value,Un.DIRECTION.BOTTOM_TO_TOP)]:{value:o0(Un.ANIMATION_EFFECTS.FLY_IN.value,Un.DIRECTION.BOTTOM_TO_TOP),label:Un.ANIMATION_EFFECTS.FLY_IN.name,animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Fly In from Bottom","animation effect","web-stories")),value:Un.ANIMATION_EFFECTS.FLY_IN.value,flyInDirection:Un.DIRECTION.BOTTOM_TO_TOP,gridSpace:s0.QUARTER,Effect:NJ,size:16}},[o0(Un.ANIMATION_EFFECTS.FLY_IN.value,Un.DIRECTION.RIGHT_TO_LEFT)]:{value:o0(Un.ANIMATION_EFFECTS.FLY_IN.value,Un.DIRECTION.RIGHT_TO_LEFT),label:Un.ANIMATION_EFFECTS.FLY_IN.name,animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Fly In from Right","animation effect","web-stories")),value:Un.ANIMATION_EFFECTS.FLY_IN.value,flyInDirection:Un.DIRECTION.RIGHT_TO_LEFT,gridSpace:s0.QUARTER,Effect:AJ,size:16}},[Un.ANIMATION_EFFECTS.PULSE.value]:{value:Un.ANIMATION_EFFECTS.PULSE.value,label:Un.ANIMATION_EFFECTS.PULSE.name,animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),Un.ANIMATION_EFFECTS.PULSE.name),value:Un.ANIMATION_EFFECTS.PULSE.value,Effect:MJ}},[o0(Un.ANIMATION_EFFECTS.ROTATE_IN.value,Un.DIRECTION.LEFT_TO_RIGHT)]:{value:o0(Un.ANIMATION_EFFECTS.ROTATE_IN.value,Un.DIRECTION.LEFT_TO_RIGHT),label:(0,d._x)("Rotate","animation effect","web-stories"),animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Rotate In from Left","animation effect","web-stories")),value:Un.ANIMATION_EFFECTS.ROTATE_IN.value,rotateInDirection:Un.DIRECTION.LEFT_TO_RIGHT,gridSpace:s0.HALF,Effect:DJ,size:18}},[o0(Un.ANIMATION_EFFECTS.ROTATE_IN.value,Un.DIRECTION.RIGHT_TO_LEFT)]:{value:o0(Un.ANIMATION_EFFECTS.ROTATE_IN.value,Un.DIRECTION.RIGHT_TO_LEFT),label:(0,d._x)("Rotate","animation effect","web-stories"),animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Rotate In from Right","animation effect","web-stories")),value:Un.ANIMATION_EFFECTS.ROTATE_IN.value,rotateInDirection:Un.DIRECTION.RIGHT_TO_LEFT,gridSpace:s0.HALF,Effect:FJ,size:18}},[Un.ANIMATION_EFFECTS.TWIRL_IN.value]:{value:Un.ANIMATION_EFFECTS.TWIRL_IN.value,label:Un.ANIMATION_EFFECTS.TWIRL_IN.name,animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),Un.ANIMATION_EFFECTS.TWIRL_IN.name),value:Un.ANIMATION_EFFECTS.TWIRL_IN.value,Effect:UJ,size:26}},[o0(Un.ANIMATION_EFFECTS.WHOOSH_IN.value,Un.DIRECTION.LEFT_TO_RIGHT)]:{value:o0(Un.ANIMATION_EFFECTS.WHOOSH_IN.value,Un.DIRECTION.LEFT_TO_RIGHT),label:Un.ANIMATION_EFFECTS.WHOOSH_IN.name,animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Whoosh In from Left","animation effect","web-stories")),value:Un.ANIMATION_EFFECTS.WHOOSH_IN.value,whooshInDirection:Un.DIRECTION.LEFT_TO_RIGHT,gridSpace:s0.HALF,Effect:zJ,size:20}},[o0(Un.ANIMATION_EFFECTS.WHOOSH_IN.value,Un.DIRECTION.RIGHT_TO_LEFT)]:{value:o0(Un.ANIMATION_EFFECTS.WHOOSH_IN.value,Un.DIRECTION.RIGHT_TO_LEFT),label:Un.ANIMATION_EFFECTS.WHOOSH_IN.name,animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Whoosh In from Right","animation effect","web-stories")),value:Un.ANIMATION_EFFECTS.WHOOSH_IN.value,whooshInDirection:Un.DIRECTION.RIGHT_TO_LEFT,gridSpace:s0.HALF,Effect:YJ,size:20}},[o0(Un.ANIMATION_EFFECTS.ZOOM.value,Un.SCALE_DIRECTION.SCALE_IN)]:{value:o0(Un.ANIMATION_EFFECTS.ZOOM.value,Un.SCALE_DIRECTION.SCALE_IN),label:(0,d._x)("Scale In","animation effect","web-stories"),animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Scale In","animation effect","web-stories")),value:Un.ANIMATION_EFFECTS.ZOOM.value,scaleDirection:Un.SCALE_DIRECTION.SCALE_IN,gridSpace:s0.HALF,Effect:e0,size:14}},[o0(Un.ANIMATION_EFFECTS.ZOOM.value,Un.SCALE_DIRECTION.SCALE_OUT)]:{value:o0(Un.ANIMATION_EFFECTS.ZOOM.value,Un.SCALE_DIRECTION.SCALE_OUT),label:(0,d.__)("Scale Out","web-stories"),animation:{ariaLabel:(0,$e.default)(
/* translators: %s: animation effect. */
(0,d.__)('"%s" Effect',"web-stories"),(0,d._x)("Scale Out","animation effect","web-stories")),value:Un.ANIMATION_EFFECTS.ZOOM.value,scaleDirection:Un.SCALE_DIRECTION.SCALE_OUT,gridSpace:s0.HALF,Effect:n0,size:20}}},m0={ariaLabel:za().string,value:za().string.isRequired,Effect:za().any,gridSpace:za().oneOf(Object.values(s0)),size:za().number,scaleDirection:za().oneOf(Object.values(Un.SCALE_DIRECTION)),panDirection:za().oneOf(Object.values(Un.DIRECTION)),zoomDirection:za().oneOf(Object.values(Un.SCALE_DIRECTION)),flyInDirection:za().oneOf(Object.values(Un.DIRECTION)),rotateInDirection:za().oneOf(Object.values(Un.DIRECTION)),whooshInDirection:za().oneOf(Object.values(Un.DIRECTION))},g0={value:za().string.isRequired,label:za().string.isRequired,animation:za().shape(m0)},f0=(za().oneOf([...Object.values(Un.DIRECTION),...Object.values(Un.SCALE_DIRECTION),!1]),(e,t)=>{const n=Object.entries(t).filter((e=>{let[t]=e;return-1===d0.indexOf(t)})).map((e=>{let[t,n]=e;return[t,n.options]})).reduce(((e,t)=>{let[n,r]=t;return[...e,...(r||[]).map((e=>o0(n,e)))]}),[]);return Object.keys(e).filter((e=>n.includes(e)))}),h0=e=>Object.values(e).includes(l0),b0=e=>{let{animation:t,disabledOptions:n=[]}=e;const r=t.panDirection&&!n.includes(t.panDirection)?t.panDirection:Object.values(Un.DIRECTION).filter((e=>!n.includes(e)))?.[0]||void 0;return t.value===Un.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value?{...t,zoomDirection:n.includes(Un.SCALE_DIRECTION.SCALE_IN)?Un.SCALE_DIRECTION.SCALE_OUT:Un.SCALE_DIRECTION.SCALE_IN,panDirection:r}:t},E0=e=>{let{animation:t,disabledTypeOptionsMap:n}=e;return h0(t)?b0({animation:t,disabledOptions:n[t.value]?.options}):t},y0=p.default.div.withConfig({displayName:"effectChooserDropdown__ContentWrapper",componentId:"sc-1d71y2l-0"})(["display:inline-block;"]),_0=p.default.li.withConfig({displayName:"effectChooserDropdown__AnimationListItem",componentId:"sc-1d71y2l-1"})(["border:none;background:",";border-radius:",";height:","px;position:relative;grid-column-start:",";overflow:hidden;font-family:'Teko',sans-serif;font-size:","px;line-height:1;color:",";text-transform:uppercase;transition:background 0.1s linear;margin:0;& > div{height:100%;display:flex;align-items:center;justify-content:center;text-align:center;}&[aria-disabled='true']{background:",";}&:hover:not([aria-disabled='true']){cursor:pointer;}&:hover:not([aria-disabled='true']),&:focus:not([aria-disabled='true']){background:",";","{display:inline-block;}","{display:none;}}"," ",";"],(e=>{let{active:t,theme:n}=e;return t?n.colors.interactiveBg.secondaryPress:n.colors.interactiveBg.secondaryNormal}),(e=>{let{theme:t}=e;return t.borders.radius.small}),56,(e=>{let{gridSpace:t}=e;return(e=>{switch(e){case s0.HALF:return"span 2";case s0.QUARTER:return"span 1";default:return"span 4"}})(t)}),(e=>{let{size:t=28}=e;return t}),(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.disable}),(e=>{let{active:t,theme:n}=e;return t?n.colors.interactiveBg.secondaryPress:n.colors.interactiveBg.secondaryHover}),_J,y0,(e=>{let{noEffect:t}=e;return t&&(0,p.css)(["height:36px;font-size:14px;text-transform:none;","{display:inline-block !important;}"],y0)}),pp),v0=(0,p.css)(["display:inline-block;margin-top:0;padding:16px 4px 16px 16px;ul{display:grid;justify-content:center;gap:12px 4px;grid-template-columns:repeat(4,1fr);position:relative;}"]),w0=e=>{let{theme:t}=e;return(0,p.css)(["margin:-1px -1px 0 -1px;width:calc(100% + 2px);border-color:transparent transparent "," transparent;height:","px;&:hover{border-color:transparent transparent "," transparent;}",""],t.colors.border.defaultNormal,45,t.colors.border.defaultNormal,pp)};function T0(){return T0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T0.apply(this,arguments)}const S0=(0,u.forwardRef)(((e,t)=>{let{option:n,...r}=e;return c.createElement(_0,T0({ref:t,"aria-label":n.animation?.ariaLabel||n.label,disabled:n.disabled,"aria-disabled":n.disabled,size:n.animation?.size,gridSpace:n.animation?.gridSpace,noEffect:!n.animation?.Effect},r),c.createElement(Tooltip,{title:n?.tooltip||""},c.createElement(y0,null,n.label),n.animation?.Effect&&c.createElement(n.animation.Effect,null,n.label)))})),C0=S0;S0.displayName="DropDownItem",S0.propTypes={option:za().shape(g0)};const I0=(0,u.forwardRef)((function EffectChooserDropdown(e,t){let{onAnimationSelected:n,onNoEffectSelected:r,isBackgroundEffects:a=!1,selectedEffectType:o,disabledTypeOptionsMap:i,direction:l,selectButtonStylesOverride:s,disabled:m=!1}=e;const{enableExperimentalAnimationEffects:g}=(0,C.useFeatures)(),f=(0,u.useMemo)((()=>o0(o,l)),[o,l]),h=(0,u.useMemo)((()=>a&&f0(u0,i)),[i,a]),b=a?Vd.PLACEMENT.BOTTOM:Vd.PLACEMENT.TOP,E=a?u0:p0,y=(0,u.useMemo)((()=>g?Object.values(E):Object.values(E).filter((e=>{let{value:t}=e;return-1===c0.indexOf(t)}))),[E,g]),_=(0,u.useMemo)((()=>y?.map((e=>{const t=a&&h.includes(e.value);return{...e,disabled:t,tooltip:t&&i[e.animation?.value]?.tooltip}}))),[y,a,h,i]),v=(0,u.useCallback)(((e,t)=>{if(e.preventDefault(),t===i0)return void(Boolean(f)&&r());const a=E[t]?.animation,o=E0({animation:a,disabledTypeOptionsMap:i});n({animation:o.value,panDir:o?.panDirection,zoomDirection:o?.zoomDirection,flyInDir:o?.flyInDirection,rotateInDir:o?.rotateInDirection,whooshInDir:o?.whooshInDirection,scaleDirection:o?.scaleDirection})}),[E,i,n,f,r]),w=f&&f!==i0?w0:pp,T=(0,p.css)([""," ",""],w,void 0!==s&&s);return c.createElement(gx.DropDown,{ref:t,options:_,placeholder:(0,d._x)("None","animation effect","web-stories"),selectedValue:f,ariaLabel:(0,d.__)("Animation: Effect Chooser","web-stories"),menuStylesOverride:v0,renderItem:C0,onMenuItemClick:v,placement:b,isKeepMenuOpenOnSelection:!0,selectButtonStylesOverride:T,disabled:m})})),x0=I0,A0="animation",k0=(0,p.default)(QC).withConfig({displayName:"animation__StyledRow",componentId:"sc-1j3eshx-0"})(["margin-bottom:-1px;"]),O0=p.default.div.withConfig({displayName:"animation__GroupWrapper",componentId:"sc-1j3eshx-1"})([""," margin-bottom:16px;"],(e=>{let{hasAnimation:t,theme:n}=e;return t&&`\n    border: 1px solid ${n.colors.border.defaultNormal};\n    border-radius: ${n.borders.radius.small};\n  `})),P0=(0,d.__)("The background image is too small to animate. Double click on the bg & scale the image before applying the animation.","web-stories");const N0=function AnimationPanel(e){let{selectedElements:t,selectedElementAnimations:n,pushUpdateForObject:r,updateAnimationState:a}=e;const o=Qa((e=>{let{state:{currentPageNumber:t}}=e;return 1===t})),i=(0,u.useRef)(!1),{highlight:l,resetHighlight:s}=mm((e=>({highlight:e[_g.ANIMATION],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),p=1===t.length&&t[0].isBackground,m=(0,u.useMemo)((()=>{const e=t.map((e=>e.animation)).filter(Boolean);return n.map((t=>({...e.find((e=>e.id===t.id))||t}))).filter((e=>!e.delete))}),[t,n]),g=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,u.shallowEqual)(e,m[0])||(r(A0,e,null,t),i.current=!0)}),[r,m]),f=(0,u.useCallback)((e=>{let{animation:t,...a}=e;if(!t)return;const o=n[0]?.id||(0,pe.default)(),l=(0,Un.getAnimationEffectDefaults)(t),s=n[0]?.type===t?{duration:n[0]?.duration,delay:n[0]?.delay}:{};r(A0,{id:o,type:t,...l,...s,...a},null,!0),i.current=!0}),[n,r]),h=document.activeElement,b=(0,u.useDebouncedCallback)((()=>{i.current&&(a({animationState:Un.STORY_ANIMATION_STATE.PLAYING_SELECTED}),i.current=!1)}),300);(0,u.useEffect)(b,[n,a,h,b]);const E=(0,u.useCallback)((()=>{r(A0,{...m[0],delete:!0},null,!0)}),[r,m]),y=(0,u.useMemo)((()=>{if(t[0]?.isBackground){const e=["media","image","video","gif"].includes(t[0].type)&&(0,Un.hasOffsets)({element:t[0]}),n=(0,ec.progress)(t[0]?.scale||0,{MIN:Un.BG_MIN_SCALE,MAX:Un.BG_MAX_SCALE});return{[Un.BACKGROUND_ANIMATION_EFFECTS.PAN.value]:{tooltip:P0,options:[!e.bottom&&Un.DIRECTION.TOP_TO_BOTTOM,!e.left&&Un.DIRECTION.RIGHT_TO_LEFT,!e.top&&Un.DIRECTION.BOTTOM_TO_TOP,!e.right&&Un.DIRECTION.LEFT_TO_RIGHT].filter(Boolean)},[Un.BACKGROUND_ANIMATION_EFFECTS.ZOOM.value]:{tooltip:P0,options:[n<=.01&&Un.SCALE_DIRECTION.SCALE_IN,n>=.99&&Un.SCALE_DIRECTION.SCALE_OUT].filter(Boolean)},[Un.BACKGROUND_ANIMATION_EFFECTS.PAN_AND_ZOOM.value]:{tooltip:P0,options:[!e.bottom&&Un.DIRECTION.TOP_TO_BOTTOM,!e.left&&Un.DIRECTION.RIGHT_TO_LEFT,!e.top&&Un.DIRECTION.BOTTOM_TO_TOP,!e.right&&Un.DIRECTION.LEFT_TO_RIGHT,n<=.01&&Un.SCALE_DIRECTION.SCALE_IN,n>=.99&&Un.SCALE_DIRECTION.SCALE_OUT].filter(Boolean)}}}return{}}),[t]),_=(v=m[0]?.type,[...Object.values(Un.ANIMATION_EFFECTS),...Object.values(Un.ANIMATION_PARTS),...Object.values(Un.BACKGROUND_ANIMATION_EFFECTS)].find((e=>e.value===v))?.name||"");var v;return t.length>1?null:c.createElement(R0,{name:"animation",title:(0,d.__)("Animation","web-stories"),onAnimationEnd:()=>s(),isPersistable:!l,$_css:l?.showEffect&&XA.FLASH},c.createElement(O0,{hasAnimation:_},c.createElement(k0,null,c.createElement(x0,{ref:e=>{e&&l?.focus&&l?.showEffect&&e.focus()},onAnimationSelected:f,onNoEffectSelected:E,isBackgroundEffects:p,disabledTypeOptionsMap:y,direction:hJ(m[0]),selectedEffectType:m[0]?.type,selectButtonStylesOverride:l?.focus&&XA.OUTLINE,disabled:o})),m[0]&&c.createElement(yJ,{animation:m[0],onChange:g,disabledTypeOptionsMap:y,disabled:o})),o&&c.createElement(VQ,{message:xu.firstPageAnimation.animationPanel}))};var R0=(0,p.default)(QP).withConfig({displayName:"animation___StyledSimplePanel",componentId:"sc-1j3eshx-2"})(["",""],(e=>e.$_css));function M0(){return M0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M0.apply(this,arguments)}const L0=p.default.div.withConfig({displayName:"borderWidth__BorderInputsFlexContainer",componentId:"sc-tay5fw-0"})(["display:flex;gap:7px;margin-bottom:16px;"]),D0=(0,p.default)(LockToggle).withConfig({displayName:"borderWidth__StyledLockToggle",componentId:"sc-tay5fw-1"})(["",";"],pp),B0=p.default.div.withConfig({displayName:"borderWidth__ToggleWrapper",componentId:"sc-tay5fw-2"})(["padding-top:2px;"," align-self:stretch;"],(e=>{let{locked:t}=e;return t&&"\n    padding-left: 8px;\n  "})),F0=(0,p.default)(Uf).withConfig({displayName:"borderWidth__BorderTop",componentId:"sc-tay5fw-3"})(["transform:rotate(90deg);"]),H0=(0,p.default)(Uf).withConfig({displayName:"borderWidth__BorderBottom",componentId:"sc-tay5fw-4"})(["transform:rotate(-90deg);"]),U0=(0,p.default)(Uf).withConfig({displayName:"borderWidth__BorderRight",componentId:"sc-tay5fw-5"})(["transform:scaleX(-1);"]);const j0=function WidthControls(e){let{selectedElements:t,pushUpdateForObject:n}=e;const r=kM(t,"border",$M),a=t.every($n.canSupportMultiBorder),o=!0===r.lockedWidth||!a,i=(0,u.useCallback)((e=>(t,r)=>{n("border",o?{left:r,top:r,right:r,bottom:r}:{[e]:r},$M,!0)}),[n,o]),l=(0,u.useCallback)((e=>{n("border",e,$M,!0)}),[n]),s=o?(0,d.__)("Border","web-stories"):(0,d.__)("Left border","web-stories"),p=(0,u.useCallback)((e=>({isIndeterminate:we===e,placeholder:we===e?Te:null})),[]);return c.createElement(L0,null,c.createElement(xL,{locked:o},c.createElement(CL,M0({value:r.left,onChange:i("left"),"aria-label":s,suffix:!o&&c.createElement(Uf,null),min:0},p(r.left))),!o&&c.createElement(c.Fragment,null,c.createElement(CL,M0({value:r.top,onChange:i("top"),"aria-label":(0,d.__)("Top border","web-stories"),labelText:(0,d.__)("Top","web-stories"),suffix:c.createElement(F0,null),min:0},p(r.top))),c.createElement(CL,M0({value:r.right,onChange:i("right"),"aria-label":(0,d.__)("Right border","web-stories"),labelText:(0,d.__)("Right","web-stories"),suffix:c.createElement(U0,null),min:0},p(r.right))),c.createElement(CL,M0({value:r.bottom,onChange:i("bottom"),"aria-label":(0,d.__)("Bottom border","web-stories"),labelText:(0,d.__)("Bottom","web-stories"),suffix:c.createElement(H0,null),min:0},p(r.bottom))))),a&&c.createElement(B0,{locked:o},c.createElement(Tooltip,{title:(0,d.__)("Toggle consistent border","web-stories")},c.createElement(D0,{isLocked:o,onClick:()=>{let e={lockedWidth:!o};o||(e={...e,top:r.left,right:r.left,bottom:r.left}),l(e)},"aria-label":(0,d.__)("Toggle consistent border","web-stories")}))))};const z0=function BorderStylePanel(e){const{selectedElements:t,pushUpdate:n}=e,r=kM(t,"border",$M),{color:a,left:o,top:i,right:l,bottom:s}=r,p=t.every((e=>(0,$n.canMaskHaveBorder)(e))),m=(0,u.useCallback)(((e,t)=>n({border:{...r,[t]:e}},!0)),[r,n]);if(!p)return null;const g=t.every($n.canSupportMultiBorder),f=[o,i,l,s].some((e=>e>0));return c.createElement(QP,{name:"borderStyle",title:(0,d.__)("Border","web-stories")},c.createElement(j0,e),f&&c.createElement(QC,null,c.createElement(dC,{value:a,onChange:e=>{m(e,"color")},label:(0,d.__)("Border color","web-stories"),hasEyedropper:!0,allowsOpacity:g})))},G0=(0,p.default)(m.Button).withConfig({displayName:"captions__StyledButton",componentId:"sc-17zds0n-0"})(["",";"],(e=>{let{theme:t}=e;return up.focusableOutlineCSS(t.colors.border.focus,t.colors.bg.secondary)})),Y0=(0,p.default)(G0).withConfig({displayName:"captions__UploadButton",componentId:"sc-17zds0n-1"})(["padding:12px 8px;"]);var Z0=(0,p.default)(Y0).withConfig({displayName:"captions___StyledUploadButton",componentId:"sc-17zds0n-2"})(["",""],(e=>e.$_css));const W0={MAX:1e3};const V0=function CaptionsPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=IM(t,"tracks",[]),a=r===we;PI((e=>{let{resource:t}=e;return{resource:{...t,alt:t.alt?.slice(0,W0.MAX)}}}),[]);const o=(0,u.useCallback)((e=>{let t=[];if(e){const n=r.findIndex((t=>{let{id:n}=t;return n===e}));t=[...r.slice(0,n),...r.slice(n+1)]}n({tracks:t},!0)}),[r,n]),i=(0,u.useCallback)((e=>{let{src:t="",id:r,needsProxy:a=!1}=e;const o={track:t,trackId:r,id:(0,pe.default)(),kind:"captions",srclang:"",label:"",needsProxy:a};n({tracks:[o]},!0)}),[n]),{highlight:l,resetHighlight:s}=mm((e=>({highlight:e[_g.CAPTIONS],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),p=(0,u.useCallback)((e=>c.createElement(Z0,{onAnimationEnd:()=>s(),ref:e=>{e&&l?.focus&&l?.showEffect&&e.focus()},onClick:e,type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.RECTANGLE,$_css:l?.showEffect&&XA.OUTLINE},(0,d.__)("Upload a file","web-stories"))),[s,l?.focus,l?.showEffect]);return c.createElement($0,{onAnimationEnd:()=>s(),name:"caption",title:(0,d.__)("Caption and Subtitles","web-stories"),isPersistable:!l,$_css2:l?.showEffect&&XA.FLASH},c.createElement(dR,{isIndeterminate:a,tracks:a?[]:r,handleChangeTrack:i,handleRemoveTrack:o,renderUploadButton:p}))};var $0=(0,p.default)(QP).withConfig({displayName:"captions___StyledSimplePanel",componentId:"sc-17zds0n-3"})(["",""],(e=>e.$_css2));const q0=p.default.div.withConfig({displayName:"alignment__ElementRow",componentId:"sc-812g1l-0"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;padding:16px;overflow:auto;overflow:overlay;"]),K0=["distributeHorizontally","distributeVertically","alignLeft","alignCenter","alignRight","alignTop","alignMiddle","alignBottom"],X0=(0,p.default)(m.Button).attrs({variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL}).withConfig({displayName:"alignment__AlignmentButton",componentId:"sc-812g1l-1"})(["position:relative;:focus{z-index:1;}",";"],(e=>{let{theme:t}=e;return up.focusableOutlineCSS(t.colors.border.focus,"#1d1f20")})),Q0=(0,p.default)(TP).withConfig({displayName:"alignment__StyledPanel",componentId:"sc-812g1l-2"})(["background-color:",";border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.opacity.black24}),(e=>{let{theme:t}=e;return t.colors.divider.secondary}));const J0=function ElementAlignmentPanel(e){let{selectedElements:t,pushUpdate:n}=e;const{isRTL:r}=U(),{isDistributionEnabled:a,handleAlignLeft:o,handleAlignCenter:i,handleAlignRight:l,handleAlignTop:s,handleAlignMiddle:p,handleAlignBottom:m,handleHorizontalDistribution:g,handleVerticalDistribution:f}=YL({selectedElements:t,updateElements:e=>n(e,!0)}),h=(0,u.useRef)(),[b,E]=(0,u.useState)(null),y=(0,u.useCallback)((e=>()=>{const t=K0.findIndex((e=>e===b)),n=K0[t+e];n&&(E(n),h.current.querySelector(`#${n}`).focus())}),[b,E]),_=r?-1:1;return(0,Ir.useKeyDownEffect)(h,"left",(()=>y(_)),[y,_]),(0,Ir.useKeyDownEffect)(h,"right",(()=>y(-_)),[y,_]),c.createElement(Q0,{name:"alignment",canCollapse:!1,ariaLabel:(0,d.__)("Alignment","web-stories")},c.createElement(q0,{ref:h},c.createElement(Tooltip,{title:(0,d.__)("Distribute horizontally","web-stories")},c.createElement(X0,{disabled:!a,onClick:g,"aria-label":(0,d.__)("Distribute horizontally","web-stories"),id:K0[0],onFocus:()=>E(K0[0])},c.createElement(Yh,null))),c.createElement(Tooltip,{title:(0,d.__)("Distribute vertically","web-stories")},c.createElement(X0,{disabled:!a,onClick:f,"aria-label":(0,d.__)("Distribute vertically","web-stories"),id:K0[1],onFocus:()=>E(K0[1])},c.createElement($h,null))),c.createElement(Tooltip,{title:(0,d.__)("Align left","web-stories")},c.createElement(X0,{onClick:o,"aria-label":(0,d.__)("Align left","web-stories"),id:K0[2],onFocus:()=>E(K0[2])},c.createElement(Hg,null))),c.createElement(Tooltip,{title:(0,d.__)("Align center","web-stories")},c.createElement(X0,{onClick:i,"aria-label":(0,d.__)("Align center","web-stories"),id:K0[3],onFocus:()=>E(K0[3])},c.createElement(Lg,null))),c.createElement(Tooltip,{title:(0,d.__)("Align right","web-stories")},c.createElement(X0,{onClick:l,"aria-label":(0,d.__)("Align right","web-stories"),id:K0[4],onFocus:()=>E(K0[4])},c.createElement(Vg,null))),c.createElement(Tooltip,{title:(0,d.__)("Align top","web-stories")},c.createElement(X0,{onClick:s,"aria-label":(0,d.__)("Align top","web-stories"),id:K0[5],onFocus:()=>E(K0[5])},c.createElement(df,null))),c.createElement(Tooltip,{title:(0,d.__)("Align vertical center","web-stories")},c.createElement(X0,{onClick:p,"aria-label":(0,d.__)("Align vertical center","web-stories"),id:K0[6],onFocus:()=>E(K0[6])},c.createElement(Gg,null))),c.createElement(Tooltip,{title:(0,d.__)("Align bottom","web-stories")},c.createElement(X0,{onClick:m,"aria-label":(0,d.__)("Align bottom","web-stories"),id:K0[7],onFocus:()=>E(K0[7])},c.createElement(Pg,null)))))};const e1=function(e,t,n){switch(n){case Mn.OverlayType.NONE:return null;case Mn.OverlayType.SOLID:return function(e,t){switch(t){case Mn.OverlayType.NONE:return{color:{r:0,g:0,b:0,a:.5}};case Mn.OverlayType.LINEAR:case Mn.OverlayType.RADIAL:{const{stops:t}=e,n=t.slice().sort(((e,t)=>(t.color.a??1)-(e.color.a??1))),{color:{r,g:a,b:o}}=n[0];return{color:{r,g:a,b:o,a:.5}}}default:return e}}(e,t);case Mn.OverlayType.LINEAR:return function(e,t){switch(t){case Mn.OverlayType.NONE:return{type:"linear",rotation:0,stops:[{color:{r:0,g:0,b:0,a:0},position:0},{color:{r:0,g:0,b:0,a:1},position:1}],alpha:.7};case Mn.OverlayType.SOLID:{const{color:{r:t,g:n,b:r,a}}=e;return{type:"linear",rotation:0,stops:[{color:{r:t,g:n,b:r,a:0},position:.4},{color:{r:t,g:n,b:r,a:1},position:1}],alpha:a}}case Mn.OverlayType.RADIAL:{const{stops:t,alpha:n}=e;return{type:"linear",rotation:0,stops:t,alpha:n}}default:return e}}(e,t);case Mn.OverlayType.RADIAL:return function(e,t){switch(t){case Mn.OverlayType.NONE:return{type:"radial",size:{w:.67,h:.67},stops:[{color:{r:0,g:0,b:0,a:0},position:0},{color:{r:0,g:0,b:0,a:1},position:1}],alpha:.7};case Mn.OverlayType.SOLID:{const{color:{r:t,g:n,b:r,a}}=e;return{type:"radial",size:{w:.67,h:.67},stops:[{color:{r:t,g:n,b:r,a:0},position:0},{color:{r:t,g:n,b:r,a:1},position:1}],alpha:a}}case Mn.OverlayType.LINEAR:{const{stops:t,alpha:n}=e;return{type:"radial",size:{w:.67,h:.67},stops:t,alpha:n}}default:return e}}(e,t);default:return e}},t1={[Mn.OverlayType.NONE]:{label:(0,d._x)("None","overlay","web-stories")},[Mn.OverlayType.SOLID]:{label:(0,d.__)("Tint","web-stories")},[Mn.OverlayType.LINEAR]:{label:(0,d.__)("Linear","web-stories")},[Mn.OverlayType.RADIAL]:{label:(0,d.__)("Vignette","web-stories")}};const n1=function FilterPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=AM(t,"overlay"),a=r===we,o=r?r.type||Mn.OverlayType.SOLID:Mn.OverlayType.NONE,{getProxiedUrl:i}=ii(),{isDefaultBackground:l}=t[0],s=Qa((e=>!l||e.state.currentPage?.backgroundColor)),p=(0,u.useCallback)((e=>n({overlay:e},!0)),[n]),m=o!==Mn.OverlayType.RADIAL&&o!==Mn.OverlayType.LINEAR,{LayerIcon:g}=(0,Mn.getDefinitionForType)(t[0].type);return c.createElement(QP,{name:"filter",title:(0,d.__)("Filters","web-stories")},!a&&c.createElement(QC,null,Object.keys(t1).map((e=>{const{label:n}=t1[e];return c.createElement(EC,{key:e,element:t[0],label:n,isToggled:o===e,onClick:()=>p(e1(r,o,e)),filter:e1(r,Mn.OverlayType.NONE,e),"aria-label":(0,$e.default)(
/* translators: %s: Filter type */
(0,d.__)("Filter: %s","web-stories"),n)},c.createElement(g,{element:t[0],getProxiedUrl:i,currentPageBackgroundColor:s}))}))),o!==Mn.OverlayType.NONE&&c.createElement(QC,null,c.createElement(dC,{label:(0,d.__)("Color","web-stories"),value:r,onChange:p,allowsGradient:!0,hasEyedropper:m})))},r1=(0,p.default)(Ke.Text).withConfig({displayName:"imageAccessibility__StyledText",componentId:"sc-147toy8-0"})(["color:",";margin-bottom:10px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),a1={alt:null},o1={MAX:1e3};const i1=function ImageAccessibilityPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=kM(t,"resource",a1),a=IM(t,"alt",r.alt),{highlight:o,resetHighlight:i,cancelHighlight:l}=mm((e=>({highlight:e[_g.ASSISTIVE_TEXT],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));return c.createElement(l1,{onAnimationEnd:()=>i(),name:"imageAccessibility",title:(0,d.__)("Accessibility","web-stories"),isPersistable:!o,$_css:o&&XA.FLASH},c.createElement(r1,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Add a brief description of the image.","web-stories")),c.createElement(QC,null,c.createElement(AI,{ref:e=>{e&&o?.focus&&o?.showEffect&&(e.addEventListener("keydown",l,{once:!0}),e.focus())},placeholder:a===we?Te:"",value:a||"",onChange:e=>n({alt:e?.target?.value?.trim()||null},!0),"aria-label":(0,d.__)("Assistive text","web-stories"),maxLength:o1.MAX,rows:2,isIndeterminate:a===we})))};var l1=(0,p.default)(QP).withConfig({displayName:"imageAccessibility___StyledSimplePanel",componentId:"sc-147toy8-1"})(["",""],(e=>e.$_css));const s1=p.default.div.withConfig({displayName:"link__IconInfo",componentId:"sc-niusn4-0"})(["display:flex;flex-direction:column;margin-left:20px;"]),c1=(0,p.default)(Ke.Text).withConfig({displayName:"link__IconText",componentId:"sc-niusn4-1"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),d1=p.default.span.withConfig({displayName:"link__Error",componentId:"sc-niusn4-2"})(["font-size:12px;line-height:16px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.negative}));const u1=function LinkPanel(e){let{selectedElements:t,pushUpdateForObject:n}=e;const{clearEditing:r,setDisplayLinkGuidelines:a,displayLinkGuidelines:o}=Xs((e=>({clearEditing:e.actions.clearEditing,setDisplayLinkGuidelines:e.actions.setDisplayLinkGuidelines,displayLinkGuidelines:e.state.displayLinkGuidelines}))),{highlight:i,resetHighlight:l,cancelHighlight:s}=mm((e=>({highlight:e[_g.LINK],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),{hasElementsInAttachmentArea:p}=TF(),m=(0,u.useMemo)((()=>SH({icon:null,desc:null})),[]),g=SH(kM(t,"link",m)),{url:f="",desc:h="",icon:b,rel:E=[]}=g,[y,_]=(0,u.useState)(!1),[v,w]=(0,u.useState)(!1),{actions:{getLinkMetadata:T}}=W(),{getProxiedUrl:S,checkResourceAccess:C}=ii(),I=(0,u.useBatchingCallback)((e=>{let{newUrl:t,newTitle:r,newIcon:a,needsProxy:o}=e;return n("link",(()=>t?SH({url:t,needsProxy:o,desc:r||"",icon:a?oa(t,a):""}):null),m,!0)}),[n,m]),[x,A]=(0,u.useState)(!ia(la(f))),k=(0,u.useDebouncedCallback)((0,u.useCallback)((async e=>{if(e.startsWith("http://")||e.startsWith("https://")){_(!0);try{const{title:t,image:n}=T?await T(e):{},r=!!n&&await C(n);I({newUrl:e,newTitle:t,newIcon:n,needsProxy:r})}catch(e){A(!0)}finally{_(!1)}}}),[C,T,I]),1200),O=(0,u.useCallback)(((e,t)=>{if(r(),k.cancel(),e.url){if(we===e.url)return;const t=la(e.url),n=ia(t);A(!n),n&&k(t)}n("link",""!==e.url?{...e}:null,m,t)}),[r,n,m,k]),P=(0,u.useCallback)((e=>{O({icon:e?.src},!0)}),[O]),N=Boolean(f?.length),R=N&&!x;(0,u.useEffect)((()=>{if(v){const e=N&&f!==we;a(p&&!e)}}),[t,v,p,N,a,f]);const M=b?S(g,b):null,L=we===f,D=we===h,B=we===E,F=(0,u.useCallback)((e=>O({rel:e},!0)),[O]);return c.createElement(p1,{name:"link",title:(0,d.__)("Link","web-stories"),onAnimationEnd:()=>l(),isPersistable:!i,$_css:i?.showEffect&&XA.FLASH},c.createElement(nI,{ref:e=>{e&&i?.focus&&i?.showEffect&&(e.addEventListener("keydown",s,{once:!0}),e.focus())},onChange:e=>!o&&O({url:e},!e),onBlur:()=>{a(!1),w(!1)},onFocus:()=>{w(!0)},value:f||"",placeholder:L?Te:(0,d.__)("Enter an address to apply a link","web-stories"),isIndeterminate:L,"aria-label":(0,d.__)("Element link","web-stories"),hasError:o}),o&&c.createElement(QC,null,c.createElement(d1,null,(0,d.__)("Link can not reside below the dashed line when a page attachment is present","web-stories"))),R&&c.createElement(c.Fragment,null,c.createElement(QC,null,c.createElement(qv,{placeholder:D?Te:(0,d.__)("Optional description","web-stories"),onChange:e=>{let{target:t}=e;return O({desc:t.value},!t.value)},value:h,"aria-label":(0,d.__)("Link description","web-stories"),isIndeterminate:D,disabled:y,containerStyleOverride:mp})),c.createElement(QC,{spaceBetween:!1},c.createElement(XC,{handleChange:P,icon:M,isLoading:y,disabled:y}),c.createElement(s1,null,c.createElement(c1,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Optional brand icon","web-stories")))),!B&&c.createElement(SM,{onChangeRel:F,rel:E})))};var p1=(0,p.default)(QP).withConfig({displayName:"link___StyledSimplePanel",componentId:"sc-niusn4-3"})(["",""],(e=>e.$_css));const m1=p.default.label.withConfig({displayName:"shared__Label",componentId:"sc-zfap6q-0"})(["margin-left:12px;"]),g1=(0,p.default)(uS.Checkbox).withConfig({displayName:"shared__StyledCheckbox",componentId:"sc-zfap6q-1"})(["",""],(e=>{let{theme:t}=e;return`\n    input[type='checkbox']&.${Ip.FOCUS_VISIBLE_SELECTOR} ~ div, input[type='checkbox']:focus ~ div {\n      box-shadow: 0px 0px 0 2px ${t.colors.bg.secondary}, 0px 0px 0 4px ${t.colors.border.focus} !important;\n    }\n  `})),f1=(0,p.default)(QC).withConfig({displayName:"shared__StyledRow",componentId:"sc-zfap6q-2"})(["justify-content:flex-start;"]),h1=p.default.div.withConfig({displayName:"shared__Space",componentId:"sc-zfap6q-3"})(["width:20px;"]);function CallToActionText(e){let{value:t,defaultValue:n,onChange:r}=e;const[a,o]=(0,u.useState)(t||n),i=(0,u.useDebouncedCallback)(r,300),l=(0,u.useCallback)((e=>{let{target:t}=e;t.value?(i.cancel(),r({ctaText:a||void 0})):(r({ctaText:void 0}),o(n))}),[a,i,n,r]),s=(0,u.useCallback)((e=>{let{target:t}=e;const{value:n}=t;o(n),i({ctaText:n})}),[i]),p=t===n;return c.createElement(QC,null,c.createElement(qv,{onChange:s,onBlur:l,value:a,"aria-label":(0,d.__)("Call to Action text","web-stories"),suffix:p?(0,d.__)("Default","web-stories"):null}))}function Theme(e){let{theme:t,onChange:n}=e;const r=`cb-${(0,pe.default)()}`,a=(0,u.useCallback)((e=>{n({theme:e.target.checked?Fe:He})}),[n]);return c.createElement(f1,null,c.createElement(g1,{id:r,checked:t===Fe,onChange:a}),c.createElement(m1,{htmlFor:r},c.createElement(Ke.Text,{as:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Use dark theme","web-stories"))))}function b1(e){let{icon:t,onChange:n,isFetching:r,needsProxy:a}=e;const{getProxiedUrl:o}=ii(),i=(0,u.useCallback)((e=>{n({icon:e?.src},!0)}),[n]),l=t?o({needsProxy:a},t):null;return c.createElement(f1,null,c.createElement(XC,{handleChange:i,icon:l,isLoading:r,disabled:r}),c.createElement(h1,null),c.createElement(Ke.Text,{as:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Link icon","web-stories")))}function LinkUrl(e){let{value:t,onChange:n,setIsInvalidUrl:r,setIsFetching:a,onFocus:o,hint:i,hasError:l}=e;const{actions:{getLinkMetadata:s}}=W(),[p,m]=(0,u.useState)(t),g=(0,u.useDebouncedCallback)(n,300),{checkResourceAccess:f}=ii(),h=(0,u.useDebouncedCallback)((0,u.useCallback)((async e=>{if(e.startsWith("http://")||e.startsWith("https://")){a(!0);try{const{image:t}=s?await s(e):{},r=t?oa(e,t):"",o=!!r&&await f(r);n({url:e,icon:r,needsProxy:o})}catch(t){n({url:e,icon:"",needsProxy:!1}),r(!0)}finally{a(!1)}}}),[f,s,n,a,r]),1200),b=(0,u.useCallback)((e=>{h.cancel(),m(e),r(!1);const t=la(e.trim());ia(t)&&h(t)}),[h,r]),E=(0,u.useCallback)((()=>{g.cancel(),n({url:p?.trim().length?la(p.trim()):""})}),[p,g,n]);return c.createElement(nI,{onChange:e=>b(e?.trim()),onBlur:E,onFocus:o,value:p,clear:!0,"aria-label":(0,d.__)("Type an address to add a page attachment link","web-stories"),hasError:l,hint:i})}const E1=function(e){let{pageAttachment:t,updatePageAttachment:n}=e;const{setDisplayLinkGuidelines:r}=Xs((e=>({setDisplayLinkGuidelines:e.actions.setDisplayLinkGuidelines}))),{url:a,ctaText:o,icon:i,theme:l,rel:s=[],needsProxy:p}=t,[m,g]=(0,u.useState)(!1),[f,h]=(0,u.useState)(!1),[b,E]=(0,u.useState)(a&&!ia(la(a).trim())),y=Boolean(a)&&!b,{hasLinksInAttachmentArea:_}=TF();(0,u.useEffect)((()=>()=>{r(!1)}),[_,r,a]);const v=(0,u.useCallback)((()=>{_&&!a?.length&&(g(!0),r(!0))}),[_,r,a?.length]);(0,u.useEffect)((()=>{m&&a?.length&&g(!1)}),[a,m]);const w=(0,u.useCallback)((e=>n({rel:e},!0)),[n]);let T;const S=m||b;return S&&(T=m?(0,d.__)("Links cannot reside below the dashed line when a page attachment is present. If you add a page attachment, your viewers will not be able to click on the link.","web-stories"):(0,d.__)("Invalid link","web-stories")),c.createElement(c.Fragment,null,c.createElement(LinkUrl,{value:a,onChange:n,isFetching:f,setIsFetching:h,setIsInvalidUrl:E,hint:T,onFocus:v,hasError:S}),y&&c.createElement(c.Fragment,null,c.createElement(CallToActionText,{value:o,defaultValue:(0,d.__)("Learn more","web-stories"),onChange:n}),c.createElement(Theme,{theme:l,onChange:n})),y&&c.createElement(c.Fragment,null,c.createElement(b1,{icon:i,isFetching:f,needsProxy:p,onChange:n}),c.createElement(SM,{onChangeRel:w,rel:s})))},y1=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"shoppingAttachment__HelperText",componentId:"sc-fsu1pn-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const _1=function(e){let{shoppingAttachment:t,updateShoppingAttachment:n}=e;const{ctaText:r,theme:a}=t;return c.createElement(c.Fragment,null,c.createElement(QC,null,c.createElement(y1,null,(0,d.__)("Since there are products on this page, you cannot add a regular page attachment, but only customize the appearance of the shopping call to action.","web-stories"))),c.createElement(CallToActionText,{value:r,defaultValue:(0,d.__)("Shop Now","web-stories"),onChange:n}),c.createElement(Theme,{theme:a,onChange:n}))};const v1=function PageAttachmentPanel(){const{pageAttachment:e,shoppingAttachment:t,updateCurrentPageProperties:n,hasProducts:r}=Qa((e=>{let{state:t,actions:n}=e;return{updateCurrentPageProperties:n.updateCurrentPageProperties,currentPage:t.currentPage,pageAttachment:t.currentPage.pageAttachment||{},shoppingAttachment:t.currentPage.shoppingAttachment||{},hasProducts:t.currentPage.elements?.some((e=>{let{type:t,product:n}=e;return t===Mn.ELEMENT_TYPES.PRODUCT&&n?.productId}))}})),a=(0,u.useCallback)((e=>{n({properties:{shoppingAttachment:{...t,...e}}})}),[n,t]),o=(0,u.useCallback)((t=>{n({properties:{pageAttachment:{...e,...t}}})}),[n,e]);return c.createElement(QP,{name:"pageAttachment",title:(0,d.__)("Call to Action","web-stories"),collapsedByDefault:!1},r&&c.createElement(_1,{shoppingAttachment:t,updateShoppingAttachment:a}),!r&&c.createElement(E1,{pageAttachment:e,updatePageAttachment:o}))},w1={horizontal:!1,vertical:!1},T1=(0,p.default)(QC).withConfig({displayName:"pageBackground__Row",componentId:"sc-1rac0x7-0"})(["justify-content:flex-start;"]),S1=p.default.div.withConfig({displayName:"pageBackground__SelectedMedia",componentId:"sc-1rac0x7-1"})(["width:128px;height:36px;border-radius:4px;border:1px solid ",";display:flex;justify-content:space-between;margin-right:12px;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),C1=p.default.div.withConfig({displayName:"pageBackground__MediaWrapper",componentId:"sc-1rac0x7-2"})(["height:24px;width:24px;border-radius:4px;overflow:hidden;margin:5px;img{object-fit:cover;max-height:100%;max-width:100%;}"]),I1=(0,p.default)(m.Button).withConfig({displayName:"pageBackground__RemoveButton",componentId:"sc-1rac0x7-3"})(["margin:1px;align-self:center;"]),x1=(0,p.default)(m.Button).attrs({size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.TERTIARY}).withConfig({displayName:"pageBackground__ReplaceButton",componentId:"sc-1rac0x7-4"})(["margin-right:8px;"]),A1=(0,p.default)(Ke.Text).withConfig({displayName:"pageBackground__Text",componentId:"sc-1rac0x7-5"})(["align-self:center;width:55px;"]);const k1=function PageBackgroundPanel(e){let{selectedElements:t,pushUpdate:n}=e;const{isDefaultBackground:r}=t[0],{combineElements:a,currentPage:o,clearBackgroundElement:i,updateCurrentPageProperties:l,currentPageBackgroundColor:s}=Qa((e=>{let{state:t,actions:n}=e;return{currentPage:t.currentPage,clearBackgroundElement:n.clearBackgroundElement,combineElements:n.combineElements,updateCurrentPageProperties:n.updateCurrentPageProperties,currentPageBackgroundColor:!r||t.currentPage?.backgroundColor}})),{getProxiedUrl:p}=ii(),{capabilities:{hasUploadMediaAction:m}}=U(),f=gs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),[h,b]=(0,u.useState)(!1),E=(0,u.useCallback)((e=>{l({properties:{backgroundColor:e}})}),[l]),y=(0,u.useCallback)((()=>{n({isBackground:!1,opacity:100},!0),i()}),[n,i]),_=(0,u.useCallback)((e=>{const n=(0,Mn.createNewElement)(e.type,rs(e.type,{resource:e}));a({firstElement:n,secondId:t[0].id}),(0,P.trackEvent)("replace_background_media")}),[a,t]),v=(0,u.useCallback)((e=>c.createElement(x1,{onClick:e,"aria-label":(0,d.__)("Replace","web-stories")},c.createElement(Mm,null))),[]),{highlight:w,resetHighlight:T,cancelHighlight:S}=mm((e=>({highlight:e[_g.PAGE_BACKGROUND],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));(0,u.useEffect)((()=>{SO([o],f).then((e=>{const t=e[0]?.result,n=t?.some((e=>{let{isBackground:t}=e;return t}));b(Boolean(n))})).catch((()=>{}))}),[o,f]);const C=t[0];if(!C||!C.isBackground)return null;const I=C.isBackground&&!r,{backgroundColor:x}=o,{LayerIcon:A}=(0,Mn.getDefinitionForType)(C.type),k=t[0]?.flip||w1;return c.createElement(O1,{onAnimationEnd:()=>T(),name:"pageBackground",title:(0,d.__)("Page Background","web-stories"),isPersistable:!w,collapsedByDefault:!1,$_css:w?.showEffect&&XA.FLASH},r&&c.createElement(T1,null,c.createElement(dC,{ref:e=>{e&&w?.focus&&w?.showEffect&&(e.addEventListener("keydown",S,{once:!0}),e.focus())},allowsGradient:!0,value:x,onChange:E,label:(0,d.__)("Background color","web-stories"),allowsSavedColors:!0,allowsOpacity:!1})),I&&c.createElement(T1,{expand:!1},c.createElement(S1,null,c.createElement(C1,null,c.createElement(A,{element:C,getProxiedUrl:p,currentPageBackgroundColor:s})),c.createElement(A1,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Media","web-stories")),c.createElement(I1,{"aria-label":(0,d.__)("Detach background","web-stories"),onClick:y,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.TERTIARY},c.createElement(cp.default,null))),m&&c.createElement(Tooltip,{title:(0,d.__)("Replace","web-stories")},c.createElement(rI,{buttonInsertText:(0,d.__)("Use as background","web-stories"),onInsert:_,renderButton:v})),c.createElement(yM,{onChange:e=>n({flip:e},!0),value:k})),h&&c.createElement(VQ,{message:Iu.lowContrast.backgroundPanel}))};var O1=(0,p.default)(QP).withConfig({displayName:"pageBackground___StyledSimplePanel",componentId:"sc-1rac0x7-6"})(["",""],(e=>e.$_css));const P1=function ShapeStylePanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=IM(t,"backgroundColor"),a=(0,u.useCallback)((e=>{n({backgroundColor:e},!0)}),[n]),{highlight:o,resetHighlight:i,cancelHighlight:l}=mm((e=>({highlight:e[_g.STYLE],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));return c.createElement(N1,{onAnimationEnd:()=>i(),name:"shapeStyle",title:(0,d.__)("Color","web-stories"),isPersistable:!o,"aria-labelledby":null,"aria-label":(0,d.__)("Shape style","web-stories"),$_css:o?.showEffect&&XA.FLASH},c.createElement(QC,null,c.createElement(dC,{ref:e=>{e&&o?.focus&&o?.showEffect&&(e.addEventListener("keydown",l,{once:!0}),e.focus())},allowsGradient:!0,value:r,isMultiple:""===r,onChange:a,label:(0,d.__)("Background color","web-stories"),allowsSavedColors:!0})))};var N1=(0,p.default)(QP).withConfig({displayName:"shapeStyle___StyledSimplePanel",componentId:"sc-1ekkvr9-0"})(["",""],(e=>e.$_css));const R1={MIN:-360,MAX:360},M1={MIN:1,MAX:1e3},L1={MIN:1,MAX:1e3},D1={MIN:1,MAX:ee.PAGE_WIDTH-1},B1={MIN:1-Math.floor(ee.DANGER_ZONE_HEIGHT),MAX:ee.PAGE_HEIGHT+Math.floor(ee.DANGER_ZONE_HEIGHT)-1},F1={horizontal:!1,vertical:!1};function H1(e){return"number"==typeof e&&!isNaN(e)}const U1=function(e,t,n){PI(((t,n,r)=>{let{width:a,height:o}=n,{width:i,height:l}=r;const{type:s}=t,c=Boolean(a),d=Boolean(o);if(!c&&!d)return null;const{updateForResizeEvent:u}=(0,Mn.getDefinitionForType)(s);if(u){return u(t,[c?1:0,d?1:0],(0,ec.clamp)(a,M1),(0,ec.clamp)(o,L1))}if(e){const e=i/l;if(!c)return{width:(0,ec.clamp)((0,aa.dataPixels)(o*e),M1)};if(!d)return{height:(0,ec.clamp)((0,aa.dataPixels)(a/e),L1)}}return null}),[e]),PI((e=>{let{rotationAngle:t}=e;return{rotationAngle:t%360}}),[]),PI((e=>{let{rotationAngle:t,x:n,y:r,width:a,height:o}=e;const i=(0,fO.calcRotatedObjectPositionAndSize)(t,n,r,a,o),l=n-i.x,s=r-i.y;return{x:(0,ec.clamp)(n,{MIN:D1.MIN+l-i.width,MAX:D1.MAX+l}),y:(0,ec.clamp)(r,{MIN:B1.MIN+s-i.height,MAX:B1.MAX+s})}}),[]);const r=(0,u.useCallback)(((t,n,r)=>e&&t>=r.MAX?(0,ec.clamp)(r.MAX*n,r):(0,ec.clamp)(t,r)),[e]);PI(((e,t)=>{let{height:n}=e,{width:a,height:o}=t;const i=o/a;return n=(0,ec.clamp)(n,L1),H1(i)?{height:r((0,aa.dataPixels)(n),i,L1)}:{height:(0,ec.clamp)(n,L1)}}),[t,e]),PI(((e,t)=>{let{width:n}=e,{width:a,height:o}=t;const i=a/o;return n=(0,ec.clamp)(n,M1),H1(i)?{width:r((0,aa.dataPixels)(n),i,M1)}:{width:(0,ec.clamp)(n,M1)}}),[n,e])};function j1(){return j1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j1.apply(this,arguments)}const z1=(0,p.default)(LockToggle).withConfig({displayName:"sizePosition__StyledLockToggle",componentId:"sc-7rw4xb-0"})(["",";"],pp),G1=(0,p.css)(["max-width:none;"]);function Y1(e){return Ql.default?.[e?.sticker?.type].aspectRatio||1}const Z1=(0,p.css)(["grid-template-areas:"," 'x . . . y . .' 'w . d . h . l' 'r . . . o . .' 'c c c c c c c';"],(e=>{let{isSingleMedia:t}=e;return t?"'b b b b b . .'":null})),W1=(0,p.css)(["grid-template-areas:"," 'x . . . y . .' 'w . d . h . l' 'r . . . f . .' ",";"],(e=>{let{isSingleMedia:t}=e;return t?"'b b b b b . .'":null}),(e=>{let{unlockedRadius:t}=e;return t?"\n  'o . . . . . .'\n  'c c c c c c c'\n":"'o . . . c c c'"})),V1=p.default.div.withConfig({displayName:"sizePosition__Grid",componentId:"sc-7rw4xb-1"})(["display:grid;"," grid-template-columns:1fr 4px 8px 4px 1fr 8px 32px;grid-template-rows:repeat(4,36px);row-gap:16px;align-items:center;justify-items:start;margin-bottom:16px;"],(e=>{let{canFlip:t}=e;return t?W1:Z1})),$1=p.default.div.withConfig({displayName:"sizePosition__Area",componentId:"sc-7rw4xb-2"})(["grid-area:",";width:100%;"],(e=>{let{area:t}=e;return t})),q1=p.default.div.withConfig({displayName:"sizePosition__Dash",componentId:"sc-7rw4xb-3"})(["height:1px;width:100%;background:",";"],(e=>{let{theme:t}=e;return t.colors.divider.primary})),K1=(0,p.default)(m.Button).withConfig({displayName:"sizePosition__StyledButton",componentId:"sc-7rw4xb-4"})(["padding:10px 16px;width:100%;",";"],pp);const X1=function SizePositionPanel(e){const{selectedElements:t,submittedSelectedElements:n,pushUpdate:r,pushUpdateForObject:a}=e,o=IM(t,"x"),i=IM(t,"y"),l=IM(t,"width"),s=IM(t,"height"),p=IM(t,"rotationAngle"),m=kM(t,"flip",F1),f=kM(t,"borderRadius",{locked:!0}),h=(0,u.useMemo)((()=>IM(n,"width")/IM(n,"height")),[n]),b=IM(t,"lockAspectRatio"),E=(0,u.useRef)(null);$m({node:E.current,eventData:Se.SET_BACKGROUND_MEDIA});const y=b===we||b,{currentPage:_,combineElements:v}=Qa((e=>({currentPage:e.state.currentPage,combineElements:e.actions.combineElements}))),w=_?.elements[0].id,T=1===t.length,{isMedia:S}=(0,Mn.getDefinitionForType)(t[0].type),C=t.every((e=>{let{type:t}=e;return(0,Mn.getDefinitionForType)(t).canFlip})),I=t.some((e=>{let{type:t}=e;return(0,Mn.getDefinitionForType)(t).isAspectAlwaysLocked})),x=t.some((e=>{let{type:t}=e;return"text"===t})),A=(0,u.useMemo)((()=>T?(0,fO.calcRotatedObjectPositionAndSize)(p,o,i,l,s):{}),[p,o,i,l,s,T]),k=o-A.x,O=i-A.y,P=T?{minX:D1.MIN+k-A.width,minY:B1.MIN+O-A.height,maxX:D1.MAX+k,maxY:B1.MAX+O}:function(e){const t=e.map((e=>(0,fO.calcRotatedObjectPositionAndSize)(e.rotationAngle,e.x,e.y,e.width,e.height)));return e.reduce(((e,n,r)=>{const a=t[r],o=n.x-a.x,i=n.y-a.y,l=D1.MIN+o-a.width,s=B1.MIN+i-a.height,c=D1.MAX+o,d=B1.MAX+i;return{minX:e.minX?Math.max(e.minX,l):l,minY:e.minY?Math.max(e.minY,s):s,maxX:e.maxX?Math.min(e.maxX,c):c,maxY:e.maxY?Math.min(e.maxY,d):d}}),{})}(t),N=(e,t)=>b===we?{lockAspectRatio:y,height:t,width:e}:{height:t,width:e};U1(y,s,l);const R=(0,u.useCallback)((()=>{v({firstElement:t[0],secondId:w})}),[t,v,w]),M=!y&&x,L=we===s?Te:null,D=M?(0,d.__)("Auto","web-stories"):L,B=(0,u.useCallback)((e=>({isIndeterminate:we===e,placeholder:we===e?Te:null})),[]);return c.createElement(QP,{name:"size",title:(0,d.__)("Selection","web-stories")},c.createElement(V1,{isSingleMedia:S&&T,canFlip:C,unlockedRadius:!f.locked},S&&T&&c.createElement($1,{area:"b"},c.createElement(K1,{ref:E,onClick:R,type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.RECTANGLE},(0,d.__)("Set as background","web-stories"))),c.createElement($1,{area:"x"},c.createElement(VS,j1({suffix:(0,d._x)("X","Position on X axis","web-stories"),value:o,min:P.minX,max:P.maxX,onChange:(e,t)=>r({x:t},!0),"aria-label":(0,d.__)("X position","web-stories"),canBeNegative:!0},B(o),{containerStyleOverride:mp}))),c.createElement($1,{area:"y"},c.createElement(VS,j1({suffix:(0,d._x)("Y","Position on Y axis","web-stories"),value:i,min:P.minY,max:P.maxY,onChange:(e,t)=>r({y:t},!0),"aria-label":(0,d.__)("Y position","web-stories"),canBeNegative:!0},B(i),{containerStyleOverride:mp}))),c.createElement($1,{area:"w"},c.createElement(VS,j1({suffix:(0,d._x)("W","The Width dimension","web-stories"),value:l,min:M1.MIN,max:M1.MAX,onChange:(e,t)=>{const n=t;let a=s;y&&(""===n?a="":H1(n/h)&&(a=(0,aa.dataPixels)(n/h))),r((e=>{if("sticker"===e?.type){const t=Y1(e);return N(n,Math.floor(n/t))}return N(n,a)}),!0)},"aria-label":(0,d.__)("Width","web-stories")},B(l),{containerStyleOverride:mp}))),c.createElement($1,{area:"d"},c.createElement(q1,null)),c.createElement($1,{area:"h"},c.createElement(VS,{suffix:(0,d._x)("H","The Height dimension","web-stories"),value:M?"":s,disabled:M,min:L1.MIN,max:L1.MAX,onChange:(e,t)=>{const n=t;let a=l;y&&(""===n?a="":H1(n*h)&&(a=(0,aa.dataPixels)(n*h))),r((e=>{if("sticker"===e?.type){const t=Y1(e);return N(Math.floor(n*t),n)}return N(a,n)}),!0)},"aria-label":(0,d.__)("Height","web-stories"),isIndeterminate:we===s,placeholder:D,containerStyleOverride:mp})),c.createElement($1,{area:"l"},c.createElement(Tooltip,{title:(0,d.__)("Lock aspect ratio","web-stories")},c.createElement(z1,{"aria-label":(0,d.__)("Lock aspect ratio","web-stories"),title:(0,d.__)("Lock aspect ratio","web-stories"),isLocked:y||I,disabled:I,onClick:()=>!I&&r({lockAspectRatio:!y},!0)}))),c.createElement($1,{area:"r"},c.createElement(VS,j1({suffix:c.createElement(mf,null),unit:(0,d._x)("°","Degrees, 0 - 360.","web-stories"),value:p,min:R1.MIN,max:R1.MAX,onChange:(e,t)=>r({rotationAngle:t},!0),"aria-label":(0,d.__)("Rotation","web-stories"),canBeNegative:!0},B(p),{containerStyleOverride:mp}))),C&&c.createElement($1,{area:"f"},c.createElement(yM,{onChange:e=>a("flip",e,F1,!0),value:m})),c.createElement($1,{area:"o"},c.createElement(hD,e)),c.createElement($1,{area:"c"},c.createElement(LL,j1({stackableGroupStyleOverride:G1},e)))))};const Q1=function TextAccessibilityPanel(e){let{selectedElements:t,pushUpdate:n}=e;const[r,a]=(0,u.useState)(),{textElements:o}=Qa((e=>{let{state:t}=e;return{textElements:t.currentPage?.elements?.filter((e=>{let{type:t}=e;return"text"===t})).map((e=>{let{id:t,tagName:n,...a}=e;return{id:t,...a,tagName:r?.get(t)||n}}))}})),i=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_headings_docs")}),[]),l=(0,u.useCallback)(((e,r)=>{a(new Map(t.map((e=>{let{id:t}=e;return[t,r]})))),t.forEach((()=>{n({tagName:r},!0)}))}),[n,t]),s=ma(o),p=t.map((e=>({...e,tagName:s.get(e.id),defaultTagName:e.tagName||"auto"}))),m=[...new Set(p.map((e=>{let{tagName:t}=e;return t||"auto"})))],g=1===m.length?m[0]:we,f=IM(p,"defaultTagName","auto"),h=we===f,b="auto"===f?"auto":g,E=[{label:"auto"===b?(0,$e.default)(
/* translators: %s: heading level. */
(0,d.__)("Automatic (%s)","web-stories"),Ce[g]||Te):(0,d.__)("Automatic","web-stories"),value:"auto"},{label:Ce.h1,value:"h1"},{label:Ce.h2,value:"h2"},{label:Ce.h3,value:"h3"},{label:Ce.p,value:"p"}];return c.createElement(QP,{name:"textAccessibility",title:(0,d.__)("Accessibility","web-stories")},c.createElement(QC,null,c.createElement(gx.DropDown,{"data-testid":"text-accessibility-dropdown",title:(0,d.__)("Heading Levels","web-stories"),dropdownButtonLabel:(0,d.__)("Heading Levels","web-stories"),options:E,selectedValue:b,placeholder:h?Te:g,onMenuItemClick:l,dropDownLabel:(0,d.__)("Heading Level","web-stories")})),c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},c.createElement(fu.default,{mapping:{a:c.createElement(hu.Link,{href:(0,d.__)("https://wp.stories.google/docs/seo/","web-stories"),rel:"noreferrer",target:"_blank",onClick:i,size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL})}},(0,d.__)("<a>Learn more</a> about using headings in stories.","web-stories"))))};function J1(){return J1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J1.apply(this,arguments)}const e2={MIN:.5,MAX:10},t2={MIN:0,MAX:300},n2=(0,p.default)(VS).withConfig({displayName:"style__StyledNumericInput",componentId:"sc-9ups92-0"})(["flex-grow:1;"]),r2=p.default.div.withConfig({displayName:"style__Space",componentId:"sc-9ups92-1"})(["flex:0 0 3px;"]),a2=(0,p.default)(CT).withConfig({displayName:"style__StyledToggle",componentId:"sc-9ups92-2"})(["",";"],pp);function o2(e){return c.createElement(a2,J1({size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE},e))}const i2=function StylePanel(e){let{selectedElements:t,pushUpdate:n}=e;const{actions:{maybeEnqueueFontStyle:r}}=Wo(),a=IM(t,"textAlign"),o=IM(t,"lineHeight"),{textInfo:{isBold:i,isItalic:l,isUnderline:s,isUppercase:p,letterSpacing:m,fontWeight:g},handlers:{handleClickBold:f,handleClickItalic:h,handleClickUnderline:b,handleClickUppercase:E,handleSetLetterSpacing:y}}=fL(t,n),_=(0,u.useCallback)(((e,t)=>y((0,ec.clamp)(t,t2))),[y]);PI((e=>{let{lineHeight:t}=e;return{lineHeight:(0,ec.clamp)(t,e2)}}),[]);const v=(0,u.useCallback)((e=>()=>{n({textAlign:a===e?"":e},!0)}),[n,a]),w=!0===i,T=!0===l,S=!0===s,C=!0===p;return c.createElement(c.Fragment,null,c.createElement(QC,null,c.createElement(n2,{"aria-label":(0,d.__)("Line-height","web-stories"),isFloat:!0,value:o,min:e2.MIN,max:e2.MAX,suffix:c.createElement(Ub,null),onChange:(e,t)=>n({lineHeight:t},!0),allowEmpty:!0,isIndeterminate:we===o,placeholder:we===o?Te:null,containerStyleOverride:mp}),c.createElement(r2,null),c.createElement(n2,{"aria-label":(0,d.__)("Letter-spacing","web-stories"),value:m,min:t2.MIN,max:t2.MAX,suffix:c.createElement(Gb,null),unit:"%",onChange:_,allowEmpty:!0,isIndeterminate:we===m,placeholder:we===m?Te:null,containerStyleOverride:mp})),c.createElement(QC,null,c.createElement(o2,{isToggled:"left"===a,onClick:v("left"),"aria-label":(0,d.__)("Align text left","web-stories")},c.createElement(nf,null)),c.createElement(o2,{isToggled:"center"===a,onClick:v("center"),"aria-label":(0,d.__)("Align text center","web-stories")},c.createElement(Kg,null)),c.createElement(o2,{isToggled:"right"===a,onClick:v("right"),"aria-label":(0,d.__)("Align text right","web-stories")},c.createElement(of,null)),c.createElement(o2,{isToggled:"justify"===a,onClick:v("justify"),"aria-label":(0,d.__)("Align text justified","web-stories")},c.createElement(Jg,null)),c.createElement(o2,{isToggled:w,onClick:()=>f(!w),"aria-label":(0,d.__)("Bold","web-stories")},c.createElement(Wb,null)),c.createElement(o2,{isToggled:T,onClick:async()=>{await r(t.map((e=>{let{font:t,content:n}=e;return{font:t,fontStyle:T?"normal":"italic",fontWeight:g,content:(0,zr.stripHTML)(n)}}))),h(!T)},"aria-label":(0,d.__)("Italic","web-stories")},c.createElement(qb,null)),c.createElement(o2,{isToggled:S,onClick:()=>b(!S),"aria-label":(0,d.__)("Underline","web-stories")},c.createElement(vE,null)),c.createElement(o2,{isToggled:C,onClick:()=>E(!C),"aria-label":(0,d.__)("Uppercase","web-stories")},c.createElement(fE,null))))};const l2=function ColorControls(e){let{selectedElements:t,pushUpdate:n,textColorRef:r}=e;const{textInfo:{color:a},handlers:{handleSetColor:o}}=fL(t,n);return c.createElement(QC,null,c.createElement(dC,{"data-testid":"text.color",value:a,onChange:o,allowsSavedColors:!0,label:(0,d.__)("Text color","web-stories"),labelId:"text-color-label",changedStyle:"color",ref:r,hasEyedropper:!0}))};var s2=n(56226);function c2(){return c2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c2.apply(this,arguments)}const d2=p.default.div.attrs({role:"listbox"}).withConfig({displayName:"pillGroup__Container",componentId:"sc-1wd98s2-0"})(["display:flex;flex:1;column-gap:4px;"]);const u2=function PillGroup(e){let{options:t,value:n,onSelect:r,...a}=e;return c.createElement(d2,null,t.map((e=>{let{id:t,label:o}=e;return c.createElement(s2.default,c2({key:t,isActive:t===n,onClick:()=>r(t),role:"option"},a),o)})))},p2=(0,p.default)(QC).withConfig({displayName:"backgroundColor__FillRow",componentId:"sc-2oqmdd-0"})(["align-items:flex-start;justify-content:space-between;button{flex:1;z-index:1;}"]),m2=[{id:Mn.BACKGROUND_TEXT_MODE.NONE,label:(0,d.__)("None","web-stories")},{id:Mn.BACKGROUND_TEXT_MODE.FILL,label:(0,d.__)("Fill","web-stories")},{id:Mn.BACKGROUND_TEXT_MODE.HIGHLIGHT,label:(0,d.__)("Highlight","web-stories")}];const g2=function BackgroundControls(e){let{selectedElements:t,pushUpdate:n}=e;const r=AM(t,"backgroundColor"),a=IM(t,"backgroundTextMode"),o=(0,u.useRef)(),i=(0,u.useCallback)((e=>{n((t=>({backgroundTextMode:e,padding:[Mn.BACKGROUND_TEXT_MODE.FILL,Mn.BACKGROUND_TEXT_MODE.HIGHLIGHT].includes(e)?vv(t):wv(t)})),!0)}),[n]),l=(0,u.useCallback)((e=>{i(e)}),[i]);return c.createElement(c.Fragment,null,c.createElement(p2,{ref:o},c.createElement(u2,{value:a,onSelect:l,options:m2,pillStyleOverride:pp})),a!==Mn.BACKGROUND_TEXT_MODE.NONE&&c.createElement(QC,null,c.createElement(dC,{"data-testid":"text.backgroundColor",allowsGradient:!0,allowsSavedColors:!0,value:r,onChange:e=>n({backgroundColor:e},!0),label:(0,d.__)("Background color","web-stories"),labelId:"background-color-label",changedStyle:"background",hasEyedropper:!0})))};function f2(){return f2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f2.apply(this,arguments)}const h2={horizontal:0,vertical:0,locked:!0,hasHiddenPadding:!1},b2={MIN:0,MAX:300},E2=p.default.div.withConfig({displayName:"padding__Space",componentId:"sc-17x5rfj-0"})(["flex:0 0 8px;"]),y2=(0,p.default)(LockToggle).withConfig({displayName:"padding__LockToggle",componentId:"sc-17x5rfj-1"})([""," ",";"],(e=>{let{isLocked:t}=e;return!t&&"\n    position: absolute;\n    right: 0;\n    top: calc(100% - 8px);\n  "}),pp),_2=(0,p.default)(QC).withConfig({displayName:"padding__Row",componentId:"sc-17x5rfj-2"})(["position:relative;"]),v2=p.default.div.withConfig({displayName:"padding__IconWrapper",componentId:"sc-17x5rfj-3"})(["width:44px;margin-left:6px;color:",";"," svg{width:22px;}"],(e=>{let{theme:t}=e;return t.colors.divider.primary}),(e=>{let{reverse:t}=e;return t&&"transform: scaleY(-1);"}));const w2=function PaddingControls(e){let{selectedElements:t,pushUpdateForObject:n,pushUpdate:r}=e;const a=kM(t.map((e=>({...e,padding:wv(e)}))),"padding",h2),o=!0===a.locked,i=(0,u.useCallback)((e=>{r((t=>{const{x:n,y:r,width:a,height:o}=t,i=e(t);return function(e){let{currentPadding:t,newPadding:n,x:r,y:a,width:o,height:i}=e;const l={};return"horizontal"in n&&(l.x=r-(n.horizontal-(t.horizontal||0)),l.width=o+2*(n.horizontal-(t.horizontal||0))),"vertical"in n&&(l.y=a-(n.vertical-(t.vertical||0)),l.height=i+2*(n.vertical-(t.vertical||0))),l}({x:n,y:r,height:o,width:a,currentPadding:t.padding,newPadding:i})})),n("padding",(t=>e({padding:t})),h2,!0)}),[r,n]);PI((e=>{let{padding:{horizontal:t,vertical:n,...r}}=e;return{padding:{...r,horizontal:(0,ec.clamp)(t,b2),vertical:(0,ec.clamp)(n,b2)}}}),[]);const l=o?{suffix:(0,d.__)("Padding","web-stories"),"aria-label":(0,d.__)("Padding","web-stories"),onChange:(e,t)=>{i((e=>({horizontal:t+Tv(e,"horizontal"),vertical:t+Tv(e,"vertical")})))},stretch:!0}:{suffix:(0,d.__)("Horizontal padding","web-stories"),"aria-label":(0,d.__)("Horizontal padding","web-stories"),onChange:(e,t)=>{i((e=>({horizontal:t+Tv(e,"horizontal")})))}};return c.createElement(c.Fragment,null,c.createElement(_2,null,c.createElement(VS,f2({value:a.horizontal,isIndeterminate:a.horizontal===we,placeholder:a.horizontal===we?Te:null},l,{containerStyleOverride:mp})),o&&c.createElement(E2,null),c.createElement(y2,{isLocked:o,onClick:()=>i((e=>o?{locked:!1}:{locked:!0,horizontal:e.padding.horizontal,vertical:e.padding.horizontal+Tv(e,"vertical")-Tv(e,"horizontal")})),"aria-label":(0,d.__)("Toggle padding ratio lock","web-stories")}),!o&&c.createElement(v2,{reverse:!0},c.createElement(cv,null))),!o&&c.createElement(_2,null,c.createElement(VS,{isIndeterminate:a.vertical===we,placeholder:a.vertical===we?Te:null,suffix:(0,d.__)("Vertical padding","web-stories"),value:a.vertical,onChange:(e,t)=>{i((e=>({vertical:Number(t)+Tv(e,"vertical")})))},"aria-label":(0,d.__)("Vertical padding","web-stories"),containerStyleOverride:mp}),c.createElement(v2,null,c.createElement(cv,null))))},T2=(0,p.default)(m.Button).attrs({variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL}).withConfig({displayName:"panelHeader__AutoStyleButton",componentId:"sc-1sprex4-0"})(["",";"],(e=>{let{theme:t}=e;return up.focusableOutlineCSS(t.colors.border.focus,"#1d1f20")}));const S2=function PanelHeader(e){let{selectedElements:t,pushUpdate:n}=e;const{state:{isCollapsed:r}}=(0,u.useContext)(yP),a=Sv(t[0],(e=>{n(e,!0),(0,P.trackEvent)("auto_style_text")})),o=(0,d.__)("Text","web-stories");return c.createElement(WP,{ariaLabel:o,secondaryAction:r?null:c.createElement(Tooltip,{title:(0,d.__)("Adaptive text colors","web-stories")},c.createElement(T2,{"aria-label":(0,d.__)("Adaptive text colors","web-stories"),onClick:a,disabled:t?.length>1},c.createElement(Nh,null)))},o)},C2=p.default.div.withConfig({displayName:"stylePresets__PresetsHeader",componentId:"sc-8grd53-0"})(["display:flex;padding:8px 0;justify-content:space-between;"]),I2=p.default.div.withConfig({displayName:"stylePresets__StylesWrapper",componentId:"sc-8grd53-1"})([""]),x2=(0,p.default)(Ke.Text).withConfig({displayName:"stylePresets__SubHeading",componentId:"sc-8grd53-2"})(["color:",";margin:6px 0;font-weight:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.typography.weight.bold})),A2=(0,p.default)(m.Button).withConfig({displayName:"stylePresets__StyledButton",componentId:"sc-8grd53-3"})(["margin-left:auto;"]),k2=(0,p.default)(Ke.Text).withConfig({displayName:"stylePresets__NoStylesText",componentId:"sc-8grd53-4"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),O2={x:12};const P2=function(e){let{pushUpdate:t}=e;const n=Qa((e=>{let{state:t}=e;return t.story.globalStoryStyles.textStyles})),{refs:{sidebar:r}}=ng(),a=(0,u.useRef)(null),[o,i]=(0,u.useState)(!1),l=n.length>0,s=yZ({pushUpdate:t}),{addGlobalPreset:p}=tS({presetType:Ue}),m=e=>{s(e)};return c.createElement(c.Fragment,null,c.createElement(C2,null,c.createElement(x2,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Recently Saved Styles","web-stories")),c.createElement(A2,{type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.SQUARE,onClick:p,"aria-label":(0,d.__)("Add style","web-stories")},c.createElement(l_,null))),l&&c.createElement(c.Fragment,null,c.createElement(I2,null,c.createElement(qq,{styles:[...n].reverse().slice(0,2),handleClick:m})),c.createElement(uK,{ref:a,onClick:()=>i(!0),"aria-haspopup":"dialog","aria-expanded":o},(0,d.__)("More styles","web-stories"),c.createElement(zp.Disclosure,{isOpen:o})),c.createElement(uw.Popup,{anchor:a,dock:r,isOpen:o,placement:Vd.PLACEMENT.RIGHT_START,spacing:O2,renderContents:()=>c.createElement(cK,{styles:n,applyStyle:m,onClose:()=>i(!1)})})),!l&&c.createElement(dK,null,c.createElement(k2,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("No Styles Saved","web-stories"))))};function N2(){return N2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N2.apply(this,arguments)}const R2=p.default.section.withConfig({displayName:"textStyle__SubSection",componentId:"sc-1al6pl8-0"})(["border-top:1px solid ",";display:flex;flex-direction:column;"],(e=>{let{theme:t}=e;return t.colors.border.defaultNormal})),M2=(0,p.default)(Ke.Text).withConfig({displayName:"textStyle__SubHeading",componentId:"sc-1al6pl8-1"})(["color:",";margin:14px 0;font-weight:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.typography.weight.bold}));const L2=function(e){const{dropdownHighlight:t,colorHighlight:n,resetHighlight:r,cancelHighlight:a}=mm((e=>({dropdownHighlight:e[_g.FONT],colorHighlight:e[_g.TEXT_COLOR],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),[o,i]=(0,u.useState)(!1),[l,s]=(0,u.useState)([]),{selectedElements:p}=e;PI(qL,[]);const{currentPage:m}=Qa((e=>{let{state:{currentPage:t}}=e;return{currentPage:t}})),g=gs((e=>{let{state:{pageWidth:t,pageHeight:n}}=e;return{width:t,height:n}})),f=p.map((e=>e.id)),h=l?.some((e=>{let{id:t}=e;return f.includes(t)}));return(0,u.useEffect)((()=>{SO([m],g).then((e=>{const t=e[0]?.result;s(t)})).catch((()=>{}))}),[m,g]),c.createElement(D2,{name:"textStyle",onAnimationEnd:()=>r(),isPersistable:!1,$_css:(t?.showEffect||n?.showEffect)&&XA.FLASH},c.createElement(S2,e),c.createElement(KP,null,c.createElement(dD,N2({},e,{fontDropdownRef:e=>{e&&t?.focus&&t?.showEffect&&(e.focus(),i(!0))},highlightStylesOverride:o?XA.OUTLINE:[]})),c.createElement(i2,e),c.createElement(l2,N2({},e,{textColorRef:e=>{e&&n?.focus&&n?.showEffect&&(e.addEventListener("keydown",a,{once:!0}),e.focus(),i(!1))}})),h&&c.createElement(VQ,{message:Iu.lowContrast.textPanel}),c.createElement(R2,null,c.createElement(M2,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Text Box","web-stories")),c.createElement(g2,e),c.createElement(w2,e)),c.createElement(R2,null,c.createElement(P2,e))))};var D2=(0,p.default)(TP).withConfig({displayName:"textStyle___StyledPanel",componentId:"sc-1al6pl8-2"})(["",""],(e=>e.$_css));const B2={alt:null,poster:null,height:0,width:0},F2={MAX:1e3},H2=(0,p.default)($C).withConfig({displayName:"videoAccessibility__StyledMedia",componentId:"sc-1uodz5m-0"})(["height:114px;width:64px;"]),U2=p.default.div.withConfig({displayName:"videoAccessibility__InputsWrapper",componentId:"sc-1uodz5m-1"})(["align-self:flex-start;margin-left:16px;"]),j2=(0,p.default)(Ke.Text).withConfig({displayName:"videoAccessibility__StyledText",componentId:"sc-1uodz5m-2"})(["color:",";margin-bottom:10px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const z2=function VideoAccessibilityPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=kM(t,"resource",B2),a=IM(t,"alt",r.alt),{height:o,width:i}=r,l=IM(t,"poster"),s=IM(t,"poster",r.poster),{allowedMimeTypes:{image:p},capabilities:{hasUploadMediaAction:m}}=U(),g=[m&&"upload",m&&"edit","hotlink",s!==r.poster&&"reset"].filter(Boolean),f=(0,u.useMemo)((()=>p.map((e=>Rt(e))).flat()),[p]),h=(0,u.useCallback)((e=>{e?.src!==l&&n({poster:e?.src},!0)}),[n,l]),b=(0,u.useMemo)((()=>{let e=(0,d.__)("No file types are currently supported.","web-stories");return f.length&&(e=(0,$e.default)(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as a poster.","web-stories"),(0,kt.default)(f))),e}),[f]),{highlightInput:E,highlightMediaPicker:y,resetHighlight:_,cancelHighlight:v}=mm((e=>({highlightInput:e[_g.ASSISTIVE_TEXT],highlightMediaPicker:e[_g.VIDEO_A11Y_POSTER],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect})));let w=null;return o&&o!==we&&i&&i!==we&&(w={height:o,width:i}),c.createElement(G2,{onAnimationEnd:()=>_(),name:"videoAccessibility",title:(0,d.__)("Accessibility","web-stories"),isPersistable:!E&&!y,$_css:(E||y)&&XA.FLASH},c.createElement(QC,null,c.createElement(H2,{ref:e=>{e&&y?.focus&&y?.showEffect&&e.focus()},value:s,cropParams:w,onChange:h,onChangeErrorText:b,title:(0,d.__)("Select as video poster","web-stories"),hotlinkTitle:(0,d.__)("Use external image as video poster","web-stories"),hotlinkInsertText:(0,d.__)("Use image as video poster","web-stories"),hotlinkInsertingText:(0,d.__)("Using image as video poster","web-stories"),buttonInsertText:(0,d.__)("Set as video poster","web-stories"),alt:(0,d.__)("Preview poster image","web-stories"),type:p,ariaLabel:(0,d.__)("Video poster","web-stories"),menuOptions:g,imgProps:w,canUpload:0!==g.length}),c.createElement(U2,null,c.createElement(j2,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Add a brief description of the video.","web-stories")),c.createElement(AI,{ref:e=>{e&&E?.focus&&E?.showEffect&&(e.addEventListener("keydown",v,{once:!0}),e.focus())},placeholder:a===we?Te:"",value:a||"",onChange:e=>n({alt:e?.target?.value?.trim()||null},!0),"aria-label":(0,d.__)("Assistive text","web-stories"),maxLength:F2.MAX,rows:2,isIndeterminate:a===we}))))};var G2=(0,p.default)(QP).withConfig({displayName:"videoAccessibility___StyledSimplePanel",componentId:"sc-1uodz5m-3"})(["",""],(e=>e.$_css));const Y2=(0,p.default)(QC).withConfig({displayName:"videoOptions__Row",componentId:"sc-csxmtu-0"})(["margin-top:2px;"]),Z2=(0,p.default)(m.Button).withConfig({displayName:"videoOptions__StyledButton",componentId:"sc-csxmtu-1"})(["padding:12px 8px;"]),W2=(0,p.default)(Z2).withConfig({displayName:"videoOptions__TrimButton",componentId:"sc-csxmtu-2"})(["margin-left:20px;"]),V2=p.default.div.withConfig({displayName:"videoOptions__TrimWrapper",componentId:"sc-csxmtu-3"})(["position:relative;display:flex;"]),$2=p.default.div.withConfig({displayName:"videoOptions__Spinner",componentId:"sc-csxmtu-4"})(["margin-left:4px;margin-top:4px;"]),q2=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"videoOptions__HelperText",componentId:"sc-csxmtu-5"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary}));const K2=function VideoOptionsPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=IM(t,"resource"),a=IM(t,"id"),o=IM(t,"loop"),i=1===t.length,{state:{canTrim:l,canMute:s,isTrimming:p,isMuting:m,isDisabled:f},actions:{handleMute:h,handleTrim:b}}=TD({resource:r,elementId:a,isSingleElement:i}),E=m?(0,d.__)("Removing audio…","web-stories"):(0,d.__)("Remove audio","web-stories"),y=p?(0,d.__)("Trimming…","web-stories"):(0,d.__)("Trim","web-stories"),_=(0,wx.default)();(0,u.useEffect)((()=>{m&&_(E)}),[m,E,_]),(0,u.useEffect)((()=>{p&&_(y)}),[p,y,_]);const Processing=()=>c.createElement($2,null,c.createElement(Ew.default,{size:24}));return c.createElement(QP,{name:"videoOptions",title:(0,d.__)("Video Settings","web-stories")},c.createElement(Y2,{spaceBetween:!1},c.createElement(gR,{loop:o,onChange:e=>n({loop:e.target.checked},!0)}),l&&c.createElement(V2,null,c.createElement(W2,{disabled:f,variant:g.BUTTON_VARIANTS.RECTANGLE,type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,onClick:b},y),p&&c.createElement(Processing,null))),s&&c.createElement(c.Fragment,null,c.createElement(Y2,{spaceBetween:!1},c.createElement(Z2,{disabled:f,variant:g.BUTTON_VARIANTS.RECTANGLE,type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,onClick:h},E),m&&c.createElement(Processing,null)),c.createElement(Y2,null,c.createElement(q2,null,(0,d.__)("Removing the audio from this video will upload a new muted version of it to the media library. This might take a couple of seconds.","web-stories")))))},X2=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"backgroundAudio__HelperText",componentId:"sc-qyqy4a-0"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),Q2=(0,p.default)(QC).attrs({spaceBetween:!1}).withConfig({displayName:"backgroundAudio__HighlightRow",componentId:"sc-qyqy4a-1"})(["position:relative;&::after{content:'';position:absolute;top:-10px;bottom:-10px;left:-20px;right:-10px;"," pointer-events:none;}"],(e=>{let{isHighlighted:t}=e;return t&&XA.FLASH}));const J2=function PageBackgroundAudioPanel(){const{backgroundAudio:e,currentPageId:t,updateCurrentPageProperties:n}=Qa((e=>({updateCurrentPageProperties:e.actions.updateCurrentPageProperties,backgroundAudio:e.state.currentPage?.backgroundAudio,currentPageId:e.state.currentPage?.id}))),{highlightBackgroundAudio:r,resetHighlight:a}=mm((e=>({highlightBackgroundAudio:e[_g.PAGE_BACKGROUND_AUDIO],resetHighlight:e.onFocusOut}))),o=(0,u.useCallback)((e=>{n({properties:{backgroundAudio:e}})}),[n]);return c.createElement(QP,{name:"pageBackgroundAudio",title:(0,d.__)("Page Background Audio","web-stories"),collapsedByDefault:!1,isPersistable:!r},c.createElement(Q2,{isHighlighted:r?.showEffect,onAnimationEnd:()=>a()},c.createElement(X2,null,(0,d.__)("Select an audio file that plays while this page is in view.","web-stories"))),c.createElement(IR,{backgroundAudio:e,updateBackgroundAudio:o,showCaptions:!0,showLoopControl:!0,audioId:`page-${t}-background-audio`}))};const e5=function ProductPanel(e){let{selectedElements:t,pushUpdate:n}=e;const r=IM(t,"product",[])===we,a=(0,u.useCallback)((e=>n({product:e})),[n]);return c.createElement(QP,{name:"product",title:(0,d.__)("Product","web-stories"),collapsedByDefault:!1},c.createElement(QC,null,r&&c.createElement(qv,{onChange:Bt,disabled:!0,value:Te,"aria-label":(0,d.__)("Product","web-stories")}),!r&&c.createElement(YD,{product:t[0].product,setProduct:a})))},t5=Object.values(gm.default);const n5=function(e){if(0===e.length)return[];if(1===e.length&&e[0].isBackground){const t=[];return!e[0].isDefaultBackground&&(t.push({type:gm.default.PAGE_BACKGROUND,Panel:k1}),t.push({type:gm.default.FILTER,Panel:n1}),t.push({type:gm.default.ANIMATION,Panel:N0})),"video"===e[0].type?(t.push({type:gm.default.VIDEO_OPTIONS,Panel:K2}),t.push({type:gm.default.CAPTIONS,Panel:V0}),t.push({type:gm.default.VIDEO_ACCESSIBILITY,Panel:z2})):["gif","image"].includes(e[0].type)?t.push({type:gm.default.IMAGE_ACCESSIBILITY,Panel:i1}):t.unshift({type:gm.default.PAGE_BACKGROUND,Panel:k1}),t.push({type:gm.default.PAGE_ATTACHMENT,Panel:v1}),t.push({type:gm.default.PAGE_BACKGROUND_AUDIO,Panel:J2}),t}return e.map((e=>{let{type:t}=e;return Mn.elementTypes[t].panels})).reduce(((e,t)=>{return n=t,e.filter((e=>n.includes(e)));var n}),t5).map((e=>{switch(e){case gm.default.ANIMATION:return{type:e,Panel:N0};case gm.default.PAGE_BACKGROUND:return null;case gm.default.FILTER:return{type:e,Panel:n1};case gm.default.SIZE_POSITION:return{type:e,Panel:X1};case gm.default.LINK:return{type:e,Panel:u1};case gm.default.TEXT_STYLE:return{type:e,Panel:L2};case gm.default.TEXT_ACCESSIBILITY:return{type:e,Panel:Q1};case gm.default.SHAPE_STYLE:return{type:e,Panel:P1};case gm.default.BORDER:return{type:e,Panel:z0};case gm.default.VIDEO_OPTIONS:return{type:e,Panel:K2};case gm.default.CAPTIONS:return{type:e,Panel:V0};case gm.default.VIDEO_ACCESSIBILITY:return{type:e,Panel:z2};case gm.default.IMAGE_ACCESSIBILITY:return{type:e,Panel:i1};case gm.default.ELEMENT_ALIGNMENT:return{type:e,Panel:J0};case gm.default.PRODUCT:return{type:e,Panel:e5};default:throw new Error(`Unknown panel: ${e}`)}})).filter((e=>e))};const r5=function(){const{selectedElementIds:e,selectedElements:t,selectedElementAnimations:n,deleteSelectedElements:r,updateElementsById:a,updateAnimationState:o}=Qa((e=>{let{state:{selectedElementIds:t,selectedElements:n,selectedElementAnimations:r},actions:{deleteSelectedElements:a,updateElementsById:o,updateAnimationState:i}}=e;return{selectedElementIds:t,selectedElements:n,selectedElementAnimations:r,deleteSelectedElements:a,updateElementsById:o,updateAnimationState:i}})),i=(0,u.useMemo)((()=>n5(t)),[t]),[l,s]=HQ(),c=(0,u.useCallback)((t=>{a({elementIds:e,properties:e=>_v(e,t,!0)})}),[e,a]),d=(0,u.useCallback)((e=>t=>(l.forEach((n=>n(c,e,t))),t)),[c,l]);return(0,u.useEffect)((()=>{const e={},t=s(((t,n,r)=>{c===t&&(e[n]=r)}));return()=>{t(),Object.values(e).forEach((e=>e()))}}),[c,s]),(0,u.useMemo)((()=>({panels:i,createSubmitHandlerForPanel:d,panelProperties:{onSetProperties:c,deleteSelectedElements:r,selectedElements:t,selectedElementAnimations:n,updateAnimationState:o}})),[i,d,c,r,t,n,o])};function a5(){return a5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a5.apply(this,arguments)}const o5=(0,p.default)(NW).withConfig({displayName:"stylePanes__StyledPane",componentId:"sc-18fi38s-0"})(["height:100%;padding:0;overflow-y:auto;"]);const i5=function StylePanes(){const{tab:e,tabs:t}=FQ((e=>({tab:e.state.tab,tabs:e.data.tabs}))),{panels:n,createSubmitHandlerForPanel:r,panelProperties:a}=r5(),o=(0,u.useCallback)(((e,t)=>{const o=n.filter((t=>{let{type:n}=t;return e.includes(n)})).map((e=>{let{Panel:t,type:n}=e;return c.createElement(GQ,a5({key:n,panelType:t,registerSubmitHandler:r(n)},a))}));return c.createElement(o5,a5({id:RW(t.key)},t),o)}),[n,r,a]);return t.map((t=>{let{id:n}=t;const r=n===e,a={key:n,isActive:r,"aria-labelledby":MW(n)};if(!r)return c.createElement(NW,a5({key:n},a));switch(n){case CQ.id:case IQ.id:case xQ.id:return o(vm[n],a);default:return null}}))},l5=p.default.section.attrs({"aria-label":(0,d.__)("Style","web-stories"),"data-testid":"styleLayout"}).withConfig({displayName:"styleLayout__Layout",componentId:"sc-1ihuio6-0"})(["height:100%;display:flex;flex-direction:column;background-color:",";color:",";max-height:100%;"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return t.colors.fg.primary})),s5=p.default.nav.attrs({"aria-label":(0,d.__)("Style tabs","web-stories")}).withConfig({displayName:"styleLayout__TabsArea",componentId:"sc-1ihuio6-1"})([""]),c5=(0,p.default)(eg).withConfig({displayName:"styleLayout__UnjustifiedTabView",componentId:"sc-1ihuio6-2"})(["justify-content:center;"]),d5=p.default.div.withConfig({displayName:"styleLayout__StylePaneContainer",componentId:"sc-1ihuio6-3"})(["height:100%;overflow-y:auto;min-height:0;"]),u5=p.default.div.withConfig({displayName:"styleLayout__NoSelection",componentId:"sc-1ihuio6-4"})(["height:100%;display:flex;justify-content:center;align-items:center;"]),p5=(0,p.default)(Ke.Text).withConfig({displayName:"styleLayout__Note",componentId:"sc-1ihuio6-5"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}));const m5=function StyleLayout(){const{state:{tab:e},actions:{setTab:t},refs:{tabRefs:n},data:{tabs:r}}=FQ(),{selectedElementIds:a}=Qa((e=>{let{state:t}=e;return{selectedElementIds:t.selectedElementIds}})),{highlight:o,resetHighlight:i}=mm((e=>({highlight:{[CQ.id]:e[_g.STYLE],[IQ.id]:e[_g.STYLE],[xQ.id]:e[_g.STYLE]},resetHighlight:e.onFocusOut}))),l=(0,u.useCallback)((e=>{t(e),i(),(0,P.trackEvent)("style_tab_change",{name:e})}),[t,i]);return 0===a.length?c.createElement(u5,null,c.createElement(p5,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM},(0,d.__)("Nothing selected","web-stories"))):c.createElement(l5,null,c.createElement(s5,null,c.createElement(c5,{label:(0,d.__)("Style Selection","web-stories"),tabs:r,tabRefs:n,tab:e,onTabChange:l,onTabRefUpdated:(e,t)=>{const n=o[t];e&&n?.focus&&n?.showEffect&&e.focus()},getTabId:MW,getAriaControlsId:RW})),c.createElement(d5,null,c.createElement(i5,null)))};const g5=function Style(){return c.createElement(BQ,null,c.createElement(m5,null))},f5=[{id:wm,title:(0,d.__)("Insert","web-stories"),Pane:wQ},{id:Tm,title:(0,d.__)("Style","web-stories"),Pane:g5}],h5=new Set([wm,Sm,Tm]);const b5=function SidebarProvider(e){let{sidebarTabs:t,children:n}=e;const{actions:{getAuthors:r}}=W(),{selectedElementIds:a,currentPage:o}=Qa((e=>{let{state:t}=e;return{selectedElementIds:t.selectedElementIds,currentPage:t.currentPage}})),{tab:i,highlight:l}=mm((e=>({tab:e.tab,highlight:e[_g.STYLE_PANE]})));(0,u.useEffect)((()=>{h5.has(i)&&(p(i),(0,P.trackEvent)("quick_action_tab_change",{name:i}))}),[i]);const s=(0,u.useRef)(null),[d,p]=(0,u.useState)(wm),[m,g]=(0,u.useState)([]),[f,h]=(0,u.useState)(null),b=(0,u.useRef)(),E=(0,u.useRef)(d),y=(0,u.useRef)(null),_=(0,u.useRef)(null),v=(0,u.useRef)(null),w=(0,u.useMemo)((()=>({[wm]:y,[Tm]:_,[Sm]:v})),[]),[T,S]=(0,u.useState)(!1),C=(0,u.useCallback)((e=>{b.current=e}),[]);(0,u.useResizeEffect)(b,(e=>{let{height:t}=e;return h(t)}),[]),(0,u.useEffect)((()=>{a.length>0&&E.current===Sm&&p(Tm)}),[a]),(0,u.useEffect)((()=>{E.current===Sm&&p(Tm)}),[o]),(0,u.useEffect)((()=>{const e=_.current;e&&l?.focus&&l?.showEffect&&e.focus()}),[l]);const I=(0,u.useCallback)((()=>{T||0!==m.length||(S(!0),r().then((e=>{const t=e.map((e=>{let{id:t,name:n}=e;return{id:t,name:n}}));g(t)})).finally((()=>{S(!1)})))}),[T,m.length,r]),x=(0,u.useMemo)((()=>[...f5,t?.document&&{id:Sm,...t.document}].filter(Boolean)),[t]),A=(0,u.useMemo)((()=>({tabs:x,modalSidebarTab:t?.publishModal&&{id:"publish_modal_document",...t.publishModal}})),[x,t]),k={state:{tab:d,tabRefs:w,users:m,sidebarContentHeight:f,isUsersLoading:T},refs:{sidebar:s},actions:{setTab:p,loadUsers:I,setSidebarContentNode:C},data:A};return c.createElement(tg.Provider,{value:k},n)},E5=(0,x.withOverlay)(p.default.section.attrs({"aria-label":(0,d.__)("Web Stories Editor","web-stories")}).withConfig({displayName:"layout__Editor",componentId:"sc-9gpyr-0"})([""," background-color:",";position:relative;max-height:100vh;height:100%;width:100%;display:grid;grid:'sidebar   canv          ' 1fr 'sidebar   supplementary ' auto / ","px minmax(","px,1fr);"],dp.expandTextPreset(((e,t)=>{let{paragraph:n}=e,{MEDIUM:r}=t;return n[r]})),(e=>{let{theme:t}=e;return t.colors.bg.primary}),360,570));const y5=function(e){let{header:t,footer:n={},sidebarTabs:r,children:a}=e;const o=(0,jr.useSnackbar)((e=>{let{removeSnack:t,currentSnacks:n,placement:r}=e;return{onRemove:t,notifications:n,placement:r}}));return c.createElement(c.Fragment,null,c.createElement(ws,null,c.createElement(ChecklistCheckpointProvider,null,c.createElement(vg,null,c.createElement(b5,{sidebarTabs:r},c.createElement(E5,{zIndex:3},c.createElement(Ks,null,c.createElement(xZ,null,c.createElement(fA,null,c.createElement(mZ,{header:t,footer:n}),c.createElement(dQ,null)))),a))))),c.createElement(MM.Snackbar.Container,o))};var _5=n(43246),v5=n(89511);window.wp.domReady;const w5=function PostPublishDialog(){const{embedPostLink:e,link:t,isFreshlyPublished:n}=Qa((e=>{let{state:{story:{embedPostLink:t,link:n},meta:{isFreshlyPublished:r}}}=e;return{embedPostLink:t,link:n,isFreshlyPublished:r}})),[r,a]=(0,u.useState)(!1);(0,u.useEffect)((()=>a(Boolean(n))),[n]);const o=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"add_story_to_new_post")}),[]),i=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"view_story")}),[]),l=(0,u.useCallback)((()=>a(!1)),[]),s=e?(0,d.__)("Add to new post","web-stories"):"";return c.createElement(y,{isOpen:r,onClose:l,title:(0,d.__)("Story published.","web-stories"),secondaryText:(0,d.__)("Dismiss","web-stories"),primaryText:s,onPrimary:o,primaryRest:{href:e}},c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(fu.default,{mapping:{a:c.createElement(hu.Link,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:t,target:"_blank",rel:"noopener noreferrer",onClick:i})}},(0,d.__)("Your story has been successfully published! <a>View story</a>.","web-stories"))),e&&c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},
/* translators: 'it' refers to a web story. */
(0,d.__)("Would you like to include it on a new post?","web-stories")))};const T5=function PostReviewDialog(){const{isFreshlyPending:e}=Qa((e=>{let{state:{meta:{isFreshlyPending:t}}}=e;return{isFreshlyPending:t}})),[t,n]=(0,u.useState)(!1);(0,u.useEffect)((()=>n(e)),[e]);const r=(0,u.useCallback)((()=>n(!1)),[]);return c.createElement(y,{isOpen:t,onClose:r,title:(0,d.__)("Submitted for Review.","web-stories"),primaryText:(0,d.__)("Dismiss","web-stories"),onPrimary:r},c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Your Story has been successfully submitted for review.","web-stories")))},S5=(0,u.createContext)({state:{},actions:{}});const C5=function(e){return(0,u.useContextSelector)(S5,e??u.identity)},I5=p.default.nav.withConfig({displayName:"buttons__ButtonList",componentId:"sc-1h0vadn-0"})(["display:flex;justify-content:flex-end;padding:1em;height:100%;"]),x5=p.default.div.withConfig({displayName:"buttons__List",componentId:"sc-1h0vadn-1"})(["display:flex;align-items:center;gap:8px;"]),A5=p.default.div.withConfig({displayName:"buttons__Spinner",componentId:"sc-1h0vadn-2"})(["position:absolute;top:0;"]),k5=p.default.div.withConfig({displayName:"buttons__IconWithSpinner",componentId:"sc-1h0vadn-3"})(["position:relative;"]);function Loading(){return c.createElement(A5,null,c.createElement(Ew.default,{size:32}))}function DraftButtons(e){let{forceIsSaving:t,hasUpdates:n}=e;return c.createElement(c.Fragment,null,c.createElement(PN,{hasUpdates:n,forceIsSaving:t}),c.createElement(kN,{forceIsSaving:t}))}function PendingButtons(e){let{forceIsSaving:t,hasUpdates:n,canPublish:r}=e;return c.createElement(c.Fragment,null,c.createElement(ON,{forceIsSaving:t}),r&&c.createElement(PN,{hasUpdates:n,forceIsSaving:t}),c.createElement(kN,{forceIsSaving:t}))}function PublishedButtons(e){let{forceIsSaving:t,hasUpdates:n}=e;return c.createElement(c.Fragment,null,c.createElement(ON,{forceIsSaving:t}),c.createElement(PN,{hasUpdates:n,forceIsSaving:t}))}const O5=function(){const{status:e,canPublish:t,isSaving:n}=Qa((e=>{let{state:{story:{status:t},meta:{isSaving:n},capabilities:r}}=e;return{status:t,isSaving:n,canPublish:Boolean(r?.publish)}})),r="pending"===e,a="draft"===e||!e,o=a||r,{hasMetaBoxes:i,isSavingMetaBoxes:l}=C5((e=>{let{state:{hasMetaBoxes:t,isSavingMetaBoxes:n}}=e;return{hasMetaBoxes:t,isSavingMetaBoxes:n}}));return c.createElement(I5,null,c.createElement(x5,null,c.createElement(Undo,null),c.createElement(Redo,null),c.createElement(k5,null,c.createElement(tu,{forceIsSaving:l}),n&&c.createElement(Loading,null)),a&&c.createElement(DraftButtons,{forceIsSaving:l,hasUpdates:i}),r&&c.createElement(PendingButtons,{forceIsSaving:l,hasUpdates:i,canPublish:t}),!o&&c.createElement(PublishedButtons,{forceIsSaving:l,hasUpdates:i})))},P5=p.default.header.attrs({role:"group","aria-label":(0,d.__)("Story canvas header","web-stories")}).withConfig({displayName:"header__Background",componentId:"sc-1i9ezrs-0"})(["display:flex;align-items:center;justify-content:space-between;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.bg.primary})),N5=p.default.div.withConfig({displayName:"header__Head",componentId:"sc-1i9ezrs-1"})(["flex:1 1 auto;padding:1em;"]),R5=p.default.div.withConfig({displayName:"header__ButtonCell",componentId:"sc-1i9ezrs-2"})(["grid-area:buttons;"]);const M5=(0,u.memo)((function HeaderLayout(){return c.createElement(P5,null,c.createElement(N5,null,c.createElement(RN,null)),c.createElement(R5,null,c.createElement(O5,null)))})),L5=p.default.div.withConfig({displayName:"menuItem__Box",componentId:"sc-1wx1c0e-0"})(["width:32px;height:32px;display:flex;justify-content:center;align-items:center;"]),D5=p.default.div.withConfig({displayName:"menuItem__Item",componentId:"sc-1wx1c0e-1"})([""]);const B5=function(){const{metaBoxesVisible:e,toggleMetaBoxesVisible:t,hasMetaBoxes:n}=C5((e=>{let{state:t,actions:n}=e;return{hasMetaBoxes:t.hasMetaBoxes,metaBoxesVisible:t.metaBoxesVisible,toggleMetaBoxesVisible:n.toggleMetaBoxesVisible}})),r=(0,u.useCallback)((()=>{t(),(0,P.trackEvent)("meta_boxes_toggled",{status:e?"visible":"hidden"})}),[e,t]);return n?c.createElement(D5,null,c.createElement(L5,null,c.createElement(Tooltip,{title:(0,d.__)("Third-Party Meta Boxes","web-stories"),placement:Vd.PLACEMENT.TOP,hasTail:!0},c.createElement(m.Button,{variant:g.BUTTON_VARIANTS.SQUARE,type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,onClick:r,"aria-label":(0,d.__)("Third-Party Meta Boxes","web-stories")},c.createElement(nE,null))))):null},F5=p.default.div.withConfig({displayName:"metaBoxesArea__Wrapper",componentId:"sc-nk2qm0-0"})(["position:relative;&__container,.inside{box-sizing:content-box;}#poststuff{margin:0 auto;padding-top:0;min-width:auto;}#poststuff h3.hndle,#poststuff .stuffbox > h3,#poststuff h2.hndle{color:",";font-size:14px;font-weight:500;outline:none;padding:15px;width:100%;}.postbox{border:0;color:inherit;margin-bottom:0;}.postbox > .hndle,.postbox .postbox-header{background:",";color:",";border-bottom:1px solid ",";}.postbox .handlediv{height:44px;width:44px;}.postbox .handlediv .toggle-indicator{color:",";}.postbox .handle-order-higher,.postbox .handle-order-lower{color:",";&[aria-disabled='true']{color:",";}}.is-hidden{display:none;}"],(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.standard.white,.84)}),(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.standard.white,.84)}),(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.standard.white,.04)}),(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.standard.white,.84)}),(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.standard.white,.84)}),(e=>{let{theme:t}=e;return(0,qe.rgba)(t.colors.standard.white,.3)})),H5=p.default.div.withConfig({displayName:"metaBoxesArea__Spinner",componentId:"sc-nk2qm0-1"})(["position:absolute;top:10px;right:100px;z-index:1;"]);const U5=function MetaBoxesArea(e){let{location:t}=e;const n=(0,u.useRef)(),r=(0,u.useRef)(),{isSaving:a}=Qa((e=>{let{state:t}=e;return{isSaving:t.meta.isSaving}}));return(0,u.useEffect)((()=>{const e=document.querySelector(`.metabox-location-${t}`);return n.current=e,n.current&&r.current&&r.current.appendChild(n.current),()=>{document.querySelector("#metaboxes").appendChild(e)}})),c.createElement(F5,{className:`web-stories-meta-boxes-area-${t}`},a&&c.createElement(H5,null,c.createElement(Ew.default,{size:30})),c.createElement("div",{ref:r}))},j5=window.wp.apiFetch;const z5=function(e){let{story:t,isSavingStory:n,isAutoSavingStory:r}=e;const{hasMetaBoxes:a,locations:o,isSavingMetaBoxes:i,setIsSavingMetaBoxes:l}=C5((e=>{let{state:t,actions:n}=e;return{hasMetaBoxes:t.hasMetaBoxes,locations:t.locations,isSavingMetaBoxes:t.isSavingMetaBoxes,setIsSavingMetaBoxes:n.setIsSavingMetaBoxes}})),{api:{metaBoxes:s}}=U(),c=(0,u.usePrevious)(n),d=(0,u.usePrevious)(r);(0,u.useEffect)((()=>{!a||n||r||i||!c||d||async function(){window.tinyMCE?.triggerSave();const e=document.querySelector(".metabox-base-form"),n=[new window.FormData(e||void 0),...o.map((e=>new window.FormData(document.querySelector(`.metabox-location-${e}`)||void 0)))].reduce(((e,t)=>{for(const[n,r]of t)e.append(n,r);return e}),new window.FormData);l(!0),await function(e,t,n){return[!!e.comment_status&&["comment_status",e.comment_status],!!e.ping_status&&["ping_status",e.ping_status],!!e.sticky&&["sticky",e.sticky],!!e.author&&["post_author",e.author.id]].filter(Boolean).forEach((e=>{let[n,r]=e;return t.append(n,r)})),j5({url:n,method:"POST",body:t,parse:!1})}(t,n,s),l(!1)}()}),[a,t,n,c,r,d,i,l,o,s])},G5=p.default.div.withConfig({displayName:"metaBoxes__Wrapper",componentId:"sc-1gguxet-0"})([""]),Y5=p.default.div.withConfig({displayName:"metaBoxes__Area",componentId:"sc-1gguxet-1"})(["grid-area:",";position:relative;overflow:hidden;z-index:2;"],(e=>{let{area:t}=e;return t})),Z5=(0,p.default)(Y5).attrs({area:"supplementary"}).withConfig({displayName:"metaBoxes__MetaBoxesContainer",componentId:"sc-1gguxet-2"})(["overflow-y:auto;"]);const W5=function MetaBoxes(){const{metaBoxesVisible:e,hasMetaBoxes:t}=C5((e=>{let{state:t}=e;return{hasMetaBoxes:t.hasMetaBoxes,metaBoxesVisible:t.metaBoxesVisible}})),[n,r]=(0,u.useState)(!1),a=(0,u.useRef)(null),{postType:o,metaBoxes:i={}}=U(),{pages:l,isSavingStory:s,isAutoSavingStory:d,story:p}=Qa((e=>{let{state:{meta:{isSavingStory:t,isAutoSavingStory:n},story:r,pages:a}}=e;return{pages:a,isSavingStory:t,isAutoSavingStory:n,story:r}}));if(z5({isSavingStory:s,isAutoSavingStory:d,story:p}),(0,u.useEffect)((()=>{let e;return!n&&t&&l.length>0&&(e=setTimeout((()=>{a.current=document.getElementById("primary-menu-items"),r(null!==a.current)}))),()=>{clearTimeout(e)}}),[l,t,n]),(0,u.useEffect)((()=>{const e=setTimeout((()=>{window.postboxes?.page!==o&&window.postboxes?.add_postbox_toggles(o)}));return()=>{clearTimeout(e)}}),[o]),!t)return null;const m=Object.keys(i);return c.createElement(Z5,null,e&&c.createElement(G5,null,m.map((e=>c.createElement(U5,{key:e,location:e})))),n&&(0,u.createPortal)(c.createElement(B5,null),a.current))};const V5=function MetaBoxesProvider(e){let{children:t}=e;const{metaBoxes:n={}}=U(),[r,a]=(0,u.useState)(!1),[o,i]=(0,u.useState)(!1),l=(0,u.useCallback)((()=>a((e=>!e))),[a]),s=Object.keys(n).some((e=>Boolean(n[e]?.length))),d=Object.keys(n),p=(0,u.useMemo)((()=>({state:{isSavingMetaBoxes:o,metaBoxesVisible:r,metaBoxes:n,locations:d,hasMetaBoxes:s},actions:{toggleMetaBoxesVisible:l,setIsSavingMetaBoxes:i}})),[o,r,i,l,n,d,s]);return c.createElement(S5.Provider,{value:p},t)};function $5(e){return j5({path:e})}function q5(e,t){return j5({path:e,data:{id:t},method:"POST"})}var K5=n(4504);const X5="Y-m-d\\TH:i:s",Q5=()=>n.e(2392).then(n.bind(n,73));const J5=function PublishTime(){const{date:e,modified:t,status:n,updateStory:r}=Qa((e=>{let{state:{story:{date:t,modified:n,status:r}},actions:{updateStory:a}}=e;return{date:t,modified:n,status:r,updateStory:a}})),a=uu(),o=(0,d.__)("d/m/Y","web-stories"),[i,l]=(0,u.useState)(!1),s=(0,u.useRef)(),p=(0,u.useRef)();(0,Ir.useKeyDownEffect)(p,{key:["space","enter"]},(()=>{l((e=>!e))}),[]),(0,u.useFocusOut)(s,(()=>l(!1)),[i]);const m=(0,u.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&i&&l(!1);const n=e?(0,lu.default)(new Date(e),X5):e;r({properties:{date:n}})}),[i,r]),g=["draft","pending","auto-draft"].includes(n)&&(e===t||null===e),f=Date.now(),h=g?(0,d.__)("Immediately","web-stories"):(0,lu.default)(e||f,o)+" "+du(e||f);return c.createElement(c.Fragment,null,c.createElement(QC,null,c.createElement(K5.default,{dropDownLabel:(0,d.__)("Publish","web-stories"),"aria-pressed":i,"aria-haspopup":!0,"aria-expanded":i,"aria-label":(0,d.__)("Story publish time","web-stories"),onSelectClick:e=>{e.preventDefault(),i||l(!0)},ref:p,activeItemLabel:h,selectButtonStylesOverride:pp,onPointerEnter:()=>Q5(),onFocus:()=>Q5(),isOpen:i})),c.createElement(uw.Popup,{anchor:p,isOpen:i,zIndex:10,renderContents:t=>{let{propagateDimensionChange:r}=t;return c.createElement(JI,{value:g?f:e,onChange:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m(e,t)},onViewChange:()=>r(),is12Hour:a,forwardedRef:s,onClose:()=>l(!1),canReset:["draft","pending","auto-draft"].includes(n)&&!g})}}))};function e3(){return e3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e3.apply(this,arguments)}const t3=function Author(){const{actions:{getAuthors:e}}=W(),{state:{users:t,isUsersLoading:n},actions:{loadUsers:r}}=ng(),{isSaving:a,author:o,updateStory:i}=Qa((e=>{let{state:{meta:{isSaving:t},story:{author:n={}}},actions:{updateStory:r}}=e;return{isSaving:t,author:n,updateStory:r}})),[l,s]=(0,u.useState)(null),[p,m]=(0,u.useState)(null);(0,u.useEffect)((()=>{r()}),[r]);const g=(0,u.useCallback)((t=>e(t).then((e=>{const t=e.map((e=>{let{id:t,name:n}=e;return{id:t,name:n}}));s(t)}))),[e]);(0,u.useEffect)((()=>{if(t?.length){const e=t.find((e=>{let{id:t}=e;return o.id===t}));m(e?t:[o,...t])}}),[o,t]);const f=n||!p,h={hasSearch:!0,lightMode:!0,onChange:(0,u.useCallback)((e=>{let{id:t,name:n}=e;i({properties:{author:{id:t,name:n}}})}),[i]),getOptionsByQuery:g,selectedId:o.id,dropDownLabel:(0,d.__)("Author","web-stories"),placeholder:f?(0,d.__)("Loading…","web-stories"):"",disabled:!!f||a,primaryOptions:f?[]:p,zIndex:10};return c.createElement(QC,null,c.createElement(OM.default.DropDown,e3({options:l,searchResultsLabel:(0,d.__)("Search results","web-stories"),dropdownButtonLabel:(0,d.__)("Author","web-stories"),title:(0,d.__)("Available authors","web-stories")},h)))};function n3(){return n3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n3.apply(this,arguments)}const r3=p.default.div.withConfig({displayName:"publish__LabelWrapper",componentId:"sc-c431y8-0"})(["height:40px;"]),a3=(0,p.default)(Ke.Text).attrs({as:"label",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"publish__Label",componentId:"sc-c431y8-1"})(["color:",";font-size:14px;"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),o3=p.default.div.withConfig({displayName:"publish__MediaWrapper",componentId:"sc-c431y8-2"})(["display:flex;align-items:center;margin-bottom:20px;margin-top:4px;height:96px;"]),i3=(0,p.default)($C).withConfig({displayName:"publish__StyledMedia",componentId:"sc-c431y8-3"})(["width:","px;height:","px;"],(e=>{let{$width:t}=e;return t}),(e=>{let{$height:t}=e;return t})),l3=(0,p.default)(QC).attrs({spaceBetween:!1}).withConfig({displayName:"publish__HighlightRow",componentId:"sc-c431y8-4"})(["position:relative;&::after{content:'';position:absolute;top:-10px;bottom:-10px;left:-20px;right:-10px;"," pointer-events:none;}"],(e=>{let{isHighlighted:t}=e;return t&&XA.FLASH})),s3=p.default.div.withConfig({displayName:"publish__MediaInputWrapper",componentId:"sc-c431y8-5"})(["height:160px;"]),c3=p.default.div.withConfig({displayName:"publish__DropdownWrapper",componentId:"sc-c431y8-6"})(["position:relative;width:138px;margin-left:30px;margin-top:3px;"]),d3=p.default.img.withConfig({displayName:"publish__LogoImg",componentId:"sc-c431y8-7"})(["object-fit:cover;width:100%;height:100%;max-width:96px;max-height:96px;"]);const u3=function PublishPanel(e){let{nameOverride:t}=e;const{state:{users:n}}=ng(),{api:{publisherLogos:r}}=U(),{getPublisherLogos:a,addPublisherLogo:o}=l,{allowedMimeTypes:{image:i},dashboardSettingsLink:s,capabilities:{hasUploadMediaAction:p,canManageSettings:m},MediaUpload:g}=U(),f=(0,u.useMemo)((()=>i.map((e=>Rt(e))).flat()),[i]),[h,b]=(0,u.useState)([]);(0,u.useEffect)((()=>{a(r).then(b)}),[a,r]);const{highlightPoster:E,highlightLogo:y,resetHighlight:_}=mm((e=>({highlightPoster:e[_g.POSTER],highlightLogo:e[_g.PUBLISHER_LOGO],resetHighlight:e.onFocusOut,cancelHighlight:e.cancelEffect}))),{featuredMedia:v,publisherLogo:w,updateStory:T,capabilities:S}=Qa((e=>{let{state:{story:{featuredMedia:t={id:0,url:"",height:0,width:0},publisherLogo:n={id:0,url:"",height:0,width:0}},capabilities:r},actions:{updateStory:a}}=e;return{featuredMedia:t,publisherLogo:n,updateStory:a,capabilities:r}})),C=(0,u.useCallback)((e=>T({properties:{featuredMedia:{id:e.id,url:e.src,height:e.height,width:e.width,isExternal:e.isExternal,needsProxy:e.needsProxy}}})),[T]),I=e=>{let{id:t,src:n}=e;const a={id:t,url:n};o(r,t),b((e=>[...e,a])),x(a)},x=e=>{T({properties:{publisherLogo:{id:e.id,url:e.url}}})},A=e=>{let t=(0,d.__)("No file types are currently supported.","web-stories");return f.length&&(t=(0,$e.default)(e,(0,kt.default)(f))),t},k=A(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as publisher logo.","web-stories")),O=A(
/* translators: %s: list of allowed file types. */
(0,d.__)("Please choose only %s as a poster.","web-stories")),P=(0,u.forwardRef)(((e,t)=>{let{option:n,...r}=e;return n.props?n:c.createElement(OM.default.Option,n3({value:n.id,ref:t},r),c.createElement(d3,{src:n.url,alt:"",decoding:"async",crossOrigin:"anonymous"}))})),N=e=>c.createElement(OM.default.Option,{onClick:e,"aria-label":(0,d.__)("Add new","web-stories")},c.createElement(Mm,{height:32,width:32}),c.createElement(Ke.Text,{as:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Add new","web-stories"))),R=[...h];if(p){const e={width:96,height:96};R.unshift(c.createElement(g,{onSelect:I,onSelectErrorMessage:k,type:i,render:N,title:(0,d.__)("Select as publisher logo","web-stories"),buttonInsertText:(0,d.__)("Select as publisher logo","web-stories"),cropParams:e}))}const M=[p&&"upload","hotlink"].filter(Boolean);return c.createElement(TP,{name:t||"publishing",collapsedByDefault:!1,isPersistable:!(y||E)},c.createElement(WP,null,(0,d.__)("Publishing","web-stories")),c.createElement(KP,null,S?.publish&&c.createElement(J5,null),S?.["assign-author"]&&n&&c.createElement(t3,null),c.createElement(l3,{isHighlighted:E?.showEffect||y?.showEffect,onAnimationEnd:()=>_()},c.createElement(s3,null,c.createElement(o3,null,c.createElement(i3,{ref:e=>{e&&E?.focus&&E?.showEffect&&e.focus()},$width:72,$height:96,cropParams:{width:640,height:853},value:v?.url,onChange:C,title:(0,d.__)("Select as poster image","web-stories"),hotlinkTitle:(0,d.__)("Use external image as poster image","web-stories"),hotlinkInsertText:(0,d.__)("Use image as poster image","web-stories"),hotlinkInsertingText:(0,d.__)("Using image as poster image","web-stories"),buttonInsertText:(0,d.__)("Select as poster image","web-stories"),type:i,ariaLabel:(0,d.__)("Poster image","web-stories"),onChangeErrorText:O,imgProps:v,canUpload:!0,menuOptions:M})),c.createElement(r3,null,c.createElement(a3,null,(0,d.__)("Poster image","web-stories")),c.createElement(nx,null))),c.createElement(c3,null,c.createElement(o3,null,c.createElement(OM.default.DropDown,{options:R,primaryOptions:R,onChange:x,title:(0,d.__)("Available publisher logos","web-stories"),dropdownButtonLabel:(0,d.__)("Publisher Logo","web-stories"),renderer:P,activeItemRenderer:()=>{const e=h.length?(0,d.__)("Select logo","web-stories"):(0,d.__)("No logo","web-stories");return w.id?c.createElement(d3,{src:w.url,alt:"",decoding:"async",crossOrigin:"anonymous"}):c.createElement(Ke.Text,{as:"span",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},e)},selectedId:w.id,zIndex:10,disabled:!R.length,ref:e=>{e&&y?.focus&&y?.showEffect&&e.focus()}})),c.createElement(r3,null,c.createElement(a3,null,(0,d.__)("Publisher Logo","web-stories")),c.createElement(QC,null,c.createElement(nx,null),m&&c.createElement(hu.Link,{rel:"noopener noreferrer",target:"_blank",href:s,size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Manage","web-stories"))))))))},p3={embedWebStories:{title:(0,d.__)("Embed Web Stories","web-stories"),figureSrcImg:"images/help-center/story_embed_module_1",figureAlt:(0,d.__)("Graphic showing embed functionality","web-stories"),description:[(0,d.__)("When you create a new post in WordPress, you can embed any of your Stories. <a>Learn more</a>","web-stories")],href:"https://wp.stories.google/docs/best-practices/"}},m3="public",g3="private",f3="protected",h3={PUBLISH:"publish",FUTURE:"future",PRIVATE:"private",DRAFT:"draft"};function b3(){return b3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b3.apply(this,arguments)}const E3=p.default.li.withConfig({displayName:"status__StyledListItem",componentId:"sc-1pq370j-0"})(["position:relative;padding:6px 8px;margin:4px 8px;align-items:center;border-radius:4px;cursor:pointer;"," &:hover{background-color:",";}"],up.focusableOutlineCSS,f.theme.colors.border.defaultNormal),y3=(0,p.default)(Text).attrs({as:"span"}).withConfig({displayName:"status__LabelText",componentId:"sc-1pq370j-1"})(["font-size:14px;color:",";"],f.theme.colors.fg.primary),_3=(0,p.default)(Text).attrs({as:"span"}).withConfig({displayName:"status__HelperText",componentId:"sc-1pq370j-2"})(["color:",";"],f.theme.colors.fg.tertiary),v3=(0,u.forwardRef)(((e,t)=>{let{option:n,isSelected:r,...a}=e;return c.createElement(E3,b3({ref:t,active:r},a),c.createElement(y3,null,n.label),c.createElement("br",null),c.createElement(_3,null,n.helper))}));const w3=function StatusPanel(e){let{nameOverride:t,popupZIndex:n,canCollapse:r,isPersistable:a,...o}=e;const{status:i="",password:l,updateStory:s,saveStory:p,capabilities:m,editLink:g,title:f,storyId:h}=Qa((e=>{let{state:{story:{status:t,password:n,editLink:r,title:a,storyId:o},capabilities:i},actions:{updateStory:l,saveStory:s}}=e;return{status:t,password:n,updateStory:l,saveStory:s,capabilities:i,editLink:r,title:a,storyId:o}})),[b,E]=(0,u.useState)(m3),y=Oc();(0,u.useEffect)((()=>{if(!l)return i===h3.PRIVATE?(E(g3),void s({properties:{visibility:g3}})):void 0;E(f3)}),[l,i,s,b]);const _=[{value:m3,label:(0,d.__)("Public","web-stories"),helper:(0,d.__)("Visible to everyone","web-stories")}];m?.publish&&(_.push({value:g3,label:(0,d.__)("Private","web-stories"),helper:(0,d.__)("Visible to site admins & editors only","web-stories"),disabled:y&&b!==g3}),_.push({value:f3,label:(0,d.__)("Password Protected","web-stories"),helper:(0,d.__)("Visible only to those with the password.","web-stories")}));const v=(0,u.useCallback)((e=>{s({properties:{password:e.target.value}})}),[s]),w=Gr(h,g),T=(0,u.useCallback)((()=>{const e={status:h3.PRIVATE,password:""};(0,P.trackEvent)("publish_story",{status:h3.PRIVATE,title_length:f.length}),w(),E(g3),p(e)}),[f.length,w,p]),S=[h3.PUBLISH,h3.FUTURE,h3.PRIVATE].includes(i),C=(0,u.useCallback)(((e,t)=>{const n=t;if(g3===n&&!S&&!window.confirm((0,d.__)("Would you like to privately publish this story now?","web-stories")))return;const r={};switch(n){case m3:r.status=b===g3?h3.DRAFT:i,r.password="",E(m3);break;case g3:return void T();case f3:r.status=b===g3?h3.DRAFT:i,r.password=l||"",E(f3)}s({properties:r})}),[i,b,l,s,T,S]);return c.createElement(QP,b3({name:t||"status",title:(0,d.__)("Visibility","web-stories"),canCollapse:r,isPersistable:a,collapsedByDefault:!1},o),c.createElement(c.Fragment,null,c.createElement(QC,null,c.createElement(gx.DropDown,{options:_,selectedValue:b,onMenuItemClick:C,popupZIndex:n,disabled:_.length<=1,renderItem:v3,hint:_.find((e=>b===e.value))?.helper})),b===f3&&c.createElement(QC,null,c.createElement(qv,{"aria-label":(0,d.__)("Password","web-stories"),value:l,onChange:v,placeholder:(0,d.__)("Enter a password","web-stories")}))))};function PublishModalDocumentPane(){return c.createElement(c.Fragment,null,c.createElement(u3,{nameOverride:"storyDetailsPublishing"}),c.createElement(zN,{nameOverride:"storyDetailsExcerpt"}),c.createElement(BN,{nameOverride:"storyDetailsPageAdvancement"}),c.createElement(AR,{nameOverride:"storyDetailsBackgroundAudio"}),c.createElement(fM,{nameOverride:"storyDetailsTaxonomies"}))}const T3=(0,p.default)(w3).withConfig({displayName:"documentPane__IsolatedPanel",componentId:"sc-3jx0y8-0"})(["padding:4px 4px 8px;"]);function IsolatedStatusPanel(){return c.createElement(T3,{nameOverride:"storyDetailsStatus",canCollapse:!1,isPersistable:!1,popupZIndex:11})}const S3=function DocumentPane(){return c.createElement(c.Fragment,null,c.createElement(w3,null),c.createElement(u3,null),c.createElement(eN,null),c.createElement(zN,null),c.createElement(BN,null),c.createElement(AR,null),c.createElement(fM,null))},C3=p.default.div.withConfig({displayName:"videoOptimizationCheckbox__CheckboxContainer",componentId:"sc-mjnlj7-0"})(["display:flex;align-items:flex-start;"]),I3=p.default.div.withConfig({displayName:"videoOptimizationCheckbox__ButtonContainer",componentId:"sc-mjnlj7-1"})(["display:flex;align-items:center;justify-content:center;margin-top:16px;"]),x3=(0,p.default)(Ke.Text).attrs({as:"span",isBold:!0}).withConfig({displayName:"videoOptimizationCheckbox__BoldText",componentId:"sc-mjnlj7-2"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.standard.white})),A3=(0,p.default)(Ke.Text).attrs({size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}).withConfig({displayName:"videoOptimizationCheckbox__DescriptionText",componentId:"sc-mjnlj7-3"})(["color:",";margin-bottom:16px;"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),k3=(0,p.default)(A3).withConfig({displayName:"videoOptimizationCheckbox__CheckboxLabel",componentId:"sc-mjnlj7-4"})(["margin-left:8px;margin-bottom:0;line-height:20px;cursor:pointer;"]);const O3=function VideoOptimizationCheckbox(){const e=Qp(),{capabilities:{hasUploadMediaAction:t}={},dashboardSettingsLink:n}=U(),[r,a]=(0,u.useState)(!1),o=(0,u.useRef)(),{currentUser:i,toggleWebStoriesMediaOptimization:l}=no((e=>{let{state:t,actions:n}=e;return{currentUser:t.currentUser,toggleWebStoriesMediaOptimization:n.toggleWebStoriesMediaOptimization}})),s=i?.meta?.web_stories_media_optimization,p=!s&&t,f=(0,u.useCallback)((()=>{a(!0),l()}),[l]),{isSaving:h,saveStory:b}=Qa((e=>{let{state:t,actions:n}=e;return{isSaving:t.meta.isSaving,saveStory:n.saveStory}}));return(0,u.useEffect)((()=>{r&&o.current.focus()}),[r]),(p||r)&&e?c.createElement(nO,{title:(0,d.__)("Optimize all videos in the Story to ensure smooth playback.","web-stories"),footer:r?c.createElement(c.Fragment,null,c.createElement(DefaultFooterText,null,c.createElement(fu.default,{mapping:{b:c.createElement(x3,null)}},(0,d.__)("Automatic video optimization enabled. <b>Reload the page</b> to apply changes.","web-stories"))),c.createElement(I3,null,c.createElement(m.Button,{type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,onClick:async()=>{await b(),window.location.reload(!0)},disabled:h,ref:o},(0,d.__)("Save & Reload","web-stories")))):c.createElement(C3,null,c.createElement(uS.Checkbox,{id:"automatic-video-optimization-toggle",checked:i?.meta?.web_stories_media_optimization,onChange:f}),c.createElement(k3,{forwardedAs:"label",htmlFor:"automatic-video-optimization-toggle"},c.createElement(fu.default,{mapping:{a:c.createElement(hu.Link,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:e=>(0,P.trackClick)(e,"click_video_optimization_settings"),href:n,isBold:!0})}},(0,d.__)("Enable automatic optimization. Change this any time in <a>Settings</a>.","web-stories"))))}):null};const P3=function Accessibility(){const{hasUploadMediaAction:e}=U((e=>{let{capabilities:t}=e;return{hasUploadMediaAction:t.hasUploadMediaAction}}));return c.createElement(c.Fragment,null,c.createElement(CO,null),c.createElement(jO,null),c.createElement(VO,null),e&&c.createElement(ZO,null),c.createElement(lO,null),c.createElement(oO,null),c.createElement(dO,null),c.createElement(O3,null))};const N3=function Design(){const{hasUploadMediaAction:e}=U((e=>{let{capabilities:t}=e;return{hasUploadMediaAction:t.hasUploadMediaAction}}));return c.createElement(c.Fragment,null,c.createElement(BO,null),c.createElement(PO,null),c.createElement(xO,null),c.createElement(kO,null),c.createElement(sO,null),e&&c.createElement(XO,null),e&&c.createElement(gO,null))},R3=()=>{const e=Qp(),{generalSettingsLink:t,publisherName:n}=U((e=>{let{metadata:t,generalSettingsLink:n}=e;return{publisherName:t?.publisher,generalSettingsLink:n}})),r=n?.trim().length>0,{title:a}=Au.storyMissingPublisherName;return Wu("StoryMissingPublisherName",!r),!r&&e&&c.createElement(nO,{title:a,footer:c.createElement(DefaultFooterText,null,c.createElement(fu.default,{mapping:{a:c.createElement(hu.Link,{href:t,rel:"noreferrer",target:"_blank",size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL})}},(0,d.__)("Your site title is used when your Story appears on Google. You can set your site title by going to <a>General Settings</a>.","web-stories")))})};const M3=function Priority(){const{canManageSettings:e,hasUploadMediaAction:t}=U((e=>{let{capabilities:t}=e;return{canManageSettings:t.canManageSettings,hasUploadMediaAction:t.hasUploadMediaAction}}));return c.createElement(c.Fragment,null,c.createElement(DO,null),e&&c.createElement(R3,null),c.createElement(HO,null),c.createElement(LO,null),t&&c.createElement(StoryPosterAttached,null),t&&c.createElement(FO,null),t&&c.createElement(NO,null),t&&c.createElement(RO,null),t&&c.createElement(qO,null),c.createElement(oP,null),c.createElement(MO,null))};function L3(){return L3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L3.apply(this,arguments)}const D3=p.default.div.withConfig({displayName:"footer__Panel",componentId:"sc-6wcfz2-0"})(["padding:16px 0 24px 0;border-top:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.bg.tertiary})),B3=p.default.ul.withConfig({displayName:"footer__Links",componentId:"sc-6wcfz2-1"})(["margin:8px 0 0 0;padding:0;list-style-position:inside;list-style-type:none;"]),F3=p.default.li.withConfig({displayName:"footer__ListItem",componentId:"sc-6wcfz2-2"})([""," &::before{content:'- ';}&,& > *{font-weight:700;}"],dp.expandTextPreset(((e,t)=>{let{paragraph:n}=e,{X_SMALL:r}=t;return n[r]})));function H3(e){let{children:t,...n}=e;return c.createElement(F3,null,c.createElement(hu.Link,L3({},n,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}),t))}const U3=(0,d.__)("https://wordpress.org/support/plugin/web-stories/","web-stories"),j3=(0,d.__)("https://youtube.com/playlist?list=PLfVPq9A6B0RNoQ3HTE9LQzgAdVzcb7tmt","web-stories");function z3(){const e=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_support_page")}),[]),t=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_website_docs")}),[]),n=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_storytime_channel")}),[]);return c.createElement(D3,null,c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,d.__)("Discover more resources to get the most out of Web Stories. Read our start guide or visit our support forum to get answers to your questions.","web-stories")),c.createElement(B3,null,c.createElement(H3,{href:"https://wp.stories.google/docs/getting-started/",target:"_blank",rel:"noreferrer",onClick:t},(0,d.__)("Read Documentation","web-stories")),c.createElement(H3,{href:U3,target:"_blank",rel:"noreferrer",onClick:e},(0,d.__)("Visit Support Forums","web-stories")),c.createElement(H3,{href:j3,target:"_blank",rel:"noreferrer",onClick:n},(0,d.__)("Storytime YouTube Series","web-stories"))))}const G3=function(){return c.createElement(V5,null,c.createElement(y5,{header:c.createElement(M5,null),footer:{secondaryMenu:{helpCenter:{Footer:z3},checklist:{Priority:M3,Design:N3,Accessibility:P3}}},sidebarTabs:{document:{title:(0,d.__)("Document","web-stories"),Pane:S3},publishModal:{DocumentPane:PublishModalDocumentPane,IsolatedStatusPanel}}},c.createElement(W5,null)))};var Y3=n(51048);const Z3=e=>{const{src:t,url:n,mime:r,alt:a,date:o,id:i,featured_media:l,featured_media_src:{src:s,width:c,height:d,generated:u}="",media_details:{width:p,height:m,length:g,length_formatted:f,sizes:h={}}={},web_stories_media_source:b,web_stories_is_muted:E,web_stories_base_color:y,web_stories_blurhash:_,trim_data:v}=e,w=Object.entries(h).reduce(((e,t)=>{let[n,r]=t;return e[n]=(0,Y3.snakeToCamelCaseObjectKeys)(r),e}),{});return J({baseColor:y,blurHash:_,mimeType:r,creationDate:o,src:n||t,...te({width:p,height:m,posterGenerated:u,posterWidth:c,posterHeight:d}),poster:s,posterId:l,id:i,length:g,lengthFormatted:f,alt:a,sizes:w,local:!1,isExternal:!1,isOptimized:["video-optimization","recording"].includes(b),isMuted:E,trimData:v})},W3=(e,t,n,r,a,o)=>(!0!==e||!0!==t)&&((!0!==e||r!==o)&&((!0!==t||n!==a)&&((n!==a||r!==o)&&!(Math.abs(n/r-a/o)<Number.EPSILON)))),V3=(e,t)=>{const n=t.get("control"),r=Boolean(parseInt(n.params.flex_width)),a=Boolean(parseInt(n.params.flex_height)),o=e.get("width"),i=e.get("height");let l=parseInt(n.params.width),s=parseInt(n.params.height);const c=l/s,d=l,u=s;t.set("canSkipCrop",!n.mustBeCropped(r,a,l,s,o,i)),o/i>c?(s=i,l=s*c):(l=o,s=l/c);const p=(o-l)/2,m=(i-s)/2,g={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:o,imageHeight:i,minWidth:d>l?l:d,minHeight:u>s?s:u,x1:p,y1:m,x2:l+p,y2:s+m};return!1===a&&!1===r&&(g.aspectRatio=l+":"+s),!0===a&&(delete g.minHeight,g.maxWidth=o),!0===r&&(delete g.minWidth,g.maxHeight=i),g},$3=window.wp?.media?.controller?.Cropper?.extend?.({doCrop:function(e){const t=e.get("cropDetails"),n=this.get("control"),r=t.width/t.height;return n.params.flex_width&&n.params.flex_height?(t.dst_width=t.width,t.dst_height=t.height):(t.dst_width=n.params.flex_width?n.params.height*r:n.params.width,t.dst_height=n.params.flex_height?n.params.width/r:n.params.height),window.wp.ajax.post("crop-image",{nonce:e.get("nonces").edit,id:e.get("id"),context:n.id,cropDetails:t})}}),q3=$3,K3={height:0,width:0,flex_width:!1,flex_height:!1};function X3(e){let{title:t=(0,d.__)("Upload to Story","web-stories"),buttonInsertText:n=(0,d.__)("Insert into page","web-stories"),onSelect:r,onSelectErrorMessage:a=(0,d.__)("Unable to use this file type.","web-stories"),onClose:o,onPermissionError:i,type:l="",multiple:s=!1,cropParams:c}=e;const{actions:{updateMedia:p}}=W(),{capabilities:{hasUploadMediaAction:m}}=U(),{showSnackbar:g}=(0,jr.useSnackbar)();(0,u.useEffect)((()=>{try{window.wp.Uploader.prototype.success=e=>{let{attributes:t}=e;p(t.id,{mediaSource:"editor",altText:t.alt||t.title})}}catch(e){}}),[p]);const f=(0,u.useCallback)((e=>{if((0,P.trackEvent)("open_media_modal"),!m)return i&&i(),void e.preventDefault();const c=window.wp.media({title:t,library:{type:l},button:{text:n},multiple:s});c.once("select",(()=>{const e=c.state().get("selection").first().toJSON();!Array.isArray(l)||l.includes(e.mime)?(e.alt=e.alt||e.title,r(Z3(e))):g({message:a})})),o&&c.once("close",o),c.once("content:activate:browse",(()=>{c.content?.get()?.collection?._requery(!0),c.content?.get()?.options?.selection?.reset()})),c.open(),e.preventDefault()}),[m,g,i,o,r,n,a,s,l,t]),h=(0,u.useCallback)((e=>{if((0,P.trackEvent)("open_media_crop_modal"),!m)return i&&i(),void e.preventDefault();const d={...K3,...c},u={id:"control-id",params:d,mustBeCropped:W3},f={text:n,close:!1},h=window.wp.media({button:f,states:[new window.wp.media.controller.Library({title:t,library:window.wp.media.query({type:l}),button:f,multiple:s,suggestedWidth:d.width,suggestedHeight:d.height}),q3&&new q3({imgSelectOptions:V3,control:u})]});h.once("cropped",(e=>{if(e?.id){const t=e.alt||e.title;p(e.id,{mediaSource:"editor",altText:t}),e.alt=t}r(Z3(e))})),h.once("skippedcrop",(()=>{const e=h.state().get("selection").first().toJSON();e.alt=e.alt||e.title,r(Z3(e))})),h.once("select",(()=>{const e=h.state().get("selection").first().toJSON();if(Array.isArray(l)&&!l.includes(e.mime))return h.close(),void g({message:a});u.params.width!==e.width||u.params.height!==e.height||u.params.flex_width||u.params.flex_height?h.setState("cropper"):(e.alt=e.alt||e.title,r(Z3(e)),h.close())})),o&&h.once("close",o),h.once("content:activate:browse",(()=>{h.content?.get()?.collection?._requery(!0),h.content?.get()?.options?.selection?.reset()})),h.open(),e.preventDefault()}),[m,c,n,t,l,s,r,o,i,p,g,a]);return(0,u.useMemo)((()=>c?h:f),[c,h,f])}X3.propTypes={title:ja.string,buttonInsertText:ja.string,onSelect:ja.func.isRequired,onSelectErrorMessage:ja.string,onClose:ja.func,onPermissionError:ja.func,type:ja.oneOfType([ja.string,ja.arrayOf(ja.string)]),cropParams:ja.object,multiple:ja.bool};const Q3=X3;function MediaUpload(e){let{render:t,...n}=e;return t(Q3(n))}MediaUpload.propTypes={render:ja.func.isRequired,...Q3.propTypes};const J3=MediaUpload;var e4=n(6389);function t4(e,t){return j5({path:`${t}${e}/lock/`,method:"POST"})}const n4=p.default.img.withConfig({displayName:"shared__Img",componentId:"sc-1djlecd-0"})(["float:left;margin:0px 10px 10px 0px;"]);const r4=function PostLockDialog(e){let{isOpen:t,onClose:n,user:r,dashboardLink:a,previewLink:o,showTakeOver:i=!1}=e;const l=(0,d.__)("Story is locked","web-stories"),s=i?(0,$e.default)(
/* translators: %s: user's name */
(0,d.__)("%s is already editing this story. Do you want to take over?","web-stories"),r?.name):(0,$e.default)(
/* translators: %s: user's name */
(0,d.__)("%s is already editing this story.","web-stories"),r?.name);return c.createElement(y,{isOpen:t,onClose:n,title:l,contentLabel:l,actions:c.createElement(c.Fragment,null,c.createElement(m.Button,{type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,href:a},(0,d.__)("Dashboard","web-stories")),c.createElement(m.Button,{type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,href:o,target:"_blank",rel:"noreferrer"},(0,d.__)("Preview","web-stories")),i&&c.createElement(m.Button,{type:g.BUTTON_TYPES.TERTIARY,size:g.BUTTON_SIZES.SMALL,onClick:n},(0,d.__)("Take over","web-stories")))},c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},r?.avatar&&c.createElement(n4,{src:r.avatar,alt:r.name,height:48,width:48,crossOrigin:"anonymous",decoding:"async"}),s))};const a4=function PostTakeOverDialog(e){let{isOpen:t,user:n,dashboardLink:r,onClose:a}=e;const o=(0,d.__)("Someone else has taken over this story.","web-stories"),i=(0,$e.default)(
/* translators: %s: user's name */
(0,d.__)("%s now has editing control of this story.","web-stories"),n?.name);return c.createElement(y,{isOpen:t,title:o,contentLabel:o,onClose:a,actions:c.createElement(m.Button,{type:g.BUTTON_TYPES.QUATERNARY,size:g.BUTTON_SIZES.SMALL,variant:g.BUTTON_VARIANTS.RECTANGLE,href:r},(0,d.__)("Dashboard","web-stories"))},c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},n.avatar&&c.createElement(n4,{src:n.avatar,alt:n.name,height:48,width:48,crossOrigin:"anonymous",decoding:"async"}),i))};const o4=function PostLock(){const{currentUser:e}=no((e=>{let{state:t}=e;return{currentUser:t.currentUser}})),{storyId:t,dashboardLink:n,nonce:r,postLock:{interval:a,showLockedDialog:o},api:{stories:i,storyLocking:l}}=U(),{previewLink:s,lockUser:d}=Qa((e=>{let{state:{story:{previewLink:t,extras:{lockUser:n={}}={}}}}=e;return{previewLink:t,lockUser:n}})),{enablePostLockingTakeOver:p}=(0,C.useFeatures)(),[m,g]=(0,u.useState)(!0),[f,h]=(0,u.useState)({}),[b,E]=(0,u.useState)(r),y=(0,u.useCallback)((()=>{p&&(h({}),t4(t,i))}),[p,t,i]),_=(0,u.useMemo)((()=>Boolean(Object.keys(e).length)),[e]),v=(0,u.useCallback)((()=>{o&&_&&function(e,t){const n=(0,e4.default)(`${t}${e}/lock/`,{_embed:"author"});return j5({path:n})}(t,i).then((n=>{let{locked:r,nonce:a,_embedded:o}=n;const l={id:o?.author?.[0]?.id||0,name:o?.author?.[0]?.name||"",avatar:o?.author?.[0]?.avatar_urls?.[96]||""};r&&l?.id&&l?.id!==e.id?h(l):t4(t,i),E(a)})).catch((e=>{(0,P.trackError)("post_lock",e.message)}))}),[h,t,i,e,o,_]),w=(0,u.useRef)(v);return(0,u.useEffect)((()=>{w.current=v}),[v,_]),(0,u.useEffect)((()=>{o&&_&&d?.id&&d?.id!==e.id&&h(d)}),[d,e,_,o]),(0,u.useEffect)((()=>{function e(){o&&f?.id&&b&&function(e,t,n){const r=new window.FormData;r.append("_wpnonce",t);const a=(0,e4.default)(n,{_method:"DELETE"});window.navigator.sendBeacon?.(a,r)}(0,b,l)}return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[t,o,f,b,l]),(0,u.useEffect)((()=>{const e=setInterval((()=>{a&&_&&(w.current(),g(!1))}),1e3*a);return()=>clearInterval(e)}),[a,_]),o&&f?m?c.createElement(r4,{isOpen:Boolean(f?.id),user:f,onClose:y,previewLink:s,dashboardLink:n,showTakeOver:p}):p?c.createElement(a4,{isOpen:Boolean(f?.id),user:f,dashboardLink:n,onClose:y}):null:null},i4=(e,t,n)=>{if("object"==typeof n)for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&i4(e,`${t}[${r}]`,n[r]);else e.append(t,n)},l4=i4;const s4=function(e){return"__WEB_STORIES_ENCODED__"+btoa(encodeURIComponent(e))};const c4=function(e){const{mime_type:t,web_stories_media_source:n,meta:{web_stories_is_gif:r=!1}={}}=e;return"gif-conversion"===n||r?function(e){const{id:t,date_gmt:n,media_details:{width:r,height:a},mime_type:o,featured_media:i,featured_media_src:{src:l,width:s,height:c,generated:d},alt_text:u,source_url:p,meta:{web_stories_base_color:m,web_stories_blurhash:g}}=e;return J({baseColor:m,blurHash:g,type:"gif",mimeType:"image/gif",creationDate:n,src:p,...te({width:r,height:a,posterGenerated:d,posterWidth:s,posterHeight:c}),posterId:i,poster:l,id:t,alt:u,local:!1,isOptimized:!0,isExternal:!1,output:{mimeType:o,src:p}})}(e):"image"===Q(t)?function(e){const{id:t,date_gmt:n,media_details:{width:r,height:a,sizes:o={}}={},mime_type:i,alt_text:l,source_url:s,meta:{web_stories_base_color:c,web_stories_blurhash:d}}=e,u=Object.entries(o).reduce(((e,t)=>{let[n,r]=t;return e[n]=(0,Y3.snakeToCamelCaseObjectKeys)(r),e}),{});return J({baseColor:c,blurHash:d,mimeType:i,creationDate:n,src:s,width:r,height:a,id:t,alt:l,sizes:u,local:!1,isExternal:!1})}(e):function(e){const{id:t,date_gmt:n,media_details:{width:r,height:a,length:o,length_formatted:i},mime_type:l,featured_media:s,featured_media_src:{src:c,width:d,height:u,generated:p},web_stories_is_muted:m,alt_text:g,source_url:f,web_stories_media_source:h,meta:{web_stories_trim_data:b,web_stories_base_color:E,web_stories_blurhash:y}}=e;return J({baseColor:E,blurHash:y,mimeType:l,creationDate:n,src:f,...te({width:r,height:a,posterGenerated:p,posterWidth:d,posterHeight:u}),poster:c,posterId:s,id:t,length:o,lengthFormatted:i,alt:g,local:!1,isExternal:!1,isOptimized:["video-optimization","recording"].includes(h),isMuted:m,trimData:b})}(e)};const d4=function(e){const{_embedded:t={},story_poster:n,_links:r={},...a}=e,o={...(0,Y3.snakeToCamelCaseObjectKeys)(a,["story_data"]),author:{id:t?.author?.[0].id||0,name:t?.author?.[0].name||""},capabilities:{},extras:{lockUser:{id:t?.["wp:lockuser"]?.[0].id||0,name:t?.["wp:lockuser"]?.[0].name||"",avatar:t?.["wp:lockuser"]?.[0].avatar_urls?.[96]||""}},featuredMedia:n?{...n,isExternal:!n.id}:{id:0,height:0,width:0,url:"",needsProxy:!1,isExternal:!1},publisherLogo:{id:t?.["wp:publisherlogo"]?.[0].id||0,height:t?.["wp:publisherlogo"]?.[0]?.media_details?.height||0,width:t?.["wp:publisherlogo"]?.[0]?.media_details?.width||0,url:t?.["wp:publisherlogo"]?.[0]?.source_url||""},taxonomies:r?.["wp:term"]?.map((e=>{let{taxonomy:t}=e;return t}))||[],terms:t?.["wp:term"]||[]};for(const e of Object.keys(r)){if(!e.startsWith("wp:action-"))continue;const t=e.replace("wp:action-","");o.capabilities[t]=!0}return o};const u4=(0,d.__)("https://wordpress.org/support/plugin/web-stories/","web-stories");const p4=function StatusCheckFailed(e){let{isOpen:t,onClose:n}=e;const r=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_support_page")}),[]);return c.createElement(y,{isOpen:t,onClose:n,title:(0,d.__)("Unable to save your story","web-stories"),contentLabel:(0,d.__)("Unable to save your story","web-stories"),onPrimary:n,primaryText:(0,d.__)("Dismiss","web-stories")},c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(fu.default,{mapping:{a:c.createElement(hu.Link,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:u4,target:"_blank",rel:"noopener noreferrer",onClick:r})}},(0,d.__)("We are currently unable to save your story, any changes you make may be lost. This may be due to temporary issues connecting to WordPress. <a>Submit a new support topic</a> for additional help.","web-stories"))))};const m4=function StatusCheck(){const[e,t]=(0,u.useState)(!1),n=(0,u.useCallback)((()=>t(!1)),[]),{api:{statusCheck:r},encodeMarkup:a}=U();return(0,u.useEffect)((()=>{(function(e,t,n){return j5({path:t,data:{content:n?s4(e):e},method:"POST"})})(Ta({storyId:1,title:"Story!",author:{id:1,name:"John Doe"},slug:"story",publisherLogo:{id:1,url:"https://example.com/logo.png",height:0,width:0},defaultPageDuration:7,status:"publish",date:"2020-04-10T07:06:26",modified:"",excerpt:"",featuredMedia:{id:123,url:"https://example.com/image.png",width:123,height:456},password:"",globalStoryStyles:""},[{type:"page",id:"2",elements:[]}],{publisher:"Web Stories"}),r,a).catch((e=>{t(!0),(0,P.trackError)("status_check",e.message)}))}),[a,r]),c.createElement(p4,{isOpen:e,onClose:n})};const g4=function CorsCheckFailed(e){let{isOpen:t,onClose:n}=e;const r=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_cors_check_docs")}),[]);return c.createElement(y,{isOpen:t,onClose:n,title:(0,d.__)("Unable to load media","web-stories"),contentLabel:(0,d.__)("Unable to load media","web-stories"),onPrimary:n,primaryText:(0,d.__)("Dismiss","web-stories")},c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},c.createElement(fu.default,{mapping:{a:c.createElement(hu.Link,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,href:"https://wp.stories.google/docs/troubleshooting/common-issues/",target:"_blank",rel:"noopener noreferrer",onClick:r})}},(0,d.__)("We detected a potential misconfiguration that prevents media items from loading correctly. This may be due to media being hosted on an external CDN. <a>Learn how to address this</a>.","web-stories"))))},f4=Qo.CORS_CHECK_DIALOG_DISMISSED;const h4=function CorsCheck(){const[e,t]=(0,u.useState)(!1),{actions:{getMediaForCorsCheck:n}}=W(),r=(0,u.useCallback)((()=>{t(!1),Jo.setItemByKey(f4,!0)}),[]),a=Boolean(Jo.getItemByKey(f4));return(0,u.useEffect)((()=>{(async()=>{if(a)return;let e;try{e=await n()}catch(e){return}if(e?.length)try{await Promise.all([...new Set(e.filter((e=>!e.startsWith(location.origin))))].map((e=>fetch(e,{method:"HEAD"}))))}catch(e){t(!0),(0,P.trackError)("cors_check",e.message)}})()}),[]),c.createElement(g4,{isOpen:e,onClose:r})},b4=p.default.div.withConfig({displayName:"fontCheckDialog__DialogContent",componentId:"sc-5gbbgj-0"})(["display:grid;row-gap:20px;"]),E4=(0,p.default)(yh).withConfig({displayName:"fontCheckDialog__ChevronRight",componentId:"sc-5gbbgj-1"})(["width:32px;height:32px;"]),y4=(0,p.default)(E4).withConfig({displayName:"fontCheckDialog__ChevronLeft",componentId:"sc-5gbbgj-2"})(["transform:rotate(180deg);"]),_4=(0,p.default)(hu.Link).withConfig({displayName:"fontCheckDialog__StyledLink",componentId:"sc-5gbbgj-3"})(["display:flex;color:",";align-items:center;font-weight:normal;margin:0 auto 0 0;"],(e=>{let{theme:t}=e;return t.colors.standard.black})),v4=(0,p.default)(m.Button).withConfig({displayName:"fontCheckDialog__StyledButton",componentId:"sc-5gbbgj-4"})(["margin-left:16px;"]),w4=p.default.div.withConfig({displayName:"fontCheckDialog__ActionsWrap",componentId:"sc-5gbbgj-5"})(["display:flex;align-self:flex-end;width:100%;"]),FontCheckDialog=e=>{let{isOpen:t,defaultCloseAction:n,missingFont:r,closeDialog:a}=e;const{dashboardLink:o,dashboardSettingsLink:i,isRTL:l}=U(),[s,p]=(0,u.useState)(Mn.TEXT_ELEMENT_DEFAULT_FONT),{updateElementsByFontFamily:m}=Qa((e=>{let{actions:t}=e;return{updateElementsByFontFamily:t.updateElementsByFontFamily}})),f=(0,u.useCallback)((e=>{(0,P.trackEvent)("font_check_cancel"),n(e)}),[n]),h=(0,u.useCallback)((e=>{(0,P.trackClick)(e,"click_font_check_settings")}),[]),b=(0,u.useCallback)((()=>{(0,P.trackEvent)("font_check_replace_default"),m({family:r,properties:{font:Mn.TEXT_ELEMENT_DEFAULT_FONT}}),a()}),[a,r,m]),E=(0,u.useCallback)((()=>{(0,P.trackEvent)("font_check_replace_selected"),m({family:r,properties:{font:s}}),a()}),[s,a,r,m]),_=l?E4:y4;return c.createElement(y,{isOpen:t,onClose:f,title:(0,d.__)("Missing Fonts","web-stories"),contentLabel:(0,d.__)("Missing Fonts","web-stories"),actions:c.createElement(w4,null,c.createElement(_4,{href:o},c.createElement(_,null),(0,d.__)("Back to dashboard","web-stories")),c.createElement(v4,{type:g.BUTTON_TYPES.SECONDARY,size:g.BUTTON_SIZES.SMALL,onClick:b},(0,d.__)("Open anyway","web-stories")),c.createElement(v4,{type:g.BUTTON_TYPES.PRIMARY,size:g.BUTTON_SIZES.SMALL,onClick:E},(0,d.__)("Replace font","web-stories")))},c.createElement(b4,null,c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("This story contains the following font that is no longer available:","web-stories")),c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},r),c.createElement("div",null,c.createElement(fu.default,{mapping:{a:c.createElement(hu.Link,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:h,href:i,isBold:!0})}},(0,d.__)("To replace this font with your own or re-add it, go to <a>Settings</a>. To replace this font with a default, open the story.","web-stories"))),c.createElement(Ke.Text,{size:Xe.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,d.__)("Or, choose replacement font below:","web-stories")),c.createElement(RM,{zIndex:10,currentValue:s.family,onChange:p})))},T4=()=>{const{dashboardLink:e}=U(),{isStoryLoaded:t,storyPages:n,updateElementsByFontFamily:r}=Qa((e=>{let{state:{pages:t},actions:n}=e;return{storyPages:t,updateElementsByFontFamily:n.updateElementsByFontFamily,isStoryLoaded:t.length>0}})),{actions:{getFonts:a}}=W(),[o,i]=(0,u.useState)(null),[l,s]=(0,u.useState)(!1),d=(0,u.useCallback)((()=>{window.location=e}),[e]);return(0,u.useEffect)((()=>{(async()=>{if(!t)return;const e=pq(n),o=await a({include:e.join(",")});for(const t of e){const e=o.find((e=>e?.family===t));e&&r({family:t,properties:{font:e}})}const l=e.filter((e=>!new Set(o.map((e=>e.family))).has(e)));l&&l.length>=1&&(s(!0),i(l[0]))})()}),[t,r]),c.createElement(FontCheckDialog,{isOpen:l,missingFont:o||"",defaultCloseAction:d,closeDialog:()=>s(!1)})};function S4(e,t){return j5({path:(0,e4.default)(e.api.users,{per_page:"100",who:"authors",search:t})}).then((e=>e.map((e=>(delete e._links,(0,Y3.snakeToCamelCaseObjectKeys)(e))))))}const C4=["id","title","status","slug","date","modified","excerpt","link","story_poster","story_data","preview_link","edit_link","embed_post_link","permalink_template","style_presets","password"].join(","),I4="wp:lockuser,author,wp:publisherlogo,wp:term",x4=["id","date_gmt","media_details","mime_type","featured_media","featured_media_src","alt_text","source_url","meta","web_stories_media_source","web_stories_is_muted","body","status","headers"].join(",");function A4(e,t){const n=(0,e4.default)(`${e.api.stories}${t}/`,{context:"edit",_embed:I4,_fields:C4});return j5({path:n}).then(d4)}const k4=(e,t)=>{let{pages:n,featuredMedia:r,globalStoryStyles:a,publisherLogo:o,autoAdvance:i,defaultPageDuration:l,currentStoryStyles:s,backgroundAudio:c,content:d,author:u,products:p,...m}=e;return{story_data:{version:Cr.DATA_VERSION,pages:n,autoAdvance:i,defaultPageDuration:l,currentStoryStyles:s,backgroundAudio:c},featured_media:r.isExternal?null:r.id,style_presets:a,meta:{web_stories_publisher_logo:o?.id,web_stories_products:p,web_stories_poster:r.isExternal?{url:r.url,width:r.width,height:r.height,needsProxy:r.needsProxy}:null},publisher_logo:o,content:t?s4(d):d,author:u.id,...m}};function O4(e,t){const{storyId:n}=t,r=k4(t,e.encodeMarkup),a=(0,e4.default)(`${e.api.stories}${n}/`,{_fields:["status","slug","link","preview_link","edit_link","embed_post_link","story_poster"].join(","),_embed:I4});return j5({path:a,data:r,method:"POST"}).then((e=>{const{story_poster:t,...n}=e,r=t?{...t,isExternal:!t.id}:{id:0,height:0,width:0,url:"",needsProxy:!1,isExternal:!1};return{...(0,Y3.snakeToCamelCaseObjectKeys)(n),featuredMedia:r}}))}function P4(e,t){const{storyId:n}=t,r=k4(t,e.encodeMarkup);return j5({path:`${e.api.stories}${n}/autosaves/`,data:r,method:"POST"}).then((e=>(0,Y3.snakeToCamelCaseObjectKeys)(e,["story_data"])))}function N4(e,t){let{mediaType:n,searchTerm:r,pagingNum:a}=t,o=(0,e4.default)(e.api.media,{context:"view",per_page:50,page:a,_web_stories_envelope:!0,_fields:x4});return n&&(o=(0,e4.default)(o,{media_type:n})),r&&(o=(0,e4.default)(o,{search:r})),j5({path:o}).then((e=>{let{body:t,headers:n}=e;return{data:t.map(c4),headers:{...n,totalItems:n["X-WP-Total"],totalPages:n["X-WP-TotalPages"]}}}))}function R4(e){const t=(0,e4.default)(e.api.media,{context:"view",per_page:10,_fields:"source_url"});return j5({path:t}).then((e=>e.map((e=>e.source_url))))}function M4(e,t){const n=(0,e4.default)(`${e.api.media}${t}/`,{context:"view",_fields:x4});return j5({path:n}).then(c4)}async function L4(e,t){const n=(0,e4.default)(`${e.api.media}${t}/`,{context:"view",_fields:"meta.web_stories_muted_id"}),r=await j5({path:n});return r?.meta?.web_stories_muted_id?M4(e,r.meta.web_stories_muted_id):null}async function D4(e,t){const n=(0,e4.default)(`${e.api.media}${t}/`,{context:"view",_fields:"meta.web_stories_optimized_id"}),r=await j5({path:n});return r?.meta?.web_stories_optimized_id?M4(e,r.meta.web_stories_optimized_id):null}async function B4(e,t){const n=(0,e4.default)(`${e.api.media}${t}/`,{context:"view",_fields:"featured_media"}),r=await j5({path:n});return r?.featured_media?M4(e,r.featured_media):null}function F4(e,t,n){const{originalId:r,mediaId:a,storyId:o,templateId:i,isMuted:l,mediaSource:s,trimData:c,baseColor:d,blurHash:u,isGif:p,altText:m}=n,g={web_stories_media_source:s,web_stories_is_muted:l,post:i||o||a,original_id:r,web_stories_trim_data:c,web_stories_base_color:d,web_stories_blurhash:u,alt_text:m};void 0!==p&&(g.meta={web_stories_is_gif:p}),Object.entries(g).forEach((e=>{let[t,n]=e;void 0===n&&delete g[t]}));const f=new window.FormData;return f.append("file",t,t.name||t.type.replace("/",".")),Object.entries(g).forEach((e=>{let[t,n]=e;return l4(f,t,n)})),j5({path:e.api.media,body:f,method:"POST"}).then((e=>c4(e)))}function H4(e,t,n){const{baseColor:r,blurHash:a,isMuted:o,mediaSource:i,optimizedId:l,mutedId:s,posterId:c,storyId:d,altText:u}=n,p={meta:{web_stories_base_color:r,web_stories_blurhash:a,web_stories_optimized_id:l,web_stories_muted_id:s,web_stories_poster_id:c},web_stories_is_muted:o,web_stories_media_source:i,featured_media:c,post:d,alt_text:u};return Object.entries(p.meta).forEach((e=>{let[t,n]=e;void 0===n&&delete p.meta[t]})),Object.entries(p).forEach((e=>{let[t,n]=e;void 0===n&&delete p[t]})),j5({path:`${e.api.media}${t}/`,data:p,method:"POST"}).then(c4)}function U4(e,t){j5({path:(0,e4.default)(`${e.api.media}${t}/`,{_method:"DELETE"}),data:{force:!0},method:"POST"})}function j4(e,t){const n=(0,e4.default)(e.api.link,{url:t});return j5({path:n})}const z4=["id","story_data","body","headers"],G4="wp:featuredmedia";function Y4(e){const{_embedded:t={},id:n,story_data:r={}}=e;return{id:n,elements:[],...r,templateId:n,image:{id:t?.["wp:featuredmedia"]?.[0].id||0,height:t?.["wp:featuredmedia"]?.[0]?.media_details?.height||0,width:t?.["wp:featuredmedia"]?.[0]?.media_details?.width||0,url:t?.["wp:featuredmedia"]?.[0]?.source_url||"",needsProxy:!1,isExternal:!1}}}function Z4(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=100,r=(0,e4.default)(e.api.pageTemplates,{context:"edit",per_page:n,page:t,_web_stories_envelope:!0,_fields:z4,_embed:G4});return j5({path:r}).then((e=>{let{headers:n,body:r}=e;const a=parseInt(n["X-WP-TotalPages"]);return{templates:r.map(Y4),hasMore:a>t}}))}function W4(e,t){return j5({path:e.api.pageTemplates,data:{...t,status:"publish"},method:"POST"}).then(Y4)}function V4(e,t,n){return j5({path:`${e.api.pageTemplates}${t}/`,data:{...n},method:"POST"}).then(Y4)}function $4(e,t){return j5({path:(0,e4.default)(`${e.api.pageTemplates}${t}/`,{_method:"DELETE"}),data:{force:!0},method:"POST"})}function q4(e){return{id:e.id,trackingOptin:e.meta.web_stories_tracking_optin,onboarding:e.meta.web_stories_onboarding,mediaOptimization:e.meta.web_stories_media_optimization}}function K4(e){return j5({path:e.api.currentUser}).then(q4)}function X4(e,t){const{trackingOptin:n,onboarding:r,mediaOptimization:a}=t,o={meta:{web_stories_tracking_optin:n,web_stories_onboarding:r,web_stories_media_optimization:a}};return Object.entries(o.meta).forEach((e=>{let[t,n]=e;void 0===n&&delete o.meta[t]})),j5({path:e.api.currentUser,method:"POST",data:o}).then(q4)}function Q4(e,t){const n=(0,e4.default)(e.api.hotlink,{url:t});return j5({path:n}).then(Y3.snakeToCamelCaseObjectKeys)}function J4(e,t){return(0,e4.default)(e.api.proxy,{url:t,_wpnonce:e.nonce})}async function e7(e){const t=await j5({path:(0,e4.default)(e.api.taxonomies,{type:e.postType,context:"edit",show_ui:"true"})});return Object.values(t).map((e=>(e.restPath=e._links?.["wp:items"]?.[0]?.href,delete e._links,(0,Y3.snakeToCamelCaseObjectKeys)(e,["capabilities","visibility"]))))}function t7(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return j5({url:(0,e4.default)(t,n)})}function n7(e,t,n){return j5({url:(0,e4.default)(t,n),method:"POST"})}function r7(e,t){let{include:n,search:r,service:a}=t,o=(0,e4.default)(`${e.api.fonts}`,{search:r,service:a});const i=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(",").filter(Boolean).map((e=>`include[]=${encodeURI(e)}`)).join("&")}(n);return i.length>0&&(o+=o.includes("?")?`&${i}`:`?${i}`),j5({path:o})}async function a7(e,t,n,r,a){const o=await j5({path:(0,e4.default)(e.api.products,{per_page:50,page:n,search:t,orderby:r,order:a,_web_stories_envelope:!0})});return{products:o?.body,hasNextPage:"true"===o?.headers["X-WP-HasNextPage"]}}const o7=(0,p.createGlobalStyle)([".","{top:","px !important;left:","px !important;}body.folded .","{left:","px !important;}"],S.OVERLAY_CLASS,32,160,S.OVERLAY_CLASS,36);window.webStories=window.webStories||{},window.webStories.initializeStoryEditor=(e,t,n)=>{const r=document.getElementById(e);(0,_5.setAppElement)(r),(0,iu.updateSettings)(t.locale),(0,P.initializeTracking)("Editor"),Jn.default.forEach(Mn.registerElementType),n.story=n.story?d4(n.story):null;const a={...t,apiCallbacks:(0,v5.default)(s,t),additionalTips:p3,MediaUpload:J3,styleConstants:{topOffset:32,leftOffset:36}};(0,u.render)(c.createElement(u.StrictMode,null,c.createElement(Ld,{config:a,initialEdits:n},c.createElement(o7,null),c.createElement(G3,null),c.createElement(w5,null),c.createElement(T5,null),c.createElement(m4,null),c.createElement(h4,null),c.createElement(T4,null),c.createElement(o4,null))),r)}}},i={};function __webpack_require__(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=o,__webpack_require__.amdO={},e=[],__webpack_require__.O=(t,n,r,a)=>{if(!n){var o=1/0;for(c=0;c<e.length;c++){for(var[n,r,a]=e[c],i=!0,l=0;l<n.length;l++)(!1&a||o>=a)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](n[l])))?n.splice(l--,1):(i=!1,a<o&&(o=a));if(i){e.splice(c--,1);var s=r();void 0!==s&&(t=s)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,r,a]},__webpack_require__.F={},__webpack_require__.E=e=>{Object.keys(__webpack_require__.F).map((t=>{__webpack_require__.F[t](e)}))},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);__webpack_require__.r(a);var o={};t=t||[null,n({}),n([]),n(n)];for(var i=2&r&&e;"object"==typeof i&&!~t.indexOf(i);i=n(i))Object.getOwnPropertyNames(i).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,__webpack_require__.d(a,o),a},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>({8:"chunk-web-stories-template-5",69:"chunk-web-stories-template-60-metaData",274:"chunk-web-stories-template-56",341:"chunk-react-color",354:"chunk-web-stories-template-19",410:"chunk-web-stories-template-24",533:"chunk-web-stories-template-42-metaData",824:"chunk-web-stories-template-36",827:"chunk-web-stories-template-27-metaData",884:"chunk-web-stories-template-18-metaData",907:"chunk-web-stories-template-57",1049:"chunk-web-stories-template-37",1066:"chunk-web-stories-template-44-metaData",1197:"chunk-web-animations-js",1231:"chunk-web-stories-template-12",1340:"chunk-web-stories-template-30-metaData",1380:"chunk-web-stories-template-33-metaData",1403:"chunk-web-stories-template-37-metaData",1738:"chunk-web-stories-template-32",1789:"chunk-web-stories-template-43",1813:"chunk-web-stories-template-10-metaData",1847:"chunk-web-stories-template-12-metaData",1858:"chunk-web-stories-template-1",1970:"chunk-web-stories-template-22-metaData",2068:"chunk-web-stories-template-46",2167:"chunk-web-stories-template-32-metaData",2191:"chunk-web-stories-template-49-metaData",2235:"chunk-web-stories-template-51-metaData",2246:"chunk-web-stories-template-45-metaData",2319:"chunk-web-stories-template-31-metaData",2338:"chunk-web-stories-template-25",2374:"chunk-web-stories-template-2-metaData",2392:"chunk-react-calendar",2454:"chunk-web-stories-template-6",2476:"chunk-web-stories-textset-0",2558:"chunk-web-stories-template-53-metaData",2563:"chunk-web-stories-textset-4",2634:"chunk-web-stories-textset-3",2761:"chunk-web-stories-textset-7",2776:"chunk-web-stories-template-9-metaData",2830:"chunk-web-stories-template-36-metaData",2880:"chunk-web-stories-template-8",2894:"chunk-web-stories-template-34-metaData",3041:"chunk-web-stories-template-15-metaData",3182:"chunk-html-to-image",3194:"chunk-web-stories-template-29-metaData",3245:"chunk-web-stories-template-28",3289:"chunk-web-stories-template-43-metaData",3304:"chunk-web-stories-template-49",3441:"chunk-web-stories-template-45",3529:"chunk-web-stories-template-39",3710:"chunk-web-stories-template-35",3772:"chunk-web-stories-template-60",3777:"chunk-web-stories-template-34",3864:"chunk-web-stories-template-4-metaData",3871:"chunk-web-stories-textset-2",3969:"chunk-web-stories-template-9",4051:"chunk-web-stories-template-40-metaData",4142:"chunk-web-stories-template-29",4178:"chunk-web-stories-template-24-metaData",4386:"chunk-web-stories-template-41",4585:"chunk-web-stories-template-38-metaData",4874:"chunk-web-stories-template-35-metaData",5016:"chunk-web-stories-template-21-metaData",5040:"chunk-web-stories-template-16",5157:"chunk-web-stories-template-33",5312:"chunk-web-stories-template-14",5372:"chunk-web-stories-template-6-metaData",5397:"chunk-web-stories-template-8-metaData",5432:"chunk-web-stories-template-26",5535:"chunk-web-stories-template-15",5543:"chunk-web-stories-template-31",5553:"chunk-web-stories-template-20-metaData",5570:"chunk-web-stories-template-54-metaData",5573:"chunk-web-stories-template-52-metaData",5575:"chunk-resize-observer-polyfill",5748:"chunk-web-stories-template-54",5835:"chunk-web-stories-template-30",6053:"chunk-web-stories-template-16-metaData",6188:"chunk-web-stories-template-42",6204:"chunk-web-stories-template-0-metaData",6271:"chunk-web-stories-template-39-metaData",6305:"chunk-web-stories-template-5-metaData",6311:"chunk-web-stories-template-23-metaData",6353:"chunk-web-stories-template-1-metaData",6406:"chunk-web-stories-template-4",6428:"chunk-web-stories-template-13",6500:"chunk-web-stories-template-0",6517:"chunk-web-stories-template-52",6539:"chunk-web-stories-template-58-metaData",6592:"chunk-web-stories-template-51",6641:"chunk-web-stories-template-28-metaData",6766:"chunk-web-stories-template-19-metaData",6841:"chunk-web-stories-template-58",6852:"chunk-web-stories-template-27",7098:"chunk-ffmpeg",7131:"chunk-web-stories-template-20",7314:"chunk-web-stories-template-25-metaData",7343:"chunk-web-stories-template-47",7346:"chunk-web-stories-template-7",7399:"chunk-web-stories-template-38",7441:"chunk-web-stories-template-48",7498:"chunk-colorthief",7502:"chunk-web-stories-template-23",7528:"chunk-web-stories-template-14-metaData",7586:"chunk-web-stories-template-40",7588:"chunk-web-stories-template-55-metaData",7611:"chunk-web-stories-textset-6",7685:"chunk-web-stories-template-59",7798:"chunk-web-stories-template-50-metaData",7799:"chunk-web-stories-template-3",7863:"chunk-web-stories-template-47-metaData",7952:"chunk-web-stories-template-3-metaData",8022:"chunk-web-stories-template-26-metaData",8189:"chunk-web-stories-template-56-metaData",8203:"chunk-web-stories-template-44",8257:"chunk-web-stories-template-22",8344:"chunk-web-stories-template-10",8422:"chunk-web-stories-template-41-metaData",8551:"chunk-web-stories-template-18",8624:"chunk-focus-visible",8768:"chunk-web-stories-template-11-metaData",8856:"chunk-web-stories-template-48-metaData",9027:"chunk-web-stories-textset-1",9074:"chunk-web-stories-template-7-metaData",9233:"chunk-web-stories-template-53",9288:"chunk-web-stories-template-55",9302:"chunk-web-stories-template-17-metaData",9375:"chunk-web-stories-template-57-metaData",9393:"chunk-web-stories-template-59-metaData",9557:"chunk-web-stories-template-13-metaData",9591:"chunk-web-stories-template-50",9603:"chunk-web-stories-template-17",9607:"chunk-web-stories-template-2",9700:"chunk-web-stories-template-11",9738:"chunk-web-stories-template-46-metaData",9811:"chunk-web-stories-template-21",9843:"chunk-web-stories-textset-5"}[e]+".js?v="+{8:"724e73b6a6ada1c5e993",69:"21aa74125b2c2959dcc4",274:"3248a26d8032fc3c2996",341:"f4de96a9e7c3da0b6bfc",354:"a63627310b563483ea8d",410:"4d787aaaa3ac9961e142",533:"db6a9fb17bd6e4c593b1",824:"bda7a8fe249c66933887",827:"ff30ebcba2e71d234321",884:"37b098e625b0acb65570",907:"a72298d061627bb136aa",1049:"f68cf72dec49ed88dad5",1066:"7d5893fd447d2974e731",1197:"dc4963196de24cc34e2d",1231:"5f65fbd17b04cadd8579",1340:"0163e452136bd78a3798",1380:"9b7d1195c96f011abaa8",1403:"e8910d0c4745d36bc620",1738:"6d6d001307d401121aa4",1789:"69bc181b523a630f4612",1813:"ebcf05cd6342aa3709fa",1847:"335c52ea30f415e73180",1858:"ae2c9467ed1340db1e71",1970:"b861a72edf60b4877372",2068:"2ebbc19089306941de4c",2167:"9e4c1f603d9708b88d4e",2191:"cda49dac3c08396b936c",2235:"d84277893fb411e10150",2246:"17dc58be3e3e998178f7",2319:"d2e43b72ec08cabb9d01",2338:"63a73e641562d12a9a05",2374:"e88065104b4a15054660",2392:"bfebab50e922d5529feb",2454:"51794f8a9befe6fdcadf",2476:"9ca39efe63b61bf374f4",2558:"ea4c0662d781b1f6e5c8",2563:"c522ce63e9edc6d926d8",2634:"d6c2ec7d21dd820c86a4",2761:"4f5554eae091ebcfcbcb",2776:"75310b75affed1669135",2830:"c54b31c5fb5106c11982",2880:"ce96f7d54113bfd2c684",2894:"45ee6e7ed8afa6ab1c70",3041:"059aea6ab8b1cbb72de7",3182:"a7117043b6229d5784eb",3194:"d5e684e6d7ee2b4a37d5",3245:"821efe0719895995116c",3289:"8898b3f0c5fbda1bf8ba",3304:"2dddf32329182e05f139",3441:"d24c093eb3080f9f28d2",3529:"95c537694bb114c30764",3710:"1dcbaad1f91495f00dfd",3772:"2c2cdfdb59d6bc2e2fce",3777:"6e3346d2527d596a1d23",3864:"33de65d47481d8fa1f24",3871:"d2536e2d5016dd166704",3969:"ddd4f82f474ac2f5b15e",4051:"3d65eabcdb9e0b11e39b",4142:"48dc90e5b6b5634f8453",4178:"071dd699139fa40675ea",4386:"863b95e12ba776b23577",4585:"384f6d295d9c3ecbfcb1",4874:"580dfce4f79275f4c8be",5016:"6253e057c420cf60b957",5040:"17f1067b8b5f5140d48e",5157:"2526ea899c83941b28f1",5312:"aec8a63fe95448793304",5372:"c9dbe02b11d55a909ee9",5397:"de7c0de569ff4472e6cd",5432:"9bfc2a756737e121af28",5535:"90bacbd3484ca6ecf5b5",5543:"ca2fd075bfb119ca42a1",5553:"de07939ccb72268caaa6",5570:"e9c8856f8b3fdfd007bd",5573:"cfe35d368315434f6da1",5575:"217892772b4338f0c52d",5748:"6dd8a8893981d8a8abd8",5835:"045edb9bedd01ed39596",6053:"1bc5a3c05eca9973f58b",6188:"19c7cb198d3d2150e6ab",6204:"86af7ddb9938e66c09d3",6271:"184ed83e2be6e544a75e",6305:"3f4402ace541ebc0ac40",6311:"73fbec456179679144b3",6353:"6e2db4e02f3136717c8e",6406:"be2f7382094a706a3b15",6428:"44d2c5934c1e757a0d53",6500:"8a1934679376676598e2",6517:"5b4e53bd794d8c368924",6539:"90709c69ae810f479cda",6592:"b0e73ee22d70b89a5806",6641:"8cab9cac3cf73afdd83b",6766:"364980d9bf2de9cd365c",6841:"901a7817b0a8996bc337",6852:"bd4cf79884b84715258d",7098:"0334546ead2c9f229c79",7131:"9ad98b27868b2a3b88cf",7314:"e93cebcb7555820b2377",7343:"d3b05422ff2be599aa06",7346:"33e86766872d56fe5534",7399:"77c922cd8e3d61e84a50",7441:"673b948fc244ba38dc83",7498:"102553457c57fc9372a5",7502:"b2f13219400b13aba08e",7528:"7de2805335446069960c",7586:"91ec00b76620029c2162",7588:"4b7e940a9d9b57855e9d",7611:"81400e29d51bd2fc7c11",7685:"6520fa02360e80bc38c0",7798:"07fe2790296969e2984a",7799:"f0baa46690a5d7a23c27",7863:"96700aa82a00d5173fed",7952:"c972620c40309bbd12a4",8022:"1cb77dc5608a3fdfd73a",8189:"d38169bc0481e9fb210d",8203:"baeee370415cd42e68cf",8257:"6b4a09cbfcd42ca7ce67",8344:"d36764e72e180c394bbe",8422:"c382dd1e11272126152e",8551:"0c7a981a828b5a51c7ab",8624:"1389926372b6c5df79e5",8768:"2b4b8e29fff25fa9cd55",8856:"6a92d53a3f5f9404a1f9",9027:"e9789b5638b1100471b9",9074:"3db406e8a7a844c47ef1",9233:"7f24434b855214fcdb05",9288:"e7de052436381a98e5d5",9302:"41a305dca048c015fa0f",9375:"9ea5293a44e9ab37f432",9393:"9b202bfb9161eb2c7a3c",9557:"27ff44fb5ae6588c9ee6",9591:"ada4ea16a71f67a7377b",9603:"61f03c7b9d2b27831c2e",9607:"29ada0759a4991dc9537",9700:"eaf83936760d751b4d93",9738:"2a4a47346751814ca46e",9811:"b32355356f914091e21f",9843:"e0cfbac3adbb66597a32"}[e]),__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},a="web-stories-wp:",__webpack_require__.l=(e,t,n,o)=>{if(r[e])r[e].push(t);else{var i,l;if(void 0!==n)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var d=s[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==a+n){i=d;break}}i||(l=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",a+n),i.src=e),r[e]=[t];var u=(t,n)=>{i.onerror=i.onload=null,clearTimeout(p);var a=r[e];if(delete r[e],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((e=>e(n))),t)return t(n)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),l&&document.head.appendChild(i)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="",(()=>{var e={9078:0};__webpack_require__.f.j=(t,n)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise(((n,a)=>r=e[t]=[n,a]));n.push(r[2]=a);var o=__webpack_require__.p+__webpack_require__.u(t),i=new Error;__webpack_require__.l(o,(n=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",i.name="ChunkLoadError",i.type=a,i.request=o,r[1](i)}}),"chunk-"+t,t)}},__webpack_require__.F.j=t=>{if(!__webpack_require__.o(e,t)||void 0===e[t]){e[t]=null;var n=document.createElement("link");__webpack_require__.nc&&n.setAttribute("nonce",__webpack_require__.nc),n.rel="prefetch",n.as="script",n.href=__webpack_require__.p+__webpack_require__.u(t),document.head.appendChild(n)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[o,i,l]=n,s=0;if(o.some((t=>0!==e[t]))){for(r in i)__webpack_require__.o(i,r)&&(__webpack_require__.m[r]=i[r]);if(l)var c=l(__webpack_require__)}for(t&&t(n);s<o.length;s++)a=o[s],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return __webpack_require__.O(c)},n=globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),__webpack_require__.O(0,[9078],(()=>{__webpack_require__.E(7498)}),5);var l=__webpack_require__.O(void 0,[6527,1344,815,1814],(()=>__webpack_require__(14013)));l=__webpack_require__.O(l)})();