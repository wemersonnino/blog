(()=>{"use strict";var e,t,a,r,o,n={52589:(e,t,a)=>{a.d(t,{default:()=>_});var r=a(67294),o=a(45697),n=a.n(o),s=a(69845),l=a(26300),i=a(40981),c=a(66044),d=a(66394),u=a(82302),p=a(8682),m=a(19683);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},f.apply(this,arguments)}const b=l.default.div.withConfig({displayName:"menu__MenuWrapper",componentId:"sc-1xfj06c-0"})((e=>{let{theme:t}=e;return(0,l.css)(["background-color:",";border-radius:",";border:1px solid ",";gap:6px;display:flex;"," *:last-child{margin-bottom:0;}"],(e=>{let{isSecondary:a}=e;return a?t.colors.bg.secondary:t.colors.bg.primary}),(e=>{let{isHorizontal:a}=e;return a?t.borders.radius.medium:t.borders.radius.small}),t.colors.border.disable,(e=>{let{isHorizontal:t,isIconMenu:a}=e;return t?(0,l.css)(["height:52px;padding:7px 10px;align-items:center;"]):(0,l.css)(["flex-direction:column;width:",";padding:",";max-width:","px;",";"],a?"40px":"auto",a?"4px 3px":"8px 0",300,!a&&(0,l.css)(["min-width:","px;"],200))}))}));function h(e,t){const a=Array.from(e.querySelectorAll(i.FOCUSABLE_SELECTORS.join(", ")));return t?a:a.filter((e=>!e.matches(`[role="menu"], [role="menu"] [role="menu"] *, .${m.CONTEXT_MENU_SKIP_ELEMENT}`)))}b.propTypes={isIconMenu:n().bool,isHorizontal:n().bool,isSecondary:n().bool};const g=(0,s.forwardRef)(((e,t)=>{let{children:a,disableControlledTabNavigation:o,isOpen:n,onFocus:l=c.noop,isSubMenu:m=!1,isSecondary:g=!1,parentMenuRef:_,onCloseSubMenu:E=c.noop,dismissOnEscape:S=!0,...y}=e;const{isRTL:T}=y,{focusedId:w,isIconMenu:v,isHorizontal:C,onDismiss:I,setFocusedId:A}=(0,p.default)((e=>{let{state:t,actions:a}=e;return{focusedId:t.focusedId,isIconMenu:t.isIconMenu,isHorizontal:t.isHorizontal,onDismiss:a.onDismiss,setFocusedId:a.setFocusedId}})),L=(0,d.default)((()=>{n&&!m&&I()})),O=(0,s.useRef)(null),k=(0,s.useCombinedRefs)(L,O,t),P=(0,s.useCallback)((e=>{l(e);const t=O.current.children||[],a=t.length&&![...t].some((t=>t.contains(e.target)));if(O.current===e.target&&a){const e=h(O.current);document.dispatchEvent(new KeyboardEvent("keydown",{key:"tab"})),e?.[0]?.focus()}}),[l]),N=(0,s.useCallback)((e=>{let t=e.findIndex((e=>e.id===w));return-1===t&&(t=e.findIndex((e=>e.id===document.activeElement.id))),t}),[w]),R=(0,s.useCallback)((e=>{const{key:t}=e;if("Escape"===t)return void I(e);const a=h(O.current,m);let r=N(a);-1===r&&a.length&&(A(a[0].id),r=0);const o=C?i.KEYS.LEFT:i.KEYS.UP;if([o,C?i.KEYS.RIGHT:i.KEYS.DOWN].includes(t)){let e=r+(o===t?-1:1);-1===e&&(e=a.length-1);const n=a[e%a.length];return n?.focus(),void A(n?.id||-1)}const n=C?i.KEYS.UP:T?i.KEYS.RIGHT:i.KEYS.LEFT;if(m&&n===t){_.current.querySelector('button[aria-expanded="true"]')?.focus(),E()}}),[m,N,C,T,I,A,_,E]);(0,s.useEffect)((()=>{if(n){const e=h(O.current);e.length&&(e?.[0]?.focus(),A(e?.[0]?.id))}}),[n,A]);const x=(0,s.useMemo)((()=>o?{key:[]}:{key:["tab"],shift:!0}),[o]);return(0,u.useKeyDownEffect)(O,{key:S?["esc","down","up","left","right"]:["down","up","left","right"]},R,[R,S]),(0,u.useKeyDownEffect)(O,x,I,[x,I]),r.createElement(b,f({ref:k,"data-testid":"context-menu-list",role:"menu",isIconMenu:v,isHorizontal:C,isSecondary:g,tabIndex:O.current?.contains(document.activeElement)?-1:0,onFocus:P},y),a)})),_=(n().node,n().func,n().bool,n().bool,n().func,n().bool,n().bool,n().bool,n().object,n().bool,g)},82302:(e,t,a)=>{a.d(t,{prettifyShortcut:()=>g,useKeyDownEffect:()=>u});a(67294);var r=a(42441),o=a.n(r),n=a(69845),s=a(8579);const l="__WEB_STORIES_MT__",i=["submit","button","checkbox","radio","image","file","range","reset","hidden"],c=["submit","button","checkbox","radio","image","file","reset"];(0,n.createRef)();function d(e,t,a,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const{keys:l}=(0,n.useContext)(s.default),i=(0,n.useBatchingCallback)(r,o||[]);(0,n.useEffect)((()=>{const r=void 0!==e?.current?e.current:e;if(!r)return;if(1!==r.nodeType&&9!==r.nodeType)throw new Error("only an element or a document node can be used");const o=m(l,t);if(1===o.key.length&&""===o.key[0])return;const n=p(r),s=f(r,o,i);return n.bind(o.key,s,a),()=>{n.unbind(o.key,a)}}),[i,l])}function u(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;d(e,t,"keydown",a,r)}function p(e){return e[l]||(e[l]=new(o())(e))}function m(e,t){const a="string"==typeof t||Array.isArray(t)?{key:t}:t,{key:r,shift:o=!1,repeat:n=!0,clickable:s=!0,editable:l=!1,dialog:i=!1,allowDefault:c=!1}=a,d=function(e,t){if(!t)return e;return e.concat(e.map((e=>`shift+${e}`)))}([].concat(r).map((t=>e[t]||t)).flat(),o);return{key:d,shift:o,clickable:s,repeat:n,editable:l,dialog:i,allowDefault:c}}function f(e,t,a){let{repeat:r,editable:o,clickable:n,dialog:s,allowDefault:l=!1}=t;return t=>{const{repeat:d,target:u}=t;if((r||!d)&&(o||!function(e){let{tagName:t,isContentEditable:a,type:r,readOnly:o}=e;if(!0===o)return!1;if(a||"TEXTAREA"===t)return!0;if("INPUT"===t)return!i.includes(r);return!1}(u))&&(n||!function(e){let{tagName:t,type:a}=e;if(["BUTTON","A"].includes(t))return!0;if("INPUT"===t)return c.includes(a);return!1}(u))&&(s||!function(e,t){if(1!==e.nodeType)return!1;const a=e.closest('dialog,[role="dialog"]');return a&&t!==a&&t.contains(a)}(u,e)))return a(t),l}}function b(){const{platform:e}=window.navigator;return e.includes("Mac")||["iPad","iPhone"].includes(e)}function h(e){const t=b();return{alt:t?"⌥":"Alt",ctrl:t?"^":"Ctrl",mod:t?"⌘":"Ctrl",cmd:"⌘",shift:t?"⇧":"Shift"}[e]||e}function g(e){const t=b()?"":"+";return e.toLowerCase().replace("alt",h("alt")).replace("ctrl",h("ctrl")).replace("mod",h("mod")).replace("cmd",h("cmd")).replace("shift",h("shift")).replace("left","←").replace("up","↑").replace("right","→").replace("down","↓").replace("delete","⌫").replace("enter","⏎").split("+").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(t)}},27856:(e,t,a)=>{a.d(t,{PLACEMENT:()=>o,PopupContainer:()=>s,RTL_PLACEMENT:()=>n});var r=a(26300);const o={TOP:"top",TOP_START:"top-start",TOP_END:"top-end",BOTTOM:"bottom",BOTTOM_START:"bottom-start",BOTTOM_END:"bottom-end",RIGHT:"right",RIGHT_START:"right-start",RIGHT_END:"right-end",LEFT:"left",LEFT_START:"left-start",LEFT_END:"left-end"},n={[o.TOP]:o.TOP,[o.TOP_START]:o.TOP_START,[o.TOP_END]:o.TOP_END,[o.BOTTOM]:o.BOTTOM,[o.BOTTOM_END]:o.BOTTOM_END,[o.BOTTOM_START]:o.BOTTOM_START,[o.RIGHT]:o.LEFT,[o.RIGHT_START]:o.LEFT_START,[o.RIGHT_END]:o.LEFT_END,[o.LEFT]:o.RIGHT,[o.LEFT_START]:o.RIGHT_START,[o.LEFT_END]:o.RIGHT_END},s=r.default.div.attrs((e=>{let{$offset:{x:t,y:a,width:r},fillWidth:o,transforms:n,zIndex:s,maxWidth:l}=e;const i={};return o&&(l?i.minWidth=`${r}px`:i.width=`${r}px`),l&&!i.width&&(i.maxWidth=`${l}px`),{style:{transform:`translate(${t}px, ${a}px) ${n}`,...i,zIndex:s}}})).withConfig({displayName:"constants__PopupContainer",componentId:"sc-1y4wru5-0"})(["/*! @noflip */ left:0px;top:0px;position:fixed;",";max-height:",";"],(e=>{let{noOverFlow:t}=e;return t?"":"overflow-y: auto;"}),(e=>{let{topOffset:t}=e;return`calc(100vh - ${t}px)`}))},99566:(e,t,a)=>{a.d(t,{DEFAULT_ARIA_CLEAR_LABEL:()=>s,DEFAULT_ARIA_INPUT_LABEL:()=>l,DEFAULT_PLACEHOLDER:()=>n,DEFAULT_POPUP_FILL_WIDTH:()=>o,Z_INDEX:()=>i});var r=a(36823);const o=276,n=(0,r.__)("Search","web-stories"),s=(0,r.__)("Clear Search","web-stories"),l=(0,r.__)("Search","web-stories"),i={CLEAR_BUTTON:5}},19722:(e,t,a)=>{a.d(t,{FOCUS_VISIBLE_SELECTOR:()=>o,overrideFocusOutlineStyles:()=>n});var r=a(26300);a.e(8624).then(a.t.bind(a,35202,23)).catch((()=>{}));const o="focus-visible",n=(0,r.css)([".js-focus-visible :focus:not(.","):not([data-focus-visible-added]),.js-focus-visible :focus-visible:not(.","):not([data-focus-visible-added]){outline:none;}"],o,o);(0,r.createGlobalStyle)(["",";"],n)},69845:(e,t,a)=>{a.d(t,{Fragment:()=>n.Fragment,StrictMode:()=>n.StrictMode,cloneElement:()=>n.cloneElement,createContext:()=>o.createContext,createElement:()=>n.createElement,createPortal:()=>s.createPortal,createRef:()=>n.createRef,forwardRef:()=>n.forwardRef,identity:()=>o.identity,memo:()=>n.memo,render:()=>s.render,useBatchingCallback:()=>l.default,useCallback:()=>n.useCallback,useCombinedRefs:()=>i.default,useContext:()=>o.useContext,useContextReact:()=>n.useContext,useContextSelector:()=>c.default,useDebouncedCallback:()=>r.useDebouncedCallback,useEffect:()=>n.useEffect,useFocusOut:()=>d.default,useLayoutEffect:()=>n.useLayoutEffect,useMemo:()=>n.useMemo,usePrevious:()=>u.default,useReducer:()=>n.useReducer,useRef:()=>n.useRef,useResizeEffect:()=>p.default,useState:()=>n.useState});var r=a(24697),o=(a(49349),a(35389)),n=a(67294),s=a(73935),l=a(12439),i=a(81967),c=a(14714),d=a(94547),u=a(2780),p=a(13039);a(97762);a(52583)},36382:(e,t,a)=>{a.d(t,{disableTracking:()=>s,enableTracking:()=>o.default,getTimeTracker:()=>m.default,initializeTracking:()=>r.default,trackClick:()=>i.default,trackError:()=>c.default,trackEvent:()=>d.default,trackScreenView:()=>p});var r=a(49388),o=a(57714),n=a(60946);const s=function(){n.config.trackingEnabled=!1};var l=a(49379),i=a(36864),c=a(68729),d=a(5532);var u=a(87438);const p=async function(e){if(!await(0,l.default)())return Promise.resolve();const t={screen_name:e};return(0,u.default)("screen_view",t)};var m=a(26962)},49014:(e,t,a)=>{var r={};a.r(r),a.d(r,{createStoryFromTemplate:()=>hl,duplicateStory:()=>gl,fetchStories:()=>ml,getAuthors:()=>_l,getProducts:()=>yl,getTaxonomies:()=>El,getTaxonomyTerms:()=>Sl,trashStory:()=>fl,updateStory:()=>bl});var o=a(67294);a.p=window.webStories.publicPath;var n=a(36823);for(const e of window?.webStories?.localeData||[])(0,n.setLocaleData)(e);a(92087);var s=a(7471),l=a(39095),i=a(17216),c=a(11443),d=a(59042),u=a(11756),p=a(90997),m=a(26300),f=a(14194),b=a(1745),h=a(69845);const g=(0,h.createContext)({api:{}});const _=function ConfigProvider(e){let{config:t,children:a}=e;return o.createElement(g.Provider,{value:t},a)};const E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.identity;return(0,h.useContextSelector)(g,e)};var S,y,T=a(36382);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},w.apply(this,arguments)}const SvgCompass=e=>{let{title:t,titleId:a,...r}=e;return o.createElement("svg",w({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":a},r),t?o.createElement("title",{id:a},t):null,S||(S=o.createElement("path",{d:"M12.5 3v3M22 12.5h-3M12.5 22v-3M3 12.5h3M12.5 22a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),y||(y=o.createElement("path",{d:"M15.851 8.492a.5.5 0 0 1 .657.657l-2.13 4.967a.5.5 0 0 1-.262.263L9.15 16.508a.5.5 0 0 1-.657-.657l2.13-4.967a.5.5 0 0 1 .262-.263l4.967-2.129Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},v=(0,o.memo)(SvgCompass);var C,I;function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},A.apply(this,arguments)}const SvgHomeWithHeart=e=>{let{title:t,titleId:a,...r}=e;return o.createElement("svg",A({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":a},r),t?o.createElement("title",{id:a},t):null,C||(C=o.createElement("path",{d:"M15.781 10.72a2.44 2.44 0 0 0-2.999-.367 2.493 2.493 0 0 0-.782.748 2.493 2.493 0 0 0-.782-.748 2.45 2.45 0 0 0-2.088-.21 2.47 2.47 0 0 0-1.443 1.375 2.476 2.476 0 0 0 .532 2.687L12 18l3.781-3.795a2.477 2.477 0 0 0 0-3.484Z",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),I||(I=o.createElement("path",{d:"m1 11 10.367-8.482a1 1 0 0 1 1.266 0L23 11M4 9v12a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V9",stroke:"currentColor",strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})))},L=(0,o.memo)(SvgHomeWithHeart);var O;function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},k.apply(this,arguments)}const SvgMenu=e=>{let{title:t,titleId:a,...r}=e;return o.createElement("svg",k({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":a},r),t?o.createElement("title",{id:a},t):null,O||(O=o.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z",fill:"currentColor"})))},P=(0,o.memo)(SvgMenu);var N;function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},R.apply(this,arguments)}const SvgMoreVertical=e=>{let{title:t,titleId:a,...r}=e;return o.createElement("svg",R({fill:"none",viewBox:"0 0 4 16",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":a},r),t?o.createElement("title",{id:a},t):null,N||(N=o.createElement("path",{d:"M2 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z",fill:"currentColor"})))},x=(0,o.memo)(SvgMoreVertical);var M=a(83057);const D="open-in-editor-action",B="rename-action",H="duplicate-action",U="delete-story-action",F="copy-story-link",G="open-story-link",Y=[{label:(0,n.__)("Open in editor","web-stories"),value:D,isEnabled:e=>Boolean(e?.capabilities?.hasEditAction)},{label:(0,n.__)("Open in new tab","web-stories"),value:G,isEnabled:e=>Boolean(e?.previewLink)},{label:(0,n.__)("Copy Story URL","web-stories"),value:F,isEnabled:e=>Boolean(e?.previewLink)},{label:(0,n.__)("Rename","web-stories"),value:B,separator:"top",isEnabled:e=>Boolean(e?.capabilities?.hasEditAction)},{label:(0,n.__)("Duplicate","web-stories"),value:H,isEnabled:e=>Boolean(e?.capabilities?.hasEditAction)},{label:(0,n.__)("Delete Story","web-stories"),value:U,separator:"top",isEnabled:e=>Boolean(e?.capabilities?.hasDeleteAction)}],j={ASC:"asc",DESC:"desc"},z={NAME:"title",DATE_CREATED:"date",LAST_MODIFIED:"modified",CREATED_BY:"story_author"},V={orderby:z,order:j},$={[z.NAME]:j.ASC,[z.DATE_CREATED]:j.DESC,[z.LAST_MODIFIED]:j.DESC,[z.CREATED_BY]:j.ASC},Z=[{label:(0,n.__)("Name","web-stories"),value:z.NAME},{label:(0,n.__)("Date Created","web-stories"),value:z.DATE_CREATED},{label:(0,n.__)("Last Modified","web-stories"),value:z.LAST_MODIFIED},{label:(0,n.__)("Created By","web-stories"),value:z.CREATED_BY}],q={DRAFT:"draft",FUTURE:"future",PENDING:"pending",PUBLISH:"publish",PRIVATE:"private"},W={ALL:Object.values(q).join(","),PUBLISHED_AND_FUTURE:[q.PUBLISH,q.FUTURE].join(","),...q},K={[W.PUBLISH]:(0,n.__)("Published","web-stories"),[W.PENDING]:(0,n.__)("Pending","web-stories"),[W.FUTURE]:(0,n.__)("Scheduled","web-stories"),[W.DRAFT]:(0,n.__)("Draft","web-stories"),[W.PRIVATE]:(0,n.__)("Private","web-stories")},X=[{label:(0,n.__)("All Stories","web-stories"),value:W.ALL,status:"all"},{label:(0,n.__)("Drafts","web-stories"),value:W.DRAFT,status:W.DRAFT},{label:(0,n.__)("Pending","web-stories"),value:W.PENDING,status:W.PENDING},{label:(0,n.__)("Published","web-stories"),value:W.PUBLISH,status:W.PUBLISH},{label:(0,n.__)("Scheduled","web-stories"),value:W.FUTURE,status:W.FUTURE},{label:(0,n.__)("Private","web-stories"),value:W.PRIVATE,status:W.PRIVATE}],J={[W.ALL]:e=>(0,M.default)(
/* translators: %d: number of stories in view */
(0,n._n)("Viewing <strong>%d</strong> story","Viewing all <strong>%d</strong> stories",e,"web-stories"),e),[W.DRAFT]:e=>(0,M.default)(
/* translators: %d: number of draft stories in view */
(0,n._n)("Viewing <strong>%d</strong> draft","Viewing <strong>%d</strong> drafts",e,"web-stories"),e),[W.PUBLISH]:e=>(0,M.default)(
/* translators: %d: number of stories */
(0,n._n)("Viewing <strong>%d</strong> published story","Viewing <strong>%d</strong> published stories",e,"web-stories"),e),[W.FUTURE]:e=>(0,M.default)(
/* translators: %d: number of stories */
(0,n._n)("Viewing <strong>%d</strong> scheduled story","Viewing <strong>%d</strong> scheduled stories",e,"web-stories"),e),[W.PENDING]:e=>(0,M.default)(
/* translators: %d: number of stories */
(0,n._n)("Viewing <strong>%d</strong> pending story","Viewing <strong>%d</strong> pending stories",e,"web-stories"),e),[W.PRIVATE]:e=>(0,M.default)(
/* translators: %d: number of stories */
(0,n._n)("Viewing <strong>%d</strong> private story","Viewing <strong>%d</strong> private stories",e,"web-stories"),e)},Q={filters:{status:W.ALL},sort:{orderby:z.LAST_MODIFIED,order:$[z.LAST_MODIFIED]}},ee="diy_crafts",te="movies_tv",ae="beauty_style",re="fitness_wellbeing",oe="food",ne="travel",se="music",le="sports",ie=((0,n._x)("DIY & Crafts","template vertical","web-stories"),(0,n._x)("Movies & TV","template vertical","web-stories"),(0,n._x)("Beauty & Style","template vertical","web-stories"),(0,n._x)("Fitness & Wellbeing","template vertical","web-stories"),(0,n._x)("Food","template vertical","web-stories"),(0,n._x)("Travel","template vertical","web-stories"),(0,n._x)("Music","template vertical","web-stories"),(0,n._x)("Sports","template vertical","web-stories"),"white"),ce="black",de="gray",ue="brown",pe="red",me="orange",fe="yellow",be="green",he="blue",ge="pink",_e="purple",Ee=((0,n._x)("White","color","web-stories"),(0,n._x)("Black","color","web-stories"),(0,n._x)("Gray","color","web-stories"),(0,n._x)("Brown","color","web-stories"),(0,n._x)("Red","color","web-stories"),(0,n._x)("Orange","color","web-stories"),(0,n._x)("Yellow","color","web-stories"),(0,n._x)("Green","color","web-stories"),(0,n._x)("Blue","color","web-stories"),(0,n._x)("Pink","color","web-stories"),(0,n._x)("Purple","color","web-stories"),{ALL:"template"}),Se={[Ee.ALL]:e=>(0,M.default)(
/* translators: %d: number of templates in view */
(0,n._n)("Viewing <strong>%d</strong> template","Viewing all <strong>%d</strong> templates",e,"web-stories"),e)},ye={POPULAR:"popular",RECENT:"recent"},Te={orderby:ye,order:{ASC:"asc",DESC:"desc"}},we={filters:{status:Ee.ALL},sort:{orderby:ye.POPULAR}},ve=[{label:(0,n.__)("Popular","web-stories"),value:ye.POPULAR},{label:(0,n.__)("Recent","web-stories"),value:ye.RECENT}],Ce={template:(0,n.__)("See details","web-stories")},Ie={MENU:"menu",PANEL:"panel",COLOR_PANEL:"color_panel"},Ae=[".jpg",".jpeg",".png",".gif"],Le=288,Oe=1098,ke="tablet",Pe="desktop",Ne="thumbnail",Re={[ke]:200,[Pe]:232,[Ne]:33},xe=24,Me=32,De=52,Be=5,He={DASHBOARD:"/",TEMPLATES_GALLERY:"/templates-gallery",TEMPLATE_DETAIL:"template-detail"},Ue={[He.DASHBOARD]:(0,n.__)("Dashboard","web-stories"),[He.TEMPLATES_GALLERY]:(0,n.__)("Explore Templates","web-stories"),[`${He.TEMPLATES_GALLERY}/${He.TEMPLATE_DETAIL}`]:(0,n.__)("Template Details","web-stories"),DEFAULT:(0,n.__)("Dashboard","web-stories")},Fe=[{value:He.DASHBOARD,label:Ue[He.DASHBOARD],Icon:L},{value:He.TEMPLATES_GALLERY,label:Ue[He.TEMPLATES_GALLERY],Icon:v}],Ge={GRID:"grid",LIST:"list"},Ye={[Ge.GRID]:(0,n.__)("Switch to List View","web-stories"),[Ge.LIST]:(0,n.__)("Switch to Grid View","web-stories")},je="DASHBOARD",ze="TEMPLATES_GALLERY",Ve={[je]:{...J},[ze]:{...Se}},$e=24,Ze=853,qe=640,We="creating_story_from_template",Ke="create_story_from_template_success",Xe="create_story_from_template_failure",Je="loading_stories",Qe="fetch_stories_success",et="fetch_stories_failure",tt="update_story",at="update_story_failure",rt="trash_story",ot="trash_story_failure",nt="duplicate_story",st="duplicate_story_failure",lt={error:{},isLoading:!1,stories:{},storiesOrderById:[],totalStoriesByStatus:{},totalPages:null};const it=function(e,t){switch(t.type){case Je:case We:return{...e,isLoading:t.payload};case Xe:case et:case at:case ot:case st:return{...e,error:{...t.payload,id:Date.now()}};case Ke:return{...e,error:{}};case tt:return{...e,error:{},stories:{...e.stories,[t.payload.id]:t.payload}};case rt:{const a=t.payload.storyStatus===W.DRAFT?W.DRAFT:W.PUBLISH;return{...e,error:{},storiesOrderById:e.storiesOrderById.filter((e=>e!==t.payload.id)),totalStoriesByStatus:{...e.totalStoriesByStatus,all:e.totalStoriesByStatus.all-1,[a]:e.totalStoriesByStatus[a]-1},stories:Object.keys(e.stories).reduce(((a,r)=>(parseInt(r)!==t.payload.id&&(a[r]=e.stories[r]),a)),{})}}case nt:return{...e,error:{},storiesOrderById:[t.payload.id,...e.storiesOrderById],totalStoriesByStatus:{...e.totalStoriesByStatus,all:e.totalStoriesByStatus.all+1,[t.payload.status]:e.totalStoriesByStatus[t.payload.status]+1},stories:{...e.stories,[t.payload.id]:t.payload}};case Qe:{const{fetchedStoryIds:a,totalStoriesByStatus:r,totalPages:o,page:n,stories:s}=t.payload,{storiesOrderById:l,stories:i}=e,c=1===n?a:[...l,...a],d=[...new Set(c)];return{...e,error:{},storiesOrderById:d,stories:{...i,...s},totalPages:o||1,totalStoriesByStatus:r,allPagesFetched:n>=o}}default:return e}},ct={LOAD_STORIES:{MESSAGE:(0,n.__)("Unable to load stories","web-stories")},UPDATE_STORY:{MESSAGE:(0,n.__)("Unable to update story","web-stories")},DELETE_STORY:{MESSAGE:(0,n.__)("Unable to delete story","web-stories")},CREATE_STORY_FROM_TEMPLATE:{MESSAGE:(0,n.__)("Unable to create story from template","web-stories")},DUPLICATE_STORY:{MESSAGE:(0,n.__)("Unable to duplicate story","web-stories")},LOAD_TEMPLATES:{DEFAULT_MESSAGE:(0,n.__)("Cannot connect to data source","web-stories"),MESSAGE:(0,n.__)("Unable to load templates","web-stories")},RENDER_PREVIEW:{MESSAGE:(0,n.__)("Unable to render preview","web-stories")},LOAD_TEMPLATE:{DEFAULT_MESSAGE:(0,n.__)("Could not load the template","web-stories")}},dt=()=>{const e=(0,h.useRef)(!0),t=(0,h.useMemo)((()=>new Map),[]),[a,r]=(0,h.useReducer)(it,lt),{apiCallbacks:o}=E(),n=(0,h.useRef)(!1);(0,h.useEffect)((()=>(n.current=!0,()=>{n.current=!1})),[]);const s=(0,h.useCallback)((async a=>{r({type:Je,payload:!0});const s=(0,T.getTimeTracker)("load_stories");try{const{stories:l,fetchedStoryIds:i,totalPages:c,totalStoriesByStatus:d}=await o.fetchStories(a);if(!n.current)return;e.current&&t.forEach((e=>{e(d)})),e.current=!1,r({type:Qe,payload:{stories:l,totalPages:c,totalStoriesByStatus:d,fetchedStoryIds:i,page:a.page}})}catch(e){r({type:et,payload:{message:ct.LOAD_STORIES.MESSAGE,code:e.code}})}finally{r({type:Je,payload:!1}),s()}}),[o,t]),l=(0,h.useCallback)((async e=>{const t=(0,T.getTimeTracker)("load_update_story");try{const a=await o.updateStory(e);r({type:tt,payload:a})}catch(e){r({type:at,payload:{message:ct.UPDATE_STORY.MESSAGE,code:e.code}})}finally{t()}}),[o]),i=(0,h.useCallback)((async e=>{const t=(0,T.getTimeTracker)("load_trash_story");try{await o.trashStory(e.id),r({type:rt,payload:{id:e.id,storyStatus:e.status}})}catch(e){r({type:ot,payload:{message:ct.DELETE_STORY.MESSAGE,code:e.code}})}finally{t()}}),[o]),c=(0,h.useCallback)((async e=>{r({type:We,payload:!0});try{const t=await o.createStoryFromTemplate(e);r({type:Ke}),window.location=t.editLink}catch(e){r({type:Xe,payload:{message:ct.CREATE_STORY_FROM_TEMPLATE.MESSAGE,code:e.code}})}finally{r({type:We,payload:!1})}}),[o]);return{stories:a,api:{duplicateStory:(0,h.useCallback)((async e=>{const t=(0,T.getTimeTracker)("load_duplicate_story");try{const a=await o.duplicateStory(e);r({type:nt,payload:a})}catch(e){r({type:st,payload:{message:ct.DUPLICATE_STORY.MESSAGE,code:e.code}})}finally{t()}}),[o]),fetchStories:s,createStoryFromTemplate:c,trashStory:i,updateStory:l,addInitialFetchListener:(0,h.useCallback)((e=>{const a=Symbol();return t.set(a,e),()=>{t.delete(a)}}),[t])}}};var ut=a(17445),pt=a(70722),mt=a(40877),ft=(a(60857),a(51085)),bt=a(7694),ht=a(55965),gt=a(6140),_t=a(59452);const Et=function(e){if(!e)return"";const t=(0,pt.toDate)(e);if((0,ft.default)(t)){const{locale:e}=(0,gt.default)();return(0,bt.default)(t,{includeSeconds:!1,addSuffix:!0,locale:e})}return(0,ht.default)(t)?(0,n.__)("yesterday","web-stories"):(0,_t.default)(e)};const St=function(e){return(0,pt.toDate)(e,{timeZone:"+0000"})};const yt=(e,t)=>e.reduce(((e,a)=>a[t]?(e[a[t]],e[a[t]]=a,e):e),{}),Tt="loading_templates",wt="fetch_templates_success",vt="fetch_templates_failure",Ct="placeholder",It={allPagesFetched:!1,error:{},isLoading:!1,templates:{},templatesByTag:{},templatesOrderById:[],totalTemplates:null,totalPages:null};const At=function(e,t){switch(t.type){case Tt:return{...e,isLoading:t.payload};case vt:return{...e,error:{...t.payload,id:Date.now()}};case wt:{const a=t.payload.templates.map((e=>{let{id:t}=e;return t})),r=1===t.payload.page?a:[...e.templatesOrderById,...a],o=[...new Set(r)];return{...e,error:{},templatesOrderById:o,templates:{...e.templates,...yt(t.payload.templates,"id")},isLoading:!1,totalPages:t.payload.totalPages,totalTemplates:t.payload.totalTemplates,allPagesFetched:t.payload.page>=t.payload.totalPages,templatesByTag:t.payload.templatesByTag}}case Ct:return It;default:return e}};const Lt=()=>{const[e,t]=(0,h.useReducer)(At,It),{cdnURL:r}=E(),o=(0,h.useCallback)((async()=>{t({type:Tt,payload:!0});const e={},{getAllTemplates:o}=await Promise.all([a.e(1814),a.e(4991)]).then(a.bind(a,68104)),n=(await o({cdnURL:r})).map((t=>{const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{id:a,slug:r,modified:o,creationDate:n}=e;return a&&r?{...e,id:a,slug:r,creationDate:(0,pt.toDate)(n,(0,gt.default)()),status:"template",modified:St(o),isLocal:t}:null}(t);return a.tags.forEach((t=>{e[t]?e[t].push(a.id):e[t]=[a.id]})),a})).sort(((e,t)=>(0,ut.default)(e.creationDate,t.creationDate)));t({type:wt,payload:{page:1,templates:n,totalPages:1,totalTemplates:n.length,templatesByTag:e}})}),[r]),n=(0,h.useCallback)((t=>e.templates[t]?Promise.resolve(e.templates[t]):Promise.reject(new Error)),[e]);return{templates:e,api:{fetchExternalTemplates:o,fetchExternalTemplateById:n}}};const Ot=function(){const{apiCallbacks:{getAuthors:e}}=E();return{api:{getAuthors:e}}};const kt=function(){const{apiCallbacks:{getTaxonomies:e,getTaxonomyTerms:t}}=E();return{api:{getTaxonomies:e,getTaxonomyTerms:t}}},Pt=(0,h.createContext)({state:{},actions:{}});function ApiProvider(e){let{children:t}=e;const{api:a}=Ot(),{api:r}=kt(),{templates:n,api:s}=Lt(),{stories:l,api:i}=dt(),c={state:{stories:l,templates:n},actions:{storyApi:i,templateApi:s,usersApi:a,taxonomyApi:r}};return o.createElement(Pt.Provider,{value:c},t)}var Nt=a(21193),Rt=a(45697),xt=a.n(Rt),Mt=a(46324),Dt=a(22049);const Bt=(0,m.css)(["picture{display:block;& > img{display:block;height:100%;width:100%;object-fit:fill;border-radius:",";border:",";}}"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return`1px solid ${t.colors.border.defaultNormal}`})),Ht=m.default.div.withConfig({displayName:"cardGallery__GalleryContainer",componentId:"sc-8jnrkn-0"})(["flex:1;display:flex;justify-content:space-between;align-items:start;"]),Ut=m.default.div.withConfig({displayName:"cardGallery__DisplayPage",componentId:"sc-8jnrkn-1"})(["overflow:hidden;width:38.6%;margin-left:2.1%;"," @media screen and (min-width:1600px){width:45.2%;margin-left:2.4%;}"],Bt);Ut.propTypes={$isThreeRows:xt().bool};const Ft=m.default.div.withConfig({displayName:"cardGallery__Thumbnails",componentId:"sc-8jnrkn-2"})(["position:relative;display:grid;width:52.3%;grid-template-columns:repeat(3,1fr);column-gap:8px;row-gap:16px;margin-right:16px;@media screen and (min-width:1600px){width:59.3%;grid-template-columns:repeat(4,1fr);}"]),Gt=(0,m.default)(Mt.Button).attrs({type:Dt.BUTTON_TYPES.PLAIN}).withConfig({displayName:"cardGallery__ThumbnailButton",componentId:"sc-8jnrkn-3"})(["display:block;height:100%;padding:0;border:none;background-color:transparent;position:relative;&:active{background-color:transparent;}"," ",";"],(e=>{let{$isSelected:t,theme:a}=e;return t&&(0,m.css)(["&:after{content:'';position:absolute;box-sizing:border-box;width:100%;height:100%;display:block;top:0;right:0;border-radius:",";border:4px solid ",";}"],a.borders.radius.medium,a.colors.interactiveBg.active)}),Bt);function Yt(e){return(0,M.default)(
/* translators: %s: page number. */
(0,n.__)("Poster of template page %s","web-stories"),e)}Gt.propTypes={$isSelected:xt().bool};const jt=function CardGallery(e){let{galleryPosters:t,isRTL:a,galleryLabel:r}=e;const[s,l]=(0,h.useState)(0),[i,c]=(0,h.useState)(),d=(0,h.useRef)(),u=(0,h.useRef)(),p=(0,h.useRef)({}),m=(0,h.useCallback)((e=>{l(e),c(e)}),[]),f=(0,h.useCallback)((e=>{c(e)}),[]);(0,h.useEffect)((()=>{t&&(l(0),c())}),[t]),(0,Nt.default)({containerRef:d,gridRef:u,itemRefs:p,isRTL:a,currentItemId:i,items:t});const b=(0,h.useMemo)((()=>t.map(((e,t)=>{const a=`gallery_item_${t}`,r=t+1,l=i?i===t:s===t;return o.createElement("div",{key:a,ref:e=>{p.current[t]=e},onFocus:()=>f(t)},o.createElement(Gt,{$isSelected:s===t,tabIndex:l?0:-1,onClick:()=>m(t),"aria-label":s===t?(0,M.default)(
/* translators: %s: page number. */
(0,n.__)("Page %s (current page)","web-stories"),r):(0,M.default)(
/* translators: %s: page number. */
(0,n.__)("Page %s","web-stories"),r)},o.createElement("picture",null,o.createElement("source",{srcSet:e.webp,type:"image/webp"}),o.createElement("source",{srcSet:e.png,type:"image/png"}),o.createElement("img",{src:e.png,decoding:"async",alt:Yt(r),width:qe,height:Ze}))))}))),[t,s,i,f,m]);return o.createElement(Ht,{ref:d},o.createElement(Ft,{ref:u,role:"group","aria-label":r,"data-testid":"mini-cards-container"},b),o.createElement(Ut,null,t[s]&&o.createElement("picture",null,o.createElement("source",{srcSet:t[s].webp,type:"image/webp"}),o.createElement("source",{srcSet:t[s].png,type:"image/png"}),o.createElement("img",{src:t[s].png,decoding:"async",alt:(0,M.default)(
/* translators: %s: active preview page number */
(0,n.__)("Active Page Preview - Page %s","web-stories"),s+1),width:qe,height:Ze}))))};var zt=a(19722),Vt=a(33625);const $t=xt().oneOf([...Object.values(W),...Object.values(Ee)]),Zt=xt().shape({id:xt().number.isRequired,status:$t,title:xt().string.isRequired,modified:xt().oneOfType([xt().object,xt().string]),author:xt().object,capabilities:xt().shape({hasDeleteAction:xt().bool,hasEditAction:xt().bool})}),qt=xt().shape({id:xt().number.isRequired,status:$t,title:xt().string.isRequired,pages:xt().array,modified:xt().object,colors:xt().arrayOf(xt().shape({label:xt().string.isRequired,color:xt().string.isRequired})),description:xt().string,tags:xt().arrayOf(xt().string),createdBy:xt().string,postersByPage:xt().arrayOf(xt().shape({webp:xt().string,png:xt().string,type:xt().string}))}),Wt=(xt().shape({id:xt().number.isRequired,name:xt().string.isRequired,slug:xt().string.isRequired,count:xt().number.isRequired}),xt().shape({id:xt().number.isRequired,parent:xt().number.isRequired,name:xt().string.isRequired,slug:xt().string.isRequired,count:xt().number.isRequired}),xt().shape({id:xt().number.isRequired,name:xt().string.isRequired,slug:xt().string.isRequired,avatarUrls:xt().object}),xt().arrayOf(Zt),xt().arrayOf(qt).isRequired,xt().shape({duplicateStory:xt().func,trashStory:xt().func,updateStory:xt().func}),xt().shape({createStoryFromTemplate:xt().func,handleDetailsToggle:xt().func,switchToTemplateByOffset:xt().func}),xt().shape({all:xt().number,draft:xt().number,publish:xt().number}),xt().shape({width:xt().number,height:xt().number})),Kt=(xt().shape({handleMenuToggle:xt().func.isRequired,contextMenuId:xt().number.isRequired,menuItems:xt().arrayOf(xt().shape({label:xt().string,value:xt().oneOfType([xt().string,xt().bool]),url:xt().string,isEnabled:xt().func,action:xt().func}))}),xt().shape({handleOnRenameStory:xt().func,id:xt().number,handleCancelRename:xt().func}),m.default.div.withConfig({displayName:"cardGrid__DashboardGrid",componentId:"sc-1kbl74q-0"})(["display:grid;width:100%;grid-column-gap:","px;grid-row-gap:","px;grid-template-columns:",";grid-template-rows:",";scroll-margin-top:30vh;",";"],xe,Me,(e=>{let{columnWidth:t}=e;return`\n    repeat(auto-fill, ${t}px)`}),(e=>{let{columnHeight:t}=e;return`minmax(${t}px, auto)`}),(e=>{let{theme:t}=e;return(0,m.css)(["&.","{",";}"],zt.FOCUS_VISIBLE_SELECTOR,Vt.focusCSS(t.colors.border.focus))})));Kt.propTypes={columnHeight:xt().number,columnWidth:xt().number};const Xt=(0,h.forwardRef)((function CardGrid(e,t){let{ariaLabel:a,children:r,pageSize:n}=e;return o.createElement(Kt,{ref:t,role:"list","data-testid":"dashboard-grid-list",tabIndex:0,"aria-label":a,columnWidth:n.width,columnHeight:n.height},r)}));var Jt=a(98448),Qt=a(67745),ea=a(86376),ta=a(8682),aa=a(43688);function ra(){return ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ra.apply(this,arguments)}const oa=(0,m.default)(ea.Link).withConfig({displayName:"link__StyledLink",componentId:"sc-1q07ax2-0"})(["",";background-color:transparent;text-decoration:none;:active,:hover,:focus,:active *,:hover *,:focus *{color:"," !important;}:hover{background-color:",";}:active{background-color:",";}"],aa.menuItemStyles,(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryHover}),(e=>{let{theme:t}=e;return t.colors.interactiveBg.secondaryPress}));const na=function Link(e){let{id:t,onBlur:a,onClick:r,onFocus:n,openNewTab:s,...l}=e;const{focusedId:i,onDismiss:c,onMenuItemBlur:d,onMenuItemFocus:u}=(0,ta.default)((e=>{let{state:t,actions:a}=e;return{focusedId:t.focusedId,onDismiss:a.onDismiss,onMenuItemBlur:a.onMenuItemBlur,onMenuItemFocus:a.onMenuItemFocus}})),p=(0,h.useMemo)(Qt.default,[]),m=t||p,f=s?{target:"_blank",rel:"noreferrer"}:{};return o.createElement(oa,ra({id:m,tabIndex:i===m?0:-1,role:"menuitem",onBlur:e=>{d(),a?.(e)},onClick:e=>{r?.(e),c(e)},onFocus:e=>{u(m),n?.(e)}},f,l))};var sa=a(51537),la=a(77568);const ia=m.default.button.withConfig({displayName:"storyMenu__MoreVerticalButton",componentId:"sc-1vaaobv-0"})(["display:flex;background:transparent;padding:0 8px;opacity:",";transition:opacity ease-in-out 300ms;cursor:pointer;color:",";& > svg{width:4px;max-height:100%;}border:0;border-radius:",";",";"],(e=>{let{menuOpen:t,isVisible:a}=e;return t||a?1:0}),(e=>{let{theme:t,$isInverted:a}=e;return a?t.colors.inverted.fg.primary:t.colors.interactiveFg.brandNormal}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t,$isInverted:a}=e;return Vt.focusableOutlineCSS(!1,!!a&&t.colors.standard.black)}));ia.propTypes={menuOpen:xt().bool};const ca=m.default.div.withConfig({displayName:"storyMenu__MenuContainer",componentId:"sc-1vaaobv-1"})(["position:relative;align-self:",";text-align:right;"," & > div{margin:0;}"],(e=>{let{verticalAlign:t="flex-start"}=e;return t}),(e=>{let{$menuStyleOverrides:t}=e;return t}));function StoryMenu(e){let{contextMenuId:t,onMoreButtonSelected:a,storyId:r,verticalAlign:s,menuItems:l,itemActive:i,tabIndex:c,menuStyleOverrides:d,menuLabel:u,isInverted:p}=e;const m=t===r,f=(0,h.useCallback)((e=>a(e,-1)),[a]);return o.createElement(ca,{verticalAlign:s,"data-testid":`story-context-menu-${r}`,$menuStyleOverrides:d},o.createElement(ia,{"data-testid":`story-context-button-${r}`,tabIndex:c,menuOpen:m,isVisible:i,"aria-label":u||(0,n.__)("More Options","web-stories"),onClick:e=>a(e,m?-1:r),className:"context-menu-button",$isInverted:p},o.createElement(x,null)),o.createElement(Jt.default,{animate:!0,isOpen:m,onDismiss:f},l.map((e=>{let{label:t,separator:a,...r}=e;const n=r.href?na:sa.default;return o.createElement(h.Fragment,{key:t},"top"===a&&o.createElement(la.default,null),o.createElement(n,r,t),"bottom"===a&&o.createElement(la.default,null))}))))}ca.propTypes={verticalAlign:xt().oneOf(["center","flex-start","flex-end"])};const da=m.default.div.attrs({role:"listitem"}).withConfig({displayName:"cardGridItem__CardGridItem",componentId:"sc-w3d579-0"})(["margin:0;width:100%;display:grid;grid-template-columns:100%;grid-template-rows:",";","{margin:12px 0;}&:hover ",",&:active ",",&:focus-within ","{opacity:1;}&:hover .card_buttons,&:active .card_buttons,&:focus-within .card_buttons{opacity:1;}"],(e=>{let{$posterHeight:t}=e;return`${t}px auto`}),ia,ia,ia,ia);da.propTypes={$posterHeight:xt().number};const ua=da;var pa=a(80448);xt().shape({label:xt().string.isRequired,color:xt().string.isRequired});const ma=m.default.ul.withConfig({displayName:"colorList__ColorContainer",componentId:"sc-uphoth-0"})(["display:flex;margin:0;"]),fa=m.default.li.withConfig({displayName:"colorList__Color",componentId:"sc-uphoth-1"})(["",""],(e=>{let{theme:t,$backgroundColor:a,color:r,size:o,spacing:n}=e;return`\n    width: ${o}px;\n    height: ${o}px;\n    border-radius: 50%;\n    margin-bottom: 0;\n    background-color: rgb(${a});\n    ${(e=>({"#fff":`border: solid 1px ${e}`,"#ffffff":`border: solid 1px ${e}`,white:`border: solid 1px ${e}`,"#fef9f1":`border: solid 1px ${e}`,"#fff8f2":`border: solid 1px ${e}`,"#f9f9f9":`border: solid 1px ${e}`,"#fcfcfc":`border: solid 1px ${e}`}))(t.colors.border.defaultNormal)[r]||""};\n\n    & + & {\n      margin-left: ${n||10}px;\n    }\n  `}));const ba=function ColorList(e){let{colors:t,size:a,spacing:r,...n}=e;return o.createElement(ma,n,t.map((e=>{let{label:t,color:n}=e;const{r:s,g:l,b:i}=(0,pa.default)(n).color,c=`${s}, ${l}, ${i}`;return o.createElement(fa,{key:n,size:a,spacing:r,color:n,$backgroundColor:c,title:t,ariaLabel:t,"data-testid":"detail-template-color"})})))},ha=m.default.div.withConfig({displayName:"contentGutter__StandardViewContentGutter",componentId:"sc-17seiz9-0"})(["margin:0 ","px;"],De);var ga=a(70250);function _a(){return _a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_a.apply(this,arguments)}const Ea=e=>{let{onClose:t,onSecondary:a,onPrimary:r,primaryText:n,secondaryText:s,primaryRest:i,secondaryRest:c,actions:d,children:u,...p}=e;const f=(0,h.useMemo)((()=>n&&o.createElement(Mt.Button,_a({type:Dt.BUTTON_TYPES.PRIMARY,size:Dt.BUTTON_SIZES.SMALL,onClick:()=>r?.()},i),n)),[n,i,r]),b=(0,h.useMemo)((()=>s&&o.createElement(Mt.Button,_a({type:Dt.BUTTON_TYPES.TERTIARY,size:Dt.BUTTON_SIZES.SMALL,onClick:()=>a?.()||t()},c),s)),[s,c,a,t]);return o.createElement(m.ThemeProvider,{theme:l.theme},o.createElement(ga.Dialog,_a({onClose:t},p,{actions:d||o.createElement(o.Fragment,null,b,f)}),u))};var Sa=a(22437),ya=a(67480);const Ta=(0,m.default)(Mt.Button).withConfig({displayName:"fileUpload__StyledButton",componentId:"sc-1egk7ci-0"})([":focus-within{","}"],(e=>{let{theme:t}=e;return Vt.focusCSS(t.colors.border.focus)})),wa=m.default.input.withConfig({displayName:"fileUpload__Input",componentId:"sc-1egk7ci-1"})(Sa.visuallyHidden),va=m.default.div.withConfig({displayName:"fileUpload__UploadFormArea",componentId:"sc-1egk7ci-2"})(["display:flex;flex-direction:column;align-items:center;position:relative;justify-content:flex-end;width:100%;min-height:153px;padding:40px 0;border-radius:4px;border:1px dashed ",";transition:border-color 300ms ease-in;"],(e=>{let{isDragging:t,theme:a}=e;return t?a.colors.border.focus:a.colors.border.defaultNormal})),Ca=(0,m.default)(ya.Text).withConfig({displayName:"fileUpload__UploadHelperText",componentId:"sc-1egk7ci-3"})(["margin:0 auto 16px;padding:0 20%;text-align:center;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),Ia=m.default.div.withConfig({displayName:"fileUpload__LoadingIndicator",componentId:"sc-1egk7ci-4"})(["display:flex;align-items:center;justify-content:center;position:absolute;top:0;width:100%;height:100%;background-color:",";opacity:",";z-index:",";pointer-events:none;transition:opacity ease-in-out 300ms;p{font-style:italic;}"],(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{isLoading:t}=e;return t?.6:0}),(e=>{let{isLoading:t}=e;return t?"100":"0"}));function Aa(e){e.preventDefault(),e.stopPropagation()}const La=e=>{let{id:t,label:a,onSubmit:r,isLoading:s,isMultiple:l,ariaLabel:i,instructionalText:c=(0,n.__)("You can also drag your file here","web-stories"),acceptableFormats:d=Ae}=e;const u=(0,h.useRef)(null),p=(0,h.useRef)(null),[m,f]=(0,h.useState)(!1),b=(0,h.useCallback)((e=>{r(Object.values(e))}),[r]),g=(0,h.useCallback)((e=>{Aa(e),b(e.target.files),p.current.value=null}),[b]),_=(0,h.useCallback)((e=>{Aa(e);const t=e.dataTransfer.files;t&&b(t),f(!1)}),[b]),E=(0,h.useCallback)((e=>{Aa(e),f((e=>!e)),m&&e.dataTransfer.clearData()}),[m]);return(0,h.useEffect)((()=>{if(!p?.current)return()=>{};const e=p.current;return e.addEventListener("change",g),()=>{e.removeEventListener("change",g)}}),[g]),o.createElement(va,{ref:u,isDragging:m,onDrop:_,onDragEnter:E,onDragLeave:E,onDragOver:Aa,"data-testid":"file-upload-drop-area"},o.createElement(Ia,{isLoading:s},o.createElement("p",null,(0,n.__)("Loading…","web-stories"))),o.createElement(Ca,null,c),o.createElement(Ta,{forwardedAs:"label",htmlFor:t,"aria-label":i,type:Dt.BUTTON_TYPES.PRIMARY,size:Dt.BUTTON_SIZES.SMALL},a,o.createElement(wa,{ref:p,type:"file",id:t,"data-testid":"upload-file-input",accept:d.join(","),multiple:l,disabled:s,"aria-live":"polite","aria-busy":s})))};var Oa=a(35199),ka=a(91778),Pa=a(6215);function Na(){return Na=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Na.apply(this,arguments)}const Ra=m.default.div.withConfig({displayName:"input__Container",componentId:"sc-1dusq6m-0"})(["position:relative;display:inline-block;width:100%;min-width:40px;"]),xa=(0,m.default)(ya.Text).withConfig({displayName:"input__Label",componentId:"sc-1dusq6m-1"})(["margin-bottom:12px;display:inline-block;"]),Ma=(0,m.default)(ya.Text).withConfig({displayName:"input__Hint",componentId:"sc-1dusq6m-2"})(["display:inline-block;margin-top:12px;color:",";"],(e=>{let{hasError:t,theme:a}=e;return a.colors.fg[t?"negative":"tertiary"]})),Da=(0,m.default)(ya.Text).withConfig({displayName:"input__Suffix",componentId:"sc-1dusq6m-3"})(["background:transparent;color:",";white-space:nowrap;svg{width:32px;height:32px;margin:2px -10px;display:block;}"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),Ba=m.default.div.withConfig({displayName:"input__InputContainer",componentId:"sc-1dusq6m-4"})((e=>{let{focused:t,hasError:a,theme:r,styleOverride:o}=e;return(0,m.css)(["display:flex;align-items:center;justify-content:space-between;height:36px;padding:4px 12px;border:1px solid ",";border-radius:",";overflow:hidden;",";",";:focus-within{",";}",";"],r.colors.border[a?"negativeNormal":"defaultNormal"],r.borders.radius.small,t&&!a&&(0,m.css)(["border-color:",";"],r.colors.border.defaultActive),t&&(0,m.css)(["","{color:",";}"],Da,r.colors.fg.primary),(0,Vt.focusCSS)(r.colors.border.focus),o)})),Ha=m.default.input.withConfig({displayName:"input__BaseInput",componentId:"sc-1dusq6m-5"})((e=>{let{hasSuffix:t,theme:a}=e;return(0,m.css)(["height:100%;width:100%;padding:0;"," background-color:inherit;border:none;outline:none;box-shadow:none;color:",";",";::placeholder{color:",";}:disabled{color:",";border-color:",";& ~ ","{color:",";}}:focus{box-shadow:none;}:active:enabled{color:",";}"],t&&(0,m.css)(["padding-right:8px;"]),a.colors.fg.primary,Oa.expandPresetStyles({preset:{...a.typography.presets.paragraph[ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL]},theme:a}),a.colors.fg.tertiary,a.colors.fg.disable,a.colors.border.disable,Da,a.colors.fg.disable,a.colors.fg.primary)})),Ua=(0,h.forwardRef)(((e,t)=>{let{inputClassName:a,className:r,disabled:n,hasError:s,hint:l,id:i,label:c,onBlur:d,onFocus:u,hasFocus:p=!1,suffix:m,unit:f="",value:b="",isIndeterminate:g=!1,containerStyleOverride:_="",...E}=e;const S=(0,h.useMemo)((()=>i||(0,Qt.default)()),[i]),[y,T]=(0,h.useState)(p),[w,v]=(0,h.useState)(!1);let C=b;f&&b.length&&(C=`${b}${y?"":`${f}`}`),g&&(C="");const I=Boolean(m);return o.createElement(Ra,{className:r},c&&o.createElement(xa,{htmlFor:S,forwardedAs:"label",disabled:n},c),o.createElement(Ba,{focused:y,hasError:s,styleOverride:_},o.createElement(Ha,Na({id:S,disabled:n,ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),e&&y&&!w&&(e.select(),v(!0))},onFocus:e=>{u?.(e),T(!0),v(!1)},onBlur:e=>{d?.(e),T(!1)},value:C,hasSuffix:I,className:a},E)),I&&o.createElement(Da,{hasLabel:Boolean(c),forwardedAs:"span",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:()=>T(!0)},m)),l&&o.createElement(Ma,{hasError:s},l))}));Pa.default,xt().string,xt().bool,xt().bool,xt().oneOfType([xt().string,xt().node]),xt().string,Pa.default,xt().func,xt().func.isRequired,xt().func,xt().node,xt().string,xt().string,xt().bool,xt().oneOfType([xt().object,xt().array]);Ua.displayName="Input";const Fa=(0,m.default)(Ua).withConfig({displayName:"inlineInputForm__StyledInput",componentId:"sc-21xnmy-0"})(["div{height:auto;}",""],(e=>{let{$isInverted:t,theme:a}=e;return t&&(0,m.css)(["input{color:",";}"],a.colors.inverted.fg.primary)})),Ga=e=>{let{noAutoFocus:t,error:a,id:r,isInverted:n,label:s,onEditCancel:l,onEditComplete:i,placeholder:c,value:d}=e;const u=(0,h.useRef)(null),[p,m]=(0,h.useState)(d);(0,h.useEffect)((()=>{m(d)}),[d]),(0,h.useFocusOut)(u,(()=>{l()}),[l]),(0,h.useEffect)((()=>{!t&&u.current&&u.current.querySelector("input")?.focus()}),[t]);const f=(0,h.useCallback)((e=>{let{target:t}=e;m(t.value)}),[m]),b=(0,h.useCallback)((e=>{let{nativeEvent:t}=e;13===t.keyCode?i(p):27===t.keyCode&&l()}),[p,i,l]);return o.createElement("div",{ref:u},o.createElement(Fa,{"aria-label":s,id:`${r}`,"data-testid":"inline-input-form",value:p,onKeyDown:b,onChange:f,placeholder:c,hasError:Boolean(a),hint:a,$isInverted:n}))},Ya=(0,h.createContext)(null),ja=e=>{let{children:t}=e;const a=(0,h.useRef)(),r=(0,h.useRef)(null);(0,h.useEffect)((()=>{a.current=document?.getElementById("web-stories-dashboard")?.querySelector(["button","a"])}),[]);const n=(0,h.useCallback)((()=>{document.documentElement?.scrollTo?.({top:0,behavior:"smooth"}),a.current?.focus()}),[]),s=(0,h.useMemo)((()=>({state:{scrollFrameRef:r},actions:{scrollToTop:n}})),[n]);return o.createElement(Ya.Provider,{value:s},t)},za=()=>{const e=(0,h.useContext)(Ya);if(!e)throw new Error("useLayoutContext() must be used within a <Layout.Provider />");return e},Va=m.default.div.withConfig({displayName:"scrollable__ScrollContent",componentId:"sc-17i1z8u-0"})([""]),$a=e=>{let{children:t}=e;const{state:{scrollFrameRef:a}}=za();return o.createElement(Va,{ref:a},t)},Za=m.default.div.withConfig({displayName:"fixed__FixedContent",componentId:"sc-735v4o-0"})(["position:absolute;top:0;right:0;bottom:0;left:0;z-index:",";overflow:hidden;pointer-events:none;& > *{pointer-events:auto;}"],Be),qa={Provider:ja,Scrollable:$a,Fixed:e=>{let{children:t}=e;return o.createElement(Za,null,t)}},Wa=m.default.div.withConfig({displayName:"pageStructureComponents__AppFrame",componentId:"sc-199ev3j-0"})(["width:100%;@media screen and (max-width:","px){width:","px;}"],Oe,Oe),Ka=m.default.div.withConfig({displayName:"pageStructureComponents__PageContent",componentId:"sc-199ev3j-1"})(["position:relative;padding-top:10px;width:",";left:",";@media screen and (max-width:","px){left:0;width:100%;}"],(e=>{let{fullWidth:t}=e;return t?"100%":"calc(100% - 288px)"}),(e=>{let{fullWidth:t}=e;return t?"0":"288px"}),Oe),Xa=m.default.nav.attrs({"data-testid":"dashboard-left-rail"}).withConfig({displayName:"pageStructureComponents__LeftRailContainer",componentId:"sc-199ev3j-2"})(["position:fixed;display:flex;justify-content:space-between;flex-direction:column;top:",";bottom:0;width:","px;background:",";z-index:",";transition:transform 0.25s ",",opacity 0.25s linear;@media screen and (max-width:","px){padding-left:0;opacity:",";visibility:",";transform:translateX(",");}"],(e=>{let{topOffset:t}=e;return`${t}px`}),Le,(e=>{let{theme:t}=e;return t.colors.bg.primary}),Be,ka.BEZIER.outCubic,Oe,(e=>{let{isOpen:t}=e;return t?1:0}),(e=>{let{isOpen:t}=e;return t?"visible":"hidden"}),(e=>{let{isOpen:t}=e;return t?"none":"-100%"})),Ja=m.default.div.withConfig({displayName:"pageStructureComponents__LoadingContainer",componentId:"sc-199ev3j-3"})(["display:flex;justify-content:center;align-items:center;min-height:550px;"]);var Qa,er,tr,ar;function rr(){return rr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},rr.apply(this,arguments)}const SvgLogoWithTypeCircleColor=e=>{let{title:t,titleId:a,...r}=e;return o.createElement("svg",rr({viewBox:"0 0 212 64",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":a},r),t?o.createElement("title",{id:a},t):null,Qa||(Qa=o.createElement("circle",{cx:32,cy:32,r:32,transform:"rotate(-180 32 32)",fill:"url(#a)"})),er||(er=o.createElement("g",{filter:"url(#b)",fill:"#fff"},o.createElement("path",{d:"M41.6 19.2a3.2 3.2 0 0 1 3.2 3.2v19.2a3.2 3.2 0 0 1-3.2 3.2V19.2zm-24 0a3.2 3.2 0 0 1 3.2-3.2h14.4a3.2 3.2 0 0 1 3.2 3.2v25.6a3.2 3.2 0 0 1-3.2 3.2H20.8a3.2 3.2 0 0 1-3.2-3.2V19.2zM48 22.4a2.4 2.4 0 0 1 2.4 2.4v14.4a2.4 2.4 0 0 1-2.4 2.4V22.4z"}))),tr||(tr=o.createElement("path",{d:"m80.78 40.4-4.967-18.33h2.407l3.328 13.466.307 1.254h.102l.384-1.254 4.096-13.466h2.253l3.917 13.466.384 1.254h.102l3.61-14.72h2.406L94.17 40.4h-2.253l-3.892-13.261-.41-1.434h-.102l-.435 1.434-4.045 13.26H80.78zm24.747.41c-1.263 0-2.389-.3-3.379-.897a6.391 6.391 0 0 1-2.304-2.457c-.546-1.041-.82-2.227-.82-3.559 0-1.245.257-2.397.769-3.456.529-1.058 1.263-1.903 2.201-2.534.956-.649 2.074-.973 3.354-.973 1.297 0 2.406.29 3.328.87a5.53 5.53 0 0 1 2.15 2.356c.512 1.007.768 2.159.768 3.456 0 .12-.008.239-.025.358 0 .12-.009.222-.026.307h-10.342c.068 1.024.315 1.878.742 2.56.444.666.99 1.17 1.638 1.51a4.47 4.47 0 0 0 2.023.487c.956 0 1.741-.222 2.355-.665a5.278 5.278 0 0 0 1.51-1.69l1.844.896a6.603 6.603 0 0 1-2.202 2.458c-.956.648-2.15.972-3.584.972zm-.179-11.905c-1.058 0-1.937.333-2.637.999s-1.161 1.527-1.382 2.585h7.961c-.017-.495-.162-1.015-.435-1.561-.256-.563-.666-1.041-1.229-1.434-.563-.392-1.322-.589-2.278-.589zm15.423 11.904c-1.041 0-1.954-.239-2.739-.716-.785-.478-1.357-1.016-1.715-1.613h-.103v1.92h-2.073V22.07h2.176v5.402l-.103 1.817h.103c.358-.614.93-1.16 1.715-1.638s1.698-.717 2.739-.717c1.195 0 2.262.299 3.2.896.939.598 1.681 1.417 2.227 2.458.547 1.04.82 2.236.82 3.584 0 1.348-.273 2.543-.82 3.584-.546 1.04-1.288 1.86-2.227 2.457-.938.598-2.005.896-3.2.896zm-.23-1.97a3.98 3.98 0 0 0 2.099-.59c.666-.41 1.195-.99 1.587-1.74.41-.751.615-1.63.615-2.637 0-1.024-.205-1.903-.615-2.637-.392-.75-.921-1.323-1.587-1.715a3.857 3.857 0 0 0-2.099-.615c-.751 0-1.459.205-2.125.615-.648.392-1.178.964-1.587 1.715-.41.734-.615 1.613-.615 2.637s.205 1.911.615 2.662c.409.734.939 1.306 1.587 1.715a4.116 4.116 0 0 0 2.125.59zm19.73 1.97a6.608 6.608 0 0 1-2.637-.563 6.642 6.642 0 0 1-2.304-1.664c-.665-.734-1.152-1.647-1.459-2.739l2.074-.845c.29 1.058.819 1.946 1.587 2.663.768.716 1.698 1.075 2.79 1.075.683 0 1.306-.12 1.869-.359a3.286 3.286 0 0 0 1.382-1.1c.359-.478.538-1.059.538-1.741 0-.905-.341-1.622-1.024-2.15-.666-.547-1.655-1.05-2.97-1.511l-1.152-.41a13.954 13.954 0 0 1-2.048-.972 5.22 5.22 0 0 1-1.689-1.536c-.444-.649-.666-1.46-.666-2.432 0-.888.239-1.699.717-2.432.478-.734 1.135-1.323 1.971-1.767.837-.444 1.801-.665 2.893-.665 1.143 0 2.099.213 2.867.64.785.41 1.4.904 1.843 1.484.461.564.768 1.084.922 1.562l-2.022.87c-.103-.358-.299-.725-.589-1.1-.29-.393-.683-.717-1.178-.973-.478-.273-1.083-.41-1.817-.41-.598 0-1.161.12-1.69.359-.512.239-.93.571-1.254.998-.308.41-.461.887-.461 1.434 0 .768.307 1.373.921 1.817.615.444 1.443.845 2.484 1.203l1.203.41c.546.188 1.101.418 1.664.691.58.273 1.118.623 1.613 1.05.495.426.896.956 1.203 1.587.307.614.461 1.357.461 2.227 0 .939-.188 1.75-.564 2.432a4.746 4.746 0 0 1-1.433 1.639 5.972 5.972 0 0 1-1.971.921c-.7.205-1.391.307-2.074.307zm13.187-.204c-1.092 0-1.971-.316-2.636-.948-.666-.648-.999-1.544-.999-2.688v-7.654h-2.278v-1.971h2.278v-3.687h2.176v3.687h3.2v1.971h-3.2v7.117c0 .683.137 1.212.41 1.587.29.376.759.563 1.408.563.29 0 .555-.042.793-.128.239-.085.453-.187.64-.307v2.125c-.221.102-.469.179-.742.23-.256.069-.606.103-1.05.103zm9.799.204c-1.314 0-2.475-.307-3.482-.921a6.658 6.658 0 0 1-2.381-2.483c-.563-1.058-.844-2.236-.844-3.533 0-1.297.281-2.466.844-3.507a6.605 6.605 0 0 1 2.381-2.51c1.007-.614 2.168-.92 3.482-.92s2.474.315 3.481.946a6.418 6.418 0 0 1 2.356 2.51c.58 1.04.87 2.2.87 3.48 0 1.298-.29 2.475-.87 3.534a6.465 6.465 0 0 1-2.356 2.483c-1.007.614-2.167.921-3.481.921zm0-1.97a4.34 4.34 0 0 0 2.201-.59 4.462 4.462 0 0 0 1.69-1.69c.427-.75.64-1.646.64-2.687s-.213-1.929-.64-2.663c-.427-.75-.99-1.322-1.69-1.715a4.34 4.34 0 0 0-2.201-.589c-.785 0-1.528.197-2.227.59-.7.392-1.263.963-1.69 1.714-.427.734-.64 1.622-.64 2.663 0 1.04.213 1.937.64 2.688.427.734.99 1.297 1.69 1.69a4.48 4.48 0 0 0 2.227.588zm8.984 1.56V27.345h2.073v2.099h.103a3.05 3.05 0 0 1 .845-1.28 4.5 4.5 0 0 1 1.382-.87 4.02 4.02 0 0 1 1.562-.333c.392 0 .699.025.921.077.222.034.427.094.615.179v2.355c-.547-.273-1.161-.41-1.844-.41-.631 0-1.211.18-1.74.538a4.003 4.003 0 0 0-1.28 1.434 4.236 4.236 0 0 0-.461 1.97V40.4h-2.176zm10.88-15.462c-.427 0-.794-.153-1.101-.46a1.503 1.503 0 0 1-.461-1.101c0-.444.154-.81.461-1.101.307-.307.674-.46 1.101-.46.444 0 .81.153 1.101.46.307.29.46.657.46 1.1 0 .428-.153.794-.46 1.102a1.45 1.45 0 0 1-1.101.46zM182.046 40.4V27.344h2.176V40.4h-2.176zm11.256.41c-1.263 0-2.389-.3-3.379-.897a6.39 6.39 0 0 1-2.304-2.457c-.546-1.041-.819-2.227-.819-3.559 0-1.245.256-2.397.768-3.456.529-1.058 1.263-1.903 2.201-2.534.956-.649 2.074-.973 3.354-.973 1.297 0 2.406.29 3.328.87a5.523 5.523 0 0 1 2.15 2.356c.512 1.007.768 2.159.768 3.456 0 .12-.008.239-.025.358 0 .12-.009.222-.026.307h-10.342c.068 1.024.315 1.878.742 2.56.444.666.99 1.17 1.638 1.51a4.47 4.47 0 0 0 2.023.487c.956 0 1.741-.222 2.355-.665a5.278 5.278 0 0 0 1.51-1.69l1.844.896a6.603 6.603 0 0 1-2.202 2.458c-.956.648-2.15.972-3.584.972zm-.179-11.905c-1.058 0-1.937.333-2.637.999s-1.16 1.527-1.382 2.585h7.961c-.017-.495-.162-1.015-.435-1.561-.256-.563-.666-1.041-1.229-1.434-.563-.392-1.322-.589-2.278-.589zm13.475 11.904c-1.468 0-2.663-.34-3.584-1.024-.922-.7-1.562-1.527-1.92-2.483l1.945-.87c.342.785.828 1.39 1.459 1.817a3.75 3.75 0 0 0 2.1.64c.768 0 1.45-.162 2.048-.486.614-.324.921-.802.921-1.434 0-.58-.256-1.032-.768-1.356-.495-.325-1.194-.598-2.099-.82l-1.587-.41c-.615-.17-1.195-.409-1.741-.716s-.99-.7-1.331-1.178c-.324-.494-.487-1.092-.487-1.792 0-.785.231-1.459.692-2.022.46-.563 1.066-.99 1.817-1.28a6.294 6.294 0 0 1 2.407-.46c1.109 0 2.116.247 3.02.742.922.478 1.571 1.169 1.946 2.073l-1.894.87c-.325-.648-.76-1.1-1.306-1.356s-1.143-.384-1.792-.384c-.683 0-1.306.162-1.869.486-.546.307-.819.734-.819 1.28s.213.956.64 1.229c.444.273.981.495 1.613.666l1.894.486c2.577.666 3.866 1.929 3.866 3.789 0 .819-.231 1.527-.691 2.125-.461.597-1.084 1.058-1.869 1.382-.785.324-1.656.486-2.611.486z",fill:"#000"})),ar||(ar=o.createElement("defs",null,o.createElement("linearGradient",{id:"a",x1:13.255,y1:6.599,x2:35.289,y2:62.791,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#79B3FF"}),o.createElement("stop",{offset:1,stopColor:"#CBACFF"})),o.createElement("filter",{id:"b",x:8.96,y:10.24,width:46.08,height:46.08,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},o.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),o.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),o.createElement("feOffset",{dy:1.28}),o.createElement("feGaussianBlur",{stdDeviation:1.92}),o.createElement("feColorMatrix",{values:"0 0 0 0 0.423529 0 0 0 0 0.490196 0 0 0 0 0.733333 0 0 0 0.3 0"}),o.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),o.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})))))},or=(0,o.memo)(SvgLogoWithTypeCircleColor);var nr=a(55648);const sr=(0,h.createContext)({state:{},actions:{}});const lr=function RouterProvider(e){let{children:t,...a}=e;const r=(0,h.useRef)(a.history||(0,nr.createHashHistory)()),[n,s]=(0,h.useState)(r.current.location.pathname),[l,i]=(0,h.useState)([]),c=He.DASHBOARD,d=(0,h.useMemo)((()=>(e=>{let{availableRoutes:t,currentPath:a,defaultRoute:r}=e;const o=t.filter((e=>a.startsWith(e)));return o.length<=1?r:a})({availableRoutes:l,currentPath:n,defaultRoute:c})),[l,n,c]),u=e=>{const t=new URLSearchParams(e);return Object.fromEntries(t)},[p,m]=(0,h.useState)(u(r.current.location.search));(0,h.useEffect)((()=>r.current.listen((e=>{let{location:t}=e;m(u(t.search)),s(t.pathname)}))),[]);const f=(0,h.useMemo)((()=>({state:{activeRoute:d,currentPath:n,queryParams:p,availableRoutes:l,defaultRoute:c},actions:{push:r.current.push,replace:r.current.replace,setAvailableRoutes:i}})),[d,l,n,c,p]);return o.createElement(sr.Provider,{value:f},t)};const ir=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.identity;return(0,h.useContextSelector)(sr,e)};function cr(e){return e.toLowerCase().startsWith("http://")||e.toLowerCase().startsWith("https://")?e:e.startsWith("/")?`#${e}`:""===e?"#/":`${window.location.hash}/${e}`}function Route(e){let{component:t,path:a,exact:r=!1,isDefault:o=!1}=e;const{availableRoutes:n,currentPath:s,defaultRoute:l}=ir((e=>{let{state:t}=e;return t})),i=function(e){let{currentPath:t,path:a,availableRoutes:r,defaultRoute:o,isDefault:n=!1,exact:s=!1}=e;const l=new RegExp(`^${a}`).exec(t);if(!l&&!n)return null;const i=l?.[0];if(n){const e=r.filter((e=>t.startsWith(e))).length<=1;if(e)return o}return s&&t!==i?null:i}({currentPath:s,availableRoutes:n,defaultRoute:l,path:a,exact:r,isDefault:o});return i?t:null}Route.propTypes={component:xt().node.isRequired,path:xt().string.isRequired,exact:xt().bool,isDefault:xt().bool};const dr=Route,ur=(0,h.createContext)({actions:{},state:{}});function pr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.identity;return(0,h.useContextSelector)(ur,e)}function NavProvider(e){let{children:t}=e;const[a,r]=(0,h.useState)(!1),n=(0,h.useCallback)((()=>{r(!a)}),[a]),s=(0,h.useMemo)((()=>({actions:{toggleSideBar:n},state:{sideBarVisible:a}})),[a,n]);return o.createElement(ur.Provider,{value:s},t)}var mr=a(19901);const fr=m.default.div.withConfig({displayName:"navigationComponents__Content",componentId:"sc-6htb2i-0"})(["display:flex;flex-direction:column;margin:20px 0;> *{margin:20px 28px;}"]),br=(0,m.default)(mr.Headline).withConfig({displayName:"navigationComponents__Header",componentId:"sc-6htb2i-1"})(["margin:42px 0px 72px;& > svg{margin:0 28px;height:64px;}"]),hr=m.default.ul.withConfig({displayName:"navigationComponents__NavList",componentId:"sc-6htb2i-2"})(["margin:0;padding:0;"]),gr=m.default.li.withConfig({displayName:"navigationComponents__NavListItem",componentId:"sc-6htb2i-3"})(["margin:10px 28px;padding:0;list-style-type:none;"]),_r=(0,m.css)(["span{color:",";}svg path{stroke:",";}"],(e=>{let{theme:t}=e;return t.colors.interactiveFg.brandPress}),(e=>{let{theme:t}=e;return t.colors.interactiveFg.brandPress})),Er=(0,m.default)(ea.Link).withConfig({displayName:"navigationComponents__NavLink",componentId:"sc-6htb2i-4"})((e=>{let{active:t,theme:a,isIconLink:r}=e;return(0,m.css)([""," color:",";*{transition:color 0.25s linear,stroke 0.25s linear;}",";:hover{",";}"],r&&(0,m.css)(["display:grid;grid-template-columns:1fr 4fr;grid-template-areas:'icon link link link link';"]),a.colors.fg.secondary,t&&_r,_r)})),Sr=(0,m.default)(ya.Text).withConfig({displayName:"navigationComponents__PathName",componentId:"sc-6htb2i-5"})(["grid-area:link;"]),yr=(0,m.default)(ya.Text).withConfig({displayName:"navigationComponents__AppInfo",componentId:"sc-6htb2i-6"})((e=>{let{theme:t}=e;return(0,m.css)(["color:",";"],t.colors.fg.secondary)}));function Tr(){return Tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Tr.apply(this,arguments)}const wr=m.default.div.withConfig({displayName:"leftRail__IconWrap",componentId:"sc-wua966-0"})(["position:relative;"]);const vr=function LeftRail(){const e=ir((e=>{let{state:t}=e;return t.activeRoute})),{newStoryURL:t,version:a,leftRailSecondaryNavigation:r,canViewDefaultTemplates:s,styleConstants:{topOffset:l}}=E(),i=(0,h.useRef)(null),c=(0,h.useRef)(null),{state:{sideBarVisible:d},actions:{toggleSideBar:u}}=pr(),p=(0,h.useCallback)((e=>{let{target:t}=e;t!==i.current&&t!==c.current&&u()}),[u,i,c]),m=(0,h.useCallback)((()=>{d&&u()}),[u,d]);(0,h.useFocusOut)(i,m,[d]),(0,h.useLayoutEffect)((()=>{d&&i.current&&i.current.focus()}),[d]);const f=(0,h.useCallback)((()=>{(0,T.trackEvent)("create_new_story")}),[]),b=(0,h.useCallback)(((e,t)=>{(0,T.trackClick)(e,t.trackingEvent)}),[]);return o.createElement(Xa,{onClickCapture:p,ref:i,isOpen:d,topOffset:l,role:"navigation","aria-label":(0,n.__)("Main dashboard navigation","web-stories")},o.createElement("div",{ref:c},o.createElement(br,{forwardedAs:"h2"},o.createElement(or,{title:(0,n.__)("Web Stories Dashboard","web-stories")})),o.createElement(fr,null,o.createElement(Mt.Button,{type:Dt.BUTTON_TYPES.QUATERNARY,size:Dt.BUTTON_SIZES.SMALL,href:t,onClick:f},(0,n.__)("Create New Story","web-stories"))),o.createElement(fr,null,o.createElement(hr,null,Fe.map((t=>{let{Icon:a,...r}=t;return r.value===He.TEMPLATES_GALLERY&&!s?null:o.createElement(gr,{key:r.value},o.createElement(Er,Tr({active:e===r.value,href:cr(r.value),size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0,isIconLink:Boolean(a),"aria-label":e===r.value?(0,M.default)(
/* translators: %s: the current page, for example "Dashboard". */
(0,n.__)("%s (active view)","web-stories"),r.label):r.label},r.isExternal&&{rel:"noreferrer",target:"_blank",onClick:e=>b(e,r)}),o.createElement(wr,null,a&&o.createElement(a,{width:"22px"})),o.createElement(Sr,{as:"span",isBold:!0},r.label)))}))))),o.createElement(fr,null,r&&o.createElement(hr,null,r.map((t=>o.createElement(gr,{key:t.value},o.createElement(Er,Tr({active:e===t.value,href:cr(t.value),size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,"aria-label":e===t.value?(0,M.default)(
/* translators: %s: the current page, for example "Dashboard". */
(0,n.__)("%s (active view)","web-stories"),t.label):t.label},t.isExternal&&{rel:"noreferrer",target:"_blank",onClick:e=>b(e,t)}),o.createElement(ya.Text,{as:"span",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},t.label)))))),o.createElement(yr,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,M.default)(
/* translators: 1: Current Year, 2: App Version */
(0,n.__)("© %1$s Google Version %2$s","web-stories"),(new Date).getFullYear(),a))))},Cr=(0,m.default)(P).attrs({width:24,height:24}).withConfig({displayName:"menuButton__MenuIcon",componentId:"sc-ov12l5-0"})(["display:block;color:",";"],(e=>{let{theme:t}=e;return t.colors.interactiveFg.brandNormal})),Ir=m.default.button.withConfig({displayName:"menuButton__TransparentButton",componentId:"sc-ov12l5-1"})(["display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;padding:0;margin-right:16px;background:transparent;border:0;border-radius:",";"," ",""],(e=>{let{theme:t}=e;return t.borders.radius.small}),Vt.focusableOutlineCSS,(e=>{let{showOnlyOnSmallViewport:t}=e;return t&&(0,m.css)(["display:none;@media screen and (max-width:","px){display:inline-block;}"],Oe)}));const Ar=function NavMenuButton(e){let{showOnlyOnSmallViewport:t}=e;const{actions:a}=pr();return o.createElement(Ir,{onClick:a.toggleSideBar,showOnlyOnSmallViewport:t,"aria-label":(0,n.__)("Toggle main navigation","web-stories")},o.createElement(Cr,{"aria-hidden":!0}))};var Lr=a(99832);const Or=(0,m.default)(Mt.Button).withConfig({displayName:"scrollToTop__StyledButton",componentId:"sc-o0u22z-0"})((e=>{let{$isVisible:t,theme:a}=e;return(0,m.css)(["position:fixed;right:40px;bottom:40px;height:50px;width:50px;display:flex;align-self:center;justify-content:space-around;align-items:center;contain:content;padding:8px;background-color:",";pointer-events:",";box-shadow:0px 4px 14px rgba(0,0,0,0.25);opacity:",";transition:opacity 300ms ease-in-out;"],a.colors.opacity.white64,t?"auto":"none",Number(t))})),kr=(0,m.default)(Lr.default).withConfig({displayName:"scrollToTop__DropUpArrowIcon",componentId:"sc-o0u22z-1"})(["position:relative;transform:scale(2.4);"]),Pr=()=>{const[e,t]=(0,h.useState)(!1),{actions:{scrollToTop:a}}=za(),r=(0,h.useDebouncedCallback)((()=>t(window.scrollY>0)),100);return(0,h.useEffect)((()=>(window.addEventListener("scroll",r,{passive:!0}),function(){window.removeEventListener("scroll",r,{passive:!0})})),[r]),o.createElement(Or,{disabled:!e,"aria-label":(0,n.__)("Scroll back to top","web-stories"),"data-testid":"scroll-to-top-button",$isVisible:e,onClick:a,variant:Dt.BUTTON_VARIANTS.CIRCLE},o.createElement(kr,{"aria-hidden":!0}))},Nr=m.default.table.withConfig({displayName:"table__Table",componentId:"sc-16y5cap-0"})([""," border-collapse:collapse;width:inherit;"],Oa.expandTextPreset(((e,t)=>{let{paragraph:a}=e,{SMALL:r}=t;return a[r]}))),Rr=m.default.tbody.withConfig({displayName:"table__TableBody",componentId:"sc-16y5cap-1"})([""]),xr=m.default.thead.withConfig({displayName:"table__TableHeader",componentId:"sc-16y5cap-2"})(["background:",";"],(e=>{let{theme:t}=e;return t.colors.bg.secondary})),Mr=(0,m.default)(xr).withConfig({displayName:"table__StickyTableHeader",componentId:"sc-16y5cap-3"})(["width:100%;border-top:0;border-bottom:0;th{height:100%;background:",";position:sticky;z-index:2;top:",";:first-child{border-top-left-radius:",";border-bottom-left-radius:",";}:last-child{border-top-right-radius:",";border-bottom-right-radius:",";}}"],(e=>{let{theme:t}=e;return t.colors.bg.secondary}),(e=>{let{topOffset:t}=e;return`${t}px`}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.borders.radius.small}),(e=>{let{theme:t}=e;return t.borders.radius.small})),Dr=m.default.th.withConfig({displayName:"table__TableHeaderCell",componentId:"sc-16y5cap-4"})(["padding:16px;text-align:left;white-space:nowrap;"]),Br=(0,m.default)(Dr).withConfig({displayName:"table__TablePreviewHeaderCell",componentId:"sc-16y5cap-5"})(["padding-right:0;"]),Hr=(0,m.default)(Dr).withConfig({displayName:"table__TableDateHeaderCell",componentId:"sc-16y5cap-6"})(["min-width:160px;"]),Ur=(0,m.default)(Dr).withConfig({displayName:"table__TableStatusHeaderCell",componentId:"sc-16y5cap-7"})(["display:table-cell;min-width:100px;@media ","{display:none;}"],(e=>{let{theme:t}=e;return t.breakpoint.tabletMax})),Fr=(0,m.default)(Dr).withConfig({displayName:"table__TableAuthorHeaderCell",componentId:"sc-16y5cap-8"})(["min-width:110px;"]),Gr=(0,m.default)(Dr).withConfig({displayName:"table__TableTitleHeaderCell",componentId:"sc-16y5cap-9"})(["padding-left:0;width:30%;min-width:135px;span{display:none;margin-right:5px;}"]),Yr=((0,m.default)(Dr).withConfig({displayName:"table__TableContentHeaderCell",componentId:"sc-16y5cap-10"})(["width:17.5%;min-width:150px;"]),m.default.tr.withConfig({displayName:"table__TableRow",componentId:"sc-16y5cap-11"})(["min-width:1250px;@media ","{min-width:0;}"],(e=>{let{theme:t}=e;return t.breakpoint.tabletMax}))),jr=m.default.td.withConfig({displayName:"table__TableCell",componentId:"sc-16y5cap-12"})(["padding:","px;font-weight:normal;word-break:break-word;height:","px;vertical-align:middle;span{color:",";line-height:20px;}"],16,82,(e=>{let{theme:t}=e;return t.colors.standard.black})),zr=(0,m.default)(jr).withConfig({displayName:"table__TableStatusCell",componentId:"sc-16y5cap-13"})(["display:table-cell;span{color:",";}@media ","{display:none;}"],(e=>{let{theme:t}=e;return t.colors.fg.secondary}),(e=>{let{theme:t}=e;return t.breakpoint.tabletMax})),Vr=((0,m.default)(jr).withConfig({displayName:"table__TableTitleCell",componentId:"sc-16y5cap-14"})(["width:30%;word-wrap:break-word;"]),(0,m.default)(jr).withConfig({displayName:"table__TableContentCell",componentId:"sc-16y5cap-15"})(["width:17.5%;min-width:150px;word-wrap:break-word;"]),(0,m.default)(jr).withConfig({displayName:"table__TablePreviewCell",componentId:"sc-16y5cap-16"})(["width:","px;"],Re[Ne]));var $r=a(27856),Zr=a(73715);function qr(){return qr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},qr.apply(this,arguments)}function Tooltip(e){let{placement:t=$r.PLACEMENT.BOTTOM,...a}=e;const{isRTL:r}=E(),n=r?$r.RTL_PLACEMENT[t]:t;return o.createElement(Zr.BaseTooltip,qr({placement:n},a))}var Wr=a(2779),Kr=a(98477);const Xr=m.default.div.withConfig({displayName:"viewStyleBar__Container",componentId:"sc-17r9rf0-0"})(["display:flex;justify-content:flex-end;align-items:center;"]),Jr=m.default.button.withConfig({displayName:"viewStyleBar__ToggleButton",componentId:"sc-17r9rf0-1"})(["border:none;border-radius:",";"," padding:0;background:transparent;cursor:pointer;&:hover svg{color:",";}&:active svg{color:",";}"],(e=>{let{theme:t}=e;return t.borders.radius.small}),Vt.focusableOutlineCSS,(e=>{let{theme:t}=e;return t.colors.interactiveFg.hover}),(e=>{let{theme:t}=e;return t.colors.interactiveFg.active}));function ViewStyleBar(e){let{onPress:t,layoutStyle:a}=e;return o.createElement(Xr,null,o.createElement(Tooltip,{title:Ye[a],placement:$r.PLACEMENT.BOTTOM_END,hasTail:!0},o.createElement(Jr,{"aria-label":Ye[a],onClick:t},a===Ge.GRID&&o.createElement(Wr.default,{height:"32px",width:"32px","data-testid":"list-icon"}),a===Ge.LIST&&o.createElement(Kr.default,{height:"32px",width:"32px","data-testid":"grid-icon"}))))}const Qr=(0,m.createGlobalStyle)(["h1,h2,h3,h4,h5,h6,p,a{margin:0;}"]),eo=e=>""===e?(0,n.__)("Untitled","web-stories"):e,to=(0,m.createGlobalStyle)(["*:focus{outline:none !important;}"]),ao=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab"],ro=()=>{const[e,t]=(0,h.useState)(!1),a=a=>{!e&&ao.includes(a.key)&&t(!0)},r=()=>{e&&t(!1)};return(0,h.useEffect)((()=>(document.addEventListener("keydown",a),document.addEventListener("mousedown",r),function(){document.removeEventListener("keydown",a),document.removeEventListener("mousedown",r)}))),(0,h.useEffect)((()=>{document.body.classList.toggle("useskeyboard",e)}),[e]),e?null:o.createElement(to,null)};function oo(e){let{isActiveSearch:t,currentFilter:a,totalResults:r,view:o}=e;return(0,h.useMemo)((()=>{const e=r??0,s=Ve[o]?.[a]||"",l="function"==typeof s?s(e):s;return t?(0,M.default)(
/* translators: %s: number of results. */
(0,n._n)("%s result","%s results",e,"web-stories"),(0,M.default)("<strong>%s</strong>",e)):l}),[t,r,o,a])}const no=e=>Math.round(e/.6666666666666666),so=e=>e<=Oe?ke:Pe,lo=(e,t)=>{let{bp:a,respectSetWidth:r,availableContainerSpace:o}=t;if(r){return{width:e,height:no(e)}}a===Pe&&(o-=Le);const n=Math.floor(o/e),s=e+(o-(e*n+xe*(n-1)+2*De))/n;return{width:s,height:no(s)}},io=e=>window.innerWidth<Oe?Oe:e;function co(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{thumbnailMode:t=!1,isGrid:a}=e,{containerId:r}=E(),o=(0,h.useRef)(document.getElementById(r)),[n,s]=(0,h.useState)(window.innerWidth),[l,i]=(0,h.useState)(so(n)),[c,d]=(0,h.useState)(io(o.current?.offsetWidth||window.innerWidth)),u=(0,h.useDebouncedCallback)((e=>{s(e)}),500);return(0,h.useEffect)((()=>{i(so(n))}),[n]),(0,h.useResizeEffect)(o,(e=>{let{width:t}=e;d(io(t)),window.innerWidth!==n&&u(window.innerWidth)}),[d,n,u]),(0,h.useMemo)((()=>({pageSize:lo(Re[t?Ne:l],{respectSetWidth:!a||t,availableContainerSpace:c,bp:l})})),[l,a,t,c])}const uo=(e,t)=>{let{MIN:a,MAX:r}=t;return Math.min(Math.max(e,a),r)};xt().shape({style:xt().oneOf(Object.values(Ge)),toggleStyle:xt().func,pageSize:Wt}),xt().shape({filterId:xt().number,toggleFilterId:xt().func,queriedAuthors:xt().arrayOf(xt().shape({id:xt().number,name:xt().string})).isRequired,setQueriedAuthors:xt().func}),xt().shape({value:xt().oneOfType([xt().number,xt().string]),set:xt().func}),xt().shape({value:xt().oneOf(Object.values(z)),set:xt().func,direction:xt().oneOf(Object.values(j)),setDirection:xt().func}),xt().shape({value:xt().number,set:xt().func,requestNextPage:xt().func}),xt().shape({keyword:xt().string,setKeyword:xt().func}),xt().shape({current:xt().bool});xt().shape({style:xt().oneOf(Object.values(Ge)),pageSize:Wt}),xt().shape({value:xt().oneOfType([xt().number,xt().string]),set:xt().func}),xt().shape({value:xt().number,set:xt().func,requestNextPage:xt().func}),xt().shape({keyword:xt().string,setKeyword:xt().func}),xt().shape({value:xt().oneOf(Object.values(ye)),set:xt().func});const po=()=>{},mo=()=>({isRTL:!1,userId:1,locale:{locale:"en-US",dateFormat:"F j, Y",timeFormat:"g:i a",gmtOffset:"0",timezone:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysInitials:["S","M","T","W","T","F","S"],weekStartsOn:1},newStoryURL:"",archiveURL:"",defaultArchiveURL:"",cdnURL:"https://wp.stories.google/static/main/",allowedImageMimeTypes:["image/webp","image/png","image/jpeg","image/gif"],version:"",encodeMarkup:!0,api:{},maxUpload:314572800,maxUploadFormatted:"300 MB",capabilities:{canManageSettings:!1,canUploadFiles:!1},canViewDefaultTemplates:!1,localeData:[],flags:{},apiCallbacks:{},leftRailSecondaryNavigation:[],styleConstants:{topOffset:0,leftOffset:0}});Object.defineProperty(f.default,"name",{value:"stylisRTLPlugin"});const fo=function Dashboard(e){let{config:t,children:a}=e;const r=(0,s.default)(mo(),t),n={...l.theme,colors:i.light},{isRTL:h,flags:g,styleConstants:{leftOffset:E,topOffset:S}={}}=r;return o.createElement(b.FlagsProvider,{features:g},o.createElement(m.StyleSheetManager,{stylisPlugins:h?[f.default]:[]},o.createElement(m.ThemeProvider,{theme:n},o.createElement(c.Styles,null),o.createElement(d.ModalGlobalStyle,null),o.createElement(_,{config:r},o.createElement(ApiProvider,null,o.createElement(NavProvider,null,o.createElement(lr,null,o.createElement(u.default,null,o.createElement(p.default,{value:{isRTL:h,leftOffset:E,topOffset:S}},o.createElement(Qr,null),o.createElement(ro,null),a)))))))))};var bo=a(36575),ho=a(30963);const go="UPDATE_FILTER",_o="UPDATE_SORT",Eo="REGISTER_FILTERS",So=(e,t)=>{let{type:a,payload:r={}}=t;switch(a){case go:{const t=["search","status"],{key:a,value:o}=r,n=e.filters.find((e=>e.key===a));if(!n)return e;if(o.filterId&&n?.filterId===o.filterId){if(t.includes(a))return e;o.filterId=null}const s=e.filters.indexOf(n),l=[...e.filters];l[s]={...n,...o};const i={};for(const e of l)e.filterId&&(i[e.key]=e.filterId);return{...e,filters:l,filtersObject:i}}case _o:{const{type:t,values:a}=r,o={},n="story"===t?V:Te;for(const t in a)t in n&&Object.values(n[t]).includes(a[t])&&e.sortObject[t]!==a[t]&&(o[t]=a[t]);return 0===Object.entries(o).length?e:{...e,sortObject:{...e.sortObject,...o}}}case Eo:{const{value:t}=r,a=e.filters.map((e=>e.key)),o=t.filter((e=>!a.includes(e.key)));return o.length?{...e,filters:[...o,...e.filters]}:e}default:return e}};function yo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.identity;return(0,h.useContextSelector)(Pt,e)}const To={};const wo=function(){const{getTaxonomies:e,getTaxonomyTerms:t}=yo((e=>{let{actions:{taxonomyApi:{getTaxonomies:t,getTaxonomyTerms:a}}}=e;return{getTaxonomies:t,getTaxonomyTerms:a}})),a=(0,h.useCallback)((async(e,a)=>{const{restBase:r,restPath:o}=e;return(await t(o,{search:a,per_page:-1})).map((e=>({...e,restBase:r,restPath:o})))}),[t]),r=(0,h.useCallback)((async e=>{const{restBase:t}=e;return To[t]||(To[t]=await a(e)),To[t]}),[a]);return(0,h.useCallback)((async()=>(await e({hierarchical:!0,show_ui:!0})).map((e=>({key:e.restBase,restPath:e.restPath,placeholder:e.labels.allItems,ariaLabel:e.labels.filterByItem,noMatchesFoundLabel:e.labels.notFound,searchPlaceholder:e.labels.searchItems,query:t=>a(e,t),getPrimaryOptions:()=>r(e)})))),[a,r,e])};let vo=null;const Co=function(){const{getAuthors:e}=yo((e=>{let{actions:{usersApi:{getAuthors:t}}}=e;return{getAuthors:t}})),t=(0,h.useCallback)((async(t,a)=>(await e(a)).map((e=>{let{id:t,name:a}=e;return{id:t,name:a}}))),[e]),a=(0,h.useCallback)((async()=>(vo||(vo=await t()),vo)),[t]);return(0,h.useCallback)((()=>({key:"author",ariaLabel:(0,n.__)("Filter stories by author","web-stories"),placeholder:(0,n.__)("All Authors","web-stories"),searchPlaceholder:(0,n.__)("Search Authors","web-stories"),noMatchesFoundLabel:(0,n.__)("No authors found","web-stories"),query:t,getPrimaryOptions:a})),[t,a])},Io=(0,h.createContext)({state:{},actions:{}});function StoryFiltersProvider(e){let{children:t}=e;const a=wo(),r=Co(),[n,s]=(0,h.useReducer)(So,{filters:[],filtersObject:{},sortObject:{}}),l=(0,h.useCallback)((e=>{s({type:_o,payload:{type:"story",values:e}})}),[]),i=(0,h.useCallback)(((e,t)=>{s({type:go,payload:{key:e,value:t}})}),[]),c=(0,h.useCallback)((e=>{s({type:Eo,payload:{value:e}})}),[]),d=(0,h.useCallback)((async()=>{const e=[...await a(),r()].filter((e=>Boolean(e)));e.length&&c(e)}),[c,r,a]),u=(0,h.useMemo)((()=>({state:n,actions:{updateFilter:i,updateSort:l,registerFilters:c}})),[n,i,l,c]);return(0,h.useEffect)((()=>{d()}),[d]),o.createElement(Io.Provider,{value:u},t)}function Ao(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.identity;return(0,h.useContextSelector)(Io,e)}var Lo=a(71577);const Oo=(0,m.default)(Lo.DropDown).withConfig({displayName:"sortDropDown__StyledDropDown",componentId:"sc-lqi6ue-0"})(["width:210px;"]);const ko=function SortDropDown(e){let{pageSortOptions:t,pageSortDefaultOption:a,currentSort:r,handleSortChange:s}=e;const l=(0,h.useCallback)(((e,t)=>{s({orderby:t})}),[s]);return o.createElement(Oo,{ariaLabel:(0,n.__)("Choose sort option for display","web-stories"),options:t,type:Ie.DropDown,selectedValue:r?.orderby||a,onMenuItemClick:l})},Po=m.default.div.withConfig({displayName:"bodyViewOptions__DisplayFormatContainer",componentId:"sc-x2ax3p-0"})(["display:grid;gap:1rem;min-height:76px;grid-template-columns:1fr auto auto;justify-content:start;align-items:center;margin-top:-10px;"]),No=m.default.div.withConfig({displayName:"bodyViewOptions__StorySortDropdownContainer",componentId:"sc-x2ax3p-1"})(["margin:auto 8px;align-self:flex-end;"]),Ro=m.default.div.withConfig({displayName:"bodyViewOptions__ControlsContainer",componentId:"sc-x2ax3p-2"})(["display:flex;flex-wrap:wrap;margin:1rem 0;row-gap:1rem;justify-self:end;"]),xo=m.default.div.withConfig({displayName:"bodyViewOptions__BodyViewOptionsHeader",componentId:"sc-x2ax3p-3"})([""]),Mo=(0,m.default)(ho.default.DropDown).withConfig({displayName:"bodyViewOptions__StyledDatalist",componentId:"sc-x2ax3p-4"})(["max-width:","px;"],350);function BodyViewOptions(e){let{handleLayoutSelect:t,resultsLabel:a,layoutStyle:r,pageSortOptions:s=[],pageSortDefaultOption:l,showGridToggle:i,showSortDropdown:c,filters:d=[],currentSort:u,handleSortChange:p}=e;const{updateFilter:f}=Ao((e=>{let{actions:{updateFilter:t}}=e;return{updateFilter:t}}));return o.createElement(ha,null,o.createElement(xo,{id:"body-view-options-header"}),o.createElement(Po,null,o.createElement(ya.Text,{as:"span",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o.createElement(bo.default,null,a)),o.createElement(Ro,null,d?.length?d.map((e=>o.createElement(No,{key:e.key,title:e.placeholder},o.createElement(Mo,{hasSearch:!0,hasDropDownBorder:!0,searchResultsLabel:(0,n.__)("Search results","web-stories"),"aria-label":e.ariaLabel,onChange:t=>{let{id:a}=t;f(e.key,{filterId:a})},getOptionsByQuery:e.query,getPrimaryOptions:e.getPrimaryOptions,selectedId:e.filterId,placeholder:e.placeholder,noMatchesFoundLabel:e.noMatchesFoundLabel,searchPlaceholder:e.searchPlaceholder,offsetOverride:!0,maxWidth:350,containerStyleOverrides:(0,m.css)(["flex-direction:column;"])})))):null,c&&o.createElement(No,null,o.createElement(ko,{pageSortOptions:s,pageSortDefaultOption:l,currentSort:u,handleSortChange:p}))),i&&o.createElement(ViewStyleBar,{layoutStyle:r,onPress:t})))}var Do,Bo,Ho;function Uo(){return Uo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Uo.apply(this,arguments)}const SvgDesertColor=e=>{let{title:t,titleId:a,...r}=e;return o.createElement("svg",Uo({viewBox:"0 0 274 118",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":a},r),t?o.createElement("title",{id:a},t):null,Do||(Do=o.createElement("path",{d:"M59.68 117.706 8.551 106.934C2.505 105.66-.951 99.261 1.3 93.506l1.18-3.019a10 10 0 0 1 7.987-6.268l78.794-10.544a10.003 10.003 0 0 0 2.525-.683l82.061-34.244a10 10 0 0 1 8.263.255l56.296 27.675c.436.215.886.397 1.349.545l26.84 8.637c9.132 2.939 9.287 15.804.228 18.962l-26.529 9.248c-.819.285-1.671.463-2.536.529L62.497 117.892a9.985 9.985 0 0 1-2.818-.186Z",fill:"#F4F2EF"})),Bo||(Bo=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M224 26a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v31h4V44a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-7v17h-10V49h-7a2 2 0 0 1-2-2V31a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v13h4V26ZM120.857 53.178a2.143 2.143 0 0 1 4.286 0v14.25h1.714v-5.357a1.072 1.072 0 0 1 2.143 0V68.5a1.146 1.146 0 0 1-.048.319 1.073 1.073 0 0 1-1.023.753h-2.786v5.892h-4.286v-7.892h-2.786A1.073 1.073 0 0 1 117 66.5v-6.429a1.072 1.072 0 0 1 2.143 0v5.358h1.714v-12.25ZM64.786 8a8 8 0 0 1 8-8h.428a8 8 0 0 1 8 8v34.643h6.572V22a4 4 0 0 1 4-4H92a4 4 0 0 1 4 4v24.857a4 4 0 0 1-4 4H81.214v42.786H64.786V78.857H54a3.987 3.987 0 0 1-2.828-1.171A3.988 3.988 0 0 1 50 74.857V50a4 4 0 0 1 4-4h.214a4 4 0 0 1 4 4v20.643h6.572V8Z",fill:"#FBBC04"})),Ho||(Ho=o.createElement("circle",{cx:213,cy:72,r:13,fill:"#4285F4"})))},Fo=(0,o.memo)(SvgDesertColor),Go=m.default.div.withConfig({displayName:"emptyContentMessage__Message",componentId:"sc-1wgc64w-0"})(["display:flex;flex-direction:column;align-items:center;max-width:400px;margin:20vh auto;& > *{text-align:center;margin:0 auto;}button,a{margin-top:48px;}"]),Yo=(0,m.default)(Fo).withConfig({displayName:"emptyContentMessage__EmptyImage",componentId:"sc-1wgc64w-1"})(["margin-bottom:48px;"]);const jo=function EmptyContentMessage(e){let{children:t}=e;return o.createElement(Go,null,o.createElement(Yo,{"aria-hidden":!0,width:274,height:118}),t)};var zo=a(3605);const Vo=m.default.h1.withConfig({displayName:"display__Display",componentId:"sc-xgoq85-0"})([""," ",""],zo.defaultTypographyStyle,(e=>{let{size:t,theme:a}=e;return Oa.expandPresetStyles({preset:a.typography.presets.display[t],theme:a})}));Vo.propTypes={as:xt().oneOf(["h1","h2","h3","h4","h5","h6"]).isRequired,size:xt().oneOf(ka.THEME_CONSTANTS.TYPOGRAPHY.DISPLAY_SIZES)},Vo.defaultProps={size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM};var $o=a(66044),Zo=a(36514),qo=a(13578);const Wo=m.default.div.withConfig({displayName:"search__DropDownContainer",componentId:"sc-8mm6ey-0"})(["display:flex;flex-direction:column;width:100%;"]),Ko=(0,m.default)(ya.Text).withConfig({displayName:"search__Label",componentId:"sc-8mm6ey-1"})(["margin-bottom:8px;color:",";"],(e=>{let{theme:t,disabled:a}=e;return t.colors.fg[a?"disable":"primary"]}));Ko.propTypes={disabled:xt().bool};const Xo=(0,m.default)(ya.Text).withConfig({displayName:"search__Hint",componentId:"sc-8mm6ey-2"})(["margin-top:12px;padding-left:2px;color:",";"],(e=>{let{theme:t,hasError:a}=e;return t.colors.fg[a?"negative":"tertiary"]}));Xo.propTypes={hasError:xt().bool};var Jo=a(99566),Qo=a(65727),en=a(97642),tn=a(37309);function an(){return an=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},an.apply(this,arguments)}const rn=m.default.div.withConfig({displayName:"search__SearchInputWrapper",componentId:"sc-63vr7b-0"})([""]),Search=e=>{let{ariaInputLabel:t=Jo.DEFAULT_ARIA_INPUT_LABEL,ariaClearLabel:a=Jo.DEFAULT_ARIA_CLEAR_LABEL,disabled:r,handleSearchValueChange:s,hasError:l,hint:i,label:c,onMenuItemClick:d,onClear:u,options:p=[],placeholder:m=Jo.DEFAULT_PLACEHOLDER,placement:f=$r.PLACEMENT.BOTTOM,popupFillWidth:b=Jo.DEFAULT_POPUP_FILL_WIDTH,popupZIndex:g,selectedValue:_={},searchValue:E,...S}=e;const y=(0,h.useMemo)((()=>`list-${(0,Qt.default)()}`),[]),T=(0,h.useMemo)((()=>`select-button-${(0,Qt.default)()}`),[]),w=(0,h.useMemo)((()=>`clear-button-${(0,Qt.default)()}`),[]),v=(0,h.useRef)(),C=(0,h.useRef)(),{activeOption:I,getActiveOption:A,inputState:L,isMenuFocused:O,isOpen:k,normalizedOptions:P}=function(e){let{handleSearchValueChange:t,selectedValue:a,searchValue:r,options:o}=e;const s=(0,tn.default)("assertive"),[l,i]=(0,h.useState)(!1),c=(0,h.useDebouncedCallback)(i,100),d=(0,h.useMemo)((()=>({value:l,set:c})),[l,c]),[u,p]=(0,h.useState)(!1),m=(0,h.useDebouncedCallback)(p,300,{leading:!0}),f=(0,h.useMemo)((()=>({value:u,set:m})),[u,m]);(0,h.useEffect)((()=>{d.value||m(!1)}),[d,m]);const b=(0,h.useMemo)((()=>o&&0!==o.length?(0,en.getOptions)(o):[]),[o]),g=(0,h.useCallback)((e=>b.flatMap((e=>e.group)).find((t=>t?.value?.toString().toLowerCase()===e.toString().toLowerCase()))),[b]),_=(0,h.useMemo)((()=>{const e=a?.value||r;return e&&0!==b.length?g(e):null}),[a,r,b,g]),[E,S]=(0,h.useState)(r),y=(0,h.useCallback)((e=>{S(e),void 0!==e&&t?.(e)}),[t]),T=(0,h.useMemo)((()=>({value:E,set:y})),[E,y]);return(0,h.useEffect)((()=>{void 0===T?.value&&void 0!==a?.value&&T.set(a?.label||"")}),[T,a]),(0,h.useEffect)((()=>{if(d.value&&T.value?.length){const e=o.length?(0,M.default)(
/* translators: %d: number of results. */
(0,n._n)("%d result found.","%d results found.",o.length,"web-stories"),o.length):(0,n.__)("No results found.","web-stories");s(e)}}),[T.value,d.value,o.length,s]),{activeOption:_,getActiveOption:g,normalizedOptions:b,inputState:T,isMenuFocused:f,isOpen:d}}({options:p,selectedValue:_,searchValue:E,handleSearchValueChange:s}),N=(0,h.useMemo)((()=>Boolean(r||!L?.value||0===L.value?.length)),[r,L]),R=(0,h.useCallback)((()=>{k.set(!0),O.set(!1)}),[k,O]),x=(0,h.useCallback)((e=>{e.preventDefault(),k.set(!0)}),[k]),D=(0,h.useCallback)((e=>{(!w||e?.srcElement?.id!==w&&e?.srcElement?.nearestViewportElement?.id!==w)&&k.set(!1)}),[w,k]),B=(0,h.useCallback)(((e,t)=>{k.set(!1);const a=A(t)||{label:t,value:t};L.set(a.label),d?.(e,a)}),[A,L,k,d]),H=(0,h.useCallback)((()=>v?.current?.focus()),[]),U=(0,h.useCallback)((e=>{let{target:t}=e;L.set(t.value),t.value.length>0&&!k.value&&k.set(!k.value)}),[L,k]),F=(0,h.useCallback)((()=>{L.set(void 0),u(),H()}),[H,L,u]),G=(0,h.useCallback)((()=>{k.set(!1),O.set(!1)}),[k,O]),Y=(0,h.useCallback)((()=>O.set(!0)),[O]),j=(0,h.useCallback)((()=>{(N||0===L.value?.trim().length)&&(O.set(!1),k.set(!1))}),[L,O,N,k]),z=(0,h.useCallback)((e=>{const{key:t}=e;"Escape"===t?N||O.set(!1):"Tab"===t?j(e):"ArrowDown"===t?Y():"Enter"===t&&L.value.trim().length>0&&B(e,L.value)}),[N,O,j,Y,B,L.value]);return(0,h.useFocusOut)(C,j,[j]),o.createElement(Wo,null,c&&o.createElement(Ko,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,disabled:r,forwardedAs:"span",isBold:!0},c),o.createElement(rn,{ref:C},o.createElement(Qo.default,an({"aria-label":t,hasError:l,id:T,onChange:U,onClick:x,onFocus:R,onKeyDown:z,placeholder:m,ariaClearLabel:a,clearId:w,disabled:r,handleClearInput:F,handleTabClear:G,inputValue:L?.value||"",isOpen:k?.value,listId:y,ref:v},S))),!N&&o.createElement(qo.Popup,{anchor:v,isOpen:k?.value,placement:f,fillWidth:b,zIndex:g},o.createElement(Zo.Menu,an({activeValue:I?.value,handleReturnToParent:H,isMenuFocused:O.value,listId:y,menuAriaLabel:(0,M.default)(
/* translators: %s: dropdown aria label or general dropdown label if there is no specific aria label. */
(0,n.__)("%s Option List Selector","web-stories"),t),onDismissMenu:D,onMenuItemClick:B,options:P,parentId:T},S))),i&&o.createElement(Xo,{hasError:l,size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},i))},on=(0,m.default)(ha).withConfig({displayName:"pageHeading__HeadingContainer",componentId:"sc-1ln7suo-0"})(["display:flex;align-items:center;flex-wrap:wrap;justify-content:space-between;margin-bottom:16px;padding-top:48px;border-bottom:1px solid ",";"],(e=>{let{theme:t}=e;return t.colors.divider.secondary})),nn=(0,m.default)(Vo).withConfig({displayName:"pageHeading__StyledHeadline",componentId:"sc-1ln7suo-1"})(["display:flex;align-items:center;margin-right:28px;padding-bottom:24px;white-space:nowrap;"]),sn=m.default.div.withConfig({displayName:"pageHeading__HeadlineFilters",componentId:"sc-1ln7suo-2"})(["display:flex;align-items:center;margin:auto 0 auto 0;padding-bottom:24px;"]),ln=m.default.div.withConfig({displayName:"pageHeading__HeaderSearch",componentId:"sc-1ln7suo-3"})(["width:208px;max-width:208px;min-width:208px;margin:auto 0;padding-bottom:24px;"]),cn=e=>{let{children:t,heading:a,searchPlaceholder:r,searchOptions:s=[],showSearch:l,handleSearchChange:i,searchValue:c,onClear:d=$o.noop}=e;return o.createElement(on,null,o.createElement(nn,{as:"h2",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o.createElement(Ar,{showOnlyOnSmallViewport:!0}),a),t&&o.createElement(sn,null,t),l&&o.createElement(ln,null,o.createElement(Search,{placeholder:r,searchValue:c,options:s,handleSearchValueChange:i,onClear:d,emptyText:(0,n.__)("No options available","web-stories")})))};var dn=a(96905),un=a(15242),pn=a(55177),mn=a(13293),fn=a(65132);const bn=e=>{let{menuItems:t,story:a,isLocked:r}=e;const o=t.default?()=>t.default(a):po;return t.filter((e=>void 0===e.isEnabled||e.isEnabled(a))).map((e=>{let{capability:n,value:s,...l}=e;const i=(e=>t.find((t=>t?.value===e)))(s),c={onClick:i?()=>i.action(a):o};switch(s){case D:c.href=a.bottomTargetAction,c.openNewTab=!1;break;case G:c.href=a.previewLink,c.openNewTab=!0;break;case B:case U:c.disabled=r}return delete l?.action,{...l,...c}}))};var hn=a(37233);const gn=m.default.div.withConfig({displayName:"storyListItem__PreviewImage",componentId:"sc-1w22569-0"})(["display:inline-block;background:",";width:","px;height:","px;object-fit:contain;border-radius:",";"],(e=>{let{theme:t}=e;return t.colors.gradient.placeholder}),Re[Ne],Re[Ne]/(3/4),(e=>{let{theme:t}=e;return t.borders.radius.small})),_n=m.default.div.withConfig({displayName:"storyListItem__PreviewWrapper",componentId:"sc-1w22569-1"})(["position:relative;"]),En=(0,m.default)(hn.default).withConfig({displayName:"storyListItem__LockIcon",componentId:"sc-1w22569-2"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);height:24px;display:block;margin:auto;background-color:",";color:",";border-radius:",";"],(e=>{let{theme:t}=e;return t.colors.interactiveBg.brandNormal}),(e=>{let{theme:t}=e;return t.colors.standard.white}),(e=>{let{theme:t}=e;return t.borders.radius.round})),Sn=(0,m.default)(Yr).withConfig({displayName:"storyListItem__StyledTableRow",componentId:"sc-1w22569-3"})(["&:hover ",",&:focus-within ","{opacity:1;}"],ia,ia),yn=m.default.div.withConfig({displayName:"storyListItem__TitleTableCellContainer",componentId:"sc-1w22569-4"})(["display:flex;align-items:center;justify-content:flex-start;","{margin:10px auto;}&:hover ",",&:active ","{opacity:1;}"],ia,ia,ia);function Tn(e){window.getSelection().selectAllChildren(e.target)}function wn(){window.getSelection().removeAllRanges()}const StoryListItem=e=>{let{story:t,renameStory:a,userId:r,storyMenu:s,storyStatus:l}=e;const i=(0,h.useMemo)((()=>t?.locked&&r!==t?.lockUser.id),[t,r]),c=eo(t.title),d=(0,h.useMemo)((()=>bn({menuItems:s.menuItems,story:t,isLocked:i})),[s,t,i]),u=(0,h.useMemo)((()=>d.length?o.createElement(StoryMenu,{menuLabel:(0,M.default)(
/* translators: %s: story title.*/
(0,n.__)("Context menu for %s","web-stories"),c),onMoreButtonSelected:(e,t)=>s.handleMenuToggle(t),contextMenuId:s.contextMenuId,storyId:t.id,menuItems:d,verticalAlign:"center"}):null),[d,c,s,t]);return o.createElement(Sn,{"data-testid":`story-list-item-${t.id}`},o.createElement(Vr,null,o.createElement(Tooltip,{title:i&&t?.lockUser.name?(0,M.default)(
/* translators: %s: user name */
(0,n.__)("%s is currently editing this story","web-stories"),t?.lockUser.name):""},o.createElement(_n,null,o.createElement(gn,t.featuredMediaUrl?{src:t.featuredMediaUrl,alt:(0,M.default)(
/* translators: %s: Story title. */
(0,n.__)("%s Poster image","web-stories"),c),as:"img",decoding:"async"}:null),i&&o.createElement(En,null)))),o.createElement(jr,null,o.createElement(yn,null,a.id===t.id?o.createElement(Ga,{onEditComplete:e=>a.handleOnRenameStory(t,e),onEditCancel:a.handleCancelRename,value:t.title,id:t.id,label:(0,n.__)("Rename story","web-stories")}):o.createElement(o.Fragment,null,o.createElement(mr.Headline,{tabIndex:0,onFocus:Tn,onBlur:wn,size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.XXX_SMALL,as:"h3","aria-label":i?(0,M.default)(
/* translators: 1: story title. 2: user currently editing the story. */
(0,n.__)("%1$s (locked by %2$s)","web-stories"),c,t?.lockUser.name):c},c),u))),o.createElement(jr,null,o.createElement(ya.Text,{as:"span",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},t.author?.name||"—")),o.createElement(jr,null,o.createElement(ya.Text,{as:"span",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Et(t.createdGmt))),o.createElement(jr,null,o.createElement(ya.Text,{as:"span",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Et(t.modifiedGmt))),l!==W.DRAFT&&o.createElement(zr,null,o.createElement(ya.Text,{as:"span",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},K[t?.status])))};var vn=a(86954);const{focusableOutlineCSS:Cn}=vn,In=m.default.div.withConfig({displayName:"listView__ListView",componentId:"sc-15nl0r5-0"})(["width:100%;"]),An=m.default.div.withConfig({displayName:"listView__ArrowIcon",componentId:"sc-15nl0r5-1"})(["width:32px;height:100%;display:inline-grid;color:",";vertical-align:middle;svg{visibility:",";transition:transform 0.15s;",";}"],(e=>{let{theme:t}=e;return t.colors.fg.primary}),(e=>{let{active:t}=e;return t?"visible":"hidden"}),(e=>{let{asc:t}=e;return t&&(0,m.css)(["transform:rotate(180deg);"])})),Ln=m.default.div.withConfig({displayName:"listView__EmptyIconSpace",componentId:"sc-15nl0r5-2"})(["height:32px;width:32px;"]),On=(0,m.default)(An).withConfig({displayName:"listView__ArrowIconWithTitle",componentId:"sc-15nl0r5-3"})(["display:",";position:absolute;top:16px;@media ","{margin-left:4px;}"],(e=>{let{active:t}=e;return!t&&"none"}),(e=>{let{theme:t}=e;return t.breakpoint.mobile})),kn=(0,m.default)(ya.Text).attrs({tabIndex:0,isBold:!0}).withConfig({displayName:"listView__SelectableTitle",componentId:"sc-15nl0r5-4"})(["color:",";cursor:pointer;",";"],(e=>{let{theme:t}=e;return t.colors.blue[70]}),(e=>{let{theme:t}=e;return Cn(t.colors.border.focus,t.colors.bg.secondary)})),Pn={[j.DESC]:j.ASC,[j.ASC]:j.DESC};function StoryListView(e){let{hideStoryList:t,renameStory:a,stories:r,storyMenu:s}=e;const{userId:l,styleConstants:{topOffset:i}}=E(),{filters:c,sortObject:d,updateSort:u}=Ao((e=>{let{state:{filters:t,sortObject:a},actions:{updateSort:r}}=e;return{filters:t,sortObject:a,updateSort:r}})),[p,m]=(0,h.useMemo)((()=>[d?.orderby,d?.order]),[d]),f=(0,h.useMemo)((()=>c.filter((e=>{let{key:t}=e;return"status"===t})).filterId),[c]),b=(0,h.useCallback)((e=>{u(e!==p?{orderby:e,order:$[e]}:{order:Pn[m]})}),[u,p,m]),g=(0,h.useCallback)(((e,t)=>{let{key:a}=e;"Enter"===a&&b(t)}),[b]),_=(0,h.useMemo)((()=>!t&&r.map((e=>o.createElement(StoryListItem,{key:`story-${e.id}`,story:e,userId:l,renameStory:a,storyStatus:f,storyMenu:s})))),[t,a,r,f,s,l]);return o.createElement(In,{"data-testid":"story-list-view"},o.createElement(Nr,{"aria-label":(0,n.__)("List view of created stories","web-stories")},o.createElement(Mr,{topOffset:i},o.createElement(Yr,null,o.createElement(Br,{onClick:()=>b(z.NAME),onKeyDown:e=>g(e,z.NAME)},o.createElement(kn,{"aria-label":(0,n.__)("Title, select to sort table by story title","web-stories"),forwardedAs:"span",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},(0,n.__)("Title","web-stories"))),o.createElement(Gr,{onClick:()=>b(z.NAME),onKeyDown:e=>g(e,z.NAME)},o.createElement(kn,{"aria-hidden":!0,active:p===z.NAME,forwardedAs:"span",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},(0,n.__)("Title","web-stories")),o.createElement(An,{active:p===z.NAME,asc:m===j.ASC},o.createElement(fn.default,null))),o.createElement(Fr,null,o.createElement(kn,{"aria-label":(0,n.__)("Author, select to sort table by story author","web-stories"),onClick:()=>b(z.CREATED_BY),onKeyDown:e=>g(e,z.CREATED_BY),active:p===z.CREATED_BY,forwardedAs:"span",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},(0,n.__)("Author","web-stories")),o.createElement(On,{"aria-hidden":!0,active:p===z.CREATED_BY,asc:m===j.ASC},p===z.CREATED_BY?o.createElement(fn.default,null):o.createElement(Ln,null))),o.createElement(Hr,null,o.createElement(kn,{"aria-label":(0,n.__)("Creation date, select to sort table by date story was created","web-stories"),onClick:()=>b(z.DATE_CREATED),onKeyDown:e=>g(e,z.DATE_CREATED),active:p===z.DATE_CREATED,forwardedAs:"span",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},(0,n.__)("Date Created","web-stories")),o.createElement(On,{"aria-hidden":!0,active:p===z.DATE_CREATED,asc:m===j.ASC},o.createElement(fn.default,null))),o.createElement(Hr,null,o.createElement(kn,{"aria-label":(0,n.__)("Modification date, select to sort table by date story was last modified","web-stories"),onClick:()=>b(z.LAST_MODIFIED),onKeyDown:e=>g(e,z.LAST_MODIFIED),active:p===z.LAST_MODIFIED,forwardedAs:"span",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,isBold:!0},(0,n.__)("Last Modified","web-stories")),o.createElement(On,{"aria-hidden":!0,active:p===z.LAST_MODIFIED,asc:m===j.ASC},o.createElement(fn.default,null))),f!==W.DRAFT&&o.createElement(Ur,null,o.createElement(ya.Text,{as:"span",isBold:!0,size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,n.__)("Publish State","web-stories"))))),o.createElement(Rr,null,_)))}var Nn=a(87098);const Rn=m.default.div.withConfig({displayName:"grid__Gradient",componentId:"sc-fbjjp8-0"})(["position:absolute;bottom:0;height:67%;width:100%;border-radius:",";background:",";"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.gradient.posterOverlay})),xn=m.default.div.withConfig({displayName:"grid__Scrim",componentId:"sc-fbjjp8-1"})(["position:absolute;top:0;width:100%;height:100%;box-sizing:border-box;display:flex;flex-direction:column;justify-content:flex-end;border-radius:",";background:",";"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.opacity.black3})),Mn=m.default.div.withConfig({displayName:"grid__Container",componentId:"sc-fbjjp8-2"})(["position:relative;"]),Dn=m.default.div.withConfig({displayName:"grid__Poster",componentId:"sc-fbjjp8-3"})(["height:100%;width:100%;object-fit:cover;border-radius:",";background:",";"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return t.colors.gradient.placeholder})),Bn=(0,m.default)(ua).withConfig({displayName:"storyGridItem__CustomCardGridItem",componentId:"sc-1vhey8s-0"})(["display:grid;grid-template-columns:100%;grid-template-rows:",";"],(e=>{let{$posterHeight:t}=e;return`${t}px auto`}));Bn.propTypes={$posterHeight:xt().number};const Hn=m.default.div.withConfig({displayName:"storyGridItem__CardWrapper",componentId:"sc-1vhey8s-1"})(["position:absolute;height:100%;width:100%;"]),Un=m.default.a.withConfig({displayName:"storyGridItem__ScrimAnchor",componentId:"sc-1vhey8s-2"})(["position:absolute;top:0;width:100%;height:100%;box-sizing:border-box;border-radius:",";&:hover,&:focus{box-shadow:none;border:",";}"],(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{theme:t}=e;return`4px solid ${t.colors.interactiveBg.active}`})),Fn=m.default.div.withConfig({displayName:"storyGridItem__StyledStoryDisplayContent",componentId:"sc-1vhey8s-3"})(["padding:20px 12px 8px 12px;display:flex;flex-direction:column;width:100%;"]),Gn=m.default.div.withConfig({displayName:"storyGridItem__Row",componentId:"sc-1vhey8s-4"})(["width:100%;display:flex;align-items:flex-end;flex-wrap:wrap;"]),Yn=(0,m.default)(Gn).withConfig({displayName:"storyGridItem__LockedRow",componentId:"sc-1vhey8s-5"})(["position:absolute;top:8px;right:8px;justify-content:flex-end;align-items:center;"]),jn=m.default.div.withConfig({displayName:"storyGridItem__CardDetailsGrid",componentId:"sc-1vhey8s-6"})(["display:grid;grid-template-columns:80% auto;margin-top:4px;"]),zn=m.default.div.withConfig({displayName:"storyGridItem__CardDetailsColumn",componentId:"sc-1vhey8s-7"})(["display:flex;align-items:space-between;flex-direction:column;align-self:flex-end;"]),Vn=(0,m.default)(mr.Headline).attrs({as:"h3",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"storyGridItem__Title",componentId:"sc-1vhey8s-8"})(["overflow:hidden;text-overflow:ellipsis;color:",";margin:0;max-height:calc(1.2em * 3);display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;"],(e=>{let{theme:t}=e;return t.colors.inverted.fg.primary})),$n=(0,m.default)(ya.Text).attrs({forwardedAs:"span",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL}).withConfig({displayName:"storyGridItem__DetailCopy",componentId:"sc-1vhey8s-9"})(["color:",";margin:0;"],(e=>{let{theme:t}=e;return t.colors.inverted.fg.primary})),Zn=m.default.img.withConfig({displayName:"storyGridItem__LockAvatar",componentId:"sc-1vhey8s-10"})(["height:40px;width:40px;border:",";border-radius:",";z-index:3;"],(e=>{let{theme:t}=e;return`2px solid ${t.colors.interactiveBg.brandNormal}`}),(e=>{let{theme:t}=e;return t.borders.radius.small})),qn=(0,m.default)(hn.default).withConfig({displayName:"storyGridItem__LockIcon",componentId:"sc-1vhey8s-11"})(["color:",";display:inline;height:36px;width:36px;margin:-4px -4px -4px -10px;"],(e=>{let{theme:t}=e;return t.colors.inverted.fg.primary})),Wn=e=>{let{author:t,contextMenu:a,displayDate:r,editMode:s,formattedTitle:l,id:i,isLocked:c,lockUser:d={},onEditComplete:u,onEditCancel:p,status:m,title:f}=e;const b=(0,h.useMemo)((()=>{if(!r)return null;switch(m){case W.PUBLISH:return(0,M.default)(
/* translators: %s: published date */
(0,n.__)("Published %s","web-stories"),r);case W.FUTURE:return(0,M.default)(
/* translators: %s: future publish date */
(0,n.__)("Scheduled %s","web-stories"),r);default:return(0,M.default)(
/* translators: %s: last modified date */
(0,n.__)("Modified %s","web-stories"),r)}}),[m,r]),{name:g,avatar:_}=d,E=c&&_&&o.createElement(Yn,null,o.createElement(Tooltip,{position:$r.PLACEMENT.BOTTOM_START,title:g&&(0,M.default)(
/* translators: %s: user name */
(0,n.__)("%s is currently editing this story","web-stories"),g)},o.createElement(Zn,{src:_,alt:g,decoding:"async",height:24,width:24,"data-test-id":"lock-user-avatar"})));return o.createElement(Fn,null,E,s?o.createElement(Ga,{onEditComplete:u,onEditCancel:p,value:f,id:i,label:(0,n.__)("Rename story","web-stories"),isInverted:!0}):o.createElement(Gn,null,c&&o.createElement(qn,null),o.createElement(Vn,null,l)),o.createElement(jn,null,o.createElement(zn,null,m===W.DRAFT&&o.createElement($n,{isBold:!0},(0,n.__)("Draft","web-stories")),m===W.PENDING&&o.createElement($n,{isBold:!0},(0,n.__)("Pending","web-stories")),t?.name&&o.createElement($n,null,t?.name),o.createElement($n,{className:"dashboard-grid-item-date"},b)),o.createElement(zn,null,a)))};function Kn(){return Kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Kn.apply(this,arguments)}const Xn=(0,h.forwardRef)(((e,t)=>{let{onFocus:a,isActive:r,pageSize:s,renameStory:l,story:i,storyMenu:c}=e;const{userId:d}=E(),u=r?0:-1,p=l?{editMode:l?.id===i?.id,onEditComplete:e=>l?.handleOnRenameStory(i,e),onEditCancel:l?.handleCancelRename}:{},f=(0,h.useMemo)((()=>i?.locked&&d!==i?.lockUser.id),[i,d]),b=(0,h.useMemo)((()=>bn({menuItems:c.menuItems,story:i,isLocked:f})),[c,i,f]),g=Et(i?.status===W.DRAFT?i?.modifiedGmt:i?.createdGmt),_=eo(i.title),S=(0,h.useMemo)((()=>b.length?o.createElement(StoryMenu,{menuLabel:f?(0,M.default)(
/* translators: 1: story title. 2: user currently editing the story. */
(0,n.__)("Context menu for %1$s (locked by %2$s)","web-stories"),_,i?.lockUser.name):(0,M.default)(
/* translators: %s: story title.*/
(0,n.__)("Context menu for %s","web-stories"),_),itemActive:r,tabIndex:u,onMoreButtonSelected:c.handleMenuToggle,contextMenuId:c.contextMenuId,storyId:i.id,isInverted:!0,menuItems:b,menuStyleOverrides:(0,m.css)(["margin:0 0 0 auto;"])}):null),[f,_,i?.lockUser?.name,i.id,r,u,c,b]);return o.createElement(Bn,{"data-testid":`story-grid-item-${i.id}`,onFocus:a,$posterHeight:s.height,ref:t,"aria-label":(0,M.default)(
/* translators: %s: story title.*/
(0,n.__)("Details about %s","web-stories"),_)},o.createElement(Mn,null,o.createElement(Hn,null,o.createElement(Dn,Kn({},i.featuredMediaUrl?{alt:(0,M.default)(
/* translators: %s: Story title. */
(0,n.__)("%s Poster image","web-stories"),_),as:"img",src:i.featuredMediaUrl,decoding:"async"}:null,{width:qe,height:Ze})),o.createElement(Rn,null),o.createElement(xn,null,i?.capabilities?.hasEditAction&&o.createElement(Un,{className:"grid-item-anchor","data-testid":"story-editor-grid-link",tabIndex:u,href:i.editStoryLink},o.createElement(Nn.VisuallyHidden,null,(0,M.default)(
/* translators: %s: Story title. */
(0,n.__)("Open %s in Editor","web-stories"),_))),o.createElement(Wn,Kn({author:i.author,contextMenu:S,displayDate:g,formattedTitle:_,id:i.id,isLocked:f,lockUser:i?.lockUser,status:i?.status,title:i.title},p))))))}));Xn.displayName="StoryGridItem";const Jn=Xn,Qn=(0,m.default)(Xt).withConfig({displayName:"storyGridView__StoryGrid",componentId:"sc-1fwq7hb-0"})(["width:calc(100% - ","px);"],De),es=e=>{let{stories:t,pageSize:a,storyMenu:r,renameStory:s,returnStoryFocusId:l}=e;const{isRTL:i}=E(),c=(0,h.useRef)(),d=(0,h.useRef)(),u=(0,h.useRef)({}),[p,m]=(0,h.useState)(),f=(0,h.useRef)(),b=(0,h.useMemo)((()=>t.map((e=>{let{id:t}=e;return t}))),[t]);(0,Nt.default)({containerRef:c,gridRef:d,itemRefs:u,isRTL:i,currentItemId:p,items:t}),(0,h.useEffect)((()=>{if(!p&&l?.value&&!f.current){const e=l?.value;m(e);const t=u.current?.[e]?.querySelectorAll(["button","a"])?.[0];t?.focus()}}),[p,l]),(0,h.useEffect)((()=>{p&&(f.current=p)}),[p]);const g=(0,h.useCallback)(((e,t)=>{if(r.handleMenuToggle(t),t<0&&9===e?.keyCode){const t=!e?.shiftKey?b[b.indexOf(p)+1]:p;l.set(t),f.current=null,m(null)}}),[p,b,l,r]),_=(0,h.useCallback)((()=>{f.current=null,m(null),l.set(null)}),[l]);(0,h.useFocusOut)(c,(()=>m(null)),[]);const S=(0,h.useMemo)((()=>{const e=[U,B,H],t=r.menuItems.map((t=>{const a={...t};return e.includes(t?.value)&&(a.action=e=>{_(),t.action(e)}),a}));return{...r,handleMenuToggle:g,menuItems:t}}),[g,r,_]),y=(0,h.useMemo)((()=>t.map((e=>o.createElement(Jn,{onFocus:()=>m(e.id),isActive:p===e.id,ref:t=>{u.current[e.id]=t},key:e.id,pageSize:a,renameStory:s,story:e,storyMenu:S})))),[p,S,a,s,t]);return o.createElement("div",{ref:c},o.createElement(Qn,{pageSize:a,ref:d,role:"list",ariaLabel:(0,n.__)("Viewing stories","web-stories")},y))},ts="DELETE_STORY";const as=function StoriesView(e){let{loading:t,storyActions:a,stories:r,view:s}=e;const[l,i]=(0,h.useState)(-1),[c,d]=(0,h.useState)(-1),[u,p]=(0,h.useState)(""),[m,f]=(0,h.useState)(null),[b,g]=(0,h.useState)({}),[_,E]=(0,h.useState)(null),{showSnackbar:S}=(0,dn.useSnackbar)(),y=u===ts&&m,w=(0,h.useMemo)((()=>r.map((e=>{let{id:t}=e;return t}))),[r]);(0,h.useEffect)((()=>{if(b.id&&!_){const e=w.indexOf(b.id),t=e>0?-1:1,a=b.isDeleted?t:0,r=w[e+a];r&&E(r)}}),[b,_,w]),(0,h.useEffect)((()=>{u||f(null)}),[u,f]),(0,h.useEffect)((()=>{u&&(g({}),E(null))}),[u]);const v=(0,h.useCallback)(((e,t)=>{d(-1),(0,T.trackEvent)("rename_story"),a.updateStory({...e,title:{raw:t}})}),[a]),C=(0,h.useCallback)((()=>{(0,T.trackEvent)("delete_story"),a.trashStory(m),g({id:m.id,isDeleted:!0}),p("")}),[a,m]),I=(0,h.useCallback)((()=>{i(-1),(0,T.trackEvent)("open_in_editor")}),[]),A=(0,h.useCallback)((e=>{i(-1),d(e.id)}),[]),L=(0,h.useCallback)((e=>{i(-1),(0,T.trackEvent)("duplicate_story"),a.duplicateStory(e),g({id:e.id})}),[a]),O=(0,h.useCallback)((e=>{i(-1),f(e),p(ts)}),[]),k=(0,h.useCallback)((e=>{i(-1),window.navigator.clipboard.writeText(e.link),S({message:(0,M.default)(
/* translators: %s: story title. */
(0,n.__)("%s has been copied to your clipboard.","web-stories"),eo(e.title)),dismissible:!0}),g({id:e.id})}),[S]),P=Y.map((e=>{switch(e?.value){case F:e.action=k;break;case U:e.action=O;break;case H:e.action=L;break;case G:e.action=I;break;case B:e.action=A;break;default:e.action=()=>i(-1)}return e})),N=(0,h.useMemo)((()=>({handleMenuToggle:i,contextMenuId:l,menuItems:P})),[l,P,i]),R=(0,h.useMemo)((()=>({id:c,handleOnRenameStory:v,handleCancelRename:()=>d(-1)})),[v,d,c]),x=(0,h.useMemo)((()=>s.style===Ge.LIST?o.createElement(StoryListView,{hideStoryList:t?.isLoading&&!t?.showStoriesWhileLoading.current,pageSize:s.pageSize,renameStory:R,stories:r,storyMenu:N}):!t?.isLoading||t?.isLoading&&t?.showStoriesWhileLoading.current?o.createElement(es,{isLoading:t?.isLoading,pageSize:s.pageSize,renameStory:R,storyMenu:N,stories:r,returnStoryFocusId:{value:_,set:E}}):null),[t,R,_,r,N,s]);return o.createElement(o.Fragment,null,x,t?.isLoading&&!t?.showStoriesWhileLoading.current&&o.createElement(Ja,null,o.createElement(mn.LoadingSpinner,null)),y&&o.createElement(Ea,{isOpen:!0,contentLabel:(0,n.__)("Dialog to confirm deleting a story","web-stories"),title:(0,n.__)("Delete Story","web-stories"),onClose:()=>{g({id:m.id}),p("")},secondaryText:(0,n.__)("Cancel","web-stories"),secondaryRest:{"aria-label":(0,M.default)(
/* translators: %s: story title. */
(0,n.__)('Cancel deleting story "%s"',"web-stories"),eo(m.title))},primaryText:(0,n.__)("Delete","web-stories"),onPrimary:C,primaryRest:{"aria-label":(0,M.default)(
/* translators: %s: story title. */
(0,n.__)('Confirm deleting story "%s"',"web-stories"),eo(m.title))}},o.createElement(ya.Text,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,M.default)(
/* translators: %s: story title. */
(0,n.__)('Are you sure you want to delete "%s"?',"web-stories"),eo(m.title)))))};function NoAvailableContent(e){let{filtersObject:t}=e;const{search:a}=t;return a?(0,M.default)(
/* translators: %s: search term. */
(0,n.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),a):0!==Object.keys(t).length?(0,n.__)("Sorry, we couldn't find any results","web-stories"):(0,n.__)("Start telling Stories.","web-stories")}NoAvailableContent.propTypes={filtersObject:xt().object};const rs=function(e){let{allPagesFetched:t,canViewDefaultTemplates:a,filtersObject:r={},loading:s,page:l,stories:i,storyActions:c,view:d}=e;return o.createElement(qa.Scrollable,null,o.createElement(ha,null,i.length>0?o.createElement(o.Fragment,null,o.createElement(as,{storyActions:c,stories:i,view:d,loading:s}),o.createElement(pn.default,{canLoadMore:!t,isLoading:s?.isLoading,allDataLoadedMessage:(0,n.__)("No more stories","web-stories"),allDataLoadedAriaMessage:(0,n.__)("All stories are loaded","web-stories"),loadingAriaMessage:(0,n.__)("Loading more stories","web-stories"),onLoadMore:l.requestNextPage})):!s?.isLoading&&o.createElement(jo,null,o.createElement(mr.Headline,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"h3"},o.createElement(NoAvailableContent,{filtersObject:r})),0===Object.keys(r).length&&a&&o.createElement(Mt.Button,{type:Dt.BUTTON_TYPES.PRIMARY,size:Dt.BUTTON_SIZES.MEDIUM,as:"a",href:cr(He.TEMPLATES_GALLERY)},(0,n.__)("Explore Templates","web-stories")))))};const os=function(e){return e.reduce(((e,t)=>!t.title||t?.title.trim().length<=0?e:[...e,{label:t.title,value:t.title}]),[])};var ns=a(52829);const ss="VERTICAL",ls="COLOR",is="TAG",cs="TITLE";const ds=function(e){const t=Object.values(e),a=t.flatMap((e=>e.colors)).map((e=>({label:e.family,value:e.family,type:ls}))),r=t.flatMap((e=>e.tags)).map((e=>({label:e,value:e,type:is}))),o=t.map((e=>e.vertical)).map((e=>({label:e,value:e,type:ss}))),n=t.map((e=>({label:e.title,value:e.title,type:cs})));return[...(0,ns.default)(r,"label"),...(0,ns.default)(a,"label"),...(0,ns.default)(o,"label"),...(0,ns.default)(n,"label")]};const us=function(e){return t=>!e||e.some((e=>{switch(e?.type){case is:return t.tags.map((e=>e.toLowerCase())).includes(e.value.toLowerCase());case ls:return t.colors.map((e=>e.label.toLowerCase())).includes(e.value.toLowerCase());case ss:return t.vertical.toLowerCase().includes(e.value.toLowerCase());case cs:return t.title.toLowerCase().includes(e.value.toLowerCase());default:return!0}}))};var ps=a(56226);const ms=(0,m.default)(ps.default).withConfig({displayName:"storyStatusToggle__StyledPill",componentId:"sc-141pqd7-0"})(["margin:0 2px;white-space:nowrap;& > span{padding-left:8px;color:",";}"],(e=>{let{theme:t,isActive:a}=e;return a?t.colors.gray[20]:t.colors.fg.tertiary}));const fs=function StoryStatusToggle(e){let{initialPageReady:t,totalStoriesByStatus:a,currentStatus:r}=e;const{updateFilter:s,registerFilters:l}=Ao((e=>{let{actions:{updateFilter:t,registerFilters:a}}=e;return{updateFilter:t,registerFilters:a}})),i=(0,o.useCallback)((e=>{s("status",{filterId:e})}),[s]);(0,o.useEffect)((()=>{l([{key:"status",filterId:Q.filters.status}])}),[l]);const c=(0,o.useMemo)((()=>Object.keys(a).reduce(((e,t)=>e+a[t]),0)),[a]),d=(0,o.useMemo)((()=>X.filter((e=>{let{status:t}=e;return Boolean(t in a)&&a[t]>0||t===r})).map((e=>{let{label:t,status:o,value:s}=e;const l=a[o],i=Boolean(!l);return{ariaLabel:(0,M.default)(
/* translators: %s is story status */
(0,n.__)("Filter stories by %s","web-stories"),t),disabled:i,isActive:r===s,value:s,label:t,count:l}}))),[a,r]);return!t||!c||a&&0===Object.keys(a).length?null:o.createElement(o.Fragment,null,d.map((e=>{let{ariaLabel:t,disabled:a,isActive:r,value:n,label:s,count:l}=e;return o.createElement(ms,{key:n,onClick:()=>i(n),isActive:r,disabled:a,"aria-label":t},s,o.createElement("span",null,l))})))};const bs=(0,h.memo)((function(e){let{initialPageReady:t,stories:a,totalStoriesByStatus:r,view:s}=e;const l=(0,h.useMemo)((()=>os(a)),[a]),{filters:i,sortObject:c,updateFilter:d,updateSort:u,registerFilters:p}=Ao((e=>{let{state:{filters:t,sortObject:a},actions:{updateFilter:r,updateSort:o,registerFilters:n}}=e;return{filters:t,updateFilter:r,sortObject:a,updateSort:o,registerFilters:n}})),[m,f,b]=(0,h.useMemo)((()=>{const e=i.find((e=>{let{key:t}=e;return"status"===t})),t=i.find((e=>{let{key:t}=e;return"search"===t}));return[i.filter((e=>{let{key:t}=e;return!["status","search"].includes(t)})),e?.filterId,t?.filterId]}),[i]),g=(0,h.useMemo)((()=>(f?.split(",")||[]).reduce(((e,t)=>e+(r[t]||0)),0)),[f,r]),_=oo({currentFilter:f,isActiveSearch:Boolean(b),totalResults:g,view:je}),E=(0,h.useDebouncedCallback)((async e=>{await(0,T.trackEvent)("search",{search_type:"dashboard",search_term:e}),d("search",{filterId:e})}),300);(0,h.useEffect)((()=>{p([{key:"search"}])}),[p]);const S=(0,h.useCallback)((()=>d("search",{filterId:null})),[d]);return o.createElement(o.Fragment,null,o.createElement(cn,{heading:(0,n.__)("Dashboard","web-stories"),searchPlaceholder:(0,n.__)("Search Stories","web-stories"),searchOptions:l,handleSearchChange:E,showSearch:t,searchValue:b,onClear:S},o.createElement(fs,{initialPageReady:t,totalStoriesByStatus:r,currentStatus:f})),o.createElement(BodyViewOptions,{showGridToggle:!0,filters:m,showSortDropdown:!0,resultsLabel:_,layoutStyle:s.style,handleLayoutSelect:s.toggleStyle,pageSortOptions:Z,pageSortDefaultOption:z.LAST_MODIFIED,handleSortChange:u,currentSort:c}))}));const hs=function MyStories(){const{duplicateStory:e,fetchStories:t,trashStory:a,updateStory:r,allPagesFetched:n,isLoading:s,stories:l,storiesOrderById:i,totalPages:c,totalStoriesByStatus:d}=yo((e=>{let{actions:{storyApi:{duplicateStory:t,fetchStories:a,trashStory:r,updateStory:o}},state:{stories:{allPagesFetched:n,isLoading:s,stories:l,storiesOrderById:i,totalPages:c,totalStoriesByStatus:d}}}=e;return{duplicateStory:t,fetchStories:a,trashStory:r,updateStory:o,allPagesFetched:n,isLoading:s,stories:l,storiesOrderById:i,totalPages:c,totalStoriesByStatus:d}})),{filtersObject:u,sortObject:p}=Ao((e=>{let{state:{filtersObject:t,sortObject:a}}=e;return{filtersObject:t,sortObject:a}})),{apiCallbacks:m,canViewDefaultTemplates:f}=E(),b=(0,h.useRef)(!1);(0,h.useEffect)((()=>(b.current=!0,()=>{b.current=!1})),[]);const{page:g,view:_,showStoriesWhileLoading:S,initialPageReady:y}=function(e){let{filtersObject:t=Q.filters,sortObject:a=Q.sort,isLoading:r=!1,totalPages:o}=e;const[n,s]=(0,h.useState)(Ge.GRID),[l,i]=(0,h.useState)(a),[c,d]=(0,h.useState)(t),[u,p]=(0,h.useState)(1),m=(0,h.useRef)(!1),[f,b]=(0,h.useState)(!1),{pageSize:g}=co({thumbnailMode:n===Ge.LIST,isGrid:n===Ge.GRID}),_=(0,h.useCallback)((e=>{p(uo(e,{MIN:1,MAX:o}))}),[o]),E=(0,h.useCallback)((e=>{i(e),_(1)}),[_]),S=(0,h.useCallback)((e=>{d(e),_(1)}),[_]),y=(0,h.useCallback)((()=>{s(n===Ge.LIST?Ge.GRID:Ge.LIST)}),[n,s]),w=(0,h.useCallback)((()=>{m.current=!0,_(u+1)}),[u,_]);return(0,h.useEffect)((()=>{c?.search?.length&&(0,T.trackEvent)("search",{search_type:"dashboard_stories",search_term:c.search,search_filter:c.status,search_author_filter:c.author,search_order:l.order,search_orderby:l.orderby,search_view:n})}),[c,l,n]),(0,h.useEffect)((()=>{r||(m.current=!1)}),[r]),(0,h.useEffect)((()=>{o&&!f&&b(!0)}),[o,f]),(0,h.useEffect)((()=>{f&&S(t)}),[S,f,t]),(0,h.useEffect)((()=>{f&&E(a)}),[E,f,a]),(0,h.useMemo)((()=>({view:{style:n,toggleStyle:y,pageSize:g},sort:{value:l.orderby,direction:l.order,set:E},filters:{value:c,set:S},page:{value:u,set:p,requestNextPage:w},initialPageReady:f,showStoriesWhileLoading:m})),[n,y,g,l,E,c,S,f,u,w])}({filtersObject:u,sortObject:p,isLoading:s,totalPages:c});(0,h.useEffect)((()=>{t({page:g.value,filters:u,sort:p})}),[t,u,p,g.value,m]);const w=(0,h.useMemo)((()=>i.map((e=>l[e]))),[l,i]);return o.createElement(qa.Provider,null,o.createElement(bs,{initialPageReady:y,stories:w,totalStoriesByStatus:d,view:_}),o.createElement(rs,{allPagesFetched:n,canViewDefaultTemplates:f,filtersObject:u,loading:{isLoading:s,showStoriesWhileLoading:S},page:g,stories:w,storyActions:{duplicateStory:e,trashStory:a,updateStory:r},view:_}),o.createElement(qa.Fixed,null,o.createElement(Pr,null)))},gs=(0,h.createContext)({state:{},actions:{}}),{filters:_s,sort:Es}=we;function TemplateFiltersProvider(e){let{children:t}=e;const[a,r]=(0,h.useReducer)(So,{filters:[],filtersObject:_s,sortObject:Es}),n=(0,h.useCallback)(((e,t)=>{r({type:go,payload:{key:e,value:t}})}),[]),s=(0,h.useCallback)((e=>{r({type:_o,payload:{type:"template",values:e}})}),[]),l=(0,h.useCallback)((e=>{r({type:Eo,payload:{value:e}})}),[]),i=(0,h.useMemo)((()=>({state:a,actions:{updateSort:s,updateFilter:n,registerFilters:l}})),[a,s,n,l]);return o.createElement(gs.Provider,{value:i},t)}function Ss(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.identity;return(0,h.useContextSelector)(gs,e)}const ys=m.default.div.withConfig({displayName:"content__CardWrapper",componentId:"sc-1ilp1n2-0"})(["position:absolute;height:100%;width:100%;transition:opacity ease-in-out 300ms;&:hover{",",","{opacity:1;}}",",","{opacity:",";}"],Rn,xn,Rn,xn,(e=>{let{$isSelected:t}=e;return t?1:0})),Ts=m.default.div.withConfig({displayName:"content__TemplateDisplayContent",componentId:"sc-1ilp1n2-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100%;padding-bottom:16px;a,button{margin:auto auto 0;}"]),ws=(0,m.default)(Dn).attrs({as:"picture"}).withConfig({displayName:"content__PicturePoster",componentId:"sc-1ilp1n2-2"})(["display:block;& > img{height:100%;width:100%;object-fit:fill;border-radius:",";}"],(e=>{let{theme:t}=e;return t.borders.radius.medium})),vs="focus_template",Cs=(0,m.default)(Mt.Button).attrs({type:Dt.BUTTON_TYPES.TERTIARY,size:Dt.BUTTON_SIZES.SMALL}).withConfig({displayName:"templateGridItem__SeeDetailsButton",componentId:"sc-fidkqe-0"})(["background-color:",";"],(e=>{let{theme:t}=e;return t.colors.standard.white})),Is=(0,h.forwardRef)(((e,t)=>{let{onCreateStory:a,onFocus:r,height:s,id:l,isActive:i,posterSrc:c,slug:d,title:u,status:p,onSeeDetailsClick:m=$o.noop}=e;const f=i?0:-1,b=(0,M.default)(
/* translators: %s: Template title. */
(0,n.__)("First page of %s template","web-stories"),u);return o.createElement(ua,{ref:t,id:`template-grid-item-${l}`,className:"templateGridItem","data-testid":`template-grid-item-${l}`,$posterHeight:s,onFocus:r},o.createElement(Mn,null,o.createElement(ys,{$isSelected:i},o.createElement(ws,null,o.createElement("source",{srcSet:c?.webp,type:"image/webp"}),o.createElement("source",{srcSet:c?.png,type:"image/png"}),o.createElement("img",{src:c?.png,alt:b,decoding:"async",width:qe,height:Ze})),o.createElement(Rn,null),o.createElement(xn,{"data-testid":"card-action-container","data-template-slug":d},o.createElement(Ts,null,o.createElement(Cs,{ariaLabel:(0,M.default)(
/* translators: %s: template title.*/
(0,n.__)("Go to detail view of %s","web-stories"),u),onClick:()=>m(l,u),className:vs,tabIndex:f},Ce[p]),a&&o.createElement(Mt.Button,{size:Dt.BUTTON_SIZES.SMALL,type:Dt.BUTTON_TYPES.PRIMARY,onClick:a,tabIndex:f,ariaLabel:(0,M.default)(
/* translators: %s: template title.*/
(0,n.__)("Create new story from %s","web-stories"),u)},(0,n.__)("Use template","web-stories")))))))}));Is.displayName="TemplateGridItem";const As=Is;const Ls=function TemplateGridView(e){let{pageSize:t,templates:a,templateActions:r}=e;const{isRTL:s,apiCallbacks:l}=E(),i=(0,h.useRef)(),c=(0,h.useRef)(),d=(0,h.useRef)({}),[u,p]=(0,h.useState)(null),{handleDetailsToggle:m,createStoryFromTemplate:f}=r||{},b=Boolean(l?.createStoryFromTemplate);(0,Nt.default)({containerRef:i,gridRef:c,itemRefs:d,isRTL:s,currentItemId:u,items:a}),(0,h.useEffect)((()=>{u&&d.current?.[u]?.querySelector(".focus_template")?.focus()}),[u]),(0,h.useFocusOut)(i,(()=>p(null)),[]);const g=(0,h.useMemo)((()=>a.map((e=>{let{id:a,slug:r,status:n,title:s,postersByPage:l}=e;const i=u===a,c=l?.[0];return o.createElement(As,{onCreateStory:b?()=>f(a):po,onFocus:()=>{p(a)},onSeeDetailsClick:m,height:t.height,id:a,isActive:i,key:r,posterSrc:c,ref:e=>{d.current[a]=e},slug:r,status:n,title:s})}))),[a,u,b,m,t.height,f]);return o.createElement("div",{ref:i},o.createElement(Xt,{pageSize:t,role:"list",ref:c,ariaLabel:(0,n.__)("Viewing available templates","web-stories")},g))};const Os=function(e){let{allPagesFetched:t,isLoading:a,page:r,templates:s,view:l,totalTemplates:i,search:c,templateActions:d}=e;const{newStoryURL:u}=E(),p=(0,h.useMemo)((()=>a?o.createElement(Ja,null,o.createElement(mn.LoadingSpinner,null)):i>0?o.createElement(o.Fragment,null,o.createElement(Ls,{templates:s,pageSize:l.pageSize,templateActions:d}),o.createElement(pn.default,{canLoadMore:!t,isLoading:a,allDataLoadedMessage:(0,n.__)("No more templates","web-stories"),allDataLoadedAriaMessage:(0,n.__)("All templates are loaded","web-stories"),loadingAriaMessage:(0,n.__)("Loading more templates","web-stories"),onLoadMore:r.requestNextPage})):o.createElement(jo,null,o.createElement(mr.Headline,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"h3"},c?(0,M.default)(
/* translators: %s: search term. */
(0,n.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),c):(0,n.__)("No templates currently available.","web-stories")),!c&&o.createElement(Mt.Button,{type:Dt.BUTTON_TYPES.PRIMARY,size:Dt.BUTTON_SIZES.MEDIUM,as:"a",href:u},(0,n.__)("Create New Story","web-stories")))),[t,a,u,r.requestNextPage,d,c,s,i,l.pageSize]);return o.createElement(qa.Scrollable,null,o.createElement(ha,null,p))};const ks=function(e){let{isLoading:t,totalTemplates:a,view:r,searchOptions:s=[]}=e;const l=(0,b.useFeature)("enableInProgressTemplateActions"),{filters:i,sortObject:c,updateFilter:d,updateSort:u,registerFilters:p}=Ss((e=>{let{state:{filters:t,sortObject:a},actions:{updateFilter:r,updateSort:o,registerFilters:n}}=e;return{filters:t,sortObject:a,updateFilter:r,updateSort:o,registerFilters:n}})),[m,f]=(0,h.useMemo)((()=>{const e=i.find((e=>{let{key:t}=e;return"status"===t})),t=i.find((e=>{let{key:t}=e;return"search"===t}));return[e?.filterId,t?.filterId]}),[i]),g=(0,h.useDebouncedCallback)((e=>{d("search",{filterId:e})}),300);(0,h.useEffect)((()=>{p([{key:"search"}]),p([{key:"status",filterId:we.filters.status}])}),[p]);const _=(0,h.useCallback)((()=>d("search",{filterId:null})),[d]),E=oo({totalResults:a,currentFilter:m,view:ze});return o.createElement(o.Fragment,null,o.createElement(cn,{heading:(0,n.__)("Explore Templates","web-stories"),searchPlaceholder:(0,n.__)("Search Templates","web-stories"),showSearch:!0,searchOptions:s,searchValue:f,handleSearchChange:g,onClear:_}),o.createElement(BodyViewOptions,{resultsLabel:E,layoutStyle:r.style,handleLayoutSelect:r.toggleStyle,isLoading:t,pageSortOptions:ve,pageSortDefaultOption:ye.POPULAR,currentSort:c,handleSortChange:u,showSortDropdown:l,sortDropdownAriaLabel:(0,n.__)("Choose sort option for display","web-stories")}))};var Ps=a(94320);const Ns=m.default.nav.withConfig({displayName:"header__Nav",componentId:"sc-1wko3r4-0"})(["justify-content:space-between;align-items:center;display:flex;margin:48px auto;width:calc(76% + 121px);"]),Rs=(0,m.default)(Mt.Button).attrs({type:Dt.BUTTON_TYPES.PRIMARY,size:Dt.BUTTON_SIZES.SMALL}).withConfig({displayName:"header__CTAButton",componentId:"sc-1wko3r4-1"})(["padding:10px 16px;"]);const xs=function(e){let{templateTitle:t,templateId:a,templateActions:r,canCreateStory:s}=e;const{createStoryFromTemplate:l,handleDetailsToggle:i}=r||{};return o.createElement(Ns,null,o.createElement(Mt.Button,{type:Dt.BUTTON_TYPES.TERTIARY,variant:Dt.BUTTON_VARIANTS.SQUARE,size:Dt.BUTTON_SIZES.SMALL,"aria-label":(0,n.__)("Close","web-stories"),onClick:i},o.createElement(Ps.default,null)),s&&o.createElement(Rs,{onClick:()=>l(a),"aria-label":(0,M.default)(
/* translators: %s: template title */
(0,n.__)("Use %s template to create new story","web-stories"),t)},(0,n.__)("Use template","web-stories")))};var Ms=a(32214),Ds=a(2039),Bs=a(80908);const Hs=m.default.section.withConfig({displayName:"templateDetails__Panel",componentId:"sc-1cvs5jb-0"})(["padding:16vh 0 14vh 0;"]),Us=m.default.div.withConfig({displayName:"templateDetails__Container",componentId:"sc-1cvs5jb-1"})(["position:relative;width:76%;max-width:","px;margin:0 auto;"],1459.2),Fs=m.default.div.withConfig({displayName:"templateDetails__Inner",componentId:"sc-1cvs5jb-2"})(["display:flex;align-items:start;"]),Gs=m.default.section.attrs({"aria-label":(0,n.__)("Template Details","web-stories")}).withConfig({displayName:"templateDetails__DetailContainer",componentId:"sc-1cvs5jb-3"})(["padding:0 0 0 60px;margin-right:auto;"]),Ys=m.default.div.withConfig({displayName:"templateDetails__TemplateDetails",componentId:"sc-1cvs5jb-4"})(["position:relative;display:flex;width:500px;"]),js=(m.default.section.attrs({"aria-label":(0,n.__)("Related Templates","web-stories")}).withConfig({displayName:"templateDetails__RowContainer",componentId:"sc-1cvs5jb-5"})(["display:flex;flex-wrap:wrap;padding-bottom:40px;margin:0 80px 0;& > h3{padding-bottom:32px;}& > div{width:100%;}"]),(0,m.default)(Hs).withConfig({displayName:"content__StyledPanel",componentId:"sc-jxjpbh-0"})(["padding:0 0 48px 0;"])),zs=(0,m.default)(ya.Text).withConfig({displayName:"content__ByLineText",componentId:"sc-jxjpbh-1"})(["color:",";margin:8px 0 24px;"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),Vs=(0,m.default)(ya.Text).withConfig({displayName:"content__DescriptionText",componentId:"sc-jxjpbh-2"})(["margin-bottom:24px;"]),$s=m.default.div.withConfig({displayName:"content__PaginationContainer",componentId:"sc-jxjpbh-3"})(["position:absolute;top:","px;",""],235,(e=>{let{alignLeft:t}=e;return t?"\n          left: 0;\n          transform: translate(-187.5%, -50%);\n        ":"\n          right: 0;\n          transform: translate(187.5%, -50%);\n        "})),Zs=(0,m.default)(Ms.Chip).attrs({forwardedAs:"li"}).withConfig({displayName:"content__TemplateTag",componentId:"sc-jxjpbh-4"})(["margin-right:12px;margin-bottom:12px;> span{color:"," !important;}"],(e=>{let{theme:t}=e;return t.colors.fg.primary})),qs=m.default.div.withConfig({displayName:"content__MetadataContainer",componentId:"sc-jxjpbh-5"})(["margin-bottom:24px;display:flex;flex-wrap:wrap;align-items:center;"]);const Ws=function DetailsContent(e){let{activeTemplateIndex:t,isRTL:a,filteredTemplatesLength:r,switchToTemplateByOffset:s,template:l}=e;const{postersByPage:i,title:c,description:d,tags:u,colors:p}=l||{},[m,f]=(0,h.useState)([]);(0,h.useEffect)((()=>{i&&f(Object.values(i).map(((e,t)=>({id:t,...e}))))}),[i]);const{NextButton:b,PrevButton:g}=(0,h.useMemo)((()=>{const e=a?t-1:t+1,l=a?t+1:t-1,i=a?!r||t===r-1:!r||0===t,c=a?!r||0===t:!r||t===r-1,d=o.createElement(Mt.Button,{type:Dt.BUTTON_TYPES.TERTIARY,size:Dt.BUTTON_SIZES.SMALL,variant:Dt.BUTTON_VARIANTS.SQUARE,"aria-label":(0,n.__)("View previous template","web-stories"),onClick:()=>{s(l),f([])},disabled:i},o.createElement(Ds.default,{height:32,width:32})),u=o.createElement(Mt.Button,{type:Dt.BUTTON_TYPES.TERTIARY,size:Dt.BUTTON_SIZES.SMALL,variant:Dt.BUTTON_VARIANTS.SQUARE,"aria-label":(0,n.__)("View next template","web-stories"),onClick:()=>{s(e),f([])},disabled:c},o.createElement(Bs.default,{height:32,width:32}));return a?{NextButton:d,PrevButton:u}:{NextButton:u,PrevButton:d}}),[r,t,a,s]),_=l?(0,M.default)(
/* translators: byline. %s: author name. */
(0,n.__)("By %s","web-stories"),l.createdBy):null;return o.createElement(js,null,o.createElement(Us,null,o.createElement($s,{alignLeft:!0},g),o.createElement(Fs,null,o.createElement(jt,{galleryPosters:m,isRTL:a,galleryLabel:(0,n.__)("Template details by page","web-stories")}),o.createElement(Ys,null,o.createElement(Gs,null,o.createElement(Vo,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"h3","data-testid":"template-details-title"},c),o.createElement(zs,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM},_),o.createElement(Vs,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.MEDIUM},d),o.createElement(qs,{role:"list","aria-label":(0,n.__)("Template tags","web-stories")},u.map((e=>o.createElement(Zs,{key:e,disabled:!0},e)))),o.createElement(qs,null,o.createElement(ba,{colors:p,size:32,"aria-label":(0,n.__)("Template colors","web-stories")}))))),o.createElement($s,null,b)))};const Ks=function TemplateDetailsModal(e){let{activeTemplateIndex:t,activeTemplate:a,filteredTemplatesLength:r,isDetailsViewOpen:s,templateActions:i}=e;const{isRTL:c,apiCallbacks:u}=E(),p=Boolean(u?.createStoryFromTemplate),{handleDetailsToggle:m,switchToTemplateByOffset:f}=i||{};return o.createElement(d.Modal,{isOpen:s,onClose:m,contentLabel:(0,M.default)(
/* translators: %s: template title */
(0,n.__)("Template Details for %s","web-stories"),a?.title),overlayStyles:{backgroundColor:`${l.theme.colors.opacity.overlayDark}`},contentStyles:{display:"block",height:"90vh",width:"90vw",backgroundColor:`${l.theme.colors.standard.white}`}},o.createElement(xs,{templateTitle:a?.title,templateId:a?.id,templateActions:i,canCreateStory:p}),o.createElement(Ws,{activeTemplateIndex:t,isRTL:c,filteredTemplatesLength:r,switchToTemplateByOffset:f,template:a}))};const Xs=function ExploreTemplates(){const e=(0,tn.default)(),[t,a]=(0,h.useState)(!1),[r,s]=(0,h.useState)(null),[l,i]=(0,h.useState)(0),{templateIdParam:c,replace:d}=ir((e=>{let{actions:t,state:a}=e;return{templateIdParam:a.queryParams.id,replace:t.replace}})),u=(0,h.useRef)(c),{allPagesFetched:p,isLoading:m,templates:f,templatesOrderById:b,totalPages:g,totalTemplates:_,createStoryFromTemplate:E,fetchExternalTemplates:S}=yo((e=>{let{state:{templates:{allPagesFetched:t,isLoading:a,templates:r,templatesOrderById:o,totalPages:n,totalTemplates:s}},actions:{storyApi:{createStoryFromTemplate:l},templateApi:{fetchExternalTemplates:i}}}=e;return{allPagesFetched:t,isLoading:a,templates:r,templatesOrderById:o,totalPages:n,totalTemplates:s,createStoryFromTemplate:l,fetchExternalTemplates:i}})),{filters:y,sortObject:w,filtersObject:v}=Ss((e=>{let{state:{filters:t,sortObject:a,filtersObject:r}}=e;return{filters:t,sortObject:a,filtersObject:r}})),{page:C,view:I}=function(e){let{totalPages:t,sortObject:a=we.sort,filtersObject:r=we.filters}=e;const[o,n]=(0,h.useState)(a),[s,l]=(0,h.useState)(r),[i,c]=(0,h.useState)(1),{pageSize:d}=co({isGrid:!0}),u=(0,h.useCallback)((e=>{c(uo(e,{MIN:1,MAX:t}))}),[t]),p=(0,h.useCallback)((()=>u(i+1)),[i,u]),m=(0,h.useCallback)((e=>{n(e),u(1)}),[u]),f=(0,h.useCallback)((e=>{l(e),u(1)}),[u]);return(0,h.useMemo)((()=>({view:{style:Ge.GRID,pageSize:d},sort:{value:o.orderby,direction:o.order,set:m},filters:{value:s,set:f},page:{value:i,set:c,requestNextPage:p}})),[d,o,m,i,p,s,f])}({filtersObject:v,sortObject:w,totalPages:g}),[A]=(0,h.useMemo)((()=>[y.find((e=>{let{key:t}=e;return"search"===t}))?.filterId]),[y]),L=(0,h.useMemo)((()=>ds(f)),[f]),O=(0,h.useMemo)((()=>A?L.filter((e=>e.label.toLowerCase().includes(A.toLowerCase()))):L),[L,A]),k=(0,h.useMemo)((()=>b.map((e=>f[e])).filter(us(O))),[b,f,O]),P=(0,h.useMemo)((()=>_!==k.length?k.length:_),[k,_]),N=(0,h.useMemo)((()=>(0,ns.default)(O,"label")),[O]),R=(0,h.useCallback)((e=>{const t=f[e];(0,T.trackEvent)("use_template",{name:t.title,template_id:t.id}),E(t)}),[E,f]),x=(0,h.useCallback)((e=>{const t=k.find((t=>t.id===e));s(t),i(k.findIndex((t=>t.id===e))),u.current&&(u.current=void 0),d(`?id=${t.id}&isLocal=${t.isLocal}`)}),[d,k]),D=(0,h.useCallback)(((t,r)=>{a((a=>{const o=!a;return r&&(0,T.trackScreenView)(r),o&&t&&x(t),o||(d(""),e((0,n.__)("Exit detail templates view","web-stories"))),o}))}),[d,e,x]),B=(0,h.useCallback)((t=>{const a=k[t];s(a),i(t),d(`?id=${a.id}&isLocal=${a.isLocal}`),e((0,M.default)(
/* translators: %s: template title */
(0,n.__)("Viewing %s","web-stories"),a.title))}),[k,d,e]),H=(0,h.useMemo)((()=>({createStoryFromTemplate:R,handleDetailsToggle:D,switchToTemplateByOffset:B})),[R,D,B]);return(0,h.useEffect)((()=>{S()}),[S]),(0,h.useEffect)((()=>{if(u.current&&k.length){if(!k.some((e=>e.id===parseInt(u.current))))return void d("");a(!0),x(parseInt(u.current))}}),[k,d,x]),o.createElement(qa.Provider,null,o.createElement(ks,{isLoading:m&&!_,totalTemplates:P,searchOptions:N,view:I}),o.createElement(Os,{isLoading:m,allPagesFetched:p,page:C,templates:k,totalTemplates:P,search:A,view:I,templateActions:H}),o.createElement(qa.Fixed,null,o.createElement(Pr,null)),o.createElement(Ks,{activeTemplate:r,activeTemplateIndex:l,isDetailsViewOpen:t,templateActions:H,filteredTemplatesLength:k.length}))};const Js=function(){const{storyError:e,templateError:t}=yo((e=>{let{state:{stories:{error:t},templates:{error:a}}}=e;return{storyError:t,templateError:a}})),{showSnackbar:a}=(0,dn.useSnackbar)(),r=(0,h.useDebouncedCallback)((e=>a({message:e,dismissible:!0})),200);(0,h.useEffect)((()=>{e?.id&&r(e.message)}),[e,r]),(0,h.useEffect)((()=>{t?.id&&r(t.message)}),[t,r])};function FiltersProvider(e){let{children:t}=e;return o.createElement(StoryFiltersProvider,null,o.createElement(TemplateFiltersProvider,null,t))}function Qs(){return Qs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Qs.apply(this,arguments)}const el=e=>{let{additionalRoutes:t}=e;const{currentPath:a,templateId:r,availableRoutes:s}=ir((e=>{let{state:t}=e;return{...t,templateId:t.queryParams.id}})),{push:l,setAvailableRoutes:i}=ir((e=>{let{actions:t}=e;return t})),{canViewDefaultTemplates:c,leftRailSecondaryNavigation:d=[],documentTitleSuffix:u=(0,n.__)("Web Stories","web-stories")}=E(),{addInitialFetchListener:p}=yo((e=>{let{actions:{storyApi:{addInitialFetchListener:t}},state:{templates:{templates:a}}}=e;return{currentTemplate:void 0!==r?a[r]?.title:void 0,addInitialFetchListener:t}})),m=(0,h.useRef)(a===He.DASHBOARD),[f,b]=(0,h.useState)(!m.current);(0,h.useEffect)((()=>p?.((e=>{e?.all<=0&&m.current&&c&&l(He.TEMPLATES_GALLERY),b(!0)}))),[p,l,a,c]),(0,h.useEffect)((()=>{if(s.length>0)return;const e=t?t.map((e=>{let{path:t}=e;return t})):[];i([...Object.values(He),...e])}),[t,s.length,i]),(0,h.useEffect)((()=>{if(!f)return;const e=d.find((e=>e.value===a)),t=Ue[a]||e?.label||Ue.DEFAULT;document.title=(0,M.default)(
/* translators: Admin screen title. 1: Admin screen name, 2: Network or site name. */
(0,n.__)("%1$s ‹ %2$s","web-stories"),t,u),(0,T.trackScreenView)(t)}),[a,f,d,u]),Js();const{clearSnackbar:g,removeSnack:_,placement:S,currentSnacks:y}=(0,dn.useSnackbar)(),w=(0,h.usePrevious)(a);return(0,h.useEffect)((()=>{a!==w&&g()}),[g,a,w]),o.createElement(o.Fragment,null,o.createElement(Wa,null,o.createElement(vr,null),o.createElement(FiltersProvider,null,o.createElement(Ka,null,o.createElement(dr,{exact:!0,isDefault:!0,path:He.DASHBOARD,component:o.createElement(hs,null)}),c&&o.createElement(dr,{path:He.TEMPLATES_GALLERY,component:o.createElement(Xs,null)}),t&&t.map((e=>o.createElement(dr,Qs({key:e.path},e))))))),o.createElement(un.Snackbar.Container,{notifications:y,onRemove:_,placement:S,max:1}))};var tl=a(15705),al=a(88272);window.wp.domReady;var rl=a(20886),ol=a(19167);const nl=window.wp.apiFetch,sl=["id","title","status","date","date_gmt","modified","modified_gmt","story_poster","link","preview_link","edit_link","body","status","headers"].join(","),ll=["id","title"],il=["title","link"],cl="wp:lock,wp:lockuser,author",dl="wp:action-edit",ul="wp:action-delete";function pl(e){const{id:t,title:a,status:r,date:o,date_gmt:n,modified:s,modified_gmt:l,link:i,preview_link:c,edit_link:d,story_poster:u,_embedded:{author:p=[{name:"",id:0}],"wp:lock":m=[{locked:!1}],"wp:lockuser":f=[{id:0,name:""}]}={},_links:b={}}=e;if(!t)return null;const h={hasEditAction:Object.prototype.hasOwnProperty.call(b,dl),hasDeleteAction:Object.prototype.hasOwnProperty.call(b,ul)};return{id:t,status:r,title:a.raw,created:o,createdGmt:`${n}Z`,modified:s,modifiedGmt:`${l}Z`,author:{name:p[0].name,id:p[0].id},locked:m[0]?.locked,lockUser:{id:f[0].id,name:f[0].name,avatar:f[0]?.avatar_urls?.[96]||null},bottomTargetAction:d,featuredMediaUrl:u?.url,editStoryLink:d,previewLink:c,link:i,capabilities:h}}function ml(e,t){const{page:a=1,perPage:r=$e,filters:o={},sort:n={}}=t,s={...{_embed:cl,context:"edit",_web_stories_envelope:!0,_fields:sl,...Q.filters,...Q.sort},page:a,per_page:r,...o,...n};return nl({path:(0,rl.default)(e.api.stories,s)}).then((e=>{let{body:t,headers:a}=e;const r=a&&parseInt(a["X-WP-TotalPages"]),o=a&&JSON.parse(a["X-WP-TotalByStatus"]),n=[];return{stories:t.reduce(((e,t)=>t?(n.push(t.id),e[t.id]=pl(t),e):e),{}),fetchedStoryIds:n,totalPages:r,totalStoriesByStatus:o}}))}function fl(e,t){const a=(0,rl.default)(`${e.api.stories}${t}`,{_method:"DELETE"});return nl({path:a,method:"POST"})}function bl(e,t){const a=(0,rl.default)(`${e.api.stories}${t.id}/`,{_embed:cl}),r={id:t.id,author:t.author.id,title:t.title?.raw||t.title};return nl({path:a,data:r,method:"POST"}).then(pl)}const hl=(e,t)=>{const a=(0,rl.default)(e.api.stories,{_fields:"edit_link"}),{pages:r,version:o,colors:n}=t,s={featuredMedia:{id:0,url:""},publisherLogo:{url:""},title:""},l={pages:r,featuredMedia:s.featuredMedia,title:s.title,status:"auto-draft",meta:{web_stories_publisher_logo:s.publisherLogo.id}},i=n.map((e=>{let{color:t}=e;return(0,pa.default)(t)}));return nl({path:a,data:{...l,story_data:{pages:r,version:o,autoAdvance:!0,defaultPageDuration:7,currentStoryStyles:{colors:i}}},method:"POST"}).then(ol.snakeToCamelCaseObjectKeys)};function gl(e,t){const a=(0,rl.default)(e.api.stories,{_embed:cl,_fields:sl});return nl({path:a,data:{original_id:t.id,status:"draft"},method:"POST"}).then(pl)}function _l(e,t){return nl({path:(0,rl.default)(e.api.users,{per_page:"100",who:"authors",search:t})})}async function El(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=await nl({path:(0,rl.default)(e.api.taxonomies,{type:"web-story",context:"edit",...t})});return Object.values(a).map((e=>(e.restPath=e._links?.["wp:items"]?.[0]?.href,delete e._links,(0,ol.snakeToCamelCaseObjectKeys)(e,["capabilities","visibility"]))))}function Sl(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return nl({url:(0,rl.default)(t,a)})}function yl(e,t){return nl({path:(0,rl.default)(e.api.products,{per_page:1,search:t})})}var Tl=a(95370);const wl={SETTINGS:{UPDATED:(0,n.__)("Setting saved.","web-stories")}},vl={UPLOAD_PUBLISHER_LOGO:{MESSAGE:(0,n.__)("Unable to add publisher logo","web-stories"),MESSAGE_PLURAL:(0,n.__)("Unable to add publisher logos","web-stories")},REMOVE_PUBLISHER_LOGO:{MESSAGE:(0,n.__)("Unable to remove publisher logo","web-stories")},REMOVE_FONT:{MESSAGE:(0,n.__)("Unable to remove font","web-stories")},UPDATE_PUBLISHER_LOGO:{MESSAGE:(0,n.__)("Unable to update publisher logo","web-stories")},LOAD_PUBLISHER_LOGOS:{MESSAGE:(0,n.__)("Unable to load publisher logos","web-stories")},LOAD_SETTINGS:{MESSAGE:(0,n.__)("Unable to load settings","web-stories")},UPDATE_EDITOR_SETTINGS:{MESSAGE:(0,n.__)("Unable to update settings data","web-stories")}},Cl="/editor-settings",Il=[{value:Cl,label:(0,n.__)("Settings","web-stories")},{value:(0,n.__)("https://wordpress.org/support/plugin/web-stories/","web-stories"),label:(0,n.__)("Support","web-stories"),isExternal:!0,trackingEvent:"click_support_page"}],Al="none",Ll="adsense",Ol="admanager",kl={DEFAULT:"default",DISABLED:"disabled",CUSTOM:"custom"},Pl="none",Nl="woocommerce",Rl="shopify",xl=(0,m.createGlobalStyle)(["body.web-story_page_stories-dashboard #wpbody{",";}.","{top:","px !important;left:","px !important;}body.folded .","{left:","px !important;}"],Tl.scrollbarCSS,d.OVERLAY_CLASS,32,160,d.OVERLAY_CLASS,36);const Ml=function(){const{currentPath:e}=ir((e=>{let{state:{currentPath:t}}=e;return{currentPath:t}}));(0,h.useEffect)((()=>{let t=`a[href$="#${e}"]`;e.length<=1&&(t='a[href$="page=stories-dashboard"]');const a=document.querySelectorAll("#menu-posts-web-story ul.wp-submenu li");a?.forEach((e=>{e.classList.remove("current"),e.querySelector("a")?.classList.remove("current"),e.querySelector("a")?.removeAttribute("aria-current")})),a?.forEach((e=>{e.querySelector(t)&&(e.classList.add("current"),e.querySelector("a")?.classList.add("current"),e.querySelector("a")?.setAttribute("aria-current","page"))}))}),[e])},Dl=(0,h.createContext)({state:{},actions:{}});const Bl=function(e){return(0,h.useContextSelector)(Dl,e??h.identity)};const Hl={getItemByKey:function(e){let t=null;try{const a=localStorage.getItem(e);t=JSON.parse(a)}catch(e){(0,T.trackError)("local_storage_read",e.message)}return t},setItemByKey:function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){(0,T.trackError)("local_storage_write",e.message)}}},Ul="web_stories_tracking_optin_banner_closed";function Fl(){const e=localStorage.getItem(Ul);return Boolean(JSON.parse(e))}function Gl(){const{showSnackbar:e}=(0,dn.useSnackbar)(),[t,a]=(0,h.useState)(Fl),[r,o]=(0,h.useState)(!1),{currentUser:n,toggleWebStoriesTrackingOptIn:s}=Bl((e=>{let{state:{currentUser:t},actions:{usersApi:{toggleWebStoriesTrackingOptIn:a}}}=e;return{currentUser:t,toggleWebStoriesTrackingOptIn:a}})),{currentPath:l}=ir((e=>{let{state:{currentPath:t}}=e;return{currentPath:t}})),i=void 0!==n.data.meta?.webStoriesTrackingOptin,c=Boolean(n.data.meta?.webStoriesTrackingOptin);(0,h.useEffect)((()=>{c?(0,T.enableTracking)():(0,T.disableTracking)()}),[c]);const d=(0,h.useCallback)((()=>{s(),Hl.setItemByKey(Ul,!0),o(!0),e({"aria-label":wl.SETTINGS.UPDATED,message:wl.SETTINGS.UPDATED,dismissible:!0})}),[e,s]),u=(0,h.useCallback)((()=>{a(!0),Hl.setItemByKey(Ul,!0)}),[]);let p=!0;return(t||l===Cl||!i||!r&&c)&&(p=!1),{bannerVisible:p,optedIn:c,disabled:n.isUpdating,closeBanner:u,toggleWebStoriesTrackingOptIn:d}}const Yl=function(){const{settingsError:e,mediaError:t,settingSaved:a,publisherLogosError:r}=Bl((e=>{let{state:{settings:{error:t,settingSaved:a},media:{error:r},publisherLogos:{error:o,settingSaved:n}}}=e;return{settingsError:t,mediaError:r,settingSaved:a||n,publisherLogosError:o}})),{showSnackbar:o}=(0,dn.useSnackbar)(),n=(0,h.useDebouncedCallback)((e=>o({"aria-label":e,message:e,dismissible:!0})),200);(0,h.useEffect)((()=>{e?.id&&n(e.message)}),[e,n]),(0,h.useEffect)((()=>{a&&n(wl.SETTINGS.UPDATED)}),[n,a]),(0,h.useEffect)((()=>{t?.id&&n(t.message)}),[t,n]),(0,h.useEffect)((()=>{r?.id&&n(r.message)}),[r,n])},jl=m.default.div.withConfig({displayName:"editorSettings__Wrapper",componentId:"sc-1y9ilpk-0"})([""]),zl=(0,m.default)(ha).withConfig({displayName:"editorSettings__Main",componentId:"sc-1y9ilpk-1"})(["display:flex;flex-direction:column;padding-top:36px;margin-top:20px;margin-bottom:56px;max-width:945px;"]),Vl=m.default.form.withConfig({displayName:"editorSettings__SettingForm",componentId:"sc-1y9ilpk-2"})(["display:grid;grid-template-columns:27% minmax(400px,1fr);column-gap:6.56%;padding-bottom:52px;@media ","{grid-template-columns:100%;row-gap:20px;}"],(e=>{let{theme:t}=e;return t.breakpoint.mobile})),$l=(0,m.default)(mr.Headline).attrs({as:"h3"}).withConfig({displayName:"editorSettings__SettingHeading",componentId:"sc-1y9ilpk-3"})(["",";margin:8px 0;"],(e=>{let{theme:t}=e;return Oa.expandPresetStyles({preset:{...t.typography.presets.label[ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.LARGE]},theme:t})})),Zl=(0,m.default)(ea.Link).withConfig({displayName:"editorSettings__InlineLink",componentId:"sc-1y9ilpk-4"})(["display:inline-block;"]),ql=(0,m.default)(ya.Text).withConfig({displayName:"editorSettings__HelperText",componentId:"sc-1y9ilpk-5"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),Wl=(0,m.default)(ya.Text).withConfig({displayName:"editorSettings__ConnectionHelperText",componentId:"sc-1y9ilpk-6"})(["padding-top:12px;color:",";"],(e=>{let{hasError:t,theme:a}=e;return t?a.colors.fg.negative:a.colors.fg.tertiary})),Kl=(0,m.default)(ya.Text).withConfig({displayName:"editorSettings__CenterMutedText",componentId:"sc-1y9ilpk-7"})(["color:",";text-align:center;"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),Xl=(0,m.default)(ql).withConfig({displayName:"editorSettings__SettingSubheading",componentId:"sc-1y9ilpk-8"})(["padding:8px 0;"]),Jl=(0,m.default)(ql).withConfig({displayName:"editorSettings__TextInputHelperText",componentId:"sc-1y9ilpk-9"})(["padding-top:12px;"]),Ql=(0,m.default)(ya.Text).withConfig({displayName:"editorSettings__CheckboxLabel",componentId:"sc-1y9ilpk-10"})(["display:flex;justify-content:flex-start;margin-top:8px;cursor:pointer;"]),ei=(0,m.default)(ql).withConfig({displayName:"editorSettings__CheckboxLabelText",componentId:"sc-1y9ilpk-11"})(["margin-left:8px;"]),ti=(0,m.default)(Kl).withConfig({displayName:"editorSettings__Error",componentId:"sc-1y9ilpk-12"})(["padding-bottom:10px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.negative})),ai=m.default.div.withConfig({displayName:"editorSettings__UploadedContainer",componentId:"sc-1y9ilpk-13"})(["display:grid;grid-template-columns:repeat(auto-fill,102px);grid-auto-rows:102px;grid-column-gap:12px;grid-row-gap:20px;padding-bottom:20px;margin-bottom:4px;border:1px solid transparent;",";"],Vt.focusableOutlineCSS),ri=m.default.div.withConfig({displayName:"editorSettings__GridItemContainer",componentId:"sc-1y9ilpk-14"})(["position:relative;",";&:hover,&:focus-within{button{opacity:1 !important;}}"],(e=>{let{active:t,theme:a}=e;return t&&(0,m.css)(["border:1px solid ",";border-radius:",";"],a.colors.border.defaultActive,a.borders.radius.small)})),oi=m.default.button.withConfig({displayName:"editorSettings__GridItemButton",componentId:"sc-1y9ilpk-15"})(["display:block;background-color:transparent;border:2px solid transparent;width:100%;height:100%;border-radius:4px;padding:0;",";"],Vt.focusableOutlineCSS),ni=m.default.img.withConfig({displayName:"editorSettings__Logo",componentId:"sc-1y9ilpk-16"})(["object-fit:cover;width:100%;height:100%;border-radius:4px;"]),si=m.default.div.withConfig({displayName:"editorSettings__MenuContainer",componentId:"sc-1y9ilpk-17"})(["position:absolute;top:0;width:100%;height:100%;"]),li=(0,m.default)(Mt.Button).attrs({size:Dt.BUTTON_SIZES.SMALL,type:Dt.BUTTON_TYPES.SECONDARY,variant:Dt.BUTTON_VARIANTS.CIRCLE}).withConfig({displayName:"editorSettings__LogoMenuButton",componentId:"sc-1y9ilpk-18"})(["opacity:",";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"],(e=>{let{isActive:t,menuOpen:a}=e;return a||t?1:0})),ii=(0,m.default)(Mt.Button).withConfig({displayName:"editorSettings__SaveButton",componentId:"sc-1y9ilpk-19"})(["height:36px;"]),ci=(0,m.default)(Mt.Button).withConfig({displayName:"editorSettings__TestConnectionButton",componentId:"sc-1y9ilpk-20"})(["height:36px;margin-top:12px;"]),di=m.default.div.withConfig({displayName:"editorSettings__InlineForm",componentId:"sc-1y9ilpk-21"})(["display:flex;align-items:flex-start;"]),ui=m.default.label.withConfig({displayName:"editorSettings__VisuallyHiddenLabel",componentId:"sc-1y9ilpk-22"})(Sa.visuallyHidden),pi=(0,m.default)(Ua).withConfig({displayName:"editorSettings__SettingsTextInput",componentId:"sc-1y9ilpk-23"})(["margin-right:8px;"]),mi=(m.default.span.withConfig({displayName:"editorSettings__VisuallyHiddenDescription",componentId:"sc-1y9ilpk-24"})(Sa.visuallyHidden),(0,m.default)(Vl).withConfig({displayName:"editorSettings__MultilineForm",componentId:"sc-1y9ilpk-25"})(["margin-bottom:28px;","{margin-top:20px;}"],di)),fi={SLOT_ID_LABEL:(0,n.__)("Monetization type","web-stories"),HELPER_MESSAGE_ADSENSE:(0,n.__)("Learn more about <a>how to monetize your Web Stories</a> using AdSense. Once configured, AdSense will determine where and how to insert ads into the story. Consult <help>AdSense Help</help> for any further assistance.","web-stories"),HELPER_MESSAGE_ADMANAGER:(0,n.__)("Learn how to <a>enable programmatic demand in Web Stories</a> through Ad Manager.","web-stories"),HELPER_LINK_ADSENSE:(0,n.__)("https://support.google.com/adsense/answer/10175505","web-stories"),HELPER_LINK_ADSENSE_HELP:(0,n.__)("https://support.google.com/adsense/","web-stories"),HELPER_LINK_ADMANAGER:(0,n.__)("https://support.google.com/admanager/answer/9416436","web-stories")},bi=[{label:(0,n._x)("None","ad network","web-stories"),value:Al},{label:(0,n.__)("Google AdSense","web-stories"),value:Ll},{label:(0,n.__)("Google Ad Manager","web-stories"),value:Ol}];const hi=function AdNetworkSettings(e){let{adNetwork:t,handleUpdate:a}=e;const[r,n]=(0,h.useState)(t);(0,h.useEffect)((()=>n(t)),[t]);const s=(0,h.useMemo)((()=>Ol===r?fi.HELPER_MESSAGE_ADMANAGER:Ll===r?fi.HELPER_MESSAGE_ADSENSE:null),[r]),l=(0,h.useMemo)((()=>Ol===r?fi.HELPER_LINK_ADMANAGER:Ll===r?fi.HELPER_LINK_ADSENSE:null),[r]),i=(0,h.useCallback)((e=>(0,T.trackClick)(e,"click_monetization_docs")),[]);return o.createElement(o.Fragment,null,o.createElement(Lo.DropDown,{ariaLabel:fi.SLOT_ID_LABEL,options:bi,selectedValue:r,onMenuItemClick:(e,t)=>a(t),fillWidth:!0}),s&&o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o.createElement(bo.default,{mapping:{a:o.createElement(Zl,{href:l,rel:"noreferrer",target:"_blank",onClick:i,size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL}),help:o.createElement(Zl,{href:fi.HELPER_LINK_ADSENSE_HELP,rel:"noreferrer",target:"_blank",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL})}},s)))},gi=/^\/\d+(,\d+)?(\/[\w\d_\-.*\\!<:()]{1,99}[^/])*$/;const _i={SLOT_ID_CONTEXT:(0,M.default)(
/* translators: %s: example value. */
(0,n.__)("Example: %s","web-stories"),"/123456789/a4a/amp_story_dfp_example"),SLOT_ID_PLACEHOLDER:(0,n.__)("Enter your Slot ID","web-stories"),SLOT_ID_LABEL:(0,n.__)("Google Ad Manager Slot ID","web-stories"),INPUT_ERROR:(0,n.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,n.__)("Save","web-stories")};const Ei=function GoogleAdManagerSettings(e){let{slotId:t,handleUpdate:a}=e;const[r,n]=(0,h.useState)(t),[s,l]=(0,h.useState)(""),i=r!==t&&!s,c=!i;(0,h.useEffect)((()=>{n(t)}),[t]);const d=(0,h.useCallback)((e=>{const{value:t}=e.target;n(t),0===t.length||function(){return Boolean((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase().match(gi))}(t)?l(""):l(_i.INPUT_ERROR)}),[]),u=(0,h.useCallback)((()=>{i&&a(r)}),[i,r,a]),p=(0,h.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),u())}),[u]);return o.createElement(o.Fragment,null,o.createElement(di,null,o.createElement(ui,{htmlFor:"adManagerSlotId"},_i.SLOT_ID_LABEL),o.createElement(pi,{id:"adManagerSlotId","aria-label":_i.SLOT_ID_LABEL,value:r,onChange:d,onKeyDown:p,placeholder:_i.SLOT_ID_PLACEHOLDER,hasError:Boolean(s),hint:s}),o.createElement(ii,{type:Dt.BUTTON_TYPES.SECONDARY,size:Dt.BUTTON_SIZES.SMALL,disabled:c,onClick:u},_i.SUBMIT_BUTTON)),o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},_i.SLOT_ID_CONTEXT))},Si=/^(ca-)?pub-\d{16}$/;const yi=/^\d{10}$/;const Ti={PUBLISHER_ID_CONTEXT:(0,M.default)(
/* translators: 1: first example. 2: second example. */
(0,n.__)("Example: %1$s or %2$s. <a>Find your AdSense Publisher ID</a>.","web-stories"),"pub-1234567891234567","ca-pub-1234567891234567"),PUBLISHER_ID_CONTEXT_LINK:(0,n.__)("https://support.google.com/adsense/answer/105516","web-stories"),PUBLISHER_ID_PLACEHOLDER:(0,n.__)("Enter your Publisher ID","web-stories"),PUBLISHER_ID_LABEL:(0,n.__)("Google AdSense Publisher ID","web-stories"),SLOT_ID_CONTEXT:(0,M.default)(
/* translators: %s: example value. */
(0,n.__)("Example: %s. Copy the slot ID from <a>your ad unit’s code</a>. The same ad unit will be used for all of your Web Stories.","web-stories"),"1234567890"),SLOT_ID_CONTEXT_LINK:(0,n.__)("https://support.google.com/adsense/answer/9274019","web-stories"),SLOT_ID_PLACEHOLDER:(0,n.__)("Enter your Slot ID","web-stories"),SLOT_ID_LABEL:(0,n.__)("Google AdSense Slot ID","web-stories"),INPUT_ERROR:(0,n.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,n.__)("Save","web-stories")};const wi=function GoogleAdSenseSettings(e){let{publisherId:t,slotId:a,handleUpdatePublisherId:r,handleUpdateSlotId:n}=e;const[s,l]=(0,h.useState)(t),[i,c]=(0,h.useState)(""),d=s!==t&&!i,u=!d,[p,m]=(0,h.useState)(a),[f,b]=(0,h.useState)(""),g=p!==a&&!f,_=!g;(0,h.useEffect)((()=>{l(t)}),[t]);const E=(0,h.useCallback)((e=>{const{value:t}=e.target;l(t),0===t.length||function(){return Boolean((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase().match(Si))}(t)?c(""):c(Ti.INPUT_ERROR)}),[]),S=(0,h.useCallback)((()=>{d&&r(s)}),[d,s,r]),y=(0,h.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),S())}),[S]);(0,h.useEffect)((()=>{m(a)}),[a]);const w=(0,h.useCallback)((e=>{const{value:t}=e.target;m(t),0===t.length||function(){return Boolean((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase().match(yi))}(t)?b(""):b(Ti.INPUT_ERROR)}),[]),v=(0,h.useCallback)((()=>{g&&n(p)}),[g,p,n]),C=(0,h.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),v())}),[v]),I=(0,h.useCallback)((e=>(0,T.trackClick)(e,"click_adsense_publisher_id_docs")),[]);return o.createElement(o.Fragment,null,o.createElement(di,null,o.createElement(ui,{htmlFor:"adSensePublisherId"},Ti.PUBLISHER_ID_LABEL),o.createElement(pi,{"aria-label":Ti.PUBLISHER_ID_LABEL,id:"adSensePublisherId",name:"adSensePublisherId","data-testid":"adSensePublisherId",value:s,onChange:E,onKeyDown:y,placeholder:Ti.PUBLISHER_ID_PLACEHOLDER,hasError:Boolean(i),hint:i}),o.createElement(ii,{type:Dt.BUTTON_TYPES.SECONDARY,size:Dt.BUTTON_SIZES.SMALL,disabled:u,onClick:S,"data-testid":"adSensePublisherIdButton"},Ti.SUBMIT_BUTTON)),o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o.createElement(bo.default,{mapping:{a:o.createElement(Zl,{href:Ti.PUBLISHER_ID_CONTEXT_LINK,rel:"noreferrer",target:"_blank",onClick:I,size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL})}},Ti.PUBLISHER_ID_CONTEXT)),o.createElement(di,null,o.createElement(ui,{htmlFor:"adSenseSlotId"},Ti.SLOT_ID_LABEL),o.createElement(pi,{id:"adSenseSlotId","aria-label":Ti.SLOT_ID_LABEL,name:"adSenseSlotId","data-testid":"adSenseSlotId",value:p,onChange:w,onKeyDown:C,placeholder:Ti.SLOT_ID_PLACEHOLDER,hasError:Boolean(f),hint:f}),o.createElement(ii,{type:Dt.BUTTON_TYPES.SECONDARY,size:Dt.BUTTON_SIZES.SMALL,disabled:_,onClick:v,"data-testid":"adSenseSlotIdButton"},Ti.SUBMIT_BUTTON)),o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o.createElement(bo.default,{mapping:{a:o.createElement(Zl,{href:Ti.SLOT_ID_CONTEXT_LINK,rel:"noreferrer",target:"_blank",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL})}},Ti.SLOT_ID_CONTEXT)))},vi={SECTION_HEADING:(0,n.__)("Monetization","web-stories"),HELPER_MESSAGE_NONE:(0,n.__)("Monetize your content by showing ads in your Web Stories. <a>Learn more</a>.","web-stories"),HELPER_LINK_NONE:(0,n.__)("https://amp.dev/documentation/guides-and-tutorials/develop/advertise_amp_stories/","web-stories"),SITE_KIT_NOT_INSTALLED:(0,n.__)("Install <a>Site Kit by Google</a> to easily enable Google AdSense for Web Stories.","web-stories"),SITE_KIT_INSTALLED:(0,n.__)("Use Site Kit by Google to easily<a>activate Google AdSense</a> for Web Stories.","web-stories"),SITE_KIT_IN_USE:(0,n.__)("Site Kit by Google has already enabled Google AdSense for your Web Stories, all changes to your ad configuration should occur there.","web-stories")};const Ci=function AdManagement(e){let{updateSettings:t,adNetwork:a,publisherId:r,adSenseSlotId:n,adManagerSlotId:s,siteKitStatus:l}=e;const{adsenseActive:i,installed:c,adsenseLink:d}=l,u=(0,h.useCallback)((e=>(0,T.trackClick)(e,"monetization","dashboard",vi.HELPER_LINK_NONE)),[]),p=(0,h.useCallback)((e=>t({adSensePublisherId:e})),[t]),m=(0,h.useCallback)((e=>t({adSenseSlotId:e})),[t]),f=(0,h.useCallback)((e=>t({adManagerSlotId:e})),[t]),b=(0,h.useCallback)((e=>{t({adNetwork:e}),(0,T.trackEvent)("change_ad_network",{name:e})}),[t]),g=(0,h.useCallback)((e=>(0,T.trackClick)(e,"click_site_kit_link")),[]),_=(0,h.useMemo)((()=>i?null:o.createElement(bo.default,{mapping:{a:o.createElement(Zl,{href:d,rel:"noreferrer",target:"_blank",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:g})}},c?vi.SITE_KIT_INSTALLED:vi.SITE_KIT_NOT_INSTALLED)),[i,c,d,g]);return o.createElement(mi,{onSubmit:e=>e.preventDefault()},o.createElement("div",null,o.createElement($l,null,vi.SECTION_HEADING),o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o.createElement(bo.default,{mapping:{a:o.createElement(Zl,{href:vi.HELPER_LINK_NONE,rel:"noreferrer",target:"_blank",onClick:u,size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL})}},vi.HELPER_MESSAGE_NONE)),o.createElement(Xl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},_)),i?o.createElement("div",null,o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},vi.SITE_KIT_IN_USE)):o.createElement("div",null,o.createElement(hi,{handleUpdate:b,adNetwork:a}),Ll===a&&o.createElement(wi,{handleUpdatePublisherId:p,handleUpdateSlotId:m,publisherId:r,slotId:n,siteKitStatus:l}),Ol===a&&o.createElement(Ei,{handleUpdate:f,slotId:s})))};var Ii=a(25252);Rt.shape({value:Rt.number,set:Rt.func}).isRequired,Rt.number,Rt.bool,Rt.arrayOf(Rt.shape({disabled:Rt.bool,href:Rt.string,label:Rt.string.isRequired,openNewTab:Rt.bool,onClick:Rt.func,onFocus:Rt.func})).isRequired,Rt.func.isRequired,Rt.shape({url:Rt.string,title:Rt.string,id:Rt.number,active:Rt.bool}).isRequired;const Ai=function PopoverLogoContextMenu(e){let{isActive:t,idx:a,publisherLogo:r,contextMenuId:s,onMenuItemToggle:l,items:i}=e;const c=s.value===r.id,d=t?0:-1,u=(0,h.useCallback)((e=>s.set(e)),[s]),p=(0,h.useCallback)((()=>u(-1)),[u]);return o.createElement(si,null,o.createElement(li,{tabIndex:d,isActive:t,menuOpen:c,"data-testid":`publisher-logo-context-menu-button-${a}`,"aria-label":(0,M.default)(
/* translators: %s: logo title */
(0,n.__)("Publisher logo menu for %s","web-stories"),r.title),onClick:e=>{e.preventDefault(),l(c?null:r.id),u(c?-1:r.id)},onFocus:()=>{l(c?null:r.id)}},o.createElement(Ii.default,{"aria-hidden":"true"})),o.createElement(Jt.default,{animate:!0,isOpen:c,"data-testid":`publisher-logo-context-menu-${a}`,onDismiss:p},i.map((e=>{let{label:t,separator:a,...r}=e;const n=r.href?na:sa.default;return o.createElement(h.Fragment,{key:t},"top"===a&&o.createElement(la.default,null),o.createElement(n,r,t),"bottom"===a&&o.createElement(la.default,null))}))))},Li=(0,h.forwardRef)(((e,t)=>{let{contextMenuId:a,index:r,onMenuItemToggle:s,onRemoveLogo:l,onUpdateDefaultLogo:i,publisherLogo:c,setFocusedPublisherLogoId:d,showLogoContextMenu:u,isFocused:p}=e;const m=[{label:(0,n.__)("Set as Default","web-stories"),onClick:e=>{e.preventDefault(),i(c)},disabled:c.active},{label:(0,n.__)("Delete","web-stories"),onClick:e=>{e.preventDefault(),l(c,r)}}];return o.createElement(ri,{ref:t,role:"listitem",active:c.active,"data-testid":`publisher-logo-${r}`},o.createElement(oi,{onFocus:()=>{d(c.id)},"data-testid":`uploaded-publisher-logo-${r}`,isSelected:p,tabIndex:p?0:-1,onClick:e=>{e.preventDefault(),d(c.id)},"aria-label":(0,M.default)(
/* translators: %s: logo title.*/
(0,n.__)("Publisher Logo %s","web-stories"),c.title)},o.createElement(ni,{src:c.url,alt:c.title})),c.active&&o.createElement(Kl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},(0,n.__)("Default","web-stories")),u&&o.createElement(Ai,{isActive:p,idx:r,items:m,publisherLogo:c,onMenuItemToggle:s,contextMenuId:a}))}));Li.displayName="GridItem";const Oi={SECTION_HEADING:(0,n.__)("Publisher Logo","web-stories"),UPLOAD_CONTEXT:(0,n.__)("Upload your logos here and they will become available to any stories you create.","web-stories"),CLICK_CONTEXT:(0,n.__)("Click on logo to set as default if you want that logo to be used on default logo for all your stories.","web-stories"),REMOVAL:(0,n.__)("Removing a logo from your settings won't remove it from any stories using that logo.","web-stories"),INSTRUCTIONS:(0,n.__)("Avoid vector files, such as svg or eps. Logos should be at least 96x96 pixels and a perfect square. The background should not be transparent.","web-stories"),SUBMIT:(0,n.__)("Upload logo","web-stories"),ARIA_LABEL:(0,n.__)("Click to upload a new logo","web-stories"),HELPER_UPLOAD:(0,n.__)("Drag a jpg, png, or static gif in this box. Or click “Upload logo” below.","web-stories")};const ki=function PublisherLogoSettings(e){let{canUploadFiles:t,onAddLogos:a,onRemoveLogo:r,onUpdateDefaultLogo:s,isLoading:l,publisherLogos:i,uploadError:c}=e;const{isRTL:d,allowedImageMimeTypes:u}=E(),p=(0,h.useRef)(),m=(0,h.useRef)(),f=(0,h.useRef)({}),[b,g]=(0,h.useState)(null),[_,S]=(0,h.useState)(null),[y,T]=(0,h.useState)(null),w=1===i.length,v=(0,h.useRef)(i.length),C=(0,h.useCallback)(((e,t)=>{T(-1),r?.(e),S(t),v.current=i.length}),[r,i.length]),I=(0,h.useCallback)((e=>{T(-1),s?.(e)}),[s]);(0,h.useEffect)((()=>{if(Boolean(_?.toString())&&i.length!==v.current){if(0===i.length)return p.current?.getElementsByTagName("input")[0].focus();const e=_>0?i[_-1]:i[0];return g(e.id),f.current[e.id].firstChild.focus(),S(null)}}),[_,i,g]),(0,Nt.default)({containerRef:p,gridRef:m,itemRefs:f,isRTL:d,currentItemId:b,items:i});const A=(0,h.useCallback)((e=>{g(e)}),[]);return(0,h.useFocusOut)(p,(()=>{g(null),T(null)}),[]),o.createElement(Vl,null,o.createElement("div",null,o.createElement($l,null,Oi.SECTION_HEADING),o.createElement(Xl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Oi.UPLOAD_CONTEXT),o.createElement(Xl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Oi.CLICK_CONTEXT),o.createElement(Xl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Oi.REMOVAL)),o.createElement("div",{ref:p,"data-testid":"publisher-logos-container"},i.length>0&&o.createElement(ai,{tabIndex:0,ref:m,role:"list","aria-label":(0,n.__)("Viewing existing publisher logos","web-stories")},i.map(((e,t)=>o.createElement(Li,{key:e.id,ref:t=>{f.current[e.id]=t},contextMenuId:{set:T,value:y},index:t,isFocused:b===e.id,onMenuItemToggle:A,onRemoveLogo:C,onUpdateDefaultLogo:I,publisherLogo:e,setFocusedPublisherLogoId:g,showLogoContextMenu:!w})))),c&&o.createElement(ti,{role:"alert"},c),t&&o.createElement(o.Fragment,null,o.createElement(La,{onSubmit:a,id:"settings_publisher_logos",isLoading:l,label:Oi.SUBMIT,isMultiple:!0,ariaLabel:Oi.ARIA_LABEL,instructionalText:Oi.HELPER_UPLOAD,acceptableFormats:Object.values(u)}),o.createElement(Xl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Oi.INSTRUCTIONS))))};var Pi=a(45431),Ni=a(98415);function TelemetrySettings(e){let{selected:t,onCheckboxSelected:a,disabled:r}=e;const s=(0,h.useMemo)((()=>`telemetry-opt-in-${(0,Pi.default)()}`),[]);return o.createElement(Vl,null,o.createElement("div",null,o.createElement($l,null,(0,n.__)("Data Sharing Opt-in","web-stories"))),o.createElement("div",null,o.createElement(Ql,{forwardedAs:"label",htmlFor:s},o.createElement(Ni.Checkbox,{id:s,"data-testid":"telemetry-settings-checkbox",disabled:r,onChange:a,checked:Boolean(t)}),o.createElement(ei,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,"aria-checked":Boolean(t),forwardedAs:"span"},o.createElement(bo.default,{mapping:{a:o.createElement("a",{href:(0,n.__)("https://policies.google.com/privacy","web-stories"),rel:"noreferrer",target:"_blank","aria-label":(0,n.__)("Learn more by visiting Google Privacy Policy","web-stories")})}},(0,n.__)("Check the box to help us improve the Web Stories plugin by allowing tracking of product usage stats. All data are treated in accordance with <a>Google Privacy Policy</a>.","web-stories"))))))}function MediaOptimizationSettings(e){let{selected:t,onCheckboxSelected:a,disabled:r}=e;const s=(0,h.useMemo)((()=>`media-optimization-${(0,Pi.default)()}`),[]);return o.createElement(Vl,null,o.createElement("div",null,o.createElement($l,null,(0,n.__)("Video Optimization","web-stories"))),o.createElement("div",null,o.createElement(Ql,{forwardedAs:"label",htmlFor:s},o.createElement(Ni.Checkbox,{id:s,"data-testid":"media-optimization-settings-checkbox",disabled:r,onChange:a,checked:Boolean(t)}),o.createElement(ei,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,"aria-checked":Boolean(t),forwardedAs:"span"},(0,n.__)("Automatically optimize videos used in Web Stories. We recommend enabling this feature. Video files that are too large or have an unsupported format (like .mov) will otherwise not display properly.","web-stories")))))}function VideoCacheSettings(e){let{isEnabled:t=!1,updateSettings:a}=e;const r=(0,h.useMemo)((()=>`video-cache-${(0,Pi.default)()}`),[]),s=(0,h.useCallback)((()=>a({videoCache:!t})),[a,t]);return o.createElement(Vl,null,o.createElement("div",null,o.createElement($l,null,(0,n.__)("Video Cache","web-stories"))),o.createElement("div",null,o.createElement(Ql,{forwardedAs:"label",htmlFor:r},o.createElement(Ni.Checkbox,{id:r,"data-testid":"video-cache-settings-checkbox",onChange:s,checked:Boolean(t)}),o.createElement(ei,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,"aria-checked":Boolean(t),forwardedAs:"span"},(0,n.__)("Reduce hosting costs and improve user experience by serving videos from the Google cache.","web-stories")))))}function DataRemovalSettings(e){let{isEnabled:t=!1,updateSettings:a}=e;const r=(0,h.useCallback)((()=>a({dataRemoval:!t})),[a,t]);return o.createElement(Vl,null,o.createElement("div",null,o.createElement($l,null,(0,n.__)("Plugin Uninstall","web-stories"))),o.createElement("div",null,o.createElement(Ql,{forwardedAs:"label",htmlFor:"data-removal-settings"},o.createElement(Ni.Checkbox,{id:"data-removal-settings","data-testid":"data-removal-settings-checkbox",onChange:r,checked:Boolean(t)}),o.createElement(ei,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,"aria-checked":Boolean(t),forwardedAs:"span"},(0,n.__)("Remove all data including stories and saved templates when uninstalling the Web Stories plugin.","web-stories")))))}const Ri={LABEL:(0,n.__)("Stories Archives","web-stories"),SECTION_HEADING:(0,n.__)("Stories Archives","web-stories"),ARCHIVE_CONTENT:(0,n.__)("By default WordPress automatically creates an archive page, displaying your latest stories in your theme's layout.","web-stories"),ARCHIVE_CONTENT_2:(0,n.__)("You can customize or disable this behavior.","web-stories"),SUB_TEXT_CUSTOM:(0,n.__)("Choose a page to serve as your Web Stories archive. Use the Web Stories block to add stories to this page.","web-stories")},xi=[{label:(0,n._x)("Default","archive type","web-stories"),value:kl.DEFAULT},{label:(0,n.__)("Disabled","web-stories"),value:kl.DISABLED},{label:(0,n.__)("Create your own","web-stories"),value:kl.CUSTOM}],Mi=m.default.div.withConfig({displayName:"archive__SearchWrapper",componentId:"sc-u9kj1r-0"})(["padding-top:12px;"]);function ArchiveSettings(e){let{archive:t=kl.DEFAULT,archiveURL:a,defaultArchiveURL:r,archivePageId:s,updateSettings:l,searchPages:i,getPageById:c}=e;const[d,u]=(0,h.useState)(a),[p,m]=(0,h.useState)(s?{value:s}:void 0),[f,b]=(0,h.useState)([]),g=(0,h.useCallback)(((e,t)=>{u(a);const r=t===kl.CUSTOM?s:0;m(r),l({archive:t,archivePageId:r})}),[l,s,a]),_=(0,h.useCallback)(((e,t)=>{const a=Number(t.value);a!==s&&(m(a?{value:a}:void 0),l({archivePageId:a}))}),[s,l]);(0,h.useEffect)((()=>{let e=!0;return s&&kl.CUSTOM===t&&(async()=>{const{title:t,link:a}=await c(s);if(e&&t){const e={value:s,label:t};b((t=>[e,...t])),m(e),u(a)}})(),()=>{e=!1}}),[t,s,c]);const E=(0,h.useDebouncedCallback)((async e=>{await(0,T.trackEvent)("archive_page_search",{search_type:"dashboard",search_term:e}),b(await i(e))}),300);return o.createElement(Vl,null,o.createElement("div",null,o.createElement($l,null,Ri.SECTION_HEADING),o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Ri.ARCHIVE_CONTENT),o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Ri.ARCHIVE_CONTENT_2)),o.createElement("div",null,o.createElement(Lo.DropDown,{ariaLabel:Ri.LABEL,options:xi,selectedValue:t,onMenuItemClick:g,fillWidth:!0}),kl.DISABLED===t&&o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o.createElement(bo.default,{mapping:{code:o.createElement("code",null)}},(0,M.default)(
/* translators: %s: archive url. */
(0,n.__)("Turn off the default archive page at <code>%s</code>. Users will see a 404 Not Found page when trying to access the default archive page.","web-stories"),d))),kl.CUSTOM===t&&o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Ri.SUB_TEXT_CUSTOM),kl.CUSTOM===t&&o.createElement(Mi,null,o.createElement(Search,{placeholder:(0,n.__)("Select page","web-stories"),selectedValue:p,options:f,handleSearchValueChange:E,emptyText:(0,n.__)("No pages available","web-stories"),onMenuItemClick:_})),kl.DISABLED!==t&&o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o.createElement(bo.default,{mapping:{a:o.createElement(Zl,{href:d,rel:"noreferrer",target:"_blank",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"a"}),code:o.createElement("code",null)}},s&&d!==r?(0,M.default)(
/* translators: 1. current archive url, 2. default archive url. */
(0,n.__)("Visit archive page at <a>%1$s</a>. <code>%2$s</code> will automatically redirect to this page.","web-stories"),d,r):(0,M.default)(
/* translators: %s: archive url. */
(0,n.__)("Visit archive page at <a>%1$s</a>.","web-stories"),d)))))}ArchiveSettings.defaultProps={archive:kl.DEFAULT};var Di=a(98240),Bi=a(41044);function Hi(){return Hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Hi.apply(this,arguments)}const Ui={PRIMARY:"primary",SECONDARY:"secondary",TERTIARY:"tertiary",QUATERNARY:"quaternary",POSITIVE:"positive",NEGATIVE:"negative",ACCENT:"accent"};function Fi(e){return 9*(e-1)}const Gi=m.default.div.withConfig({displayName:"notificationBubble__Bubble",componentId:"sc-1w06lrc-0"})([""," position:relative;height:","px;width:","px;",";"],(e=>{let{theme:t,variant:a}=e;return(0,m.css)(["color:",";background-color:",";border-radius:",";"],t.colors.fg.primary,t.colors.bg[a],t.borders.radius.round)}),24,(e=>{let{digitLen:t}=e;return 24+Fi(t)}),(e=>{let{digitLen:t,$isSmall:a}=e;return a&&(0,m.css)(["height:","px;width:","px;"],20,20+Fi(t))})),Yi=m.default.span.withConfig({displayName:"notificationBubble__Inner",componentId:"sc-1w06lrc-1"})([""," "," ",";font-weight:",";color:",";user-select:none;"],Di.fullSizeAbsolute,Bi.centerContent,(e=>{let{$isSmall:t,theme:a}=e;return Oa.expandTextPreset(((e,a)=>{let{paragraph:r}=e;return r[t?a.X_SMALL:a.SMALL]}))({theme:a})}),(e=>{let{theme:t}=e;return t.typography.weight.bold}),(e=>{let{$invertColor:t,theme:a}=e;return t?a.colors.inverted.fg.primary:a.colors.fg.primary})),ji=/^ua-\d+-\d+$/;const zi=(0,m.default)((e=>{let{notificationCount:t,isSmall:a,variant:r=Ui.ACCENT,invertTextColor:n,...s}=e;return o.createElement(Gi,Hi({variant:r,$isSmall:a,digitLen:t?.toString().length||1},s),o.createElement(Yi,{$invertColor:n,$isSmall:a},t))})).withConfig({displayName:"googleAnalytics__StyledNotificationBubble",componentId:"sc-svg62t-0"})(["display:inline-block;margin-left:10px;"]),Vi={CONTEXT:(0,n.__)("The story editor will append a default, configurable AMP analytics configuration to your story. If you’re interested in going beyond what the default configuration, read this <a>article</a>.","web-stories"),CONTEXT_LINK:"https://blog.amp.dev/2019/08/28/analytics-for-your-amp-stories/",SECTION_HEADING:(0,n.__)("Google Analytics","web-stories"),PLACEHOLDER:(0,n.__)("Enter your Google Analytics Tracking ID","web-stories"),ARIA_LABEL:(0,n.__)("Enter your Google Analytics Tracking ID","web-stories"),INPUT_ERROR:(0,n.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,n.__)("Save","web-stories"),SITE_KIT_NOT_INSTALLED:(0,n.__)("Install <a>Site Kit by Google</a> to easily enable Google Analytics for Web Stories.","web-stories"),SITE_KIT_INSTALLED:(0,n.__)("Use Site Kit by Google to easily<a>activate Google Analytics</a> for Web Stories.","web-stories"),SITE_KIT_IN_USE:(0,n.__)("Site Kit by Google has already enabled Google Analytics for your Web Stories, all changes to your analytics tracking should occur there.","web-stories")};const $i=function GoogleAnalyticsSettings(e){let{googleAnalyticsId:t,handleUpdateAnalyticsId:a,usingLegacyAnalytics:r,handleMigrateLegacyAnalytics:s,siteKitStatus:l={}}=e;const[i,c]=(0,h.useState)(t),[d,u]=(0,h.useState)(""),p=i!==t&&!d,m=!p,{analyticsActive:f,installed:b,analyticsLink:g}=l;(0,h.useEffect)((()=>{c(t)}),[t]);const _=(0,h.useCallback)((e=>{const{value:t}=e.target;c(t),0===t.length||function(){return Boolean((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase().match(ji))}(t)?u(""):u(Vi.INPUT_ERROR)}),[]),E=(0,h.useCallback)((()=>{p&&a(i)}),[p,i,a]),S=(0,h.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),E())}),[E]),y=(0,h.useCallback)((e=>{e.preventDefault(),s(),(0,T.trackEvent)("migrate_story_auto_analytics")}),[s]),w=(0,h.useCallback)((e=>(0,T.trackClick)(e,"click_auto_analytics_link")),[]),v=(0,h.useCallback)((e=>(0,T.trackClick)(e,"click_site_kit_link")),[]),C=(0,h.useCallback)((e=>(0,T.trackClick)(e,"click_analytics_docs")),[]),I=(0,h.useMemo)((()=>f?null:o.createElement(bo.default,{mapping:{a:o.createElement(Zl,{href:g,rel:"noreferrer",target:"_blank",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:v})}},b?Vi.SITE_KIT_INSTALLED:Vi.SITE_KIT_NOT_INSTALLED)),[f,b,g,v]);return o.createElement(Vl,{onSubmit:e=>e.preventDefault()},o.createElement("div",null,o.createElement($l,{htmlFor:"gaTrackingID",as:"h3"},Vi.SECTION_HEADING,r&&o.createElement(zi,{notificationCount:1,isSmall:!0})),o.createElement(Xl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},I),r&&o.createElement(o.Fragment,null,o.createElement(Xl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o.createElement(bo.default,{mapping:{a:o.createElement(Zl,{href:"https://wp.stories.google/docs/seo/",rel:"noreferrer",target:"_blank",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:w})}},(0,n.__)("An improved analytics configuration is now available. <a>Learn more</a>.","web-stories"))),o.createElement(Xl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o.createElement(ii,{type:Dt.BUTTON_TYPES.SECONDARY,size:Dt.BUTTON_SIZES.SMALL,onClick:y},(0,n.__)("Migrate","web-stories"))))),f?o.createElement("div",null,o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Vi.SITE_KIT_IN_USE)):o.createElement("div",null,o.createElement(di,null,o.createElement(ui,{htmlFor:"gaTrackingId"},Vi.ARIA_LABEL),o.createElement(pi,{"aria-label":Vi.ARIA_LABEL,id:"gaTrackingId",value:i,onChange:_,onKeyDown:S,placeholder:Vi.PLACEHOLDER,hasError:Boolean(d),hint:d,disabled:f}),o.createElement(ii,{type:Dt.BUTTON_TYPES.SECONDARY,size:Dt.BUTTON_SIZES.SMALL,disabled:m,onClick:E},Vi.SUBMIT_BUTTON)),o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o.createElement(bo.default,{mapping:{a:o.createElement(Zl,{href:Vi.CONTEXT_LINK,rel:"noreferrer",target:"_blank",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,as:"a",onClick:C})}},Vi.CONTEXT))))};var Zi=a(30385);function qi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https";return/^(http:\/\/|https:\/\/|tel:|mailto:)/.test(e)?e:`${t}://${e}`}var Wi=a(96921);const Ki=function ConfirmationDialog(e){let{onClose:t,onPrimary:a}=e;return o.createElement(m.ThemeProvider,{theme:l.theme},o.createElement(ga.Dialog,{isOpen:!0,onClose:t,title:(0,n.__)("Delete Font","web-stories"),actions:o.createElement(o.Fragment,null,o.createElement(Mt.Button,{type:Dt.BUTTON_TYPES.TERTIARY,size:Dt.BUTTON_SIZES.SMALL,onClick:()=>t()},(0,n.__)("Cancel","web-stories")),o.createElement(Mt.Button,{type:Dt.BUTTON_TYPES.PRIMARY,size:Dt.BUTTON_SIZES.SMALL,onClick:()=>a()},(0,n.__)("Delete Font","web-stories")))},o.createElement(ya.Text,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},(0,n.__)("Deleting a font will delete it from every previous story it’s in. Would you like to proceed?","web-stories"))))};const Xi=async function(e){const{load:t}=await Promise.all([a.e(4422),a.e(2794)]).then(a.bind(a,44422)),r=await t(e);return{name:r.names.fullName.en,family:r.names.fullName.en,weights:[400],styles:["regular"],variants:[[0,400]],service:"custom",fallbacks:["sans-serif"],metrics:{upm:r.unitsPerEm,asc:r.ascender,des:r.descender,tAsc:r.tables.os2.sTypoAscender,tDes:r.tables.os2.sTypoDescender,tLGap:r.tables.os2.sTypoLineGap,wAsc:r.tables.os2.usWinAscent,wDes:r.tables.os2.usWinDescent,xH:r.tables.os2.sxHeight,capH:r.tables.os2.sCapHeight,yMin:r.tables.head.yMin,yMax:r.tables.head.yMax,hAsc:r.tables.hhea.ascender,hDes:r.tables.hhea.descender,lGap:r.tables.hhea.lineGap}}},Ji={ADD_CONTEXT:(0,n.__)("Add and manage your custom and brand fonts via link here. They’ll appear in your font list in the editor.","web-stories"),REMOVAL:(0,n.__)("Removing a font from this settings page will remove it from your font list in all stories.","web-stories"),SECTION_HEADING:(0,n.__)("Custom Fonts","web-stories"),LABEL:(0,n.__)("Insert Font URL","web-stories"),INPUT_CONTEXT:(0,n.__)("Insert a public URL to a font file. Allowed formats are .otf, .ttf, .woff.","web-stories"),INPUT_ERROR:(0,n.__)("Invalid URL format","web-stories"),SUBMIT_BUTTON:(0,n.__)("Add Font","web-stories"),FONTS_HEADING:(0,n.__)("Current Fonts","web-stories"),FONTS_CONTEXT:(0,n.__)("Deleting fonts will delete them from your in-editor font list and all previous stories.","web-stories")},Qi=(0,m.default)(ii).withConfig({displayName:"customFonts__AddButton",componentId:"sc-4md0nd-0"})(["min-width:90px;margin-top:32px;"]),ec=m.default.div.withConfig({displayName:"customFonts__InputsWrapper",componentId:"sc-4md0nd-1"})(["margin-top:8px;"]),tc=m.default.div.withConfig({displayName:"customFonts__FontsWrapper",componentId:"sc-4md0nd-2"})(["margin-top:34px;"]),ac=(0,m.default)(ya.Text).withConfig({displayName:"customFonts__ListHeading",componentId:"sc-4md0nd-3"})(["margin-bottom:10px;display:inline-block;"]),rc=m.default.div.withConfig({displayName:"customFonts__FontsList",componentId:"sc-4md0nd-4"})(["padding:12px 0;border:",";:focus-within{","}"],(e=>{let{theme:t}=e;return`1px solid ${t.colors.divider.primary}`}),(e=>{let{theme:t}=e;return Vt.focusCSS(t.colors.border.focus)})),oc=(0,m.default)(Mt.Button).withConfig({displayName:"customFonts__DeleteButton",componentId:"sc-4md0nd-5"})(["visibility:hidden;opacity:0;transition:visibility 0s,opacity ease-in-out 300ms;&:focus{","}"],(e=>{let{theme:t}=e;return Vt.focusCSS(t.colors.border.focus)})),nc=m.default.div.withConfig({displayName:"customFonts__FontRow",componentId:"sc-4md0nd-6"})(["padding:0 12px;display:flex;height:32px;width:100%;justify-content:space-between;transition:background-color ease-in-out 300ms;&[aria-selected='true'],&:hover,&:focus{background-color:",";button{visibility:visible;opacity:1;}}"],(e=>{let{theme:t}=e;return t.colors.bg.secondary})),sc=m.default.div.withConfig({displayName:"customFonts__FontData",componentId:"sc-4md0nd-7"})(["line-height:32px;white-space:nowrap;display:flex;font-size:14px;max-width:calc(100% - 32px);"]),lc=(0,m.default)(ya.Text).attrs({as:"span"}).withConfig({displayName:"customFonts__StyledText",componentId:"sc-4md0nd-8"})([""]),ic=(0,m.default)(lc).withConfig({displayName:"customFonts__FontUrl",componentId:"sc-4md0nd-9"})(["color:",";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),cc=m.default.div.withConfig({displayName:"customFonts__Divider",componentId:"sc-4md0nd-10"})(["width:4px;height:4px;background-color:",";border-radius:",";margin:0 6px;align-self:center;"],(e=>{let{theme:t}=e;return t.colors.standard.black}),(e=>{let{theme:t}=e;return t.borders.radius.round})),dc=[".otf",".ttf",".woff"];const uc=function CustomFontsSettings(e){let{customFonts:t=[],addCustomFont:a,deleteCustomFont:r}=e;const s=(0,tn.default)(),[l,i]=(0,h.useState)(""),[c,d]=(0,h.useState)(""),[u,p]=(0,h.useState)(!1),[m,f]=(0,h.useState)(null),b=!c&&l,g=(0,h.useRef)(null),_=(0,h.useRef)([]),[E,S]=(0,h.useState)(0),[y,w]=(0,h.useState)(),{showSnackbar:v}=(0,dn.useSnackbar)(),C=(0,h.useCallback)((e=>{const{value:t}=e.target;i(t),0===t.length||function(e){try{return new URL(e),!0}catch{return!1}}(qi(t))?d(""):d(Ji.INPUT_ERROR)}),[]),I=(0,h.useCallback)((async()=>{try{await r(m),s((0,n.__)("Font deleted","web-stories"))}catch(e){(0,T.trackError)("remove_custom_font",e?.message),v({"aria-label":vl.REMOVE_FONT.MESSAGE,message:vl.REMOVE_FONT.MESSAGE,dismissible:!0})}finally{f(null),p(!1),d("")}}),[r,m,v,s]),A=(0,h.useCallback)((async()=>{if(b){const e=qi(l);try{await fetch(e,{method:"HEAD"})}catch(e){return(0,T.trackError)("add_custom_font",e?.message),void d((0,n.__)("Please ensure correct CORS settings for allowing font usage on this site.","web-stories"))}let t;try{if((0,T.trackEvent)("add_custom_font",{url:e}),t=await Xi(e),!t.family)return void d((0,n.__)("Something went wrong, please try again.","web-stories"))}catch(e){return(0,T.trackError)("add_custom_font",e?.message),void d((0,M.default)(
/* translators: %s: list of allowed font types. */
(0,n.__)("Getting font data failed, please ensure the URL points directly to a %s file.","web-stories"),(0,Zi.default)(dc)))}try{await a({...t,url:e}),i("")}catch(e){(0,T.trackError)("add_custom_font",e?.message),d((0,M.default)(
/* translators: %s: font name. */
(0,n.__)("A font with the name %s already exists.","web-stories"),t.family))}}}),[a,b,l]),L=(0,h.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),A())}),[A]);(0,h.useEffect)((()=>{const e=_.current[`row-${E}`];e&&(e.focus(),w(e.id))}),[E]);const O=e=>E===e,k=(0,h.useCallback)((e=>{const{key:a}=e;"ArrowUp"===a?(e.preventDefault(),S((e=>Math.max(0,e-1)))):"ArrowDown"===a&&(e.preventDefault(),S((e=>Math.min(t.length-1,e+1))))}),[t]);return o.createElement(Vl,{onSubmit:e=>e.preventDefault()},o.createElement("div",null,o.createElement($l,{as:"h3"},Ji.SECTION_HEADING),o.createElement(Xl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Ji.ADD_CONTEXT),o.createElement(Xl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Ji.REMOVAL)),o.createElement(ec,null,o.createElement(di,null,o.createElement(pi,{value:l,onChange:C,onKeyDown:L,hasError:Boolean(c),hint:c,label:Ji.LABEL}),o.createElement(Qi,{type:Dt.BUTTON_TYPES.PRIMARY,size:Dt.BUTTON_SIZES.SMALL,disabled:!b,onClick:A},Ji.SUBMIT_BUTTON)),o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Ji.INPUT_CONTEXT),t?.length>0&&o.createElement(tc,null,o.createElement(ac,{forwardedAs:"span"},Ji.FONTS_HEADING),o.createElement(rc,{ref:g,role:"listbox",tabIndex:0,onKeyDown:k,"aria-activedescendant":y||t[0]?.id},t.map(((e,t)=>{let{id:a,family:r,url:s}=e;return o.createElement(nc,{id:`font-${a}`,ref:e=>_.current[`row-${t}`]=e,key:r,role:"option",onClick:()=>{S(t)},"aria-selected":O(t)},o.createElement(sc,null,o.createElement(lc,null,r),o.createElement(cc,null),o.createElement(ic,null,s)),o.createElement(Tooltip,{hasTail:!0,title:(0,n.__)("Delete font","web-stories")},o.createElement(oc,{"aria-label":(0,M.default)(
/*translators: %s: font family. */
(0,n.__)("Delete %s","web-stories"),r),type:Dt.BUTTON_TYPES.TERTIARY,size:Dt.BUTTON_SIZES.SMALL,variant:Dt.BUTTON_VARIANTS.SQUARE,onClick:()=>{f(a),p(!0)}},o.createElement(Wi.default,null))))}))),o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},Ji.FONTS_CONTEXT))),u&&o.createElement(Ki,{onClose:()=>p(!1),onPrimary:I}))};var pc=a(42096);const mc=/[\w-]+\.myshopify\.com/i;function fc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Boolean(e.toLowerCase().match(mc))}const bc=m.default.div.withConfig({displayName:"shopify__Loading",componentId:"sc-ur0gaq-0"})(["position:relative;margin-top:10px;"]),hc=m.default.div.withConfig({displayName:"shopify__Spinner",componentId:"sc-ur0gaq-1"})(["position:absolute;top:0;"]),gc={HOST_CONTEXT:(0,M.default)(
/* translators: 1: first example. 2: second example. */
(0,n.__)("Without <code>%1$s</code> or <code>%2$s</code>. Example: %3$s. <a>Find your URL</a>.","web-stories"),"https://","www.","yourstore.myshopify.com"),HOST_CONTEXT_LINK:(0,n.__)("https://help.shopify.com/en/manual/domains","web-stories"),HOST_PLACEHOLDER:(0,n.__)("Enter your .myshopify.com domain","web-stories"),HOST_LABEL:(0,n.__)("Shopify Domain","web-stories"),ACCESS_TOKEN_CONTEXT:(0,n.__)("<a>Learn how to get one</a>.","web-stories"),ACCESS_TOKEN_CONTEXT_LINK:(0,n.__)("https://help.shopify.com/en/manual/apps/custom-apps#get-the-api-credentials-for-a-custom-app","web-stories"),ACCESS_TOKEN_PLACEHOLDER:(0,n.__)("Enter your API access token","web-stories"),ACCESS_TOKEN_LABEL:(0,n.__)("Storefront API Access Token","web-stories"),INPUT_ERROR:(0,n.__)("Invalid format","web-stories"),SUBMIT_BUTTON:(0,n.__)("Save","web-stories"),CONNECTION_TEST_BUTTON:(0,n.__)("Test connection","web-stories"),CONNECTION_CHECKING:(0,n.__)("Testing connection…","web-stories"),CONNECTION_SUCCESS:(0,n.__)("Connection successful","web-stories"),CONNECTION_ERROR_DEFAULT:(0,n.__)("Connection failed. Please try again.","web-stories")};const _c=function ShopifySettings(e){let{host:t,accessToken:a,handleUpdateHost:r,handleUpdateAccessToken:s}=e;const l=(0,tn.default)(),[i,c]=(0,h.useState)(t),[d,u]=(0,h.useState)(""),p=i!==t&&!d,m=!p,[f,b]=(0,h.useState)(a),[g,_]=(0,h.useState)(""),S=f!==a&&!g,y=!S,{apiCallbacks:{getProducts:w}}=E(),[v,C]=(0,h.useState)(!1),[I,A]=(0,h.useState)(""),[L,O]=(0,h.useState)(!1);(0,h.useEffect)((()=>{c(t)}),[t]),(0,h.useEffect)((()=>{b(a)}),[a]);const k=(0,h.useCallback)((e=>{const{value:t}=e.target;c(t),0===t.length||fc(t)?u(""):u(gc.INPUT_ERROR)}),[]),P=(0,h.useCallback)((e=>{const{value:t}=e.target;fc(t)&&c(t.match(mc)[0])}),[]),N=(0,h.useCallback)((()=>{p&&r(i)}),[p,i,r]),R=(0,h.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),N())}),[N]),x=(0,h.useCallback)((e=>{const{value:t}=e.target;_(""),b(t)}),[]),M=(0,h.useCallback)((()=>{S&&s(f)}),[S,f,s]),D=(0,h.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),M())}),[M]),B=(0,h.useCallback)((async()=>{O(!1),C(!0),l(gc.CONNECTION_CHECKING),(0,T.trackEvent)("test_shopping_connection");try{await w((new Date).getTime()),A(gc.CONNECTION_SUCCESS),l(gc.CONNECTION_SUCCESS)}catch(e){(0,T.trackError)("test_shopping_connection",e?.message),O(!0),A(gc.CONNECTION_ERROR_DEFAULT),l(gc.CONNECTION_ERROR_DEFAULT)}finally{C(!1)}}),[w,l]),H=i&&!d&&f&&!g&&!v,U=(0,h.useCallback)((e=>(0,T.trackClick)(e,"click_shopify_docs")),[]);return o.createElement(o.Fragment,null,o.createElement(di,null,o.createElement(ui,{htmlFor:"shopifyHost"},gc.HOST_LABEL),o.createElement(pi,{"aria-label":gc.HOST_LABEL,id:"shopifyHost",name:"shopifyHost","data-testid":"shopifyHost",value:i,onChange:k,onKeyDown:R,onBlur:P,placeholder:gc.HOST_PLACEHOLDER,hasError:Boolean(d),hint:d}),o.createElement(ii,{type:Dt.BUTTON_TYPES.SECONDARY,size:Dt.BUTTON_SIZES.SMALL,disabled:m,onClick:N,"data-testid":"shopifyHostButton"},gc.SUBMIT_BUTTON)),o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o.createElement(bo.default,{mapping:{a:o.createElement(Zl,{href:gc.HOST_CONTEXT_LINK,rel:"noreferrer",target:"_blank",onClick:U,size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL})}},gc.HOST_CONTEXT)),o.createElement(di,null,o.createElement(ui,{htmlFor:"shopifyAccessToken"},gc.ACCESS_TOKEN_LABEL),o.createElement(pi,{id:"shopifyAccessToken","aria-label":gc.ACCESS_TOKEN_LABEL,name:"shopifyAccessToken","data-testid":"shopifyAccessToken",value:f,onChange:x,onKeyDown:D,placeholder:gc.ACCESS_TOKEN_PLACEHOLDER,hasError:Boolean(g),hint:g}),o.createElement(ii,{type:Dt.BUTTON_TYPES.SECONDARY,size:Dt.BUTTON_SIZES.SMALL,disabled:y,onClick:M,"data-testid":"shopifyAccessTokenButton"},gc.SUBMIT_BUTTON)),o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o.createElement(bo.default,{mapping:{a:o.createElement(Zl,{href:gc.ACCESS_TOKEN_CONTEXT_LINK,rel:"noreferrer",target:"_blank",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL})}},gc.ACCESS_TOKEN_CONTEXT)),o.createElement(ci,{onFocus:()=>A(""),type:Dt.BUTTON_TYPES.SECONDARY,size:Dt.BUTTON_SIZES.SMALL,disabled:!H,onClick:B},v?gc.CONNECTION_CHECKING:gc.CONNECTION_TEST_BUTTON),v&&o.createElement(bc,null,o.createElement(hc,null,o.createElement(pc.default,{size:24}))),I&&o.createElement(Wl,{"data-testid":"api-status","aria-label":(0,n.__)("API connection status","web-stories"),hasError:L,size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},I))},Ec={SLOT_ID_LABEL:(0,n.__)("Shopping provider","web-stories")};const Sc=function ShoppingProviderDropDown(e){let{vendors:t,shoppingProvider:a,handleUpdate:r}=e;const n=[];return Object.entries(t).forEach((e=>{let[t,a]=e;return n.push({label:a,value:t})})),o.createElement(Lo.DropDown,{ariaLabel:Ec.SLOT_ID_LABEL,options:n,selectedValue:a,onMenuItemClick:(e,t)=>r(t),fillWidth:!0})},yc={SECTION_HEADING:(0,n.__)("Shopping","web-stories"),SHOPPING_PROVIDER_HELPER_MESSAGE:(0,n.__)("Once configured you can add products from this provider.","web-stories"),HELPER_MESSAGE:(0,n.__)("Connect your store so you can easily add products to your stories.","web-stories"),WOOCOMMERCE_INSTALL:(0,n.__)("Install <a>WooCommerce</a> to easily add shoppable products to Web Stories.","web-stories"),WOOCOMMERCE_ACTIVE:(0,n.__)("Activate <a>WooCommerce</a> to easily add shoppable products to Web Stories.","web-stories"),WOOCOMMERCE_MANAGE:(0,n.__)("Manage products in <a>WooCommerce</a> to make them available in Web Stories.","web-stories")};const Tc=function Shopping(e){let{updateSettings:t,shoppingProvider:a,shopifyHost:r,shopifyAccessToken:n,vendors:s,woocommerce:l}=e;const i=(0,h.useCallback)((e=>{t({shoppingProvider:e}),(0,T.trackEvent)("change_shopping_provider",{name:e})}),[t]),c=(0,h.useCallback)((e=>t({shopifyHost:e})),[t]),d=(0,h.useCallback)((e=>t({shopifyAccessToken:e})),[t]),u=(0,h.useCallback)((e=>(0,T.trackClick)(e,"click_woocommerce_link")),[]),{canManage:p,installed:m,active:f,link:b}=l;let g;return!1===m?g=yc.WOOCOMMERCE_INSTALL:!1===f?g=yc.WOOCOMMERCE_ACTIVE:!0===p&&(g=yc.WOOCOMMERCE_MANAGE),o.createElement(mi,{onSubmit:e=>e.preventDefault()},o.createElement("div",null,o.createElement($l,null,yc.SECTION_HEADING),o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},yc.HELPER_MESSAGE),a===Nl&&g&&b&&o.createElement(Jl,{"data-testid":"woocommerceMessage",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},o.createElement(bo.default,{mapping:{a:o.createElement(Zl,{href:b,rel:"noreferrer",target:"_blank",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL,onClick:u})}},g))),o.createElement("div",null,o.createElement(Sc,{vendors:s,shoppingProvider:a,handleUpdate:i}),o.createElement(Jl,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.SMALL},yc.SHOPPING_PROVIDER_HELPER_MESSAGE),a===Rl&&o.createElement(_c,{handleUpdateHost:c,handleUpdateAccessToken:d,host:r,accessToken:n})))};const wc=function EditorSettings(){const{fetchSettings:e,updateSettings:t,googleAnalyticsId:a,usingLegacyAnalytics:r,adSensePublisherId:s,adSenseSlotId:l,adManagerSlotId:i,adNetwork:c,uploadMedia:d,newlyCreatedMediaIds:u,isMediaLoading:p,videoCache:m,dataRemoval:f,archive:b,archivePageId:g,searchPages:_,getPageById:S,customFonts:y,addCustomFont:w,deleteCustomFont:v,fetchCustomFonts:C,publisherLogos:I,addPublisherLogo:A,fetchPublisherLogos:L,removePublisherLogo:O,setPublisherLogoAsDefault:k,shoppingProvider:P,shopifyHost:N,shopifyAccessToken:R}=Bl((e=>{let{actions:{fontsApi:{addCustomFont:t,deleteCustomFont:a,fetchCustomFonts:r},settingsApi:{fetchSettings:o,updateSettings:n},pagesApi:{searchPages:s,getPageById:l},mediaApi:{uploadMedia:i},publisherLogosApi:{fetchPublisherLogos:c,addPublisherLogo:d,removePublisherLogo:u,setPublisherLogoAsDefault:p}},state:{settings:{googleAnalyticsId:m,usingLegacyAnalytics:f,adSensePublisherId:b,adSenseSlotId:h,adManagerSlotId:g,adNetwork:_,videoCache:E,dataRemoval:S,archive:y,archivePageId:T,shoppingProvider:w,shopifyHost:v,shopifyAccessToken:C},media:{isLoading:I,newlyCreatedMediaIds:A},publisherLogos:{publisherLogos:L},customFonts:O}}=e;return{fetchSettings:o,updateSettings:n,googleAnalyticsId:m,usingLegacyAnalytics:f,adSensePublisherId:b,adSenseSlotId:h,adManagerSlotId:g,adNetwork:_,uploadMedia:i,isMediaLoading:I,newlyCreatedMediaIds:A,videoCache:E,dataRemoval:S,archive:y,archivePageId:T,searchPages:s,getPageById:l,customFonts:O,addCustomFont:t,deleteCustomFont:a,fetchCustomFonts:r,fetchPublisherLogos:c,addPublisherLogo:d,removePublisherLogo:u,setPublisherLogoAsDefault:p,publisherLogos:L,shoppingProvider:w,shopifyHost:v,shopifyAccessToken:C}})),{capabilities:{canUploadFiles:x,canManageSettings:D}={},plugins:{siteKit:B={},woocommerce:H={}},maxUpload:U,maxUploadFormatted:F,allowedImageMimeTypes:G,archiveURL:Y,defaultArchiveURL:j,vendors:z}=E(),{disabled:V,toggleWebStoriesTrackingOptIn:$,optedIn:Z}=Gl(),{disabled:q,toggleWebStoriesMediaOptimization:W,mediaOptimization:K}=function(){const{showSnackbar:e}=(0,dn.useSnackbar)(),{currentUser:t,toggleWebStoriesMediaOptimization:a}=Bl((e=>{let{state:{currentUser:t},actions:{usersApi:{toggleWebStoriesMediaOptimization:a}}}=e;return{currentUser:t,toggleWebStoriesMediaOptimization:a}})),r=Boolean(t.data.meta?.webStoriesMediaOptimization),o=(0,h.useCallback)((()=>{a(),(0,T.trackEvent)("video_optimization_optin",{status:r?"off":"on"}),e({"aria-label":wl.SETTINGS.UPDATED,message:wl.SETTINGS.UPDATED,dismissible:!0})}),[r,e,a]);return{mediaOptimization:r,disabled:t.isUpdating,toggleWebStoriesMediaOptimization:o}}(),[X,J]=(0,h.useState)("");(0,h.useEffect)((()=>{D&&(e(),L(),C())}),[e,L,D,C]),(0,h.useEffect)((()=>{u.length>0&&A(u)}),[u,A]),Yl();const Q=(0,h.useCallback)((e=>t({googleAnalyticsId:e})),[t]),ee=(0,h.useCallback)((()=>t({usingLegacyAnalytics:!1})),[t]),te=(0,h.useCallback)((async e=>{let t=!0,a=!0,r=!1;const o=[];if(e.forEach((e=>{t=t&&e.size<=U;const r=G.includes(e.type);a=a&&r,r||o.push(new Promise(((t,a)=>{const r=new Image;r.onload=()=>t(r),r.onerror=()=>a(new Error(e.name)),r.src=URL.createObjectURL(e)})))})),!t){const t=1===e.length?(0,M.default)(
/* translators: %s: max upload size for media */
(0,n.__)("Sorry, this file is too big. Make sure your logo is under %s.","web-stories"),F):(0,M.default)(
/* translators: %s: max upload size for media */
(0,n.__)("Sorry, one or more of these files are too big. Make sure your logos are all under %s.","web-stories"),F);return J(t)}if(!a){const t=1===e.length?(0,n.__)("Sorry, this file type is not supported. Only jpg, png, and static gifs are supported for publisher logos.","web-stories"):(0,n.__)("Sorry, one or more of these files are of an unsupported file type. Only jpg, png, and static gifs are supported for publisher logos.","web-stories");return J(t)}const s=await Promise.all(o).catch((()=>{r=!0}));if(r){const t=1===e.length?(0,n.__)("Sorry, there was an error processing your upload. Please try again.","web-stories"):(0,n.__)("Sorry, there was an error processing one or more of your uploads. Please try again.","web-stories");return J(t)}if(!s.every((e=>{let{height:t,width:a}=e;return t>=96&&a>=96}))){const t=1===e.length?(0,M.default)(
/* translators: 1 = minimum width, 2 = minimum height */
(0,n.__)("Sorry, this file is too small. Make sure your logo is larger than %s.","web-stories"),(0,M.default)("%1$dx%2$dpx",96,96)):(0,M.default)(
/* translators: %s: image dimensions in pixels. */
(0,n.__)("Sorry, one or more files are too small. Make sure your logos are all larger than %s.","web-stories"),(0,M.default)("%1$dx%2$dpx",96,96));return J(t)}return J(""),d(e)}),[U,F,d,G]),ae=(0,h.useCallback)((e=>{O(e.id)}),[O]),re=(0,h.useCallback)((e=>k(e.id)),[k]);return o.createElement(qa.Provider,null,o.createElement(jl,{"data-testid":"editor-settings"},o.createElement(cn,{heading:(0,n.__)("Settings","web-stories")}),o.createElement(qa.Scrollable,null,o.createElement(zl,null,D&&o.createElement(o.Fragment,null,o.createElement($i,{googleAnalyticsId:a,handleUpdateAnalyticsId:Q,usingLegacyAnalytics:r,handleMigrateLegacyAnalytics:ee,siteKitStatus:B}),o.createElement(ki,{onAddLogos:te,onRemoveLogo:ae,onUpdateDefaultLogo:re,publisherLogos:I,canUploadFiles:x,isLoading:p,uploadError:X})),o.createElement(uc,{customFonts:y,addCustomFont:w,deleteCustomFont:v}),o.createElement(TelemetrySettings,{disabled:V,onCheckboxSelected:$,selected:Z}),x&&o.createElement(MediaOptimizationSettings,{disabled:q,onCheckboxSelected:W,selected:K}),D&&o.createElement(o.Fragment,null,o.createElement(VideoCacheSettings,{isEnabled:m,updateSettings:t}),o.createElement(DataRemovalSettings,{isEnabled:f,updateSettings:t}),o.createElement(ArchiveSettings,{archive:b,archiveURL:Y,defaultArchiveURL:j,updateSettings:t,searchPages:_,archivePageId:g,getPageById:S}),o.createElement(Ci,{updateSettings:t,adNetwork:c,publisherId:s,adSenseSlotId:l,adManagerSlotId:i,siteKitStatus:B}),o.createElement(Tc,{updateSettings:t,shoppingProvider:P,shopifyHost:N,shopifyAccessToken:R,vendors:z,woocommerce:H}))))))};function vc(){const[e,t]=(0,h.useState)({}),[a,r]=(0,h.useState)(!1),{api:{currentUser:o}}=E();(0,h.useEffect)((()=>{var a;Object.keys(e).length||(a=o,nl({path:a}).then(ol.snakeToCamelCaseObjectKeys)).then(t)}),[o,e]);return{api:{toggleWebStoriesTrackingOptIn:(0,h.useCallback)((async()=>{r(!0);try{t(await function(e,t){return nl({path:e,data:{meta:{web_stories_tracking_optin:!t.meta.webStoriesTrackingOptin}},method:"POST"}).then(ol.snakeToCamelCaseObjectKeys)}(o,e))}finally{r(!1)}}),[o,e]),toggleWebStoriesMediaOptimization:(0,h.useCallback)((async()=>{r(!0);try{t(await function(e,t){return nl({path:e,data:{meta:{web_stories_media_optimization:!t.meta.webStoriesMediaOptimization}},method:"POST"}).then(ol.snakeToCamelCaseObjectKeys)}(o,e))}finally{r(!1)}}),[o,e])},currentUser:{data:e,isUpdating:a}}}const Cc="loading_media",Ic="add_media_success",Ac="add_media_failure",Lc={error:{},isLoading:!1,newlyCreatedMediaIds:[]};const Oc=function(e,t){switch(t.type){case Cc:return{...e,isLoading:!0,newlyCreatedMediaIds:[]};case Ac:return{...e,error:{...t.payload,id:Date.now()},isLoading:!1};case Ic:return{...e,error:{},isLoading:!1,newlyCreatedMediaIds:t.payload.newlyCreatedMediaIds||e.newlyCreatedMediaIds};default:return e}};function kc(){const[e,t]=(0,h.useReducer)(Oc,Lc),{api:{media:a}}=E();return{media:e,api:{uploadMedia:(0,h.useCallback)((async e=>{t({type:Cc});try{const r=await function(e,t){return Promise.all(Object.values(t).map((t=>{const a=new window.FormData;return a.append("file",t,t.name||t.type.replace("/",".")),nl({path:e,body:a,method:"POST"}).then(ol.snakeToCamelCaseObjectKeys)})))}(a,e);t({type:Ic,payload:{media:r,newlyCreatedMediaIds:r.map((e=>{let{id:t}=e;return t}))}})}catch(a){t({type:Ac,payload:{message:vl.UPLOAD_PUBLISHER_LOGO[e.length>1?"MESSAGE_PLURAL":"MESSAGE"]}})}}),[a])}}}const Pc="update_settings_success",Nc="update_settings_failure",Rc="setting_saved",xc="fetch_settings_success",Mc="fetch_settings_failure",Dc={error:{},googleAnalyticsId:"",usingLegacyAnalytics:!1,adSensePublisherId:"",adSenseSlotId:"",adManagerSlotId:"",adNetwork:Al,archive:kl.DEFAULT,archivePageId:0,videoCache:!1,dataRemoval:!1,settingSaved:!1,shoppingProvider:Pl,shopifyHost:"",shopifyAccessToken:""};const Bc=function(e,t){switch(t.type){case Rc:return{...e,settingSaved:t.payload};case Nc:case Mc:return{...e,error:{...t.payload,id:Date.now()}};case xc:case Pc:return{...e,error:{},googleAnalyticsId:t.payload.googleAnalyticsId,usingLegacyAnalytics:t.payload.usingLegacyAnalytics,adSensePublisherId:t.payload.adSensePublisherId,adSenseSlotId:t.payload.adSenseSlotId,adManagerSlotId:t.payload.adManagerSlotId,adNetwork:t.payload.adNetwork,videoCache:t.payload.videoCache,dataRemoval:t.payload.dataRemoval,archive:t.payload.archive,archivePageId:t.payload.archivePageId,shoppingProvider:t.payload.shoppingProvider,shopifyHost:t.payload.shopifyHost,shopifyAccessToken:t.payload.shopifyAccessToken};default:return e}},Hc=e=>({googleAnalyticsId:e.web_stories_ga_tracking_id,usingLegacyAnalytics:e.web_stories_using_legacy_analytics,adSensePublisherId:e.web_stories_adsense_publisher_id,adSenseSlotId:e.web_stories_adsense_slot_id,adManagerSlotId:e.web_stories_ad_manager_slot_id,adNetwork:e.web_stories_ad_network,videoCache:e.web_stories_video_cache,dataRemoval:e.web_stories_data_removal,archive:e.web_stories_archive,archivePageId:e.web_stories_archive_page_id,shoppingProvider:e.web_stories_shopping_provider,shopifyHost:e.web_stories_shopify_host,shopifyAccessToken:e.web_stories_shopify_access_token});function Uc(){const[e,t]=(0,h.useReducer)(Bc,Dc),{api:{settings:a}}=E();return{settings:e,api:{fetchSettings:(0,h.useCallback)((async()=>{try{const r=await(e=a,nl({path:e}).then(Hc));t({type:xc,payload:r})}catch(e){t({type:Mc,payload:{message:vl.LOAD_SETTINGS.MESSAGE}})}var e}),[a]),updateSettings:(0,h.useCallback)((async e=>{t({type:Rc});try{const r=await function(e,t){const{googleAnalyticsId:a,usingLegacyAnalytics:r,adSensePublisherId:o,adSenseSlotId:n,adManagerSlotId:s,adNetwork:l,videoCache:i,dataRemoval:c,archive:d,archivePageId:u,shoppingProvider:p,shopifyHost:m,shopifyAccessToken:f}=t,b={};void 0!==a&&(b.web_stories_ga_tracking_id=a),void 0!==r&&(b.web_stories_using_legacy_analytics=r),void 0!==o&&(b.web_stories_adsense_publisher_id=o),void 0!==n&&(b.web_stories_adsense_slot_id=n),void 0!==s&&(b.web_stories_ad_manager_slot_id=s),void 0!==l&&(b.web_stories_ad_network=l),void 0!==i&&(b.web_stories_video_cache=Boolean(i)),void 0!==c&&(b.web_stories_data_removal=Boolean(c)),void 0!==d&&(b.web_stories_archive=d),void 0!==u&&(b.web_stories_archive_page_id=u),void 0!==p&&(b.web_stories_shopping_provider=p),void 0!==m&&(b.web_stories_shopify_host=m),void 0!==f&&(b.web_stories_shopify_access_token=f);const h=(0,rl.default)(e,b);return nl({path:h,method:"POST"}).then(Hc)}(a,e);t({type:Pc,payload:r}),t({type:Rc,payload:!0})}catch(e){t({type:Nc,payload:{message:vl.UPDATE_EDITOR_SETTINGS.MESSAGE}})}}),[a])}}}function Fc(){const{api:{pages:e}}=E(),t=(0,h.useCallback)((async t=>{try{const{title:a,link:r}=await function(e,t){const a=(0,rl.default)(`${e}${t}/`,{_fields:il});return nl({path:a})}(e,t);return{title:a.rendered,link:r}}catch(e){return null}}),[e]);return{api:{searchPages:(0,h.useCallback)((async t=>{try{const a=await function(e,t){const a=(0,rl.default)(e,{per_page:100,search:t,_fields:ll});return nl({path:a})}(e,t);return a.map((e=>{let{id:t,title:a}=e;return{value:t,label:a.rendered}}))}catch(e){return[]}}),[e]),getPageById:t}}}const Gc="loading",Yc="update_failure",jc="update_success",zc="fetch_failure",Vc="fetch_success",$c="remove_failure",Zc="remove_success",qc="add_failure",Wc="add_success",Kc={error:{},isLoading:!1,publisherLogos:[],settingSaved:!1};const Xc=function(e,t){switch(t.type){case Gc:return{...e,isLoading:!0,settingSaved:!1};case qc:case Yc:case $c:case zc:return{...e,error:{...t.payload,id:Date.now()},isLoading:!1,settingSaved:!1};case Vc:return{...e,error:{},isLoading:!1,publisherLogos:[...t.payload.publisherLogos]};case Wc:{const a=[...e.publisherLogos,t.payload.publisherLogo];return{...e,error:{},isLoading:!1,settingSaved:!0,publisherLogos:a}}case jc:{const a=[...e.publisherLogos].map((e=>(e.active=e.id===t.payload.publisherLogo.id,e)));return{...e,error:{},isLoading:!1,settingSaved:!0,publisherLogos:a}}case Zc:{const a=e.publisherLogos.some((e=>{let{id:a,active:r}=e;return a===t.payload.id&&r})),r=[...e.publisherLogos].filter((e=>{let{id:a}=e;return a!==t.payload.id})).map(((e,t)=>(e.active=a?0===t:e.active,e)));return{...e,error:{},isLoading:!1,settingSaved:!0,publisherLogos:r}}default:return e}};function Jc(){const[e,t]=(0,h.useReducer)(Xc,Kc),{api:{publisherLogos:a}}=E(),r=(0,h.useCallback)((async()=>{t({type:Gc});try{const r=await(e=a,nl({path:e}));Array.isArray(r)?t({type:Vc,payload:{publisherLogos:r}}):t({type:zc,payload:{message:vl.LOAD_PUBLISHER_LOGOS.MESSAGE}})}catch(e){t({type:zc,payload:{message:vl.LOAD_PUBLISHER_LOGOS.MESSAGE}})}var e}),[a]),o=(0,h.useCallback)((async e=>{t({type:Gc});try{await function(e,t){const a=(0,rl.default)(`${e}${t}/`,{_method:"DELETE"});return nl({path:a,method:"POST"})}(a,e),t({type:Zc,payload:{id:e}})}catch(e){t({type:zc,payload:{message:vl.REMOVE_PUBLISHER_LOGO.MESSAGE}})}}),[a]),n=(0,h.useCallback)((async e=>{t({type:Gc});try{const n=await(r=a,o=e,nl({path:r,data:{id:o},method:"POST"})),s=Array.isArray(n)?n:[n];for(const e of s)t({type:Wc,payload:{publisherLogo:e}})}catch(e){t({type:qc,payload:{message:vl.UPLOAD_PUBLISHER_LOGO.MESSAGE}})}var r,o}),[a]);return{publisherLogos:e,api:{fetchPublisherLogos:r,addPublisherLogo:n,removePublisherLogo:o,setPublisherLogoAsDefault:(0,h.useCallback)((async e=>{t({type:Gc});try{const n=await(r=a,o=e,nl({path:`${r}${o}/`,data:{active:!0},method:"POST"}));t({type:jc,payload:{publisherLogo:n}})}catch(e){t({type:zc,payload:{message:vl.UPDATE_PUBLISHER_LOGO.MESSAGE}})}var r,o}),[a])}}}function Qc(){const{api:{fonts:e}}=E(),[t,a]=(0,h.useState)(null),r=(0,h.useCallback)((async()=>{try{const t=(await function(e){const t=(0,rl.default)(e,{per_page:100,service:"custom"});return nl({path:t})}(e)).map((e=>{let{id:t,family:a,url:r}=e;return{id:t,family:a,url:r}}));return a(t),t}catch{return null}}),[e]),o=(0,h.useCallback)((async r=>{const o=await function(e,t){const a=(0,rl.default)(`${e}${t}/`,{_method:"DELETE"});return nl({path:a,method:"POST"})}(e,r),n=t.filter((e=>e.id!==r));return a(n),o}),[t,e]),n=(0,h.useCallback)((async r=>{const o=await function(e,t){return nl({path:e,data:t,method:"POST"})}(e,r),{id:n,family:s,url:l}=o,i={id:n,family:s,url:l};return a([i,...t]),i}),[t,e]);return{customFonts:t,api:{addCustomFont:n,deleteCustomFont:o,fetchCustomFonts:r}}}const ed=function EditorSettingsProvider(e){let{children:t}=e;const{customFonts:a,api:r}=Qc(),{currentUser:n,api:s}=vc(),{media:l,api:i}=kc(),{settings:c,api:d}=Uc(),{api:u}=Fc(),{publisherLogos:p,api:m}=Jc(),f={state:{media:l,settings:c,currentUser:n,customFonts:a,publisherLogos:p},actions:{fontsApi:r,mediaApi:i,settingsApi:d,usersApi:s,pagesApi:u,publisherLogosApi:m}};return o.createElement(Dl.Provider,{value:f},t)};var td=a(18969);function ad(){return ad=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ad.apply(this,arguments)}const rd=(0,m.default)(mr.Headline).withConfig({displayName:"banner__Title",componentId:"sc-13q35ui-0"})(["grid-area:title;padding-left:8px;"]),od=m.default.div.withConfig({displayName:"banner__Content",componentId:"sc-13q35ui-1"})(["grid-area:content;margin-bottom:4px;max-width:408px;min-width:50%;"]),nd=(0,m.default)(Mt.Button).withConfig({displayName:"banner__CloseButton",componentId:"sc-13q35ui-2"})(["grid-area:closeButton;justify-self:end;align-self:flex-start;"]),sd=m.default.div.withConfig({displayName:"banner__Container",componentId:"sc-13q35ui-3"})(["display:grid;width:100%;min-height:60px;grid-template-columns:104px 1fr auto;grid-column-gap:32px;grid-template-areas:'title content closeButton';align-items:baseline;padding:6px 8px;background-color:",";background-image:url('","');border-radius:",";",""],(e=>{let{theme:t}=e;return t.colors.gray[5]}),(e=>{let{backgroundUrl:t}=e;return t}),(e=>{let{theme:t}=e;return t.borders.radius.medium}),(e=>{let{isDashboard:t}=e;return t&&(0,m.css)(["max-height:184px;border-radius:0;grid-template-columns:1fr 32px;grid-template-rows:3;grid-column-gap:0;grid-template-areas:'. closeButton' 'title title' 'content content';text-align:center;","{padding-left:0;margin-top:-10px;}","{margin:8px auto 18px;max-width:480px;}"],rd,od)})),ld=(0,h.forwardRef)(((e,t)=>{let{backgroundUrl:a,children:r,closeButtonLabel:n,isDashboard:s,title:l,onClose:i,...c}=e;return o.createElement(sd,ad({ref:t,backgroundUrl:a,isDashboard:s},c),o.createElement(rd,{as:"h2",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES[s?"X_SMALL":"XX_SMALL"]},l),o.createElement(nd,{type:Dt.BUTTON_TYPES.TERTIARY,variant:Dt.BUTTON_VARIANTS.SQUARE,size:Dt.BUTTON_SIZES.SMALL,"aria-label":n,onClick:i},o.createElement(td.default,{"aria-hidden":!0})),o.createElement(od,null,r))}));ld.displayName="Banner";const id=a.p+"images/631db33b339209fd6ab0.png";function cd(){return cd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},cd.apply(this,arguments)}const dd=m.default.label.attrs({htmlFor:"telemetry-banner-opt-in"}).withConfig({displayName:"telemetryBanner__Label",componentId:"sc-inh4j2-0"})(["display:flex;cursor:pointer;"]),ud=(0,m.default)(ya.Text).withConfig({displayName:"telemetryBanner__LabelText",componentId:"sc-inh4j2-1"})(["margin-bottom:16px;margin-left:8px;color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.secondary})),pd=(0,m.default)(ya.Text).withConfig({displayName:"telemetryBanner__VisitSettingsText",componentId:"sc-inh4j2-2"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.fg.tertiary})),md=(0,m.default)(ea.Link).withConfig({displayName:"telemetryBanner__NavLink",componentId:"sc-inh4j2-3"})(["display:inline-block;margin:0;"]),fd=(0,h.forwardRef)(((e,t)=>{let{visible:a=!0,disabled:r=!1,onChange:s=(()=>{}),onClose:l=(()=>{}),checked:i=!1}=e;const c=(0,h.useRef)(),d=(0,h.useRef)(!1),u=i?(0,n.__)("Your selection has been updated. Thank you for helping to improve the editor!","web-stories"):(0,n.__)("Help improve the editor!","web-stories");return(0,h.useEffect)((()=>{d.current&&c.current.focus()})),a?o.createElement(ld,{backgroundUrl:id,closeButtonLabel:(0,n.__)("Dismiss telemetry banner","web-stories"),onClose:l,title:u,ref:t,isDashboard:!0},o.createElement(dd,null,o.createElement(Ni.Checkbox,{id:"telemetry-banner-opt-in",checked:i,disabled:r,onChange:()=>{s(),d.current=!0},onBlur:()=>{d.current=!1},ref:c}),o.createElement(ud,{forwardedAs:"span","aria-checked":i,size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o.createElement(bo.default,{mapping:{a:o.createElement(md,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL,href:(0,n.__)("https://policies.google.com/privacy","web-stories"),rel:"noreferrer",target:"_blank","aria-label":(0,n.__)("Learn more by visiting Google Privacy Policy","web-stories")})}},(0,n.__)("Check the box to help us improve the Web Stories plugin by allowing tracking of product usage stats. All data are treated in accordance with <a>Google Privacy Policy</a>.","web-stories")))),o.createElement(pd,{forwardedAs:"span",size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL},o.createElement(bo.default,{mapping:{a:o.createElement(md,{size:ka.THEME_CONSTANTS.TYPOGRAPHY.PRESET_SIZES.X_SMALL,href:cr(Cl),"aria-label":(0,n.__)("Settings","web-stories")})}},(0,n.__)("You can update your selection later by visiting <a>Settings</a>.","web-stories")))):null}));function TelemetryBannerContainer(e){const{bannerVisible:t,closeBanner:a,optedIn:r,disabled:n,toggleWebStoriesTrackingOptIn:s}=Gl(),l=(0,h.useRef)(),i=(0,h.useRef)(t);return(0,h.useLayoutEffect)((()=>{t&&!1===i.current&&l.current?i.current=!0:!t&&i.current&&(i.current=!1)}),[t]),o.createElement(fd,cd({ref:l,visible:t,checked:r,disabled:n,onChange:s,onClose:a},e))}function TelemetryBanner(){const{currentPath:e}=ir((e=>{let{state:t}=e;return{currentPath:t.currentPath}})),t=(0,h.useRef)(null),[,a]=(0,h.useState)(!1);return(0,h.useEffect)((()=>{[He.DASHBOARD,He.TEMPLATES_GALLERY].includes(e)&&(t.current=document.getElementById("body-view-options-header"),a((e=>!e)))}),[e,a]),t.current?(0,h.createPortal)(o.createElement(TelemetryBannerContainer,null),t.current):null}fd.displayName="TelemetryOptInBanner";const bd=function(){return Ml(),o.createElement(ed,null,o.createElement(el,{additionalRoutes:[{path:Cl,component:o.createElement(wc,null)}]}),o.createElement(TelemetryBanner,null))};window.webStories=window.webStories||{},window.webStories.initializeStoryDashboard=(e,t)=>{const a=document.getElementById(e);(0,tl.setAppElement)(a),(0,mt.updateSettings)(t.locale),(0,T.initializeTracking)("Dashboard",!1);const s={...t,apiCallbacks:(0,al.default)(r,t),leftRailSecondaryNavigation:Il,documentTitleSuffix:(0,n.__)("Web Stories − WordPress","web-stories"),styleConstants:{topOffset:32,leftOffset:36},containerId:"wpbody"};(0,h.render)(o.createElement(h.StrictMode,null,o.createElement(fo,{config:s},o.createElement(xl,null),o.createElement(bd,null))),a)}}},s={};function __webpack_require__(e){var t=s[e];if(void 0!==t)return t.exports;var a=s[e]={exports:{}};return n[e].call(a.exports,a,a.exports,__webpack_require__),a.exports}__webpack_require__.m=n,e=[],__webpack_require__.O=(t,a,r,o)=>{if(!a){var n=1/0;for(c=0;c<e.length;c++){for(var[a,r,o]=e[c],s=!0,l=0;l<a.length;l++)(!1&o||n>=o)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](a[l])))?a.splice(l--,1):(s=!1,o<n&&(n=o));if(s){e.splice(c--,1);var i=r();void 0!==i&&(t=i)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[a,r,o]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);__webpack_require__.r(o);var n={};t=t||[null,a({}),a([]),a(a)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=a(s))Object.getOwnPropertyNames(s).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,__webpack_require__.d(o,n),o},__webpack_require__.d=(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,a)=>(__webpack_require__.f[a](e,t),t)),[])),__webpack_require__.u=e=>1814===e?"1814.js":({8:"chunk-web-stories-template-5",69:"chunk-web-stories-template-60-metaData",274:"chunk-web-stories-template-56",354:"chunk-web-stories-template-19",410:"chunk-web-stories-template-24",533:"chunk-web-stories-template-42-metaData",824:"chunk-web-stories-template-36",827:"chunk-web-stories-template-27-metaData",884:"chunk-web-stories-template-18-metaData",907:"chunk-web-stories-template-57",1049:"chunk-web-stories-template-37",1066:"chunk-web-stories-template-44-metaData",1231:"chunk-web-stories-template-12",1340:"chunk-web-stories-template-30-metaData",1380:"chunk-web-stories-template-33-metaData",1403:"chunk-web-stories-template-37-metaData",1738:"chunk-web-stories-template-32",1789:"chunk-web-stories-template-43",1813:"chunk-web-stories-template-10-metaData",1847:"chunk-web-stories-template-12-metaData",1858:"chunk-web-stories-template-1",1970:"chunk-web-stories-template-22-metaData",2068:"chunk-web-stories-template-46",2167:"chunk-web-stories-template-32-metaData",2191:"chunk-web-stories-template-49-metaData",2235:"chunk-web-stories-template-51-metaData",2246:"chunk-web-stories-template-45-metaData",2319:"chunk-web-stories-template-31-metaData",2338:"chunk-web-stories-template-25",2374:"chunk-web-stories-template-2-metaData",2454:"chunk-web-stories-template-6",2558:"chunk-web-stories-template-53-metaData",2776:"chunk-web-stories-template-9-metaData",2794:"chunk-opentype",2830:"chunk-web-stories-template-36-metaData",2880:"chunk-web-stories-template-8",2894:"chunk-web-stories-template-34-metaData",3041:"chunk-web-stories-template-15-metaData",3194:"chunk-web-stories-template-29-metaData",3245:"chunk-web-stories-template-28",3289:"chunk-web-stories-template-43-metaData",3304:"chunk-web-stories-template-49",3441:"chunk-web-stories-template-45",3529:"chunk-web-stories-template-39",3710:"chunk-web-stories-template-35",3772:"chunk-web-stories-template-60",3777:"chunk-web-stories-template-34",3864:"chunk-web-stories-template-4-metaData",3969:"chunk-web-stories-template-9",4051:"chunk-web-stories-template-40-metaData",4142:"chunk-web-stories-template-29",4178:"chunk-web-stories-template-24-metaData",4386:"chunk-web-stories-template-41",4585:"chunk-web-stories-template-38-metaData",4874:"chunk-web-stories-template-35-metaData",4991:"chunk-web-stories-templates",5016:"chunk-web-stories-template-21-metaData",5040:"chunk-web-stories-template-16",5157:"chunk-web-stories-template-33",5312:"chunk-web-stories-template-14",5372:"chunk-web-stories-template-6-metaData",5397:"chunk-web-stories-template-8-metaData",5432:"chunk-web-stories-template-26",5535:"chunk-web-stories-template-15",5543:"chunk-web-stories-template-31",5553:"chunk-web-stories-template-20-metaData",5570:"chunk-web-stories-template-54-metaData",5573:"chunk-web-stories-template-52-metaData",5748:"chunk-web-stories-template-54",5835:"chunk-web-stories-template-30",6053:"chunk-web-stories-template-16-metaData",6188:"chunk-web-stories-template-42",6204:"chunk-web-stories-template-0-metaData",6271:"chunk-web-stories-template-39-metaData",6305:"chunk-web-stories-template-5-metaData",6311:"chunk-web-stories-template-23-metaData",6353:"chunk-web-stories-template-1-metaData",6406:"chunk-web-stories-template-4",6428:"chunk-web-stories-template-13",6500:"chunk-web-stories-template-0",6517:"chunk-web-stories-template-52",6539:"chunk-web-stories-template-58-metaData",6592:"chunk-web-stories-template-51",6641:"chunk-web-stories-template-28-metaData",6766:"chunk-web-stories-template-19-metaData",6841:"chunk-web-stories-template-58",6852:"chunk-web-stories-template-27",7131:"chunk-web-stories-template-20",7314:"chunk-web-stories-template-25-metaData",7343:"chunk-web-stories-template-47",7346:"chunk-web-stories-template-7",7399:"chunk-web-stories-template-38",7441:"chunk-web-stories-template-48",7502:"chunk-web-stories-template-23",7528:"chunk-web-stories-template-14-metaData",7586:"chunk-web-stories-template-40",7588:"chunk-web-stories-template-55-metaData",7685:"chunk-web-stories-template-59",7798:"chunk-web-stories-template-50-metaData",7799:"chunk-web-stories-template-3",7863:"chunk-web-stories-template-47-metaData",7952:"chunk-web-stories-template-3-metaData",8022:"chunk-web-stories-template-26-metaData",8189:"chunk-web-stories-template-56-metaData",8203:"chunk-web-stories-template-44",8257:"chunk-web-stories-template-22",8344:"chunk-web-stories-template-10",8422:"chunk-web-stories-template-41-metaData",8551:"chunk-web-stories-template-18",8624:"chunk-focus-visible",8768:"chunk-web-stories-template-11-metaData",8856:"chunk-web-stories-template-48-metaData",9074:"chunk-web-stories-template-7-metaData",9233:"chunk-web-stories-template-53",9288:"chunk-web-stories-template-55",9302:"chunk-web-stories-template-17-metaData",9375:"chunk-web-stories-template-57-metaData",9393:"chunk-web-stories-template-59-metaData",9557:"chunk-web-stories-template-13-metaData",9591:"chunk-web-stories-template-50",9603:"chunk-web-stories-template-17",9607:"chunk-web-stories-template-2",9700:"chunk-web-stories-template-11",9738:"chunk-web-stories-template-46-metaData",9811:"chunk-web-stories-template-21"}[e]||e)+".js?v="+{8:"c20cb6b1c9c9de82ade8",69:"81135ade36bbc74c91bd",274:"531855a8b0ea7cf10bc1",354:"c46fba043277569cef70",410:"bba36e057121750ffcb0",533:"2618e82c53897f1e8851",824:"1b145b3e12e68e40e13c",827:"e005ff6e757c851d757a",884:"acc2ee2b29e6e43e883d",907:"9db9e0d74e33a802c55c",1049:"2a9cacc55c0e62c66ff5",1066:"625607fa8c088b11b98f",1231:"d347d84c4c6834afc592",1340:"b34b77490cda8860a7bd",1380:"b140d7ccc88c8097ef10",1403:"1299ff1423d51964aed5",1738:"fc5c9d2639af5d0b3624",1789:"a6a16726a991de70fbc5",1813:"b6b660fb2322c3356b7f",1847:"cff101676974dbe707da",1858:"a7a4e84cf2358937c702",1970:"5e59428c1c658bd238bf",2068:"a5ba154cea4f2c145b1b",2167:"4f51e902c8fc878805cb",2191:"6825f1c9583c84cac846",2235:"c87e92173feb05d95e42",2246:"32ad2530e9caf703f6ac",2319:"c7dd69e28f8ecc688d34",2338:"d624370b2bba5196e86c",2374:"f01bbae44d01e30869bc",2454:"241e9af96fbedbc8ec81",2558:"07190d5203f972a278fe",2776:"11f16200ff735fa32308",2794:"927fa47fdf971edaedf3",2830:"ea335a53920736f68886",2880:"9353228458b13930ace4",2894:"cc169ef2dbf4dc2fddf3",3041:"c9c43701ba51c14b2d3f",3194:"1c1f496ea1108c9b9b4e",3245:"b3adf4a2a3d38806bf5d",3289:"74c3e5d75ea98e8cabc8",3304:"4b069fb3adc76420ad19",3441:"ddb9f655a65672334818",3529:"bbcc4956bdda0f258486",3710:"d5fdbdb8f7a453c4c50c",3772:"cde901248b0f2a636fcb",3777:"4f3f236d567d6abe293d",3864:"d7af38fc909ec898f64f",3969:"61c261261c57e2a453f6",4051:"2de1ce2c768815932b43",4142:"12afc0332ed646141f13",4178:"f39dba6f25d1eec5a9c9",4386:"9eeb20a4763698a5b9bc",4422:"bb914ab1839ba5a3890a",4585:"88585967837dcb0dffa9",4874:"8a4645327379893a8ddf",4991:"3b4db73fb3d1aef13315",5016:"6ca7bdf85c9f9b4c23a7",5040:"1d60ed19cd5f7107a4c2",5157:"656eb9b97381c73343fa",5312:"bbbde04609858065fcc7",5372:"4447226bc2f400a652e2",5397:"ec7a78356aedb5305fa0",5432:"90d9099d77d232d4f766",5535:"32eecfe836cc14a8a850",5543:"cc0f686d04be4651cc14",5553:"0eb11de64775aa7fa6a2",5570:"9da56d58836717cd9c1d",5573:"eee8720e3473b021a2c1",5748:"a531210d2c9be9f1f6ee",5835:"7c687df8f93e6de17fa9",6053:"06cabaef6251f39fd887",6188:"4fbc7c12ab859d4de76f",6204:"918c70284a4ef16b3071",6271:"1d8eaaef930166fc4b2f",6305:"0100d0220f30ad0f576e",6311:"575d219d720674867a16",6353:"189ab6b0146348fed80b",6406:"a817ff612533fcae143a",6428:"9fa28391d6d1a70fad8e",6500:"151039f32250ccaff5fa",6517:"fd34bdb14eaa0a00aec3",6539:"9a015951f1640ce169f3",6592:"8cafd3caabb0b0add01c",6641:"b57cfb82831d417df31c",6766:"4f945608fe7be6287957",6841:"310ba20231bc0a8c8dd2",6852:"9a39f8578c81b8f407d8",7131:"cad8511086274018b209",7314:"4420d1ccc83e26f40003",7343:"331d87de208a1fc7fa4b",7346:"7e474f4096c38417fc2f",7399:"6043405739608eaa778f",7441:"15ce4e5223acfa4163ce",7502:"044a514ff6b15b4a6286",7528:"c9f5f9318601d830dfbe",7586:"ac52f5b8925fd27aff71",7588:"2cb553fe05f44e5c8ea1",7685:"2ff8204af1063449354d",7798:"3c038b43e2b142391097",7799:"c7cdf9db3fe4755e705f",7863:"0ffc6003559e00f41182",7952:"ba2dc41142cc631d9048",8022:"f118eca1cd61218c6dad",8189:"984529d3d9a66d444901",8203:"302daa0d96da571e5878",8257:"1f5db8e0732244b01333",8344:"59342808f5e740c15e1a",8422:"462838c88f07ebbb9e4a",8551:"70a0fb59b963886dc2df",8624:"1389926372b6c5df79e5",8768:"5981f5dc9bd0c707841f",8856:"258bf9caaabdc4b5279b",9074:"07639ba24891c53d7acd",9233:"fbb1b9d6d5fc8d036930",9288:"b8eacbb9c77db6d142cd",9302:"3399ee6a7aea29bafbc2",9375:"ffe508c1bcb1153697ff",9393:"9df19c22addeaed15e2c",9557:"0c1cabd44a065565907c",9591:"73ab1bcf6c1cb494d538",9603:"ba0fd7411b5479f1c4a7",9607:"0ba9d2cf629caea04e3a",9700:"fe4d797180b482649d1a",9738:"814d13cf9c451352350e",9811:"39ca89bed393fd62ffc2"}[e],__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},o="web-stories-wp:",__webpack_require__.l=(e,t,a,n)=>{if(r[e])r[e].push(t);else{var s,l;if(void 0!==a)for(var i=document.getElementsByTagName("script"),c=0;c<i.length;c++){var d=i[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==o+a){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc),s.setAttribute("data-webpack",o+a),s.src=e),r[e]=[t];var u=(t,a)=>{s.onerror=s.onload=null,clearTimeout(p);var o=r[e];if(delete r[e],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(a))),t)return t(a)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),l&&document.head.appendChild(s)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="",(()=>{var e={402:0};__webpack_require__.f.j=(t,a)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else{var o=new Promise(((a,o)=>r=e[t]=[a,o]));a.push(r[2]=o);var n=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(n,(a=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",s.name="ChunkLoadError",s.type=o,s.request=n,r[1](s)}}),"chunk-"+t,t)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,a)=>{var r,o,[n,s,l]=a,i=0;if(n.some((t=>0!==e[t]))){for(r in s)__webpack_require__.o(s,r)&&(__webpack_require__.m[r]=s[r]);if(l)var c=l(__webpack_require__)}for(t&&t(a);i<n.length;i++)o=n[i],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return __webpack_require__.O(c)},a=globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=__webpack_require__.O(void 0,[9767,180,5918],(()=>__webpack_require__(49014)));l=__webpack_require__.O(l)})();